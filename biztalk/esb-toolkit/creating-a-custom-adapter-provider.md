---
title: Crear un proveedor de adaptador personalizado | Documentos de Microsoft
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: bb93acf8-fd9d-4315-8690-f0c152a954b5
caps.latest.revision: "2"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: feb9efa5ad879e86f32ca1963313dadc7e6a9d7e
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
---
# <a name="creating-a-custom-adapter-provider"></a><span data-ttu-id="59005-102">Crear un proveedor de adaptador personalizado</span><span class="sxs-lookup"><span data-stu-id="59005-102">Creating a Custom Adapter Provider</span></span>
<span data-ttu-id="59005-103">Una vez ejecutada una resolución, tal como se describe en las secciones anteriores, el servicio de resolución dinámica comprueba si el resultado es un punto de conexión (no una transformación).</span><span class="sxs-lookup"><span data-stu-id="59005-103">After a resolver executes, as described in the previous sections, the dynamic resolution service checks whether the result is an endpoint (not a transformation).</span></span> <span data-ttu-id="59005-104">Si es un punto de conexión, el servicio crea instancias el Administrador de adaptador, que es una instancia de la **AdapterMgr** clase.</span><span class="sxs-lookup"><span data-stu-id="59005-104">If it is an endpoint, the service instantiates the adapter manager, which is an instance of the **AdapterMgr** class.</span></span>  
  
 <span data-ttu-id="59005-105">El Administrador de adaptador valida y corrige el tipo de transporte y la ubicación de transporte de salida.</span><span class="sxs-lookup"><span data-stu-id="59005-105">The adapter manager validates and fixes the transport type and the outbound transport location.</span></span> <span data-ttu-id="59005-106">Si el tipo de transporte se sigue sin resolverse, y si la dirección URL comienza con "http" o "https", el Administrador de adaptador establece el tipo de transporte para "WCF-WSHttp".</span><span class="sxs-lookup"><span data-stu-id="59005-106">If the transport type is still not resolved, and if the URL begins with either "http" or "https", the adapter manager sets the transport type to "WCF-WSHttp".</span></span>  
  
 <span data-ttu-id="59005-107">A continuación, el Administrador de adaptador comprueba que el tipo de transporte equivale a un adaptador de Microsoft BizTalk Server válido y, a continuación, devuelve su espacio de nombres de propiedad.</span><span class="sxs-lookup"><span data-stu-id="59005-107">Next, the adapter manager verifies that the transport type equates to a valid Microsoft BizTalk Server adapter, and then it returns its property namespace.</span></span> <span data-ttu-id="59005-108">Este proceso se ejecuta sólo una vez para todos los adaptadores y almacena los resultados en una caché para evitar consultas repetidas otros mensajes entrantes que utilizan el mismo adaptador.</span><span class="sxs-lookup"><span data-stu-id="59005-108">This process runs only once for all adapters and stores the results in a cache to avoid repeated queries for other incoming messages that use the same adapter.</span></span>  
  
 <span data-ttu-id="59005-109">El Administrador de adaptador usa el tipo de transporte (sin el "**://**" sufijo) para determinar el proveedor del adaptador adecuado.</span><span class="sxs-lookup"><span data-stu-id="59005-109">The adapter manager uses the transport type (without the "**://**" suffix) to determine the appropriate adapter provider.</span></span> <span data-ttu-id="59005-110">Un proveedor de adaptador es un ensamblado personalizado que debe implementar la **IAdapterProvider** interfaz.</span><span class="sxs-lookup"><span data-stu-id="59005-110">An adapter provider is a custom assembly that must implement the **IAdapterProvider** interface.</span></span> <span data-ttu-id="59005-111">El proveedor del adaptador utiliza las propiedades de la **resolución** estructura en la **diccionario** instancia generada por la resolución para establecer todas las propiedades específicas del protocolo del mensaje que permite la Motor de tiempo de ejecución de Microsoft BizTalk Server para realizar la resolución dinámica.</span><span class="sxs-lookup"><span data-stu-id="59005-111">The adapter provider uses the properties of the **Resolution** structure in the **Dictionary** instance generated by the resolver to set all the protocol-specific properties of the message that enables the Microsoft BizTalk Server run-time engine to perform dynamic resolution.</span></span>  
  
 <span data-ttu-id="59005-112">Como con la resolución (descrita en la sección anterior), el mecanismo de resolución dinámica utiliza las entradas en el archivo de configuración Esb.config para encontrar proveedores del adaptador.</span><span class="sxs-lookup"><span data-stu-id="59005-112">Like with the resolver (described in the previous section), the dynamic resolution mechanism uses entries in the Esb.config configuration file to locate adapter providers.</span></span> <span data-ttu-id="59005-113">El siguiente XML muestra la sección del archivo de configuración.</span><span class="sxs-lookup"><span data-stu-id="59005-113">The following XML shows the section of the configuration file.</span></span>  
  
```xml  
<adapterProviders cacheManager= "Adapter Providers Cache Manager"  absoluteExpiration="3600">  
     <adapterProvider name="WCF-WSHttp" type="Microsoft.Practices.ESB.Adapter.WcfWSHttp.AdapterProvider, Microsoft.Practices.ESB.Adapter.WcfWSHttp, Version=2.0.0.0, Culture=neutral, PublicKeyToken=c62dd63c784d6e22" moniker="Http,Https" />  
     <adapterProvider name="WCF-BasicHttp" type="Microsoft.Practices.ESB.Adapter.WcfBasicHttp.AdapterProvider, Microsoft.Practices.ESB.Adapter.WcfBasicHttp, Version=2.0.0.0, Culture=neutral, PublicKeyToken=c62dd63c784d6e22" moniker="Http,Https" />  
     <adapterProvider name="WCF-Custom" type="Microsoft.Practices.ESB.Adapter.WcfCustom.AdapterProvider, Microsoft.Practices.ESB.Adapter.WcfCustom, Version=2.0.0.0, Culture=neutral, PublicKeyToken=c62dd63c784d6e22" moniker="mssql" />  
     <adapterProvider name="SMTP" type="Microsoft.Practices.ESB.Adapter.SMTP.AdapterProvider, Microsoft.Practices.ESB.Adapter.SMTP, Version=2.0.0.0, Culture=neutral, PublicKeyToken=c62dd63c784d6e22" moniker="smtp" />  
     <adapterProvider name="FTP" type="Microsoft.Practices.ESB.Adapter.FTP.AdapterProvider, Microsoft.Practices.ESB.Adapter.FTP, Version=2.0.0.0, Culture=neutral, PublicKeyToken=c62dd63c784d6e22">  
          <adapterConfig>  
               <add name="DefaultUsername" value="anonymous" />  
               <add name="DefaultPassword" value="" />  
          </adapterConfig>  
     </adapterProvider>  
     <adapterProvider name="MQSeries" type="Microsoft.Practices.ESB.Adapter.MQSeries.AdapterProvider, Microsoft.Practices.ESB.Adapter.MQSeries, Version=2.0.0.0, Culture=neutral, PublicKeyToken=c62dd63c784d6e22" moniker="MQS" adapterAssembly="MQSeries, Version=3.0.1.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />  
     <adapterProvider name="FILE" type="Microsoft.Practices.ESB.Adapter.FILE.AdapterProvider, Microsoft.Practices.ESB.Adapter.FILE, Version=2.0.0.0, Culture=neutral, PublicKeyToken=c62dd63c784d6e22" moniker="File" />  
</adapterProviders>  
```  
  
## <a name="creating-a-custom-adapter-provider"></a><span data-ttu-id="59005-114">Crear un proveedor de adaptador personalizado</span><span class="sxs-lookup"><span data-stu-id="59005-114">Creating a Custom Adapter Provider</span></span>  
 <span data-ttu-id="59005-115">El Administrador de adaptador (una instancia de la **AdapterMgr** clase) busca el proveedor del adaptador en los archivos de configuración y carga el ensamblado adecuado.</span><span class="sxs-lookup"><span data-stu-id="59005-115">The adapter manager (an instance of the **AdapterMgr** class) looks up the adapter provider in the configuration files and loads the appropriate assembly.</span></span> <span data-ttu-id="59005-116">El mecanismo de resolución dinámica almacena en caché cargadas todas las implementaciones concretas de la **IAdapterProvider** interfaz para evitar la lectura repetida de información de configuración y cuando usan varios mensajes entrantes de carga de ensamblados el mismo proveedor de adaptador.</span><span class="sxs-lookup"><span data-stu-id="59005-116">The dynamic resolution mechanism caches all loaded concrete implementations of the **IAdapterProvider** interface to avoid repeated reading of configuration information and assembly loading when several incoming messages use the same adapter provider.</span></span>  
  
 <span data-ttu-id="59005-117">Por último, se ejecuta el Administrador de adaptador el **SetEndPoint** método de la implementación concreta de la **IAdapterProvider** interfaz y el componente de canalización devuelve el mensaje a BizTalk Base de datos de cuadro de mensaje.</span><span class="sxs-lookup"><span data-stu-id="59005-117">Finally, the adapter manager executes the **SetEndPoint** method of the concrete implementation of the **IAdapterProvider** interface, and the pipeline component returns the message to the BizTalk Message Box database.</span></span>  
  
 <span data-ttu-id="59005-118">**Para crear un proveedor de adaptador personalizado**</span><span class="sxs-lookup"><span data-stu-id="59005-118">**To create a custom adapter provider**</span></span>  
  
1.  <span data-ttu-id="59005-119">Crear un ensamblado que se deriva de la **BaseAdapterProvider** clase base y contiene un **SetEndPoint** método que establece el punto de conexión en las propiedades de contexto del mensaje.</span><span class="sxs-lookup"><span data-stu-id="59005-119">Create an assembly that derives from the **BaseAdapterProvider** base class and contains a **SetEndPoint** method that sets the endpoint context properties of the message.</span></span>  
  
2.  <span data-ttu-id="59005-120">Registrar el proveedor del adaptador, éste se agrega a los archivos de configuración de Esb.config con un  **\<adapterProvider >** elemento con un nombre para el adaptador como la **nombre** atributo, el totalmente nombre completo de la clase como el **tipo** de atributo, el moniker como el **moniker** atributo (varios valores deben estar separados por una coma) y, opcionalmente, el ensamblado del adaptador real como el **adapterAssembly** atributo.</span><span class="sxs-lookup"><span data-stu-id="59005-120">Register the adapter provider by adding it to Esb.config configuration files using an **\<adapterProvider>** element with a name for the adapter as the **name** attribute, the fully qualified name of the class as the **type** attribute, the moniker as the **moniker** attribute (multiple values should be separated by a comma), and optionally the assembly of the actual adapter as the **adapterAssembly** attribute.</span></span>  
  
3.  <span data-ttu-id="59005-121">Registrar el nuevo ensamblado en la caché global de ensamblados.</span><span class="sxs-lookup"><span data-stu-id="59005-121">Register the new assembly in the global assembly cache.</span></span>
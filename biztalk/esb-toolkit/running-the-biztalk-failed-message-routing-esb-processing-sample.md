---
title: "Ejecución de BizTalk no pudo ejemplo de procesamiento de ESB de enrutamiento de mensajes | Documentos de Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: d2a536a0-cfc8-4ba3-adcd-2b8b580bff85
caps.latest.revision: "2"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: a19f8c29c22638be97ae62dfea88d0d2feca6c55
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
---
# <a name="running-the-biztalk-failed-message-routing-esb-processing-sample"></a><span data-ttu-id="11501-102">Ejecución de BizTalk no pudo ejemplo de procesamiento de ESB de enrutamiento de mensajes</span><span class="sxs-lookup"><span data-stu-id="11501-102">Running the BizTalk Failed Message Routing ESB Processing Sample</span></span>
<span data-ttu-id="11501-103">El ejemplo de Microsoft BizTalk no se pudo enrutamiento ESB procesamiento de mensajes muestra cómo se puede utilizar el [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] marco de administración de excepciones como un mecanismo de universal para administrar, serializar y representar las excepciones que se producen en todas las condiciones de [!INCLUDE[prague](../includes/prague-md.md)].</span><span class="sxs-lookup"><span data-stu-id="11501-103">The Microsoft BizTalk Failed Message Routing ESB Processing sample demonstrates how you can use the [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] Exception Management Framework as a universal mechanism to manage, serialize, and render exceptions occurring under all conditions in [!INCLUDE[prague](../includes/prague-md.md)].</span></span> <span data-ttu-id="11501-104">Esto incluye las excepciones generadas por el enrutamiento de mensajes de error de BizTalk mecanismo y error mensajes generados por el marco de administración de excepción desde una orquestación.</span><span class="sxs-lookup"><span data-stu-id="11501-104">This includes exceptions generated by the BizTalk Failed Message Routing mechanism and fault messages generated by the Exception Management Framework from within an orchestration.</span></span>  
  
 <span data-ttu-id="11501-105">El mecanismo de enrutamiento de mensajes de error de BizTalk es la funcionalidad de control de errores de [!INCLUDE[prague](../includes/prague-md.md)]; gracias a ella, el diseñador puede designar un control automatizado de mensajes con errores como alternativa al tradicional comportamiento (ahora como configuración predeterminada) de colocar errores mensajes en la cola de "Suspensión".</span><span class="sxs-lookup"><span data-stu-id="11501-105">The BizTalk Failed Message Routing mechanism is the error-handling facility of [!INCLUDE[prague](../includes/prague-md.md)]; by using it, the designer can designate automated handling of messaging failures as an alternative to the traditional (now default) behavior of placing failed messages in the "Suspended" queue.</span></span> <span data-ttu-id="11501-106">Este control automatizado enruta un mensaje de error a cualquier destino de enrutamiento de suscripción, como un puerto de envío o una orquestación.</span><span class="sxs-lookup"><span data-stu-id="11501-106">This automated handling routes an error message to any subscribing routing destination, such as a send port or an orchestration.</span></span> <span data-ttu-id="11501-107">El mensaje de error es un clon del mensaje original con todas las propiedades anteriormente promocionadas degradadas y con propiedades seleccionadas relacionadas al error de mensajería específico promocionadas en el contexto del mensaje.</span><span class="sxs-lookup"><span data-stu-id="11501-107">The error message is a clone of the original message with all previously promoted properties demoted and with selected properties related to the specific messaging failure promoted into the message context.</span></span>  
  
 <span data-ttu-id="11501-108">Para habilitar el mecanismo de enrutamiento de mensajes de error de BizTalk en un puerto de recepción o un puerto de envío, seleccione el **habilitar enrutamiento para mensajes con errores** casilla de verificación, tal como se muestra en la figura 1.</span><span class="sxs-lookup"><span data-stu-id="11501-108">To enable the BizTalk Failed Message Routing mechanism on a receive port or a send port, select the **Enable routing for failed messages** check box, as shown in Figure 1.</span></span>  
  
 <span data-ttu-id="11501-109">![Enrutamiento habilitado](../esb-toolkit/media/ch6-enabledrouting.gif "Ch6-EnabledRouting")</span><span class="sxs-lookup"><span data-stu-id="11501-109">![Enabled Routing](../esb-toolkit/media/ch6-enabledrouting.gif "Ch6-EnabledRouting")</span></span>  
  
 <span data-ttu-id="11501-110">**Figura 1**</span><span class="sxs-lookup"><span data-stu-id="11501-110">**Figure 1**</span></span>  
  
 <span data-ttu-id="11501-111">**Habilitar el mecanismo de enrutamiento de mensajes de error de BizTalk**</span><span class="sxs-lookup"><span data-stu-id="11501-111">**Enabling the BizTalk Failed Message Routing mechanism**</span></span>  
  
 <span data-ttu-id="11501-112">Sin embargo, no hay un mecanismo similar si hay errores o errores que se producen en una orquestación.</span><span class="sxs-lookup"><span data-stu-id="11501-112">However, there is not a similar mechanism for errors or failures occurring in an orchestration.</span></span> <span data-ttu-id="11501-113">En su lugar, el código en el controlador de excepciones de una orquestación puede sacar partido de la API de marco de trabajo de administración de excepciones para emular la funcionalidad del mecanismo de enrutamiento de mensajes de error de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="11501-113">Instead, code within the exception handler of an orchestration can take advantage of the Exception Management Framework API to emulate the functionality of the BizTalk Failed Message Routing mechanism.</span></span>  
  
 <span data-ttu-id="11501-114">En este ejemplo, la ubicación de recepción denominada EAIProcess.RequestPort_FILE recoge archivos copiados en la ubicación \Source\Samples\Exception Handling\Test\Filedrop\EAIProcess.RequestPort.</span><span class="sxs-lookup"><span data-stu-id="11501-114">In this sample, the receive location named EAIProcess.RequestPort_FILE picks up files copied to the location \Source\Samples\Exception Handling\Test\Filedrop\EAIProcess.RequestPort.</span></span>  
  
 <span data-ttu-id="11501-115">Además, hay un puerto de envío genérico llamado todos. Exceptions_FILE configurado para usar la canalización de GlobalFaultProcessor instalada como parte de la estructura de administración de la excepción.</span><span class="sxs-lookup"><span data-stu-id="11501-115">Additionally, there is a generic send port named ALL.Exceptions_FILE configured to use the GlobalFaultProcessor pipeline installed as part of the Exception Management Framework.</span></span> <span data-ttu-id="11501-116">Este puerto se suscribe a todas las excepciones que se producen en el sistema, ambos BizTalk no pudo mensaje enrutamiento de mensajes y mensajes de error ESB, tal como se muestra en la figura 2.</span><span class="sxs-lookup"><span data-stu-id="11501-116">This port subscribes to all exceptions occurring in the system, both BizTalk failed message routing messages and ESB fault messages, as shown in Figure 2.</span></span>  
  
 <span data-ttu-id="11501-117">![Puerto de envío](../esb-toolkit/media/ch6-sendport.gif "Ch6-SendPort")</span><span class="sxs-lookup"><span data-stu-id="11501-117">![Send Port](../esb-toolkit/media/ch6-sendport.gif "Ch6-SendPort")</span></span>  
  
 <span data-ttu-id="11501-118">**Figura 2**</span><span class="sxs-lookup"><span data-stu-id="11501-118">**Figure 2**</span></span>  
  
 <span data-ttu-id="11501-119">**ALL. Suscripción de puerto para todos los tipos de excepción o un error de envío de excepciones**</span><span class="sxs-lookup"><span data-stu-id="11501-119">**The ALL.Exceptions send port subscription for all types of failure or exception**</span></span>  
  
 <span data-ttu-id="11501-120">El marco de trabajo de administración de excepciones se normaliza todas las excepciones en un único formato y se serializa utilizando una instrucción de procesamiento de Microsoft InfoPath en la ubicación \Source\Samples\Exception Handling\Test\Filedrop\All_Exceptions.</span><span class="sxs-lookup"><span data-stu-id="11501-120">The Exception Management Framework normalizes all exceptions to a single format and serializes them using a Microsoft InfoPath processing instruction to the location \Source\Samples\Exception Handling\Test\Filedrop\All_Exceptions.</span></span>  
  
## <a name="installation"></a><span data-ttu-id="11501-121">Installation</span><span class="sxs-lookup"><span data-stu-id="11501-121">Installation</span></span>  
 <span data-ttu-id="11501-122">Todos los ejemplos de administración de excepciones utilizan el mismo conjunto de servicios principales y artefactos de la aplicación de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="11501-122">All the exception management samples use the same set of core services and BizTalk application artifacts.</span></span> <span data-ttu-id="11501-123">Por lo tanto, tendrá que instalar los artefactos de ejemplo de administración de excepción sólo una vez para poder ejecutar la excepción de todos los ejemplos de administración.</span><span class="sxs-lookup"><span data-stu-id="11501-123">Therefore, you have to install the exception management sample artifacts only once to be able to run all the exception management samples.</span></span> <span data-ttu-id="11501-124">Para obtener información acerca de cómo instalar los ejemplos de administración de excepciones, vea [instalar los ejemplos de administración de excepción](../esb-toolkit/installing-the-exception-management-samples.md).</span><span class="sxs-lookup"><span data-stu-id="11501-124">For information about how to install the exception management samples, see [Installing the Exception Management Samples](../esb-toolkit/installing-the-exception-management-samples.md).</span></span>  
  
## <a name="running-the-sample-application"></a><span data-ttu-id="11501-125">Ejecutar la aplicación de ejemplo</span><span class="sxs-lookup"><span data-stu-id="11501-125">Running the Sample Application</span></span>  
 <span data-ttu-id="11501-126">**Para ejecutar el ejemplo de BizTalk no se pudo enrutamiento ESB procesamiento de mensajes**</span><span class="sxs-lookup"><span data-stu-id="11501-126">**To run the BizTalk Failed Message Routing ESB Processing sample**</span></span>  
  
1.  <span data-ttu-id="11501-127">Antes de ejecutar este ejemplo por primera vez, asegúrese de que la recepción dirección URL de puerto de envío y de ubicación apuntan a los directorios adecuados en la carpeta \Source\Samples\Exception Handling\Test\Filedrop.</span><span class="sxs-lookup"><span data-stu-id="11501-127">Before you run this sample for the first time, make sure that the receive location and send port URL point to the appropriate directories in the \Source\Samples\Exception Handling\Test\Filedrop folder.</span></span> <span data-ttu-id="11501-128">La ubicación de recepción debe especificar la carpeta EAIProcess.RequestPort y la dirección URL de puerto de envío debe especificar la carpeta All_Exceptions.</span><span class="sxs-lookup"><span data-stu-id="11501-128">The receive location should specify the folder EAIProcess.RequestPort, and the send port URL should specify the folder All_Exceptions.</span></span>  
  
2.  <span data-ttu-id="11501-129">Si aún no se está ejecutando la aplicación GlobalBank.ESB, use la consola de administración de BizTalk para iniciarlo.</span><span class="sxs-lookup"><span data-stu-id="11501-129">If the GlobalBank.ESB application is not already running, use the BizTalk Administration Console to start it.</span></span>  
  
3.  <span data-ttu-id="11501-130">Copie el archivo denominado FlatFileReceive_in.txt desde la carpeta \Source\Samples\Exception Handling\Test\Data en la carpeta de ubicación de recepción denominada EAIProcess.RequestPort (en la carpeta \Source\Samples\Exception Handling\Test\Filedrop).</span><span class="sxs-lookup"><span data-stu-id="11501-130">Copy the file named FlatFileReceive_in.txt from the folder \Source\Samples\Exception Handling\Test\Data into the receive location folder named EAIProcess.RequestPort (in the \Source\Samples\Exception Handling\Test\Filedrop folder).</span></span>  
  
4.  <span data-ttu-id="11501-131">Este mensaje es un archivo de texto y producirá una excepción.</span><span class="sxs-lookup"><span data-stu-id="11501-131">This message is a text file, and it will cause an exception.</span></span> <span data-ttu-id="11501-132">Abra la carpeta denominada All_Exceptions (en la carpeta \Source\Samples\Exception Handling\Test\Filedrop) y, a continuación, haga doble clic en el mensaje de error para abrirlo en InfoPath que utiliza la plantilla adecuada.</span><span class="sxs-lookup"><span data-stu-id="11501-132">Open the folder named All_Exceptions (in the \Source\Samples\Exception Handling\Test\Filedrop folder), and then double-click the fault message to open it into InfoPath using the appropriate template.</span></span> <span data-ttu-id="11501-133">Verá que el mecanismo de control de excepciones de ESB serializa el contenido correctamente para permitir que InfoPath representarlo.</span><span class="sxs-lookup"><span data-stu-id="11501-133">You will see that the ESB Exception Handling mechanism serializes the content appropriately to allow InfoPath to render it.</span></span>  
  
5.  <span data-ttu-id="11501-134">A continuación, copie el archivo denominado soapmessage [1] .xml desde la carpeta \Source\Samples\Exception Handling\Test\Data en la EAIProcess.RequestPort carpeta de ubicación de recepción.</span><span class="sxs-lookup"><span data-stu-id="11501-134">Next, copy the file named soapmessage[1].xml from the folder \Source\Samples\Exception Handling\Test\Data into the EAIProcess.RequestPort receive location folder.</span></span>  
  
6.  <span data-ttu-id="11501-135">Este mensaje es un documento XML que contiene una sección CDATA, y producirá una excepción.</span><span class="sxs-lookup"><span data-stu-id="11501-135">This message is an XML document that contains a CDATA section, and it will cause an exception.</span></span> <span data-ttu-id="11501-136">Abra la carpeta de salida All_Exceptions y haga doble clic en el mensaje de error para abrirlo en InfoPath.</span><span class="sxs-lookup"><span data-stu-id="11501-136">Open the All_Exceptions output folder and double-click the fault message to open it into InfoPath.</span></span> <span data-ttu-id="11501-137">Verá que el mecanismo de control de excepciones de ESB serializa este contenido adecuadamente para permitir que InfoPath representarlo.</span><span class="sxs-lookup"><span data-stu-id="11501-137">You will see that the ESB Exception Handling mechanism serializes this content appropriately to allow InfoPath to render it.</span></span>  
  
7.  <span data-ttu-id="11501-138">Por último, copie el archivo denominado Csqzav01.pdf desde la carpeta \Source\Samples\Exception Handling\Test\Data en la EAIProcess.RequestPort ubicación de recepción.</span><span class="sxs-lookup"><span data-stu-id="11501-138">Finally, copy the file named Csqzav01.pdf from the folder \Source\Samples\Exception Handling\Test\Data into the EAIProcess.RequestPort receive location.</span></span>  
  
8.  <span data-ttu-id="11501-139">Este mensaje es un archivo PDF y producirá una excepción.</span><span class="sxs-lookup"><span data-stu-id="11501-139">This message is a PDF file, and it will cause an exception.</span></span> <span data-ttu-id="11501-140">Abra la carpeta de salida All_Exceptions y haga doble clic en el mensaje de error para abrirlo en InfoPath.</span><span class="sxs-lookup"><span data-stu-id="11501-140">Open the All_Exceptions output folder and double-click the fault message to open it in InfoPath.</span></span> <span data-ttu-id="11501-141">Verá que el mecanismo de control de excepciones de ESB serializa y Base64 codifica el contenido para permitir que InfoPath representarlo.</span><span class="sxs-lookup"><span data-stu-id="11501-141">You will see that the ESB Exception Handling mechanism serializes and Base-64 encodes the content to allow InfoPath to render it.</span></span>
---
title: "La canalización del procesador de error ESB | Documentos de Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: a57752b1-8bca-4534-9e5b-7ce721a9490a
caps.latest.revision: "3"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: ebd9a6cecf5353ab72cea0d67b06f3402fc1716a
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
---
# <a name="the-esb-fault-processor-pipeline"></a><span data-ttu-id="7d6f4-102">La canalización del procesador de error ESB</span><span class="sxs-lookup"><span data-stu-id="7d6f4-102">The ESB Fault Processor Pipeline</span></span>
<span data-ttu-id="7d6f4-103">El [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] instala un puerto de envío denominado todos. Las excepciones que usa el ESBFaultProcessor la canalización de envío.</span><span class="sxs-lookup"><span data-stu-id="7d6f4-103">The [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] installs a send port named ALL.Exceptions that uses the ESBFaultProcessor send pipeline.</span></span> <span data-ttu-id="7d6f4-104">La figura 1 muestra las propiedades de todos. Las excepciones de puerto de envío.</span><span class="sxs-lookup"><span data-stu-id="7d6f4-104">Figure 1 shows the properties of the ALL.Exceptions send port.</span></span>  
  
 <span data-ttu-id="7d6f4-105">![Puerto de envío de todas las excepciones](../esb-toolkit/media/ch4-allexceptionssendport.gif "Ch4-AllExceptionsSendPort")</span><span class="sxs-lookup"><span data-stu-id="7d6f4-105">![All Exceptions Send Port](../esb-toolkit/media/ch4-allexceptionssendport.gif "Ch4-AllExceptionsSendPort")</span></span>  
  
 <span data-ttu-id="7d6f4-106">**Figura 1**</span><span class="sxs-lookup"><span data-stu-id="7d6f4-106">**Figure 1**</span></span>  
  
 <span data-ttu-id="7d6f4-107">**La configuración de todos. Excepciones de puerto de envío, incluido el uso de la canalización de ESBFaultProcessor**</span><span class="sxs-lookup"><span data-stu-id="7d6f4-107">**The configuration of the ALL.Exceptions send port, including its use of the ESBFaultProcessor pipeline**</span></span>  
  
 <span data-ttu-id="7d6f4-108">La canalización de ESBFaultProcessor contiene los siguientes componentes de canalización: codificador de excepción de ESB, Rastreador de supervisión de actividad de negocio de ESB (BAM) y para transformarlos ESB.</span><span class="sxs-lookup"><span data-stu-id="7d6f4-108">The ESBFaultProcessor pipeline contains the following pipeline components: ESB Exception Encoder, ESB Business Activity Monitoring (BAM) Tracker, and ESB Transform.</span></span>  
  
 <span data-ttu-id="7d6f4-109">ALL. Excepciones de envío puerto se suscribe a todos los mensajes de error ESB y a todos los mensajes generados por el mecanismo de enrutamiento de mensajes de error de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="7d6f4-109">The ALL.Exceptions send port subscribes to all ESB fault messages and to all messages generated by the BizTalk Failed Message Routing mechanism.</span></span> <span data-ttu-id="7d6f4-110">Figura 2 muestra el filtro de configuración de las propiedades de todos. Las excepciones de puerto de envío.</span><span class="sxs-lookup"><span data-stu-id="7d6f4-110">Figure 2 shows the filter property settings of the ALL.Exceptions send port.</span></span>  
  
 <span data-ttu-id="7d6f4-111">![Puerto de envío de filtro](../esb-toolkit/media/ch4-filtersendport.gif "Ch4-FilterSendPort")</span><span class="sxs-lookup"><span data-stu-id="7d6f4-111">![Filter Send Port](../esb-toolkit/media/ch4-filtersendport.gif "Ch4-FilterSendPort")</span></span>  
  
 <span data-ttu-id="7d6f4-112">**Figura 2**</span><span class="sxs-lookup"><span data-stu-id="7d6f4-112">**Figure 2**</span></span>  
  
 <span data-ttu-id="7d6f4-113">**La propiedad filter del todas. Excepciones de puerto define la suscripción del puerto de envío**</span><span class="sxs-lookup"><span data-stu-id="7d6f4-113">**The filter property of the ALL.Exceptions send port defines the port subscription**</span></span>  
  
## <a name="the-fault-processor-pipeline-exception-encoder-component"></a><span data-ttu-id="7d6f4-114">El componente de codificador de excepción de error procesador canalización</span><span class="sxs-lookup"><span data-stu-id="7d6f4-114">The Fault Processor Pipeline Exception Encoder Component</span></span>  
 <span data-ttu-id="7d6f4-115">El componente de canalización de codificador de excepción de ESB normaliza los mensajes de error generados en el mecanismo de excepción enrutamiento de orquestación de error de ESB y el mecanismo de enrutamiento de mensajes de error de BizTalk en mensajes canónicos que cumplen con los informes de excepción de ESB esquema.</span><span class="sxs-lookup"><span data-stu-id="7d6f4-115">The ESB Exception Encoder pipeline component normalizes fault messages generated in the ESB Failed Orchestration Exception Routing mechanism and the BizTalk Failed Message Routing mechanism into canonical messages that comply with the ESB Exception Reporting schema.</span></span>  
  
 <span data-ttu-id="7d6f4-116">Para una excepción de error de enrutamiento de excepción de orquestación, el componente enriquece y serializa todas las propiedades de mensaje de error, mensajes XLANG, propiedades de contexto, y **System.Exception** información en un mensaje XML.</span><span class="sxs-lookup"><span data-stu-id="7d6f4-116">For a Failed Orchestration Exception Routing exception, the component enriches and serializes all fault message properties, XLANG messages, context properties, and **System.Exception** information into an XML message.</span></span>  
  
 <span data-ttu-id="7d6f4-117">Para una excepción de error de enrutamiento de mensajes, el componente enriquece los datos agregando el nombre de la aplicación y otras propiedades de ambiente, y se aplica el espacio de nombres de esquema para el contenido del mensaje XML saliente.</span><span class="sxs-lookup"><span data-stu-id="7d6f4-117">For a Failed Message Routing exception, the component enriches the data by adding the application name and other ambient properties, and it applies the schema namespace to the outbound XML message content.</span></span>  
  
 <span data-ttu-id="7d6f4-118">Opcionalmente, el componente de canalización de codificador de excepción de ESB también puede aplicar las instrucciones para el mensaje saliente de procesamiento de Microsoft InfoPath.</span><span class="sxs-lookup"><span data-stu-id="7d6f4-118">Optionally, the ESB Exception Encoder pipeline component can also apply Microsoft InfoPath processing instructions to the outbound message.</span></span> <span data-ttu-id="7d6f4-119">Puede modificar las instrucciones de InfoPath estableciendo las propiedades del componente de canalización en la vista Diseño.</span><span class="sxs-lookup"><span data-stu-id="7d6f4-119">You can modify the InfoPath instructions by setting the properties of the pipeline component in design view.</span></span> <span data-ttu-id="7d6f4-120">Las siguientes propiedades de tiempo de diseño de tres afectan al comportamiento de tiempo de ejecución del componente de canalización de codificador de ESB excepción:</span><span class="sxs-lookup"><span data-stu-id="7d6f4-120">The following three design time properties affect the run-time behavior of the ESB Exception Encoder pipeline component:</span></span>  
  
-   <span data-ttu-id="7d6f4-121">**EscapeCDATA.**</span><span class="sxs-lookup"><span data-stu-id="7d6f4-121">**EscapeCDATA.**</span></span> <span data-ttu-id="7d6f4-122">Esta propiedad determina si el componente escaparán cualquiera **CDATA** secciones que se encuentra en conservan los mensajes para que InfoPath puede mostrarlos correctamente.</span><span class="sxs-lookup"><span data-stu-id="7d6f4-122">This property determines whether the component will escape any **CDATA** sections found in persisted messages so that InfoPath can display them correctly.</span></span>  
  
-   <span data-ttu-id="7d6f4-123">**FaultDocumentNamespace.**</span><span class="sxs-lookup"><span data-stu-id="7d6f4-123">**FaultDocumentNamespace.**</span></span> <span data-ttu-id="7d6f4-124">Esta propiedad no tiene un valor predeterminado de **http://schemas.microsoft.biztalk.practices.esb.com/exceptionhandling**.</span><span class="sxs-lookup"><span data-stu-id="7d6f4-124">This property has a default value of **http://schemas.microsoft.biztalk.practices.esb.com/exceptionhandling**.</span></span> <span data-ttu-id="7d6f4-125">Esto se puede modificar para utilizar un espacio de nombres de salida personalizado para los mensajes persistentes.</span><span class="sxs-lookup"><span data-stu-id="7d6f4-125">This can be modified to use a custom outbound namespace for the persisted messages.</span></span>  
  
-   <span data-ttu-id="7d6f4-126">**ProcessingInstruction.**</span><span class="sxs-lookup"><span data-stu-id="7d6f4-126">**ProcessingInstruction.**</span></span> <span data-ttu-id="7d6f4-127">Esta propiedad puede contener cualquier instrucción de procesamiento de InfoPath que cumpla con el esquema de error Reporting de excepción de ESB.</span><span class="sxs-lookup"><span data-stu-id="7d6f4-127">This property can contain any InfoPath processing instruction that complies with the ESB Exception Reporting fault schema.</span></span> <span data-ttu-id="7d6f4-128">El [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] incluye una plantilla de InfoPath que se ajusta a la siguiente instrucción de procesamiento.</span><span class="sxs-lookup"><span data-stu-id="7d6f4-128">The [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] includes an InfoPath template that conforms to the following processing instruction.</span></span>  
  
    ```  
    <?mso-infoPathSolution solutionVersion="1.0.0.346" productVersion="11.0.6565"  
    PIVersion="1.0.0.0"   
    href=file:///\\localhost\publish\Microsoft.Practices.ESB.ExceptionHandling.InfoPath.Reporting.xsn  
    name="urn:schemas-microsoft-com:office:infopath:  
    Microsoft-Practices-ESB-ExceptionHandling-InfoPath-Reporting:  
    http---schemas-microsoft-biztalk-practices-esb-com-exceptionhandling"  
    language="en-us" ?><?mso-application progid="InfoPath.Document"?>  
    ```  
  
## <a name="the-fault-processor-pipeline-bam-tracker-component"></a><span data-ttu-id="7d6f4-129">El componente de seguimiento BAM de canalización de error procesador</span><span class="sxs-lookup"><span data-stu-id="7d6f4-129">The Fault Processor Pipeline BAM Tracker Component</span></span>  
 <span data-ttu-id="7d6f4-130">El componente de canalización de la herramienta de seguimiento de BAM de ESB recibe el mensaje desde el componente de codificador de excepción de ESB y escribe datos del error seleccionado en las tablas de importación principal de BAM creadas durante la instalación del marco de administración de excepciones de ESB.</span><span class="sxs-lookup"><span data-stu-id="7d6f4-130">The ESB BAM Tracker pipeline component receives the message from the ESB Exception Encoder component and writes selected fault data to the BAM primary import tables created during the installation of the ESB Exception Management Framework.</span></span>  
  
 <span data-ttu-id="7d6f4-131">El componente de seguimiento de BAM de ESB usa el **GetEventStream** método del contexto de canalización para agregar los siguientes campos como un registro de actividad a la base de datos de importación principal de BAM:</span><span class="sxs-lookup"><span data-stu-id="7d6f4-131">The ESB BAM Tracker component uses the **GetEventStream** method of the pipeline context to add the following fields as an activity record to the BAM Primary Import database:</span></span>  
  
-   <span data-ttu-id="7d6f4-132">**Aplicación**</span><span class="sxs-lookup"><span data-stu-id="7d6f4-132">**Application**</span></span>  
  
-   <span data-ttu-id="7d6f4-133">**Description**</span><span class="sxs-lookup"><span data-stu-id="7d6f4-133">**Description**</span></span>  
  
-   <span data-ttu-id="7d6f4-134">**FaultSeverity**</span><span class="sxs-lookup"><span data-stu-id="7d6f4-134">**FaultSeverity**</span></span>  
  
-   <span data-ttu-id="7d6f4-135">**ServiceName**</span><span class="sxs-lookup"><span data-stu-id="7d6f4-135">**ServiceName**</span></span>  
  
-   <span data-ttu-id="7d6f4-136">**ErrorType**</span><span class="sxs-lookup"><span data-stu-id="7d6f4-136">**ErrorType**</span></span>  
  
-   <span data-ttu-id="7d6f4-137">**FaultCode**</span><span class="sxs-lookup"><span data-stu-id="7d6f4-137">**FaultCode**</span></span>  
  
-   <span data-ttu-id="7d6f4-138">**MachineName**</span><span class="sxs-lookup"><span data-stu-id="7d6f4-138">**MachineName**</span></span>  
  
-   <span data-ttu-id="7d6f4-139">**MessageID**</span><span class="sxs-lookup"><span data-stu-id="7d6f4-139">**MessageID**</span></span>  
  
-   <span data-ttu-id="7d6f4-140">**DateTime**</span><span class="sxs-lookup"><span data-stu-id="7d6f4-140">**DateTime**</span></span>  
  
-   <span data-ttu-id="7d6f4-141">**FaultDescription**</span><span class="sxs-lookup"><span data-stu-id="7d6f4-141">**FaultDescription**</span></span>  
  
-   <span data-ttu-id="7d6f4-142">**Ámbito**</span><span class="sxs-lookup"><span data-stu-id="7d6f4-142">**Scope**</span></span>  
  
-   <span data-ttu-id="7d6f4-143">**FailureCategory**</span><span class="sxs-lookup"><span data-stu-id="7d6f4-143">**FailureCategory**</span></span>  
  
-   <span data-ttu-id="7d6f4-144">**FaultGenerator**</span><span class="sxs-lookup"><span data-stu-id="7d6f4-144">**FaultGenerator**</span></span>  
  
-   <span data-ttu-id="7d6f4-145">**ServiceInstanceID**</span><span class="sxs-lookup"><span data-stu-id="7d6f4-145">**ServiceInstanceID**</span></span>  
  
 <span data-ttu-id="7d6f4-146">El componente de seguimiento de BAM de ESB usa el identificador de mensaje (el **MessageID** propiedad) valor del mensaje de error ESB como el identificador de actividad BAM.</span><span class="sxs-lookup"><span data-stu-id="7d6f4-146">The ESB BAM Tracker component uses the message identifier (the **MessageID** property) value of the ESB fault message as the BAM activity ID.</span></span> <span data-ttu-id="7d6f4-147">El componente de seguimiento de BAM de ESB expone dos propiedades de tiempo de diseño que se pueden establecer para cambiar su comportamiento en tiempo de ejecución:</span><span class="sxs-lookup"><span data-stu-id="7d6f4-147">The ESB BAM Tracker component exposes two design time properties that you can set to change its run-time behavior:</span></span>  
  
-   <span data-ttu-id="7d6f4-148">**Habilitado.**</span><span class="sxs-lookup"><span data-stu-id="7d6f4-148">**Enabled.**</span></span> <span data-ttu-id="7d6f4-149">Esta propiedad determina si el componente procesará el mensaje y escribir en la base de datos BAM.</span><span class="sxs-lookup"><span data-stu-id="7d6f4-149">This property determines whether the component will process the message and write it to the BAM database.</span></span> <span data-ttu-id="7d6f4-150">Cuando se establece en **False**, el componente solo envía el mensaje al siguiente componente de la canalización.</span><span class="sxs-lookup"><span data-stu-id="7d6f4-150">When set to **False**, the component just sends the message to the next component in the pipeline.</span></span>  
  
-   <span data-ttu-id="7d6f4-151">**FaultDocumentNamespace.**</span><span class="sxs-lookup"><span data-stu-id="7d6f4-151">**FaultDocumentNamespace.**</span></span> <span data-ttu-id="7d6f4-152">Esta propiedad no tiene un valor predeterminado de **http://schemas.microsoft.biztalk.practices.esb.com/exceptionhandling**.</span><span class="sxs-lookup"><span data-stu-id="7d6f4-152">This property has a default value of **http://schemas.microsoft.biztalk.practices.esb.com/exceptionhandling**.</span></span>  
  
## <a name="the-fault-processor-pipeline-transform-component"></a><span data-ttu-id="7d6f4-153">La canalización del procesador error transformar el componente</span><span class="sxs-lookup"><span data-stu-id="7d6f4-153">The Fault Processor Pipeline Transform Component</span></span>  
 <span data-ttu-id="7d6f4-154">La canalización del procesador de error de ESB utiliza el componente de canalización de transformación de ESB para ejecutar una asignación de BizTalk que convierte el mensaje de error ESB codificado en un formato que coincida con el esquema para el adaptador de SQL de BizTalk (ExceptionSql.xsd).</span><span class="sxs-lookup"><span data-stu-id="7d6f4-154">The ESB Fault Processor pipeline uses the ESB Transform pipeline component to execute a BizTalk map that translates the encoded ESB fault message into a format that matches the schema for the BizTalk SQL Adapter (ExceptionSql.xsd).</span></span> <span data-ttu-id="7d6f4-155">El componente luego pasa el mensaje transformado al adaptador de SQL, que inserta el mensaje de error ESB en la base de datos del Portal de administración de ESB.</span><span class="sxs-lookup"><span data-stu-id="7d6f4-155">The component then passes the transformed message to the SQL Adapter, which inserts the ESB fault message into the ESB Management Portal database.</span></span>  
  
 <span data-ttu-id="7d6f4-156">El componente de canalización de transformación de ESB expone tres propiedades de tiempo de diseño que se pueden modificar para cambiar su comportamiento en tiempo de ejecución:</span><span class="sxs-lookup"><span data-stu-id="7d6f4-156">The ESB Transform pipeline component exposes three design-time properties that can be modified to change its run-time behavior:</span></span>  
  
-   <span data-ttu-id="7d6f4-157">**Habilitado.**</span><span class="sxs-lookup"><span data-stu-id="7d6f4-157">**Enabled.**</span></span> <span data-ttu-id="7d6f4-158">Esta propiedad habilita o deshabilita el componente.</span><span class="sxs-lookup"><span data-stu-id="7d6f4-158">This property enables or disables the component.</span></span>  
  
-   <span data-ttu-id="7d6f4-159">**Validar.**</span><span class="sxs-lookup"><span data-stu-id="7d6f4-159">**Validate.**</span></span> <span data-ttu-id="7d6f4-160">Esta propiedad especifica si es necesario validar un mensaje.</span><span class="sxs-lookup"><span data-stu-id="7d6f4-160">This property specifies whether a message needs to be validated.</span></span>  
  
-   <span data-ttu-id="7d6f4-161">**Nombredemapa.**</span><span class="sxs-lookup"><span data-stu-id="7d6f4-161">**MapName.**</span></span> <span data-ttu-id="7d6f4-162">Esta propiedad contiene el nombre del mapa que se debe ejecutar para traducir el mensaje para su almacenamiento en la base de datos del Portal de administración de ESB.</span><span class="sxs-lookup"><span data-stu-id="7d6f4-162">This property contains the name of the map that must be executed to translate the message for storage in the ESB Management Portal database.</span></span> <span data-ttu-id="7d6f4-163">Éste es el valor predeterminado.</span><span class="sxs-lookup"><span data-stu-id="7d6f4-163">The following is the default value.</span></span>  
  
    ```  
    Microsoft.Practices.ESB.ExceptionHandling.Maps.FaultMessage_to_ExceptionSql,  
    Microsoft.Practices.ESB.ExceptionHandling.Maps,  
    Version=2.0.0.0,  
    Culture=neutral,  
    PublicKeyToken=c2c8b2b87f54180a  
    ```  
  
 <span data-ttu-id="7d6f4-164">Después de que todos los componentes de canalización finalizan su ejecución, el adaptador de la base de datos de SQL Server de BizTalk inserta el mensaje de error en la base de datos del Portal de administración de ESB.</span><span class="sxs-lookup"><span data-stu-id="7d6f4-164">After all the pipeline components finish executing, the BizTalk SQL Server database adapter inserts the fault message into the ESB Management Portal database.</span></span>
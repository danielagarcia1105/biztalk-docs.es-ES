---
title: La canalización del procesador de errores ESB | Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: a57752b1-8bca-4534-9e5b-7ce721a9490a
caps.latest.revision: 3
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 1eb33c091c064c8a94939a8b9f2f0ee37f75881b
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/27/2018
ms.locfileid: "37015432"
---
# <a name="the-esb-fault-processor-pipeline"></a><span data-ttu-id="7b92e-102">La canalización del procesador de errores ESB</span><span class="sxs-lookup"><span data-stu-id="7b92e-102">The ESB Fault Processor Pipeline</span></span>
<span data-ttu-id="7b92e-103">El [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] instala un puerto de envío denominado todos. Las excepciones que usa el ESBFaultProcessor la canalización de envío.</span><span class="sxs-lookup"><span data-stu-id="7b92e-103">The [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] installs a send port named ALL.Exceptions that uses the ESBFaultProcessor send pipeline.</span></span> <span data-ttu-id="7b92e-104">Figura 1 muestra las propiedades de todos. Las excepciones de puerto de envío.</span><span class="sxs-lookup"><span data-stu-id="7b92e-104">Figure 1 shows the properties of the ALL.Exceptions send port.</span></span>  
  
 <span data-ttu-id="7b92e-105">![Puerto de envío de todas las excepciones](../esb-toolkit/media/ch4-allexceptionssendport.gif "Ch4-AllExceptionsSendPort")</span><span class="sxs-lookup"><span data-stu-id="7b92e-105">![All Exceptions Send Port](../esb-toolkit/media/ch4-allexceptionssendport.gif "Ch4-AllExceptionsSendPort")</span></span>  
  
 <span data-ttu-id="7b92e-106">**Figura 1**</span><span class="sxs-lookup"><span data-stu-id="7b92e-106">**Figure 1**</span></span>  
  
 <span data-ttu-id="7b92e-107">**La configuración de todos. Excepciones de puerto de envío, incluido su uso de la canalización ESBFaultProcessor**</span><span class="sxs-lookup"><span data-stu-id="7b92e-107">**The configuration of the ALL.Exceptions send port, including its use of the ESBFaultProcessor pipeline**</span></span>  
  
 <span data-ttu-id="7b92e-108">La canalización ESBFaultProcessor contiene los siguientes componentes de canalización: codificador de excepciones de ESB, Rastreador de supervisión de actividad de negocio de ESB (BAM) y transformar ESB.</span><span class="sxs-lookup"><span data-stu-id="7b92e-108">The ESBFaultProcessor pipeline contains the following pipeline components: ESB Exception Encoder, ESB Business Activity Monitoring (BAM) Tracker, and ESB Transform.</span></span>  
  
 <span data-ttu-id="7b92e-109">El todo. Excepciones de envío puerto se suscribe a todos los mensajes de error ESB y a todos los mensajes generados por el mecanismo de enrutamiento de mensajes de error de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="7b92e-109">The ALL.Exceptions send port subscribes to all ESB fault messages and to all messages generated by the BizTalk Failed Message Routing mechanism.</span></span> <span data-ttu-id="7b92e-110">Figura 2 muestra el filtro de los valores de todas las propiedades. Las excepciones de puerto de envío.</span><span class="sxs-lookup"><span data-stu-id="7b92e-110">Figure 2 shows the filter property settings of the ALL.Exceptions send port.</span></span>  
  
 <span data-ttu-id="7b92e-111">![Puerto de envío de filtro](../esb-toolkit/media/ch4-filtersendport.gif "Ch4-FilterSendPort")</span><span class="sxs-lookup"><span data-stu-id="7b92e-111">![Filter Send Port](../esb-toolkit/media/ch4-filtersendport.gif "Ch4-FilterSendPort")</span></span>  
  
 <span data-ttu-id="7b92e-112">**Figura 2**</span><span class="sxs-lookup"><span data-stu-id="7b92e-112">**Figure 2**</span></span>  
  
 <span data-ttu-id="7b92e-113">**La propiedad de filtro de todos. Excepciones de puerto define la suscripción del puerto de envío**</span><span class="sxs-lookup"><span data-stu-id="7b92e-113">**The filter property of the ALL.Exceptions send port defines the port subscription**</span></span>  
  
## <a name="the-fault-processor-pipeline-exception-encoder-component"></a><span data-ttu-id="7b92e-114">El componente de codificador de excepción de error procesador canalización</span><span class="sxs-lookup"><span data-stu-id="7b92e-114">The Fault Processor Pipeline Exception Encoder Component</span></span>  
 <span data-ttu-id="7b92e-115">El componente de canalización de codificador de excepciones de ESB normaliza los mensajes de error generados en el mecanismo de excepción enrutamiento de orquestación de error de ESB y el mecanismo de enrutamiento de mensajes de error de BizTalk en mensajes canónicos que cumplen con los informes de excepciones de ESB esquema.</span><span class="sxs-lookup"><span data-stu-id="7b92e-115">The ESB Exception Encoder pipeline component normalizes fault messages generated in the ESB Failed Orchestration Exception Routing mechanism and the BizTalk Failed Message Routing mechanism into canonical messages that comply with the ESB Exception Reporting schema.</span></span>  
  
 <span data-ttu-id="7b92e-116">Para una excepción de error de enrutamiento de excepción de orquestación, el componente enriquece y serializa todas las propiedades de mensaje de error, mensajes XLANG, propiedades de contexto, y **System.Exception** información en un mensaje XML.</span><span class="sxs-lookup"><span data-stu-id="7b92e-116">For a Failed Orchestration Exception Routing exception, the component enriches and serializes all fault message properties, XLANG messages, context properties, and **System.Exception** information into an XML message.</span></span>  
  
 <span data-ttu-id="7b92e-117">Para una excepción de error de enrutamiento de mensajes, el componente enriquece los datos agregando el nombre de la aplicación y otras propiedades de ambientales, y se aplica el espacio de nombres de esquema para el contenido del mensaje XML saliente.</span><span class="sxs-lookup"><span data-stu-id="7b92e-117">For a Failed Message Routing exception, the component enriches the data by adding the application name and other ambient properties, and it applies the schema namespace to the outbound XML message content.</span></span>  
  
 <span data-ttu-id="7b92e-118">Opcionalmente, el componente de canalización de codificador de excepciones de ESB también puede aplicar al mensaje saliente de instrucciones de procesamiento de Microsoft InfoPath.</span><span class="sxs-lookup"><span data-stu-id="7b92e-118">Optionally, the ESB Exception Encoder pipeline component can also apply Microsoft InfoPath processing instructions to the outbound message.</span></span> <span data-ttu-id="7b92e-119">Puede modificar las instrucciones de InfoPath estableciendo las propiedades del componente de canalización en la vista Diseño.</span><span class="sxs-lookup"><span data-stu-id="7b92e-119">You can modify the InfoPath instructions by setting the properties of the pipeline component in design view.</span></span> <span data-ttu-id="7b92e-120">Las siguientes propiedades de tiempo de tres diseño afectan al comportamiento de tiempo de ejecución del componente de canalización de codificador de excepciones de ESB:</span><span class="sxs-lookup"><span data-stu-id="7b92e-120">The following three design time properties affect the run-time behavior of the ESB Exception Encoder pipeline component:</span></span>  
  
- <span data-ttu-id="7b92e-121">**EscapeCDATA.**</span><span class="sxs-lookup"><span data-stu-id="7b92e-121">**EscapeCDATA.**</span></span> <span data-ttu-id="7b92e-122">Esta propiedad determina si el componente escape alguna **CDATA** secciones que se encuentra en conservan los mensajes para que pueda mostrar InfoPath correctamente.</span><span class="sxs-lookup"><span data-stu-id="7b92e-122">This property determines whether the component will escape any **CDATA** sections found in persisted messages so that InfoPath can display them correctly.</span></span>  
  
- <span data-ttu-id="7b92e-123">**FaultDocumentNamespace.**</span><span class="sxs-lookup"><span data-stu-id="7b92e-123">**FaultDocumentNamespace.**</span></span> <span data-ttu-id="7b92e-124">Esta propiedad tiene un valor predeterminado de **http://schemas.microsoft.biztalk.practices.esb.com/exceptionhandling**.</span><span class="sxs-lookup"><span data-stu-id="7b92e-124">This property has a default value of **http://schemas.microsoft.biztalk.practices.esb.com/exceptionhandling**.</span></span> <span data-ttu-id="7b92e-125">Esto se puede modificar para usar un espacio de nombres de salida personalizado para los mensajes persistentes.</span><span class="sxs-lookup"><span data-stu-id="7b92e-125">This can be modified to use a custom outbound namespace for the persisted messages.</span></span>  
  
- <span data-ttu-id="7b92e-126">**Instrucción de procesamiento.**</span><span class="sxs-lookup"><span data-stu-id="7b92e-126">**ProcessingInstruction.**</span></span> <span data-ttu-id="7b92e-127">Esta propiedad puede contener cualquier instrucción de procesamiento de InfoPath que cumpla con el esquema de error Reporting de excepciones de ESB.</span><span class="sxs-lookup"><span data-stu-id="7b92e-127">This property can contain any InfoPath processing instruction that complies with the ESB Exception Reporting fault schema.</span></span> <span data-ttu-id="7b92e-128">El [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] incluye una plantilla InfoPath que se ajusta a la siguiente instrucción de procesamiento.</span><span class="sxs-lookup"><span data-stu-id="7b92e-128">The [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] includes an InfoPath template that conforms to the following processing instruction.</span></span>  
  
  ```  
  <?mso-infoPathSolution solutionVersion="1.0.0.346" productVersion="11.0.6565"  
  PIVersion="1.0.0.0"   
  href=file:///\\localhost\publish\Microsoft.Practices.ESB.ExceptionHandling.InfoPath.Reporting.xsn  
  name="urn:schemas-microsoft-com:office:infopath:  
  Microsoft-Practices-ESB-ExceptionHandling-InfoPath-Reporting:  
  http---schemas-microsoft-biztalk-practices-esb-com-exceptionhandling"  
  language="en-us" ?><?mso-application progid="InfoPath.Document"?>  
  ```  
  
## <a name="the-fault-processor-pipeline-bam-tracker-component"></a><span data-ttu-id="7b92e-129">El componente de seguimiento BAM de canalización de error procesador</span><span class="sxs-lookup"><span data-stu-id="7b92e-129">The Fault Processor Pipeline BAM Tracker Component</span></span>  
 <span data-ttu-id="7b92e-130">El componente de canalización de ESB BAM Tracker recibe el mensaje desde el componente de codificador de excepciones de ESB y escribe datos del error seleccionado en las tablas de importación principal de BAM creadas durante la instalación del marco de administración de excepciones de ESB.</span><span class="sxs-lookup"><span data-stu-id="7b92e-130">The ESB BAM Tracker pipeline component receives the message from the ESB Exception Encoder component and writes selected fault data to the BAM primary import tables created during the installation of the ESB Exception Management Framework.</span></span>  
  
 <span data-ttu-id="7b92e-131">El componente Rastreador de ESB BAM utiliza el **GetEventStream** método del contexto de canalización para agregar los siguientes campos como un registro de actividad a la base de datos de importación principal de BAM:</span><span class="sxs-lookup"><span data-stu-id="7b92e-131">The ESB BAM Tracker component uses the **GetEventStream** method of the pipeline context to add the following fields as an activity record to the BAM Primary Import database:</span></span>  
  
- <span data-ttu-id="7b92e-132">**Aplicación**</span><span class="sxs-lookup"><span data-stu-id="7b92e-132">**Application**</span></span>  
  
- <span data-ttu-id="7b92e-133">**Descripción**</span><span class="sxs-lookup"><span data-stu-id="7b92e-133">**Description**</span></span>  
  
- <span data-ttu-id="7b92e-134">**FaultSeverity**</span><span class="sxs-lookup"><span data-stu-id="7b92e-134">**FaultSeverity**</span></span>  
  
- <span data-ttu-id="7b92e-135">**ServiceName**</span><span class="sxs-lookup"><span data-stu-id="7b92e-135">**ServiceName**</span></span>  
  
- <span data-ttu-id="7b92e-136">**ErrorType**</span><span class="sxs-lookup"><span data-stu-id="7b92e-136">**ErrorType**</span></span>  
  
- <span data-ttu-id="7b92e-137">**Código de error**</span><span class="sxs-lookup"><span data-stu-id="7b92e-137">**FaultCode**</span></span>  
  
- <span data-ttu-id="7b92e-138">**MachineName**</span><span class="sxs-lookup"><span data-stu-id="7b92e-138">**MachineName**</span></span>  
  
- <span data-ttu-id="7b92e-139">**MessageID**</span><span class="sxs-lookup"><span data-stu-id="7b92e-139">**MessageID**</span></span>  
  
- <span data-ttu-id="7b92e-140">**DateTime**</span><span class="sxs-lookup"><span data-stu-id="7b92e-140">**DateTime**</span></span>  
  
- <span data-ttu-id="7b92e-141">**FaultDescription**</span><span class="sxs-lookup"><span data-stu-id="7b92e-141">**FaultDescription**</span></span>  
  
- <span data-ttu-id="7b92e-142">**Ámbito**</span><span class="sxs-lookup"><span data-stu-id="7b92e-142">**Scope**</span></span>  
  
- <span data-ttu-id="7b92e-143">**FailureCategory**</span><span class="sxs-lookup"><span data-stu-id="7b92e-143">**FailureCategory**</span></span>  
  
- <span data-ttu-id="7b92e-144">**FaultGenerator**</span><span class="sxs-lookup"><span data-stu-id="7b92e-144">**FaultGenerator**</span></span>  
  
- <span data-ttu-id="7b92e-145">**ServiceInstanceID**</span><span class="sxs-lookup"><span data-stu-id="7b92e-145">**ServiceInstanceID**</span></span>  
  
  <span data-ttu-id="7b92e-146">El componente de seguimiento de BAM de ESB usa el identificador de mensaje (el **MessageID** propiedad) valor del mensaje de error ESB como identificador de actividad BAM.</span><span class="sxs-lookup"><span data-stu-id="7b92e-146">The ESB BAM Tracker component uses the message identifier (the **MessageID** property) value of the ESB fault message as the BAM activity ID.</span></span> <span data-ttu-id="7b92e-147">El componente de seguimiento de BAM de ESB expone dos propiedades de tiempo de diseño que se pueden establecer para cambiar su comportamiento en tiempo de ejecución:</span><span class="sxs-lookup"><span data-stu-id="7b92e-147">The ESB BAM Tracker component exposes two design time properties that you can set to change its run-time behavior:</span></span>  
  
- <span data-ttu-id="7b92e-148">**Habilitado.**</span><span class="sxs-lookup"><span data-stu-id="7b92e-148">**Enabled.**</span></span> <span data-ttu-id="7b92e-149">Esta propiedad determina si el componente procesará el mensaje y escribirlo en la base de datos BAM.</span><span class="sxs-lookup"><span data-stu-id="7b92e-149">This property determines whether the component will process the message and write it to the BAM database.</span></span> <span data-ttu-id="7b92e-150">Cuando se establece en **False**, el componente solo envía el mensaje al componente siguiente en la canalización.</span><span class="sxs-lookup"><span data-stu-id="7b92e-150">When set to **False**, the component just sends the message to the next component in the pipeline.</span></span>  
  
- <span data-ttu-id="7b92e-151">**FaultDocumentNamespace.**</span><span class="sxs-lookup"><span data-stu-id="7b92e-151">**FaultDocumentNamespace.**</span></span> <span data-ttu-id="7b92e-152">Esta propiedad tiene un valor predeterminado de **http://schemas.microsoft.biztalk.practices.esb.com/exceptionhandling**.</span><span class="sxs-lookup"><span data-stu-id="7b92e-152">This property has a default value of **http://schemas.microsoft.biztalk.practices.esb.com/exceptionhandling**.</span></span>  
  
## <a name="the-fault-processor-pipeline-transform-component"></a><span data-ttu-id="7b92e-153">Componente de transformación de la canalización del procesador de errores</span><span class="sxs-lookup"><span data-stu-id="7b92e-153">The Fault Processor Pipeline Transform Component</span></span>  
 <span data-ttu-id="7b92e-154">La canalización del procesador de errores de ESB usa el componente de canalización de transformación de ESB para ejecutar una asignación de BizTalk que traduce el mensaje de error ESB codificado en un formato que coincida con el esquema para el adaptador de SQL de BizTalk (ExceptionSql.xsd).</span><span class="sxs-lookup"><span data-stu-id="7b92e-154">The ESB Fault Processor pipeline uses the ESB Transform pipeline component to execute a BizTalk map that translates the encoded ESB fault message into a format that matches the schema for the BizTalk SQL Adapter (ExceptionSql.xsd).</span></span> <span data-ttu-id="7b92e-155">El componente luego pasa el mensaje transformado al adaptador de SQL que inserta el mensaje de error ESB en la base de datos del Portal de administración de ESB.</span><span class="sxs-lookup"><span data-stu-id="7b92e-155">The component then passes the transformed message to the SQL Adapter, which inserts the ESB fault message into the ESB Management Portal database.</span></span>  
  
 <span data-ttu-id="7b92e-156">El componente de canalización de transformación de ESB expone tres propiedades en tiempo de diseño que se pueden modificar para cambiar su comportamiento en tiempo de ejecución:</span><span class="sxs-lookup"><span data-stu-id="7b92e-156">The ESB Transform pipeline component exposes three design-time properties that can be modified to change its run-time behavior:</span></span>  
  
- <span data-ttu-id="7b92e-157">**Habilitado.**</span><span class="sxs-lookup"><span data-stu-id="7b92e-157">**Enabled.**</span></span> <span data-ttu-id="7b92e-158">Esta propiedad habilita o deshabilita el componente.</span><span class="sxs-lookup"><span data-stu-id="7b92e-158">This property enables or disables the component.</span></span>  
  
- <span data-ttu-id="7b92e-159">**Validar.**</span><span class="sxs-lookup"><span data-stu-id="7b92e-159">**Validate.**</span></span> <span data-ttu-id="7b92e-160">Esta propiedad especifica si un mensaje necesita ser validada.</span><span class="sxs-lookup"><span data-stu-id="7b92e-160">This property specifies whether a message needs to be validated.</span></span>  
  
- <span data-ttu-id="7b92e-161">**Nombredemapa.**</span><span class="sxs-lookup"><span data-stu-id="7b92e-161">**MapName.**</span></span> <span data-ttu-id="7b92e-162">Esta propiedad contiene el nombre de la asignación que se debe ejecutar para traducir el mensaje para el almacenamiento en la base de datos del Portal de administración de ESB.</span><span class="sxs-lookup"><span data-stu-id="7b92e-162">This property contains the name of the map that must be executed to translate the message for storage in the ESB Management Portal database.</span></span> <span data-ttu-id="7b92e-163">El siguiente es el valor predeterminado.</span><span class="sxs-lookup"><span data-stu-id="7b92e-163">The following is the default value.</span></span>  
  
  ```  
  Microsoft.Practices.ESB.ExceptionHandling.Maps.FaultMessage_to_ExceptionSql,  
  Microsoft.Practices.ESB.ExceptionHandling.Maps,  
  Version=2.0.0.0,  
  Culture=neutral,  
  PublicKeyToken=c2c8b2b87f54180a  
  ```  
  
  <span data-ttu-id="7b92e-164">Después de que todos los componentes de canalización terminan de ejecutarse, el adaptador de base de datos de SQL Server de BizTalk inserta el mensaje de error en la base de datos del Portal de administración de ESB.</span><span class="sxs-lookup"><span data-stu-id="7b92e-164">After all the pipeline components finish executing, the BizTalk SQL Server database adapter inserts the fault message into the ESB Management Portal database.</span></span>
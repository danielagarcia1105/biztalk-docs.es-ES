---
title: Servicio Web de las operaciones de BizTalk | Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: af38815f-f643-4598-9148-6499071d12e4
caps.latest.revision: 5
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 0b9a78dddbbd76566c5c97b1e571e5ad80073d4a
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/27/2018
ms.locfileid: "36997973"
---
# <a name="the-biztalk-operations-web-service"></a><span data-ttu-id="90f59-102">El servicio Web de las operaciones de BizTalk</span><span class="sxs-lookup"><span data-stu-id="90f59-102">The BizTalk Operations Web Service</span></span>
<span data-ttu-id="90f59-103">El servicio Web de operaciones de Microsoft BizTalk expone información sobre los objetos y los mensajes en BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="90f59-103">The Microsoft BizTalk Operations Web service exposes information about the objects and messages in BizTalk Server.</span></span> <span data-ttu-id="90f59-104">Es el nombre del servicio **ESB.BizTalkOperationsService**, y el servicio expone una amplia variedad de métodos que devuelven elementos como una lista de hosts, las orquestaciones, las aplicaciones y el estado de la aplicación de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="90f59-104">The service name is **ESB.BizTalkOperationsService**, and the service exposes a wide range of methods that return items such as a list of hosts, orchestrations, applications, and the BizTalk application status.</span></span>  
  
 <span data-ttu-id="90f59-105">Están disponibles los siguientes métodos:</span><span class="sxs-lookup"><span data-stu-id="90f59-105">The following methods are available:</span></span>  
  
-   <span data-ttu-id="90f59-106">**Aplicaciones**.</span><span class="sxs-lookup"><span data-stu-id="90f59-106">**Applications**.</span></span> <span data-ttu-id="90f59-107">Este método no toma ningún parámetro y devuelve el nombre y la descripción de todas las aplicaciones instaladas de BizTalk como una colección de **BTApplication** objetos.</span><span class="sxs-lookup"><span data-stu-id="90f59-107">This method takes no parameters, and it returns the name and description of all installed BizTalk applications as a collection of **BTApplication** objects.</span></span>  
  
-   <span data-ttu-id="90f59-108">**ApplicationStatus**.</span><span class="sxs-lookup"><span data-stu-id="90f59-108">**ApplicationStatus**.</span></span> <span data-ttu-id="90f59-109">Este método toma como parámetro el nombre de la aplicación, y devuelve información acerca de la aplicación de BizTalk especificada como un **BTSysStatus** instancia.</span><span class="sxs-lookup"><span data-stu-id="90f59-109">This method takes as a parameter the application name, and it returns information about the specified BizTalk application as a **BTSysStatus** instance.</span></span> <span data-ttu-id="90f59-110">Esta información incluye las orquestaciones, puertos de envío, ubicaciones de recepción y los detalles del host.</span><span class="sxs-lookup"><span data-stu-id="90f59-110">This information includes orchestrations, send ports, receive locations, and host details.</span></span>  
  
-   <span data-ttu-id="90f59-111">**GetLiveMessageBody**.</span><span class="sxs-lookup"><span data-stu-id="90f59-111">**GetLiveMessageBody**.</span></span> <span data-ttu-id="90f59-112">Este método toma como parámetros un identificador de mensaje y un identificador de instancia y devuelve el cuerpo del mensaje, desde el entorno de producción como un **BTMsgBody** instancia.</span><span class="sxs-lookup"><span data-stu-id="90f59-112">This method takes as parameters a message ID and an instance ID, and it returns the body of that message from the live environment as a **BTMsgBody** instance.</span></span>  
  
-   <span data-ttu-id="90f59-113">**GetMessageInstances**.</span><span class="sxs-lookup"><span data-stu-id="90f59-113">**GetMessageInstances**.</span></span> <span data-ttu-id="90f59-114">Este método toma como parámetro, el tipo de mensaje y devuelve todos los mensajes coincidentes como una colección de **BTMsgInstance** objetos.</span><span class="sxs-lookup"><span data-stu-id="90f59-114">This method takes as a parameter the message type, and it returns all matching messages as a collection of **BTMsgInstance** objects.</span></span>  
  
-   <span data-ttu-id="90f59-115">**GetOrchestrationInstances**.</span><span class="sxs-lookup"><span data-stu-id="90f59-115">**GetOrchestrationInstances**.</span></span> <span data-ttu-id="90f59-116">Este método toma como parámetros el nombre de una orquestación y devuelve una colección de **BTOrchestrationInstance** objetos que contienen información detallada de las orquestaciones coincidentes.</span><span class="sxs-lookup"><span data-stu-id="90f59-116">This method takes as parameters the name of an orchestration, and it returns a collection of **BTOrchestrationInstance** object that contain details of the matching orchestrations.</span></span>  
  
-   <span data-ttu-id="90f59-117">**GetTrackedMessageBody**.</span><span class="sxs-lookup"><span data-stu-id="90f59-117">**GetTrackedMessageBody**.</span></span> <span data-ttu-id="90f59-118">Este método toma como parámetro un GUID del mensaje y devuelve el cuerpo del mensaje, como un **BTMsgBody** instancia una vez que se procesa en BizTalk.</span><span class="sxs-lookup"><span data-stu-id="90f59-118">This method takes as a parameter a message GUID, and it returns the body of that message as a **BTMsgBody** instance after it is processed in BizTalk.</span></span>  
  
-   <span data-ttu-id="90f59-119">**Hosts**.</span><span class="sxs-lookup"><span data-stu-id="90f59-119">**Hosts**.</span></span> <span data-ttu-id="90f59-120">Este método toma como parámetro el nombre de un host, y devuelve información acerca de la instancia de host especificado como una colección de **BTHost** instancias.</span><span class="sxs-lookup"><span data-stu-id="90f59-120">This method takes as a parameter the name of a host, and it returns information about the specified host instance as a collection of **BTHost** instances.</span></span> <span data-ttu-id="90f59-121">Utilice una cadena vacía para el parámetro de nombre de host para devolver información sobre todas las instancias de host.</span><span class="sxs-lookup"><span data-stu-id="90f59-121">Use an empty string for the host name parameter to return information about all host instances.</span></span>  
  
-   <span data-ttu-id="90f59-122">**MessageFlowTree**.</span><span class="sxs-lookup"><span data-stu-id="90f59-122">**MessageFlowTree**.</span></span> <span data-ttu-id="90f59-123">Este método toma como parámetro un identificador de instancia y devuelve los detalles del flujo de mensajes para ese mensaje como un **RouteTreeNode** instancia.</span><span class="sxs-lookup"><span data-stu-id="90f59-123">This method takes as a parameter an instance ID, and it returns details of the message flow for that message as a **RouteTreeNode** instance.</span></span>  
  
-   <span data-ttu-id="90f59-124">**Orquestaciones**.</span><span class="sxs-lookup"><span data-stu-id="90f59-124">**Orchestrations**.</span></span> <span data-ttu-id="90f59-125">Este método toma como parámetro el nombre de una orquestación y devuelve toda la información de esa orquestación como un **BTSysStatus** instancia.</span><span class="sxs-lookup"><span data-stu-id="90f59-125">This method takes as a parameter the name of an orchestration, and it returns all the information for that orchestration as a **BTSysStatus** instance.</span></span> <span data-ttu-id="90f59-126">Use una cadena vacía para el parámetro de nombre de la orquestación para devolver información sobre todas las orquestaciones.</span><span class="sxs-lookup"><span data-stu-id="90f59-126">Use an empty string for the orchestration name parameter to return information about all orchestrations.</span></span>  
  
-   <span data-ttu-id="90f59-127">**ReceiveLocations**.</span><span class="sxs-lookup"><span data-stu-id="90f59-127">**ReceiveLocations**.</span></span> <span data-ttu-id="90f59-128">Este método toma como parámetro el nombre de una ubicación de recepción y devuelve toda la información para la coincidencia de ubicaciones, como un **BTSysStatus** instancia.</span><span class="sxs-lookup"><span data-stu-id="90f59-128">This method takes as a parameter the name of a receive location, and it returns all the information for matching locations as a **BTSysStatus** instance.</span></span> <span data-ttu-id="90f59-129">Use una cadena vacía para el parámetro de nombre de las ubicaciones de recepción para devolver información sobre todas las ubicaciones.</span><span class="sxs-lookup"><span data-stu-id="90f59-129">Use an empty string for the receive locations name parameter to return information about all locations.</span></span>  
  
-   <span data-ttu-id="90f59-130">**ReceiveLocationsByDescription**.</span><span class="sxs-lookup"><span data-stu-id="90f59-130">**ReceiveLocationsByDescription**.</span></span> <span data-ttu-id="90f59-131">Este método toma como parámetro de la descripción de una ubicación de recepción y devuelve toda la información para la coincidencia de ubicaciones, como un **BTSysStatus** instancia.</span><span class="sxs-lookup"><span data-stu-id="90f59-131">This method takes as a parameter the description of a receive location, and it returns all the information for matching locations as a **BTSysStatus** instance.</span></span> <span data-ttu-id="90f59-132">Use una cadena vacía para el parámetro description para devolver información sobre todas las ubicaciones.</span><span class="sxs-lookup"><span data-stu-id="90f59-132">Use an empty string for the description parameter to return information about all locations.</span></span>  
  
-   <span data-ttu-id="90f59-133">**Puertos de envío**.</span><span class="sxs-lookup"><span data-stu-id="90f59-133">**SendPorts**.</span></span> <span data-ttu-id="90f59-134">Este método toma como parámetro el nombre de un puerto de envío y devuelve toda la información para la coincidencia de puertos como un **BTSysStatus** instancia.</span><span class="sxs-lookup"><span data-stu-id="90f59-134">This method takes as a parameter the name of a send port, and it returns all the information for matching ports as a **BTSysStatus** instance.</span></span> <span data-ttu-id="90f59-135">Utilice una cadena vacía para el parámetro de nombre de puerto de envío para devolver información acerca de todos los puertos.</span><span class="sxs-lookup"><span data-stu-id="90f59-135">Use an empty string for the send port name parameter to return information about all ports.</span></span>  
  
-   <span data-ttu-id="90f59-136">**SendPortsByDescription**.</span><span class="sxs-lookup"><span data-stu-id="90f59-136">**SendPortsByDescription**.</span></span> <span data-ttu-id="90f59-137">Este método toma como parámetro de la descripción de un puerto de envío y devuelve toda la información para la coincidencia de puertos como un **BTSysStatus** instancia.</span><span class="sxs-lookup"><span data-stu-id="90f59-137">This method takes as a parameter the description of a send port, and it returns all the information for matching ports as a **BTSysStatus** instance.</span></span> <span data-ttu-id="90f59-138">Utilice una cadena vacía para el parámetro description para devolver información acerca de todos los puertos.</span><span class="sxs-lookup"><span data-stu-id="90f59-138">Use an empty string for the description parameter to return information about all ports.</span></span>  
  
-   <span data-ttu-id="90f59-139">**StatusChanged**.</span><span class="sxs-lookup"><span data-stu-id="90f59-139">**StatusChanged**.</span></span> <span data-ttu-id="90f59-140">Debe configurar el servicio para que requiera SSL para el acceso de cliente y proteger la conexión entre el equipo de host del servicio Web de IIS y el servidor que hospeda el servicio UDDI con IPSec de nivel de red y los permisos adecuados de ACL de nivel de archivo.</span><span class="sxs-lookup"><span data-stu-id="90f59-140">This method takes as a parameter a timestamp, and it returns details of BizTalk objects (such as ports, hosts, and orchestrations) modified since the specified timestamp as a **BTSysStatus** instance.</span></span>  
  
-   <span data-ttu-id="90f59-141">**SystemStatus**.</span><span class="sxs-lookup"><span data-stu-id="90f59-141">**SystemStatus**.</span></span> <span data-ttu-id="90f59-142">Este método no toma ningún parámetro y devuelve los detalles sobre el estado del sistema de BizTalk como un **BTSysStatus** instancia.</span><span class="sxs-lookup"><span data-stu-id="90f59-142">This method takes no parameters, and it returns full details of the BizTalk system status as a **BTSysStatus** instance.</span></span>  
  
-   <span data-ttu-id="90f59-143">**UpdateReceiveLocationDescription**.</span><span class="sxs-lookup"><span data-stu-id="90f59-143">**UpdateReceiveLocationDescription**.</span></span> <span data-ttu-id="90f59-144">Este método actualiza la descripción de una ubicación de recepción especificada con valores de parámetros que contienen el nombre de la aplicación, el nombre del puerto de recepción, el nombre de la ubicación de recepción y la descripción de la ubicación de recepción.</span><span class="sxs-lookup"><span data-stu-id="90f59-144">This method updates the description of a specified receive location using parameter values that contain the application name, the receive port name, the receive location name, and the receive location description.</span></span> <span data-ttu-id="90f59-145">Devuelve una cadena que indica el resultado de la operación.</span><span class="sxs-lookup"><span data-stu-id="90f59-145">It returns a String that indicates the result of the operation.</span></span> <span data-ttu-id="90f59-146">Tenga en cuenta que la aplicación de cliente de prueba lee esta información de su archivo App.config.</span><span class="sxs-lookup"><span data-stu-id="90f59-146">Note that the test client application reads this information from its App.config file.</span></span>  
  
-   <span data-ttu-id="90f59-147">**UpdateSendPortDescription**.</span><span class="sxs-lookup"><span data-stu-id="90f59-147">**UpdateSendPortDescription**.</span></span> <span data-ttu-id="90f59-148">Este método actualiza la descripción de un puerto de envío especificado con valores de parámetros que contienen el nombre del puerto de envío y la descripción del puerto de envío.</span><span class="sxs-lookup"><span data-stu-id="90f59-148">This method updates the description of a specified send port using parameter values that contain the send port name and the send port description.</span></span> <span data-ttu-id="90f59-149">Devuelve una cadena que indica el resultado de la operación.</span><span class="sxs-lookup"><span data-stu-id="90f59-149">It returns a String that indicates the result of the operation.</span></span> <span data-ttu-id="90f59-150">Tenga en cuenta que la aplicación de cliente de prueba lee esta información de su archivo App.config.</span><span class="sxs-lookup"><span data-stu-id="90f59-150">Note that the test client application reads this information from its App.config file.</span></span>  
  
## <a name="configuring-the-biztalk-operations-web-service"></a><span data-ttu-id="90f59-151">Configuración del servicio Web de las operaciones de BizTalk</span><span class="sxs-lookup"><span data-stu-id="90f59-151">Configuring the BizTalk Operations Web Service</span></span>  
 <span data-ttu-id="90f59-152">El servicio Web de las operaciones de BizTalk o bien se comunica directamente con las bases de datos de administración de BizTalk Server mediante Windows Management Instrumentation (WMI) o utiliza las operaciones de BizTalk y el Explorador de API para obtener la información necesaria.</span><span class="sxs-lookup"><span data-stu-id="90f59-152">The BizTalk Operations Web service either communicates directly with the BizTalk Server management databases using Windows Management Instrumentation (WMI) or it uses the BizTalk Operations and Explorer API to obtain the information it requires.</span></span> <span data-ttu-id="90f59-153">Por lo tanto, debe asegurarse de que su sistema cumple las condiciones siguientes y que configure la configuración de permisos de seguridad siguientes:</span><span class="sxs-lookup"><span data-stu-id="90f59-153">Therefore, you must make sure that your system meets the following conditions and that you configure the following security permission settings:</span></span>  
  
- <span data-ttu-id="90f59-154">Establecer el **allowOverride** atributo en el archivo Web.config de nivel de equipo a **false** para asegurarse de que los desarrolladores no pueden cambiar el nivel de confianza de sus aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="90f59-154">Set the **allowOverride** attribute in the machine-level Web.config file to **false** to make sure developers cannot change the trust level of their applications.</span></span>  
  
- <span data-ttu-id="90f59-155">De forma predeterminada, el servicio Web de las operaciones de BizTalk no está configurado para que requiera Secure Sockets Layer (SSL) cuando obtiene acceso a los clientes.</span><span class="sxs-lookup"><span data-stu-id="90f59-155">By default, the BizTalk Operations Web service is not configured to require Secure Sockets Layer (SSL) when accessed by clients.</span></span> <span data-ttu-id="90f59-156">Debe configurar el servicio para que requiera SSL para el acceso de cliente y proteger la conexión entre el equipo de host del servicio Web de Internet Information Services (IIS) y el equipo que ejecuta SQL Server que hospeda la base de datos BizTalkMgmtDb mediante IPSec de nivel de red y permisos de lista (ACL) del control de acceso de nivel de archivo adecuado.</span><span class="sxs-lookup"><span data-stu-id="90f59-156">You should configure the service so that it requires SSL for client access, and protect the connection between the Internet Information Services (IIS) Web service host computer and the computer running SQL Server that hosts the BizTalkMgmtDb database using network-level IPSec and appropriate file-level access control list (ACL) permissions.</span></span>  
  
- <span data-ttu-id="90f59-157">Los usuarios acceder al servicio Web de las operaciones de BizTalk deben ser miembros del grupo de administradores de BizTalk Server predeterminado para algunos métodos y miembros del grupo de usuarios de la aplicación de BizTalk predeterminada para otros métodos.</span><span class="sxs-lookup"><span data-stu-id="90f59-157">Users accessing the BizTalk Operations Web service must be members of the default BizTalk Server Administrators group for some methods and members of the default BizTalk Application Users group for other methods.</span></span>  
  
- <span data-ttu-id="90f59-158">Debe asegurarse de que el servicio Web de las operaciones de BizTalk reside en un directorio virtual denominado ESB.BizTalkOperationsService que tiene deshabilitado el acceso anónimo.</span><span class="sxs-lookup"><span data-stu-id="90f59-158">You must make sure that the BizTalk Operations Web service resides in an IIS virtual directory named ESB.BizTalkOperationsService that has anonymous access disabled.</span></span>  
  
- <span data-ttu-id="90f59-159">Los usuarios deben tener **seleccione** permiso de varias tablas en SQL Server se encuentra en la base de datos BizTalkMgmtDb y la base de datos BizTalkMsgBoxDb.</span><span class="sxs-lookup"><span data-stu-id="90f59-159">Users must have **SELECT** permission in SQL Server for several tables located in the BizTalkMgmtDb database and the BizTalkMsgBoxDb database.</span></span> <span data-ttu-id="90f59-160">Use SQL Server Management Studio para establecer los permisos siguientes:</span><span class="sxs-lookup"><span data-stu-id="90f59-160">Use SQL Server Management Studio to set the following permissions:</span></span>  
  
  -   <span data-ttu-id="90f59-161">En la base de datos BizTalkMgmtDb, configure el rol de base de datos BTS_ADMIN_USERS con **seleccione** permiso en las tablas siguientes:</span><span class="sxs-lookup"><span data-stu-id="90f59-161">In the BizTalkMgmtDb database, configure the BTS_ADMIN_USERS database role with **SELECT** permission on the following tables:</span></span>  
  
      -   <span data-ttu-id="90f59-162">adm_Server2HostMapping</span><span class="sxs-lookup"><span data-stu-id="90f59-162">adm_Server2HostMapping</span></span>  
  
      -   <span data-ttu-id="90f59-163">adm_Server</span><span class="sxs-lookup"><span data-stu-id="90f59-163">adm_Server</span></span>  
  
      -   <span data-ttu-id="90f59-164">adm_hostInstance</span><span class="sxs-lookup"><span data-stu-id="90f59-164">adm_hostInstance</span></span>  
  
  -   <span data-ttu-id="90f59-165">En la base de datos BizTalkMsgBoxDb, configure el rol de base de datos BTS_ADMIN_USER con **seleccione** permiso en la tabla ProcessHeartbeats.</span><span class="sxs-lookup"><span data-stu-id="90f59-165">In the BizTalkMsgBoxDb database, configure the BTS_ADMIN_USER database role with **SELECT** permission on the ProcessHeartbeats table.</span></span>  
  
  <span data-ttu-id="90f59-166">En SQL Server Management Studio, puede configurar los permisos necesarios.</span><span class="sxs-lookup"><span data-stu-id="90f59-166">In SQL Server Management Studio, you can configure the required permissions.</span></span> <span data-ttu-id="90f59-167">Para ello, expanda **seguridad** en la vista de árbol del panel izquierdo del explorador de objetos, expanda **Roles**, expanda **DatabaseRoles**, seleccione la función BTS_ADMIN_USERS y, a continuación, edite la propiedades de este rol, tal como se muestra en la figura 1.</span><span class="sxs-lookup"><span data-stu-id="90f59-167">To do this, expand **Security** in the left pane tree view of Object Explorer, expand **Roles**, expand **DatabaseRoles**, select the BTS_ADMIN_USERS role, and then edit the properties for this role, as shown in Figure 1.</span></span>  
  
  <span data-ttu-id="90f59-168">![SQL Server Management Studio](../esb-toolkit/media/ch4-sqlservermgmtstudio.gif "Ch4-SQLServerMgmtStudio")</span><span class="sxs-lookup"><span data-stu-id="90f59-168">![SQL Server Mgmt Studio](../esb-toolkit/media/ch4-sqlservermgmtstudio.gif "Ch4-SQLServerMgmtStudio")</span></span>  
  
  <span data-ttu-id="90f59-169">**Figura 1**</span><span class="sxs-lookup"><span data-stu-id="90f59-169">**Figure 1**</span></span>  
  
  <span data-ttu-id="90f59-170">**Editar permisos para el rol de base de datos BTS_ADMIN_USERS en Microsoft SQL Server Management Studio**</span><span class="sxs-lookup"><span data-stu-id="90f59-170">**Editing permissions for the BTS_ADMIN_USERS database role in Microsoft SQL Server Management Studio**</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="90f59-171">Debe configurar este servicio para usar seguridad integrada de Windows y ejecutar en la cuenta de servicio de red integrada.</span><span class="sxs-lookup"><span data-stu-id="90f59-171">You must configure this service to use Windows Integrated Security and run under the built-in NETWORK SERVICE account.</span></span> <span data-ttu-id="90f59-172">También debe habilitar la autenticación Kerberos en el servidor Web de IIS para que envíe el encabezado **Negotiate, NTLM** al cliente.</span><span class="sxs-lookup"><span data-stu-id="90f59-172">You must also enable Kerberos authentication on your IIS Web server so that it sends the header **Negotiate,NTLM** to the client.</span></span> <span data-ttu-id="90f59-173">Para obtener más información, consulte [cómo configurar IIS para que admita el protocolo Kerberos y el protocolo NTLM para la autenticación de red](http://go.microsoft.com/fwlink/?LinkId=186430)([http://go.microsoft.com/fwlink/?LinkId=186430](http://go.microsoft.com/fwlink/?LinkId=186430)).</span><span class="sxs-lookup"><span data-stu-id="90f59-173">For more information, see [How to configure IIS to support both the Kerberos protocol and the NTLM protocol for network authentication](http://go.microsoft.com/fwlink/?LinkId=186430)([http://go.microsoft.com/fwlink/?LinkId=186430](http://go.microsoft.com/fwlink/?LinkId=186430)).</span></span>  
>   
>  <span data-ttu-id="90f59-174">De forma predeterminada, el servicio Web de las operaciones de BizTalk no está configurado para requerir SSL cuando obtiene acceso a los clientes.</span><span class="sxs-lookup"><span data-stu-id="90f59-174">By default, the BizTalk Operations Web service is not configured to require SSL when accessed by clients.</span></span> <span data-ttu-id="90f59-175">Debe configurar el servicio para que requiera SSL para el acceso de cliente y proteger la conexión entre el equipo de host del servicio Web de IIS y el servidor que hospeda el servicio UDDI con IPSec de nivel de red y los permisos adecuados de ACL de nivel de archivo.</span><span class="sxs-lookup"><span data-stu-id="90f59-175">You should configure the service so that it requires SSL for client access and protect the connection between the IIS Web service host computer and the server that hosts the UDDI service using network-level IPSec and appropriate file-level ACL permissions.</span></span>
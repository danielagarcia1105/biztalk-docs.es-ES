---
title: "Lista de comprobación: Mantenimiento y solución de problemas de las bases de datos de servidor BizTalk Server | Documentos de Microsoft"
ms.custom: 
ms.date: 06/29/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 58931faf-fc84-46fe-8359-506da94c3756
caps.latest.revision: "4"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 5f30dbb156abd7e0c0daa4dd0a8d0082a7d63622
ms.sourcegitcommit: 3fc338e52d5dbca2c3ea1685a2faafc7582fe23a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 12/01/2017
---
# <a name="checklist-maintaining-and-troubleshooting-biztalk-server-databases"></a><span data-ttu-id="882d8-102">Lista de comprobación: Mantenimiento y solución de problemas de las bases de datos de servidor BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="882d8-102">Checklist: Maintaining and Troubleshooting BizTalk Server Databases</span></span>
<span data-ttu-id="882d8-103">Bases de datos de BizTalk Server y su estado de mantenimiento son muy importantes para un entorno de mensajería de base de datos de BizTalk Server correcta.</span><span class="sxs-lookup"><span data-stu-id="882d8-103">BizTalk Server databases and their health are very important for a successful BizTalk Server database messaging environment.</span></span> <span data-ttu-id="882d8-104">En este tema se enumera los pasos que se deben seguir al realizar mantenimiento o solución de problemas de las bases de datos de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="882d8-104">This topic lists the steps that you must follow when maintaining or troubleshooting the BizTalk Server databases.</span></span>  
  
-   [<span data-ttu-id="882d8-105">Mantenimiento de bases de datos de BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="882d8-105">Maintaining BizTalk Server Databases</span></span>](../technical-guides/checklist-maintaining-and-troubleshooting-biztalk-server-databases.md#BKMK_MaintainDB)  
  
-   [<span data-ttu-id="882d8-106">Solución de problemas de las bases de datos de servidor BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="882d8-106">Troubleshooting BizTalk Server Databases</span></span>](../technical-guides/checklist-maintaining-and-troubleshooting-biztalk-server-databases.md#BKMK_Troubleshoot)  
  
<a name="BKMK_MaintainDB"></a>   
## <a name="maintaining-biztalk-server-databases"></a><span data-ttu-id="882d8-107">Mantener bases de datos de servidor BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="882d8-107">Maintaining BizTalk Server Databases</span></span>  
  
|<span data-ttu-id="882d8-108">Pasos</span><span class="sxs-lookup"><span data-stu-id="882d8-108">Steps</span></span>|<span data-ttu-id="882d8-109">Referencia</span><span class="sxs-lookup"><span data-stu-id="882d8-109">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="882d8-110">Deshabilitar la **actualizar estadísticas automáticamente** y **crear estadísticas automáticamente** opciones (se aplica solo a las bases de datos de cuadro de mensajes de BizTalk Server).</span><span class="sxs-lookup"><span data-stu-id="882d8-110">Disable the **Auto Update Statistics** and **Auto Create Statistics** Options (applicable only to BizTalk Server MessageBox databases).</span></span>|<span data-ttu-id="882d8-111">**Nota:** esta configuración se realiza de forma predeterminada como parte de la configuración de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="882d8-111">**Note:**  These settings are done by default as part of the BizTalk Server configuration.</span></span> <span data-ttu-id="882d8-112">No debe realizar cambios en esta configuración.</span><span class="sxs-lookup"><span data-stu-id="882d8-112">You should not make changes to these settings.</span></span> <br /><br /> <span data-ttu-id="882d8-113">Debe deshabilitar la **crear estadísticas automáticamente** y **actualizar estadísticas automáticamente** opciones.</span><span class="sxs-lookup"><span data-stu-id="882d8-113">You must disable the **Auto Create Statistics** and the **Auto Update Statistics** options.</span></span> <span data-ttu-id="882d8-114">Para determinar si se deshabilita esta configuración, ejecute los siguientes procedimientos almacenados en SQL Server:</span><span class="sxs-lookup"><span data-stu-id="882d8-114">To determine if these settings are disabled, execute the following stored procedures in SQL Server:</span></span><br /><br /> <span data-ttu-id="882d8-115">exec sp_dboption 'BizTalkMsgBoxDB', 'crear estadísticas automáticamente' exec sp_dboption 'BizTalkMsgBoxDB', 'Actualizar estadísticas automáticamente'</span><span class="sxs-lookup"><span data-stu-id="882d8-115">exec sp_dboption 'BizTalkMsgBoxDB', 'auto create statistics'                 exec sp_dboption 'BizTalkMsgBoxDB', 'auto update statistics'</span></span><br /><br /> <span data-ttu-id="882d8-116">El valor devuelto para **CurrentSetting** debe establecerse en OFF.</span><span class="sxs-lookup"><span data-stu-id="882d8-116">The value returned for **CurrentSetting** should be OFF.</span></span> <span data-ttu-id="882d8-117">Si este valor se devuelve para **CurrentSetting** es ON, cámbielo a OFF mediante la ejecución de los siguientes procedimientos almacenados en SQL Server:</span><span class="sxs-lookup"><span data-stu-id="882d8-117">If this value returned for **CurrentSetting** is ON, change it to OFF by executing the following stored procedures in SQL Server:</span></span><br /><br /> <span data-ttu-id="882d8-118">exec sp_dboption 'BizTalkMsgBoxDB', 'crear estadísticas automáticamente', 'off' exec sp_dboption 'BizTalkMsgBoxDB', 'Actualizar estadísticas automáticamente', 'off'</span><span class="sxs-lookup"><span data-stu-id="882d8-118">exec sp_dboption 'BizTalkMsgBoxDB', 'auto create statistics', 'off'                 exec sp_dboption 'BizTalkMsgBoxDB', 'auto update statistics', 'off'</span></span><br /><br /> <span data-ttu-id="882d8-119">Para obtener más información acerca de estas opciones, vea los siguientes artículos de Microsoft Knowledge Base:</span><span class="sxs-lookup"><span data-stu-id="882d8-119">For more information about these settings see the following Microsoft Knowledge Base articles:</span></span><br /><br /> <span data-ttu-id="882d8-120">-   **917845**:["Experimentas bloqueo, deadlock condiciones u otros problemas SQL Server al intentar conectarse a la base de datos BizTalkMsgBoxDb de BizTalk Server"](http://go.microsoft.com/fwlink/?LinkId=153429) (http://go.microsoft.com/fwlink/?LinkId=153429).</span><span class="sxs-lookup"><span data-stu-id="882d8-120">-   **917845**—["You experience blocking, deadlock conditions, or other SQL Server issues when you try to connect to the BizTalkMsgBoxDb database in BizTalk Server"](http://go.microsoft.com/fwlink/?LinkId=153429) (http://go.microsoft.com/fwlink/?LinkId=153429).</span></span><br /><span data-ttu-id="882d8-121">-   **912262**:["la opción de estadísticas de actualización automática, la creación automática de opción de estadísticas y la configuración de paralelismo están desactivados en la instancia de base de datos SQL Server que hospeda la base de datos BizTalkMsgBoxDB de BizTalk Server"](http://go.microsoft.com/fwlink/?LinkId=153430) (http://go.microsoft.com/fwlink/?LinkId=153430).</span><span class="sxs-lookup"><span data-stu-id="882d8-121">-   **912262**—["The auto update statistics option, the auto create statistics option, and the Parallelism setting are turned off in the SQL Server database instance that hosts the BizTalk Server BizTalkMsgBoxDB database"](http://go.microsoft.com/fwlink/?LinkId=153430) (http://go.microsoft.com/fwlink/?LinkId=153430).</span></span>|  
|<span data-ttu-id="882d8-122">Establecer the Max Degree de propiedad de paralelismo</span><span class="sxs-lookup"><span data-stu-id="882d8-122">Set the Max Degree of Parallelism property</span></span>|<span data-ttu-id="882d8-123">**Nota:** esta configuración se realiza de forma predeterminada como parte de la configuración de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="882d8-123">**Note:**  These settings are done by default as part of the BizTalk Server configuration.</span></span> <span data-ttu-id="882d8-124">No debe realizar cambios en esta configuración.</span><span class="sxs-lookup"><span data-stu-id="882d8-124">You should not make changes to these settings.</span></span> <br /><br /> <span data-ttu-id="882d8-125">Establecer the Max Degree of Parallelism **run_value** y **config_value** propiedades con un valor de uno (1) en las instancias de SQL Server que hospedan las bases de datos de cuadro de mensajes de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="882d8-125">Set the Max Degree of Parallelism **run_value** and **config_value** properties to a value of one (1) on the SQL Server instances that host the BizTalk Server Messagebox databases.</span></span> <span data-ttu-id="882d8-126">Para comprobar la Max Degree of configuración paralelismo, ejecute el siguiente procedimiento almacenado contra el maestro de base de datos de SQL Server:</span><span class="sxs-lookup"><span data-stu-id="882d8-126">To check the Max Degree of Parallelism setting, execute the following stored procedure against the Master database in SQL Server:</span></span><br /><br /> <span data-ttu-id="882d8-127">exec sp_configure 'max degree of parallelism'</span><span class="sxs-lookup"><span data-stu-id="882d8-127">exec sp_configure 'max degree of parallelism'</span></span><br /><br /> <span data-ttu-id="882d8-128">Si el **run_value** y **config_value** son no se establece en un valor de uno (1), ejecute el siguiente procedimiento almacenado en SQL Server:</span><span class="sxs-lookup"><span data-stu-id="882d8-128">If the **run_value** and **config_value** are not set to a value of one (1), execute the following stored procedure in SQL Server:</span></span><br /><br /> <span data-ttu-id="882d8-129">exec sp_configure 'max degree of parallelism', '1' reconfigure con invalidación</span><span class="sxs-lookup"><span data-stu-id="882d8-129">exec sp_configure 'max degree of parallelism', '1'                 reconfigure with override</span></span><br /><br /> <span data-ttu-id="882d8-130">Para obtener más información acerca de cómo afecta la Max Degree of paralelismo a BizTalk Server, consulte los siguientes artículos de Microsoft Knowledge Base:</span><span class="sxs-lookup"><span data-stu-id="882d8-130">For more information about how the Max Degree of Parallelism setting affects BizTalk Server, see the following Microsoft Knowledge Base articles:</span></span><br /><br /> <span data-ttu-id="882d8-131">-   **899000**:["El valor de configuración de paralelismo para la instancia de SQL Server al configurar BizTalk Server"](http://go.microsoft.com/fwlink/?LinkId=153432) (http://go.microsoft.com/fwlink/?LinkId=153432).</span><span class="sxs-lookup"><span data-stu-id="882d8-131">-   **899000**—["The Parallelism setting for the instance of SQL Server when you configure BizTalk Server"](http://go.microsoft.com/fwlink/?LinkId=153432) (http://go.microsoft.com/fwlink/?LinkId=153432).</span></span><br /><span data-ttu-id="882d8-132">-   **917845**:["Experimentas bloqueo, deadlock condiciones u otros problemas SQL Server al intentar conectarse a la base de datos BizTalkMsgBoxDb de BizTalk Server"](http://go.microsoft.com/fwlink/?LinkId=153429) (http://go.microsoft.com/fwlink/?LinkId=153429).</span><span class="sxs-lookup"><span data-stu-id="882d8-132">-   **917845**—["You experience blocking, deadlock conditions, or other SQL Server issues when you try to connect to the BizTalkMsgBoxDb database in BizTalk Server"](http://go.microsoft.com/fwlink/?LinkId=153429) (http://go.microsoft.com/fwlink/?LinkId=153429).</span></span>|  
|<span data-ttu-id="882d8-133">Determinar cuándo se pueden volver a generar los índices de BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="882d8-133">Determine when you can rebuild BizTalk Server indexes</span></span>|<span data-ttu-id="882d8-134">La mayoría de los índices de las bases de datos de BizTalk Server se agrupan en clústeres (Id. de índice: 1).</span><span class="sxs-lookup"><span data-stu-id="882d8-134">Most of the indexes in BizTalk Server databases are clustered (index ID: 1).</span></span> <span data-ttu-id="882d8-135">El comando DBCC SHOWCONTIG se puede usar para mostrar información de fragmentación de tablas en las bases de datos de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="882d8-135">The DBCC SHOWCONTIG command can be used to display fragmentation information for tables in the BizTalk Server databases.</span></span> <span data-ttu-id="882d8-136">Estos índices están basados en GUID por lo que es normal que se produzca la fragmentación.</span><span class="sxs-lookup"><span data-stu-id="882d8-136">These indexes are GUID-based so it is normal for fragmentation to occur.</span></span> <span data-ttu-id="882d8-137">Si el valor de densidad de recorrido de DBCC SHOWCONTIG es inferior a 30%, se pueden volver a generar los índices durante el tiempo de inactividad.</span><span class="sxs-lookup"><span data-stu-id="882d8-137">If the Scan Density value of DBCC SHOWCONTIG is less than 30%, the indexes can be rebuilt during downtime.</span></span> <span data-ttu-id="882d8-138">Muchas tablas en las bases de datos de BizTalk Server contienen columnas que usan las definiciones de tipo de datos donde la indización en línea no se puede realizar.</span><span class="sxs-lookup"><span data-stu-id="882d8-138">Many tables in the BizTalk Server databases contain columns that use DataType definitions where online indexing cannot be done.</span></span> <span data-ttu-id="882d8-139">Por lo tanto, los índices de tablas en las bases de datos de BizTalk Server no deben nunca se vuelven a generar mientras BizTalk está procesando datos.</span><span class="sxs-lookup"><span data-stu-id="882d8-139">Therefore, the indexes for tables in the BizTalk Server databases should never be rebuilt while BizTalk is processing data.</span></span> <span data-ttu-id="882d8-140">Para obtener más información acerca de cómo volver a generar los índices de BizTalk, vea el artículo de Microsoft Knowledge Base siguiente:</span><span class="sxs-lookup"><span data-stu-id="882d8-140">For more information on how to rebuild the BizTalk indexes, see the following Microsoft Knowledge Base article:</span></span><br /><br /> <span data-ttu-id="882d8-141">-   **917845**:["Experimentas bloqueo, deadlock condiciones u otros problemas SQL Server al intentar conectarse a la base de datos BizTalkMsgBoxDb de BizTalk Server"](http://go.microsoft.com/fwlink/?LinkId=153429) (http://go.microsoft.com/fwlink/?LinkId=153429).</span><span class="sxs-lookup"><span data-stu-id="882d8-141">-   **917845**—["You experience blocking, deadlock conditions, or other SQL Server issues when you try to connect to the BizTalkMsgBoxDb database in BizTalk Server"](http://go.microsoft.com/fwlink/?LinkId=153429) (http://go.microsoft.com/fwlink/?LinkId=153429).</span></span><br /><br /> <span data-ttu-id="882d8-142">**Nota:** también puede usar la función sys.dm_db_index_physical_stats para buscar información de fragmentación en SQL Server.</span><span class="sxs-lookup"><span data-stu-id="882d8-142">**Note:**  You can also use the sys.dm_db_index_physical_stats function to look for fragmentation information in SQL Server.</span></span> <span data-ttu-id="882d8-143">Para obtener más información, consulte [sys.dm_db_index_physical_stats (Transact-SQL)](https://docs.microsoft.com/sql/relational-databases/system-dynamic-management-views/sys-dm-db-index-physical-stats-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="882d8-143">For more information, see [sys.dm_db_index_physical_stats (Transact-SQL)](https://docs.microsoft.com/sql/relational-databases/system-dynamic-management-views/sys-dm-db-index-physical-stats-transact-sql).</span></span>|  
|<span data-ttu-id="882d8-144">Supervisar la base de datos para bloqueos, bloques o interbloqueos</span><span class="sxs-lookup"><span data-stu-id="882d8-144">Monitor the database for locks, blocks, or deadlocks</span></span>|<span data-ttu-id="882d8-145">Es un comportamiento normal de bloqueos y los bloques que se produzca en las bases de datos de SQL Server que utiliza BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="882d8-145">It is an expected behavior for locks and blocks to occur on the SQL Server databases used by BizTalk Server.</span></span> <span data-ttu-id="882d8-146">Sin embargo, no se espera que estos bloqueos ni bloques continúen durante un largo período de tiempo.</span><span class="sxs-lookup"><span data-stu-id="882d8-146">However, it is not expected to have these locks or blocks to continue for an extended period of time.</span></span> <span data-ttu-id="882d8-147">Extendidos bloqueos y los interbloqueos en SQL Server bases de datos usadas por BizTalk Server están un indicador de un posible problema.</span><span class="sxs-lookup"><span data-stu-id="882d8-147">Extended blocking and deadlocking on the SQL Server databases used by BizTalk Server are indicators of a potential problem.</span></span> <span data-ttu-id="882d8-148">Actuales conocidos causas de interbloqueo y el bloqueo en las bases de datos de SQL Server utilizados por BizTalk Server, revise el artículo de Microsoft Knowledge Base siguiente:</span><span class="sxs-lookup"><span data-stu-id="882d8-148">For the current known causes of deadlocking and blocking on the SQL Server databases used by BizTalk Server, review the following Microsoft Knowledge Base article:</span></span><br /><br /> <span data-ttu-id="882d8-149">-   **917845**:["Experimentas bloqueo, deadlock condiciones u otros problemas SQL Server al intentar conectarse a la base de datos BizTalkMsgBoxDb de BizTalk Server"](http://go.microsoft.com/fwlink/?LinkId=153429) (http://go.microsoft.com/fwlink/?LinkId=153429).</span><span class="sxs-lookup"><span data-stu-id="882d8-149">-   **917845**—["You experience blocking, deadlock conditions, or other SQL Server issues when you try to connect to the BizTalkMsgBoxDb database in BizTalk Server"](http://go.microsoft.com/fwlink/?LinkId=153429) (http://go.microsoft.com/fwlink/?LinkId=153429).</span></span>|  
|<span data-ttu-id="882d8-150">Supervisar el tamaño de las bases de datos y tablas</span><span class="sxs-lookup"><span data-stu-id="882d8-150">Monitor the size of databases and tables</span></span>|<span data-ttu-id="882d8-151">El tamaño de la base de datos de cuadro de mensajes de BizTalk Server debe ser normalmente no más de aproximadamente 5GB.</span><span class="sxs-lookup"><span data-stu-id="882d8-151">The size of the BizTalk Server Messagebox database should typically be no more than approximately 5GB.</span></span>  <span data-ttu-id="882d8-152">La base de datos BizTalkMsgBoxDb no se deben mantener los datos y debe considerarse un búfer hasta que los datos se procesa o se mueven a la base de datos de BizTalkDTADb.</span><span class="sxs-lookup"><span data-stu-id="882d8-152">The BizTalkMsgBoxDb database should not be holding any data, and should be considered a buffer until the data is processed or moved to the BizTalkDTADb database.</span></span> <span data-ttu-id="882d8-153">Un entorno con un back-end eficaz de SQL Server y varias orquestaciones de larga ejecución puede tener una base de datos de BizTalkMsgBoxDb superior a 5GB.</span><span class="sxs-lookup"><span data-stu-id="882d8-153">An environment with a powerful SQL Server backend and numerous long running orchestrations may have a BizTalkMsgBoxDb database larger than 5GB.</span></span> <span data-ttu-id="882d8-154">Un entorno de gran volumen con ningún orquestaciones de larga ejecución debe tener una base de datos de cuadro de mensajes de BizTalk Server mucho menor que 5GB.</span><span class="sxs-lookup"><span data-stu-id="882d8-154">A high volume environment with no long-running orchestrations should have a BizTalk Server Messagebox database much smaller than 5GB.</span></span> <span data-ttu-id="882d8-155">La base de datos de seguimiento de BizTalk Server puede variar en gran medida de tamaño, pero si disminuye drásticamente el rendimiento de las consultas, a continuación, la base de datos de seguimiento es probablemente demasiado grande.</span><span class="sxs-lookup"><span data-stu-id="882d8-155">The BizTalk Server tracking database can vary greatly in size but if query performance decreases dramatically, then the tracking database is probably too large.</span></span> <span data-ttu-id="882d8-156">Como regla general, una base de datos de seguimiento de BizTalk Server más de 15 a 20 GB es demasiado grande y puede afectar negativamente al rendimiento.</span><span class="sxs-lookup"><span data-stu-id="882d8-156">As a rule of thumb, a BizTalk Server tracking database larger than 15-20 GB is considered too large and may adversely impact performance.</span></span> <span data-ttu-id="882d8-157">Los siguientes problemas pueden distribuirse a las bases de datos de BizTalk Server que son demasiado grandes:</span><span class="sxs-lookup"><span data-stu-id="882d8-157">The following issues may be attributable to BizTalk Server databases that are too large:</span></span><br /><br /> <span data-ttu-id="882d8-158">-La base de datos de cuadro de mensajes de BizTalk Server continúa aumentando mientras que el tamaño de datos (no solo en el archivo de registro) sigue siendo grande.</span><span class="sxs-lookup"><span data-stu-id="882d8-158">-   The BizTalk Server Messagebox database continues to grow while the data size (not just the log file) remains large.</span></span> <span data-ttu-id="882d8-159">BizTalk Server tarda más tiempo de lo normal para procesar incluso un escenario de flujo de mensaje simple.</span><span class="sxs-lookup"><span data-stu-id="882d8-159">BizTalk Server takes a longer time than normal to process even a simple message flow scenario.</span></span><br /><span data-ttu-id="882d8-160">-Las consultas de concentrador de grupo llevar más tiempo de lo normal y pueden incluso tiempo de espera.</span><span class="sxs-lookup"><span data-stu-id="882d8-160">-   Group Hub queries take a longer time than normal and may even timeout.</span></span><br /><span data-ttu-id="882d8-161">-El archivo de registro de base de datos nunca se trunca.</span><span class="sxs-lookup"><span data-stu-id="882d8-161">-   The database log file never gets truncated.</span></span><br /><span data-ttu-id="882d8-162">-Los trabajos del agente de SQL de BizTalk se ejecutan más lentamente de lo normal.</span><span class="sxs-lookup"><span data-stu-id="882d8-162">-   The BizTalk SQL Agent jobs run slower than normal.</span></span><br /><span data-ttu-id="882d8-163">-Algunas tablas son bastante grandes o tienen demasiadas filas en comparación a su estado normal.</span><span class="sxs-lookup"><span data-stu-id="882d8-163">-   Some tables are considerably large or have too many rows compared to normal.</span></span><br /><br /> <span data-ttu-id="882d8-164">Las bases de datos de BizTalk Server pueden llegar a ser grandes por varios motivos incluidos:</span><span class="sxs-lookup"><span data-stu-id="882d8-164">The BizTalk Server databases can become large for several reasons including:</span></span><br /><br /> <span data-ttu-id="882d8-165">-BizTalk trabajos del Agente SQL no se está ejecutando</span><span class="sxs-lookup"><span data-stu-id="882d8-165">-   BizTalk SQL Agent Jobs not running</span></span><br /><span data-ttu-id="882d8-166">-Mensaje suspendido excesivo o instancias de servicio</span><span class="sxs-lookup"><span data-stu-id="882d8-166">-   Excessive suspended message or service instances</span></span><br /><span data-ttu-id="882d8-167">: Errores de disco</span><span class="sxs-lookup"><span data-stu-id="882d8-167">-   Disk failures</span></span><br /><span data-ttu-id="882d8-168">-Altos niveles de seguimiento</span><span class="sxs-lookup"><span data-stu-id="882d8-168">-   High levels of tracking</span></span><br /><span data-ttu-id="882d8-169">-Limitación BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="882d8-169">-   BizTalk Server throttling</span></span><br /><span data-ttu-id="882d8-170">-Un bajo rendimiento de SQL Server</span><span class="sxs-lookup"><span data-stu-id="882d8-170">-   Poor SQL Server performance</span></span><br /><span data-ttu-id="882d8-171">: Problemas de latencia de red</span><span class="sxs-lookup"><span data-stu-id="882d8-171">-   Network latency issues</span></span><br /><br /> <span data-ttu-id="882d8-172">De forma similar, puede tener demasiadas filas en una tabla.</span><span class="sxs-lookup"><span data-stu-id="882d8-172">Similarly, you can have too many rows in a table.</span></span> <span data-ttu-id="882d8-173">No hay ningún número de conjunto de filas que es demasiado elevado.</span><span class="sxs-lookup"><span data-stu-id="882d8-173">There is no set number of rows that are too many.</span></span> <span data-ttu-id="882d8-174">Además, este número de filas varía según el tipo de datos se almacena en la tabla.</span><span class="sxs-lookup"><span data-stu-id="882d8-174">Additionally, this number of rows varies by what kind of data is stored in the table.</span></span> <span data-ttu-id="882d8-175">Por ejemplo, un *dta_DebugTrace* tabla que tiene más de 1 millón de filas probablemente tiene demasiadas filas.</span><span class="sxs-lookup"><span data-stu-id="882d8-175">For example, a *dta_DebugTrace* table that has more than 1 million rows probably has too many rows.</span></span> <span data-ttu-id="882d8-176">A *HostNameQ_Suspended* tabla que tiene más de 200.000 filas probablemente tiene demasiadas filas.</span><span class="sxs-lookup"><span data-stu-id="882d8-176">A *HostNameQ_Suspended* table that has more than 200,000 rows probably has too many rows.</span></span><br /><br /> <span data-ttu-id="882d8-177">Asegúrese de que conoce las expectativas del entorno para determinar si se está produciendo un problema de datos.</span><span class="sxs-lookup"><span data-stu-id="882d8-177">Make sure that you know what is expected in your environment to determine whether a data issue is occurring.</span></span>|  
|<span data-ttu-id="882d8-178">Habilitar el seguimiento en el host de BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="882d8-178">Enable tracking on BizTalk Server host</span></span>|<span data-ttu-id="882d8-179">De forma predeterminada, el seguimiento está habilitado en el host predeterminado.</span><span class="sxs-lookup"><span data-stu-id="882d8-179">By default, tracking is enabled on the default host.</span></span> <span data-ttu-id="882d8-180">BizTalk requiere la **Permitir seguimiento de Host** se activa la opción en un solo HOST.</span><span class="sxs-lookup"><span data-stu-id="882d8-180">BizTalk requires the **Allow Host Tracking** option be checked on a single HOST.</span></span> <span data-ttu-id="882d8-181">Cuando el seguimiento está habilitado, el servicio de descodificación de datos de seguimiento (TDDS) mueve el seguimiento de los datos de eventos de la base de datos de cuadro de mensajes de BizTalk Server a la base de datos de seguimiento de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="882d8-181">When tracking is enabled, the Tracking Data Decode Service (TDDS) moves the tracking event data from the BizTalk Server Messagebox database to the BizTalk Server tracking database.</span></span> <span data-ttu-id="882d8-182">Si ningún host de BizTalk Server se configura con la opción **Permitir seguimiento de Host** o si el host de seguimiento se detiene, a continuación, TDDS no se ejecutará y las tablas de TrackingData_x_x en la base de datos de cuadro de mensajes de BizTalk Server crece desactivadas.</span><span class="sxs-lookup"><span data-stu-id="882d8-182">If no BizTalk Server hosts are configured with the option to **Allow Host Tracking** or if the tracking host is stopped, then TDDS will not run and the TrackingData_x_x tables in the BizTalk Server Messagebox database will grow unchecked.</span></span> <span data-ttu-id="882d8-183">Por lo tanto, se debe configurar un host de BizTalk Server dedicado con la opción **Permitir seguimiento de Host**.</span><span class="sxs-lookup"><span data-stu-id="882d8-183">Therefore, a dedicated BizTalk Server host should be configured with the option to **Allow Host Tracking**.</span></span> <span data-ttu-id="882d8-184">Para obtener más información acerca de cómo configurar un host de seguimiento dedicado vea [configurar un Host de seguimiento dedicado](~/technical-guides/configuring-a-dedicated-tracking-host.md).</span><span class="sxs-lookup"><span data-stu-id="882d8-184">For more information about configuring a dedicated tracking host see [Configuring a Dedicated Tracking Host](~/technical-guides/configuring-a-dedicated-tracking-host.md).</span></span> <span data-ttu-id="882d8-185">**Nota:** para permitir que TDDS mantener los nuevos eventos de seguimiento en escenarios de gran volumen, puede crear varias instancias de host de seguimiento único, pero no más de un host debe estar configurado para el seguimiento.</span><span class="sxs-lookup"><span data-stu-id="882d8-185">**Note:**  To allow TDDS to maintain new tracking events in high volume scenarios, you can create multiple instances of a single tracking host but no more than one host should be configured for tracking.</span></span>|  
|<span data-ttu-id="882d8-186">Use los trabajos del Agente SQL Server de BizTalk correctos</span><span class="sxs-lookup"><span data-stu-id="882d8-186">Use the correct BizTalk SQL Server Agent jobs</span></span>|<span data-ttu-id="882d8-187">Ejecución de trabajos del agente de SQL Server de BizTalk son cruciales para la administración de las bases de datos de BizTalk Server y para mantener un rendimiento óptimo.</span><span class="sxs-lookup"><span data-stu-id="882d8-187">Execution of the BizTalk Server SQL Agent jobs are crucial for managing the BizTalk Server databases and for maintaining optimal performance.</span></span><br /><br /> <span data-ttu-id="882d8-188">-El **copia de seguridad de BizTalk Server** trabajo del Agente SQL Server es el único método admitido para hacer copia de seguridad de las bases de datos de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="882d8-188">-   The  **Backup BizTalk Server** SQL Server Agent job is the only supported method to back up the BizTalk Server databases.</span></span> <span data-ttu-id="882d8-189">Este trabajo requiere configurar todas las bases de datos de BizTalk Server para usar un modelo de recuperación completa.</span><span class="sxs-lookup"><span data-stu-id="882d8-189">This job requires you to set up all BizTalk Server databases to use a Full Recovery Model.</span></span> <span data-ttu-id="882d8-190">Debe configurar este trabajo para un entorno de BizTalk Server correcto.</span><span class="sxs-lookup"><span data-stu-id="882d8-190">You should configure this job for a healthy BizTalk Server environment.</span></span> <span data-ttu-id="882d8-191">Puede utilizar los métodos de SQL Server para realizar una copia de las bases de datos de BizTalk Server sólo si se detiene el servicio SQL Server y si se detienen todos los procesos de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="882d8-191">You can use the SQL Server methods to back up the BizTalk Server databases only if the SQL Server service is stopped and if all BizTalk Server processes are stopped.</span></span> <span data-ttu-id="882d8-192">**Nota:** para obtener más información acerca de cómo utilizar el modelo de recuperación completa de SQL Server al configurar el trabajo de copia de seguridad de SQL Agent BizTalk Server, vea [trasvase de registros](http://go.microsoft.com/fwlink/?LinkId=153450) (http://go.Microsoft.com/fwlink/?) LinkId = 153450) o [copia de seguridad en el modelo de recuperación completa](http://go.microsoft.com/fwlink/?LinkId=156509) (http://go.Microsoft.com/fwlink/?) LinkId = 156509).</span><span class="sxs-lookup"><span data-stu-id="882d8-192">**Note:**      For more information about using the SQL Server full recovery model when configuring the SQL Agent Backup BizTalk Server job, see [Log Shipping](http://go.microsoft.com/fwlink/?LinkId=153450) (http://go.microsoft.com/fwlink/?LinkId=153450) or [Backup Under the Full Recovery Model](http://go.microsoft.com/fwlink/?LinkId=156509) (http://go.microsoft.com/fwlink/?LinkId=156509).</span></span><br /><span data-ttu-id="882d8-193">-El **MessageBox_Message_ManageRefCountLog_BizTalkMsgBoxDb** trabajo del Agente SQL Server está diseñado para ejecutarse de forma indefinida.</span><span class="sxs-lookup"><span data-stu-id="882d8-193">-   The **MessageBox_Message_ManageRefCountLog_BizTalkMsgBoxDb** SQL Server Agent job is designed to run indefinitely.</span></span> <span data-ttu-id="882d8-194">Como resultado el historial de trabajos del Agente SQL no puede indicar que se haya completado correctamente este trabajo del Agente SQL; Este comportamiento es así por diseño.</span><span class="sxs-lookup"><span data-stu-id="882d8-194">As a result the SQL Agent job history may not indicate that this SQL Agent job has successfully completed; this behavior is by design.</span></span> <span data-ttu-id="882d8-195">Si se produce un error, el trabajo reiniciará en 1 minuto y debe seguir ejecutándose sin alteraciones.</span><span class="sxs-lookup"><span data-stu-id="882d8-195">If there is a failure, the job will restart within 1 minute and continue running unabated.</span></span> <span data-ttu-id="882d8-196">Por lo tanto, normalmente se pueden omitir las notificaciones de error para este trabajo.</span><span class="sxs-lookup"><span data-stu-id="882d8-196">Therefore, failure notifications for this job can typically be ignored.</span></span> <span data-ttu-id="882d8-197">Si el historial de trabajos para el trabajo de agente SQL Server de MessageBox_Message_ManageRefCountLog_BizTalkMsgBoxDb indica que este trabajo es un error y reiniciar constantemente investigación adicional en la causa del error o reinicio ciclo pueden requerir.</span><span class="sxs-lookup"><span data-stu-id="882d8-197">If the job history for the MessageBox_Message_ManageRefCountLog_BizTalkMsgBoxDb SQL Server Agent job indicates that this job is constantly failing and restarting then further investigation into the cause of the failure/restart cycle may be required.</span></span><br /><span data-ttu-id="882d8-198">-El **MessageBox_Message_Cleanup_BizTalkMsgBoxDb** trabajo del Agente SQL Server es el trabajo único que no debe estar manualmente habilitado porque se inicia el trabajo MessageBox_Message_ManageRefCountLog_BizTalkMsgBoxDb.</span><span class="sxs-lookup"><span data-stu-id="882d8-198">-   The **MessageBox_Message_Cleanup_BizTalkMsgBoxDb** SQL Server Agent job is the only job that should not be manually enabled because it is initiated by the MessageBox_Message_ManageRefCountLog_BizTalkMsgBoxDb job.</span></span><br /><span data-ttu-id="882d8-199">-El **DTA Purge and Archive** trabajo del Agente SQL Server mantiene la base de datos de seguimiento de BizTalk Server al purgar y archivar los mensajes controlados.</span><span class="sxs-lookup"><span data-stu-id="882d8-199">-   The **DTA Purge and Archive** SQL Server Agent job maintains the BizTalk Server tracking database by purging and archiving tracked messages.</span></span> <span data-ttu-id="882d8-200">Este trabajo lee todas las filas de la tabla y compara la marca de tiempo de cada fila para determinar si se debe quitar el registro.</span><span class="sxs-lookup"><span data-stu-id="882d8-200">This job reads every row in the table and compares the timestamp of each row to determine if the record should be removed.</span></span> <span data-ttu-id="882d8-201">**Nota:** al solucionar problemas de los trabajos del Agente SQL Server de BizTalk Server, compruebe que todos los trabajos del Agente SQL excepto el MessageBox_Message_ManageRefCountLog_BizTalkMsgBoxDb se completan sin errores.</span><span class="sxs-lookup"><span data-stu-id="882d8-201">**Note:**  When troubleshooting the BizTalk Server SQL Server Agent jobs, verify that all SQL Agent jobs except the MessageBox_Message_ManageRefCountLog_BizTalkMsgBoxDb are completing without errors.</span></span> <br /><br /> <span data-ttu-id="882d8-202">Para obtener más información acerca de los trabajos del agente de SQL de BizTalk Server se utiliza en SQL Server:</span><span class="sxs-lookup"><span data-stu-id="882d8-202">For more information about the BizTalk Server SQL Agent Jobs used in SQL Server:</span></span><br /><br /> <span data-ttu-id="882d8-203">: Vea [estructura y los trabajos de la base de datos](http://go.microsoft.com/fwlink/?LinkId=153451) (http://go.microsoft.com/fwlink/?LinkId=153451).</span><span class="sxs-lookup"><span data-stu-id="882d8-203">-   See [Database Structure and Jobs](http://go.microsoft.com/fwlink/?LinkId=153451) (http://go.microsoft.com/fwlink/?LinkId=153451).</span></span><br /><span data-ttu-id="882d8-204">: Vea [trabajos descripción del Agente SQL Server en BizTalk Server](http://go.microsoft.com/fwlink/?LinkId=153452) (http://go.microsoft.com/fwlink/?LinkId=153452).</span><span class="sxs-lookup"><span data-stu-id="882d8-204">-   See [Description of the SQL Server Agent jobs in BizTalk Server](http://go.microsoft.com/fwlink/?LinkId=153452) (http://go.microsoft.com/fwlink/?LinkId=153452).</span></span>|  
|<span data-ttu-id="882d8-205">Supervisar y finalizar instancias suspendidas</span><span class="sxs-lookup"><span data-stu-id="882d8-205">Monitor and terminate suspended instances</span></span>|<span data-ttu-id="882d8-206">Instancias de servicio pueden ser suspendidas (reanudables) o suspendidas (no reanudables).</span><span class="sxs-lookup"><span data-stu-id="882d8-206">Service instances can be suspended (resumable) or suspended (not resumable).</span></span> <span data-ttu-id="882d8-207">Estas instancias de servicio pueden ser mensajería, orquestación o puerto.</span><span class="sxs-lookup"><span data-stu-id="882d8-207">These service instances may be Messaging, Orchestration, or Port.</span></span> <span data-ttu-id="882d8-208">BizTalk Server contempla la terminación y la eliminación de estas instancias mediante la página concentrador de grupo en la consola de administración de BizTalk Server o mediante el uso de la secuencia de comandos Terminate.vbs.</span><span class="sxs-lookup"><span data-stu-id="882d8-208">BizTalk Server accommodates termination and removal of these instances by using the Group Hub page in the BizTalk Server Administration Console or through the use of the Terminate.vbs script.</span></span> <span data-ttu-id="882d8-209">Para obtener más información acerca de la secuencia de comandos Terminate.vbs, vea [quitar instancia del servicio suspendido](http://go.microsoft.com/fwlink/?LinkId=153453) (http://go.microsoft.com/fwlink/?LinkId=153453).</span><span class="sxs-lookup"><span data-stu-id="882d8-209">For more information about the Terminate.vbs script, see [Removing Suspended Service Instance](http://go.microsoft.com/fwlink/?LinkId=153453) (http://go.microsoft.com/fwlink/?LinkId=153453).</span></span> <span data-ttu-id="882d8-210">**Sugerencia:** también puede usar la herramienta de terminador para quitar las instancias suspendidas.</span><span class="sxs-lookup"><span data-stu-id="882d8-210">**Tip:**  You can also use the Terminator tool to remove suspended instances.</span></span> <span data-ttu-id="882d8-211">El [herramienta terminador](http://go.microsoft.com/fwlink/?LinkId=151931) está disponible en [http://go.microsoft.com/fwlink/?LinkId=151931](http://go.microsoft.com/fwlink/?LinkId=151931).</span><span class="sxs-lookup"><span data-stu-id="882d8-211">The [Terminator tool](http://go.microsoft.com/fwlink/?LinkId=151931) is available at [http://go.microsoft.com/fwlink/?LinkId=151931](http://go.microsoft.com/fwlink/?LinkId=151931).</span></span> <span data-ttu-id="882d8-212">Uso de esta herramienta no es compatible con Microsoft y Microsoft no otorga ninguna garantía sobre la idoneidad de este programa.</span><span class="sxs-lookup"><span data-stu-id="882d8-212">Use of this tool is not supported by Microsoft, and Microsoft makes no guarantees about the suitability of this programs.</span></span> <span data-ttu-id="882d8-213">La utilización de este programa queda bajo su propia responsabilidad.</span><span class="sxs-lookup"><span data-stu-id="882d8-213">Use of this program is entirely at your own risk.</span></span> <br /><br /> <span data-ttu-id="882d8-214">Los términos "huérfanas" y "zombies" se suelen usar indistintamente.</span><span class="sxs-lookup"><span data-stu-id="882d8-214">The terms "orphans” and "zombies" are often used interchangeably.</span></span> <span data-ttu-id="882d8-215">Un mensaje huérfano o zombie es un mensaje que no tiene una instancia de los servicios asociados, normalmente porque la instancia del servicio ha terminado antes de que se recibió el mensaje.</span><span class="sxs-lookup"><span data-stu-id="882d8-215">An orphaned or zombie message is a message that does not have an associated service instance, typically because the service instance has terminated before the message was received.</span></span> <span data-ttu-id="882d8-216">Un servicio huérfano o zombie es un servicio que no tiene ningún mensaje asociado.</span><span class="sxs-lookup"><span data-stu-id="882d8-216">An orphaned or zombie service is a service that does not have any associated messages.</span></span> <span data-ttu-id="882d8-217">Para obtener más información sobre los mensajes de zombie y servicio instancias en BizTalk Server, vea [Zombies en BizTalk Server](http://go.microsoft.com/fwlink/?LinkId=153454) (http://go.microsoft.com/fwlink/?LinkId=153454).</span><span class="sxs-lookup"><span data-stu-id="882d8-217">For more information about zombie messages and service instances in BizTalk Server see [Zombies in BizTalk Server](http://go.microsoft.com/fwlink/?LinkId=153454) (http://go.microsoft.com/fwlink/?LinkId=153454).</span></span>|  
|<span data-ttu-id="882d8-218">Supervisar los contadores de rendimiento de la **PhysicalDisk** objeto de rendimiento</span><span class="sxs-lookup"><span data-stu-id="882d8-218">Monitor the performance counters of the **PhysicalDisk** performance object</span></span>|<span data-ttu-id="882d8-219">BizTalk Server realiza un gran número de transacciones cortas, muy rápidas a SQL Server en un minuto.</span><span class="sxs-lookup"><span data-stu-id="882d8-219">BizTalk Server makes a large number of short, very quick transactions to SQL Server within one minute.</span></span> <span data-ttu-id="882d8-220">Si el servidor SQL Server no puede admitir esta actividad, puede experimentar problemas de rendimiento de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="882d8-220">If the SQL Server cannot sustain this activity, you may experience BizTalk Server performance issues.</span></span> <span data-ttu-id="882d8-221">Monitor de la **AVG. Segundos de disco/lectura**, **AVG. Segundos/transferencia**, y **AVG. Segundos/escritura** contadores de monitor de rendimiento en el **PhysicalDisk** objeto de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="882d8-221">Monitor the **Avg. Disk sec/Read**, **Avg. Disk sec/Transfer**, and **Avg. Disk sec/Write** performance monitor counters in the **PhysicalDisk** performance object.</span></span> <span data-ttu-id="882d8-222">El valor óptimo es inferior a 10 ms (milisegundos).</span><span class="sxs-lookup"><span data-stu-id="882d8-222">The optimal value is less than 10 ms (milliseconds).</span></span> <span data-ttu-id="882d8-223">Un valor de 20 ms o superior se considera un rendimiento bajo.</span><span class="sxs-lookup"><span data-stu-id="882d8-223">A value of 20 ms or larger is considered poor performance.</span></span><br /><br /><span data-ttu-id="882d8-224">-Para obtener más información sobre la alta disponibilidad de base de datos de BizTalk Server, vea [proporcionar una alta disponibilidad para bases de datos de BizTalk Server](../core/providing-high-availability-for-biztalk-server-databases.md).</span><span class="sxs-lookup"><span data-stu-id="882d8-224">-   For more information about BizTalk Server database high availability, see [Providing High Availability for BizTalk Server Databases](../core/providing-high-availability-for-biztalk-server-databases.md).</span></span>|  
|<span data-ttu-id="882d8-225">Siga las prácticas recomendadas para bases de datos de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="882d8-225">Follow best practices for BizTalk Server databases.</span></span>|<span data-ttu-id="882d8-226">Vea [prácticas recomendadas para el mantenimiento de bases de datos de BizTalk Server](~/technical-guides/best-practices-for-maintaining-biztalk-server-databases.md).</span><span class="sxs-lookup"><span data-stu-id="882d8-226">See [Best Practices for Maintaining BizTalk Server Databases](~/technical-guides/best-practices-for-maintaining-biztalk-server-databases.md).</span></span>|  
  
<a name="BKMK_Troubleshoot"></a>   
## <a name="troubleshooting-biztalk-server-databases"></a><span data-ttu-id="882d8-227">Solución de problemas de las bases de datos de servidor BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="882d8-227">Troubleshooting BizTalk Server Databases</span></span>  
 <span data-ttu-id="882d8-228">Realizar las siguientes tareas para solucionar los problemas con las bases de datos de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="882d8-228">Perform the following tasks to troubleshoot any issues with BizTalk Server databases.</span></span>  
  
|<span data-ttu-id="882d8-229">Pasos</span><span class="sxs-lookup"><span data-stu-id="882d8-229">Steps</span></span>|<span data-ttu-id="882d8-230">Referencia</span><span class="sxs-lookup"><span data-stu-id="882d8-230">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="882d8-231">Asegúrese de que todas las necesarias trabajos del Agente SQL Server de BizTalk están habilitados y en ejecución</span><span class="sxs-lookup"><span data-stu-id="882d8-231">Ensure all required BizTalk SQL Server Agent jobs are enabled and running</span></span>|<span data-ttu-id="882d8-232">Todos los BizTalk Agente SQL Server trabajos excepto la **MessageBox_Message_ManageRefCountLog_BizTalkMsgBoxDb** trabajo debe estar habilitado y ejecutándose correctamente.</span><span class="sxs-lookup"><span data-stu-id="882d8-232">All the BizTalk SQL Server Agent jobs except the **MessageBox_Message_ManageRefCountLog_BizTalkMsgBoxDb** job should be enabled and running successfully.</span></span> <span data-ttu-id="882d8-233">No deshabilite cualquier otro trabajo.</span><span class="sxs-lookup"><span data-stu-id="882d8-233">Do not disable any other job.</span></span><br /><br /> <span data-ttu-id="882d8-234">Si se produce un error, use la **Ver historial** opción en SQL Server para ver la información de error y, a continuación, solucionar el problema en consecuencia.</span><span class="sxs-lookup"><span data-stu-id="882d8-234">If a failure occurs, use the **View History** option in SQL Server to view the error information, and then troubleshoot the failure accordingly.</span></span> <span data-ttu-id="882d8-235">Recuerde que el **_Message_ManageRefCountLog_BizTalkMsgBoxDb MessageBox** trabajo del Agente SQL Server se ejecutará infinitamente.</span><span class="sxs-lookup"><span data-stu-id="882d8-235">Remember that the **MessageBox _Message_ManageRefCountLog_BizTalkMsgBoxDb** SQL Server Agent job runs infinitely.</span></span> <span data-ttu-id="882d8-236">Por lo tanto, solo deben preocuparle si el historial de trabajos informa de que el trabajo constantemente se produce un error y se reinicia.</span><span class="sxs-lookup"><span data-stu-id="882d8-236">Therefore, you should only be concerned if the job history reports that the job constantly fails and restarts.</span></span>|  
|<span data-ttu-id="882d8-237">Utilice la herramienta MsgBoxViewer para analizar el BizTalk MessageBox y otras bases de datos</span><span class="sxs-lookup"><span data-stu-id="882d8-237">Use the MsgBoxViewer tool to analyze the BizTalk MessageBox and other databases</span></span>|<span data-ttu-id="882d8-238">**Importante:** no se admite el uso de esta herramienta por Microsoft y Microsoft no otorga ninguna garantía sobre la idoneidad de este programa.</span><span class="sxs-lookup"><span data-stu-id="882d8-238">**Important:**  Use of this tool is not supported by Microsoft, and Microsoft makes no guarantees about the suitability of this programs.</span></span> <span data-ttu-id="882d8-239">La utilización de este programa queda bajo su propia responsabilidad.</span><span class="sxs-lookup"><span data-stu-id="882d8-239">Use of this program is entirely at your own risk.</span></span> <br /><br /> <span data-ttu-id="882d8-240">Está disponible en la herramienta de MsgBoxViewer [http://go.microsoft.com/fwlink/?LinkId=151930](http://go.microsoft.com/fwlink/?LinkId=151930) (http://go.microsoft.com/fwlink/?LinkId=151930).</span><span class="sxs-lookup"><span data-stu-id="882d8-240">The MsgBoxViewer tool is available from [http://go.microsoft.com/fwlink/?LinkId=151930](http://go.microsoft.com/fwlink/?LinkId=151930) (http://go.microsoft.com/fwlink/?LinkId=151930).</span></span> <span data-ttu-id="882d8-241">La herramienta MsgBoxViewer es útil para solucionar problemas porque proporciona un informe HTML que contiene información detallada sobre el tamaño de la tabla y el recuento de filas.</span><span class="sxs-lookup"><span data-stu-id="882d8-241">The MsgBoxViewer tool is useful for troubleshooting because it provides an HTML report that has detailed information about table sizes and the row count.</span></span> <span data-ttu-id="882d8-242">El informe también puede ayudar a determinar si se está limitando el servidor BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="882d8-242">The report can also help determine whether BizTalk Server is throttling.</span></span> <span data-ttu-id="882d8-243">Además, la herramienta proporciona una instantánea de las bases de datos de BizTalk Server y la configuración de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="882d8-243">Additionally, the tool provides a snapshot of the BizTalk Server databases and the BizTalk Server configuration.</span></span><br /><br /> <span data-ttu-id="882d8-244">Cuando BizTalk Server se está ejecutando más lentamente de lo habitual, ejecute la herramienta MsgBoxViewer, haga clic para seleccionar todas las consultas en el **consultas opcional** ficha y, a continuación, revise el informe HTML generado para cualquier problema.</span><span class="sxs-lookup"><span data-stu-id="882d8-244">When BizTalk Server is running slower than usual, run the MsgBoxViewer tool, click to select all queries on the **Optional Queries** tab, and then review the generated HTML report for any problems.</span></span> <span data-ttu-id="882d8-245">El **informe resumen** sección enumeran las advertencias en amarillos y posibles problemas en rojo.</span><span class="sxs-lookup"><span data-stu-id="882d8-245">The **Summary Report** section lists warnings in yellow and potential problems in red.</span></span><br /><br /> <span data-ttu-id="882d8-246">Además, puede usar la herramienta MsgBoxViewer para determinar qué tablas son los más grandes y tienen la mayoría de los registros.</span><span class="sxs-lookup"><span data-stu-id="882d8-246">Additionally, you can use the MsgBoxViewer tool to determine which tables are the largest and have the most records.</span></span> <span data-ttu-id="882d8-247">Para obtener una lista de tablas que suelen alcanzar el larges y para obtener instrucciones sobre cómo administrar las tablas, consulte [crezca de grandes tablas de base de datos de BizTalk Server](~/technical-guides/large-growing-biztalk-server-database-tables.md).</span><span class="sxs-lookup"><span data-stu-id="882d8-247">For a list of tables that typically grow the larges and for instructions on how to manage those tables, see [Large-growing BizTalk Server Database Tables](~/technical-guides/large-growing-biztalk-server-database-tables.md).</span></span>|  
|<span data-ttu-id="882d8-248">Usar la herramienta de terminador para resolver los problemas, si existe, identificado por la herramienta MsgBoxViewer</span><span class="sxs-lookup"><span data-stu-id="882d8-248">Use the Terminator tool to resolve issues, if any, identified by the MsgBoxViewer tool</span></span>|<span data-ttu-id="882d8-249">**Importante:** no se admite el uso de esta herramienta por Microsoft y Microsoft no otorga ninguna garantía sobre la idoneidad de este programa.</span><span class="sxs-lookup"><span data-stu-id="882d8-249">**Important:**  Use of this tool is not supported by Microsoft, and Microsoft makes no guarantees about the suitability of this programs.</span></span> <span data-ttu-id="882d8-250">La utilización de este programa queda bajo su propia responsabilidad.</span><span class="sxs-lookup"><span data-stu-id="882d8-250">Use of this program is entirely at your own risk.</span></span> <br /><br /> <span data-ttu-id="882d8-251">Ejecutar la herramienta de terminador disponible en [terminador](http://go.microsoft.com/fwlink/?LinkId=151931) (http://go.microsoft.com/fwlink/?LinkId=151931).</span><span class="sxs-lookup"><span data-stu-id="882d8-251">Run the Terminator tool available at [Terminator](http://go.microsoft.com/fwlink/?LinkId=151931) (http://go.microsoft.com/fwlink/?LinkId=151931).</span></span> <span data-ttu-id="882d8-252">Esta herramienta permite a los usuarios a resolver fácilmente los problemas identificados por la herramienta de BizTalk MsgBoxViewer.</span><span class="sxs-lookup"><span data-stu-id="882d8-252">This tool enables users to easily resolve any issues identified by the BizTalk MsgBoxViewer tool.</span></span> <span data-ttu-id="882d8-253">Para obtener más información sobre cómo la herramienta de terminador se integra con la herramienta de BizTalk MsgBoxViewer, consulte [utilizando el terminador de BizTalk para resolver los problemas identificados por BizTalk MsgBoxViewer](http://go.microsoft.com/fwlink/?LinkId=151932) (http://go.microsoft.com/fwlink/?LinkId=151932).</span><span class="sxs-lookup"><span data-stu-id="882d8-253">For more information on how the Terminator tool integrates with the BizTalk MsgBoxViewer tool, see [Using BizTalk Terminator to resolve issues identified by BizTalk MsgBoxViewer](http://go.microsoft.com/fwlink/?LinkId=151932) (http://go.microsoft.com/fwlink/?LinkId=151932).</span></span>|  
|<span data-ttu-id="882d8-254">Investigar los escenarios de interbloqueo</span><span class="sxs-lookup"><span data-stu-id="882d8-254">Investigate deadlock scenarios</span></span>|<span data-ttu-id="882d8-255">En una situación de interbloqueo, habilitar el seguimiento de DBCC en SQL Server para que la información de interbloqueo se escribe en el registro SQLERROR.</span><span class="sxs-lookup"><span data-stu-id="882d8-255">In a deadlock scenario, enable DBCC tracing on the SQL Server so that the deadlock information is written to the SQLERROR log.</span></span><br /><br /> <span data-ttu-id="882d8-256">En SQL Server, ejecute la instrucción siguiente para habilitar el seguimiento de DBCC para escenarios de interbloqueo:</span><span class="sxs-lookup"><span data-stu-id="882d8-256">In SQL Server, execute the following statement to enable DBCC tracing for deadlock scenarios:</span></span><br /><br /> <span data-ttu-id="882d8-257">DBCC TRACEON (1222, -1)</span><span class="sxs-lookup"><span data-stu-id="882d8-257">DBCC TRACEON (1222,-1)</span></span><br /><br /> <span data-ttu-id="882d8-258">También puede usar la utilidad PSSDIAG para recopilar datos en el **Lock: Deadlock** eventos y la **Lock: Deadlock Chain** eventos.</span><span class="sxs-lookup"><span data-stu-id="882d8-258">You can also use the PSSDIAG utility to collect data on the **Lock:Deadlock** event and the **Lock:Deadlock Chain** event.</span></span> <span data-ttu-id="882d8-259">Para obtener más información acerca de la utilidad PSSDIAG, consulte [herramienta de recopilación de datos PSSDIAG](http://go.microsoft.com/fwlink/?LinkId=153627) (http://go.microsoft.com/fwlink/?LinkId=153627).</span><span class="sxs-lookup"><span data-stu-id="882d8-259">For more information about the PSSDIAG utility, see [PSSDIAG data collection utility](http://go.microsoft.com/fwlink/?LinkId=153627) (http://go.microsoft.com/fwlink/?LinkId=153627).</span></span><br /><br /> <span data-ttu-id="882d8-260">La base de datos BizTalkMsgBoxDB es una base de datos de procesamiento de transacciones en línea (OLTP) de gran volumen y altos niveles de transacciones.</span><span class="sxs-lookup"><span data-stu-id="882d8-260">The BizTalkMsgBoxDB database is a high-volume and high-transaction Online Transaction Processing (OLTP) database.</span></span> <span data-ttu-id="882d8-261">Con esas bases de datos, se espera que algunos interbloqueos y este interbloqueo se controla internamente por el motor de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="882d8-261">With such databases, some deadlocking is expected and this deadlocking is handled internally by the BizTalk Server engine.</span></span> <span data-ttu-id="882d8-262">Cuando se produce este comportamiento, errores no se muestran en los registros de errores.</span><span class="sxs-lookup"><span data-stu-id="882d8-262">When this behavior occurs, no errors are listed in the error logs.</span></span> <span data-ttu-id="882d8-263">Cuando se investiga un escenario de interbloqueo, el interbloqueo que está investigando en la salida debe poner en correlación con un error de interbloqueo en los registros de eventos.</span><span class="sxs-lookup"><span data-stu-id="882d8-263">When you investigate a deadlock scenario, the deadlock that you are investigating in the output must be correlated with a deadlock error in the event logs.</span></span>|  
|<span data-ttu-id="882d8-264">Buscar procesos bloqueados</span><span class="sxs-lookup"><span data-stu-id="882d8-264">Look for blocked processes</span></span>|<span data-ttu-id="882d8-265">Puede usar a Monitor de actividad en SQL Server para obtener el identificador de proceso de servidor (SPID) de un proceso de sistema de bloqueo.</span><span class="sxs-lookup"><span data-stu-id="882d8-265">You can use Activity Monitor in SQL Server to obtain the server process identifier (SPID) of a locking system process.</span></span> <span data-ttu-id="882d8-266">A continuación, puede ejecutar el analizador de SQL para determinar la instrucción SQL que se está ejecutando en el SPID de bloqueo.</span><span class="sxs-lookup"><span data-stu-id="882d8-266">You can then run the SQL Profiler to determine the SQL statement that is executing in the locking SPID.</span></span> <span data-ttu-id="882d8-267">Puede usar la utilidad PSSDIAG para solucionar problemas de bloqueo en SQL Server.</span><span class="sxs-lookup"><span data-stu-id="882d8-267">You can use the PSSDIAG utility to troubleshoot locking and blocking issues in SQL Server.</span></span> <span data-ttu-id="882d8-268">La utilidad de captura todos los eventos de Transact-SQL que tienen un bloqueo script habilitado.</span><span class="sxs-lookup"><span data-stu-id="882d8-268">The utility captures all the Transact-SQL events that have the blocking script enabled.</span></span> <span data-ttu-id="882d8-269">Para obtener más información acerca de la utilidad PSSDIAG, consulte [herramienta de recopilación de datos PSSDIAG](http://go.microsoft.com/fwlink/?LinkId=153627) (http://go.microsoft.com/fwlink/?LinkId=153627).</span><span class="sxs-lookup"><span data-stu-id="882d8-269">For more information about the PSSDIAG utility, see [PSSDIAG data collection utility](http://go.microsoft.com/fwlink/?LinkId=153627) (http://go.microsoft.com/fwlink/?LinkId=153627).</span></span><br /><br /> <span data-ttu-id="882d8-270">En SQL Server, puede especificar el **bloqueado umbral de procesos** configuración para determinar qué SPID o SPID están bloqueando ya que el umbral especificado.</span><span class="sxs-lookup"><span data-stu-id="882d8-270">In SQL Server, you can specify the **blocked process threshold** setting to determine which SPID or SPIDs are blocking longer than the threshold that you specify.</span></span> <span data-ttu-id="882d8-271">Para obtener más información acerca de la opción de umbral de procesos bloqueados, consulte [bloquea la opción de umbral de proceso](http://go.microsoft.com/fwlink/?LinkId=153628) (http://go.microsoft.com/fwlink/?LinkId=153628).</span><span class="sxs-lookup"><span data-stu-id="882d8-271">For more information about the blocked process threshold option, see [blocked process threshold Option](http://go.microsoft.com/fwlink/?LinkId=153628) (http://go.microsoft.com/fwlink/?LinkId=153628).</span></span> <span data-ttu-id="882d8-272">**Nota:** cuando experimenta un problema de bloqueo o de bloqueo en SQL Server, se recomienda que póngase en contacto con los servicios de soporte técnico de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="882d8-272">**Note:**  When you experience a locking or blocking issue in SQL Server, we recommend that you contact Microsoft Customer Support Services.</span></span> <span data-ttu-id="882d8-273">Servicios de soporte técnico de Microsoft puede ayudarle a configurar las opciones de la utilidad PSSDiag correctas.</span><span class="sxs-lookup"><span data-stu-id="882d8-273">Microsoft Customer Support Services can help you configure the correct PSSDiag utility options.</span></span>|  
|<span data-ttu-id="882d8-274">Eliminar todos los datos no deseados</span><span class="sxs-lookup"><span data-stu-id="882d8-274">Delete all unwanted data</span></span>|<span data-ttu-id="882d8-275">Si las bases de datos han aumentado y es demasiado grande y los datos contenidos en las bases de datos no será necesarios ya, es el método preferido eliminar los datos.</span><span class="sxs-lookup"><span data-stu-id="882d8-275">If the databases have grown to become too large and if the data contained in the databases will not be required any longer, the preferred method is to delete the data.</span></span> <span data-ttu-id="882d8-276">**Precaución:** no utilice este método en cualquier entorno donde los datos son cruciales para la empresa o si se necesitan los datos.</span><span class="sxs-lookup"><span data-stu-id="882d8-276">**Caution:**  Do not use this method in any environment where the data is business critical or if the data is needed.</span></span> <br /><br /> <span data-ttu-id="882d8-277">**Para purgar la base de datos BizTalkMsgBox**</span><span class="sxs-lookup"><span data-stu-id="882d8-277">**To purge the BizTalkMsgBox database**</span></span><br /> <span data-ttu-id="882d8-278">1.  Descargue e instale la herramienta de terminador en [terminador de Biztalk](http://go.microsoft.com/fwlink/?LinkId=220869) (http://go.microsoft.com/fwlink/?LinkId=220869).</span><span class="sxs-lookup"><span data-stu-id="882d8-278">1.  Download and install the Terminator tool at [Biztalk Terminator](http://go.microsoft.com/fwlink/?LinkId=220869) (http://go.microsoft.com/fwlink/?LinkId=220869).</span></span><br /><span data-ttu-id="882d8-279">2.  Siga los pasos descritos en el tema [cómo purgar datos manualmente desde la base de datos de cuadro de mensajes en un entorno de prueba](http://go.microsoft.com/fwlink/?LinkID=158064) (http://go.microsoft.com/fwlink/?LinkID=158064) para crear el bts_CleanupMsgbox el procedimiento almacenado en la base de datos de BizTalk MessageBox.</span><span class="sxs-lookup"><span data-stu-id="882d8-279">2.  Follow the steps in the topic [How to Manually Purge Data from the MessageBox Database in a Test Environment](http://go.microsoft.com/fwlink/?LinkID=158064) (http://go.microsoft.com/fwlink/?LinkID=158064) to create the bts_CleanupMsgbox stored procedure in the BizTalk MessageBox database.</span></span><br /><span data-ttu-id="882d8-280">3.  Utilice la herramienta de terminador para ejecutar el procedimiento almacenado bts_CleanupMsgbox y purgar la base de datos de BizTalk MessageBox.</span><span class="sxs-lookup"><span data-stu-id="882d8-280">3.  Use the Terminator tool to execute the bts_CleanupMsgbox stored procedure and purge the BizTalk MessageBox database.</span></span> <span data-ttu-id="882d8-281">**Advertencia:** no ejecute el procedimiento almacenado bts_CleanupMsgbox en un servidor de producción que ejecuta BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="882d8-281">**Warning:**      Do not run the bts_CleanupMsgbox stored procedure on a production server that is running BizTalk Server.</span></span> <span data-ttu-id="882d8-282">solo debe ejecutar el procedimiento almacenado bts_CleanupMsgbox en un entorno de prueba.</span><span class="sxs-lookup"><span data-stu-id="882d8-282">You should only run the bts_CleanupMsgbox stored procedure in a test environment.</span></span> <span data-ttu-id="882d8-283">No se admite la ejecución del procedimiento almacenado bts_CleanupMsgbox en un entorno de producción.</span><span class="sxs-lookup"><span data-stu-id="882d8-283">Running the bts_CleanupMsgbox stored procedure in a production environment is not supported.</span></span><br /><span data-ttu-id="882d8-284">4.  Reinicie todos los hosts y los servicios de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="882d8-284">4.  Restart all hosts and BizTalk Server services.</span></span><br /><br /> <span data-ttu-id="882d8-285">**Para purgar la base de datos de BizTalkDTADb**</span><span class="sxs-lookup"><span data-stu-id="882d8-285">**To purge the BizTalkDTADb database**</span></span><br /> <ul><li><span data-ttu-id="882d8-286">**Método 1**</span><span class="sxs-lookup"><span data-stu-id="882d8-286">**Method 1**</span></span><br /><br /> <ol><li><span data-ttu-id="882d8-287">Realizar una copia de todas las bases de datos de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="882d8-287">Back up all BizTalk Server databases.</span></span></li><li><span data-ttu-id="882d8-288">Ejecute el **dtasp_PurgeAllCompletedTrackingData** procedimiento almacenado.</span><span class="sxs-lookup"><span data-stu-id="882d8-288">Execute the **dtasp_PurgeAllCompletedTrackingData** stored procedure.</span></span> <span data-ttu-id="882d8-289">Para obtener más información acerca del procedimiento almacenado, vea [cómo purgar datos manualmente desde la base de datos de seguimiento de BizTalk](http://go.microsoft.com/fwlink/?LinkId=153635) (http://go.microsoft.com/fwlink/?LinkId=153635).</span><span class="sxs-lookup"><span data-stu-id="882d8-289">For more information about the stored procedure, see [How to Manually Purge Data from the BizTalk Tracking Database](http://go.microsoft.com/fwlink/?LinkId=153635) (http://go.microsoft.com/fwlink/?LinkId=153635).</span></span></li></ol></li><li><span data-ttu-id="882d8-290">**Método 2**.</span><span class="sxs-lookup"><span data-stu-id="882d8-290">**Method 2**.</span></span> <span data-ttu-id="882d8-291">Utilice esta opción únicamente si la base de datos de BizTalkDTADb contiene muchas instancias incompletas que se deben quitar.</span><span class="sxs-lookup"><span data-stu-id="882d8-291">Use this option only if the BizTalkDTADb database contains many incomplete instances that must be removed.</span></span><br /><br /> <ol><li><span data-ttu-id="882d8-292">Realizar una copia de todas las bases de datos de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="882d8-292">Back up all BizTalk Server databases.</span></span></li><li><span data-ttu-id="882d8-293">Detenga todos los hosts de BizTalk, servicios y adaptadores aislados personalizados.</span><span class="sxs-lookup"><span data-stu-id="882d8-293">Stop all BizTalk hosts, services, and custom isolated adapters.</span></span> <span data-ttu-id="882d8-294">Si usa el adaptador SOAP o HTTP, reinicie los servicios IIS.</span><span class="sxs-lookup"><span data-stu-id="882d8-294">If you use HTTP or the SOAP adapter, restart the IIS services.</span></span></li><li><span data-ttu-id="882d8-295">Ejecute el **dtasp_CleanHMData** procedimiento almacenado en la base de datos de BizTalkDTADb.</span><span class="sxs-lookup"><span data-stu-id="882d8-295">Execute the **dtasp_CleanHMData** stored procedure on the BizTalkDTADb database.</span></span></li><li><span data-ttu-id="882d8-296">Reinicie todos los hosts y los servicios de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="882d8-296">Restart all hosts and BizTalk Server services.</span></span></li></ol></li></ul> <span data-ttu-id="882d8-297">**Nota:** si es necesario disponer los datos de seguimiento, realizar copias de seguridad la base de datos BizTalkDTADb, restaurar la base de datos a otro servidor SQL Server y, a continuación, purgar la base de datos de BizTalkDTADb original.</span><span class="sxs-lookup"><span data-stu-id="882d8-297">**Note:**  If you must have the tracking data, back up the BizTalkDTADb database, restore the database to another SQL Server, and then purge the original BizTalkDTADb database.</span></span>|  
  
 <span data-ttu-id="882d8-298">Si necesita ayuda para analizar los datos de MsgBoxViewer o la salida PSSDIAG, póngase en contacto con los servicios de soporte técnico de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="882d8-298">If you want help analyzing the MsgBoxViewer data or PSSDIAG output, contact Microsoft Customer Support Services.</span></span> <span data-ttu-id="882d8-299">Antes de ponerse en contacto con los servicios de soporte técnico al cliente, comprimir los datos de MsgBoxViewer, la salida PSSDIAG y los registros de eventos actualizados (archivos evt).</span><span class="sxs-lookup"><span data-stu-id="882d8-299">Before you contact Customer Support Services, compress the MsgBoxViewer data, the PSSDIAG output, and the updated event logs (.evt files).</span></span> <span data-ttu-id="882d8-300">Es podrán que deba enviar que ingeniero de soporte de estos archivos a un servidor BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="882d8-300">You may have to send these files to a BizTalk Server support engineer.</span></span>
  
## <a name="next"></a><span data-ttu-id="882d8-301">Siguiente</span><span class="sxs-lookup"><span data-stu-id="882d8-301">Next</span></span>
  
-   [<span data-ttu-id="882d8-302">Procedimientos recomendados para el mantenimiento de bases de datos de BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="882d8-302">Best Practices for Maintaining BizTalk Server Databases</span></span>](~/technical-guides/best-practices-for-maintaining-biztalk-server-databases.md)  
  
-   [<span data-ttu-id="882d8-303">Tablas de base de datos de BizTalk Server de gran crecimiento</span><span class="sxs-lookup"><span data-stu-id="882d8-303">Large-growing BizTalk Server Database Tables</span></span>](~/technical-guides/large-growing-biztalk-server-database-tables.md)  
  
-   [<span data-ttu-id="882d8-304">Herramientas y utilidades para solucionar problemas</span><span class="sxs-lookup"><span data-stu-id="882d8-304">Tools and Utilities for Troubleshooting</span></span>](../technical-guides/tools-and-utilities-for-troubleshooting.md)  
  
## <a name="see-also"></a><span data-ttu-id="882d8-305">Vea también</span><span class="sxs-lookup"><span data-stu-id="882d8-305">See Also</span></span>  
 [<span data-ttu-id="882d8-306">Configuración de SQL Server que no se debe cambiar</span><span class="sxs-lookup"><span data-stu-id="882d8-306">SQL Server Settings That Should Not Be Changed</span></span>](~/technical-guides/sql-server-settings-that-should-not-be-changed.md)
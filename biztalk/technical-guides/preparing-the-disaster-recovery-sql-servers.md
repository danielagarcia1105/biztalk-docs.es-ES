---
title: "Preparar los servidores SQL de recuperación ante desastres | Documentos de Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 44b77fe8-393d-4781-b0b0-5b7f6e50a67b
caps.latest.revision: "2"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 01e6021b7114b8b57c62dadfe742be1809df0bd8
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
---
# <a name="preparing-the-disaster-recovery-sql-servers"></a><span data-ttu-id="ecba0-102">Preparar los servidores SQL de recuperación ante desastres</span><span class="sxs-lookup"><span data-stu-id="ecba0-102">Preparing the Disaster Recovery SQL Servers</span></span>
<span data-ttu-id="ecba0-103">Crea el conjunto de [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instancias en el sitio de recuperación ante desastres de bases de datos.</span><span class="sxs-lookup"><span data-stu-id="ecba0-103">Createa set of [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database instances in the disaster recovery site.</span></span> <span data-ttu-id="ecba0-104">Para asegurarse de que la recuperación ante desastres [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instancias de base de datos pueden proporcionar el mismo nivel de rendimiento a medida que la producción [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instancias de base de datos, la recuperación ante desastres [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instancias de base de datos deben configurarse con similares hardware y el número de equipos físicos que ejecutan [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ecba0-104">To ensure that the disaster recovery [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database instances can provide the same level of performance as the production [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database instances, the disaster recovery [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database instances should be configured with similar hardware and number of physical computers running [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)].</span></span> <span data-ttu-id="ecba0-105">En este escenario, [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] trasvase de registros se configurará para cada producción [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instancia de base de datos para aplicar a su correspondiente [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instancia de base de datos en el sitio de recuperación ante desastres.</span><span class="sxs-lookup"><span data-stu-id="ecba0-105">In this scenario, [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] log shipping will be configured for each production [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database instance to apply to a corresponding [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database instance at the disaster recovery site.</span></span>  
  
 <span data-ttu-id="ecba0-106">Una clave [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] requisito de trasvase de registros es que las letras de unidad especificadas en el sitio de producción donde se almacenan los archivos de base de datos coinciden con las letras de unidad especificadas en el sitio de recuperación ante desastres donde se restauran los archivos de base de datos.</span><span class="sxs-lookup"><span data-stu-id="ecba0-106">A key [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] log shipping requirement is that the drive letter(s) on the production site where the database files are stored match the drive letter(s) at the disaster recovery site where the database files are restored.</span></span> <span data-ttu-id="ecba0-107">Por tanto, si la [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] grupo de archivos de base de datos se encuentra en G:\data en producción, debe haber un directorio G:\data en el servidor de destino (DR) o se producirá un error en la restauración.</span><span class="sxs-lookup"><span data-stu-id="ecba0-107">So if the [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database file group is located on G:\data in production, there must be a G:\data directory on the destination (DR) server, or the restore will fail.</span></span>  
  
 [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]<span data-ttu-id="ecba0-108">trasvase de registros no es compatible con la **RESTORE WITH MOVE** [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] comando.</span><span class="sxs-lookup"><span data-stu-id="ecba0-108"> log shipping does not support the **RESTORE WITH MOVE** [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] command.</span></span> <span data-ttu-id="ecba0-109">Por este motivo, se recomienda que los nombres de instancia de base de datos en el sitio de recuperación ante desastres coinciden con los nombres de instancia de base de datos de producción (de forma predeterminada, el nombre de instancia es parte de la ruta de acceso de archivo).</span><span class="sxs-lookup"><span data-stu-id="ecba0-109">Because of this, we recommend that database instance names at the disaster recovery site match the database instance names in production (by default, the instance name is part of the file path).</span></span> <span data-ttu-id="ecba0-110">Otra opción consiste en crear simplemente un directorio en la letra de unidad correspondiente en el equipo de recuperación ante desastres con [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] para que la **restaurar** operación puede crear el archivo en la misma estructura de directorios, tal como se utiliza en producción.</span><span class="sxs-lookup"><span data-stu-id="ecba0-110">Another option is to simply create a directory on the corresponding drive letter in the disaster recovery computer running [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] so that the **RESTORE** operation can create the file in the same directory structure as is used in production.</span></span>  
  
 <span data-ttu-id="ecba0-111">Crear [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] seguridad los inicios de sesión para el sitio de recuperación ante desastres que se corresponden con el sitio de producción para que en caso de que una conmutación por error en el sitio de recuperación ante desastres es necesario, todos los inicios de sesión de seguridad de necesarios están presentes en el sistema de destino.</span><span class="sxs-lookup"><span data-stu-id="ecba0-111">Create [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] security logins for the disaster recovery site that correspond to the production site so that in the event that a failover to the disaster recovery site is required, all required security logins are present on the destination system.</span></span>  
  
 <span data-ttu-id="ecba0-112">Una vez la instalación de la recuperación ante desastres [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instancias se ha completado, lleve a cabo una copia de seguridad completa de las bases de datos master y msdb para que un sistema limpio puede restaurarse en caso de que se produce un error en un cambio en el sitio de recuperación ante desastres.</span><span class="sxs-lookup"><span data-stu-id="ecba0-112">Once installation of the disaster recovery [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instances is completed, perform a full backup of master and msdb databases so that a clean system can be restored in the event that a switch to the disaster recovery site fails.</span></span>
---
title: Alta disponibilidad para el servidor secreto principal | Documentos de Microsoft
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 9b99cb04-61a5-41cc-a409-35897c17b789
caps.latest.revision: "4"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: f366eb2827859f8d720c74e670808aebfb0665b2
ms.sourcegitcommit: 3fc338e52d5dbca2c3ea1685a2faafc7582fe23a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 12/01/2017
---
# <a name="high-availability-for-the-master-secret-server"></a><span data-ttu-id="3491d-102">Alta disponibilidad para el servidor secreto principal</span><span class="sxs-lookup"><span data-stu-id="3491d-102">High Availability for the Master Secret Server</span></span>
<span data-ttu-id="3491d-103">Incluso si no utiliza la funcionalidad de inicio de sesión único (SSO) empresarial para asignar credenciales e inicio de sesión único, SSO es una parte fundamental de toda la infraestructura de Microsoft BizTalk Server, porque [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] utiliza SSO para ayudar a proteger la información de puerto configuración.</span><span class="sxs-lookup"><span data-stu-id="3491d-103">Even if you do not use the Enterprise Single Sign-On (SSO) functionality for mapping credentials and single sign-on, SSO is a critical part of the overall Microsoft BizTalk Server infrastructure, because [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] uses SSO to help secure information for port configuration.</span></span> <span data-ttu-id="3491d-104">Los datos de configuración de puerto se cifran y almacenan en la base de datos SSO.</span><span class="sxs-lookup"><span data-stu-id="3491d-104">The port configuration data is encrypted and stored in the SSO database.</span></span> <span data-ttu-id="3491d-105">Cada servidor BizTalk server tiene un servicio SSO (ENTSSO.exe) que se utiliza para cifrar y descifrar los datos de configuración de puerto.</span><span class="sxs-lookup"><span data-stu-id="3491d-105">Each BizTalk server has an SSO service (ENTSSO.exe) that is used for encrypting and decrypting the port configuration data.</span></span>  
  
 <span data-ttu-id="3491d-106">Cuando se inicia un servicio SSO, recupera la clave de cifrado desde el servidor secreto principal.</span><span class="sxs-lookup"><span data-stu-id="3491d-106">When an SSO service starts up, it retrieves the encryption key from the master secret server.</span></span> <span data-ttu-id="3491d-107">Esta clave de cifrado se denomina el secreto principal.</span><span class="sxs-lookup"><span data-stu-id="3491d-107">This encryption key is called the master secret.</span></span> <span data-ttu-id="3491d-108">El servidor secreto principal es otro servicio SSO que tiene un subservicio adicional que mantiene y distribuye el secreto principal.</span><span class="sxs-lookup"><span data-stu-id="3491d-108">The master secret server is another SSO service that has an additional subservice that maintains and distributes the master secret.</span></span> <span data-ttu-id="3491d-109">Después de recupera un secreto principal, el servicio SSO lo almacena en caché.</span><span class="sxs-lookup"><span data-stu-id="3491d-109">After a master secret is retrieved, the SSO service caches it.</span></span> <span data-ttu-id="3491d-110">Cada 60 segundos, en el servicio SSO se sincroniza el secreto principal con el servidor secreto principal.</span><span class="sxs-lookup"><span data-stu-id="3491d-110">Every 60 seconds, the SSO service synchronizes the master secret with the master secret server.</span></span>  
  
 <span data-ttu-id="3491d-111">Si se produce un error en el servidor secreto principal y el servicio SSO detecta el error en uno de sus intervalos de actualización, el servicio SSO y todas las operaciones de tiempo de ejecución que se estaban ejecutando antes de que el servidor no se pudo, incluido el descifrado de credenciales, continuarán con normalidad.</span><span class="sxs-lookup"><span data-stu-id="3491d-111">If the master secret server fails, and the SSO service detects the failure in one of its refresh intervals, the SSO service and all run-time operations that were running before the server failed, including decryption of credentials, continue successfully.</span></span> <span data-ttu-id="3491d-112">Sin embargo, no se puede cifrar nuevas credenciales o datos de configuración de puerto.</span><span class="sxs-lookup"><span data-stu-id="3491d-112">However, you cannot encrypt new credentials or port configuration data.</span></span> <span data-ttu-id="3491d-113">Por lo tanto, la [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] entorno tiene una dependencia en la disponibilidad del servidor secreto principal.</span><span class="sxs-lookup"><span data-stu-id="3491d-113">Therefore, the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment has a dependency on the availability of the master secret server.</span></span>  
  
## <a name="making-the-master-secret-server-available"></a><span data-ttu-id="3491d-114">Hacer que el servidor secreto principal esté disponible</span><span class="sxs-lookup"><span data-stu-id="3491d-114">Making the Master Secret Server Available</span></span>  
 <span data-ttu-id="3491d-115">Para la disponibilidad del sistema SSO y por lo tanto, de la [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] entorno, es fundamental realizar copias de seguridad del secreto principal tan pronto como se genera.</span><span class="sxs-lookup"><span data-stu-id="3491d-115">For availability of the SSO system, and therefore of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment, it is critical that you back up the master secret as soon as it is generated.</span></span> <span data-ttu-id="3491d-116">Si se pierde, se perderán también los datos que cifró el sistema SSO utilizando ese secreto principal.</span><span class="sxs-lookup"><span data-stu-id="3491d-116">If you lose it, you lose the data that the SSO system encrypted by using that master secret.</span></span> <span data-ttu-id="3491d-117">Para obtener más información sobre la copia de seguridad del secreto principal, consulte [cómo volver la seguridad del secreto principal](http://go.microsoft.com/fwlink/?LinkID=151934) (http://go.microsoft.com/fwlink/?LinkID=151934) en la Ayuda de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="3491d-117">For more information about backing up the master secret, see [How to Back Up the Master Secret](http://go.microsoft.com/fwlink/?LinkID=151934) (http://go.microsoft.com/fwlink/?LinkID=151934) in BizTalk Server Help.</span></span>  
  
 <span data-ttu-id="3491d-118">Puede hacer que el servidor secreto principal esté disponible de dos maneras:</span><span class="sxs-lookup"><span data-stu-id="3491d-118">You can make the master secret server available in two ways:</span></span>  
  
-   <span data-ttu-id="3491d-119">**Disponible, pero no una alta disponibilidad**.</span><span class="sxs-lookup"><span data-stu-id="3491d-119">**Available, but not highly available**.</span></span> <span data-ttu-id="3491d-120">Puede crear un evento de Microsoft System Center Operations Manager para recibir una notificación cuando el servidor secreto principal deja de estar disponible y, a continuación, puede promover manualmente otro servidor SSO para el servidor secreto principal y restaurar el secreto principal en este servidor.</span><span class="sxs-lookup"><span data-stu-id="3491d-120">You can create a Microsoft System Center Operations Manager event to notify you when the master secret server becomes unavailable, and you can then manually promote another SSO server to master secret server and restore the master secret on this server.</span></span>  
  
     <span data-ttu-id="3491d-121">Aunque esta configuración no está altamente disponible, puede ser satisfactoria para la mayoría de los escenarios y es coherente con la ampliación horizontal de los hosts de procesamiento, envío y recepción.</span><span class="sxs-lookup"><span data-stu-id="3491d-121">Although this configuration is not highly available, it can be satisfactory for most scenarios and it is consistent with scaling out the receiving, sending, and processing hosts.</span></span>  
  
-   <span data-ttu-id="3491d-122">**Alta disponibilidad**.</span><span class="sxs-lookup"><span data-stu-id="3491d-122">**Highly available**.</span></span> <span data-ttu-id="3491d-123">para proporcionar redundancia al servidor secreto principal, utilice la Organización por clústeres de Windows en un clúster de servidores secretos principales diferente o configure el servidor secreto principal en un clúster de base de datos existente.</span><span class="sxs-lookup"><span data-stu-id="3491d-123">To provide redundancy for the master secret server, use Windows Clustering on a separate master secret server cluster, or configure the master secret server on an existing database cluster.</span></span> <span data-ttu-id="3491d-124">Los servicios que proporciona el servidor secreto principal no consumen muchos recursos y, normalmente, no afectan a la funcionalidad de la base de datos ni al rendimiento si se instalan en un clúster de base de datos.</span><span class="sxs-lookup"><span data-stu-id="3491d-124">The services provided by the master secret server do not consume many resources, and typically do not affect database functionality or performance when installed on a database cluster.</span></span> <span data-ttu-id="3491d-125">La siguiente ilustración muestra cómo aportar alta disponibilidad al servidor secreto principal.</span><span class="sxs-lookup"><span data-stu-id="3491d-125">The following figure shows how you can make the master secret server highly available.</span></span>  
  
     <span data-ttu-id="3491d-126">![Servidor secreto principal de alta disponibilidad](../core/media/tdi-highava-msscluster.gif "TDI_HighAva_MSSCluster")</span><span class="sxs-lookup"><span data-stu-id="3491d-126">![Highly Available Master Secret Server](../core/media/tdi-highava-msscluster.gif "TDI_HighAva_MSSCluster")</span></span>  
  
     <span data-ttu-id="3491d-127">Aunque esta configuración tenga una alta disponibilidad, requiere recursos de hardware adicionales.</span><span class="sxs-lookup"><span data-stu-id="3491d-127">While this configuration is highly available, it requires additional hardware resources.</span></span> <span data-ttu-id="3491d-128">Para obtener más información acerca de las opciones de instalación de alta disponibilidad para SSO, vea [opciones de instalación de SSO de alta disponibilidad](http://go.microsoft.com/fwlink/?LinkId=156838) (http://go.microsoft.com/fwlink/?LinkId=156838) en la Ayuda de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="3491d-128">For more information about high-availability installation options for SSO, see [High-Availability SSO Installation Options](http://go.microsoft.com/fwlink/?LinkId=156838) (http://go.microsoft.com/fwlink/?LinkId=156838) in BizTalk Server Help.</span></span>  
  
     <span data-ttu-id="3491d-129">En esta sección se incluye información detallada sobre cómo configurar el servidor secreto principal de SSO como un recurso de clúster de alta disponibilidad en un [!INCLUDE[btsWinSvrNoVersion](../includes/btswinsvrnoversion-md.md)] clúster.</span><span class="sxs-lookup"><span data-stu-id="3491d-129">This section includes detailed information about configuring the SSO master secret server as a highly available cluster resource on a [!INCLUDE[btsWinSvrNoVersion](../includes/btswinsvrnoversion-md.md)] cluster.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="3491d-130">Para reducir los recursos de hardware para una solución de alta disponibilidad, puede agregar el servidor secreto principal como recurso de clúster en su [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] clúster.</span><span class="sxs-lookup"><span data-stu-id="3491d-130">To reduce the hardware resources for a highly available solution, you can add the master secret server as a cluster resource in your [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] cluster.</span></span> <span data-ttu-id="3491d-131">Tenga en cuenta que no necesita adquirir más [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] licencias para instalar el SSO de servicio en el equipo que ejecuta SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3491d-131">Note that you do not need to purchase additional [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] licenses to install the SSO service on the computer running the SQL Server.</span></span>  
  
## <a name="in-this-section"></a><span data-ttu-id="3491d-132">En esta sección</span><span class="sxs-lookup"><span data-stu-id="3491d-132">In This Section</span></span>  
  
-   [<span data-ttu-id="3491d-133">Agrupación en clústeres del servidor de secreto maestro</span><span class="sxs-lookup"><span data-stu-id="3491d-133">Clustering the Master Secret Server</span></span>](../technical-guides/clustering-the-master-secret-server.md)  
  
-   [<span data-ttu-id="3491d-134">Designación manual de un nuevo servidor de secreto maestro</span><span class="sxs-lookup"><span data-stu-id="3491d-134">Designating a New Master Secret Server Manually</span></span>](../technical-guides/designating-a-new-master-secret-server-manually.md)  
  
## <a name="see-also"></a><span data-ttu-id="3491d-135">Vea también</span><span class="sxs-lookup"><span data-stu-id="3491d-135">See Also</span></span>  
 <span data-ttu-id="3491d-136">[Planeación de alta disponibilidad2](../technical-guides/planning-for-high-availability2.md) </span><span class="sxs-lookup"><span data-stu-id="3491d-136">[Planning for High Availability2](../technical-guides/planning-for-high-availability2.md) </span></span>  
 <span data-ttu-id="3491d-137">[Alta disponibilidad para los Hosts de BizTalk](../technical-guides/high-availability-for-biztalk-hosts.md) </span><span class="sxs-lookup"><span data-stu-id="3491d-137">[High Availability for BizTalk Hosts](../technical-guides/high-availability-for-biztalk-hosts.md) </span></span>  
 [<span data-ttu-id="3491d-138">Alta disponibilidad para bases de datos</span><span class="sxs-lookup"><span data-stu-id="3491d-138">High Availability for Databases</span></span>](../technical-guides/high-availability-for-databases.md)
---
title: Planificación del seguimiento | Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 8ffc8573-1b4a-47c7-96ab-0471f43facf5
caps.latest.revision: 3
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: c0c45c61efee90b68efc927d88dbcf6429fe13e2
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/27/2018
ms.locfileid: "36973829"
---
# <a name="planning-for-tracking"></a><span data-ttu-id="01f65-102">Planificación del seguimiento</span><span class="sxs-lookup"><span data-stu-id="01f65-102">Planning for Tracking</span></span>
<span data-ttu-id="01f65-103">Seguimiento de mensajes es el proceso por el que las partes de una instancia de mensaje, como el cuerpo del mensaje, propiedades del mensaje y los metadatos se almacenan en una base de datos, normalmente para fines de archivado.</span><span class="sxs-lookup"><span data-stu-id="01f65-103">Message tracking is the process by which parts of a message instance, such as the message body, message properties, and metadata are stored in a database, typically for archival purposes.</span></span> <span data-ttu-id="01f65-104">Posteriormente se pueden ver partes de la instancia de mensaje que se realiza un seguimiento mediante la ejecución de consultas desde la página concentrador de grupo en el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] consola de administración.</span><span class="sxs-lookup"><span data-stu-id="01f65-104">Message instance parts that are tracked can subsequently be viewed by running queries from the Group Hub page in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="01f65-105">Además de acceder a los datos archivados, también puede ver los datos en directo, que pueden ser una herramienta útil para identificar y corregir los problemas en un desarrollo o entorno de ensayo.</span><span class="sxs-lookup"><span data-stu-id="01f65-105">In addition to accessing archived data, you can also view live data, which can be a helpful tool for identifying and fixing problems in a development or staging environment.</span></span>  
  
 <span data-ttu-id="01f65-106">Dado que el proceso de seguimiento de mensajes puede ser consume muchos recursos, debe revisar este tema antes de crear el plan.</span><span class="sxs-lookup"><span data-stu-id="01f65-106">Since the process of message tracking can be very resource intensive, you should review this topic before creating your plan.</span></span>  
  
 <span data-ttu-id="01f65-107">Para obtener más información acerca del seguimiento, vea [seguimiento de estado y actividad](http://go.microsoft.com/fwlink/?LinkId=154187) (http://go.microsoft.com/fwlink/?LinkId=154187).</span><span class="sxs-lookup"><span data-stu-id="01f65-107">For more information about tracking, see [Health and Activity Tracking](http://go.microsoft.com/fwlink/?LinkId=154187) (http://go.microsoft.com/fwlink/?LinkId=154187).</span></span>  
  
## <a name="configuring-and-enabling-the-dta-purge-and-archive-sql-agent-job"></a><span data-ttu-id="01f65-108">Configurar y habilitar la DTA Purge and Archive el trabajo del Agente SQL</span><span class="sxs-lookup"><span data-stu-id="01f65-108">Configuring and Enabling the DTA Purge and Archive SQL Agent Job</span></span>  
 <span data-ttu-id="01f65-109">Este trabajo archiva y purga los datos antiguos de la base de seguimiento de BizTalk, evitando se vuelvan demasiado grandes.</span><span class="sxs-lookup"><span data-stu-id="01f65-109">This job archives and purges old data from the BizTalk Tracking database, thus keeping it from becoming too large.</span></span> <span data-ttu-id="01f65-110">Esto es esencial para un correcto [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] sistema.</span><span class="sxs-lookup"><span data-stu-id="01f65-110">This is essential for a healthy [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] system.</span></span> <span data-ttu-id="01f65-111">Se iniciará una base de datos de seguimiento grandes afecta al rendimiento del host de seguimiento y de los demás procesos que consultan la base de datos de seguimiento.</span><span class="sxs-lookup"><span data-stu-id="01f65-111">A large tracking database will begin to affect the performance of the tracking host and any other processes that query the tracking database.</span></span>  
  
-   <span data-ttu-id="01f65-112">**Asegúrese de que el trabajo DTA Purge and Archive SQL Agent está completando correctamente, habilitadas y configuradas correctamente.**</span><span class="sxs-lookup"><span data-stu-id="01f65-112">**Ensure that the DTA Purge and Archive SQL Agent job is properly configured, enabled, and successfully completing.**</span></span> <span data-ttu-id="01f65-113">Este trabajo no está habilitado de forma predeterminada porque primero debe configurarlo para que incluya un directorio donde se pueden escribir los archivos de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="01f65-113">This job is not enabled by default because you must first configure it to include a directory where the archive files can be written.</span></span>  
  
-   <span data-ttu-id="01f65-114">**Asegúrese de que el trabajo está capacitado para purgar los datos de seguimiento tan rápido como el seguimiento de los datos entrantes se generaron.**</span><span class="sxs-lookup"><span data-stu-id="01f65-114">**Ensure that the job is able to purge the tracking data as fast as the incoming tracking data is generated.**</span></span> <span data-ttu-id="01f65-115">Es aceptable para el trabajo llegue durante las horas pico de carga, pero siempre debe ser capaz de ponerse al día.</span><span class="sxs-lookup"><span data-stu-id="01f65-115">It is acceptable for the job to get behind during peak load times, but it should always be able to catch up.</span></span> <span data-ttu-id="01f65-116">Si el trabajo de purga se queda atrás y nunca es capaz de ponerse al día, la base de datos de seguimiento de BizTalk continuará creciendo y rendimiento finalmente se verá afectado negativamente.</span><span class="sxs-lookup"><span data-stu-id="01f65-116">If the purge job gets behind and is never able to catch up, the BizTalk Tracking database will continue to grow, and performance will eventually be adversely affected.</span></span>  
  
-   <span data-ttu-id="01f65-117">**Revise la purga condicional y purga incondicional parámetros para asegurarse de que mantienen los datos durante el tiempo suficiente, pero no es demasiado largos.**</span><span class="sxs-lookup"><span data-stu-id="01f65-117">**Review the soft purge and hard purge parameters to ensure you are keeping data long enough but not too long.**</span></span> <span data-ttu-id="01f65-118">Para obtener más información acerca de estos parámetros, vea [archivar y purgar la base de datos de seguimiento de BizTalk](http://go.microsoft.com/fwlink/?LinkID=153816) (http://go.microsoft.com/fwlink/?LinkID=153816).</span><span class="sxs-lookup"><span data-stu-id="01f65-118">For more information about these parameters see [Archiving and Purging the BizTalk Tracking Database](http://go.microsoft.com/fwlink/?LinkID=153816) (http://go.microsoft.com/fwlink/?LinkID=153816).</span></span>  
  
-   <span data-ttu-id="01f65-119">**Si solo necesita purgar los datos antiguos y necesita archivarla en primer lugar, después, cambiar el código SQL el trabajo del agente para llamar al procedimiento almacenado "dtasp_PurgeTrackingDatabase".**</span><span class="sxs-lookup"><span data-stu-id="01f65-119">**If you only need to purge the old data and do not need to archive it first, then change the SQL Agent job to call the stored procedure “dtasp_PurgeTrackingDatabase”.**</span></span> <span data-ttu-id="01f65-120">Esto omite el paso archive y simplemente realiza la purga.</span><span class="sxs-lookup"><span data-stu-id="01f65-120">This skips the archive step, and just does the purge.</span></span> <span data-ttu-id="01f65-121">Para obtener más información acerca de este procedimiento almacenado y cambiar el trabajo del Agente SQL para usarlo, vea [cómo purgar datos de la base de datos de seguimiento de BizTalk](http://go.microsoft.com/fwlink/?LinkID=153817) (http://go.microsoft.com/fwlink/?LinkID=153817).</span><span class="sxs-lookup"><span data-stu-id="01f65-121">For more information about this stored procedure and changing the SQL Agent job to use it, see [How to Purge Data from the BizTalk Tracking Database](http://go.microsoft.com/fwlink/?LinkID=153817) (http://go.microsoft.com/fwlink/?LinkID=153817).</span></span>  
  
-   <span data-ttu-id="01f65-122">**Si tiene que mantener archivos de almacenamiento de la base de datos de seguimiento de BizTalk, asegúrese de que tiene un proceso en su lugar para restaurar y usarlas correctamente.**</span><span class="sxs-lookup"><span data-stu-id="01f65-122">**If you need to keep the BizTalk Tracking database archive files, ensure that you have a process in place to successfully restore and use them.**</span></span>  
  
-   <span data-ttu-id="01f65-123">**Si experimenta problemas de rendimiento que se tratan momentáneamente mediante la purga de la base de datos de seguimiento de BizTalk, y desea configurar BizTalk para que ya no recopilar información de seguimiento, puede tener en cuenta al desactivar el seguimiento global.**</span><span class="sxs-lookup"><span data-stu-id="01f65-123">**If you are having performance issues that are momentarily addressed by purging the BizTalk tracking database, and you want to configure BizTalk to no longer collect tracking information, you may want to consider turning off global tracking.**</span></span> <span data-ttu-id="01f65-124">Para obtener información acerca de cómo desactivar el seguimiento global, vea el tema [cómo desactivar el seguimiento Global](http://go.microsoft.com/fwlink/?LinkID=154193) (http://go.microsoft.com/fwlink/?LinkID=154193).</span><span class="sxs-lookup"><span data-stu-id="01f65-124">For information about how to turn off global tracking, see the topic [How to Turn Off Global Tracking](http://go.microsoft.com/fwlink/?LinkID=154193) (http://go.microsoft.com/fwlink/?LinkID=154193).</span></span>  
  
## <a name="creating-a-dedicated-tracking-host"></a><span data-ttu-id="01f65-125">Creación de un Host de seguimiento dedicado</span><span class="sxs-lookup"><span data-stu-id="01f65-125">Creating a Dedicated Tracking Host</span></span>  
 <span data-ttu-id="01f65-126">Cuando la opción de **Permitir seguimiento de Host** está habilitada para un host en la consola de administración de BizTalk Server, las instancias de ese host se ejecutará el servicio de seguimiento datos descodificar (TDDS) para mover datos de seguimiento desde el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] MessageBox base de datos a la base de datos de seguimiento de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="01f65-126">When the option to **Allow Host Tracking** is enabled for a host in the BizTalk Server Administration console, instances of that host will run the Tracking Data Decode Service (TDDS) to move tracked data from the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] MessageBox database to the BizTalk Tracking database.</span></span> <span data-ttu-id="01f65-127">Puesto que TDDS pueden consumir muchos recursos, considere la posibilidad de crear un host de seguimiento "dedicado" para que la **Permitir seguimiento de Host** está habilitada y que no ejecuta ningún otro [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] procesos (por ejemplo, adaptadores u orquestaciones).</span><span class="sxs-lookup"><span data-stu-id="01f65-127">Since TDDS may be resource intensive, consider creating a "dedicated" tracking host for which the **Allow Host Tracking** option is enabled and which does not run any other [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] processes (such as adapters or orchestrations).</span></span> <span data-ttu-id="01f65-128">Si el grupo de BizTalk contiene más de un servidor de BizTalk, también se considera una práctica recomendada para crear una instancia de este host en cada servidor en el grupo para proporcionar alta disponibilidad de TDDS.</span><span class="sxs-lookup"><span data-stu-id="01f65-128">If your BizTalk group contains more than one BizTalk server, it is also considered a best practice to create an instance of this host on each server in the group to provide high availability for TDDS.</span></span>  
  
## <a name="testing-to-measure-maximum-sustainable-tracking-throughput"></a><span data-ttu-id="01f65-129">Las pruebas para medir el rendimiento de seguimiento sostenible máximo</span><span class="sxs-lookup"><span data-stu-id="01f65-129">Testing to Measure Maximum Sustainable Tracking Throughput</span></span>  
 <span data-ttu-id="01f65-130">Un mensaje extenso seguimiento es una actividad de uso intensivo de muchos recursos y si no se administra correctamente puede tener un efecto muy negativo en el rendimiento de la [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] entorno.</span><span class="sxs-lookup"><span data-stu-id="01f65-130">Extensive message tracking is a very resource intensive activity and if not properly managed can have an extremely adverse effect on the performance of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment.</span></span> <span data-ttu-id="01f65-131">Por lo tanto, debe medir el rendimiento de seguimiento sostenible máximo para su [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] entorno para asegurarse de que el sistema es sostenible y se ejecutará indefinidamente con una tasa de flujo de mensaje dado.</span><span class="sxs-lookup"><span data-stu-id="01f65-131">Therefore, you should measure maximum sustainable tracking throughput for your [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment to ensure that the system is sustainable and will run indefinitely at a given message flow rate.</span></span> <span data-ttu-id="01f65-132">Para obtener más información sobre cómo medir el rendimiento de seguimiento sostenible máximo, consulte [medir el rendimiento máximo sostenible seguimiento](http://go.microsoft.com/fwlink/?LinkID=153815) (<http://go.microsoft.com/fwlink/?LinkID=153815>).</span><span class="sxs-lookup"><span data-stu-id="01f65-132">For more information about measuring maximum sustainable tracking throughput, see [Measuring Maximum Sustainable Tracking Throughput](http://go.microsoft.com/fwlink/?LinkID=153815) (<http://go.microsoft.com/fwlink/?LinkID=153815>).</span></span>  
  
##  <a name="BKMK_TrackingBP"></a> <span data-ttu-id="01f65-133">Procedimientos recomendados para el seguimiento</span><span class="sxs-lookup"><span data-stu-id="01f65-133">Best Practices for Tracking</span></span>  
  
- <span data-ttu-id="01f65-134">**Determinar la información que necesita para realizar un seguimiento durante la planeación** : debe decidir durante la planificación de las etapas de la información que necesita para realizar el seguimiento, por lo que después de implementar el proyecto puede establecer las opciones de seguimiento y limitar la cantidad de datos a Asigne sólo la información que necesita.</span><span class="sxs-lookup"><span data-stu-id="01f65-134">**Determine the information you need to track during planning** : You should decide during the planning stages which information you need to track, so that after you deploy the project you can set the tracking options and limit the amount of tracked data to give you only the information you need.</span></span>  
  
- <span data-ttu-id="01f65-135">**No realizar seguimiento de todos los mensajes**: se recomienda realizar un seguimiento no todos los mensajes, porque cada vez que se toca un mensaje, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] crea otra copia.</span><span class="sxs-lookup"><span data-stu-id="01f65-135">**Do not track all messages**: We recommend that you not track all messages, because each time a message is touched, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] makes another copy.</span></span> <span data-ttu-id="01f65-136">En su lugar, puede restringir el ámbito mediante el seguimiento solo a un puerto específico.</span><span class="sxs-lookup"><span data-stu-id="01f65-136">You can instead narrow the scope by tracking only a specific port.</span></span> <span data-ttu-id="01f65-137">Esto ayuda a maximizar el rendimiento del sistema y a mantener despejado las bases de datos.</span><span class="sxs-lookup"><span data-stu-id="01f65-137">This helps to maximize the performance of your system and to keep the databases uncluttered.</span></span>  
  
- <span data-ttu-id="01f65-138">**Establecer el seguimiento en los puertos de envío y puertos en lugar de en una canalización de recepción**: si configura las opciones de seguimiento de canalizaciones, también establecerá las opciones de seguimiento globalmente para todos los puertos que usa la canalización.</span><span class="sxs-lookup"><span data-stu-id="01f65-138">**Set tracking on send ports and receive ports instead of on a pipeline**: If you set tracking options on pipelines, you will also set the tracking options globally for every port that uses the pipeline.</span></span> <span data-ttu-id="01f65-139">Esto puede producir a su vez en muchos más datos de seguimiento que desea, lo que ralentizan el rendimiento del sistema.</span><span class="sxs-lookup"><span data-stu-id="01f65-139">This in turn may result in far more data being tracked than you intend, which will slow system performance.</span></span> <span data-ttu-id="01f65-140">En su lugar, puede establecer las opciones de seguimiento en el envío de puertos y los puertos de recepción.</span><span class="sxs-lookup"><span data-stu-id="01f65-140">Instead, you can set tracking options on send ports and receive ports.</span></span>  
  
- <span data-ttu-id="01f65-141">**Tenga en cuenta varios factores cuando el tamaño de la base de datos de seguimiento de BizTalk**:</span><span class="sxs-lookup"><span data-stu-id="01f65-141">**Take into account various factors when you size the BizTalk Tracking database**:</span></span>  
  
  -   <span data-ttu-id="01f65-142">Al cambiar el tamaño de la base de datos de seguimiento de BizTalk, cuenta los factores de SQL Server, como el tamaño del índice, agregando un multiplicador de contingencia para los cálculos.</span><span class="sxs-lookup"><span data-stu-id="01f65-142">When sizing the BizTalk Tracking database, account for SQL Server factors, such as index size, by adding a contingency multiplier to your calculations.</span></span>  
  
  -   <span data-ttu-id="01f65-143">Al determinar el tamaño de los mensajes en la base de datos de seguimiento de BizTalk, agregue el tamaño promedio del contexto del mensaje para el tamaño del mensaje si resulta significativo en comparación con el tamaño del mensaje.</span><span class="sxs-lookup"><span data-stu-id="01f65-143">When determining the size of messages in the BizTalk Tracking database, add the average size of the message context to the message size if it is significant compared to the message size.</span></span>  
  
  -   <span data-ttu-id="01f65-144">Para limitar el tamaño de los mensajes en la base de datos de seguimiento de BizTalk, limite el número de propiedades que promueva.</span><span class="sxs-lookup"><span data-stu-id="01f65-144">To limit the size of messages in the BizTalk Tracking database, limit the number of properties that you promote.</span></span> <span data-ttu-id="01f65-145">Debe únicas propiedades promocionada de uso si necesita para fines de enrutamiento, en caso contrario, utilice los campos distintivos.</span><span class="sxs-lookup"><span data-stu-id="01f65-145">You should only use promoted properties if you need them for routing purposes, otherwise use distinguished fields.</span></span>  
  
  -   <span data-ttu-id="01f65-146">Si la orquestación **forma Inicio y finalización** está habilitada, tenga en cuenta que un evento de inicio y detención para cada forma en cada instancia de orquestación se guarda en la base de datos de seguimiento de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="01f65-146">If the orchestration **Shape start and end** option is enabled, take into account that a start and stop event for each shape in each orchestration instance is saved in the BizTalk Tracking database.</span></span>
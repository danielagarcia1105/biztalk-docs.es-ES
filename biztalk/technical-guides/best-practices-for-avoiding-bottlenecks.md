---
title: Procedimientos recomendados para evitar cuellos de botella | Documentos de Microsoft
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 81da2e31-dce0-43fb-841f-e65ff99e80a7
caps.latest.revision: "6"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 08f2291d6aa4d16c251a110bc6f94c6288dc5064
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
---
# <a name="best-practices-for-avoiding-bottlenecks"></a><span data-ttu-id="2fdf7-102">Procedimientos recomendados para evitar cuellos de botella</span><span class="sxs-lookup"><span data-stu-id="2fdf7-102">Best Practices for Avoiding Bottlenecks</span></span>
<span data-ttu-id="2fdf7-103">Aunque la configuración predeterminada de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] proporciona un rendimiento óptimo para muchas configuraciones de hardware y software, en algunas situaciones conviene modificar los valores de configuración o la configuración de implementación.</span><span class="sxs-lookup"><span data-stu-id="2fdf7-103">While the default settings in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] provide optimal performance for many hardware and software configurations, in some scenarios it may be beneficial to modify the settings or deployment configuration.</span></span> <span data-ttu-id="2fdf7-104">Al configurar [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], tenga en cuenta las siguientes directrices sobre rendimiento:</span><span class="sxs-lookup"><span data-stu-id="2fdf7-104">When configuring [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], consider the following performance guidelines:</span></span>  
  
-   <span data-ttu-id="2fdf7-105">Para evitar la contención de recursos, aísle recepción, la orquestación y envío en hosts independientes.</span><span class="sxs-lookup"><span data-stu-id="2fdf7-105">To prevent resource contention, isolate receiving, orchestration, and sending on separate hosts.</span></span> <span data-ttu-id="2fdf7-106">Para reducir aún más la contención, aísle el servicio de seguimiento de otros hosts.</span><span class="sxs-lookup"><span data-stu-id="2fdf7-106">To further minimize contention, isolate the tracking service from other hosts.</span></span>  
  
-   <span data-ttu-id="2fdf7-107">Si el procesamiento en el equipo que ejecuta BizTalk Server de la CPU es el cuello de botella, escalar verticalmente el equipo que ejecuta BizTalk Server mediante la inclusión de CPU adicionales o realizar la actualización a CPU más rápidas.</span><span class="sxs-lookup"><span data-stu-id="2fdf7-107">If CPU processing on the computer running BizTalk Server is the bottleneck, scale up the computer running BizTalk Server by including additional CPUs or upgrading to faster CPUs.</span></span>  
  
## <a name="sql-server-guidelines"></a><span data-ttu-id="2fdf7-108">Directrices de SQL Server</span><span class="sxs-lookup"><span data-stu-id="2fdf7-108">SQL Server Guidelines</span></span>  
 <span data-ttu-id="2fdf7-109">Al configurar Microsoft SQL Server con [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], tenga en cuenta las siguientes directrices sobre rendimiento:</span><span class="sxs-lookup"><span data-stu-id="2fdf7-109">Consider the following performance guidelines when configuring Microsoft SQL Server with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]:</span></span>  
  
-   <span data-ttu-id="2fdf7-110">Siempre que sea posible, utilice un subsistema rápido de discos con SQL Server.</span><span class="sxs-lookup"><span data-stu-id="2fdf7-110">Whenever possible, use a fast disk subsystem with SQL Server.</span></span> <span data-ttu-id="2fdf7-111">Utilice una matriz redundante de discos independientes tipo 10 (RAID10 / 0 + 1) o una red de área de almacenamiento (SAN) con fuente de alimentación de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="2fdf7-111">Use a redundant array of independent disks type 10 (RAID10/0+1) or a storage area network (SAN) with backup power supply.</span></span>  
  
-   <span data-ttu-id="2fdf7-112">Aísle cada base de datos de cuadro de mensajes en un servidor independiente de la base de datos de seguimiento de BizTalk (BizTalkDTADb).</span><span class="sxs-lookup"><span data-stu-id="2fdf7-112">Isolate each MessageBox database on a separate server from the BizTalk Tracking database (BizTalkDTADb).</span></span> <span data-ttu-id="2fdf7-113">Para implementaciones más pequeñas si hay recursos de CPU disponibles, puede ser suficiente aislar la base de datos de cuadro de mensajes en un disco físico independiente de la base de datos de seguimiento de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="2fdf7-113">For smaller deployments if CPU resources are available, it might be sufficient to isolate the MessageBox database on a separate physical disk from the BizTalk Tracking database.</span></span>  
  
-   <span data-ttu-id="2fdf7-114">La base de datos de cuadro de mensajes principal podría ser el cuello de botella debido a una saturación del procesador de CPU o de latencia de operaciones de disco (longitud de cola de disco Media).</span><span class="sxs-lookup"><span data-stu-id="2fdf7-114">The primary MessageBox database could be the bottleneck due to CPU processor saturation or latency from disk operations (average disk queue length).</span></span> <span data-ttu-id="2fdf7-115">Si el procesamiento de CPU es el cuello de botella, agregue procesadores de CPU en el cuadro de mensajes principal.</span><span class="sxs-lookup"><span data-stu-id="2fdf7-115">If CPU processing is the bottleneck, add CPU processors to the primary MessageBox.</span></span> <span data-ttu-id="2fdf7-116">Si no es así, pruebe a deshabilitar la publicación en la base de datos maestra.</span><span class="sxs-lookup"><span data-stu-id="2fdf7-116">If not, try to disable publishing on the master MessageBox database.</span></span> <span data-ttu-id="2fdf7-117">De esta forma la base de datos maestra pueden más controlar con eficacia el enrutamiento de mensajes a las otras bases de datos de cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="2fdf7-117">This way the master MessageBox database can more efficiently handle routing of messages to the other MessageBox databases.</span></span> <span data-ttu-id="2fdf7-118">La opción para deshabilitar la publicación es válida cuando se utiliza varias bases de datos de cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="2fdf7-118">The option to disable publishing is valid when you are using multiple MessageBox databases.</span></span>  
  
-   <span data-ttu-id="2fdf7-119">Si las operaciones de disco son el cuello de botella, mueva la base de datos de seguimiento de BizTalk a un equipo dedicado de SQL Server o un disco dedicado.</span><span class="sxs-lookup"><span data-stu-id="2fdf7-119">If disk operations are the bottleneck, move the BizTalk Tracking database to a dedicated SQL Server computer and/or dedicated disk.</span></span> <span data-ttu-id="2fdf7-120">Si las operaciones de disco y procesamiento de CPU en la base de datos de cuadro de mensajes principal no son el cuello de botella, puede crear nuevas bases de datos de cuadro de mensajes en el mismo equipo de SQL Server para aprovechar el hardware existente.</span><span class="sxs-lookup"><span data-stu-id="2fdf7-120">If CPU processing and disk operations on the primary MessageBox database are not the bottleneck, you can create new MessageBox databases on the same SQL Server computer to leverage your existing hardware.</span></span>  
  
-   <span data-ttu-id="2fdf7-121">Siga las recomendaciones de [optimizar los grupos de archivos para el Databases2](../technical-guides/optimizing-filegroups-for-the-databases2.md)para aislar el registro de transacciones y datos de archivos para las bases de datos de cuadro de mensaje y seguimiento de BizTalk en discos físicos diferentes.</span><span class="sxs-lookup"><span data-stu-id="2fdf7-121">Follow recommendations in [Optimizing Filegroups for the Databases2](../technical-guides/optimizing-filegroups-for-the-databases2.md)to isolate the transaction and data log files for the MessageBox and BizTalk Tracking databases onto separate physical disks.</span></span>  
  
-   <span data-ttu-id="2fdf7-122">Asigne suficiente espacio de almacenamiento para los archivos de datos y de registro.</span><span class="sxs-lookup"><span data-stu-id="2fdf7-122">Allocate sufficient storage space for the data and log files.</span></span> <span data-ttu-id="2fdf7-123">En caso contrario, SQL Server consumirá automáticamente todo el espacio disponible en los discos donde se guardan los archivos de registro.</span><span class="sxs-lookup"><span data-stu-id="2fdf7-123">Otherwise SQL Server will automatically consume all of the available space on the disks where the log files are kept.</span></span> <span data-ttu-id="2fdf7-124">El tamaño inicial de los archivos de registro depende de los requisitos específicos en el escenario.</span><span class="sxs-lookup"><span data-stu-id="2fdf7-124">The initial size of the log files depends on the specific requirements in your scenario.</span></span> <span data-ttu-id="2fdf7-125">Realice una estimación del tamaño medio de los archivos de la implementación según los resultados de la prueba y amplíe el espacio de almacenamiento antes de implementar la solución.</span><span class="sxs-lookup"><span data-stu-id="2fdf7-125">Estimate the average file size in your deployment based on testing results, and expand the storage space before implementing your solution.</span></span>  
  
-   <span data-ttu-id="2fdf7-126">Asigne suficiente espacio de almacenamiento para bases de datos de uso de disco de alta, como el cuadro de mensajes, el estado y el seguimiento de actividad (HAT) y la supervisión de la actividad económica (BAM).</span><span class="sxs-lookup"><span data-stu-id="2fdf7-126">Allocate sufficient storage space for high-disk-use databases, such as the MessageBox, Health and Activity Tracking (HAT), and Business Activity Monitoring (BAM).</span></span> <span data-ttu-id="2fdf7-127">Si la solución utiliza el protocolo de mensajería BizTalk Framework, asigne suficiente espacio de almacenamiento para la base de datos de configuración de BizTalk (BizTalkMgmtDb).</span><span class="sxs-lookup"><span data-stu-id="2fdf7-127">If your solution uses the BizTalk Framework messaging protocol, allocate sufficient storage space for the BizTalk Configuration database (BizTalkMgmtDb).</span></span>  
  
-   <span data-ttu-id="2fdf7-128">Dependiendo de negocio necesita, como períodos de retención de datos y el volumen de datos procesadas en el escenario, configure el trabajo de agente de SQL Server "Archivo y purga de DTA" en la base de datos de seguimiento de HAT, que la base de datos de seguimiento de BizTalk no aumente demasiado grande.</span><span class="sxs-lookup"><span data-stu-id="2fdf7-128">Depending on business needs, such as data retention periods, and the volume of data processed in your scenario, configure the "DTA Archive and Purge" SQL Server Agent job on the HAT-Tracking database such that the BizTalk Tracking database does not grow too large.</span></span> <span data-ttu-id="2fdf7-129">El crecimiento de esta base de datos puede degradar el rendimiento porque alcanzar la capacidad total de la base de datos impone un límite en la velocidad de inserción de datos.</span><span class="sxs-lookup"><span data-stu-id="2fdf7-129">The growth of this database can degrade performance because reaching the full capacity of the database imposes a limit on the rate of data insertion.</span></span> <span data-ttu-id="2fdf7-130">Esto es especialmente cierto cuando una base de datos de seguimiento de BizTalk es compatible con varias bases de datos de cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="2fdf7-130">This is especially true when one BizTalk Tracking database supports multiple MessageBox databases.</span></span>  
  
-   <span data-ttu-id="2fdf7-131">Escalar verticalmente los servidores que hospedan las bases de datos de cuadro de mensaje y seguimiento de BizTalk si son el cuello de botella.</span><span class="sxs-lookup"><span data-stu-id="2fdf7-131">Scale up the servers hosting the MessageBox and BizTalk Tracking databases if they are the bottleneck.</span></span> <span data-ttu-id="2fdf7-132">Puede escalar verticalmente el hardware al agregar CPU, agregar memoria, realizar la actualización a CPU más rápidas y utilizando discos dedicados a alta velocidad.</span><span class="sxs-lookup"><span data-stu-id="2fdf7-132">You can scale up the hardware by adding CPUs, adding memory, upgrading to faster CPUs, and using high-speed dedicated disks.</span></span>  
  
-   <span data-ttu-id="2fdf7-133">Dividir los archivos de TempDB en varios archivos, puede solucionar problemas de rendimiento relacionados con operaciones de E/S.</span><span class="sxs-lookup"><span data-stu-id="2fdf7-133">Splitting the TempDB files across multiple files may resolve performance issues related to I/O operations.</span></span> <span data-ttu-id="2fdf7-134">Como norma general, crea un archivo de datos de archivo por procesador y utilizar el mismo tamaño para todos los archivos creados.</span><span class="sxs-lookup"><span data-stu-id="2fdf7-134">As a general guideline, create one file data file per processor and use the same size for all files created.</span></span>  
  
-   <span data-ttu-id="2fdf7-135">Cambio de la base de datos tenga un crecimiento automático configuración en un valor fijo, como 100 a 150 MB.</span><span class="sxs-lookup"><span data-stu-id="2fdf7-135">Change the database auto-grow settings to a fixed value such as 100-150MB.</span></span> <span data-ttu-id="2fdf7-136">De forma predeterminada que el crecimiento de la base de datos está configurado en un 10%, lo que puede provocar retrasos al crecimiento de las bases de datos más grandes.</span><span class="sxs-lookup"><span data-stu-id="2fdf7-136">By default the database growth is configured to 10%, which can lead to delays when growing larger databases.</span></span>  
  
-   <span data-ttu-id="2fdf7-137">Memoria de SQL Server debe establecerse en un valor fijo estableciendo Min Server Memory y Max Server Memory en el mismo valor.</span><span class="sxs-lookup"><span data-stu-id="2fdf7-137">SQL Server memory should be set to a fixed value by setting both Min Server Memory and Max Server Memory to the same value.</span></span> <span data-ttu-id="2fdf7-138">En general, asignar el 75% de memoria física para SQL Server y dejar el 25% para el resto del sistema operativo y todas las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="2fdf7-138">In general, allocate 75% of physical memory to SQL Server and leave 25% for the rest of the operating system and any applications.</span></span> <span data-ttu-id="2fdf7-139">Si se trata de un servidor dedicado de SQL, puede reducir la cantidad reservada para el sistema operativo en un mínimo de 1GB.</span><span class="sxs-lookup"><span data-stu-id="2fdf7-139">If this is a dedicated SQL Server, you can decrease the amount reserved for the operating system to a minimum of 1GB.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2fdf7-140">Vea también</span><span class="sxs-lookup"><span data-stu-id="2fdf7-140">See Also</span></span>  
 [<span data-ttu-id="2fdf7-141">Buscar y eliminar los cuellos de botella</span><span class="sxs-lookup"><span data-stu-id="2fdf7-141">Finding and Eliminating Bottlenecks</span></span>](../technical-guides/finding-and-eliminating-bottlenecks.md)
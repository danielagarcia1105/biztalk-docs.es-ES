---
title: Ajuste de escala fuera de las bases de datos de BizTalk Server | Documentos de Microsoft
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 18853ceb-7975-4c30-878f-6b162005f795
caps.latest.revision: "2"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: e3116b7aae087e74ade089c8020a7d35c883cd2e
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
---
# <a name="scaling-out-the-biztalk-server-databases"></a><span data-ttu-id="92ca5-102">Ajuste de escala en las bases de datos de servidor BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="92ca5-102">Scaling Out the BizTalk Server Databases</span></span>
<span data-ttu-id="92ca5-103">Para proporcionar alta disponibilidad para el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] bases de datos, configure dos equipos que ejecutan [!INCLUDE[btsSQLServer2008](../includes/btssqlserver2008-md.md)] o [!INCLUDE[btsSQLServer2005](../includes/btssqlserver2005-md.md)] en un clúster de Windows.</span><span class="sxs-lookup"><span data-stu-id="92ca5-103">To provide high availability for the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases, configure two computers that are running [!INCLUDE[btsSQLServer2008](../includes/btssqlserver2008-md.md)] or [!INCLUDE[btsSQLServer2005](../includes/btssqlserver2005-md.md)] in a Windows cluster.</span></span> <span data-ttu-id="92ca5-104">Estos equipos pueden ejecutar en un activo/activo, activo/pasivo o activo/activo/pasivo (requiere tres equipos) configuración para obtener redundancia y puede almacenar datos en una unidad compartida (por ejemplo, una RAID 1 + 0 matriz de discos SCSI) o una red de área de almacenamiento (SAN).</span><span class="sxs-lookup"><span data-stu-id="92ca5-104">These computers can run in an active/active, active/passive, or active/active/passive (requires three computers) configuration for redundancy and can store data on a shared drive (such as a RAID 1+0 SCSI disk array) or storage area network (SAN).</span></span>  
  
 <span data-ttu-id="92ca5-105">Si el [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] servicio deja de estar disponible por alguna razón, el clúster de base de datos transfiere los recursos del equipo activo en el equipo pasivo.</span><span class="sxs-lookup"><span data-stu-id="92ca5-105">If the [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] service becomes unavailable for any reason, the database cluster transfers resources from the active computer to the passive computer.</span></span> <span data-ttu-id="92ca5-106">Durante este proceso de conmutación por error, el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] experimentar errores de conexión de base de datos de instancias de servicio y se reinician automáticamente para volver a conectarse a las bases de datos.</span><span class="sxs-lookup"><span data-stu-id="92ca5-106">During this failover process, the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] service instances experience database connection failures and automatically restart to reconnect to the databases.</span></span> <span data-ttu-id="92ca5-107">El equipo de base de datos en funcionamiento (antes el equipo pasivo) comienza a procesar las conexiones de base de datos después de asumir los recursos durante la conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="92ca5-107">The functioning database computer (previously the passive computer) begins processing the database connections after assuming the resources during failover.</span></span>  
  
 <span data-ttu-id="92ca5-108">Agrupación en clústeres los [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] bases de datos se describe en [agrupación en clústeres los Databases2 de BizTalk Server](../technical-guides/clustering-the-biztalk-server-databases2.md).</span><span class="sxs-lookup"><span data-stu-id="92ca5-108">Clustering the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases is discussed in [Clustering the BizTalk Server Databases2](../technical-guides/clustering-the-biztalk-server-databases2.md).</span></span> <span data-ttu-id="92ca5-109">En esta sección se centra en la ampliación horizontal de la [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] las bases de datos para proporcionar alta disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="92ca5-109">This section focuses on scaling out the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases to provide high availability.</span></span>  
  
## <a name="providing-high-availability-for-the-biztalk-messagebox-database"></a><span data-ttu-id="92ca5-110">Proporcionar alta disponibilidad de la base de datos de cuadro de mensajes de BizTalk</span><span class="sxs-lookup"><span data-stu-id="92ca5-110">Providing High Availability for the BizTalk MessageBox Database</span></span>  
 <span data-ttu-id="92ca5-111">Esta sección proporciona información acerca de cómo configurar la base de datos de BizTalk MessageBox para lograr alta disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="92ca5-111">This section provides information about to configure BizTalk MessageBox database for high availability.</span></span>  
  
### <a name="running-multiple-messagebox-databases"></a><span data-ttu-id="92ca5-112">Ejecutar varias bases de datos de cuadro de mensajes</span><span class="sxs-lookup"><span data-stu-id="92ca5-112">Running Multiple MessageBox Databases</span></span>  
 <span data-ttu-id="92ca5-113">Para mejorar la escalabilidad de la [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] bases de datos y al uso de CPU alta de la dirección en la base de datos de cuadro de mensajes [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] equipo, puede configurar [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] para almacenar los datos entre varias bases de datos de cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="92ca5-113">To enhance the scalability of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases and to address high CPU utilization on the MessageBox database [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] computer, you can configure [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] to store data across multiple MessageBox databases.</span></span> <span data-ttu-id="92ca5-114">Cree la primera base de datos cuando ejecute el Asistente para configuración.</span><span class="sxs-lookup"><span data-stu-id="92ca5-114">You create the first MessageBox database when you run the Configuration Wizard.</span></span> <span data-ttu-id="92ca5-115">Esta base de datos es la base de datos de cuadro de mensajes principal.</span><span class="sxs-lookup"><span data-stu-id="92ca5-115">This MessageBox database is the master MessageBox database.</span></span> <span data-ttu-id="92ca5-116">Hay una base de datos maestra única en su [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] implementación.</span><span class="sxs-lookup"><span data-stu-id="92ca5-116">There is a single master MessageBox database in your [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] deployment.</span></span> <span data-ttu-id="92ca5-117">Esta base de datos contiene la información de suscripción principal y enruta los mensajes hacia la base de datos de cuadro de mensajes correspondiente.</span><span class="sxs-lookup"><span data-stu-id="92ca5-117">The master MessageBox database contains the master subscription information and routes messages to the appropriate MessageBox database.</span></span> <span data-ttu-id="92ca5-118">Normalmente, desea dedicar la base de datos maestra para el enrutamiento solo y permitir que las otras bases de datos de cuadro de mensajes realizan el procesamiento.</span><span class="sxs-lookup"><span data-stu-id="92ca5-118">Typically, you want to dedicate the master MessageBox database to do routing only and let the other MessageBox databases do the processing.</span></span> <span data-ttu-id="92ca5-119">Para hacer que una base de datos de cuadro de mensajes para efectuar el enrutamiento de solo, seleccione **Deshabilitar publicación de nuevos mensajes** desde las propiedades de cuadro de mensajes en la consola de administración de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="92ca5-119">To make a MessageBox database to do routing only, select **Disable new message publication** from the MessageBox properties in BizTalk Administration console.</span></span>  
  
 <span data-ttu-id="92ca5-120">Un ejemplo de flujo de procesamiento de base de datos de cuadro de mensajes es como sigue:</span><span class="sxs-lookup"><span data-stu-id="92ca5-120">An example of MessageBox database processing flow is as follows:</span></span>  
  
1.  <span data-ttu-id="92ca5-121">Cuando la base de datos de cuadro de mensajes principal recibe un nuevo mensaje de activación: una instancia nueva de un proceso empresarial o un mensaje de suscripción, la base de datos de cuadro de mensajes principal distribuye el mensaje de activación para la base de datos de cuadro de mensajes disponible siguiente.</span><span class="sxs-lookup"><span data-stu-id="92ca5-121">When the master MessageBox database receives a new activation message—a brand new instance of a business process or a subscription message—the master MessageBox database distributes the activation message to the next available MessageBox database.</span></span> <span data-ttu-id="92ca5-122">Por ejemplo, si tiene una base de datos de cuadro de mensajes principal y dos bases de datos de cuadro de mensajes, la base de datos de cuadro de mensajes principal enruta el primer mensaje de activación hacia la base de datos de cuadro de mensajes 1, el segundo mensaje de activación hacia la base de datos de cuadro de mensajes 2, el tercer mensaje de activación hacia la base de datos de cuadro de mensajes 1, y así sucesivamente en un modelo de operación por turnos.</span><span class="sxs-lookup"><span data-stu-id="92ca5-122">For example, if you have one master MessageBox database and two MessageBox databases, the master MessageBox database routes the first activation message to MessageBox database 1, the second activation message to MessageBox database 2, the third activation message to MessageBox database 1, and so on in a round-robin pattern.</span></span> <span data-ttu-id="92ca5-123">La base de datos de cuadro de mensajes principal utiliza lógica integrada para el equilibrio de carga y no necesita mecanismos de equilibrio de carga adicionales.</span><span class="sxs-lookup"><span data-stu-id="92ca5-123">The master MessageBox database uses built-in logic to load balance, and does not need additional load-balancing mechanisms.</span></span>  
  
2.  <span data-ttu-id="92ca5-124">Una vez que la base de datos de cuadro de mensajes principal enruta el mensaje de activación hacia una base de datos de cuadro de mensajes concreta (por ejemplo, la base de datos 1), el proceso empresarial pasa a la memoria y se ejecuta.</span><span class="sxs-lookup"><span data-stu-id="92ca5-124">After the master MessageBox database routes the activation message to a particular MessageBox database (for example, MessageBox database 1), the business process goes into memory and runs.</span></span>  
  
3.  <span data-ttu-id="92ca5-125">Si el proceso empresarial tiene que esperar un mensaje y el tiempo de espera tiene más de unos segundos, el proceso empresarial se mantiene en la base de datos de cuadro de mensajes 1.</span><span class="sxs-lookup"><span data-stu-id="92ca5-125">If the business process has to wait for a message, and the wait time is longer than several seconds, the business process is persisted back into MessageBox database 1.</span></span> <span data-ttu-id="92ca5-126">El proceso empresarial está esperando un mensaje de correlación.</span><span class="sxs-lookup"><span data-stu-id="92ca5-126">The business process is waiting for a correlation message.</span></span>  
  
4.  <span data-ttu-id="92ca5-127">Cuando llega el mensaje de correlación en la base de datos maestra, el motor de mensajería realiza una operación de búsqueda en la base de datos para la base de datos de cuadro de mensaje que contiene el estado del mensaje de correlación (en este ejemplo, el cuadro de mensajes 1).</span><span class="sxs-lookup"><span data-stu-id="92ca5-127">When the correlation message arrives at the master MessageBox database, the Message Engine does a lookup operation in the database for the MessageBox database that contains the state for the correlation message (in this example, MessageBox 1).</span></span> <span data-ttu-id="92ca5-128">La base de datos de cuadro de mensajes principal entrega el mensaje a la base de datos de cuadro de mensaje que contiene el proceso empresarial.</span><span class="sxs-lookup"><span data-stu-id="92ca5-128">The master MessageBox database delivers the message to the MessageBox database that contains the business process.</span></span>  
  
5.  <span data-ttu-id="92ca5-129">El proceso empresarial se vuelve a la memoria para continuar el procesamiento hasta que finaliza o hasta que tenga que esperar otro mensaje de correlación.</span><span class="sxs-lookup"><span data-stu-id="92ca5-129">The business process is brought back into memory to continue processing until it finishes or until it has to wait for another correlation message.</span></span>  
  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="92ca5-130">almacenes de todos los Estados de las bases de datos de cuadro de mensajes, cada base de datos de cuadro de mensaje contiene información de estado para diferentes procesos empresariales.</span><span class="sxs-lookup"><span data-stu-id="92ca5-130"> stores all the states in the MessageBox databases, and each MessageBox database contains state information for different business processes.</span></span> <span data-ttu-id="92ca5-131">Para mayor confiabilidad, debe agrupar todas las bases de datos de cuadro de mensajes, incluidas las bases de datos de cuadro de mensajes principal y secundarias.</span><span class="sxs-lookup"><span data-stu-id="92ca5-131">For reliability, you must cluster all the MessageBox databases, including the master and secondary MessageBox databases.</span></span>  
  
 <span data-ttu-id="92ca5-132">Para configurar varias bases de datos de cuadro de mensajes, utilice el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] consola de administración para agregar los equipos que ejecutan [!INCLUDE[btsSQLServer2008R2](../includes/btssqlserver2008r2-md.md)] o [!INCLUDE[btsSQLServer2008](../includes/btssqlserver2008-md.md)].</span><span class="sxs-lookup"><span data-stu-id="92ca5-132">To configure multiple MessageBox databases, you use the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console to add the computers that are running [!INCLUDE[btsSQLServer2008R2](../includes/btssqlserver2008r2-md.md)] or [!INCLUDE[btsSQLServer2008](../includes/btssqlserver2008-md.md)].</span></span> <span data-ttu-id="92ca5-133">Desde la perspectiva de administración, solo tiene que agregar nuevas bases de datos de cuadro de mensaje.</span><span class="sxs-lookup"><span data-stu-id="92ca5-133">From an administration perspective, you only have to add new MessageBox databases.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="92ca5-134">controla la distribución de round robin de los mensajes de activación y envía mensajes de correlación a las bases de datos de cuadro de mensajes correctos automáticamente.</span><span class="sxs-lookup"><span data-stu-id="92ca5-134"> automatically handles the round-robin distribution of activation messages and sends correlation messages to the correct MessageBox databases.</span></span>  
  
 <span data-ttu-id="92ca5-135">Si configura varias bases de datos de cuadro de mensajes en su entorno debe crear un mínimo de tres bases de datos de cuadro de mensajes para su [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] grupo y se debe deshabilitar la publicación de mensajes en la base de datos maestra.</span><span class="sxs-lookup"><span data-stu-id="92ca5-135">If you configure multiple MessageBox databases in your environment you should create a minimum of three MessageBox databases for your [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] group and you should disable message publication on the master MessageBox database.</span></span> <span data-ttu-id="92ca5-136">Esta recomendación se realiza porque agregar bases de datos de cuadro de mensajes adicionales supone una sobrecarga por la base de datos maestra para enrutar los mensajes entre las bases de datos de cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="92ca5-136">This recommendation is made because adding additional MessageBox databases incurs overhead by the master MessageBox database for routing messages between the MessageBox databases.</span></span> <span data-ttu-id="92ca5-137">Si solo configura dos bases de datos de cuadro de mensajes, a continuación, la mayoría del beneficio obtenido a través de la base de datos de cuadro de mensajes adicional se desplaza por la sobrecarga consumida por la base de datos maestra para enrutar el mensaje.</span><span class="sxs-lookup"><span data-stu-id="92ca5-137">If you only configure two MessageBox databases then most of the benefit gained by the additional MessageBox database is offset by the overhead consumed by the master MessageBox database for message routing.</span></span>  
  
> [!IMPORTANT]  
>  [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="92ca5-138">almacenes de todos los Estados de las bases de datos de cuadro de mensajes, cada base de datos de cuadro de mensaje contiene información de estado para diferentes procesos empresariales.</span><span class="sxs-lookup"><span data-stu-id="92ca5-138"> stores all the states in the MessageBox databases, and each MessageBox database contains state information for different business processes.</span></span> <span data-ttu-id="92ca5-139">Para mayor confiabilidad, debe agrupar todas las bases de datos de cuadro de mensajes, incluidas las bases de datos de cuadro de mensajes principal y secundarias.</span><span class="sxs-lookup"><span data-stu-id="92ca5-139">For reliability, you must cluster all the MessageBox databases, including the master and secondary MessageBox databases.</span></span>  
  
### <a name="providing-high-availability-for-multiple-messagebox-databases"></a><span data-ttu-id="92ca5-140">Proporcionar alta disponibilidad a varias bases de datos de cuadro de mensajes</span><span class="sxs-lookup"><span data-stu-id="92ca5-140">Providing High Availability for Multiple MessageBox Databases</span></span>  
 <span data-ttu-id="92ca5-141">Al agregar las bases de datos de cuadro de mensajes para su [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] implementación mejora la escalabilidad, no proporciona alta disponibilidad porque cada base de datos de cuadro de mensajes es única e independiente y es, potencialmente, un único punto de error para su [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] entorno.</span><span class="sxs-lookup"><span data-stu-id="92ca5-141">While adding MessageBox databases to your [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] deployment improves scalability, it does not provide high availability because each MessageBox database is unique and independent and is potentially a single point of failure for your [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment.</span></span> <span data-ttu-id="92ca5-142">Para agregar redundancia, se debe configurar un clúster de servidores para cada base de datos de cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="92ca5-142">To add redundancy involves configuring a server cluster for each MessageBox database.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="92ca5-143">distribuye los datos en las bases de datos de cuadro de mensajes múltiples, por lo que las bases de datos no comparten datos o en caso contrario, proporcionar redundancia sin agrupación en clústeres de servidor.</span><span class="sxs-lookup"><span data-stu-id="92ca5-143"> distributes data across the multiple MessageBox databases, so the databases do not share data or otherwise provide redundancy without server clustering.</span></span>  
  
## <a name="providing-high-availability-for-the-biztalk-tracking-database"></a><span data-ttu-id="92ca5-144">Proporcionar alta disponibilidad a la base de datos de seguimiento de BizTalk</span><span class="sxs-lookup"><span data-stu-id="92ca5-144">Providing High Availability for the BizTalk Tracking Database</span></span>  
 <span data-ttu-id="92ca5-145">Según los requisitos de su implementación concreta, puede mejorar el rendimiento de seguimiento aislando la base de datos de seguimiento de BizTalk a otro [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] equipo, y mediante la creación de otro Host de BizTalk se dedica a seguimiento de host.</span><span class="sxs-lookup"><span data-stu-id="92ca5-145">Depending on the requirements of your particular deployment, you might want to enhance performance for tracking by isolating the BizTalk Tracking database onto a separate [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] computer and by creating a separate BizTalk Host dedicated to host tracking.</span></span> <span data-ttu-id="92ca5-146">La siguiente ilustración muestra un host de seguimiento dedicado con dos instancias de host y las bases de datos en clúster.</span><span class="sxs-lookup"><span data-stu-id="92ca5-146">The following figure shows a dedicated tracking host with two host instances and clustered databases.</span></span>  
  
 <span data-ttu-id="92ca5-147">![Ajuste de escala en las bases de datos de seguimiento](../technical-guides/media/4fc1d448-2a6c-4cea-ac17-96c1263dfb68.gif "4fc1d448-2a6c-4cea-ac17-96c1263dfb68")</span><span class="sxs-lookup"><span data-stu-id="92ca5-147">![Scaling out the tracking databases](../technical-guides/media/4fc1d448-2a6c-4cea-ac17-96c1263dfb68.gif "4fc1d448-2a6c-4cea-ac17-96c1263dfb68")</span></span>  
  
 <span data-ttu-id="92ca5-148">Si la implementación tiene un alto rendimiento e implica el seguimiento de grandes cantidades de datos para estos mensajes, la sobrecarga de seguimiento podría consumir una gran cantidad de recursos en el equipo que está ejecutando [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="92ca5-148">If your deployment has high throughput and involves tracking lots of data for these messages, the tracking overhead could potentially consume lots of resources on the computer that is running [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)].</span></span> <span data-ttu-id="92ca5-149">Si se produce esta situación y continúa una alta tasa de mensajes entrantes, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] llega a un punto donde no puede procesar mensajes nuevos porque los recursos necesarios para realizar el seguimiento de mensajes son mayores que los recursos necesarios para ejecutar el otro [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] componentes (por ejemplo, recibir mensajes y almacenarlos en la base de datos de cuadro de mensajes).</span><span class="sxs-lookup"><span data-stu-id="92ca5-149">If this situation occurs and a high rate of incoming messages continues, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] reaches a point where it cannot process new messages because the resources required to track messages are greater than the resources required to run the other [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] components (such as receiving messages and persisting them to the MessageBox database).</span></span>  
  
 <span data-ttu-id="92ca5-150">Para mejorar el rendimiento y la seguridad, se recomienda dedicar un host a las operaciones de seguimiento que no contenga otros elementos (como ubicaciones de recepción, orquestaciones o canalizaciones) y deshabilitar el seguimiento en los hosts de recepción, procesamiento y envío.</span><span class="sxs-lookup"><span data-stu-id="92ca5-150">To improve performance and security, we recommend that you dedicate a host for tracking that does not contain any other items (such as receive locations, orchestrations, or pipelines) and that you disable tracking from the receiving, processing, and sending hosts.</span></span> <span data-ttu-id="92ca5-151">Para proporcionar alta disponibilidad al host de seguimiento, cree más de una instancia de este host.</span><span class="sxs-lookup"><span data-stu-id="92ca5-151">To provide high availability for the tracking host, create more than one host instance of the tracking host.</span></span> <span data-ttu-id="92ca5-152">Para obtener más información acerca de cómo crear un host de seguimiento, vea [cómo crear un nuevo Host](http://go.microsoft.com/fwlink/?LinkId=156825) (http://go.microsoft.com/fwlink/?LinkId=156825) en [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] ayuda.</span><span class="sxs-lookup"><span data-stu-id="92ca5-152">For more information about creating a tracking host, see [How to Create a New Host](http://go.microsoft.com/fwlink/?LinkId=156825) (http://go.microsoft.com/fwlink/?LinkId=156825) in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Help.</span></span>  
  
 <span data-ttu-id="92ca5-153">Por cada base de datos de cuadro de mensajes, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] utiliza solo una instancia de host de seguimiento para mover los mensajes de la base de datos de cuadro de mensajes a la base de datos de seguimiento de BizTalk (BizTalkDTADb).</span><span class="sxs-lookup"><span data-stu-id="92ca5-153">For each MessageBox database, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] uses only one tracking host instance to move messages from the MessageBox database to the BizTalk Tracking database (BizTalkDTADb).</span></span> <span data-ttu-id="92ca5-154">Si otros equipos ejecutan instancias de host de seguimiento, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] ajusta automáticamente el control de cada base de datos de cuadro de mensajes a una instancia independiente del host de seguimiento.</span><span class="sxs-lookup"><span data-stu-id="92ca5-154">If additional computers run instances of the tracking host, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] automatically scales out the handling of each MessageBox database to a separate instance of the tracking host.</span></span> <span data-ttu-id="92ca5-155">Si el número de bases de datos de cuadro de mensajes es mayor que el número de instancias del host de seguimiento, una o varias instancias del host de seguimiento recibirán más de una base de datos de cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="92ca5-155">If the number of MessageBox databases is larger than the number of tracking host instances, one or more tracking host instances will service more than one MessageBox database.</span></span>  
  
 <span data-ttu-id="92ca5-156">Para proporcionar alta disponibilidad para la base de datos de seguimiento de BizTalk, utilice la agrupación en clústeres de Windows para configurar dos equipos de base de datos que se ejecutan [!INCLUDE[btsSQLServer2008R2](../includes/btssqlserver2008r2-md.md)] o [!INCLUDE[btsSQLServer2008](../includes/btssqlserver2008-md.md)] en una configuración activo/pasivo.</span><span class="sxs-lookup"><span data-stu-id="92ca5-156">To provide high availability for the BizTalk Tracking database, use Windows Clustering to configure two database computers that are running [!INCLUDE[btsSQLServer2008R2](../includes/btssqlserver2008r2-md.md)] or [!INCLUDE[btsSQLServer2008](../includes/btssqlserver2008-md.md)] in an active/passive configuration.</span></span>  
  
## <a name="providing-high-availability-for-the-bam-databases"></a><span data-ttu-id="92ca5-157">Proporcionar una alta disponibilidad a las bases de datos de BAM</span><span class="sxs-lookup"><span data-stu-id="92ca5-157">Providing High Availability for the BAM Databases</span></span>  
 <span data-ttu-id="92ca5-158">*Supervisión de la actividad de negocio* (BAM) proporciona visibilidad a los procesos empresariales independiente de la implementación de TI o en una implementación de TI heterogénea.</span><span class="sxs-lookup"><span data-stu-id="92ca5-158">*Business Activity Monitoring* (BAM) provides visibility into business processes independent of the IT implementation or across a heterogeneous IT implementation.</span></span> <span data-ttu-id="92ca5-159">Implementación de BAM [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] bases de datos (base de datos de esquema de estrella de BAM, base de datos de importación principal de BAM y base de datos de archivo de BAM) y la base de datos de análisis de BAM almacenan los datos de actividad de negocio que son diferentes de los datos de supervisión operativos.</span><span class="sxs-lookup"><span data-stu-id="92ca5-159">The BAM [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] databases (BAM Star Schema database, BAM Primary Import database, and BAM Archive database) and the BAM Analysis database store the business activity data that is different from the operational monitoring data.</span></span> <span data-ttu-id="92ca5-160">El siguiente diagrama muestra la infraestructura de la base de datos BAM.</span><span class="sxs-lookup"><span data-stu-id="92ca5-160">The following diagram shows the BAM database infrastructure.</span></span>  
  
 <span data-ttu-id="92ca5-161">![Infraestructura de base de datos BAM](../technical-guides/media/769c3b7c-fe16-4260-967e-6af003c4f08d.gif "769c3b7c-fe16-4260-967e-6af003c4f08d")</span><span class="sxs-lookup"><span data-stu-id="92ca5-161">![BAM database infrastructure](../technical-guides/media/769c3b7c-fe16-4260-967e-6af003c4f08d.gif "769c3b7c-fe16-4260-967e-6af003c4f08d")</span></span>  
  
 <span data-ttu-id="92ca5-162">Para garantizar que la infraestructura de BAM tiene una alta disponibilidad, realice lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="92ca5-162">To make sure your BAM infrastructure is highly available, do the following:</span></span>  
  
-   <span data-ttu-id="92ca5-163">**Agrupe la base de datos de importación principal de BAM y la base de datos de análisis de BAM.**</span><span class="sxs-lookup"><span data-stu-id="92ca5-163">**Cluster the BAM Primary Import database and the BAM Analysis database.**</span></span> <span data-ttu-id="92ca5-164">La base de datos de importación principal de BAM es el centro del sistema de Supervisión de la actividad económica.</span><span class="sxs-lookup"><span data-stu-id="92ca5-164">The BAM Primary Import database is the center of the Business Activity Monitoring system.</span></span> <span data-ttu-id="92ca5-165">Por tanto, es importante aportar a esta base de datos una alta disponibilidad utilizando Organización por clústeres de Windows y seguir las dos recomendaciones siguientes para evitar que se llene esta base de datos.</span><span class="sxs-lookup"><span data-stu-id="92ca5-165">It is therefore important that you make this database highly available by using Windows Clustering and that you follow the next two recommendations to prevent this database from filling up.</span></span> <span data-ttu-id="92ca5-166">La base de datos de análisis de BAM es una base de datos de Analysis Services que almacena los datos que utilizan los analistas empresariales para crear agregaciones de actividad y cubos OLAP y, por tanto, cualquier tiempo de inactividad de esta base de datos afecta a la productividad.</span><span class="sxs-lookup"><span data-stu-id="92ca5-166">The BAM Analysis database is an Analysis Services database that stores the data that business analysts use to build activity aggregations and OLAP cubes, and therefore any downtime of this database affects their productivity.</span></span> <span data-ttu-id="92ca5-167">Si bien no es necesario incluir en el clúster de la base de datos de archivo de BAM, se recomienda que supervise el registro de eventos de errores al ejecutar los paquetes de SQL Server Integration Services (SSIS) para asegurarse de que los datos se transfieren correctamente y para supervisar el tamaño de la base de datos por lo que puede reemplazarlo antes de que se llene la.</span><span class="sxs-lookup"><span data-stu-id="92ca5-167">While you do not have to cluster the BAM Archive database, we recommend that you monitor the event log for errors when the SQL Server Integration Services (SSIS) packages run to make sure the data has been transferred successfully, and to monitor the size of the database so that you can replace it before it fills up.</span></span>  
  
-   <span data-ttu-id="92ca5-168">**Definir una ventana en línea.**</span><span class="sxs-lookup"><span data-stu-id="92ca5-168">**Define an online window.**</span></span> <span data-ttu-id="92ca5-169">Para permitir un mejor rendimiento y evitar tiempos de inactividad, BAM realiza particiones de los datos de la base de datos de importación principal de BAM en tablas basadas en la marca de tiempo cuando se haya completado la actividad.</span><span class="sxs-lookup"><span data-stu-id="92ca5-169">To allow for better performance and avoid downtime, BAM partitions the data in the BAM Primary Import database into tables based on the timestamp when the activity was completed.</span></span> <span data-ttu-id="92ca5-170">BAM consigue esto intercambiando con regularidad la tabla llena con otra tabla vacía de idéntico formato.</span><span class="sxs-lookup"><span data-stu-id="92ca5-170">BAM achieves this by regularly swapping the completed table with another empty table of identical format.</span></span> <span data-ttu-id="92ca5-171">Una vez que BAM hace esto, las demás actividades finalizadas pasan a la nueva partición (tabla), mientras que BAM mantiene las particiones antiguas durante el tiempo definido en la ventana en línea.</span><span class="sxs-lookup"><span data-stu-id="92ca5-171">After BAM does this, the additional completed activities go into the new partition (table), while BAM keeps the old partitions for the time defined in the online window.</span></span> <span data-ttu-id="92ca5-172">Debe definir una ventana en línea para garantizar que el número de particiones de la base de datos de importación principal de BAM no llegue a ser muy alto.</span><span class="sxs-lookup"><span data-stu-id="92ca5-172">You must define an online window to make sure the number of partitions in the BAM Primary Import database does not grow too large.</span></span> <span data-ttu-id="92ca5-173">Para obtener más información sobre la programación de windows en línea, consulte [archivar datos de la base de datos de importación principal](http://go.microsoft.com/fwlink/?LinkId=156826) (http://go.microsoft.com/fwlink/?LinkId=156826) en [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] ayuda.</span><span class="sxs-lookup"><span data-stu-id="92ca5-173">For more information about scheduling online windows, see [Archiving Primary Import Database Data](http://go.microsoft.com/fwlink/?LinkId=156826) (http://go.microsoft.com/fwlink/?LinkId=156826) in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Help.</span></span>  
  
-   <span data-ttu-id="92ca5-174">**Programar paquetes SSIS para ejecutar periódicamente.**</span><span class="sxs-lookup"><span data-stu-id="92ca5-174">**Schedule SSIS packages to run periodically.**</span></span> <span data-ttu-id="92ca5-175">A la hora de definir una ventana en línea, asegúrese de que no se llena la base de datos de importación principal de BAM con particiones de actividad antiguas.</span><span class="sxs-lookup"><span data-stu-id="92ca5-175">Defining an online window makes sure your BAM Primary Import database does not fill up with old activity partitions.</span></span> <span data-ttu-id="92ca5-176">También debe programar paquetes SSIS para que se ejecute periódicamente para crear una nueva partición para los datos de actividad y mover los datos de particiones antiguas de la base de datos de importación principal de BAM a la base de datos de archivo de BAM.</span><span class="sxs-lookup"><span data-stu-id="92ca5-176">You must also schedule SSIS packages to run periodically to create a new partition for the activity data and to move the data from the old partitions in the BAM Primary Import database into the BAM Archive database.</span></span> <span data-ttu-id="92ca5-177">Para obtener más información sobre la programación de paquetes SSIS, vea [programación de SQL Server Integration Services Packages](http://go.microsoft.com/fwlink/?LinkId=156827) (http://go.microsoft.com/fwlink/?LinkId=156827) en [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] ayuda.</span><span class="sxs-lookup"><span data-stu-id="92ca5-177">For more information about scheduling SSIS packages, see [Scheduling SQL Server Integration Services Packages](http://go.microsoft.com/fwlink/?LinkId=156827) (http://go.microsoft.com/fwlink/?LinkId=156827) in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Help.</span></span>  
  
-   <span data-ttu-id="92ca5-178">**Cuidadosamente elija pequeños conjuntos de elementos de datos (los puntos de comprobación) y evite incluir datos innecesarios al definir una actividad.**</span><span class="sxs-lookup"><span data-stu-id="92ca5-178">**Carefully choose small sets of data items (checkpoints), and avoid including unnecessary data items when defining an activity.**</span></span>  
  
-   <span data-ttu-id="92ca5-179">**Comprender las ventajas y desventajas entre agregaciones programadas y en tiempo real cuando se diseña las agregaciones.**</span><span class="sxs-lookup"><span data-stu-id="92ca5-179">**Understand the trade-offs between scheduled and real-time aggregations when you design your aggregations.**</span></span> <span data-ttu-id="92ca5-180">Agregaciones en tiempo real se mantienen automáticamente con [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] desencadena y tienen latencia cero.</span><span class="sxs-lookup"><span data-stu-id="92ca5-180">Real-time aggregations are automatically maintained by [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] triggers and have zero latency.</span></span> <span data-ttu-id="92ca5-181">Que son ideales para algunos escenarios de baja latencia de misión crítica, pero incurren en un reducción del rendimiento cuando los eventos se están escribiendo en la base de datos de importación principal de BAM.</span><span class="sxs-lookup"><span data-stu-id="92ca5-181">They are ideal for some mission-critical low-latency scenarios, but they incur a performance cost whenever the events are being written to the BAM Primary Import database.</span></span> <span data-ttu-id="92ca5-182">Agregaciones programadas se basan en paquetes SSIS de elaboración de cubos programados para actualizar sus datos de agregación.</span><span class="sxs-lookup"><span data-stu-id="92ca5-182">Scheduled aggregations rely on scheduled cubing SSIS packages to update their aggregation data.</span></span> <span data-ttu-id="92ca5-183">Su latencia es igual o mayor que el intervalo de programación SSIS, pero en general tienen un impacto menor en el rendimiento en la base de datos de importación principal de BAM.</span><span class="sxs-lookup"><span data-stu-id="92ca5-183">Their latency is equal to or greater than the SSIS schedule interval, but overall they have a smaller performance impact on the BAM Primary Import database.</span></span>  
  
-   <span data-ttu-id="92ca5-184">**Si elige agregaciones programadas, asegúrese de que programar la elaboración de cubos SSIS para que se ejecute con más frecuencia que el archivo SSIS.**</span><span class="sxs-lookup"><span data-stu-id="92ca5-184">**If you choose scheduled aggregations, make sure you schedule the cubing SSIS to run more frequently than the archiving SSIS.**</span></span> <span data-ttu-id="92ca5-185">Esto es porque el archivo SSIS no moverá los datos de actividad que se han procesado para agregación programada a la base de datos de archivo de BAM.</span><span class="sxs-lookup"><span data-stu-id="92ca5-185">This is because the archiving SSIS will not move the activity data that has been processed for scheduled aggregation to the BAM Archive database.</span></span>  
  
-   <span data-ttu-id="92ca5-186">**Habilitar el servicio de Bus de sucesos SAE en varios equipos para obtener la funcionalidad de conmutación por error.**</span><span class="sxs-lookup"><span data-stu-id="92ca5-186">**Enable the BAM Event Bus service in multiple computers to obtain failover functionality.**</span></span>  
  
## <a name="providing-high-availability-for-the-other-biztalk-server-databases"></a><span data-ttu-id="92ca5-187">Proporcionar una alta disponibilidad a las demás bases de datos de BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="92ca5-187">Providing High Availability for the Other BizTalk Server Databases</span></span>  
 <span data-ttu-id="92ca5-188">Para proporcionar alta disponibilidad para los demás [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] bases de datos, configure dos equipos que ejecutan [!INCLUDE[btsSQLServer2008R2](../includes/btssqlserver2008r2-md.md)] o [!INCLUDE[btsSQLServer2008](../includes/btssqlserver2008-md.md)] en un clúster de Windows.</span><span class="sxs-lookup"><span data-stu-id="92ca5-188">To provide high availability for the other [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases, configure two computers that are running [!INCLUDE[btsSQLServer2008R2](../includes/btssqlserver2008r2-md.md)] or [!INCLUDE[btsSQLServer2008](../includes/btssqlserver2008-md.md)] in a Windows cluster.</span></span> <span data-ttu-id="92ca5-189">Estos equipos pueden ejecutarse en una configuración activo/activo o activo/pasivo para obtener redundancia y puede almacenar datos en una unidad compartida (por ejemplo, una RAID 1 + 0 matriz de discos SCSI) o una red de área de almacenamiento (SAN).</span><span class="sxs-lookup"><span data-stu-id="92ca5-189">These computers can run in an active/active or active/passive configuration for redundancy and can store data on a shared drive (such as a RAID 1+0 SCSI disk array) or storage area network (SAN).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="92ca5-190">Vea también</span><span class="sxs-lookup"><span data-stu-id="92ca5-190">See Also</span></span>  
 [<span data-ttu-id="92ca5-191">El servidor BizTalk Server Databases2 de agrupación en clústeres</span><span class="sxs-lookup"><span data-stu-id="92ca5-191">Clustering the BizTalk Server Databases2</span></span>](../technical-guides/clustering-the-biztalk-server-databases2.md)
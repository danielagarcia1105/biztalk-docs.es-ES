---
title: "Instalar y configurar una máquina Virtual de Hyper-V para su uso con BizTalk Server | Documentos de Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 86add392-3cde-432d-95d6-c81d68716537
caps.latest.revision: "18"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 62e612ed35a20646f686bd178fad01771dbd2cce
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
---
# <a name="installing-and-configuring-a-hyper-v-virtual-machine-for-use-with-biztalk-server"></a><span data-ttu-id="d5b84-102">Instalar y configurar una máquina Virtual de Hyper-V para su uso con BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="d5b84-102">Installing and Configuring a Hyper-V Virtual Machine for use with BizTalk Server</span></span>
<span data-ttu-id="d5b84-103">Este tema proporcionan recomendaciones para instalar y configurar BizTalk Server en un entorno de Hyper-V, incluidos las recomendaciones para la instalación y configuración de la máquina virtual de Hyper-V y las recomendaciones para la instalación de BizTalk Server en un Máquina virtual de Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="d5b84-103">This topic provides recommendations for installing and configuring BizTalk Server in a Hyper-V environment, including recommendations for installation and configuration of the Hyper-V virtual machine and recommendations for installing BizTalk Server on a Hyper-V virtual machine.</span></span>  
  
## <a name="installing-and-configuring-hyper-v"></a><span data-ttu-id="d5b84-104">Instalación y configuración de Hyper-V</span><span class="sxs-lookup"><span data-stu-id="d5b84-104">Installing and Configuring Hyper-V</span></span>  
 <span data-ttu-id="d5b84-105">Antes de instalar Hyper-V, consulte [Novedades de Hyper-V en Windows Server 2008 R2](http://go.microsoft.com/fwlink/?LinkID=202427).</span><span class="sxs-lookup"><span data-stu-id="d5b84-105">Before installing Hyper-V, see [What's New in Hyper-V in Windows Server 2008 R2](http://go.microsoft.com/fwlink/?LinkID=202427).</span></span> <span data-ttu-id="d5b84-106">La Guía de ""Microsoft Hyper-V Server 2008 R2 Introducción proporciona detalles acerca de cómo instalar y configurar [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="d5b84-106">The “Microsoft Hyper-V Server 2008 R2 Getting Started” guide provides details about how to install and configure [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] Hyper-V.</span></span> <span data-ttu-id="d5b84-107">La guía está disponible en [http://go.microsoft.com/fwlink/?LinkID=202431](http://go.microsoft.com/fwlink/?LinkID=202431).</span><span class="sxs-lookup"><span data-stu-id="d5b84-107">The guide is available at [http://go.microsoft.com/fwlink/?LinkID=202431](http://go.microsoft.com/fwlink/?LinkID=202431).</span></span>  
  
 <span data-ttu-id="d5b84-108">Documento de "Las directrices para la optimización de rendimiento para Windows Server 2008 R2" proporciona detalles acerca del ajuste de [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] e incluye una sección se centra específicamente en Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="d5b84-108">“The Performance Tuning Guidelines for Windows Server 2008 R2” document provides details on tuning [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] and includes a section specifically focused on Hyper-V.</span></span> <span data-ttu-id="d5b84-109">El documento está disponible en [http://go.microsoft.com/fwlink/?LinkID=202087](http://go.microsoft.com/fwlink/?LinkID=202087).</span><span class="sxs-lookup"><span data-stu-id="d5b84-109">The document is available at [http://go.microsoft.com/fwlink/?LinkID=202087](http://go.microsoft.com/fwlink/?LinkID=202087).</span></span>  
  
### <a name="hyper-v-platform-prerequisites"></a><span data-ttu-id="d5b84-110">Requisitos previos de plataforma de Hyper-V</span><span class="sxs-lookup"><span data-stu-id="d5b84-110">Hyper-V Platform Prerequisites</span></span>  
 <span data-ttu-id="d5b84-111">Hyper-V es un rol de servidor disponible para todas las ediciones de y de 64 bits [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] son solo de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="d5b84-111">Hyper-V is a server role available for 64-bit and all editions of  [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] are 64-bit only.</span></span> <span data-ttu-id="d5b84-112">Además, el hardware físico debe admitir virtualización asistida por hardware.</span><span class="sxs-lookup"><span data-stu-id="d5b84-112">Additionally, the physical hardware must support hardware assisted virtualization.</span></span> <span data-ttu-id="d5b84-113">Esto significa que el procesador debe ser compatible con Intel Virtualization Technology (Intel VT) o tecnología de AMD Virtualization (AMD-V), el BIOS del sistema debe admitir la prevención de ejecución de datos (DEP) y DEP debe estar habilitada.</span><span class="sxs-lookup"><span data-stu-id="d5b84-113">This means the processor must be compatible with Intel Virtualization Technology (Intel VT) or AMD Virtualization (AMD-V) technology, the system BIOS must support Data Execution Prevention (DEP), and DEP must be enabled.</span></span> <span data-ttu-id="d5b84-114">En concreto, debe habilitar el bit XD de Intel (bit de desactivación de ejecución) o el bit NX de AMD (bit no ejecutar).</span><span class="sxs-lookup"><span data-stu-id="d5b84-114">Specifically, you must enable the Intel XD bit (execute disable bit) or AMD NX bit (no execute bit).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="d5b84-115">Después de habilitar estas opciones en el BIOS del sistema, apague el equipo completamente y, a continuación, reinicie el equipo para asegurarse de que se aplica esta configuración.</span><span class="sxs-lookup"><span data-stu-id="d5b84-115">After enabling these options in the system BIOS, turn off the computer completely and then restart the computer to ensure that these settings are applied.</span></span>  
  
#### <a name="determining-hardware-requirements"></a><span data-ttu-id="d5b84-116">Determinar los requisitos de Hardware</span><span class="sxs-lookup"><span data-stu-id="d5b84-116">Determining Hardware Requirements</span></span>  
 <span data-ttu-id="d5b84-117">Debido a las demandas de consolidación de servidores, servidores de Hyper-V tienden a consumir más CPU y memoria y requieren mayor ancho de banda de E/S de disco que los servidores físicos con cargas informáticos comparables.</span><span class="sxs-lookup"><span data-stu-id="d5b84-117">Due to the demands of server consolidation, Hyper-V servers tend to consume more CPU and memory, and require greater disk I/O bandwidth than physical servers with comparable computing loads.</span></span> <span data-ttu-id="d5b84-118">Para implementar un entorno que satisfará las expectativas, tenga en cuenta los factores siguientes para determinar los requisitos exactos de hardware del servidor.</span><span class="sxs-lookup"><span data-stu-id="d5b84-118">In order to deploy an environment that will meet expectations, consider the factors below to determine the exact hardware requirements of your server.</span></span>  
  
##### <a name="storage-configuration-options"></a><span data-ttu-id="d5b84-119">Opciones de configuración de almacenamiento</span><span class="sxs-lookup"><span data-stu-id="d5b84-119">Storage Configuration Options</span></span>  
 <span data-ttu-id="d5b84-120">El hardware de almacenamiento debe proporcionar suficiente capacidad de almacenamiento y ancho de banda de E/S para satisfacer las necesidades actuales y futuras de las máquinas virtuales que se va a hospedar.</span><span class="sxs-lookup"><span data-stu-id="d5b84-120">The storage hardware should provide sufficient I/O bandwidth and storage capacity to meet the current and future needs of the virtual machines that you plan to host.</span></span> <span data-ttu-id="d5b84-121">No hay una solución de compromiso al elegir la configuración de almacenamiento para Hyper-V entre el uso de la capacidad y el rendimiento que puede proporcionar.</span><span class="sxs-lookup"><span data-stu-id="d5b84-121">There is a trade-off when choosing the storage configuration for Hyper-V between capacity usage and the performance it can provide.</span></span>  
  
 <span data-ttu-id="d5b84-122">Al planear la configuración de almacenamiento, tenga en cuenta los requisitos del entorno que se va a aprovisionar.</span><span class="sxs-lookup"><span data-stu-id="d5b84-122">When planning storage configuration, consider the requirements of the environment you are provisioning.</span></span> <span data-ttu-id="d5b84-123">Los requisitos de producción, el entorno de preproducción y entornos de desarrollo pueden diferir considerablemente.</span><span class="sxs-lookup"><span data-stu-id="d5b84-123">The requirements for production, pre-production, and development environments may differ considerably.</span></span>  
  
 <span data-ttu-id="d5b84-124">Si va a implementar una producción [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] entorno en Hyper-V, el rendimiento será un requisito fundamental.</span><span class="sxs-lookup"><span data-stu-id="d5b84-124">If you are deploying a production [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] environment on Hyper-V, performance will be a key requirement.</span></span> <span data-ttu-id="d5b84-125">Para evitar la contención de E/S en los sistemas de producción ocupado de disco, instalar integration services en el sistema operativo del host y el cliente y configuración de discos en volúmenes de datos con la controladora SCSI sintética.</span><span class="sxs-lookup"><span data-stu-id="d5b84-125">To avoid disk I/O contention on busy production systems, install integration services on both the host and guest operating system and configure disks for data volumes with the synthetic SCSI controller.</span></span> <span data-ttu-id="d5b84-126">Para las cargas de trabajo de E/S de almacenamiento de alto rendimiento que abarcan varias unidades de datos, cada disco duro virtual debe conectarse a una controladora SCSI sintética independiente para mejorar el rendimiento general.</span><span class="sxs-lookup"><span data-stu-id="d5b84-126">For highly intensive storage I/O workloads that span multiple data drives, each VHD should be attached to a separate synthetic SCSI controller for better overall performance.</span></span> <span data-ttu-id="d5b84-127">Además, cada disco duro virtual debe almacenarse en discos físicos separados.</span><span class="sxs-lookup"><span data-stu-id="d5b84-127">In addition, each VHD should be stored on separate physical disks.</span></span> <span data-ttu-id="d5b84-128">Para obtener más información acerca de cómo configurar los discos de datos de volúmenes con la controladora SCSI sintético consulte la sección "Optimizar el rendimiento de disco" del tema [lista de comprobación: optimizar el rendimiento en Hyper-V](~/technical-guides/checklist-optimizing-performance-on-hyper-v.md).</span><span class="sxs-lookup"><span data-stu-id="d5b84-128">For more information about configuring disks for data volumes with the synthetic SCSI controller see the “Optimize Disk Performance” section of the topic [Checklist: Optimizing Performance on Hyper-V](~/technical-guides/checklist-optimizing-performance-on-hyper-v.md).</span></span>  
  
 <span data-ttu-id="d5b84-129">Por lo general, los entornos de desarrollo no tiene requisitos de rendimiento rigurosas ya que lo que maximiza la utilización de recursos tiende a ser la prioridad principal.</span><span class="sxs-lookup"><span data-stu-id="d5b84-129">Typically, development environments do not have stringent performance requirements since maximizing resource utilization tends to be the main priority.</span></span> <span data-ttu-id="d5b84-130">Para entornos de desarrollo el rendimiento proporcionado al hospedar varios archivos de disco duro virtual en una sola unidad física es normalmente aceptable.</span><span class="sxs-lookup"><span data-stu-id="d5b84-130">For development environments the performance provided when hosting multiple VHD files on a single physical drive is generally acceptable.</span></span>  
  
 <span data-ttu-id="d5b84-131">Hyper-V admite distintos tipos de opciones de almacenamiento de disco.</span><span class="sxs-lookup"><span data-stu-id="d5b84-131">Hyper-V supports several different types of storage disk options.</span></span> <span data-ttu-id="d5b84-132">Cada una de las opciones de almacenamiento puede adjuntarse a través de una controladora IDE o SCSI a la máquina.</span><span class="sxs-lookup"><span data-stu-id="d5b84-132">Each of the storage options can be attached via an IDE or SCSI controller to the machine.</span></span> <span data-ttu-id="d5b84-133">Una de las posible ventajas del uso de la controladora SCSI en la controladora IDE es que sólo funcionará correctamente si se instalaron las versiones correctas de los componentes de integración de sistema operativo en la máquina virtual invitada.</span><span class="sxs-lookup"><span data-stu-id="d5b84-133">A potential benefit of using the SCSI controller over the IDE controller is that it will only work correctly if the correct versions of the operating system integration components have been installed on the guest virtual machine.</span></span> <span data-ttu-id="d5b84-134">Se trata de un método sencillo para garantizar que están instalados los componentes de integración de sistema operativo correcto en el sistema operativo invitado.</span><span class="sxs-lookup"><span data-stu-id="d5b84-134">This is a straightforward method for ensuring that correct operating system integration components are installed on the guest operating system.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="d5b84-135">A diferencia de las versiones anteriores de la tecnología de virtualización de Microsoft, no hay ninguna diferencia de rendimiento entre el uso de una controladora IDE virtual o una controladora SCSI virtual al tener acceso a los discos duros virtuales.</span><span class="sxs-lookup"><span data-stu-id="d5b84-135">Unlike previous versions of Microsoft virtualization technology, there is no performance difference between using a virtual IDE controller or a virtual SCSI controller when accessing virtual hard disks.</span></span>  
  
 <span data-ttu-id="d5b84-136">Para las actividades de lectura y escritura intensivas, como hospeda [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] bases de datos, la opción de disco de acceso directo proporciona ventajas de rendimiento incremental sobre la unidad de disco duro virtual (VHD) los discos fijos.</span><span class="sxs-lookup"><span data-stu-id="d5b84-136">For intensive read-write activities, such as hosting [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] databases, the passthrough disk option provides incremental performance advantages over fixed virtual hard drive (VHD) disks.</span></span> <span data-ttu-id="d5b84-137">La opción de acceso directo permite que la máquina virtual para tener acceso directo en el disco físico y omite el sistema de archivos NTFS en la partición raíz pero no admite ciertas funciones de los discos virtuales, como agrupación en clústeres e instantáneas de máquina Virtual soporte técnico.</span><span class="sxs-lookup"><span data-stu-id="d5b84-137">The passthrough option permits the virtual machine to have direct access to the physical disk and bypasses the NTFS file system in the root partition but does not support certain functionality of virtual disks, such as Virtual machine snapshots and clustering support.</span></span> <span data-ttu-id="d5b84-138">Por lo tanto, no se recomienda el uso de la característica de disco de acceso directo en un entorno de BizTalk o SQL Server porque las ventajas de rendimiento mínimas son más que se desplaza por la funcionalidad que falta.</span><span class="sxs-lookup"><span data-stu-id="d5b84-138">Therefore use of the passthrough disk feature is not recommended in a BizTalk or SQL Server environment because the marginal performance benefits are more than offset by the missing functionality.</span></span>  
  
 <span data-ttu-id="d5b84-139">En la tabla siguiente se resume las ventajas y desventajas de las opciones de almacenamiento de Hyper-V disponibles:.</span><span class="sxs-lookup"><span data-stu-id="d5b84-139">The following table summarizes the advantages and disadvantages of available Hyper-V storage options:.</span></span>  
  
|<span data-ttu-id="d5b84-140">**Tipo de almacenamiento de Hyper-V**</span><span class="sxs-lookup"><span data-stu-id="d5b84-140">**Hyper-V Storage Type**</span></span>|<span data-ttu-id="d5b84-141">**Profesionales de TI**</span><span class="sxs-lookup"><span data-stu-id="d5b84-141">**Pros**</span></span>|<span data-ttu-id="d5b84-142">**Inconvenientes**</span><span class="sxs-lookup"><span data-stu-id="d5b84-142">**Cons**</span></span>|<span data-ttu-id="d5b84-143">**Consideraciones para el servidor BizTalk Server**</span><span class="sxs-lookup"><span data-stu-id="d5b84-143">**Considerations for BizTalk Server**</span></span>|  
|-------------------------------|--------------|--------------|-------------------------------------------|  
|<span data-ttu-id="d5b84-144">**Discos de tamaño fijo**</span><span class="sxs-lookup"><span data-stu-id="d5b84-144">**Fixed size disks**</span></span>|<span data-ttu-id="d5b84-145">Funciona mejor que un disco duro virtual dinámico porque el archivo VHD se inicializa en su tamaño máximo posible cuando se crea en la unidad de disco duro física.</span><span class="sxs-lookup"><span data-stu-id="d5b84-145">Performs better than a dynamic VHD because the VHD file is initialized at its maximum possible size when it is created on the physical hard drive.</span></span><br /><br /> <span data-ttu-id="d5b84-146">Esto tiene fragmentación menor probablemente y, por lo tanto, se mitiga escenarios donde una E/S única se divide en varias entradas y salidas.</span><span class="sxs-lookup"><span data-stu-id="d5b84-146">This makes fragmentation less likely and, therefore, mitigates scenarios where a single I/O is split into multiple I/Os.</span></span> <span data-ttu-id="d5b84-147">Esto tiene la menor sobrecarga de CPU de los tipos de disco duro virtual porque las lecturas y escrituras no es necesario buscar la asignación del bloque.</span><span class="sxs-lookup"><span data-stu-id="d5b84-147">This has the lowest CPU overhead of the VHD types because reads and writes do not need to look up the mapping of the block.</span></span>|<span data-ttu-id="d5b84-148">Requiere la asignación de la cantidad total de espacio en disco por adelantado.</span><span class="sxs-lookup"><span data-stu-id="d5b84-148">Requires allocation of the full amount of disk space up-front.</span></span>|<span data-ttu-id="d5b84-149">Utilice para volúmenes del sistema operativo en [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] y [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d5b84-149">Use for operating system volumes on [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)].</span></span> <span data-ttu-id="d5b84-150">**Importante:** el disco de inicio de una partición de invitado Hyper-V debe asociarse a un controlador IDE.</span><span class="sxs-lookup"><span data-stu-id="d5b84-150">**Important:**  The startup disk of a Hyper-V guest partition must be attached to an IDE contoller.</span></span>|  
|<span data-ttu-id="d5b84-151">**Discos de expansión dinámica**</span><span class="sxs-lookup"><span data-stu-id="d5b84-151">**Dynamically expanding disks**</span></span>|<span data-ttu-id="d5b84-152">Aumenta el tamaño del archivo VHD para el tamaño especificado al crear el disco, tal y como se almacenan más datos en la propia máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="d5b84-152">The size of the VHD file increases to the size specified when creating the disk, as more data is stored on the virtual machine itself.</span></span> <span data-ttu-id="d5b84-153">Esto es útil para el uso más eficaz del almacenamiento disponible.</span><span class="sxs-lookup"><span data-stu-id="d5b84-153">This accommodates the most efficient use of available storage.</span></span>|<span data-ttu-id="d5b84-154">No lleva a cabo, así como un disco duro virtual de tamaño fijo.</span><span class="sxs-lookup"><span data-stu-id="d5b84-154">Does not perform as well as a fixed size VHD.</span></span> <span data-ttu-id="d5b84-155">Esto es porque los bloques en el disco de inician como bloques de llenado con ceros pero no están respaldados por cualquier espacio real en el archivo de disco duro virtual.</span><span class="sxs-lookup"><span data-stu-id="d5b84-155">This is because the blocks in the disk start as zeroed blocks but are not backed by any actual space in the VHD file.</span></span> <span data-ttu-id="d5b84-156">Lee de estos bloques devueltos un bloque de ceros.</span><span class="sxs-lookup"><span data-stu-id="d5b84-156">Reads from such blocks return a block of zeros.</span></span> <span data-ttu-id="d5b84-157">Cuando un bloque es el primero escribe, la pila de virtualización debe asignar espacio en el archivo de disco duro virtual para el bloque y, a continuación, actualizar los metadatos correspondientes.</span><span class="sxs-lookup"><span data-stu-id="d5b84-157">When a block is first written to, the virtualization stack must allocate space within the VHD file for the block and then update the corresponding metadata.</span></span> <span data-ttu-id="d5b84-158">Además de esto cada vez que se hace referencia a un bloque existente la asignación de bloque debe buscar en los metadatos.</span><span class="sxs-lookup"><span data-stu-id="d5b84-158">In addition to this every time an existing block is referenced the block mapping must be looked up in the metadata.</span></span> <span data-ttu-id="d5b84-159">Esto aumenta el número de lectura y las actividades de escritura, lo que a su vez hace que aumentará el uso de CPU.</span><span class="sxs-lookup"><span data-stu-id="d5b84-159">This increases the number of read and write activities which in turn causes increased CPU utilization.</span></span><br /><br /> <span data-ttu-id="d5b84-160">El crecimiento dinámico también requiere que el administrador del servidor de supervisar la capacidad de disco para asegurarse de que hay suficiente espacio de almacenamiento de disco como el aumento de los requisitos de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="d5b84-160">The dynamic growth also requires that the server administrator monitor disk capacity to ensure that there is sufficient disk storage as the storage requirements increase.</span></span>|<span data-ttu-id="d5b84-161">No lleva a cabo, así como un disco duro virtual de tamaño fijo.</span><span class="sxs-lookup"><span data-stu-id="d5b84-161">Does not perform as well as a fixed size VHD.</span></span><br /><br /> <span data-ttu-id="d5b84-162">Si el rendimiento no es importante, por ejemplo en un entorno de desarrollo, puede tratarse una opción ideal para los discos duros del sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="d5b84-162">If performance is not a concern, for instance in a development environment, this may be a suitable option for the operating system hard drives.</span></span><br /><br /> <span data-ttu-id="d5b84-163">Provoca una sobrecarga adicional de CPU debido a la búsqueda de asignación de bloque.</span><span class="sxs-lookup"><span data-stu-id="d5b84-163">Causes additional CPU overhead due to block mapping lookup.</span></span>|  
|<span data-ttu-id="d5b84-164">**Discos de diferenciación**</span><span class="sxs-lookup"><span data-stu-id="d5b84-164">**Differencing disks**</span></span>|<span data-ttu-id="d5b84-165">Esto una configuración de elementos primarios y secundarios en el disco de diferenciación almacena todos los cambios con respecto a un disco duro virtual base y el disco duro virtual base sigue siendo estática.</span><span class="sxs-lookup"><span data-stu-id="d5b84-165">This a parent-child configuration where the differencing disk stores all changes relative to a base VHD and the base VHD remains static.</span></span> <span data-ttu-id="d5b84-166">Por lo tanto, solo los bloques que son diferentes del elemento primario deben estar almacenados en el disco duro virtual de diferenciación objeto secundario.</span><span class="sxs-lookup"><span data-stu-id="d5b84-166">Therefore only the blocks which are different from the parent need to be stored in the child differencing VHD.</span></span>|<span data-ttu-id="d5b84-167">Puede degradar el rendimiento porque necesita obtener acceso a lo VHD de dinámicos/primario, así como el disco de diferenciación lectura/escritura.</span><span class="sxs-lookup"><span data-stu-id="d5b84-167">Performance can degrade because read/writes need to access the fixed/dynamic parent VHD as well as the differencing disk.</span></span> <span data-ttu-id="d5b84-168">Esto aumenta el uso de CPU y la sobrecarga de E/S de disco.</span><span class="sxs-lookup"><span data-stu-id="d5b84-168">This increases CPU utilization and disk I/O overhead.</span></span>|<span data-ttu-id="d5b84-169">Es necesaria para una gran cantidad de configuración específicos de la máquina [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] las instalaciones y los archivos de disco duro virtual secundarios pueden crecer esencialmente que se reduzcan al mínimo las ventajas de usar la configuración de disco.</span><span class="sxs-lookup"><span data-stu-id="d5b84-169">A large amount of machine specific configuration is required for [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] installations and child VHD files may grow substantially which would minimize the benefits of using this disk configuration.</span></span> <span data-ttu-id="d5b84-170">Lectura desde varios VHD en este escenario implica la sobrecarga de E/S de disco y CPU adicionales.</span><span class="sxs-lookup"><span data-stu-id="d5b84-170">Reading from multiple VHD’s in this scenario incurs additional CPU and disk I/O overhead.</span></span>|  
|<span data-ttu-id="d5b84-171">**Discos de acceso directo**</span><span class="sxs-lookup"><span data-stu-id="d5b84-171">**Passthrough disks**</span></span>|<span data-ttu-id="d5b84-172">Se trata de discos físicos que se establecen en *sin conexión* en la partición raíz y habilitar Hyper-V tenga acceso exclusivo de lectura y escritura en el disco físico.</span><span class="sxs-lookup"><span data-stu-id="d5b84-172">These are physical disks which are set to *offline* in the root partition and enable Hyper-V to have exclusive read-write access to the physical disk.</span></span>|<span data-ttu-id="d5b84-173">Requiere un disco dedicado totalmente o LUN en orden para que se pueda asignar a una máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="d5b84-173">Requires a fully dedicated disk or LUN in order for it to be allocated to a virtual machine.</span></span><br /><br /> <span data-ttu-id="d5b84-174">Un disco físico es más difícil mover entre equipos a los archivos de disco duro virtual.</span><span class="sxs-lookup"><span data-stu-id="d5b84-174">A physical disk is more difficult to move between machines than VHD files.</span></span>|<span data-ttu-id="d5b84-175">Si su [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instancia se está ejecutando en un Hyper-V, es posible que obtenga mejoras incrementales de rendimiento mediante el uso de discos de acceso directo respecto al uso de discos duros virtuales (VHD) fijos para el [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] volúmenes de datos.</span><span class="sxs-lookup"><span data-stu-id="d5b84-175">If your [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instance is running on a Hyper-V, you may obtain incremental performance improvements by using passthrough disks over using fixed virtual hard disks (VHD) for the [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] data volumes.</span></span><br /><br /> <span data-ttu-id="d5b84-176">Si está hospedando local archivo ubicaciones de recepción en [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] o transmisión por secuencias mensajes grandes en el disco durante el procesamiento, es posible que obtenga mejoras de rendimiento incremental con discos de acceso directo respecto al uso de discos duros virtuales (VHD) fijos.</span><span class="sxs-lookup"><span data-stu-id="d5b84-176">If you are hosting local file receive locations on [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] or streaming large messages to disk during processing, you may obtain incremental performance improvements using passthrough disks over using fixed virtual hard disks (VHD).</span></span>|  
  
 <span data-ttu-id="d5b84-177">Para obtener más información acerca de cómo implementar discos y almacenamiento con Hyper-V, consulte [implementar discos y almacenamiento](http://go.microsoft.com/fwlink/?LinkID=142362) (http://go.microsoft.com/fwlink/?LinkID=142362).</span><span class="sxs-lookup"><span data-stu-id="d5b84-177">For more information about implementing disks and storage with Hyper-V see [Implementing Disks and Storage](http://go.microsoft.com/fwlink/?LinkID=142362) (http://go.microsoft.com/fwlink/?LinkID=142362).</span></span>  
  
##### <a name="networking"></a><span data-ttu-id="d5b84-178">Redes</span><span class="sxs-lookup"><span data-stu-id="d5b84-178">Networking</span></span>  
 [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]<span data-ttu-id="d5b84-179">tiende a muestran el uso de red elevado.</span><span class="sxs-lookup"><span data-stu-id="d5b84-179"> tends to exhibit high network utilization.</span></span> <span data-ttu-id="d5b84-180">Por lo tanto, cuando el rendimiento de red es un problema, considere la posibilidad de asignar una tarjeta de red física independiente para cada máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="d5b84-180">Therefore, when network performance is an issue, consider allocating a separate physical network card for each virtual machine.</span></span>  
  
 <span data-ttu-id="d5b84-181">Al configurar una máquina virtual, asegúrese de que usa el adaptador de red en lugar del adaptador de red heredado.</span><span class="sxs-lookup"><span data-stu-id="d5b84-181">When configuring a virtual machine, ensure that you use the Network Adapter instead of the Legacy Network Adapter.</span></span> <span data-ttu-id="d5b84-182">El adaptador de red heredado está destinado a los sistemas operativos que no son compatibles con los componentes de integración.</span><span class="sxs-lookup"><span data-stu-id="d5b84-182">The legacy network adapter is intended for operating systems that do not support integration components.</span></span>  
  
 <span data-ttu-id="d5b84-183">Para medir el rendimiento de red, utilice la **"\Network interfaz \Bytes totales/seg."** y **\Network interfaz (\*) \Output longitud de cola** contadores del monitor de rendimiento en el host de funcionamiento sistema para medir el rendimiento general de la tarjeta de red.</span><span class="sxs-lookup"><span data-stu-id="d5b84-183">To measure network performance use the **“\Network Interface \Bytes Total/sec”** and the **\Network Interface(\*)\Output Queue Length** performance monitor counters on the host operating system to measure overall performance of the network card.</span></span> <span data-ttu-id="d5b84-184">Si ha identificado una red física como está ocupado, use la **"\Hyper-V adaptador de red Virtual (\*) \Bytes/sec"** está contador en el sistema operativo de host para identificar qué adaptadores de red de máquina virtual generar una carga elevada.</span><span class="sxs-lookup"><span data-stu-id="d5b84-184">If a physical network has been identified as being busy, use the **“\Hyper-V Virtual Network Adapter (\*)\Bytes/sec”** counter on the host operating system to identify which virtual machine network adapter(s) is/are generating high load.</span></span>  
  
 <span data-ttu-id="d5b84-185">Para obtener más información acerca de cómo evaluar el rendimiento de red en un entorno de Hyper-V, consulte el **medir el rendimiento de red** sección de [lista de comprobación: medir el rendimiento en Hyper-V](../technical-guides/checklist-measuring-performance-on-hyper-v.md).</span><span class="sxs-lookup"><span data-stu-id="d5b84-185">For more information about evaluating network performance on a Hyper-V environment see the **Measuring Network Performance** section of [Checklist: Measuring Performance on Hyper-V](../technical-guides/checklist-measuring-performance-on-hyper-v.md).</span></span>  
  
##### <a name="cpu"></a><span data-ttu-id="d5b84-186">CPU</span><span class="sxs-lookup"><span data-stu-id="d5b84-186">CPU</span></span>  
 <span data-ttu-id="d5b84-187">Hyper-V es compatible con un número diferente de procesadores virtuales para diferentes sistemas operativos; como se resume en la tabla siguiente.</span><span class="sxs-lookup"><span data-stu-id="d5b84-187">Hyper-V supports different numbers of virtual processors for different guest operating systems; as summarized in the table below.</span></span> <span data-ttu-id="d5b84-188">Para asignar los recursos de CPU máximos para [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)], instálelo en un [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] al sistema operativo invitado, que es compatible con cuatro procesadores virtuales por máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="d5b84-188">To allocate the maximum CPU resources for [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)], install it on a [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] guest operating system,  which supports four virtual processors per virtual machine.</span></span>  
  
 <span data-ttu-id="d5b84-189">Configurar una asignación de 1-1 de procesadores virtuales en los sistemas operativos de invitado y los procesadores lógicos disponibles para el sistema operativo de host para evitar el cambio de contexto excesivo.</span><span class="sxs-lookup"><span data-stu-id="d5b84-189">Configure a 1-1 allocation of virtual processors in the guest operating system(s) to logical processors available to the host operating system to prevent excessive context switching.</span></span> <span data-ttu-id="d5b84-190">Cambio entre los procesadores de contexto excesivo dará como resultado una degradación del rendimiento.</span><span class="sxs-lookup"><span data-stu-id="d5b84-190">Excessive context switching between processors will result in performance degradation.</span></span> <span data-ttu-id="d5b84-191">Para obtener más información sobre la asignación de procesadores virtuales y los procesadores lógicos, vea la sección "Optimizar el rendimiento del procesador" del tema [lista de comprobación: optimizar el rendimiento en Hyper-V](~/technical-guides/checklist-optimizing-performance-on-hyper-v.md).</span><span class="sxs-lookup"><span data-stu-id="d5b84-191">For more information about allocating virtual processors to logical processors, see the “Optimize Processor Performance” section of the topic [Checklist: Optimizing Performance on Hyper-V](~/technical-guides/checklist-optimizing-performance-on-hyper-v.md).</span></span>  
  
 <span data-ttu-id="d5b84-192">El "\Hyper-V hipervisor lógico procesador (_Total)\\% Total de tiempo de ejecución" contador del Monitor de rendimiento mide el uso de recursos global de todos los equipos invitados y el hipervisor en el host de Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="d5b84-192">The “\Hyper-V Hypervisor Logical Processor(_Total)\\% Total Run Time” Performance Monitor counter measures the overall resource utilization of all guest machines and the hypervisor on the Hyper-V host.</span></span> <span data-ttu-id="d5b84-193">Si este valor es superior al 90%, el servidor se está ejecutando en su capacidad máxima; asignar procesadores virtuales adicionales a las máquinas virtuales en este escenario pueden degradar el rendimiento general del sistema y deben evitarse.</span><span class="sxs-lookup"><span data-stu-id="d5b84-193">If this value is above 90%, the server is running at maximum capacity; allocating additional virtual processors to virtual machines in this scenario can degrade overall system performance and should be avoided.</span></span> <span data-ttu-id="d5b84-194">Para obtener más información sobre el uso de los contadores de rendimiento de Hyper-v, consulte el [evaluar el rendimiento del servidor de BizTalk en Hyper-V](../technical-guides/evaluating-biztalk-server-performance-on-hyper-v.md) sección de esta guía.</span><span class="sxs-lookup"><span data-stu-id="d5b84-194">For further details on using the HyperV performance counters, see the [Evaluating BizTalk Server Performance on Hyper-V](../technical-guides/evaluating-biztalk-server-performance-on-hyper-v.md) section of this guide.</span></span>  
  
|<span data-ttu-id="d5b84-195">Sistema operativo</span><span class="sxs-lookup"><span data-stu-id="d5b84-195">Operating system</span></span>|<span data-ttu-id="d5b84-196">Límite de procesador virtual</span><span class="sxs-lookup"><span data-stu-id="d5b84-196">Virtual processor limit</span></span>|  
|----------------------|-----------------------------|  
|[!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)]<span data-ttu-id="d5b84-197">.</span><span class="sxs-lookup"><span data-stu-id="d5b84-197">.</span></span> <span data-ttu-id="d5b84-198">Todas las ediciones de [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] son solo de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="d5b84-198">All editions of [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] are 64-bit only.</span></span>|<span data-ttu-id="d5b84-199">4</span><span class="sxs-lookup"><span data-stu-id="d5b84-199">4</span></span>|  
|[!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)]<span data-ttu-id="d5b84-200">64 bits</span><span class="sxs-lookup"><span data-stu-id="d5b84-200"> 64-bit</span></span>|<span data-ttu-id="d5b84-201">4</span><span class="sxs-lookup"><span data-stu-id="d5b84-201">4</span></span>|  
|[!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)]<span data-ttu-id="d5b84-202">32 bits</span><span class="sxs-lookup"><span data-stu-id="d5b84-202"> 32-bit</span></span>|<span data-ttu-id="d5b84-203">4</span><span class="sxs-lookup"><span data-stu-id="d5b84-203">4</span></span>|  
|<span data-ttu-id="d5b84-204">Windows 7 de 64 bits</span><span class="sxs-lookup"><span data-stu-id="d5b84-204">Windows 7 64-bit</span></span>|<span data-ttu-id="d5b84-205">4</span><span class="sxs-lookup"><span data-stu-id="d5b84-205">4</span></span>|  
|<span data-ttu-id="d5b84-206">Windows 7 de 32 bits</span><span class="sxs-lookup"><span data-stu-id="d5b84-206">Windows 7 32-bit</span></span>|<span data-ttu-id="d5b84-207">4</span><span class="sxs-lookup"><span data-stu-id="d5b84-207">4</span></span>|  
|<span data-ttu-id="d5b84-208">Windows Vista de 64 bits</span><span class="sxs-lookup"><span data-stu-id="d5b84-208">Windows Vista 64-bit</span></span>|<span data-ttu-id="d5b84-209">2</span><span class="sxs-lookup"><span data-stu-id="d5b84-209">2</span></span>|  
|<span data-ttu-id="d5b84-210">Windows Vista 32 bits</span><span class="sxs-lookup"><span data-stu-id="d5b84-210">Windows Vista  32-bit</span></span>|<span data-ttu-id="d5b84-211">2</span><span class="sxs-lookup"><span data-stu-id="d5b84-211">2</span></span>|  
  
> [!NOTE]  
>  <span data-ttu-id="d5b84-212">Para obtener más información acerca de los sistemas operativos invitados compatibles con Hyper-V, consulte [http://go.microsoft.com/fwlink/?LinkID=118347](http://go.microsoft.com/fwlink/?LinkID=118347).</span><span class="sxs-lookup"><span data-stu-id="d5b84-212">For more information about the guest operating systems that are supported on Hyper-V, see [http://go.microsoft.com/fwlink/?LinkID=118347](http://go.microsoft.com/fwlink/?LinkID=118347).</span></span>  
  
##### <a name="memory"></a><span data-ttu-id="d5b84-213">Memoria</span><span class="sxs-lookup"><span data-stu-id="d5b84-213">Memory</span></span>  
 <span data-ttu-id="d5b84-214">El servidor físico requiere suficiente memoria para la partición raíz y las máquinas virtuales que se ejecutan en el servidor.</span><span class="sxs-lookup"><span data-stu-id="d5b84-214">The physical server requires enough memory for the root partition and any virtual machines running on the server.</span></span> <span data-ttu-id="d5b84-215">Durante las pruebas, un mínimo de 2GB de memoria se asignó a la partición raíz y el **memoria/Mbytes disponibles** supervisó contador del monitor de rendimiento para asegurarse de que no se ha producido ninguna presión de memoria.</span><span class="sxs-lookup"><span data-stu-id="d5b84-215">During testing, a minimum of 2GB of memory was allocated to the root partition and the **Memory/Available Mbytes** performance monitor counter was monitored to ensure no memory pressure was experienced.</span></span>  
  
 <span data-ttu-id="d5b84-216">La cantidad de memoria que se debe asignar a cada máquina virtual en un [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] entorno depende de la carga de trabajo y el tipo de procesamiento que se llevará a cabo.</span><span class="sxs-lookup"><span data-stu-id="d5b84-216">The amount of memory that should be allocated to each virtual machine in a [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] environment depends on the workload and type of processing that will be performed.</span></span> <span data-ttu-id="d5b84-217">Hay muchos factores que afectan a los requisitos de memoria de [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] incluidos:</span><span class="sxs-lookup"><span data-stu-id="d5b84-217">There are many factors that affect memory requirements of  [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] including:</span></span>  
  
-   <span data-ttu-id="d5b84-218">Tamaño de los mensajes procesados</span><span class="sxs-lookup"><span data-stu-id="d5b84-218">Size of messages processed</span></span>  
  
-   <span data-ttu-id="d5b84-219">Rendimiento de mensajes</span><span class="sxs-lookup"><span data-stu-id="d5b84-219">Throughput of messages</span></span>  
  
-   <span data-ttu-id="d5b84-220">Diseño de orquestación</span><span class="sxs-lookup"><span data-stu-id="d5b84-220">Orchestration design</span></span>  
  
-   <span data-ttu-id="d5b84-221">Procesamiento de canalización</span><span class="sxs-lookup"><span data-stu-id="d5b84-221">Pipeline processing</span></span>  
  
-   <span data-ttu-id="d5b84-222">Número de hosts de BizTalk que se vaya a ejecutar en la máquina virtual</span><span class="sxs-lookup"><span data-stu-id="d5b84-222">Number of BizTalk hosts that you plan to run within the virtual machine</span></span>  
  
 <span data-ttu-id="d5b84-223">Para obtener una lista completa de los factores que afectan a la memoria, consulte la sección "Los factores de rendimiento" de la Guía de optimizaciones de rendimiento de BizTalk Server en [http://go.microsoft.com/fwlink/?LinkId=122587](http://go.microsoft.com/fwlink/?LinkId=122587).</span><span class="sxs-lookup"><span data-stu-id="d5b84-223">For a comprehensive list of factors that affect memory, see “The Performance Factors” section of the BizTalk Server Performance Optimizations Guide at [http://go.microsoft.com/fwlink/?LinkId=122587](http://go.microsoft.com/fwlink/?LinkId=122587).</span></span>  
  
 <span data-ttu-id="d5b84-224">Supervisar de forma proactiva la **memoria/Mbytes disponibles** contador desde dentro de cada máquina virtual y la propia partición raíz.</span><span class="sxs-lookup"><span data-stu-id="d5b84-224">Proactively monitor the **Memory/Available Mbytes** counter from within each virtual machine and the root partition itself.</span></span> <span data-ttu-id="d5b84-225">Las siguientes directrices de [lista de comprobación: medir el rendimiento en Hyper-V](../technical-guides/checklist-measuring-performance-on-hyper-v.md) debe utilizarse para determinar si hay suficiente memoria física disponible para la máquina virtual y para la partición raíz:</span><span class="sxs-lookup"><span data-stu-id="d5b84-225">The following guidelines from [Checklist: Measuring Performance on Hyper-V](../technical-guides/checklist-measuring-performance-on-hyper-v.md) should be used to determine whether there is enough available physical memory for the virtual machine and for the root partition:</span></span>  
  
-   <span data-ttu-id="d5b84-226">50% de memoria libre disponible o más = correcto</span><span class="sxs-lookup"><span data-stu-id="d5b84-226">50% of free memory available or more = Healthy</span></span>  
  
-   <span data-ttu-id="d5b84-227">25% de memoria libre disponible = Monitor</span><span class="sxs-lookup"><span data-stu-id="d5b84-227">25% of free memory available = Monitor</span></span>  
  
-   <span data-ttu-id="d5b84-228">10% de memoria libre disponible = advertencia</span><span class="sxs-lookup"><span data-stu-id="d5b84-228">10% of free memory available = Warning</span></span>  
  
-   <span data-ttu-id="d5b84-229">Menos del 5% de memoria libre disponible = crítico, se verá afectado negativamente el rendimiento</span><span class="sxs-lookup"><span data-stu-id="d5b84-229">Less than 5% of free memory available = Critical, performance will be adversely affected</span></span>  
  
#### <a name="choosing-root-operating-system-version"></a><span data-ttu-id="d5b84-230">Elegir versión del sistema operativo raíz</span><span class="sxs-lookup"><span data-stu-id="d5b84-230">Choosing Root Operating System Version</span></span>  
 <span data-ttu-id="d5b84-231">Hyper-V se admite en un núcleo de servidor, así como una instalación completa de [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d5b84-231">Hyper-V is supported on a Server Core as well as a full installation of [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)].</span></span> <span data-ttu-id="d5b84-232">Para minimizar la sobrecarga de la partición raíz, instale Hyper-V en una instalación Server Core de [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d5b84-232">To minimize the overhead of the root partition, install Hyper-V on a Server Core installation of [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)].</span></span> <span data-ttu-id="d5b84-233">El rol de Hyper-V puede administrarse de forma remota desde el Administrador de Hyper-V en un sistema diferente.</span><span class="sxs-lookup"><span data-stu-id="d5b84-233">The Hyper-V role can be managed remotely from the Hyper-V Manager on a different system.</span></span> <span data-ttu-id="d5b84-234">Server Core ofrece un menor disco y memoria perfil, por lo tanto, dejando más recursos disponibles para las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="d5b84-234">Server Core provides a smaller disk and memory profile, therefore, leaving more resources available for virtual machines.</span></span> <span data-ttu-id="d5b84-235">Para obtener más información acerca de la opción de instalación Server Core disponible para [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)], consulte [http://go.microsoft.com/fwlink/?LinkID=202439](http://go.microsoft.com/fwlink/?LinkID=202439).</span><span class="sxs-lookup"><span data-stu-id="d5b84-235">For more information about the Server Core installation option available for [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)], see [http://go.microsoft.com/fwlink/?LinkID=202439](http://go.microsoft.com/fwlink/?LinkID=202439).</span></span>  
  
 <span data-ttu-id="d5b84-236">Si opta por usar una instalación completa de [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)], asegúrese de que la partición raíz dedicada únicamente a la función de servidor de Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="d5b84-236">If you choose to use a full installation of [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)], ensure that the root partition is dedicated only to the Hyper-V server role.</span></span> <span data-ttu-id="d5b84-237">Ejecuta otros roles de servidor consumirá memoria, disco, procesador y recursos de red y afectará negativamente al rendimiento.</span><span class="sxs-lookup"><span data-stu-id="d5b84-237">Running additional server roles will consume memory, disk, processor, and network resources and will degrade performance.</span></span>  
  
#### <a name="creating-your-virtual-machines"></a><span data-ttu-id="d5b84-238">Crear las máquinas virtuales</span><span class="sxs-lookup"><span data-stu-id="d5b84-238">Creating Your Virtual Machines</span></span>  
 <span data-ttu-id="d5b84-239">Después de haber instalado y configurado el rol de servidor de Hyper-V, debe crear las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="d5b84-239">After you have installed and configured the Hyper-V server role, you need to create the virtual machines.</span></span> <span data-ttu-id="d5b84-240">Antes de hacerlo, es útil responder a las preguntas siguientes:</span><span class="sxs-lookup"><span data-stu-id="d5b84-240">Before doing this, it is useful to answer the following questions:</span></span>  
  
-   <span data-ttu-id="d5b84-241">¿Qué configuración de almacenamiento usará?</span><span class="sxs-lookup"><span data-stu-id="d5b84-241">What storage configuration will I use?</span></span>  
  
-   <span data-ttu-id="d5b84-242">¿El número de procesadores virtuales admite el sistema operativo invitado?</span><span class="sxs-lookup"><span data-stu-id="d5b84-242">How many virtual processors does the guest operating system support?</span></span>  
  
-   <span data-ttu-id="d5b84-243">¿La cantidad de memoria se va a asignar a la máquina virtual?</span><span class="sxs-lookup"><span data-stu-id="d5b84-243">How much memory will be allocated to the virtual machine?</span></span>  
  
-   <span data-ttu-id="d5b84-244">¿Número de máquinas virtuales puedo ejecutar en el servidor de Hyper-V?</span><span class="sxs-lookup"><span data-stu-id="d5b84-244">How many virtual machines can I run on my Hyper-V Server?</span></span>  
  
-   <span data-ttu-id="d5b84-245">¿Cómo se instalará el sistema operativo en el equipo?</span><span class="sxs-lookup"><span data-stu-id="d5b84-245">How will I install the operating system onto the machine?</span></span>  
  
 <span data-ttu-id="d5b84-246">Para obtener más información acerca de cómo crear y configurar máquinas virtuales, consulte [creación de máquinas virtuales](http://go.microsoft.com/fwlink/?LinkID=202440).</span><span class="sxs-lookup"><span data-stu-id="d5b84-246">For more information about how to create and configure virtual machines, see [Create Virtual Machines](http://go.microsoft.com/fwlink/?LinkID=202440).</span></span>  
  
##### <a name="installing-the-base-operating-system"></a><span data-ttu-id="d5b84-247">Instalar el sistema operativo Base</span><span class="sxs-lookup"><span data-stu-id="d5b84-247">Installing the Base Operating System</span></span>  
 <span data-ttu-id="d5b84-248">Todas las opciones disponibles para una instalación de servidor físico están disponibles en Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="d5b84-248">All the options available for a physical server installation are available in Hyper-V.</span></span> <span data-ttu-id="d5b84-249">Un medio de CD/DVD-ROM de arranque o una imagen ISO puede utilizarse para realizar una instalación manual.</span><span class="sxs-lookup"><span data-stu-id="d5b84-249">A bootable CD/DVD-ROM media or an ISO image can be used to perform a manual installation.</span></span> <span data-ttu-id="d5b84-250">Si la máquina virtual se ha configurado con un adaptador de red conectado a la misma red que un servidor que hospeda las imágenes ISO, se puede realizar una instalación de red.</span><span class="sxs-lookup"><span data-stu-id="d5b84-250">A network installation can be performed if the virtual machine has been configured with a network adapter connected to the same network as a server that hosts the ISO images.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="d5b84-251">Elegir el método de instalación, por motivos de rendimiento es fundamental que instalar los componentes de integración de sistema operativo para cada máquina virtual que se ejecutan en Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="d5b84-251">Whichever installation method is chosen, for performance reasons it is critical the operating system integration components be installed for each virtual machine running under Hyper-V.</span></span> <span data-ttu-id="d5b84-252">Los componentes de integración proporcionan un conjunto de controladores y servicios que permiten que el equipo invitado para llevar a cabo con estos dispositivos.</span><span class="sxs-lookup"><span data-stu-id="d5b84-252">The integration components provide a set of drivers and services that enable the guest machine to perform by using synthetic devices.</span></span> <span data-ttu-id="d5b84-253">Los dispositivos sintéticos evitar la necesidad de dispositivos emulados, que se usan en sistemas operativos que no son compatibles con los componentes de integración.</span><span class="sxs-lookup"><span data-stu-id="d5b84-253">Synthetic devices avoid the need for emulated devices, which are used on operating systems that do not support integration components.</span></span> <span data-ttu-id="d5b84-254">Dispositivos emulados incurrir en comparación con los dispositivos sintéticos mayor sobrecarga del sistema.</span><span class="sxs-lookup"><span data-stu-id="d5b84-254">Emulated devices incur greater system overhead compared to synthetic devices.</span></span>  
  
 <span data-ttu-id="d5b84-255">Para instalar y configurar los equipos utilizados en este laboratorio, se crea una imagen de base inicial en un disco duro virtual de tamaño fijo.</span><span class="sxs-lookup"><span data-stu-id="d5b84-255">To install and configure the machines used in this lab, an initial base image was created on a fixed size VHD.</span></span> <span data-ttu-id="d5b84-256">Lo que supondría una instalación manual de [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d5b84-256">This involved a manual installation of [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)].</span></span> <span data-ttu-id="d5b84-257">Una vez instaladas todas las actualizaciones adecuadas la máquina virtual base se crea la imagen mediante la utilidad de sysprep que se instala con Windows Server 2008, en el directorio %WINDIR%\system32\sysprep.</span><span class="sxs-lookup"><span data-stu-id="d5b84-257">Once all appropriate updates had been installed the base virtual machine was imaged using sysprep utility that is installed with Windows Server 2008, in the %WINDIR%\system32\sysprep directory.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="d5b84-258">Ejecuta Sysprep después de [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] se ha instalado y configurado en el servidor puede realizarse mediante el uso de un archivo de respuesta de Sysprep y secuencias de comandos que se proporcionan con [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d5b84-258">Running Sysprep after [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] has been installed and configured on the server can be accomplished through the use of a Sysprep answer file and scripts provided with [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)].</span></span> <span data-ttu-id="d5b84-259">Estas secuencias de comandos de ejemplo están diseñados para su uso con [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] instalado en [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d5b84-259">These sample scripts are designed for use with [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] installed on [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)].</span></span> <span data-ttu-id="d5b84-260">Para obtener más información, consulte el [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] documentación en línea.</span><span class="sxs-lookup"><span data-stu-id="d5b84-260">For more information see the [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] online documentation.</span></span>  
  
## <a name="installing-and-configuring-biztalk-server"></a><span data-ttu-id="d5b84-261">Instalación y configuración de BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="d5b84-261">Installing and Configuring BizTalk Server</span></span>  
  
-   <span data-ttu-id="d5b84-262">Para minimizar el tiempo necesario para instalar máquinas virtuales, crear una imagen base formado solo por el sistema operativo invitado y los requisitos previos de software.</span><span class="sxs-lookup"><span data-stu-id="d5b84-262">To minimize the time required to install virtual machines, create a base image consisting only of the guest operating system and software prerequisites.</span></span> <span data-ttu-id="d5b84-263">Usar SysPrep para preparar la imagen de disco duro virtual para su reutilización y después basar todas sus máquinas virtuales (VM) en este disco duro virtual.</span><span class="sxs-lookup"><span data-stu-id="d5b84-263">Use SysPrep to prepare the VHD image for reuse, and then base all your virtual machines (VMs) on this VHD.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="d5b84-264">Con [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)], es posible ejecutar Sysprep en una imagen base *después* [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] se ha instalado y configurado en el servidor.</span><span class="sxs-lookup"><span data-stu-id="d5b84-264">With [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)], it is possible to run Sysprep against a base image *after*[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] has been installed and configured on the server.</span></span> <span data-ttu-id="d5b84-265">Esto puede realizarse mediante el uso de un archivo de respuesta de Sysprep y secuencias de comandos que se proporcionan con [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d5b84-265">This can be accomplished through the use of a Sysprep answer file and scripts provided with [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)].</span></span> <span data-ttu-id="d5b84-266">Estas secuencias de comandos de ejemplo están diseñados para su uso con [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] instalado en [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="d5b84-266">These sample scripts are designed for use with [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] installed on   [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] .</span></span> <span data-ttu-id="d5b84-267">Para obtener más información, consulte el [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] documentación en línea.</span><span class="sxs-lookup"><span data-stu-id="d5b84-267">For more information see the [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] online documentation.</span></span>  
    >   
    >  <span data-ttu-id="d5b84-268">La referencia de instalación desatendida de Windows está disponible en [http://go.microsoft.com/fwlink/?LinkId=142364](http://go.microsoft.com/fwlink/?LinkId=142364).</span><span class="sxs-lookup"><span data-stu-id="d5b84-268">The Unattended Windows Setup Reference is available at [http://go.microsoft.com/fwlink/?LinkId=142364](http://go.microsoft.com/fwlink/?LinkId=142364).</span></span>  
  
-   <span data-ttu-id="d5b84-269">Siga las recomendaciones de la "al instalar y configurar BizTalk Server …"</span><span class="sxs-lookup"><span data-stu-id="d5b84-269">Follow the recommendations in the “When Installing and Configuring BizTalk Server…”</span></span> <span data-ttu-id="d5b84-270">sección del tema [lista de comprobación: prácticas recomendadas para instalar y configurar BizTalk Server en Hyper-V](../technical-guides/checklist-best-practices-to-install-and-configure-biztalk-server-on-hyper-v.md).</span><span class="sxs-lookup"><span data-stu-id="d5b84-270">section of the topic [Checklist: Best Practices for Installing and Configuring BizTalk Server on Hyper-V](../technical-guides/checklist-best-practices-to-install-and-configure-biztalk-server-on-hyper-v.md).</span></span>  
  
-   <span data-ttu-id="d5b84-271">Para obtener información sobre la compatibilidad de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] y [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] en un entorno de Hyper-V, consulte [Apéndice C: BizTalk Server y compatibilidad de Hyper-V de SQL Server](../technical-guides/appendix-c-biztalk-server-and-sql-server-hyper-v-supportability.md).</span><span class="sxs-lookup"><span data-stu-id="d5b84-271">For information on the supportability of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] in a Hyper-V environment, see [Appendix C: BizTalk Server and SQL Server Hyper-V Supportability](../technical-guides/appendix-c-biztalk-server-and-sql-server-hyper-v-supportability.md).</span></span>
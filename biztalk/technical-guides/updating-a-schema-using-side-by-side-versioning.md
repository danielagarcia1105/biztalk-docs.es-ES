---
title: Actualización de un esquema con el control de versiones en paralelo | Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: a7360ec5-b5e9-40c7-9a7c-965fcc95ddb0
caps.latest.revision: 2
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: ed0d9d3a204641ac4bccb856e62be15cc2589786
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/27/2018
ms.locfileid: "36976421"
---
# <a name="updating-a-schema-using-side-by-side-versioning"></a><span data-ttu-id="b3463-102">Actualización de un esquema con el control de versiones en paralelo</span><span class="sxs-lookup"><span data-stu-id="b3463-102">Updating a Schema Using Side-by-Side Versioning</span></span>
<span data-ttu-id="b3463-103">Puede realizar el control de versiones en paralelo con esquemas.</span><span class="sxs-lookup"><span data-stu-id="b3463-103">You can perform side-by-side versioning with schemas.</span></span> <span data-ttu-id="b3463-104">Hacerlo agregando una nueva versión del esquema a un ensamblado, actualizar la versión del esquema, dejando el esquema existente (y su versión) sin cambios.</span><span class="sxs-lookup"><span data-stu-id="b3463-104">You do so by adding a new version of the schema to an assembly, upgrading the version of the schema, while leaving the existing schema (and its version) unchanged.</span></span>  
  
 <span data-ttu-id="b3463-105">Si se incrementa la versión del esquema, debe actualizar la referencia al esquema para cualquier instancia y componentes de canalización que lo usan.</span><span class="sxs-lookup"><span data-stu-id="b3463-105">If you increment a schema version, you must update the reference to the schema for any pipeline instances and pipeline components that use it.</span></span> <span data-ttu-id="b3463-106">También debe actualizar las asignaciones que hacen referencia el esquema (o creación nuevas asignaciones), así como todas las orquestaciones que se basan en el esquema.</span><span class="sxs-lookup"><span data-stu-id="b3463-106">You must also update the maps that reference the schema (or create new maps) as well as any orchestrations that rely on the schema.</span></span>  
  
 <span data-ttu-id="b3463-107">Si anula la implementación de un esquema, la versión anterior del esquema, si está disponible, se activará.</span><span class="sxs-lookup"><span data-stu-id="b3463-107">If you undeploy a schema, the previous version of the schema, if available, will become active.</span></span>  
  
## <a name="schema-resolution-in-pipelines"></a><span data-ttu-id="b3463-108">Resolución de esquemas en las canalizaciones</span><span class="sxs-lookup"><span data-stu-id="b3463-108">Schema Resolution in Pipelines</span></span>  
 <span data-ttu-id="b3463-109">Si se agrega a una aplicación un ensamblado que incluye un nuevo esquema con el mismo tipo de mensaje como un esquema existente en el grupo de BizTalk, se usará el esquema con el número de versión más reciente cuando se produce la resolución de esquema en las canalizaciones.</span><span class="sxs-lookup"><span data-stu-id="b3463-109">If you add to an application an assembly that includes a new schema with the same message type as an existing schema in the BizTalk group, the schema with the latest version number will be used when schema resolution occurs in pipelines.</span></span> <span data-ttu-id="b3463-110">Si un tipo de mensaje hace referencia a más de un tipo. NET, esta ambigüedad puede provocar un error de ejecución de canalización.</span><span class="sxs-lookup"><span data-stu-id="b3463-110">If one message type refers to more than one .NET type, this ambiguity may cause pipeline execution failure.</span></span> <span data-ttu-id="b3463-111">Esto se debe a que la búsqueda de esquemas usa el tipo de mensaje, el espacio de nombres de destino y el nombre de raíz de la instancia.</span><span class="sxs-lookup"><span data-stu-id="b3463-111">This is because schema lookup uses message type, the target namespace, and root name of the instance.</span></span> <span data-ttu-id="b3463-112">Este tipo de error puede producirse por las canalizaciones en cualquier aplicación que usa un esquema con el mismo tipo de mensaje que el nuevo esquema.</span><span class="sxs-lookup"><span data-stu-id="b3463-112">This type of failure can occur for pipelines in any application that uses a schema with the same message type as the new schema.</span></span> <span data-ttu-id="b3463-113">Para obtener más información acerca de la resolución de esquemas, vea [resolución de esquemas en componentes de canalización](http://go.microsoft.com/fwlink/?LinkID=154207) (<http://go.microsoft.com/fwlink/?LinkID=154207>) en [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] ayuda.</span><span class="sxs-lookup"><span data-stu-id="b3463-113">For more information about schema resolution, see [Schema Resolution in Pipeline Components](http://go.microsoft.com/fwlink/?LinkID=154207) (<http://go.microsoft.com/fwlink/?LinkID=154207>) in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Help.</span></span>  
  
 <span data-ttu-id="b3463-114">El comportamiento de resolución de esquema para el desensamblador XML puede requerir cambios adicionales después de agregar una nueva versión de un esquema en paralelo con una versión anterior.</span><span class="sxs-lookup"><span data-stu-id="b3463-114">The schema resolution behavior for the XML Disassembler may require additional changes after adding a new version of a schema side by side with an older version.</span></span> <span data-ttu-id="b3463-115">En algunos casos, es posible que desee referencias de codificar de forma rígida en las propiedades de canalización del desensamblador en el Diseñador de canalizaciones a versiones específicas de los esquemas.</span><span class="sxs-lookup"><span data-stu-id="b3463-115">In certain cases, you may want to hard-code references in the pipeline disassembler properties in the Pipeline Designer to specific versions of the schemas.</span></span> <span data-ttu-id="b3463-116">Esto le permite evitar el comportamiento de resolución dinámica, en el que el desensamblador XML determina qué esquema cargar mediante el tipo de mensaje dinámicamente detectados en tiempo de ejecución desde el mensaje contenido XML.</span><span class="sxs-lookup"><span data-stu-id="b3463-116">This enables you to avoid the dynamic resolution behavior, in which the XML Disassembler determines which schema to load by using the message type dynamically discovered at runtime from the message XML content.</span></span>  
  
## <a name="updating-a-schema-in-an-orchestration"></a><span data-ttu-id="b3463-117">Actualización de un esquema en una orquestación</span><span class="sxs-lookup"><span data-stu-id="b3463-117">Updating a Schema in an Orchestration</span></span>  
 <span data-ttu-id="b3463-118">Cuando cambia el esquema asociado con el envío de varios y las formas recepción en una orquestación, puede realizar cambios mucho más fácil estableciendo la propiedad de tipo de mensaje para el mensaje asociado con cada envío o recepción forma para el tipo de mensaje de varias partes, en lugar de Esquema.</span><span class="sxs-lookup"><span data-stu-id="b3463-118">When you change the schema associated with multiple send and receive shapes in an orchestration, you can make changes much easier by setting the Message Type property for the message associated with each send or receive shape to Multi-part Message Type, rather than Schema.</span></span> <span data-ttu-id="b3463-119">A continuación, puede establecer la propiedad Type de la parte del mensaje asociada a cada formas para que sea el mismo esquema.</span><span class="sxs-lookup"><span data-stu-id="b3463-119">You can then set the Type property for the message part associated with each shapes to be the same schema.</span></span> <span data-ttu-id="b3463-120">Al hacerlo, puede cambiar posteriormente el esquema de cambiar la propiedad de tipo para cada parte del mensaje, en lugar de tener que cambiar el tipo de mensaje para cada forma.</span><span class="sxs-lookup"><span data-stu-id="b3463-120">By so doing, you can subsequently change the schema by changing the Type property for each message part, rather than having to change the Message Type for each shape.</span></span> <span data-ttu-id="b3463-121">Para obtener más información sobre cómo realizar cambios más fácil mediante este proceso, consulte el [8 sugerencias y trucos para la programación de BizTalk mejor](http://go.microsoft.com/fwlink/?LinkId=101594) notas del producto (http://go.microsoft.com/fwlink/?LinkId=101594).</span><span class="sxs-lookup"><span data-stu-id="b3463-121">For more information about making changes easier by this process, see the [8 Tips and Tricks for Better BizTalk Programming](http://go.microsoft.com/fwlink/?LinkId=101594) white paper (http://go.microsoft.com/fwlink/?LinkId=101594).</span></span>  
  
## <a name="versioning-schemas"></a><span data-ttu-id="b3463-122">Control de versiones de esquemas</span><span class="sxs-lookup"><span data-stu-id="b3463-122">Versioning Schemas</span></span>  
 <span data-ttu-id="b3463-123">BizTalk Server toma un esquema de la versión más reciente del ensamblado que lo contiene.</span><span class="sxs-lookup"><span data-stu-id="b3463-123">BizTalk Server takes a schema from the most recent version of the assembly containing it.</span></span> <span data-ttu-id="b3463-124">Esto significa que, si crea una nueva versión de un esquema, la nueva versión reemplaza totalmente todas las versiones anteriores del esquema.</span><span class="sxs-lookup"><span data-stu-id="b3463-124">This means that if you create a new version of a schema, the new version completely replaces all previous versions of the schema.</span></span> <span data-ttu-id="b3463-125">Esto funciona bien cuando las transacciones duran poco.</span><span class="sxs-lookup"><span data-stu-id="b3463-125">This works well when transactions are short-lived.</span></span> <span data-ttu-id="b3463-126">Sin embargo, las transacciones en la solución de administración de procesos empresariales son de larga duración: un pedido puede tardar hasta un año para completar.</span><span class="sxs-lookup"><span data-stu-id="b3463-126">However, transactions in the Business Process Management solution are long-lived: an order may take up to a year to complete.</span></span>  
  
 <span data-ttu-id="b3463-127">Para permitir la posibilidad de usar varias versiones de un esquema en uso, cada esquema de la solución incluye un número de versión en su espacio de nombres.</span><span class="sxs-lookup"><span data-stu-id="b3463-127">To allow for the possibility of using multiple versions of a schema being in use, each schema in the solution includes a version number in its namespace.</span></span> <span data-ttu-id="b3463-128">Canalizaciones de BizTalk determinan el tipo de mensaje de un mensaje basándose en el espacio de nombres de destino más el nombre del nodo raíz definido en el esquema.</span><span class="sxs-lookup"><span data-stu-id="b3463-128">BizTalk pipelines determine the message type of a message based on the target namespace plus the root node name defined in the schema.</span></span> <span data-ttu-id="b3463-129">Por ejemplo, el espacio de nombres del esquema Order es el siguiente:</span><span class="sxs-lookup"><span data-stu-id="b3463-129">For example, the namespace for the Order schema is as follows:</span></span>  
  
```  
http://Microsoft.Samples.BizTalk.SouthridgeVideo.Schemas.Order.v1  
```  
  
 <span data-ttu-id="b3463-130">Dado que el espacio de nombres identifica el esquema y la inclusión de la hace de número de versión del espacio de nombres único para el esquema, el nuevo esquema será distinto de la versión anterior.</span><span class="sxs-lookup"><span data-stu-id="b3463-130">Because the namespace identifies the schema, and inclusion of the version number makes the namespace unique to the schema, the new schema will be distinct from the older version.</span></span> <span data-ttu-id="b3463-131">Por tanto, se puede usar un nuevo esquema sin suplantar el esquema anterior.</span><span class="sxs-lookup"><span data-stu-id="b3463-131">Thus, a new schema can be used without supplanting the old schema.</span></span>  
  
 <span data-ttu-id="b3463-132">Cambiar la versión de esquema puede afectar a muchas partes de la solución, por lo que debe planearse de antemano.</span><span class="sxs-lookup"><span data-stu-id="b3463-132">Changing the schema version can affect many parts of your solution, so this should be planned in advance.</span></span> <span data-ttu-id="b3463-133">Para obtener más información sobre el efecto de los cambios de versión de esquema, vea [resolución de esquemas en componentes de canalización](http://go.microsoft.com/fwlink/?LinkID=154207) (<http://go.microsoft.com/fwlink/?LinkID=154207>) en [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] ayuda.</span><span class="sxs-lookup"><span data-stu-id="b3463-133">For more information about the effect of schema version changes, see [Schema Resolution in Pipeline Components](http://go.microsoft.com/fwlink/?LinkID=154207) (<http://go.microsoft.com/fwlink/?LinkID=154207>) in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Help.</span></span>  
  
 <span data-ttu-id="b3463-134">Al cambiar la versión de esquemas en una orquestación, use los tipos de mensaje de varias partes.</span><span class="sxs-lookup"><span data-stu-id="b3463-134">When changing the version of schemas in an orchestration, use multipart message types.</span></span> <span data-ttu-id="b3463-135">Esto dará lugar a una mayor flexibilidad cuando los esquemas de control de versiones.</span><span class="sxs-lookup"><span data-stu-id="b3463-135">Doing so will result in greater flexibility when versioning schemas.</span></span> <span data-ttu-id="b3463-136">Para obtener más información acerca de las ventajas del uso de tipos de mensaje de varias partes, vea sugerencia #1, "Siempre uso parte de varios tipos de mensaje," en el artículo de MSDN Magazine [8 sugerencias y trucos para mejorar la programación de BizTalk](http://go.microsoft.com/fwlink/?LinkId=101594) (http://go.microsoft.com/fwlink/?LinkId=101594).</span><span class="sxs-lookup"><span data-stu-id="b3463-136">For more information about the advantages of using multipart message types, see tip #1, “Always Use Multi-Part Message Types,” in the MSDN Magazine article [8 Tips And Tricks For Better BizTalk Programming](http://go.microsoft.com/fwlink/?LinkId=101594) (http://go.microsoft.com/fwlink/?LinkId=101594).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b3463-137">Vea también</span><span class="sxs-lookup"><span data-stu-id="b3463-137">See Also</span></span>  
 [<span data-ttu-id="b3463-138">Procedimientos recomendados para actualizar las aplicaciones</span><span class="sxs-lookup"><span data-stu-id="b3463-138">Best Practices for Updating Applications</span></span>](../technical-guides/best-practices-for-updating-applications.md)
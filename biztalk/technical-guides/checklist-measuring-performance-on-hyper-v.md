---
title: 'Lista de comprobación: Medición del rendimiento en Hyper-V | Microsoft Docs'
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: f32c95f4-a4eb-412b-9fa7-140e80b85e5a
caps.latest.revision: 13
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 111ca6bfa37fdfc6af6f484ebc1568cbaca2c8f6
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/27/2018
ms.locfileid: "37007117"
---
# <a name="checklist-measuring-performance-on-hyper-v"></a><span data-ttu-id="84c64-102">Lista de comprobación: Medición del rendimiento en Hyper-V</span><span class="sxs-lookup"><span data-stu-id="84c64-102">Checklist: Measuring Performance on Hyper-V</span></span>
<span data-ttu-id="84c64-103">Aunque la mayoría de los principios de analizar el rendimiento de un sistema operativo instalado en un rendimiento de la máquina virtual de Hyper-V son el mismo que el análisis del rendimiento de un sistema operativo instalado en un equipo físico, muchos de los métodos de colección son diferentes.</span><span class="sxs-lookup"><span data-stu-id="84c64-103">While most of the principles of analyzing performance of a guest operating system installed on a Hyper-V virtual machine performance are the same as analyzing the performance of an operating system installed on a physical machine, many of the collection methods are different.</span></span> <span data-ttu-id="84c64-104">Al evaluar el rendimiento de la solución de BizTalk Server que se ejecutan en un sistema operativo instalado en una máquina virtual de Hyper-V, las siguientes secciones deben usarse como referencia rápida.</span><span class="sxs-lookup"><span data-stu-id="84c64-104">The sections below should be used as a quick reference when evaluating performance of your BizTalk Server solution running on a guest operating system installed on a Hyper-V virtual machine.</span></span>  

## <a name="measuring-disk-io-performance"></a><span data-ttu-id="84c64-105">Medición del rendimiento de E/S de disco</span><span class="sxs-lookup"><span data-stu-id="84c64-105">Measuring Disk I/O Performance</span></span>  
 <span data-ttu-id="84c64-106">Use los siguientes contadores del monitor de rendimiento para medir el rendimiento de E/S de disco en un sistema operativo instalado en una máquina virtual de Hyper-V:</span><span class="sxs-lookup"><span data-stu-id="84c64-106">Use the following performance monitor counters to measure disk I/O performance on a guest operating system installed on a Hyper-V virtual machine:</span></span>  


|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 <span data-ttu-id="84c64-107">Paso</span><span class="sxs-lookup"><span data-stu-id="84c64-107">Step</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <span data-ttu-id="84c64-108">Referencia</span><span class="sxs-lookup"><span data-stu-id="84c64-108">Reference</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="84c64-109">**Medir la latencia de disco en un sistema operativo de host de Hyper-V** : el mejor indicador inicial del rendimiento de disco en un sistema operativo de host de Hyper-V se obtiene con el "disco \Logical (*) \Avg. Segundos de disco/lectura"y" disco \Logical (\*) \Avg. Contadores de monitor de rendimiento de disco/escritura". Estos contadores del monitor de rendimiento miden la cantidad de tiempo que leen y escriben tardan las operaciones para responder al sistema operativo. Como regla general, los tiempos de respuesta promedio superior a 15 ms se consideran poco óptimos. Como regla general, los tiempos de respuesta promedio superior a 15 ms se consideran poco óptimos. Esto se basa en tiempo de una sola unidad de disco de 7200 RPM sin caché de búsqueda típica. Se recomienda el uso de disco lógico frente a los contadores del monitor de rendimiento de disco físico porque los servicios y aplicaciones de Windows usan unidades lógicas, representadas como letras de unidad en la que puede ser el disco físico (LUN) que se presenta en el sistema operativo consta de varias unidades de disco físicas en una matriz de discos. Utilice la siguiente regla de oro al medir la latencia de disco en el sistema de operativo del host de Hyper-V mediante el disco \Logical (\*) \Avg. Disco a disco en segundos/lectura o \Logical (\*) \Avg. Contadores del monitor de rendimiento de segundos/escritura en disco:<br /> <br /> se basa en tiempo de una sola unidad de disco de 7200 RPM sin caché de búsqueda típica. Se recomienda el uso de disco lógico frente a los contadores del monitor de rendimiento de disco físico porque los servicios y aplicaciones de Windows usan unidades lógicas, representadas como letras de unidad en la que puede ser el disco físico (LUN) que se presenta en el sistema operativo consta de varias unidades de disco físicas en una matriz de discos. Utilice la siguiente regla de oro al medir la latencia de disco en el sistema de operativo del host de Hyper-V mediante el disco \Logical (\*) \Avg. Disco a disco en segundos/lectura o \Logical (\*) \Avg. Contadores del monitor de rendimiento de segundos/escritura en disco:<br /> <br /> : 1 ms a 15 ms = correcto<br />: 15 ms para 25 ms = advertencia o supervisión<br />: 26ms o superior = crítico, rendimiento se verá afectado negativamente \* \*Nota:* \* discos físicos instalados en un entorno virtualizado no ofrecen un mejor rendimiento que tiene acceso a través de un sistema operativo de host de Hyper-V de los discos.</span><span class="sxs-lookup"><span data-stu-id="84c64-109">**Measure disk latency on a Hyper-V host operating system** – The best initial indicator of disk performance on a Hyper-V host operating system is obtained by using the “\Logical Disk(*)\Avg. Disk sec/Read” and “\Logical Disk(\*)\Avg. Disk sec/Write” performance monitor counters. These performance monitor counters measure the amount of time that read and write operations take to respond to the operating system. As a general rule of thumb, average response times greater than 15ms are considered sub-optimal. As a general rule of thumb, average response times greater than 15ms are considered sub-optimal. This is based on the typical seek time of a single 7200 RPM disk drive without cache. The use of logical disk versus physical disk performance monitor counters is recommended because Windows applications and services utilize logical drives represented as drive letters wherein the physical disk (LUN) presented to the operating system can be comprised of multiple physical disk drives in a disk array. Use the following rule of thumb when measuring disk latency on the Hyper-V host operating system using the \Logical Disk(\*)\Avg. Disk sec/Read or \Logical Disk(\*)\Avg. Disk sec/Write performance monitor counters:<br /><br /> This is based on the typical seek time of a single 7200 RPM disk drive without cache. The use of logical disk versus physical disk performance monitor counters is recommended because Windows applications and services utilize logical drives represented as drive letters wherein the physical disk (LUN) presented to the operating system can be comprised of multiple physical disk drives in a disk array. Use the following rule of thumb when measuring disk latency on the Hyper-V host operating system using the \Logical Disk(\*)\Avg. Disk sec/Read or \Logical Disk(\*)\Avg. Disk sec/Write performance monitor counters:<br /><br /> -   1ms to 15ms  = Healthy<br />-   15ms to 25ms = Warning or Monitor<br />-   26ms or greater = Critical, performance will be adversely affected \*\*Note:*\*  Physical disks installed on a non-virtualized environment offer better performance than disks accessed through a Hyper-V host operating system.</span></span> <span data-ttu-id="84c64-110">Si el rendimiento de disco es absolutamente crítico para el rendimiento general de la aplicación, considere la posibilidad de hospedar los discos en el hardware físico solo.</span><span class="sxs-lookup"><span data-stu-id="84c64-110">If disk performance is absolutely critical to the overall performance of your application, consider hosting disks on physical hardware only.</span></span> <span data-ttu-id="84c64-111">**Nota:** al evaluar el rendimiento de E/S de disco, asegúrese de configurar el software antivirus para excluir el examen de las particiones de disco que se va a evaluar.</span><span class="sxs-lookup"><span data-stu-id="84c64-111">**Note:**  When evaluating disk I/O performance, ensure that you configure antivirus software to exclude scanning of any disk partitions that are being evaluated.</span></span> <span data-ttu-id="84c64-112">Exploración antivirus introduce una sobrecarga que puede afectar negativamente al rendimiento y resultados de pruebas de sesgo.</span><span class="sxs-lookup"><span data-stu-id="84c64-112">Antivirus scanning introduces overhead that can negatively impact performance and skew test results.</span></span> <br /><br /> <span data-ttu-id="84c64-113">**Medir la latencia de disco en sistemas operativos invitados** : tiempos de respuesta de los discos usados por los sistemas operativos invitados se pueden medir con los contadores del monitor de rendimiento mismo usados para medir los tiempos de respuesta de los discos usados por el host de Hyper-V operativo sistema.</span><span class="sxs-lookup"><span data-stu-id="84c64-113">**Measure disk latency on guest operating systems** – Response times of the disks used by the guest operating systems can be measured using the same performance monitor counters used to measure response times of the disks used by the Hyper-V host operating system.</span></span> | <span data-ttu-id="84c64-114">Para obtener más información sobre el análisis de rendimiento de disco, consulte los siguientes recursos:</span><span class="sxs-lookup"><span data-stu-id="84c64-114">For more information about disk performance analysis, see the following resources:</span></span><br /><br /> <span data-ttu-id="84c64-115">-Sección "Sobrecarga de rendimiento de ejecución de SQL Server en Hyper-V" de "Ejecutando SQL Server 2008 in a Hyper-V entorno – Best Practices and Performance Considerations" notas del producto en [ http://go.microsoft.com/fwlink/?LinkId=144622 ](http://go.microsoft.com/fwlink/?LinkId=144622).</span><span class="sxs-lookup"><span data-stu-id="84c64-115">-   “Performance Overhead of Running SQL Server in Hyper-V” section of “Running SQL Server 2008 in a Hyper-V Environment – Best Practices and Performance Considerations” whitepaper at [http://go.microsoft.com/fwlink/?LinkId=144622](http://go.microsoft.com/fwlink/?LinkId=144622).</span></span><br /><span data-ttu-id="84c64-116">-Practicados problemas enlazada al disco en [ http://go.microsoft.com/fwlink/?LinkId=120947 ](http://go.microsoft.com/fwlink/?LinkId=120947).</span><span class="sxs-lookup"><span data-stu-id="84c64-116">-   Ruling Out Disk-Bound Problems at [http://go.microsoft.com/fwlink/?LinkId=120947](http://go.microsoft.com/fwlink/?LinkId=120947).</span></span><br /><span data-ttu-id="84c64-117">-Prácticas recomendadas de E/S previas a la implementación de SQL Server en [ http://go.microsoft.com/fwlink/?LinkId=120948 ](http://go.microsoft.com/fwlink/?LinkId=120948).</span><span class="sxs-lookup"><span data-stu-id="84c64-117">-   SQL Server Predeployment I/O Best Practices at [http://go.microsoft.com/fwlink/?LinkId=120948](http://go.microsoft.com/fwlink/?LinkId=120948).</span></span><br /><span data-ttu-id="84c64-118">-Sección "Cuellos de botella de E/S" de la "solución de problemas de rendimiento en SQL Server 2008" notas del producto disponible en [ http://go.microsoft.com/fwlink/?LinkID=202135 ](http://go.microsoft.com/fwlink/?LinkID=202135).</span><span class="sxs-lookup"><span data-stu-id="84c64-118">-   “I/O Bottlenecks” section of the “Troubleshooting Performance Problems in SQL Server 2008” whitepaper available at [http://go.microsoft.com/fwlink/?LinkID=202135](http://go.microsoft.com/fwlink/?LinkID=202135).</span></span><br /><span data-ttu-id="84c64-119">-Cómo identificar un cuello de botella de rendimiento de disco mediante la herramienta de Microsoft Server Performance Advisor (SPA) en [ http://go.microsoft.com/fwlink/?LinkID=98096 ](http://go.microsoft.com/fwlink/?LinkID=98096).</span><span class="sxs-lookup"><span data-stu-id="84c64-119">-   How to Identify a Disk Performance Bottleneck Using the Microsoft Server Performance Advisor (SPA) Tool at [http://go.microsoft.com/fwlink/?LinkID=98096](http://go.microsoft.com/fwlink/?LinkID=98096).</span></span> |

## <a name="measuring-memory-performance"></a><span data-ttu-id="84c64-120">Medir el rendimiento de memoria</span><span class="sxs-lookup"><span data-stu-id="84c64-120">Measuring Memory Performance</span></span>  
 <span data-ttu-id="84c64-121">Use los siguientes contadores del monitor de rendimiento para medir el impacto de la memoria disponible en el rendimiento de un sistema operativo instalado en una máquina virtual de Hyper-V:</span><span class="sxs-lookup"><span data-stu-id="84c64-121">Use the following performance monitor counters to measure the impact of available memory on the performance of a guest operating system installed on a Hyper-V virtual machine:</span></span>  

|<span data-ttu-id="84c64-122">Paso</span><span class="sxs-lookup"><span data-stu-id="84c64-122">Step</span></span>|<span data-ttu-id="84c64-123">Referencia</span><span class="sxs-lookup"><span data-stu-id="84c64-123">Reference</span></span>|  
|----------|---------------|  
|<span data-ttu-id="84c64-124">**Medir la memoria disponible en el sistema operativo de host de Hyper-V** : se puede determinar la cantidad de memoria física disponible para el sistema operativo de host de Hyper-V mediante la supervisión del contador del monitor de rendimiento "\Memory\Available MBytes" en el equipo físico.</span><span class="sxs-lookup"><span data-stu-id="84c64-124">**Measure available memory on the Hyper-V host operating system** – The amount of physical memory available to the Hyper-V host operating system can be determined by monitoring the “\Memory\Available MBytes” performance monitor counter on the physical computer.</span></span> <span data-ttu-id="84c64-125">Este contador indica la cantidad de memoria física disponible para el sistema operativo host.</span><span class="sxs-lookup"><span data-stu-id="84c64-125">This counter reports the amount of free physical memory available to the host operating system.</span></span> <span data-ttu-id="84c64-126">Al evaluar la memoria física disponible para el sistema operativo host, use las siguientes reglas generales:</span><span class="sxs-lookup"><span data-stu-id="84c64-126">Use the following rules of thumb when evaluating available physical memory available to the host operating system:</span></span><br /><br /> <ul><li><span data-ttu-id="84c64-127">**\Memory\Available Mbytes** – MBytes disponibles mide la cantidad de memoria física disponible para procesos que se ejecutan en el equipo, como un porcentaje de memoria física instalada en el equipo.</span><span class="sxs-lookup"><span data-stu-id="84c64-127">**\Memory\Available Mbytes** – Available MBytes measures the amount of physical memory available to processes running on the computer, as a percentage of physical memory installed on the computer.</span></span> <span data-ttu-id="84c64-128">Las siguientes directrices se aplican al medir el valor de este contador del monitor de rendimiento:</span><span class="sxs-lookup"><span data-stu-id="84c64-128">The following guidelines apply when measuring the value of this performance monitor counter:</span></span><br /><br /> <ul><li><span data-ttu-id="84c64-129">50% de memoria libre está disponible o más = correcto</span><span class="sxs-lookup"><span data-stu-id="84c64-129">50% of free memory available or more = Healthy</span></span></li><li><span data-ttu-id="84c64-130">25% de memoria libre está disponible = supervisión</span><span class="sxs-lookup"><span data-stu-id="84c64-130">25% of free memory available = Monitor</span></span></li><li><span data-ttu-id="84c64-131">10% de memoria libre está disponible = advertencia</span><span class="sxs-lookup"><span data-stu-id="84c64-131">10% of free memory available = Warning</span></span></li><li><span data-ttu-id="84c64-132">Menos del 5% de memoria libre está disponible = crítico, rendimiento se verá afectado negativamente</span><span class="sxs-lookup"><span data-stu-id="84c64-132">Less than 5% of free memory available = Critical, performance will be adversely affected</span></span></li></ul></li><li><span data-ttu-id="84c64-133">**\Memory\Pages/sec** : este contador del monitor de rendimiento mide la velocidad a la que las páginas se leen o escritas en el disco para resolver errores severos de página.</span><span class="sxs-lookup"><span data-stu-id="84c64-133">**\Memory\Pages/sec** – This performance monitor counter measures the rate at which pages are read from or written to disk to resolve hard page faults.</span></span> <span data-ttu-id="84c64-134">Para resolver errores severos de página, el sistema operativo debe intercambiar el contenido de la memoria al disco, lo que afecta negativamente al rendimiento.</span><span class="sxs-lookup"><span data-stu-id="84c64-134">To resolve hard page faults, the operating system must swap the contents of memory to disk, which negatively impacts performance.</span></span> <span data-ttu-id="84c64-135">Un gran número de páginas por segundo en correlación con poca memoria física disponible puede indicar una falta de memoria física.</span><span class="sxs-lookup"><span data-stu-id="84c64-135">A high number of pages per second in correlation with low available physical memory may indicate a lack of physical memory.</span></span> <span data-ttu-id="84c64-136">Las siguientes directrices se aplican al medir el valor de este contador del monitor de rendimiento:</span><span class="sxs-lookup"><span data-stu-id="84c64-136">The following guidelines apply when measuring the value of this performance monitor counter:</span></span><br /><br /> <ul><li><span data-ttu-id="84c64-137">Menos de 500 = correcto</span><span class="sxs-lookup"><span data-stu-id="84c64-137">Less than 500 = Healthy</span></span></li><li><span data-ttu-id="84c64-138">500 - 1000 = supervisión o precaución</span><span class="sxs-lookup"><span data-stu-id="84c64-138">500 - 1000 = Monitor or Caution</span></span></li><li><span data-ttu-id="84c64-139">Mayor que 1000 = crítico, rendimiento se verá afectado negativamente</span><span class="sxs-lookup"><span data-stu-id="84c64-139">Greater than 1000 = Critical, performance will be adversely affected</span></span></li></ul></li></ul><br /> <span data-ttu-id="84c64-140">**Medir la memoria disponible en el sistema operativo invitado** : memoria que está disponible para los sistemas operativos invitados se puede medir con los mismos contadores de monitor de rendimiento usados para medir la memoria disponible para el sistema operativo de host de Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="84c64-140">**Measure available memory on the guest operating system** – Memory that is available to the guest operating systems can be measured with the same performance monitor counters used to measure memory available to the Hyper-V host operating system.</span></span>|<span data-ttu-id="84c64-141">Para obtener más información sobre el impacto de la memoria física disponible en el rendimiento del servidor de aplicaciones, consulte el tema de Ayuda de Exchange Server 2003 "Veredicto Out enlazada a memoria problemas" en [ http://go.microsoft.com/fwlink/?LinkId=121056 ](http://go.microsoft.com/fwlink/?LinkId=121056).</span><span class="sxs-lookup"><span data-stu-id="84c64-141">For more information about the impact of available physical memory on application server performance, see the Exchange Server 2003 Help topic “Ruling Out Memory-Bound Problems” at [http://go.microsoft.com/fwlink/?LinkId=121056](http://go.microsoft.com/fwlink/?LinkId=121056).</span></span>|  

## <a name="measuring-network-performance"></a><span data-ttu-id="84c64-142">Medición del rendimiento de red</span><span class="sxs-lookup"><span data-stu-id="84c64-142">Measuring Network Performance</span></span>  
 <span data-ttu-id="84c64-143">Hyper-V permite que los equipos de invitados compartir el mismo adaptador de red físico.</span><span class="sxs-lookup"><span data-stu-id="84c64-143">Hyper-V allows guest computers to share the same physical network adapter.</span></span> <span data-ttu-id="84c64-144">Si bien esto ayuda a consolidar el hardware, tenga cuidado para no saturar el adaptador físico.</span><span class="sxs-lookup"><span data-stu-id="84c64-144">While this helps to consolidate hardware, take care not to saturate the physical adapter.</span></span> <span data-ttu-id="84c64-145">Para asegurar el estado de la red utilizada por las máquinas virtuales de Hyper-V, use los métodos siguientes:</span><span class="sxs-lookup"><span data-stu-id="84c64-145">Use the following methods to ensure the health of the network used by the Hyper-V virtual machines:</span></span>  


|                                 <span data-ttu-id="84c64-146">Paso</span><span class="sxs-lookup"><span data-stu-id="84c64-146">Step</span></span>                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <span data-ttu-id="84c64-147">Referencia</span><span class="sxs-lookup"><span data-stu-id="84c64-147">Reference</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|----------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                       <span data-ttu-id="84c64-148">**Probar la latencia de red**</span><span class="sxs-lookup"><span data-stu-id="84c64-148">**Test network latency**</span></span>                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 <span data-ttu-id="84c64-149">Haga ping a cada máquina virtual para asegurarse de latencia de red adecuada.</span><span class="sxs-lookup"><span data-stu-id="84c64-149">Ping each virtual machine to ensure adequate network latency.</span></span> <span data-ttu-id="84c64-150">En redes de área local, espera recibir menor que 1 ms tiempos de respuesta.</span><span class="sxs-lookup"><span data-stu-id="84c64-150">On local area networks, expect to receive less than 1ms response times.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|                       <span data-ttu-id="84c64-151">**Prueba de pérdida de paquetes**</span><span class="sxs-lookup"><span data-stu-id="84c64-151">**Test for packet loss**</span></span>                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          <span data-ttu-id="84c64-152">Use la utilidad pathping.exe para probar la pérdida de paquetes entre las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="84c64-152">Use the pathping.exe utility to test packet loss between virtual machines.</span></span> <span data-ttu-id="84c64-153">Pathping.exe mide la pérdida de paquetes en la red y está disponible con todas las versiones de [!INCLUDE[btsWinNoVersion](../includes/btswinnoversion-md.md)] desde [!INCLUDE[btsWin2kSvr](../includes/btswin2ksvr-md.md)].</span><span class="sxs-lookup"><span data-stu-id="84c64-153">Pathping.exe measures packet loss on the network and is available with all versions of [!INCLUDE[btsWinNoVersion](../includes/btswinnoversion-md.md)] since [!INCLUDE[btsWin2kSvr](../includes/btswin2ksvr-md.md)].</span></span> <span data-ttu-id="84c64-154">Pathping.exe envía una ráfaga de 100 solicitudes ping a cada nodo de red y calcula el número de pings se devuelven.</span><span class="sxs-lookup"><span data-stu-id="84c64-154">Pathping.exe sends out a burst of 100 ping requests to each network node and calculates how many pings are returned.</span></span> <span data-ttu-id="84c64-155">No debería haber ninguna pérdida de las solicitudes de ping de la utilidad pathping.exe en redes de área local.</span><span class="sxs-lookup"><span data-stu-id="84c64-155">On local area networks there should be no loss of ping requests from the pathping.exe utility.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|                   <span data-ttu-id="84c64-156">**Transferencias de archivos de red de prueba**</span><span class="sxs-lookup"><span data-stu-id="84c64-156">**Test network file transfers**</span></span>                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          <span data-ttu-id="84c64-157">Copiar un archivo de 100MB entre las máquinas virtuales y medir el tiempo necesario para completar la copia.</span><span class="sxs-lookup"><span data-stu-id="84c64-157">Copy a 100MB file between virtual machines and measure the length of time required to complete the copy.</span></span> <span data-ttu-id="84c64-158">En un 100 Mbits correcto red (megabits), debe copiar un archivo de 100MB (megabyte) de 10 a 20 segundos.</span><span class="sxs-lookup"><span data-stu-id="84c64-158">On a healthy 100Mbit (megabit) network, a 100MB (megabyte) file should copy in 10 to 20 seconds.</span></span> <span data-ttu-id="84c64-159">En una red de 1 Gbit en buen estado, debe copiar un archivo de 100MB en aproximadamente 3 a 5 segundos.</span><span class="sxs-lookup"><span data-stu-id="84c64-159">On a healthy 1Gbit network, a 100MB file should copy in about 3 to 5 seconds.</span></span> <span data-ttu-id="84c64-160">Tiempos de copia fuera de estos parámetros son indicativos de un problema de red.</span><span class="sxs-lookup"><span data-stu-id="84c64-160">Copy times outside of these parameters are indicative of a network problem.</span></span> <span data-ttu-id="84c64-161">Una causa común de las transferencias de red deficientes se produce cuando el adaptador de red tiene "detectado automáticamente" una red de 10MB dúplex medio que impide que el adaptador de red si desea aprovechar al máximo el ancho de banda disponible.</span><span class="sxs-lookup"><span data-stu-id="84c64-161">One common cause of poor network transfers occurs when the network adapter has “auto detected” a 10MB half-duplex network which prevents the network adapter from taking full advantage of available bandwidth.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| <span data-ttu-id="84c64-162">**Uso de la red de medida en el sistema operativo de host de Hyper-V**</span><span class="sxs-lookup"><span data-stu-id="84c64-162">**Measure network utilization on the Hyper-V host operating system**</span></span> | <span data-ttu-id="84c64-163">Use los siguientes contadores del monitor de rendimiento para medir el uso de la red en el sistema operativo de host de Hyper-V:</span><span class="sxs-lookup"><span data-stu-id="84c64-163">Use the following performance monitor counters to measure network utilization on the Hyper-V host operating system:</span></span><br /><br /> <span data-ttu-id="84c64-164">**\Network interface (\*) \Bytes totales/seg.** : el porcentaje de utilización de la red se calcula multiplicando Bytes totales/seg por 8 para poder convertirlo en bits, multiplique el resultado por 100, entonces actual de la división por el adaptador de red ancho de banda.</span><span class="sxs-lookup"><span data-stu-id="84c64-164">**\Network Interface(\*)\Bytes Total/sec** – The percentage of network utilization is calculated by multiplying Bytes Total/sec by 8 to convert it to bits, multiply the result by 100, then divide by the network adapter’s current bandwidth.</span></span> <span data-ttu-id="84c64-165">Use los siguientes umbrales para evaluar el uso de ancho de banda de red:</span><span class="sxs-lookup"><span data-stu-id="84c64-165">Use the following thresholds to evaluate network bandwidth utilization:</span></span><br /><br /> <span data-ttu-id="84c64-166">-Menos de 40% de la interfaz consumido = correcto</span><span class="sxs-lookup"><span data-stu-id="84c64-166">-   Less than 40% of the interface consumed = Healthy</span></span><br /><span data-ttu-id="84c64-167">-41-64% de la interfaz consumido = supervisión o precaución</span><span class="sxs-lookup"><span data-stu-id="84c64-167">-   41%-64% of the interface consumed = Monitor or Caution</span></span><br /><span data-ttu-id="84c64-168">-65-100% de la interfaz consumido = crítico, rendimiento se verá afectado negativamente</span><span class="sxs-lookup"><span data-stu-id="84c64-168">-   65-100% of the interface consumed = Critical, performance will be adversely affected</span></span><br /><br /> <span data-ttu-id="84c64-169">**\Network interface (\*) \Output longitud de cola** : la longitud de cola de salida mide el número de subprocesos que esperan en el adaptador de red.</span><span class="sxs-lookup"><span data-stu-id="84c64-169">**\Network Interface(\*)\Output Queue Length** – The output queue length measures the number of threads waiting on the network adapter.</span></span> <span data-ttu-id="84c64-170">Si hay más de 2 subprocesos en espera en el adaptador de red, la red puede ser un cuello de botella.</span><span class="sxs-lookup"><span data-stu-id="84c64-170">If there are more than 2 threads waiting on the network adapter, then the network may be a bottleneck.</span></span> <span data-ttu-id="84c64-171">Causas comunes de esto son tasas de colisión alta en la red o de latencia de red deficientes.</span><span class="sxs-lookup"><span data-stu-id="84c64-171">Common causes of this are poor network latency and/or high collision rates on the network.</span></span> <span data-ttu-id="84c64-172">Use los siguientes umbrales para evaluar la longitud de cola de salida:</span><span class="sxs-lookup"><span data-stu-id="84c64-172">Use the following thresholds to evaluate output queue length:</span></span><br /><br /> <span data-ttu-id="84c64-173">-0 = correcto</span><span class="sxs-lookup"><span data-stu-id="84c64-173">-   0 = Healthy</span></span><br /><span data-ttu-id="84c64-174">-1-2 = supervisión o precaución</span><span class="sxs-lookup"><span data-stu-id="84c64-174">-   1-2 = Monitor or Caution</span></span><br /><span data-ttu-id="84c64-175">-Mayor que 2 = crítico, rendimiento se verá afectado negativamente.</span><span class="sxs-lookup"><span data-stu-id="84c64-175">-   Greater than 2 = Critical, performance will be adversely affected.</span></span><br /><br /> <span data-ttu-id="84c64-176">Asegúrese de que los adaptadores de red para todos los equipos (físicos y virtuales) en la solución están configurados para usar el mismo valor para la unidad de transmisión máxima (MTU).</span><span class="sxs-lookup"><span data-stu-id="84c64-176">Ensure that the network adapters for all computers (physical and virtual) in the solution are configured to use the same value for maximum transmission unit (MTU).</span></span> <span data-ttu-id="84c64-177">Para obtener más información acerca de cómo configurar el valor MTU, vea "Parámetros de configuración de TCP/IP de apéndice A:" en [ http://go.microsoft.com/fwlink/?LinkId=113716 ](http://go.microsoft.com/fwlink/?LinkId=113716).</span><span class="sxs-lookup"><span data-stu-id="84c64-177">For more information about configuring the MTU value, see “Appendix A: TCP/IP Configuration Parameters” at [http://go.microsoft.com/fwlink/?LinkId=113716](http://go.microsoft.com/fwlink/?LinkId=113716).</span></span><br /><br /> <span data-ttu-id="84c64-178">Si se mide una longitud de cola de salida de 2 o más, considere la posibilidad de agregar uno o más adaptadores de red físicos en el equipo físico que hospeda las máquinas virtuales y enlazar los adaptadores de red utilizados por los sistemas operativos de invitado para estos adaptadores de red físicos.</span><span class="sxs-lookup"><span data-stu-id="84c64-178">If an output queue length of 2 or more is measured, consider adding one or more physical network adapters to the physical computer that hosts the virtual machines and bind the network adapters used by the guest operating systems to these physical network adapters.</span></span> |
|    <span data-ttu-id="84c64-179">**Uso de la red de medida en los sistemas operativos invitados**</span><span class="sxs-lookup"><span data-stu-id="84c64-179">**Measure network utilization on the guest operating systems**</span></span>    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <span data-ttu-id="84c64-180">Si un adaptador de red en la partición raíz de Hyper-V está ocupado, tal y como indica los contadores del monitor de rendimiento se mencionó anteriormente, a continuación, considere el uso de la "\Hyper-V adaptador de red Virtual (\*) \Bytes/sec" contador del monitor de rendimiento para identificar qué adaptadores de red virtual están consumiendo el mayor uso de la red.</span><span class="sxs-lookup"><span data-stu-id="84c64-180">If a network adapter on the Hyper-V root partition is busy as indicated by the performance monitor counters mentioned above, then consider using the "\Hyper-V Virtual Network Adapter(\*)\Bytes/sec" performance monitor counter to identify which virtual network adapters are consuming the most network utilization.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |

 <span data-ttu-id="84c64-181">Para obtener más información sobre el análisis de rendimiento de red, consulte "Capítulo 15 – medir el rendimiento de aplicaciones .NET" en [ http://go.microsoft.com/fwlink/?LinkId=121073 ](http://go.microsoft.com/fwlink/?LinkId=121073).</span><span class="sxs-lookup"><span data-stu-id="84c64-181">For more information about network performance analysis, see “Chapter 15 - Measuring .NET Application Performance” at [http://go.microsoft.com/fwlink/?LinkId=121073](http://go.microsoft.com/fwlink/?LinkId=121073).</span></span>  

## <a name="measuring-processor-performance"></a><span data-ttu-id="84c64-182">Medir el rendimiento del procesador</span><span class="sxs-lookup"><span data-stu-id="84c64-182">Measuring Processor Performance</span></span>  
 <span data-ttu-id="84c64-183">Para evaluar el rendimiento del procesador en un sistema operativo instalado en una máquina virtual de Hyper-V, use los métodos siguientes:</span><span class="sxs-lookup"><span data-stu-id="84c64-183">Use the following methods to evaluate processor performance on a guest operating system installed on a Hyper-V virtual machine:</span></span>  

- <span data-ttu-id="84c64-184">**Medir el uso de procesador del sistema operativo invitado -** tradicionalmente, se puede medir el rendimiento de procesador con el "\Processor(\*)\\% Processor Time" contador del monitor de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="84c64-184">**Measure guest operating system processor utilization -** Traditionally, processor performance can be measured using the “\Processor(\*)\\% Processor Time” performance monitor counter.</span></span> <span data-ttu-id="84c64-185">Esto no es un contador preciso para evaluar el uso de procesador de un sistema operativo invitado aunque porque Hyper-V mide e informa de este valor en relación con el número de procesadores que se asigna a la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="84c64-185">This is not an accurate counter for evaluating processor utilization of a guest operating system though because Hyper-V measures and reports this value relative to the number of processors allocated to the virtual machine.</span></span> <span data-ttu-id="84c64-186">Si se asignan más procesadores para máquinas virtuales en ejecución que existen realmente en el equipo físico, el valor devuelto por cada sistema operativo para el "\Processor (\*)\\% Processor Time" contador del monitor de rendimiento suele ser bajo, aunque en realidad la utilización del procesador es un cuello de botella.</span><span class="sxs-lookup"><span data-stu-id="84c64-186">If more processors are allocated to running virtual machines than are actually present on the physical computer, the value returned by each guest operating system for the “\Processor(\*)\\% Processor Time” performance monitor counter will be low, even if in fact processor utilization is a bottleneck.</span></span> <span data-ttu-id="84c64-187">Esto ocurre porque los procesadores virtuales usan los procesadores físicos en un modo round-robin.</span><span class="sxs-lookup"><span data-stu-id="84c64-187">This occurs because the virtual processors utilize the physical processors in a round-robin fashion.</span></span> <span data-ttu-id="84c64-188">Cada procesador virtual se pruebe y asignar a sí mismo un recurso compartido de recursos del sistema general, por lo que en un sistema de 4 procesadores físicos, cada procesador virtual tendrán de forma predeterminada intenta utilizar el 25% de los recursos del sistema.</span><span class="sxs-lookup"><span data-stu-id="84c64-188">Each virtual processor will try and allocate itself a share of overall system resources, so in a 4 physical processor system, each virtual processor will by default try to utilize 25% of the system resources.</span></span> <span data-ttu-id="84c64-189">Si 8 procesadores virtuales se crean Esto significa que colectivamente los procesadores virtuales intentará usar un 200% de la capacidad de CPU del servidor.</span><span class="sxs-lookup"><span data-stu-id="84c64-189">If 8 virtual processors are created this means that collectively the virtual processors will attempt to utilize 200% of the server CPU capacity.</span></span> <span data-ttu-id="84c64-190">En este caso, cada procesador virtual notificará una baja utilización medida según la "\Processor (\*)\\% Processor Time" contador del monitor de rendimiento (en relación con el nivel de espera) y el contexto excesivo que cambiar entre la procesadores virtuales dará como resultado un rendimiento deficiente para cada máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="84c64-190">In this case, each virtual processor will report a low utilization as measured by the “\Processor(\*)\\% Processor Time” performance monitor counter (relative to the level it expects) and the excessive context switching between the virtual processors will result in poor performance for each virtual machine.</span></span> <span data-ttu-id="84c64-191">En este escenario, considere la posibilidad de reducir el número de procesadores virtuales asignados a las máquinas virtuales de Hyper-V en el sistema operativo host. Hyper-V proporciona hipervisor objetos de rendimiento para supervisar el rendimiento de procesadores lógicos y virtuales.</span><span class="sxs-lookup"><span data-stu-id="84c64-191">In this scenario, consider reducing the number of virtual processors allocated to Hyper-V virtual machines on the host operating system.Hyper-V provides hypervisor performance objects to monitor the performance of both logical and virtual processors.</span></span> <span data-ttu-id="84c64-192">Un procesador lógico está directamente relacionado con el número de procesadores o núcleos que están instalados en el equipo físico.</span><span class="sxs-lookup"><span data-stu-id="84c64-192">A logical processor correlates directly to the number of processors or cores that are installed on the physical computer.</span></span> <span data-ttu-id="84c64-193">Por ejemplo, estaría relacionado 2 procesadores de cuatro núcleos instalados en el equipo físico con 8 procesadores lógicos.</span><span class="sxs-lookup"><span data-stu-id="84c64-193">For example, 2 quad core processors installed on the physical computer would correlate to 8 logical processors.</span></span> <span data-ttu-id="84c64-194">Procesadores virtuales son lo que realmente use las máquinas virtuales y toda la ejecución en las particiones raíz y secundario se produce en procesadores virtuales.</span><span class="sxs-lookup"><span data-stu-id="84c64-194">Virtual processors are what the virtual machines actually use, and all execution in the root and child partitions occurs in virtual processors.</span></span>  

   <span data-ttu-id="84c64-195">Hyper-V proporciona hipervisor objetos de rendimiento para supervisar el rendimiento de procesadores lógicos y virtuales.</span><span class="sxs-lookup"><span data-stu-id="84c64-195">Hyper-V provides hypervisor performance objects to monitor the performance of both logical and virtual processors.</span></span> <span data-ttu-id="84c64-196">Un procesador lógico está directamente relacionado con el número de procesadores o núcleos que están instalados en el equipo físico.</span><span class="sxs-lookup"><span data-stu-id="84c64-196">A logical processor correlates directly to the number of processors or cores that are installed on the physical computer.</span></span> <span data-ttu-id="84c64-197">Por ejemplo, estaría relacionado 2 procesadores de cuatro núcleos instalados en el equipo físico con 8 procesadores lógicos.</span><span class="sxs-lookup"><span data-stu-id="84c64-197">For example, 2 quad core processors installed on the physical computer would correlate to 8 logical processors.</span></span> <span data-ttu-id="84c64-198">Procesadores virtuales son lo que realmente use las máquinas virtuales y toda la ejecución en las particiones raíz y secundario se produce en procesadores virtuales.</span><span class="sxs-lookup"><span data-stu-id="84c64-198">Virtual processors are what the virtual machines actually use, and all execution in the root and child partitions occurs in virtual processors.</span></span>  

   <span data-ttu-id="84c64-199">Para medir con precisión la utilización del procesador de un sistema operativo invitado, utilice la "Hyper-V hipervisor lógico procesador (_Total) % Total de tiempo de ejecución" contador del monitor de rendimiento en el sistema operativo de host de Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="84c64-199">To accurately measure the processor utilization of a guest operating system, use the “Hyper-V Hypervisor Logical Processor(_Total)% Total Run Time” performance monitor counter on the Hyper-V host operating system.</span></span> <span data-ttu-id="84c64-200">Use los siguientes umbrales para evaluar el invitado funcionamiento del sistema procesador utilización con el "Hyper-V hipervisor lógico procesador (_Total) % Total de tiempo de ejecución" contador del monitor de rendimiento:</span><span class="sxs-lookup"><span data-stu-id="84c64-200">Use the following thresholds to evaluate guest operating system processor utilization using the “Hyper-V Hypervisor Logical Processor(_Total)% Total Run Time” performance monitor counter:</span></span>  

  - <span data-ttu-id="84c64-201">Menos del 60% consumido = correcto</span><span class="sxs-lookup"><span data-stu-id="84c64-201">Less than 60% consumed = Healthy</span></span>  

  - <span data-ttu-id="84c64-202">60-89% consumido = supervisión o precaución</span><span class="sxs-lookup"><span data-stu-id="84c64-202">60% - 89% consumed = Monitor or Caution</span></span>  

  - <span data-ttu-id="84c64-203">90% - 100% consumido = crítico, rendimiento se verá afectado negativamente</span><span class="sxs-lookup"><span data-stu-id="84c64-203">90% - 100% consumed = Critical, performance will be adversely affected</span></span>  

    <span data-ttu-id="84c64-204">Para solucionar problemas de rendimiento del procesador de los sistemas operativos de invitado en un entorno de Hyper-V, es mejor un equilibrio entre los valores notificados por el sistema operativo de host para procurar "\Hyper-V hipervisor lógico procesador (_Total)\\% de ejecución Total Tiempo"(LPTR) y" \Hyper-V hipervisor Virtual procesador (_Total)\\% Total de tiempo de ejecución "(VPTR).</span><span class="sxs-lookup"><span data-stu-id="84c64-204">To troubleshoot processor performance of guest operating systems on a Hyper-V environment, it is best to strive for a balance between the values reported by the host operating system for “\Hyper-V Hypervisor Logical Processor(_Total)\\% Total Run Time” (LPTR) and “\Hyper-V Hypervisor Virtual Processor(_Total)\\% Total Run Time” (VPTR).</span></span> <span data-ttu-id="84c64-205">Si es alto LPTR y VPTR es bajo, a continuación, compruebe que no hay más procesadores que se asignan a las máquinas virtuales que están físicamente disponibles en el equipo físico.</span><span class="sxs-lookup"><span data-stu-id="84c64-205">If LPTR is high and VPTR is low then verify that there are not more processors allocated to virtual machines than are physically available on the physical computer.</span></span> <span data-ttu-id="84c64-206">Use la "\Hyper-V hipervisor Virtual Processor(\*)\\% de tiempo de ejecución de invitado" los contadores para determinar qué procesadores virtuales están consumiendo la CPU y anular la asignación de procesadores virtuales de las máquinas virtuales según sea apropiado para configurar una asignación uno a uno de procesadores virtuales y los procesadores lógicos.</span><span class="sxs-lookup"><span data-stu-id="84c64-206">Use the “\Hyper-V Hypervisor Virtual Processor(\*)\\%Guest Run Time” counters to determine which virtual Processors are consuming CPU and de-allocate virtual processors from virtual machines as appropriate to configure a one to one mapping of virtual processors to logical processors.</span></span> <span data-ttu-id="84c64-207">Para obtener más información acerca de cómo configurar una asignación uno a uno de los procesadores virtuales y los procesadores lógicos, vea la sección "Optimizar el rendimiento del procesador" en [lista de comprobación: optimización del rendimiento en Hyper-V](~/technical-guides/checklist-optimizing-performance-on-hyper-v.md).</span><span class="sxs-lookup"><span data-stu-id="84c64-207">For more information about configuring a one to one mapping of virtual processors to logical processors, see the “Optimizing Processor Performance” section in [Checklist: Optimizing Performance on Hyper-V](~/technical-guides/checklist-optimizing-performance-on-hyper-v.md).</span></span> <span data-ttu-id="84c64-208">Si VPTR es alto y LPTR es baja, a continuación, considere la posibilidad de asignar procesadores adicionales a las máquinas virtuales si hay procesadores lógicos disponibles y si los procesadores adicionales son compatibles con el sistema operativo invitado.</span><span class="sxs-lookup"><span data-stu-id="84c64-208">If VPTR is high and LPTR is low then consider allocating additional processors to virtual machines if there are available logical processors and if additional processors are supported by the guest operating system.</span></span> <span data-ttu-id="84c64-209">En el caso donde VPTR es alta, LPTR es baja, hay procesadores lógicos disponibles para asignar, pero no se admiten procesadores adicionales por el sistema operativo invitado, considere la posibilidad de escalar horizontalmente mediante la adición de máquinas virtuales adicionales en el equipo físico y la asignación de procesadores disponibles para estas máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="84c64-209">In the case where VPTR is high, LPTR is low, there are available logical processors to allocate, but additional processors are not supported by the guest operating system, consider scaling out by adding additional virtual machines to the physical computer and allocating available processors to these virtual machines.</span></span> <span data-ttu-id="84c64-210">En el caso donde VPTR y LPTR son altos, la configuración está insertando los límites del equipo físico y debe considerar escalar horizontalmente mediante la adición de más máquinas virtuales de Hyper-V y de otro equipo físico en el entorno.</span><span class="sxs-lookup"><span data-stu-id="84c64-210">In the case where both VPTR and LPTR are high, the configuration is pushing the limits of the physical computer and should consider scaling out by adding another physical computer and additional Hyper-V virtual machines to the environment.</span></span> <span data-ttu-id="84c64-211">El diagrama de flujo siguiente describe el proceso que se debe usar para solucionar el problema de rendimiento del procesador en un entorno de Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="84c64-211">The flowchart below describes the process that should be used when troubleshooting processor performance in a Hyper-V environment.</span></span>  

    <span data-ttu-id="84c64-212">Si es alto VPTR y LPTR es bajo, considere la posibilidad de asignar procesadores adicionales a las máquinas virtuales si hay procesadores lógicos disponibles y si los procesadores adicionales son compatibles con el sistema operativo invitado.</span><span class="sxs-lookup"><span data-stu-id="84c64-212">If VPTR is high and LPTR is low, then consider allocating additional processors to virtual machines if there are available logical processors and if additional processors are supported by the guest operating system.</span></span> <span data-ttu-id="84c64-213">En el caso donde VPTR es alta, LPTR es baja, hay procesadores lógicos disponibles para asignar, pero no se admiten procesadores adicionales por el sistema operativo invitado, considere la posibilidad de escalar horizontalmente mediante la adición de máquinas virtuales adicionales en el equipo físico y la asignación de procesadores disponibles para estas máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="84c64-213">In the case where VPTR is high, LPTR is low, there are available logical processors to allocate, but additional processors are not supported by the guest operating system, consider scaling out by adding additional virtual machines to the physical computer and allocating available processors to these virtual machines.</span></span> <span data-ttu-id="84c64-214">En el caso donde VPTR y LPTR son altos, la configuración está insertando los límites del equipo físico y debe considerar escalar horizontalmente mediante la adición de más máquinas virtuales de Hyper-V y de otro equipo físico en el entorno.</span><span class="sxs-lookup"><span data-stu-id="84c64-214">In the case where both VPTR and LPTR are high, the configuration is pushing the limits of the physical computer and should consider scaling out by adding another physical computer and additional Hyper-V virtual machines to the environment.</span></span> <span data-ttu-id="84c64-215">El diagrama de flujo siguiente describe el proceso que se debe usar para solucionar el problema de rendimiento del procesador en un entorno de Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="84c64-215">The flowchart below describes the process that should be used when troubleshooting processor performance in a Hyper-V environment.</span></span>  

    <span data-ttu-id="84c64-216">![Solución de problemas de rendimiento de CPU en Hyper&#45;V](../technical-guides/media/623fdcd6-e80b-4ba9-bf46-5d9b92b6612b.gif "623fdcd6-e80b-4ba9-bf46-5d9b92b6612b")</span><span class="sxs-lookup"><span data-stu-id="84c64-216">![Troubleshooting CPU Performance on Hyper&#45;V](../technical-guides/media/623fdcd6-e80b-4ba9-bf46-5d9b92b6612b.gif "623fdcd6-e80b-4ba9-bf46-5d9b92b6612b")</span></span>  
    <span data-ttu-id="84c64-217">Solución de problemas de rendimiento de CPU en un entorno de Hyper-V</span><span class="sxs-lookup"><span data-stu-id="84c64-217">Troubleshooting CPU performance in a Hyper-V Environment</span></span>  

  > [!NOTE]  
  >  <span data-ttu-id="84c64-218">**Los procesadores del sistema operativo invitado no tiene una configure la afinidad de procesadores o núcleos físicos** – el hipervisor determina los recursos físicos se usan.</span><span class="sxs-lookup"><span data-stu-id="84c64-218">**Guest operating system processors do not have a set affinity to physical processors/cores** – The hypervisor determines how physical resources are used.</span></span> <span data-ttu-id="84c64-219">En el caso de utilización del procesador, el hipervisor programa el tiempo de procesador del invitado para el procesador físico en el formulario de subprocesos.</span><span class="sxs-lookup"><span data-stu-id="84c64-219">In the case of processor utilization, the hypervisor schedules the guest processor time to physical processor in the form of threads.</span></span> <span data-ttu-id="84c64-220">Esto significa que la carga del procesador de máquinas virtuales se distribuirán entre los procesadores del equipo físico.</span><span class="sxs-lookup"><span data-stu-id="84c64-220">This means the processor load of virtual machines will be spread across the processors of the physical computer.</span></span> <span data-ttu-id="84c64-221">Además, las máquinas virtuales no puede superar la utilización del procesador del número de procesadores lógicos, por ejemplo, si una sola máquina virtual está configurada para ejecutarse con 2 procesadores lógicos en un equipo físico con 8 procesadores o núcleos, configurado el máquina virtual no puede superar la capacidad del procesador del número de procesadores lógicos configurados (en este caso 2 procesadores).</span><span class="sxs-lookup"><span data-stu-id="84c64-221">Furthermore, virtual machines cannot exceed the processor utilization of the configured number of logical processors, for example if a single virtual machine is configured to run with 2 logical processors on a physical computer with 8 processors/cores, then the virtual machine cannot exceed the processor capacity of the number of configured logical processors (in this case 2 processors).</span></span>  

- <span data-ttu-id="84c64-222">**Medir la utilización del procesador general del entorno de Hyper-V mediante el rendimiento de Hyper-V supervisar contadores -** para fines de medición de uso de procesador, el sistema operativo host lógicamente se ve como simplemente otro sistema operativo invitado .</span><span class="sxs-lookup"><span data-stu-id="84c64-222">**Measure overall processor utilization of the Hyper-V environment using Hyper-V performance monitor counters -** For purposes of measuring processor utilization, the host operating system is logically viewed as just another guest operating system.</span></span> <span data-ttu-id="84c64-223">Por lo tanto, el "\Processor(\*)\\% Processor Time" contador del monitor mide el uso de procesador del sistema operativo host solo.</span><span class="sxs-lookup"><span data-stu-id="84c64-223">Therefore, the “\Processor(\*)\\% Processor Time” monitor counter measures the processor utilization of the host operating system only.</span></span> <span data-ttu-id="84c64-224">Para medir el uso total de procesador físico del sistema operativo del host y todos los sistemas operativos de invitado, utilice la "\Hyper-V hipervisor lógico procesador (_Total)\\% Total de tiempo de ejecución" contador del monitor de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="84c64-224">To measure total physical processor utilization of the host operating system and all guest operating systems, use the “\Hyper-V Hypervisor Logical Processor(_Total)\\% Total Run Time” performance monitor counter.</span></span> <span data-ttu-id="84c64-225">Este contador mide el porcentaje total de tiempo invertido por el procesador ejecuta tanto el sistema operativo host y todos los sistemas operativos invitados.</span><span class="sxs-lookup"><span data-stu-id="84c64-225">This counter measures the total percentage of time spent by the processor running the both the host operating system and all guest operating systems.</span></span>  

   <span data-ttu-id="84c64-226">Use los siguientes umbrales para evaluar el uso de procesador total del entorno de Hyper-V mediante la "\Hyper-V hipervisor lógico procesador (_Total)\\% Total de tiempo de ejecución" contador del monitor de rendimiento:</span><span class="sxs-lookup"><span data-stu-id="84c64-226">Use the following thresholds to evaluate overall processor utilization of the Hyper-V environment using the “\Hyper-V Hypervisor Logical Processor(_Total)\\% Total Run Time” performance monitor counter:</span></span>  

  - <span data-ttu-id="84c64-227">Menos del 60% consumido = correcto</span><span class="sxs-lookup"><span data-stu-id="84c64-227">Less than 60% consumed = Healthy</span></span>  

  - <span data-ttu-id="84c64-228">60-89% consumido = supervisión o precaución</span><span class="sxs-lookup"><span data-stu-id="84c64-228">60% - 89% consumed = Monitor or Caution</span></span>  

  - <span data-ttu-id="84c64-229">90% - 100% consumido = crítico, rendimiento se verá afectado negativamente</span><span class="sxs-lookup"><span data-stu-id="84c64-229">90% - 100% consumed = Critical, performance will be adversely affected</span></span>  

    <span data-ttu-id="84c64-230">Para obtener más información acerca de la utilización del procesador, revise los siguientes recursos:</span><span class="sxs-lookup"><span data-stu-id="84c64-230">For more information about processor utilization review the following resources:</span></span>  

  - <span data-ttu-id="84c64-231">"Cómo: identificar las funciones que causan un cuello de botella de CPU alta de modo de usuario para aplicaciones de servidor en un entorno de producción" en [ http://go.microsoft.com/fwlink/?LinkID=107047 ](http://go.microsoft.com/fwlink/?LinkID=107047).</span><span class="sxs-lookup"><span data-stu-id="84c64-231">“How To: Identify Functions causing a High User-mode CPU Bottleneck for Server Applications in a Production Environment” at [http://go.microsoft.com/fwlink/?LinkID=107047](http://go.microsoft.com/fwlink/?LinkID=107047).</span></span>  

  - <span data-ttu-id="84c64-232">"Capítulo 15: medir el rendimiento de .NET Application" en [ http://go.microsoft.com/fwlink/?LinkId=121073 ](http://go.microsoft.com/fwlink/?LinkId=121073).</span><span class="sxs-lookup"><span data-stu-id="84c64-232">“Chapter 15 - Measuring .NET Application Performance” at [http://go.microsoft.com/fwlink/?LinkId=121073](http://go.microsoft.com/fwlink/?LinkId=121073).</span></span>

---
title: "Lista de comprobación: Medir el rendimiento en Hyper-V | Documentos de Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: f32c95f4-a4eb-412b-9fa7-140e80b85e5a
caps.latest.revision: "13"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 6aefa415bec4b996fa7b5cd4689c48f834dc36a2
ms.sourcegitcommit: 3fc338e52d5dbca2c3ea1685a2faafc7582fe23a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 12/01/2017
---
# <a name="checklist-measuring-performance-on-hyper-v"></a>Lista de comprobación: Medir el rendimiento en Hyper-V
Aunque la mayoría de los principios de analizar el rendimiento de un sistema operativo instalado en un rendimiento de la máquina virtual de Hyper-V es los mismos que analizar el rendimiento de un sistema operativo instalado en un equipo físico, muchos de los métodos de colección son diferentes. Las secciones siguientes deben usarse como una referencia rápida al evaluar el rendimiento de la solución de BizTalk Server que se ejecuta en un sistema operativo instalado en una máquina virtual de Hyper-V.  
  
## <a name="measuring-disk-io-performance"></a>Medir el rendimiento de E/S de disco  
 Utilice los siguientes contadores del monitor de rendimiento para medir el rendimiento de E/S de disco en un sistema operativo instalado en una máquina virtual de Hyper-V:  
  
|Paso|Referencia|  
|----------|---------------|  
|**Medir la latencia de disco en un sistema operativo de host de Hyper-V** : el mejor indicador inicial del rendimiento de disco en un sistema operativo de host de Hyper-V se obtiene mediante el uso de la Bandeja de entrada de "\Logical disco (*) \Avg. Segundos/lectura de disco"y" disco \Logical (\*) \Avg. Contadores del monitor de rendimiento de disco en segundos/escritura". Estos contadores del monitor de rendimiento miden la cantidad de tiempo que leen y escriben tardan las operaciones para responder al sistema operativo. Como regla general, los tiempos de respuesta promedio mayores que 15 ms se consideran deficiente. Como regla general, los tiempos de respuesta promedio mayores que 15 ms se consideran deficiente. Esto se basa en tiempo de una sola unidad de disco de 7200 RPM sin caché de búsqueda típica. Se recomienda el uso de disco lógico frente a los contadores del monitor de rendimiento de disco físico porque servicios y aplicaciones de Windows usan las unidades lógicas que se representan como letras de unidad en el que puede ser el disco físico (LUN) que se presentan en el sistema operativo consta de varias unidades de disco físicas en una matriz de discos. Utilice la siguiente regla general al medir la latencia de disco en el sistema de operativo de host de Hyper-V mediante la \Logical disco (\*) \Avg. Disco a disco/seg o \Logical (\*) \Avg. Contadores de monitor de rendimiento de segundos/escritura de disco:<br /><br /> Esto se basa en tiempo de una sola unidad de disco de 7200 RPM sin caché de búsqueda típica. Se recomienda el uso de disco lógico frente a los contadores del monitor de rendimiento de disco físico porque servicios y aplicaciones de Windows usan las unidades lógicas que se representan como letras de unidad en el que puede ser el disco físico (LUN) que se presentan en el sistema operativo consta de varias unidades de disco físicas en una matriz de discos. Utilice la siguiente regla general al medir la latencia de disco en el sistema de operativo de host de Hyper-V mediante la \Logical disco (\*) \Avg. Disco a disco/seg o \Logical (\*) \Avg. Contadores de monitor de rendimiento de segundos/escritura de disco:<br /><br /> -1 ms para 15 ms = correcto<br />-15 ms a 25 ms = advertencia o el Monitor<br />-26ms o mayor = crítico, se verá afectado negativamente el rendimiento **Nota:** discos físicos instalados en un entorno no virtualizado ofrecen un mejor rendimiento que los discos que se tiene acceso a través de un sistema operativo de host de Hyper-V. Si el rendimiento de disco es fundamental para el rendimiento general de la aplicación, considere la posibilidad de hospedaje discos en solo un hardware físico. **Nota:** al evaluar el rendimiento de E/S de disco, asegúrese de que configura el software antivirus para excluir el examen de las particiones de disco que se va a evaluar. Detección de virus introduce una sobrecarga que puede afectar negativamente al rendimiento y resultados de pruebas de sesgado. <br /><br /> **Medir la latencia de disco en sistemas operativos invitados** : tiempos de respuesta de los discos usados por los sistemas operativos invitados se pueden medir con los mismos contadores de monitor de rendimiento usados para medir los tiempos de respuesta de los discos usados por el host de Hyper-V funciona sistema.|Para obtener más información sobre el análisis de rendimiento de disco, vea los siguientes recursos:<br /><br /> -Sección "Sobrecarga de rendimiento de SQL Server de ejecución en Hyper-V" de "Ejecuta SQL Server 2008 in a Hyper-V entorno – Best Practices and Performance Considerations" notas del producto en [http://go.microsoft.com/fwlink/?LinkId=144622](http://go.microsoft.com/fwlink/?LinkId=144622).<br />-Eviten Disk-Bound Problems en [http://go.microsoft.com/fwlink/?LinkId=120947](http://go.microsoft.com/fwlink/?LinkId=120947).<br />-Procedimientos recomendados de E/S previas a la implementación de SQL Server en [http://go.microsoft.com/fwlink/?LinkId=120948](http://go.microsoft.com/fwlink/?LinkId=120948).<br />-Sección "Cuellos de botella de E/S" de la "problemas de rendimiento de la solución de problemas en SQL Server 2008" notas del producto disponibles en [http://go.microsoft.com/fwlink/?LinkID=202135](http://go.microsoft.com/fwlink/?LinkID=202135).<br />: Cómo identificar un cuello de botella de rendimiento de disco mediante la herramienta de Microsoft Server Performance Advisor (SPA) en [http://go.microsoft.com/fwlink/?LinkID=98096](http://go.microsoft.com/fwlink/?LinkID=98096).|  
  
## <a name="measuring-memory-performance"></a>Medir el rendimiento de memoria  
 Utilice los siguientes contadores del monitor de rendimiento para medir el impacto de la memoria disponible en el rendimiento de un sistema operativo instalado en una máquina virtual de Hyper-V:  
  
|Paso|Referencia|  
|----------|---------------|  
|**Medir la memoria disponible en el sistema operativo de host de Hyper-V** : se puede determinar la cantidad de memoria física disponible para el sistema operativo de host de Hyper-V mediante la supervisión del contador del monitor de rendimiento "\Memory\Available MBytes" en el equipo físico. Este contador indica la cantidad de memoria física libre disponible para el sistema operativo host. Utilice las siguientes reglas básicas al evaluar la memoria física disponible para el sistema operativo host:<br /><br /> <ul><li>**\Memory\Available Mbytes** – MBytes disponibles mide la cantidad de memoria física disponible para procesos que se ejecutan en el equipo, como un porcentaje de memoria física instalada en el equipo. Las siguientes directrices se aplican al medir el valor de este contador del monitor de rendimiento:<br /><br /> <ul><li>50% de memoria libre disponible o más = correcto</li><li>25% de memoria libre disponible = Monitor</li><li>10% de memoria libre disponible = advertencia</li><li>Menos del 5% de memoria libre disponible = crítico, se verá afectado negativamente el rendimiento</li></ul></li><li>**\Memory\Pages/sec** : este contador del monitor de rendimiento mide la velocidad a la que las páginas son de lectura o escritas en disco para resolver errores de página severos. Para resolver errores severos de página, el sistema operativo debe intercambiar el contenido de la memoria en el disco, lo que afecta negativamente al rendimiento. Un gran número de páginas por segundo en correlación con poca memoria física disponible puede indicar una falta de memoria física. Las siguientes directrices se aplican al medir el valor de este contador del monitor de rendimiento:<br /><br /> <ul><li>Menos de 500 = correcto</li><li>500 - 1000 = monitor o precaución</li><li>Mayor que 1000 = crítico, se verá afectado negativamente el rendimiento</li></ul></li></ul><br /> **Medir la memoria disponible en el sistema operativo invitado** : memoria que está disponible para los sistemas operativos invitados se puede medir con los mismos contadores de monitor de rendimiento usados para medir la memoria disponible para el sistema operativo de host de Hyper-V.|Para obtener más información sobre las repercusiones de memoria física disponible en el rendimiento del servidor de aplicación, vea el tema de Ayuda de Exchange Server 2003 "Ruling Out enlazadas a memoria Problems" en [http://go.microsoft.com/fwlink/?LinkId=121056](http://go.microsoft.com/fwlink/?LinkId=121056).|  
  
## <a name="measuring-network-performance"></a>Medir el rendimiento de red  
 Hyper-V permite que los equipos de invitado compartir el mismo adaptador de red físico. Esto contribuye a consolidar hardware, tenga cuidado para no saturar el adaptador físico. Para garantizar el buen estado de la red utilizada por las máquinas virtuales de Hyper-V, use los métodos siguientes:  
  
|Paso|Referencia|  
|----------|---------------|  
|**Probar la latencia de red**|Haga ping a cada máquina virtual para asegurarse de latencia de red adecuada. En redes de área local, espera recibir menos de 1 ms tiempos de respuesta.|  
|**Comprobar la pérdida de paquetes**|Use la utilidad pathping.exe para probar la pérdida de paquetes entre las máquinas virtuales. Pathping.exe mide la pérdida de paquetes en la red y está disponible con todas las versiones de [!INCLUDE[btsWinNoVersion](../includes/btswinnoversion-md.md)] desde [!INCLUDE[btsWin2kSvr](../includes/btswin2ksvr-md.md)]. Pathping.exe envía una ráfaga de 100 solicitudes ping a cada nodo de red y calcula el número de pings se devuelven. No debería haber ninguna pérdida de las solicitudes de ping de la utilidad pathping.exe en redes de área local.|  
|**Transferencias de archivos de red de prueba**|Copiar un archivo de 100MB entre máquinas virtuales y medir la cantidad de tiempo necesario para completar la copia. En un 100 Mbits correcto red (megabits), debe copiar un archivo de 100MB (megabyte) de 10 a 20 segundos. En una red de 1 Gigabit funciona correctamente, debe copiar un archivo de 100MB en torno a 3 a 5 segundos. Los tiempos de copia fuera de estos parámetros son indicativos de un problema de red. Una causa común de las transferencias de red deficientes se produce cuando el adaptador de red tiene "auto detectó" una red de dúplex medio de 10MB que impide que el adaptador de red desea aprovechar al máximo ancho de banda disponible.|  
|**Utilización de la red de medida en el sistema operativo de host de Hyper-V**|Utilice los siguientes contadores del monitor de rendimiento para medir la utilización de la red en el sistema operativo de host de Hyper-V:<br /><br /> **\Network interfaz (\*) \Bytes totales/seg.** : el porcentaje de utilización de la red se calcula multiplicando Bytes totales/seg por 8 para convertir en bits, multiplique el resultado por 100, y actual de la división por el adaptador de red ancho de banda. Utilice los siguientes umbrales para evaluar el uso de ancho de banda de red:<br /><br /> -Menos del 40% de la interfaz consumida = correcto<br />-41-64% de la interfaz consumida = Monitor o precaución<br />-65-100% de la interfaz consumida = crítico, se verá afectado negativamente el rendimiento<br /><br /> **\Network interfaz (\*) \Output longitud de cola** : la longitud de cola de salida mide el número de subprocesos que esperan en el adaptador de red. Si hay más de 2 subprocesos en espera en el adaptador de red, la red puede ser un cuello de botella. Causas comunes de esto son latencia deficiente o tasas de colisión alta en la red. Utilice los siguientes umbrales para evaluar la longitud de la cola de salida:<br /><br /> -0 = correcto<br />-2 1 = el monitor o la precaución<br />-Mayor que 2 = crítico, se verá afectado negativamente el rendimiento.<br /><br /> Asegúrese de que los adaptadores de red para todos los equipos (físicos y virtuales) en la solución están configurados para usar el mismo valor para la unidad de transmisión máxima (MTU). Para obtener más información acerca de cómo configurar el valor MTU, vea "Parámetros de configuración de TCP/IP de apéndice A:" en [http://go.microsoft.com/fwlink/?LinkId=113716](http://go.microsoft.com/fwlink/?LinkId=113716).<br /><br /> Si se mide una longitud de cola de salida de 2 o más, considere la posibilidad de agregar uno o más adaptadores de red físicos en el equipo físico que hospeda las máquinas virtuales y enlazar los adaptadores de red utilizados por los sistemas operativos de invitado para estos adaptadores de red físicos.|  
|**Utilización de la red de medida en los sistemas operativos invitados**|Si un adaptador de red en la partición raíz de Hyper-V está ocupado según se indica en los contadores del monitor de rendimiento que se ha mencionado anteriormente, puede usar el contador del monitor de rendimiento "\Hyper-V adaptador de red Virtual (*) \Bytes/sec" para identificar la red virtual adaptadores están consumiendo la mayor parte utilización de la red.|  
  
 Para obtener más información sobre el análisis de rendimiento de red, vea "Capítulo 15 – medir el rendimiento de aplicaciones .NET" en [http://go.microsoft.com/fwlink/?LinkId=121073](http://go.microsoft.com/fwlink/?LinkId=121073).  
  
## <a name="measuring-processor-performance"></a>Medir el rendimiento del procesador  
 Utilice los métodos siguientes para evaluar el rendimiento del procesador en un sistema operativo instalado en una máquina virtual de Hyper-V:  
  
-   **Miden el uso de procesador del sistema operativo invitado -** tradicionalmente, se puede medir el rendimiento del procesador mediante la "\Processor(*)\\% Processor Time" contador del monitor de rendimiento. Esto no es un contador exacto para evaluar el uso de procesador de un sistema operativo invitado aunque porque Hyper-V mide e informa de este valor en relación con el número de procesadores que se asigna a la máquina virtual. Si se asignan más procesadores para máquinas virtuales en ejecución que están realmente presentes en el equipo físico, el valor devuelto por cada sistema operativo para el "\Processor (\*)\\% Processor Time" contador del monitor de rendimiento será baja, aunque en realidad el uso del procesador es un cuello de botella. Esto ocurre porque los procesadores virtuales usan los procesadores físicos en un modo round-robin. Cada procesador virtual se intente y asignar a sí mismo un recurso compartido de recursos del sistema global, por lo que en un sistema de 4 procesadores físicos, cada procesador virtual hará por predeterminado intenta utilizar un 25% de los recursos del sistema. Si los 8 procesadores virtuales se crean Esto significa que colectivamente los procesadores virtuales intentará utilizar el 200% de la capacidad de CPU del servidor. En este caso, cada procesador virtual notificará una baja utilización según lo medido por la "\Processor (\*)\\% Processor Time" contador del monitor de rendimiento (en relación con el nivel de espera) y el contexto excesivo cambiar entre la procesadores virtuales dará como resultado un rendimiento escaso para cada máquina virtual. En este escenario, considere la posibilidad de reducir el número de procesadores virtuales asignados a máquinas virtuales de Hyper-V en el sistema operativo host. Hyper-V proporciona hipervisor objetos de rendimiento para supervisar el rendimiento de los procesadores lógicos y virtuales. Un procesador lógico está directamente relacionado con el número de procesadores o núcleos que están instalados en el equipo físico. Por ejemplo, 2 procesadores de núcleo cuádruple instalados en el equipo físico se correlacionan con 8 procesadores lógicos. Procesadores virtuales son lo que realmente utilizan las máquinas virtuales y toda la ejecución de las particiones raíz y secundario se produce en procesadores virtuales.  
  
     Hyper-V proporciona hipervisor objetos de rendimiento para supervisar el rendimiento de los procesadores lógicos y virtuales. Un procesador lógico está directamente relacionado con el número de procesadores o núcleos que están instalados en el equipo físico. Por ejemplo, 2 procesadores de núcleo cuádruple instalados en el equipo físico se correlacionan con 8 procesadores lógicos. Procesadores virtuales son lo que realmente utilizan las máquinas virtuales y toda la ejecución de las particiones raíz y secundario se produce en procesadores virtuales.  
  
     Para medir con precisión la utilización del procesador de un sistema operativo invitado, utilice la "_Total lógico de hipervisor de Hyper-V % Total de tiempo de ejecución" contador del monitor de rendimiento en el sistema operativo de host de Hyper-V. Utilice los siguientes umbrales para evaluar invitado operativo sistema procesador uso con la "_Total lógico de hipervisor de Hyper-V % Total de tiempo de ejecución" contador del monitor de rendimiento:  
  
    -   Consumidas menos de 60% = correcto  
  
    -   60-89% consumido = Monitor o precaución  
  
    -   90% y 100% consumido = crítico, se verá afectado negativamente el rendimiento  
  
     Para solucionar problemas de rendimiento del procesador de los sistemas operativos de invitado en un entorno de Hyper-V, es mejor lo posible para un equilibrio entre los valores notificados por el sistema operativo de host para "\Hyper-V hipervisor lógico procesador (_Total)\\% de ejecución Total Tiempo"(LPTR) y" \Hyper-V hipervisor Virtual procesador (_Total)\\tiempo de ejecución Total de % "(VPTR). Si LPTR es alta y baja VPTR, a continuación, compruebe que no hay más procesadores que se asignan a las máquinas virtuales que están físicamente disponibles en el equipo físico. Utilice la "\Hyper-V hipervisor Virtual Processor(*)\\% de tiempo de ejecución de invitado" contadores para determinar qué procesadores virtuales consumen CPU y anular la asignación de procesadores virtuales de máquinas virtuales según corresponda configurar una asignación uno a uno de procesadores virtuales y los procesadores lógicos. Para obtener más información acerca de cómo configurar una asignación uno a uno de los procesadores virtuales y los procesadores lógicos, vea la sección "Optimizar el rendimiento del procesador" en [lista de comprobación: optimizar el rendimiento en Hyper-V](~/technical-guides/checklist-optimizing-performance-on-hyper-v.md). Si VPTR es alta y baja LPTR, a continuación, considere la posibilidad de asignar procesadores adicionales a las máquinas virtuales si hay procesadores lógicos disponibles y si los procesadores adicionales son compatibles con el sistema operativo invitado. En el caso donde VPTR es alto, LPTR es bajo, hay procesadores lógicos disponibles para asignar, pero procesadores adicionales no son compatibles con el sistema operativo invitado, considere la posibilidad de escalado horizontal mediante la adición de máquinas virtuales adicionales en el equipo físico y asignación de procesadores disponibles para estas máquinas virtuales. En el caso donde VPTR y LPTR son altos, la configuración está forzando los límites del equipo físico y debe tener en cuenta escalado horizontal mediante la adición de otro equipo físico y máquinas virtuales de Hyper-V adicionales en el entorno. El diagrama de flujo siguiente describe el proceso que debe usarse al solucionar problemas de rendimiento del procesador en un entorno de Hyper-V.  
  
     Si VPTR es alto y LPTR es baja, considere la posibilidad de asignar procesadores adicionales a las máquinas virtuales si hay procesadores lógicos disponibles y si los procesadores adicionales son compatibles con el sistema operativo invitado. En el caso donde VPTR es alto, LPTR es bajo, hay procesadores lógicos disponibles para asignar, pero procesadores adicionales no son compatibles con el sistema operativo invitado, considere la posibilidad de escalado horizontal mediante la adición de máquinas virtuales adicionales en el equipo físico y asignación de procesadores disponibles para estas máquinas virtuales. En el caso donde VPTR y LPTR son altos, la configuración está forzando los límites del equipo físico y debe tener en cuenta escalado horizontal mediante la adición de otro equipo físico y máquinas virtuales de Hyper-V adicionales en el entorno. El diagrama de flujo siguiente describe el proceso que debe usarse al solucionar problemas de rendimiento del procesador en un entorno de Hyper-V.  
  
     ![Solución de problemas de rendimiento de la CPU en Hyper &#45; V](../technical-guides/media/623fdcd6-e80b-4ba9-bf46-5d9b92b6612b.gif "623fdcd6-e80b-4ba9-bf46-5d9b92b6612b")  
Solución de problemas de rendimiento de CPU en un entorno de Hyper-V  
  
    > [!NOTE]  
    >  **Procesadores de sistema operativo invitado no tiene una afinidad de conjunto y los procesadores o núcleos físicos** – el hipervisor determina los recursos físicos de cómo se utilizan. En el caso de utilización del procesador, el hipervisor programa el tiempo de procesador invitado procesador físico en el formulario de subprocesos. Esto significa que la carga del procesador de máquinas virtuales se distribuirán por los procesadores del equipo físico. Además, las máquinas virtuales no puede superar la utilización del procesador del número de procesadores lógicos, por ejemplo, si una sola máquina virtual se configura para ejecutarse con 2 procesadores lógicos en un equipo físico con 8 procesadores o núcleos, configurado el máquina virtual no puede superar la capacidad de procesamiento del número de procesadores lógicos configurados (en este caso 2 procesadores).  
  
-   **Medir la utilización del procesador general del entorno de Hyper-V con Hyper-V de rendimiento de supervisar los contadores de -** con fines de medir la utilización del procesador, el sistema operativo host lógicamente se visualiza como simplemente otro sistema operativo invitado . Por lo tanto, el "\Processor(*)\\% Processor Time" contador del monitor mide el uso de procesador del sistema operativo host solo. Para medir la utilización total de procesador físico del sistema operativo del host y todos los sistemas operativos de invitado, utilice la "\Hyper-V hipervisor lógico procesador (_Total)\\% Total de tiempo de ejecución" contador del monitor de rendimiento. Este contador mide el porcentaje total de tiempo invertido por el procesador se ejecuta tanto el sistema operativo host y todos los sistemas operativos invitados.  
  
     Utilice los siguientes umbrales para evaluar la utilización del procesador general del entorno de Hyper-V con el "\Hyper-V hipervisor lógico procesador (_Total)\\% Total de tiempo de ejecución" contador del monitor de rendimiento:  
  
    -   Consumidas menos de 60% = correcto  
  
    -   60-89% consumido = Monitor o precaución  
  
    -   90% y 100% consumido = crítico, se verá afectado negativamente el rendimiento  
  
     Para obtener más información acerca de la utilización del procesador, revise los siguientes recursos:  
  
    -   "Cómo: identificar las funciones que se produce un cuello de botella de CPU alta de modo de usuario para las aplicaciones de servidor en un entorno de producción" en [http://go.microsoft.com/fwlink/?LinkID=107047](http://go.microsoft.com/fwlink/?LinkID=107047).  
  
    -   "Capítulo 15 - medir rendimiento de la aplicación. NET" en [http://go.microsoft.com/fwlink/?LinkId=121073](http://go.microsoft.com/fwlink/?LinkId=121073).
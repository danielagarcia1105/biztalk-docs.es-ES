---
title: Alta disponibilidad para bases de datos | Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 63813d87-1ce4-4645-bb2a-d55e413fcace
caps.latest.revision: 3
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 65e3a5f3c6f4bea186dfe75396016ddd45e8ffcf
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/27/2018
ms.locfileid: "36983157"
---
# <a name="high-availability-for-databases"></a><span data-ttu-id="f423e-102">Alta disponibilidad para bases de datos</span><span class="sxs-lookup"><span data-stu-id="f423e-102">High Availability for Databases</span></span>
<span data-ttu-id="f423e-103">BizTalk Server se basa principalmente en SQL Server para almacén de datos y la persistencia de datos.</span><span class="sxs-lookup"><span data-stu-id="f423e-103">BizTalk Server relies heavily on SQL Server for data store and data persistence.</span></span> <span data-ttu-id="f423e-104">Los demás componentes y hosts de BizTalk Server tienen funciones específicas en el proceso de integrar aplicaciones empresariales diferentes (por ejemplo, recibir, procesar o enrutar mensajes), pero el equipo de la base de datos captura este trabajo y lo almacena en disco.</span><span class="sxs-lookup"><span data-stu-id="f423e-104">All other components and hosts in BizTalk Server have specific roles in the process of integrating disparate business applications (for example, receiving, processing, or routing messages), but the database computer captures this work and persists it to disk.</span></span> <span data-ttu-id="f423e-105">Por ejemplo, cuando BizTalk Server recibe un mensaje entrante, el host de recepción lo conserva en la base de datos de cuadro de mensajes antes de otros hosts lo recuperen el mensaje para la orquestación de procesamiento y envío.</span><span class="sxs-lookup"><span data-stu-id="f423e-105">For example, when BizTalk Server receives an incoming message, the receive host persists it to the MessageBox database before other hosts retrieve the message for orchestration processing and sending.</span></span> <span data-ttu-id="f423e-106">Si la solución de BizTalk implica orquestación, BizTalk Server enruta el mensaje al host que ejecuta el proceso empresarial (host de procesamiento) y guarda el mensaje en la base de datos de cuadro de mensajes cuando finaliza la orquestación.</span><span class="sxs-lookup"><span data-stu-id="f423e-106">If your BizTalk solution involves orchestration, BizTalk Server routes the message to the host that executes the business process (processing host), and saves the message to the MessageBox database after the orchestration finishes.</span></span> <span data-ttu-id="f423e-107">El host de envío recupera entonces el mensaje de la base de datos antes de enviarlo a la aplicación externa a través del adaptador de envío correspondiente.</span><span class="sxs-lookup"><span data-stu-id="f423e-107">The sending host then retrieves the message from the database before sending it to the external application through the appropriate send adapter.</span></span>  
  
 <span data-ttu-id="f423e-108">Para proporcionar alta disponibilidad para las bases de datos de BizTalk Server, use la agrupación en clústeres de Windows para configurar dos o más equipos que ejecutan SQL Server para crear un clúster de servidores.</span><span class="sxs-lookup"><span data-stu-id="f423e-108">To provide high availability for the BizTalk Server databases, use Windows Clustering to configure two or more computers that are running SQL Server to create a server cluster.</span></span> <span data-ttu-id="f423e-109">Esta agrupación de servidores proporciona redundancia y tolerancia a errores para las bases de datos de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="f423e-109">This server clustering provides redundancy and fault tolerance for the BizTalk Server databases.</span></span> <span data-ttu-id="f423e-110">A diferencia de la agrupación con equilibrio de carga, en la que un grupo de equipos funciona conjuntamente para aumentar la disponibilidad y la escalabilidad, la agrupación de servidores suele consistir en un par de equipos de base de datos en una configuración activo/pasivo, de modo que un equipo proporciona recursos de copia de seguridad para el otro.</span><span class="sxs-lookup"><span data-stu-id="f423e-110">Unlike load-balanced clustering, where a group of computers functions together to increase availability and scalability, server clustering typically involves a pair of database computers in an active/passive configuration so that one computer provides backup resources for the other.</span></span>  
  
 <span data-ttu-id="f423e-111">La siguientes ilustración muestra un nivel de base de datos de BizTalk Server que obtiene alta disponibilidad mediante una agrupación de servidores de tipo activo/pasivo.</span><span class="sxs-lookup"><span data-stu-id="f423e-111">The following figure shows a BizTalk Server database tier with high availability through active/passive server clustering.</span></span>  
  
 <span data-ttu-id="f423e-112">![Nivel de base de datos de BizTalk Server](../core/media/tdi-highava-sqlcluster.gif "TDI_HighAva_SQLCluster")</span><span class="sxs-lookup"><span data-stu-id="f423e-112">![BizTalk Server Database Tier](../core/media/tdi-highava-sqlcluster.gif "TDI_HighAva_SQLCluster")</span></span>  
  
 <span data-ttu-id="f423e-113">Si el equipo de base de datos activo detecta errores o deja de funcionar, el equipo pasivo se vuelve activo y asume el control de los recursos de base de datos hasta que se soluciona el problema.</span><span class="sxs-lookup"><span data-stu-id="f423e-113">If the active database computer encounters errors or fails, the passive computer becomes active and assumes control over the database resources until the failed computer is repaired.</span></span> <span data-ttu-id="f423e-114">El servicio de base de datos conmuta por error y restaura las conexiones de datos en el nuevo equipo activo y permite que la aplicación de BizTalk siga funcionando.</span><span class="sxs-lookup"><span data-stu-id="f423e-114">The database service fails over and restores data connections to the new active computer and enables the BizTalk application to continue functioning.</span></span>  
  
## <a name="biztalk-server-databases"></a><span data-ttu-id="f423e-115">Bases de datos de BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="f423e-115">BizTalk Server Databases</span></span>  
 <span data-ttu-id="f423e-116">Microsoft BizTalk Server instala varias bases de datos en el servidor SQL Server.</span><span class="sxs-lookup"><span data-stu-id="f423e-116">Microsoft BizTalk Server installs several databases in SQL Server.</span></span> <span data-ttu-id="f423e-117">La siguiente tabla muestra las características de uso típico de las bases de datos de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="f423e-117">The following table shows typical usage characteristics for the BizTalk Server databases.</span></span>  
  
|<span data-ttu-id="f423e-118">Base de datos</span><span class="sxs-lookup"><span data-stu-id="f423e-118">Database</span></span>|<span data-ttu-id="f423e-119">Nombre predeterminado de la base de datos</span><span class="sxs-lookup"><span data-stu-id="f423e-119">Default database name</span></span>|<span data-ttu-id="f423e-120">Características de uso</span><span class="sxs-lookup"><span data-stu-id="f423e-120">Usage characteristics</span></span>|  
|--------------|---------------------------|---------------------------|  
|<span data-ttu-id="f423e-121">base de datos de administración</span><span class="sxs-lookup"><span data-stu-id="f423e-121">Management database</span></span>|<span data-ttu-id="f423e-122">BizTalkMgmtDb</span><span class="sxs-lookup"><span data-stu-id="f423e-122">BizTalkMgmtDb</span></span>|<span data-ttu-id="f423e-123">Este uso de baja de identificadores de base de datos de lectura y las operaciones de escritura.</span><span class="sxs-lookup"><span data-stu-id="f423e-123">This database handles low-usage read and write operations.</span></span>|  
|<span data-ttu-id="f423e-124">Base de datos de cuadro de mensajes</span><span class="sxs-lookup"><span data-stu-id="f423e-124">MessageBox database</span></span>|<span data-ttu-id="f423e-125">BizTalkMsgBoxDb</span><span class="sxs-lookup"><span data-stu-id="f423e-125">BizTalkMsgBoxDb</span></span>|<span data-ttu-id="f423e-126">Esta base de datos identificadores hacen un uso intensivo de lectura y las operaciones de escritura.</span><span class="sxs-lookup"><span data-stu-id="f423e-126">This database handles high-usage read and write operations.</span></span>|  
|<span data-ttu-id="f423e-127">Base de datos de seguimiento</span><span class="sxs-lookup"><span data-stu-id="f423e-127">Tracking database</span></span>|<span data-ttu-id="f423e-128">BizTalkDTADb</span><span class="sxs-lookup"><span data-stu-id="f423e-128">BizTalkDTADb</span></span>|<span data-ttu-id="f423e-129">Esta base de datos controla las operaciones de escritura de uso potencialmente alto según la cantidad de datos que se configuración para realizar un seguimiento y las operaciones de lectura de poco uso.</span><span class="sxs-lookup"><span data-stu-id="f423e-129">This database handles potentially high-usage write operations depending on the amount of data that you configure to be tracked, and low-usage read operations.</span></span>|  
|<span data-ttu-id="f423e-130">base de datos de SSO</span><span class="sxs-lookup"><span data-stu-id="f423e-130">SSO database</span></span>|<span data-ttu-id="f423e-131">SSODB</span><span class="sxs-lookup"><span data-stu-id="f423e-131">SSODB</span></span>|<span data-ttu-id="f423e-132">Este uso de baja de identificadores de base de datos de lectura y las operaciones de escritura.</span><span class="sxs-lookup"><span data-stu-id="f423e-132">This database handles low-usage read and write operations.</span></span>|  
|<span data-ttu-id="f423e-133">Base de datos de análisis de BAM</span><span class="sxs-lookup"><span data-stu-id="f423e-133">BAM Analysis database</span></span>|<span data-ttu-id="f423e-134">BAMAnalysis</span><span class="sxs-lookup"><span data-stu-id="f423e-134">BAMAnalysis</span></span>|<span data-ttu-id="f423e-135">Esta base de datos de SQL Server Analysis Services controla potencialmente alto uso operaciones de lectura y escritura, dependiendo del nivel de supervisión realiza.</span><span class="sxs-lookup"><span data-stu-id="f423e-135">This SQL Server Analysis Services database handles potentially high-usage read and write operations, depending on the level of monitoring performed.</span></span>|  
|<span data-ttu-id="f423e-136">Base de datos de esquema de estrella de SAE</span><span class="sxs-lookup"><span data-stu-id="f423e-136">BAM Star Schema database</span></span>|<span data-ttu-id="f423e-137">BAMStarSchema</span><span class="sxs-lookup"><span data-stu-id="f423e-137">BAMStarSchema</span></span>|<span data-ttu-id="f423e-138">Esta base de datos de SQL Server Analysis Services controla potencialmente alto uso operaciones de lectura y escritura, dependiendo del nivel de supervisión realiza.</span><span class="sxs-lookup"><span data-stu-id="f423e-138">This SQL Server Analysis Services database handles potentially high-usage read and write operations, depending on the level of monitoring performed.</span></span>|  
|<span data-ttu-id="f423e-139">Base de datos de importación principal de BAM</span><span class="sxs-lookup"><span data-stu-id="f423e-139">BAM Primary Import database</span></span>|<span data-ttu-id="f423e-140">BAMPrimaryImport</span><span class="sxs-lookup"><span data-stu-id="f423e-140">BAMPrimaryImport</span></span>|<span data-ttu-id="f423e-141">Esta base de datos de SQL Server Analysis Services controla potencialmente alto uso operaciones de lectura y escritura, dependiendo del nivel de supervisión realiza.</span><span class="sxs-lookup"><span data-stu-id="f423e-141">This SQL Server Analysis Services database handles potentially high-usage read and write operations, depending on the level of monitoring performed.</span></span>|  
|<span data-ttu-id="f423e-142">Base de datos de archivo SAE</span><span class="sxs-lookup"><span data-stu-id="f423e-142">BAM Archive database</span></span>|<span data-ttu-id="f423e-143">BAMArchive</span><span class="sxs-lookup"><span data-stu-id="f423e-143">BAMArchive</span></span>|<span data-ttu-id="f423e-144">Esta base de datos de SQL Server Analysis Services controla potencialmente alto uso operaciones de lectura y escritura, dependiendo del nivel de supervisión realiza.</span><span class="sxs-lookup"><span data-stu-id="f423e-144">This SQL Server Analysis Services database handles potentially high-usage read and write operations, depending on the level of monitoring performed.</span></span>|  
|<span data-ttu-id="f423e-145">Base de datos del motor de reglas</span><span class="sxs-lookup"><span data-stu-id="f423e-145">Rule Engine database</span></span>|<span data-ttu-id="f423e-146">BizTalkRuleEngineDb</span><span class="sxs-lookup"><span data-stu-id="f423e-146">BizTalkRuleEngineDb</span></span>|<span data-ttu-id="f423e-147">Esta base de datos controla potencialmente poco uso operaciones de lectura y escritura, a menos que actualice las reglas.</span><span class="sxs-lookup"><span data-stu-id="f423e-147">This database handles potentially low-usage read and write operations, unless you update the rules.</span></span>|  
|<span data-ttu-id="f423e-148">Base de datos de seguimiento de Analysis Services</span><span class="sxs-lookup"><span data-stu-id="f423e-148">Tracking Analysis Services database</span></span>|<span data-ttu-id="f423e-149">BizTalkAnalysisDb</span><span class="sxs-lookup"><span data-stu-id="f423e-149">BizTalkAnalysisDb</span></span>|<span data-ttu-id="f423e-150">Identificadores hacen un uso intensivo de lectura y escritura de las operaciones de base de datos de este SQL Server Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="f423e-150">This SQL Server Analysis Services database handles high-usage read and write operations.</span></span>|  
  
 <span data-ttu-id="f423e-151">Normalmente, las operaciones en tiempo de ejecución de BizTalk Server utilizan las primeras cuatro bases de datos (base de datos de administración, las bases de datos de cuadro de mensajes, base de datos de seguimiento y base de datos SSO).</span><span class="sxs-lookup"><span data-stu-id="f423e-151">BizTalk Server runtime operations typically use the first four databases (Management database, MessageBox databases, Tracking database, and SSO database).</span></span> <span data-ttu-id="f423e-152">Función del tráfico en estas bases de datos, puede colocarlos en equipos independientes que ejecutan SQL Server.</span><span class="sxs-lookup"><span data-stu-id="f423e-152">Depending on the traffic on these databases, you can put them on separate computers that are running SQL Server.</span></span> <span data-ttu-id="f423e-153">Según la funcionalidad de BizTalk Server que use, podrá utilizar todas o algunas de las demás bases de datos de la tabla.</span><span class="sxs-lookup"><span data-stu-id="f423e-153">Depending on the BizTalk Server functionality that you use, you may have some or all of the other databases in the table.</span></span> <span data-ttu-id="f423e-154">Puede escalar horizontalmente y estas bases de datos del clúster según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="f423e-154">You can scale out and cluster these databases as needed.</span></span>  
  
 <span data-ttu-id="f423e-155">Asegúrese de que sigue buenas prácticas de implementación de SQL Server, como el uso de discos independientes para cada base de datos.</span><span class="sxs-lookup"><span data-stu-id="f423e-155">Make sure that you follow good SQL Server deployment practices, such as using separate disks for each database.</span></span>  
  
 <span data-ttu-id="f423e-156">Para las bases de datos de BizTalk Server, se recomienda que haga lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="f423e-156">For the BizTalk Server databases, we recommend that you do the following:</span></span>  
  
- <span data-ttu-id="f423e-157">**Configurar la agrupación en clústeres de conmutación por error**.</span><span class="sxs-lookup"><span data-stu-id="f423e-157">**Set up failover clustering**.</span></span> <span data-ttu-id="f423e-158">Agrupación en clústeres de conmutación por error permite que SQL Server cambiar automáticamente el procesamiento de una instancia de SQL Server desde un servidor con errores a un servidor en funcionamiento.</span><span class="sxs-lookup"><span data-stu-id="f423e-158">Failover clustering enables SQL Server to automatically switch the processing for an instance of SQL Server from a failed server to a working server.</span></span>  
  
   <span data-ttu-id="f423e-159">La base de datos de importación principal de BAM recopila datos de eventos.</span><span class="sxs-lookup"><span data-stu-id="f423e-159">The BAM Primary Import database collects event data.</span></span> <span data-ttu-id="f423e-160">Si se produce un desastre, se perderán los datos que se hayan escrito en la base de datos de importación principal de BAM desde la última copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="f423e-160">In the event of a disaster, data that was written to the BAM Primary Import database since the last backup will be lost.</span></span> <span data-ttu-id="f423e-161">Dado que no hay ninguna manera de volver a generar eventos perdidos, es especialmente importante habilitar la conmutación por error en la base de datos de importación principal de BAM.</span><span class="sxs-lookup"><span data-stu-id="f423e-161">Because there is no way to regenerate lost events, it is especially important that you enable failover clustering on your BAM Primary Import database.</span></span>  
  
- <span data-ttu-id="f423e-162">**Utilice SQL Server RAID 1 + 0 (matriz redundante de discos independientes)**, especialmente para la base de datos de cuadro de mensajes y la base de datos de importación principal de BAM.</span><span class="sxs-lookup"><span data-stu-id="f423e-162">**Use SQL Server RAID 1+0 (redundant array of independent disks)**, especially for the MessageBox database and the BAM Primary Import database.</span></span>  
  
  <span data-ttu-id="f423e-163">Para obtener información acerca de seguridad de las bases de datos de BizTalk Server, vea [procedimientos recomendados para la recuperación ante desastres](../technical-guides/best-practices-for-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="f423e-163">For information about backing up your BizTalk Server databases, see [Best Practices for Disaster Recovery](../technical-guides/best-practices-for-disaster-recovery.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="f423e-164">Microsoft SQL Server proporciona una solución de software conocida como la creación de reflejo de base de datos para aumentar la probabilidad de que una base de datos esté disponible.</span><span class="sxs-lookup"><span data-stu-id="f423e-164">Microsoft SQL Server provides a software solution known as database mirroring for increasing the probability that a database is available.</span></span> <span data-ttu-id="f423e-165">El uso de la creación de reflejo de base de datos de SQL Server no es una solución admitida para garantizar la alta disponibilidad de las bases de datos de Microsoft BizTalk Server debido a problemas potenciales, mantener la coherencia transaccional en las bases de datos de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="f423e-165">The use of SQL Server database mirroring is not currently a supported solution for ensuring high availability of the Microsoft BizTalk Server databases because of potential problems maintaining transactional consistency in the BizTalk Server databases.</span></span>  
>   
>  <span data-ttu-id="f423e-166">Para obtener más información sobre la creación de reflejo de base de datos y transacciones entre bases de datos en SQL Server, vea [transacciones - grupos de disponibilidad y la creación de reflejo de base de datos](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/transactions-always-on-availability-and-database-mirroring).</span><span class="sxs-lookup"><span data-stu-id="f423e-166">For more information about database mirroring and cross-database transactions in SQL Server, see [Transactions - availability groups and database mirroring](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/transactions-always-on-availability-and-database-mirroring).</span></span> <span data-ttu-id="f423e-167">Las bases de datos de BizTalk Server deben instalarse en un clúster de SQL Server para garantizar una alta disponibilidad y el trasvase de registros debe utilizarse para fines de recuperación ante desastres.</span><span class="sxs-lookup"><span data-stu-id="f423e-167">BizTalk Server databases should be installed on a SQL Server cluster to ensure high availability and log shipping should be utilized for purposes of disaster recovery.</span></span>  
>   
>  <span data-ttu-id="f423e-168">Para obtener más información acerca del trasvase de registros, vea [¿qué es BizTalk Server del trasvase de registros?](../technical-guides/what-is-biztalk-server-log-shipping.md)</span><span class="sxs-lookup"><span data-stu-id="f423e-168">For more information about log shipping, see [What Is BizTalk Server Log Shipping?](../technical-guides/what-is-biztalk-server-log-shipping.md)</span></span>  
  
## <a name="in-this-section"></a><span data-ttu-id="f423e-169">En esta sección</span><span class="sxs-lookup"><span data-stu-id="f423e-169">In This Section</span></span>  
  
-   [<span data-ttu-id="f423e-170">Agrupación en clústeres de las bases de datos de BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="f423e-170">Clustering the BizTalk Server Databases</span></span>](../technical-guides/clustering-the-biztalk-server-databases2.md)  
  
-   [<span data-ttu-id="f423e-171">Escala horizontal de las bases de datos de BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="f423e-171">Scaling Out the BizTalk Server Databases</span></span>](../technical-guides/scaling-out-the-biztalk-server-databases.md)  
  
## <a name="see-also"></a><span data-ttu-id="f423e-172">Vea también</span><span class="sxs-lookup"><span data-stu-id="f423e-172">See Also</span></span>  
 <span data-ttu-id="f423e-173">[Planificación de alta disponibilidad](../technical-guides/planning-for-high-availability2.md) </span><span class="sxs-lookup"><span data-stu-id="f423e-173">[Planning for High Availability](../technical-guides/planning-for-high-availability2.md) </span></span>  
 <span data-ttu-id="f423e-174">[Alta disponibilidad para Hosts de BizTalk](../technical-guides/high-availability-for-biztalk-hosts.md) </span><span class="sxs-lookup"><span data-stu-id="f423e-174">[High Availability for BizTalk Hosts](../technical-guides/high-availability-for-biztalk-hosts.md) </span></span>  
 <span data-ttu-id="f423e-175">[Alta disponibilidad para el servidor secreto principal](../technical-guides/high-availability-for-the-master-secret-server.md) </span><span class="sxs-lookup"><span data-stu-id="f423e-175">[High Availability for the Master Secret Server](../technical-guides/high-availability-for-the-master-secret-server.md) </span></span>  
 [<span data-ttu-id="f423e-176">Recuperación ante desastres</span><span class="sxs-lookup"><span data-stu-id="f423e-176">Disaster Recovery</span></span>](../technical-guides/disaster-recovery.md)
---
title: Base de datos de configuración previa Optimizations1 | Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: ebd0b32a-490d-4db2-a1fc-bf3bef93aeea
caps.latest.revision: 9
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 7c59c396534d6c555cfd133e949e3a5becb5375b
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/27/2018
ms.locfileid: "36998837"
---
# <a name="pre-configuration-database-optimizations"></a><span data-ttu-id="d03ed-102">Optimizaciones de base de datos de configuración previa</span><span class="sxs-lookup"><span data-stu-id="d03ed-102">Pre-Configuration Database Optimizations</span></span>
<span data-ttu-id="d03ed-103">BizTalk Server es una aplicación consume la base de datos que puede requerir la creación de hasta 13 bases de datos independientes en Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d03ed-103">BizTalk Server is an extremely database-intensive application that may require the creation of up to 13 separate databases in Microsoft SQL Server.</span></span> <span data-ttu-id="d03ed-104">Debido a la función crítica que SQL Server desempeña en cualquier entorno de BizTalk Server, resulta de gran importancia que SQL Server está configurado y optimizado para un rendimiento óptimo.</span><span class="sxs-lookup"><span data-stu-id="d03ed-104">Because of the critical role that SQL Server plays in any BizTalk Server environment, it is of paramount importance that SQL Server is configured/tuned for optimal performance.</span></span> <span data-ttu-id="d03ed-105">Si SQL Server no está optimizado para llevar a cabo correctamente, las bases de datos usados por BizTalk Server se convertirá en un cuello de botella y se verá afectado el rendimiento general del entorno de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="d03ed-105">If SQL Server is not tuned to perform well, then the databases used by BizTalk Server will become a bottleneck and the overall performance of the BizTalk Server environment will suffer.</span></span> <span data-ttu-id="d03ed-106">En este tema se describe varias optimizaciones de rendimiento de SQL Server que se deben seguir antes de instalar a BizTalk Server y configurar las bases de datos de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="d03ed-106">This topic describes several SQL Server performance optimizations that should be followed before installing BizTalk Server and configuring the BizTalk Server databases.</span></span>  
  
## <a name="set-ntfs-file-allocation-unit"></a><span data-ttu-id="d03ed-107">Establezca la unidad de asignación de archivos NTFS</span><span class="sxs-lookup"><span data-stu-id="d03ed-107">Set NTFS File Allocation Unit</span></span>  
 <span data-ttu-id="d03ed-108">SQL Server almacena sus datos en **extensiones**, que son grupos de ocho páginas de 8 KB.</span><span class="sxs-lookup"><span data-stu-id="d03ed-108">SQL Server stores its data in **Extents**, which are groups of eight 8K pages.</span></span> <span data-ttu-id="d03ed-109">Por lo tanto, para optimizar el rendimiento de disco, establezca el tamaño de unidad de asignación NTFS a 64KB como se describe en la sección "Prácticas recomendadas de configuración de disco" de SQL Server los procedimientos recomendados "Preimplementación prácticas recomendadas de E/S" disponible en el artículo [ http://go.microsoft.com/fwlink/?LinkId=140818](http://go.microsoft.com/fwlink/?LinkId=140818).</span><span class="sxs-lookup"><span data-stu-id="d03ed-109">Therefore, to optimize disk performance, set the NTFS Allocation Unit size to 64KB as described in the “Disk Configuration Best Practices” section of the SQL Server best practices article “Predeployment I/O Best Practices” available at [http://go.microsoft.com/fwlink/?LinkId=140818](http://go.microsoft.com/fwlink/?LinkId=140818).</span></span> <span data-ttu-id="d03ed-110">Para obtener más información acerca de SQL Server páginas y extensiones, vea el tema de libros en pantalla de SQL Server [descripción de páginas y extensiones](http://go.microsoft.com/fwlink/?LinkId=148939) (HYPERLINK "<http://go.microsoft.com/fwlink/?LinkId=148939>" <http://go.microsoft.com/fwlink/?LinkId=148939>).</span><span class="sxs-lookup"><span data-stu-id="d03ed-110">For more information about SQL Server pages and extents see the SQL Server Books Online topic [Understanding Pages and Extents](http://go.microsoft.com/fwlink/?LinkId=148939) ( HYPERLINK "<http://go.microsoft.com/fwlink/?LinkId=148939>" <http://go.microsoft.com/fwlink/?LinkId=148939>).</span></span>  
  
## <a name="database-planning-considerations"></a><span data-ttu-id="d03ed-111">Consideraciones de planeación de la base de datos</span><span class="sxs-lookup"><span data-stu-id="d03ed-111">Database planning considerations</span></span>  
 <span data-ttu-id="d03ed-112">Se recomienda que hospede su [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] bases de datos de almacenamiento rápido (por ejemplo, discos rápidos de SAN o discos SCSI rápidos).</span><span class="sxs-lookup"><span data-stu-id="d03ed-112">We recommend that you host your [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] databases on fast storage (for example, fast SAN disks or fast SCSI disks).</span></span> <span data-ttu-id="d03ed-113">RAID 10 (1 + 0) en lugar de RAID 5 se recomienda porque es más lento en escritura raid 5.</span><span class="sxs-lookup"><span data-stu-id="d03ed-113">We recommend RAID 10 (1+0) instead of RAID 5 because raid 5 is slower at writing.</span></span> <span data-ttu-id="d03ed-114">Discos de SAN más recientes tienen las memorias caché grandes cantidades de memoria, en que estos casos, la selección RAID no es tan importante.</span><span class="sxs-lookup"><span data-stu-id="d03ed-114">Newer SAN disks have very large memory caches, so in these cases, the RAID selection is not as important.</span></span> <span data-ttu-id="d03ed-115">Para aumentar el rendimiento, las bases de datos y sus archivos de registro pueden residir en distintos discos físicos.</span><span class="sxs-lookup"><span data-stu-id="d03ed-115">To increase performance, databases and their log files can reside on different physical disks.</span></span>  
  
## <a name="install-the-latest-service-pack-and-cumulative-updates-for-sql-server"></a><span data-ttu-id="d03ed-116">Instalar el service pack más reciente y las actualizaciones acumulativas de SQL Server</span><span class="sxs-lookup"><span data-stu-id="d03ed-116">Install the latest service pack and cumulative updates for SQL Server</span></span>  
 <span data-ttu-id="d03ed-117">Instale los últimos service packs y las últimas actualizaciones acumulativas de SQL Server 2005 y SQL Server 2008, así como los service packs más recientes de .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="d03ed-117">Install the latest service packs and the latest cumulative updates for SQL Server 2005 and SQL Server 2008 as well as the latest .NET Framework service packs.</span></span>  
  
## <a name="install-sql-service-packs-on-both-biztalk-server-and-sql-server"></a><span data-ttu-id="d03ed-118">Instalar Service Packs de SQL en BizTalk Server y SQL Server</span><span class="sxs-lookup"><span data-stu-id="d03ed-118">Install SQL Service Packs on both BizTalk Server and SQL Server</span></span>  
 <span data-ttu-id="d03ed-119">Al instalar los service packs de SQL Server, instale también el service pack en el equipo de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="d03ed-119">When installing service packs for SQL Server, also install the service pack on the BizTalk Server computer.</span></span> <span data-ttu-id="d03ed-120">BizTalk Server utiliza los componentes de cliente de SQL que actualizan los service packs de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d03ed-120">BizTalk Server uses SQL Client components that are updated by the SQL Server service packs.</span></span>  
  
## <a name="consider-implementing-the-sql-server-2008-data-collector-and-management-data-warehouse"></a><span data-ttu-id="d03ed-121">Considere la posibilidad de implementar el recopilador de datos de SQL Server 2008 y el almacén de administración de datos</span><span class="sxs-lookup"><span data-stu-id="d03ed-121">Consider implementing the SQL Server 2008 Data Collector and Management Data Warehouse</span></span>  
 <span data-ttu-id="d03ed-122">SQL Server 2008 admite el uso de los nuevos datos para pruebas y análisis de tendencias relacionados con el recopilador de datos y almacenamiento de datos de administración para recopilar el rendimiento de la base de datos o entorno.</span><span class="sxs-lookup"><span data-stu-id="d03ed-122">SQL Server 2008 accommodates the use of the new Data Collector and Management Data Warehouse to collect environment/database performance related data for test and trend analysis.</span></span> <span data-ttu-id="d03ed-123">El recopilador de datos conserva todos los datos recopilados en el almacén de datos de administración especificado.</span><span class="sxs-lookup"><span data-stu-id="d03ed-123">The Data Collector persists all collected data to the specified Management Data Warehouse.</span></span> <span data-ttu-id="d03ed-124">Aunque esto no es una optimización del rendimiento, esto será útil para el análisis de problemas de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="d03ed-124">While this is not a performance optimization, this will be useful for analysis of any performance issues.</span></span>  
  
## <a name="grant-the-account-which-is-used-for-sql-server-the-windows-lock-pages-in-memory-privilege"></a><span data-ttu-id="d03ed-125">Conceda a la cuenta que se usa para el bloqueo de Windows las páginas de privilegio de memoria de SQL Server</span><span class="sxs-lookup"><span data-stu-id="d03ed-125">Grant the account which is used for SQL Server the Windows Lock Pages In Memory privilege</span></span>  
 <span data-ttu-id="d03ed-126">Conceda a la Windows "Bloquear páginas en memoria" de privilegios a la cuenta de servicio de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d03ed-126">Grant the Windows “Lock Pages in Memory” privilege to the SQL Server service account.</span></span> <span data-ttu-id="d03ed-127">Esto debe hacerse para evitar que el sistema operativo Windows paginación a la memoria del grupo de búferes del proceso de SQL Server mediante el bloqueo de memoria asignada para el grupo de búferes en la memoria física.</span><span class="sxs-lookup"><span data-stu-id="d03ed-127">This should be done to prevent the Windows operating system from paging out the buffer pool memory of the SQL Server process by locking memory that is allocated for the buffer pool in physical memory.</span></span> <span data-ttu-id="d03ed-128">Para obtener más información, vea Microsoft Knowledge Base article 914483 "cómo reducir la paginación de memoria del grupo de búferes en la versión de 64 bits de SQL Server 2005" en [ http://go.microsoft.com/fwlink/?LinkId=148948 ](http://go.microsoft.com/fwlink/?LinkId=148948).</span><span class="sxs-lookup"><span data-stu-id="d03ed-128">For more information, see Microsoft Knowledge Base article 914483 “How to reduce paging of buffer pool memory in the 64-bit version of SQL Server 2005” at [http://go.microsoft.com/fwlink/?LinkId=148948](http://go.microsoft.com/fwlink/?LinkId=148948).</span></span>  
  
## <a name="grant-the-semanagevolumename-right-to-the-sql-server-service-account"></a><span data-ttu-id="d03ed-129">Conceder el SE_MANAGE_VOLUME_NAME a la cuenta de servicio de SQL Server</span><span class="sxs-lookup"><span data-stu-id="d03ed-129">Grant the SE_MANAGE_VOLUME_NAME right to the SQL Server Service account</span></span>  
 <span data-ttu-id="d03ed-130">Asegúrese de que la cuenta que ejecuta el servicio SQL Server tiene el privilegio de Windows "Realizar tareas de mantenimiento de volumen" o asegúrese de que pertenece a un grupo de seguridad que realiza.</span><span class="sxs-lookup"><span data-stu-id="d03ed-130">Ensure the account running the SQL Server service has the “Perform Volume Maintenance Tasks” Windows privilege or ensure it belongs to a security group which does.</span></span> <span data-ttu-id="d03ed-131">Esto permitirá que la inicialización instantánea de archivos que garantiza un rendimiento óptimo si tiene una base de datos en crecimiento automático.</span><span class="sxs-lookup"><span data-stu-id="d03ed-131">This will allow instant file initialization ensuring optimum performance if a database has to auto-grow.</span></span>  
  
## <a name="set-min-and-max-server-memory"></a><span data-ttu-id="d03ed-132">Establecer Min y Max Server Memory</span><span class="sxs-lookup"><span data-stu-id="d03ed-132">Set Min and Max Server Memory</span></span>  
 <span data-ttu-id="d03ed-133">Los equipos que ejecutan [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] que hospedan las bases de datos de BizTalk Server deben estar dedicados a ejecutar SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d03ed-133">The computers running [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] that host the BizTalk Server databases should be dedicated to running SQL Server.</span></span> <span data-ttu-id="d03ed-134">Se recomienda que el "min server memory" y las opciones de "max server memory" en cada instancia de SQL Server se establecen para especificar la cantidad fija de memoria para asignar a SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d03ed-134">We recommend that the “min server memory” and “max server memory” options on each SQL Server instance are set to specify the fixed amount of memory to allocate to SQL Server.</span></span> <span data-ttu-id="d03ed-135">En este caso, debe establecer el "min server memory" y "max server memory" en el mismo valor (es igual a la cantidad máxima de memoria física que va a usar SQL Server).</span><span class="sxs-lookup"><span data-stu-id="d03ed-135">In this case, you should set the “min server memory” and “max server memory” to the same value (equal to the maximum amount of physical memory that SQL Server will use).</span></span> <span data-ttu-id="d03ed-136">Esto reducirá la sobrecarga que se usan por SQL Server, administrar dinámicamente estos valores.</span><span class="sxs-lookup"><span data-stu-id="d03ed-136">This will reduce overhead that would otherwise be used by SQL Server dynamically managing these values.</span></span> <span data-ttu-id="d03ed-137">Ejecute los siguientes comandos de T-SQL en cada equipo de SQL Server para especificar la cantidad fija de memoria para asignar a SQL Server:</span><span class="sxs-lookup"><span data-stu-id="d03ed-137">Run the following T-SQL commands on each SQL Server computer to specify the fixed amount of memory to allocate to SQL Server:</span></span>  
  
```  
sp_configure ‘Max Server memory (MB)’,(max size in MB)  
sp_configure ‘Min Server memory (MB)’,(min size in MB)  
```  
  
 <span data-ttu-id="d03ed-138">Antes de establecer la cantidad de memoria para SQL Server, determine la configuración de memoria apropiada restando la memoria necesaria para Windows Server desde la memoria física total.</span><span class="sxs-lookup"><span data-stu-id="d03ed-138">Before you set the amount of memory for SQL Server, determine the appropriate memory setting by subtracting the memory required for Windows Server from the total physical memory.</span></span> <span data-ttu-id="d03ed-139">Se trata de la cantidad máxima de memoria que puede asignar a SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d03ed-139">This is the maximum amount of memory you can assign to SQL Server.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="d03ed-140">Si los equipos que ejecutan a SQL Server que hospedan las bases de datos de BizTalk Server también hospedan el Enterprise Single Sign-On servidor secreto principal, a continuación, es posible que deba ajustar este valor para asegurarse de que hay suficiente memoria disponible para su ejecución la Enterprise Single Sign-On Servicio.</span><span class="sxs-lookup"><span data-stu-id="d03ed-140">If the computer(s) running SQL Server that host the BizTalk Server databases also host the Enterprise Single Sign-On Master Secret Server, then you may need to adjust this value to ensure that there is sufficient memory available to run the Enterprise Single Sign-On Service.</span></span> <span data-ttu-id="d03ed-141">No es una práctica habitual para ejecutar una instancia agrupada del servicio Enterprise Single Sign-On en un clúster de SQL Server para proporcionar alta disponibilidad para el servidor secreto principal.</span><span class="sxs-lookup"><span data-stu-id="d03ed-141">It is not an uncommon practice to run a clustered instance of the Enterprise Single Sign-On service on a SQL Server cluster to provide high availability for the Master Secret Server.</span></span> <span data-ttu-id="d03ed-142">Para obtener más información acerca de la agrupación en clústeres el Enterprise Single Sign-On servidor secreto principal, vea el tema "How to Cluster the Master Secret Server" en el BizTalk Serverdocumentation en [ http://go.microsoft.com/fwlink/?LinkID=106874 ](http://go.microsoft.com/fwlink/?LinkID=106874).</span><span class="sxs-lookup"><span data-stu-id="d03ed-142">For more information about clustering the Enterprise Single Sign-On Master Secret Server, see the topic “How to Cluster the Master Secret Server” in the BizTalk Serverdocumentation at [http://go.microsoft.com/fwlink/?LinkID=106874](http://go.microsoft.com/fwlink/?LinkID=106874).</span></span>  
  
## <a name="split-the-tempdb-database-into-multiple-data-files-of-equal-size-on-each-sql-server-instance-used-by-biztalk-server"></a><span data-ttu-id="d03ed-143">Dividir la base de datos tempdb en varios archivos de datos del mismo tamaño en cada instancia de SQL Server usados por BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="d03ed-143">Split the tempdb database into multiple data files of equal size on each SQL Server instance used by BizTalk Server</span></span>  
 <span data-ttu-id="d03ed-144">Es fundamental asegurarse de que los archivos de datos que se utiliza para tempdb del mismo tamaño porque usa el algoritmo de relleno proporcional [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] se basa en el tamaño de los archivos de datos.</span><span class="sxs-lookup"><span data-stu-id="d03ed-144">Ensuring that the data files used for the tempdb are of equal size is critical because the proportional fill algorithm used by [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] is based on the size of the data files.</span></span> <span data-ttu-id="d03ed-145">Este algoritmo intenta asegurarse de que [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] rellenos de cada archivo en proporción de espacio libre restante en ese archivo para que alcanzan su capacidad máxima en aproximadamente al mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="d03ed-145">This algorithm attempts to ensure that [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] fills each file in proportion to the free space left in that file so that they reach their maximum capacity at about the same time.</span></span> <span data-ttu-id="d03ed-146">Si se crean archivos de datos con distintos tamaños, el algoritmo de relleno proporcional usará el archivo más grande para las asignaciones de página GAM en lugar de distribuir las asignaciones entre todos los archivos, con lo que frustra el propósito de crear varios archivos de datos.</span><span class="sxs-lookup"><span data-stu-id="d03ed-146">If data files are created with unequal sizes, the proportional fill algorithm will use the largest file more for GAM allocations rather than spreading the allocations between all the files, thereby defeating the purpose of creating multiple data files.</span></span> <span data-ttu-id="d03ed-147">El número de archivos de datos de la base de datos tempdb debe configurarse para que sea al menos igual que el número de procesadores que se asigna para SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d03ed-147">The number of data files for the tempdb database should be configured to be at least equal to the number of processors assigned for SQL Server.</span></span>  
  
## <a name="enable-trace-flag-t1118-as-a-startup-parameter-for-all-instances-of-sql-server"></a><span data-ttu-id="d03ed-148">Habilitar T1118 de marca de seguimiento como un parámetro de inicio para todas las instancias de SQL Server</span><span class="sxs-lookup"><span data-stu-id="d03ed-148">Enable Trace Flag T1118 as a startup parameter for all instances of SQL Server</span></span>  
 <span data-ttu-id="d03ed-149">Implementar seguimiento marca – T1118 ayuda a reducir la contención entre las instancias de SQL Server mediante la eliminación de casi todas las asignaciones de página única.</span><span class="sxs-lookup"><span data-stu-id="d03ed-149">Implementing Trace Flag –T1118 helps reduce contention across the SQL Server instances by removing almost all single page allocations.</span></span> <span data-ttu-id="d03ed-150">Para obtener más información, consulte el artículo 328551 de Microsoft Knowledge Base "PRB: mejoras de concurrencia para la base de datos tempdb" en [ http://go.microsoft.com/fwlink/?LinkID=103713 ](http://go.microsoft.com/fwlink/?LinkID=103713).</span><span class="sxs-lookup"><span data-stu-id="d03ed-150">For more information, see Microsoft Knowledge Base article 328551 "PRB: Concurrency enhancements for the tempdb database" at [http://go.microsoft.com/fwlink/?LinkID=103713](http://go.microsoft.com/fwlink/?LinkID=103713).</span></span>  
  
## <a name="do-not-change-default-sql-server-settings-for-max-degree-of-parallelism-sql-server-statistics-or-database-index-rebuilds-and-defragmentation"></a><span data-ttu-id="d03ed-151">No cambie la configuración de SQL Server predeterminado de max degree of parallelism, estadísticas de SQL Server, o vuelve a generar el índice de base de datos y la desfragmentación</span><span class="sxs-lookup"><span data-stu-id="d03ed-151">Do not change default SQL Server settings for max degree of parallelism, SQL Server statistics, or database index rebuilds and defragmentation</span></span>  
 <span data-ttu-id="d03ed-152">Si una instancia de SQL Server hospede bases de datos de BizTalk Server, ciertas opciones de SQL Server no deben cambiarse.</span><span class="sxs-lookup"><span data-stu-id="d03ed-152">If a SQL Server instance will house BizTalk Server databases, then certain SQL Server settings should not be changed.</span></span> <span data-ttu-id="d03ed-153">En concreto, las estadísticas de SQL Server en la base de datos de cuadro de mensajes y la configuración para el índice de base de datos de la SQL Server max degree of parallelism, vuelve a generar y no debe modificarse la desfragmentación.</span><span class="sxs-lookup"><span data-stu-id="d03ed-153">Specifically, the SQL Server max degree of parallelism, the SQL Server statistics on the MessageBox database, and the settings for the database index rebuilds and defragmentation should not be modified.</span></span> <span data-ttu-id="d03ed-154">Para obtener más información, vea el tema "SQL Server configuración que no se debe cambiar" en la Guía de operaciones de BizTalk Server en [ http://go.microsoft.com/fwlink/?LinkId=114358 ](http://go.microsoft.com/fwlink/?LinkId=114358).</span><span class="sxs-lookup"><span data-stu-id="d03ed-154">For more information, see the topic “SQL Server Settings That Should Not Be Changed” in the BizTalk Server Operations Guide at [http://go.microsoft.com/fwlink/?LinkId=114358](http://go.microsoft.com/fwlink/?LinkId=114358).</span></span>
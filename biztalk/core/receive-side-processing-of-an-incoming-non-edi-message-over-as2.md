---
title: Procesamiento de un mensaje no perteneciente a EDI entrante a través de AS2 de lado de recepción | Documentos de Microsoft
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: fee10cba-8b1a-4d2c-b9d9-efbb74c3f461
caps.latest.revision: 31
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 7a313c7351f40ba3dbdaf33d15008598dac2ad73
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
ms.locfileid: "22269452"
---
# <a name="receive-side-processing-of-an-incoming-non-edi-message-over-as2"></a><span data-ttu-id="fa6e9-102">Procesar en la recepción mensajes no pertenecientes a EDI entrantes a través de AS2</span><span class="sxs-lookup"><span data-stu-id="fa6e9-102">Receive-Side Processing of an Incoming Non-EDI Message over AS2</span></span>
<span data-ttu-id="fa6e9-103">Las canalizaciones AS2 incluidas con [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] se pueden utilizar para procesar un mensaje EDI o un mensaje no perteneciente a EDI sobre transporte AS2.</span><span class="sxs-lookup"><span data-stu-id="fa6e9-103">The AS2 pipelines shipped with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] can be used to process an EDI message or a non-EDI message over AS2 transport.</span></span> <span data-ttu-id="fa6e9-104">Se usan diferentes canalizaciones para los dos tipos diferentes de cargas.</span><span class="sxs-lookup"><span data-stu-id="fa6e9-104">Different pipelines are used for the two different types of payloads.</span></span> <span data-ttu-id="fa6e9-105">La canalización AS2EdiReceive se usa para procesar un mensaje EDI entrante a través de AS2 mientras que la canalización AS2Send se usa para devolver el MDN asociado (si está habilitado).</span><span class="sxs-lookup"><span data-stu-id="fa6e9-105">You use the AS2EdiReceive pipeline to process an incoming EDI message over AS2, and the AS2Send pipeline to return the associated MDN (if enabled).</span></span> <span data-ttu-id="fa6e9-106">La canalización AS2Receive se usa para procesar un mensaje no perteneciente a EDI entrante a través de AS2, mientras que la canalización AS2Send se usa para devolver el MDN asociado (si está habilitado).</span><span class="sxs-lookup"><span data-stu-id="fa6e9-106">You use the AS2Receive pipeline to process an incoming non-EDI message over AS2, and the AS2Send pipeline to return the associated MDN (if enabled).</span></span> <span data-ttu-id="fa6e9-107">El mensaje que no pertenece a EDI puede ser cualquier carga binaria.</span><span class="sxs-lookup"><span data-stu-id="fa6e9-107">The non-EDI message can be any binary payload.</span></span>  
  
 <span data-ttu-id="fa6e9-108">La canalización de recepción AS2Receive descodifica el mensaje AS2 y, a continuación, desensambla el mensaje AS2.</span><span class="sxs-lookup"><span data-stu-id="fa6e9-108">The AS2Receive receive pipeline decodes the AS2 message, and then performs disassembly on the AS2 message.</span></span> <span data-ttu-id="fa6e9-109">Una canalización de envío AS2Send codifica el MDN.</span><span class="sxs-lookup"><span data-stu-id="fa6e9-109">An AS2Send send pipeline encodes the MDN.</span></span> <span data-ttu-id="fa6e9-110">Puede incluir las canalizaciones AS2Receive y AS2Send en un puerto de envío HTTP de petición-respuesta bidireccional (si el MDN es sincrónico) o en un puerto de envío MDN unidireccional y en un puerto de recepción HTTP unidireccional (si el MDN es asíncrono).</span><span class="sxs-lookup"><span data-stu-id="fa6e9-110">You can include the AS2Receive and AS2Send pipelines in an HTTP two-way solicit response send port (if the MDN is synchronous), or in a one-way HTTP send port and a one-way HTTP receive port (if the MDN is asynchronous).</span></span> <span data-ttu-id="fa6e9-111">Si necesita realizar un desensamblado de una carga que no sea EDI, tendrá que hacerlo en otra canalización de recepción, ya que [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] solo permite un desensamblador en una canalización de recepción.</span><span class="sxs-lookup"><span data-stu-id="fa6e9-111">If you need to perform disassembly of a non-EDI payload, you will have to do that in another receive pipeline, because [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] only allows one disassembler in a receive pipeline.</span></span> <span data-ttu-id="fa6e9-112">Esto requiere un puerto de envío de bucle invertido y ubicación de recepción (consulte la [procesar la carga que no sean EDI recibido](../core/receive-side-processing-of-an-incoming-non-edi-message-over-as2.md#BKMK_NonEDI) sección más adelante).</span><span class="sxs-lookup"><span data-stu-id="fa6e9-112">This will require a loopback send port and receive location (see the [Processing the Received Non-EDI Payload](../core/receive-side-processing-of-an-incoming-non-edi-message-over-as2.md#BKMK_NonEDI) section below).</span></span>  
  
 <span data-ttu-id="fa6e9-113">Para recibir un intercambio que no pertenece a EDI a través de AS2, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] llevará a cabo los pasos siguientes:</span><span class="sxs-lookup"><span data-stu-id="fa6e9-113">To receive a non-EDI interchange over AS2, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will perform the following steps:</span></span>  
  
-   <span data-ttu-id="fa6e9-114">Procesar el mensaje AS2 recibido</span><span class="sxs-lookup"><span data-stu-id="fa6e9-114">Processing the received AS2 message</span></span>  
  
-   <span data-ttu-id="fa6e9-115">Enviar un MDN</span><span class="sxs-lookup"><span data-stu-id="fa6e9-115">Sending an MDN</span></span>  
  
-   <span data-ttu-id="fa6e9-116">Procesar la carga que no pertenece a EDI recibida</span><span class="sxs-lookup"><span data-stu-id="fa6e9-116">Processing the received non-EDI payload</span></span>  
  
## <a name="processing-the-received-as2-message"></a><span data-ttu-id="fa6e9-117">Procesar el mensaje AS2 recibido</span><span class="sxs-lookup"><span data-stu-id="fa6e9-117">Processing the Received AS2 message</span></span>  
 <span data-ttu-id="fa6e9-118">El descodificador AS2 en la canalización de recepción AS2Receive procesa un mensaje AS2 entrante.</span><span class="sxs-lookup"><span data-stu-id="fa6e9-118">The AS2 Decoder in the AS2Receive receive pipeline processes an incoming AS2 message.</span></span> <span data-ttu-id="fa6e9-119">Para ello, utiliza la propiedad de contexto `InboundHTTPHeaders` que el adaptador de HTTP crea desde los encabezados de HTTP en el mensaje AS2.</span><span class="sxs-lookup"><span data-stu-id="fa6e9-119">It does so using the `InboundHTTPHeaders` context property, which the HTTP adapter creates from the HTTP headers in the AS2 message.</span></span> <span data-ttu-id="fa6e9-120">Estos encabezados incluyen los siguientes encabezados de AS2:</span><span class="sxs-lookup"><span data-stu-id="fa6e9-120">These headers include the following AS2 headers:</span></span>  
  
-   <span data-ttu-id="fa6e9-121">AS2-To</span><span class="sxs-lookup"><span data-stu-id="fa6e9-121">AS2-To</span></span>  
  
-   <span data-ttu-id="fa6e9-122">AS2-From</span><span class="sxs-lookup"><span data-stu-id="fa6e9-122">AS2-From</span></span>  
  
-   <span data-ttu-id="fa6e9-123">AS2-Version</span><span class="sxs-lookup"><span data-stu-id="fa6e9-123">AS2-Version</span></span>  
  
-   <span data-ttu-id="fa6e9-124">MessageID</span><span class="sxs-lookup"><span data-stu-id="fa6e9-124">MessageID</span></span>  
  
-   <span data-ttu-id="fa6e9-125">OriginalMessageID (solo para MDN)</span><span class="sxs-lookup"><span data-stu-id="fa6e9-125">OriginalMessageID (for MDNs only)</span></span>  
  
-   <span data-ttu-id="fa6e9-126">Disposition-Notification-To (si se ha solicitado un MDN)</span><span class="sxs-lookup"><span data-stu-id="fa6e9-126">Disposition-Notification-To (if an MDN is requested)</span></span>  
  
-   <span data-ttu-id="fa6e9-127">Receipt-Delivery-Option (si se ha solicitado un MDN)</span><span class="sxs-lookup"><span data-stu-id="fa6e9-127">Receipt-Delivery-Option (if an MDN is requested)</span></span>  
  
-   <span data-ttu-id="fa6e9-128">Signed-Receipt-MICalg (si se ha solicitado un MDN)</span><span class="sxs-lookup"><span data-stu-id="fa6e9-128">Signed-Receipt-MICalg (if an MDN is requested)</span></span>  
  
 <span data-ttu-id="fa6e9-129">El descodificador AS2 promocionará estos encabezados en el contexto del mensaje.</span><span class="sxs-lookup"><span data-stu-id="fa6e9-129">The AS2 Decoder will promote these headers to the context of the message.</span></span> <span data-ttu-id="fa6e9-130">Después realiza las operaciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="fa6e9-130">It then does the following:</span></span>  
  
-   <span data-ttu-id="fa6e9-131">Realiza la resolución de acuerdo para determinar las propiedades que se usarán para procesar el mensaje entrante.</span><span class="sxs-lookup"><span data-stu-id="fa6e9-131">Performs agreement resolution to determine the properties to be used to process the incoming message.</span></span> <span data-ttu-id="fa6e9-132">Para obtener más información, consulte [resolución del acuerdo para mensajes AS2 entrantes](../core/agreement-resolution-for-incoming-as2-messages.md).</span><span class="sxs-lookup"><span data-stu-id="fa6e9-132">For more information, see [Agreement Resolution for Incoming AS2 Messages](../core/agreement-resolution-for-incoming-as2-messages.md).</span></span>  
  
-   <span data-ttu-id="fa6e9-133">Autentica el remitente mediante las propiedades AS2-From y AS2-To.</span><span class="sxs-lookup"><span data-stu-id="fa6e9-133">Authenticates the sender using the AS2-From and AS2-To properties.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="fa6e9-134">Para obtener más información acerca del procesamiento que canalizaciones de recepción AS2 realizan en mensajes AS2 entrantes, vea [procesar un mensaje AS2 entrante](../core/processing-an-incoming-as2-message.md).</span><span class="sxs-lookup"><span data-stu-id="fa6e9-134">For more information about the processing that the AS2 receive pipelines perform on incoming AS2 messages, see [Processing an Incoming AS2 Message](../core/processing-an-incoming-as2-message.md).</span></span>  
  
## <a name="sending-an-mdn"></a><span data-ttu-id="fa6e9-135">Enviar un MDN</span><span class="sxs-lookup"><span data-stu-id="fa6e9-135">Sending an MDN</span></span>  
 <span data-ttu-id="fa6e9-136">Si se ha habilitado un MDN, la canalización AS2Receive genera un MDN y lo coloca en el cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="fa6e9-136">If an MDN was enabled, the AS2Receive pipeline generates an MDN and drops it into the MessageBox.</span></span> <span data-ttu-id="fa6e9-137">El modo que se utiliza para devolver el MDN al remitente del mensaje original depende de si el transporte AS2 es sincrónico o no lo es.</span><span class="sxs-lookup"><span data-stu-id="fa6e9-137">How the MDN is returned to the sender of the original message depends upon whether the AS2 transport is synchronous or asynchronous.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="fa6e9-138">Para obtener más información acerca del procesamiento que canalizaciones de recepción AS2 realizan en los MDN salientes, vea [generar un MDN saliente](../core/generating-an-outgoing-mdn.md).</span><span class="sxs-lookup"><span data-stu-id="fa6e9-138">For more information about the processing that the AS2 receive pipelines perform on outgoing MDNs, see [Generating an Outgoing MDN](../core/generating-an-outgoing-mdn.md).</span></span>  
  
 <span data-ttu-id="fa6e9-139">**Modo sincrónico**</span><span class="sxs-lookup"><span data-stu-id="fa6e9-139">**Synchronous Mode**</span></span>  
  
 <span data-ttu-id="fa6e9-140">Si se envía un mensaje que no pertenece a EDI a través de AS2 en modo sincrónico, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] devolverá el MDN a través de esa conexión sincrónica y cerrará la conexión.</span><span class="sxs-lookup"><span data-stu-id="fa6e9-140">If a non-EDI message is sent over AS2 in synchronous mode, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will return the MDN over that synchronous connection and then close the connection.</span></span> <span data-ttu-id="fa6e9-141">La canalización AS2Receive generará el MDN y lo enrutará al cuadro de mensajes; allí, la canalización AS2Send, que forma parte del puerto de recepción de solicitud-respuesta, lo recogerá automáticamente.</span><span class="sxs-lookup"><span data-stu-id="fa6e9-141">The MDN will be generated by the AS2Receive pipeline, routed by that pipeline to the MessageBox, and then automatically picked up by the AS2Send pipeline that is part of the request response receive port.</span></span>  
  
 <span data-ttu-id="fa6e9-142">**Modo asincrónico**</span><span class="sxs-lookup"><span data-stu-id="fa6e9-142">**Asynchronous Mode**</span></span>  
  
 <span data-ttu-id="fa6e9-143">Si se envía un mensaje que no pertenece a EDI a través de transporte HTTP/HTTPS en modo asíncrono, debe crear un puerto de envío para devolver el MDN por separado.</span><span class="sxs-lookup"><span data-stu-id="fa6e9-143">If a non-EDI message is sent over HTTP/HTTPS transport in asynchronous mode, you must create a send port to return the MDN separately.</span></span> <span data-ttu-id="fa6e9-144">Si se trata de un puerto de envío dinámico, utilizará la dirección en la línea Receipt-Delivery-Notification en el encabezado del mensaje para enrutar el mensaje al socio comercial.</span><span class="sxs-lookup"><span data-stu-id="fa6e9-144">If it is a dynamic send port, it will use the address in the Receipt-Delivery-Notification line in the header of the message to route the message to the trading partner.</span></span> <span data-ttu-id="fa6e9-145">Si es un puerto de envío estático, usará la dirección definida en las propiedades del puerto.</span><span class="sxs-lookup"><span data-stu-id="fa6e9-145">If it is a static send port, it will use the address defined in port properties.</span></span> <span data-ttu-id="fa6e9-146">Este puerto de envío se suscribe al MDN asincrónico mediante una expresión de filtro `EdiIntAS.IsAS2AsynchronousMDN==True`.</span><span class="sxs-lookup"><span data-stu-id="fa6e9-146">This send port subscribes to the asynchronous MDN by using an `EdiIntAS.IsAS2AsynchronousMDN==True` filter expression.</span></span> <span data-ttu-id="fa6e9-147">En el procesamiento asíncrono, la canalización AS2Receive generará una respuesta HTTP además del MDN.</span><span class="sxs-lookup"><span data-stu-id="fa6e9-147">In asynchronous processing, the AS2Receive pipeline will generate an HTTP response in addition to the MDN.</span></span> <span data-ttu-id="fa6e9-148">El puerto de recepción devuelve la respuesta HTTP al remitente original a través de la conexión HTTP entre el puerto de recepción y la entidad remitente, que cierra la conexión.</span><span class="sxs-lookup"><span data-stu-id="fa6e9-148">The receive port returns the HTTP response to the original sender over the HTTP connection between the receive port and the sending party, which closes that connection.</span></span> <span data-ttu-id="fa6e9-149">Esto es necesario, ya que el MDN no cierra la conexión sincrónica.</span><span class="sxs-lookup"><span data-stu-id="fa6e9-149">This is necessary because the synchronous connection is not closed by the MDN.</span></span>  
  
##  <a name="BKMK_NonEDI"></a><span data-ttu-id="fa6e9-150">Procesar la carga que no pertenece a EDI recibida</span><span class="sxs-lookup"><span data-stu-id="fa6e9-150">Processing the Received Non-EDI Payload</span></span>  
 <span data-ttu-id="fa6e9-151">Cuando se recibe un mensaje que no está codificado en EDI a través de AS2, y necesita realizar un desensamblado en la carga, necesitará hacerlo en una canalización de recepción diferente a la canalización AS2Receive.</span><span class="sxs-lookup"><span data-stu-id="fa6e9-151">When a message that is not encoded in EDI is received over AS2, and you need to perform disassembly on the payload, you will have to do that in a different receive pipeline than the AS2Receive pipeline.</span></span> <span data-ttu-id="fa6e9-152">Esto es necesario porque [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] solo permite un desensamblador en una canalización de recepción.</span><span class="sxs-lookup"><span data-stu-id="fa6e9-152">This is required because [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] only allows one disassembler in a receive pipeline.</span></span> <span data-ttu-id="fa6e9-153">En este escenario se necesitará un mecanismo de bucle invertido que utilice una ubicación de recepción y un puerto de envío.</span><span class="sxs-lookup"><span data-stu-id="fa6e9-153">This scenario will require a loopback mechanism using a send port and receive location.</span></span> <span data-ttu-id="fa6e9-154">En el primer pase, la canalización EDIReceive procesa el mensaje AS2 y lo envía en su formato nativo al cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="fa6e9-154">In the first pass, the EDIReceive pipeline processes the AS2 message and sends the message in its native format to the MessageBox.</span></span> <span data-ttu-id="fa6e9-155">En el segundo pase, una canalización de recepción genera XML desde el formato nativo del mensaje.</span><span class="sxs-lookup"><span data-stu-id="fa6e9-155">In the second pass, a receive pipeline generates XML from the message's native format.</span></span>  
  
 <span data-ttu-id="fa6e9-156">BizTalk Server realizará el siguiente procesamiento en caso de recepción en un mensaje que no pertenece a EDI a través de AS2 de BizTalk Server:</span><span class="sxs-lookup"><span data-stu-id="fa6e9-156">BizTalk Server will perform the following receive-side processing on a non-EDI message over AS2 BizTalk Server:</span></span>  
  
-   <span data-ttu-id="fa6e9-157">La canalización de recepción AS2Receive asociada con la ubicación de recepción de solicitud-respuesta analiza los encabezados de AS2 del mensaje que no pertenece a EDI y, después, enruta el mensaje que no pertenece a EDI al cuadro de mensajes de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="fa6e9-157">The AS2Receive receive pipeline associated with the two-way request response receive location parses the AS2 headers from the non-EDI message, and then routes the non-EDI message to the BizTalk MessageBox.</span></span>  
  
-   <span data-ttu-id="fa6e9-158">Un puerto de envío de bucle invertido (de archivo o MSMQ) recoge el mensaje que no pertenece a EDI del cuadro de mensaje, ya que hace el filtrado en la propiedad `IsAS2PayloadMessage == True` de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="fa6e9-158">A loopback send port (either FILE or MSMQ) picks the non-EDI message up from the MessageBox, because it filters on the BizTalk property `IsAS2PayloadMessage == True`.</span></span> <span data-ttu-id="fa6e9-159">La canalización de envío PassThruTransmit asociada a este puerto de envío pasa el mensaje a través de su formato que no es EDI y enruta el mensaje a una carpeta o a una cola MSMQ.</span><span class="sxs-lookup"><span data-stu-id="fa6e9-159">The PassThruTransmit send pipeline associated with this send port passes the message through in its non-EDI format, routing the message to either a folder or an MSMQ queue.</span></span>  
  
-   <span data-ttu-id="fa6e9-160">Una ubicación de recepción de bucle invertido recoge el mensaje.</span><span class="sxs-lookup"><span data-stu-id="fa6e9-160">A loopback receive location picks up the message.</span></span> <span data-ttu-id="fa6e9-161">La canalización de recepción asociada con la ubicación de recepción de bucle invertido genera un mensaje XML a partir del mensaje que no pertenece a EDI y, después, lo enruta al cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="fa6e9-161">The receive pipeline associated with the loopback receive location generates an XML message from the non-EDI message, and routes it to the MessageBox.</span></span>  
  
-   <span data-ttu-id="fa6e9-162">Si el mensaje se va a enrutar a una aplicación del servidor, un puerto de envío recoge el mensaje XML y lo enruta a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="fa6e9-162">If the message is to be routed to a back-end application, a send port picks up the XML message and routes it to the application.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="fa6e9-163">Vea también</span><span class="sxs-lookup"><span data-stu-id="fa6e9-163">See Also</span></span>  
 <span data-ttu-id="fa6e9-164">[Cómo BizTalk Server recibe mensajes AS2](../core/how-biztalk-server-receives-as2-messages.md) </span><span class="sxs-lookup"><span data-stu-id="fa6e9-164">[How BizTalk Server Receives AS2 Messages](../core/how-biztalk-server-receives-as2-messages.md) </span></span>  
 [<span data-ttu-id="fa6e9-165">Procesamiento de envío de un mensaje EDI saliente a través de AS2</span><span class="sxs-lookup"><span data-stu-id="fa6e9-165">Send-Side Processing of an Outgoing EDI Message over AS2</span></span>](../core/send-side-processing-of-an-outgoing-edi-message-over-as2.md)
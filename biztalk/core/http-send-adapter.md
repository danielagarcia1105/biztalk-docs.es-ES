---
title: Adaptador de envío HTTP | Documentos de Microsoft
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: e69308b4-421f-4d7c-b9bb-ee086df03272
caps.latest.revision: 24
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: ce8bfdfd380fac422f79ba175ae075a94f313dec
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
ms.locfileid: "22257980"
---
# <a name="http-send-adapter"></a><span data-ttu-id="3c31c-102">Adaptador de envío HTTP</span><span class="sxs-lookup"><span data-stu-id="3c31c-102">HTTP Send Adapter</span></span>
<span data-ttu-id="3c31c-103">El adaptador de envío HTTP obtiene mensajes de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] y los remite a una URL de destino como resultado de una solicitud HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="3c31c-103">The HTTP send adapter gets messages from [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and sends them to a destination URL on an HTTP POST request.</span></span> <span data-ttu-id="3c31c-104">El adaptador de envío HTTP recoge el contenido del mensaje en el cuerpo del objeto de mensaje de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="3c31c-104">The HTTP send adapter gets the message content from the body part of the BizTalk Message object.</span></span> <span data-ttu-id="3c31c-105">El adaptador de envío HTTP no tiene en cuenta las partes restantes del objeto de mensaje de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="3c31c-105">The HTTP send adapter ignores all other parts of the BizTalk Message object.</span></span>  
  
 <span data-ttu-id="3c31c-106">Una vez que el adaptador envía el mensaje a la URL de destino y el motor de mensajería de BizTalk recibe el código de estado de HTTP satisfactorio, el adaptador de envío HTTP elimina el mensaje de la base de datos de cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="3c31c-106">After the adapter sends the message to a destination URL and the BizTalk Messaging Engine receives the HTTP success status code, the HTTP send adapter deletes the message from the MessageBox database.</span></span>  
  
 <span data-ttu-id="3c31c-107">La redirección de mensajes de HTTP está permitida, y puede configurarse en el puerto de envío.</span><span class="sxs-lookup"><span data-stu-id="3c31c-107">Redirection of HTTP messages is supported and can be configured on the send port.</span></span>  
  
 <span data-ttu-id="3c31c-108">El adaptador de envío HTTP se ejecuta en [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] como aplicación nativa de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="3c31c-108">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] hosts the HTTP send adapter as a native BizTalk application.</span></span> <span data-ttu-id="3c31c-109">Permite el envío unidireccional de mensajes, así como la transmisión de petición-respuesta.</span><span class="sxs-lookup"><span data-stu-id="3c31c-109">It supports one-way sending of messages as well a solicit-response transmission.</span></span> <span data-ttu-id="3c31c-110">La ubicación de envío del adaptador de envío HTTP es una URL distintiva que se configura a través del puerto de envío.</span><span class="sxs-lookup"><span data-stu-id="3c31c-110">The send location for the HTTP send adapter is a distinct URL that you configure through the send port.</span></span> <span data-ttu-id="3c31c-111">Esta URL exclusiva puede incluir cadenas de consulta anexas a la dirección URL base.</span><span class="sxs-lookup"><span data-stu-id="3c31c-111">This unique URL can include query strings appended to the base URL.</span></span>  
  
## <a name="batching-support-for-the-http-send-adapter"></a><span data-ttu-id="3c31c-112">Compatibilidad de procesamiento por lotes del adaptador de envío HTTP</span><span class="sxs-lookup"><span data-stu-id="3c31c-112">Batching Support for the HTTP Send Adapter</span></span>  
 <span data-ttu-id="3c31c-113">El adaptador de envío HTTP no admite operaciones de procesamiento por lotes.</span><span class="sxs-lookup"><span data-stu-id="3c31c-113">The HTTP send adapter does not support batching operations.</span></span>  
  
## <a name="chunked-encoding-support-for-the-http-send-adapter"></a><span data-ttu-id="3c31c-114">Compatibilidad de codificación fragmentada del adaptador de envío HTTP</span><span class="sxs-lookup"><span data-stu-id="3c31c-114">Chunked Encoding Support for the HTTP Send Adapter</span></span>  
 <span data-ttu-id="3c31c-115">Si el **Habilitar codificación fragmentada** está habilitada la opción de configuración, a continuación, el adaptador de envío HTTP envía mensajes de solicitud utilizando la codificación fragmentada si el tamaño de la solicitud supera los 8 KB.</span><span class="sxs-lookup"><span data-stu-id="3c31c-115">If the **Enable chunked encoding** configuration option is enabled, then the HTTP send adapter sends request messages using chunked encoding if the request size exceeds 8 KB.</span></span> <span data-ttu-id="3c31c-116">Cuando se utiliza el servidor proxy de HTTP, el adaptador de envío HTTP no utiliza la codificación fragmentada, y siempre almacena los datos antes de enviarlos.</span><span class="sxs-lookup"><span data-stu-id="3c31c-116">If the HTTP proxy server is used, the HTTP send adapter does not use chunked encoding and always stages the data before sending.</span></span> <span data-ttu-id="3c31c-117">El **Habilitar codificación fragmentada** opción de configuración está habilitada de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="3c31c-117">The **Enable chunked encoding** configuration option is enabled by default.</span></span>  
  
 <span data-ttu-id="3c31c-118">Cuando el adaptador de envío reciba un mensaje de respuesta, podrá aceptar mensajes de respuesta en cuyo cuerpo de mensaje se utilice una codificación fragmentada.</span><span class="sxs-lookup"><span data-stu-id="3c31c-118">When the send adapter receives a response message, it can accept response messages with a chunked encoded body part.</span></span>  
  
## <a name="client-authentication-for-the-http-send-adapter"></a><span data-ttu-id="3c31c-119">Autenticación de cliente del adaptador de envío HTTP</span><span class="sxs-lookup"><span data-stu-id="3c31c-119">Client Authentication for the HTTP Send Adapter</span></span>  
 <span data-ttu-id="3c31c-120">La autenticación del adaptador de envío HTTP con el servidor de destino puede ser de los siguientes tipos:</span><span class="sxs-lookup"><span data-stu-id="3c31c-120">The HTTP send adapter authenticates with the destination server by using one of the following authentication types:</span></span>  
  
-   <span data-ttu-id="3c31c-121">**Anónimo.**</span><span class="sxs-lookup"><span data-stu-id="3c31c-121">**Anonymous.**</span></span> <span data-ttu-id="3c31c-122">El adaptador de HTTP no envía las credenciales al conectarse al servidor de destino.</span><span class="sxs-lookup"><span data-stu-id="3c31c-122">The HTTP adapter does not send any credentials when connecting to the destination server.</span></span> <span data-ttu-id="3c31c-123">Si el servidor de destino permite la autenticación anónima, se utilizarán las credenciales de la cuenta anónima configurada en el servidor de destino.</span><span class="sxs-lookup"><span data-stu-id="3c31c-123">If the destination server permits anonymous authentication then the credentials of the configured anonymous account on the destination server are used.</span></span>  
  
-   <span data-ttu-id="3c31c-124">**Básica.**</span><span class="sxs-lookup"><span data-stu-id="3c31c-124">**Basic.**</span></span> <span data-ttu-id="3c31c-125">El adaptador de HTTP envía el nombre de usuario y la contraseña a través de una conexión HTTP de texto sin formato.</span><span class="sxs-lookup"><span data-stu-id="3c31c-125">The HTTP adapter sends the user name and password over an HTTP connection in plain text.</span></span>  
  
-   <span data-ttu-id="3c31c-126">**Síntesis.**</span><span class="sxs-lookup"><span data-stu-id="3c31c-126">**Digest.**</span></span> <span data-ttu-id="3c31c-127">El adaptador de envío HTTP envía las contraseñas en un formato cifrado a través de la conexión de HTTP.</span><span class="sxs-lookup"><span data-stu-id="3c31c-127">The HTTP adapter sends passwords in an encrypted format over the HTTP connection.</span></span>  
  
-   <span data-ttu-id="3c31c-128">**Kerberos.**</span><span class="sxs-lookup"><span data-stu-id="3c31c-128">**Kerberos.**</span></span> <span data-ttu-id="3c31c-129">No se envía el nombre de usuario ni la contraseña a través de la conexión de HTTP.</span><span class="sxs-lookup"><span data-stu-id="3c31c-129">Neither the user name nor the password is sent over an HTTP connection.</span></span> <span data-ttu-id="3c31c-130">El adaptador de envío HTTP utiliza las credenciales del proceso en el que se ejecuta el adaptador de envío HTTP para este tipo de autenticación.</span><span class="sxs-lookup"><span data-stu-id="3c31c-130">The HTTP adapter uses the credentials of the process under which the HTTP send adapter runs for this authentication type.</span></span>  
  
 <span data-ttu-id="3c31c-131">Como opción adicional, el adaptador de envío HTTP puede proporcionar un certificado de Capa de sockets seguros (SSL) al servidor Web si el servidor lo necesita, o si simplemente lo admite.</span><span class="sxs-lookup"><span data-stu-id="3c31c-131">Additionally, the HTTP send adapter can provide a client Secure Sockets Layer (SSL) certificate to the Web server if the server requires or accepts it.</span></span>  
  
## <a name="client-certificates-for-the-http-send-adapter"></a><span data-ttu-id="3c31c-132">Certificados de cliente para el adaptador de envío HTTP</span><span class="sxs-lookup"><span data-stu-id="3c31c-132">Client Certificates for the HTTP Send Adapter</span></span>  
 <span data-ttu-id="3c31c-133">El adaptador de envío HTTP puede establecer una conexión segura con servidores que admitan o requieran certificados de cliente.</span><span class="sxs-lookup"><span data-stu-id="3c31c-133">The HTTP send adapter can establish a secure connection with servers that accept or require client certificates.</span></span> <span data-ttu-id="3c31c-134">Si se especifica un certificado de cliente, el adaptador de envío HTTP utilizará el certificado para conectarse a los servidores que requieran o admitan certificados de cliente.</span><span class="sxs-lookup"><span data-stu-id="3c31c-134">If a client certificate is specified, the HTTP send adapter uses the certificate when connecting with servers that require or accept client certificates.</span></span> <span data-ttu-id="3c31c-135">Si no se especifica ningún certificado de cliente y el servidor de destino así lo requiere, el adaptador de envío HTTP no podrá enviar el mensaje y seguirá la lógica de reintentos estándar.</span><span class="sxs-lookup"><span data-stu-id="3c31c-135">If the client certificate is not specified and the destination server requires client certificates, the HTTP send adapter fails to send the message and follows the standard retry logic.</span></span>  
  
 <span data-ttu-id="3c31c-136">El adaptador de envío HTTP usará el certificado de cliente ubicado en el almacén personal de la cuenta bajo la que se esté ejecutando el proceso de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3c31c-136">The HTTP send adapter uses the client certificate from the personal store of the account under which the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] process is running.</span></span> <span data-ttu-id="3c31c-137">El certificado se especifica mediante la huella digital.</span><span class="sxs-lookup"><span data-stu-id="3c31c-137">The certificate is specified by its thumbprint.</span></span> <span data-ttu-id="3c31c-138">Si, por cualquier motivo, el adaptador de envío HTTP no consigue cargar el certificado, el mensaje que se intentaba enviar quedará suspendido.</span><span class="sxs-lookup"><span data-stu-id="3c31c-138">If the HTTP send adapter fails to load the certificate for any reason, the message that it was sending is suspended.</span></span>  
  
## <a name="single-sign-on-support-for-the-http-adapter"></a><span data-ttu-id="3c31c-139">Compatibilidad de inicio de sesión único (SSO) con el adaptador de HTTP</span><span class="sxs-lookup"><span data-stu-id="3c31c-139">Single Sign-On Support for the HTTP Adapter</span></span>  
 <span data-ttu-id="3c31c-140">El inicio de sesión único (SSO) empresarial puede configurarse, a través de la consola de administración de BizTalk, para su uso con la ubicación de recepción de HTTP o con el puerto de envío.</span><span class="sxs-lookup"><span data-stu-id="3c31c-140">You can configure Enterprise Single Sign-On (SSO) for use with the HTTP receive location or send port by using BizTalk Administration console.</span></span> <span data-ttu-id="3c31c-141">En este tema se describe el funcionamiento de SSO con el adaptador de HTTP.</span><span class="sxs-lookup"><span data-stu-id="3c31c-141">This topic describes how SSO works with the HTTP adapter.</span></span>  
  
 <span data-ttu-id="3c31c-142">**Ubicación de recepción de compatibilidad de inicio de sesión único para HTTP**</span><span class="sxs-lookup"><span data-stu-id="3c31c-142">**Single Sign-On Support for the HTTP Receive Location**</span></span>  
  
 <span data-ttu-id="3c31c-143">Cuando los servicios de Microsoft Internet Information Server (IIS) reciben una solicitud  de HTTP procedente de un cliente Web, IIS se encarga de autenticar al usuario.</span><span class="sxs-lookup"><span data-stu-id="3c31c-143">When an HTTP request is received by Microsoft Internet Information Services (IIS) from a Web client, IIS authenticates the user.</span></span> <span data-ttu-id="3c31c-144">La extensión de Interfaz de programación de aplicaciones para servidores de Internet (ISAPI) actúa como usuario de Microsoft Windows y, a continuación, llama al almacén de credenciales de SSO para obtener un vale cifrado.</span><span class="sxs-lookup"><span data-stu-id="3c31c-144">The Internet Server Application Programming Interface (ISAPI) extension impersonates the Microsoft Windows user and then calls the SSO credential store to obtain an encrypted ticket.</span></span> <span data-ttu-id="3c31c-145">Este vale se almacena como el **SSOTicket** propiedad en el contexto del mensaje.</span><span class="sxs-lookup"><span data-stu-id="3c31c-145">This ticket is stored as the **SSOTicket** property in the context of the message.</span></span>  
  
 <span data-ttu-id="3c31c-146">En un escenario de paso, el motor de mensajería de BizTalk dirige el mensaje a la base de datos de cuadros de mensajes.</span><span class="sxs-lookup"><span data-stu-id="3c31c-146">In the pass-through scenario, the BizTalk Messaging Engine directs the message to the MessageBox database.</span></span> <span data-ttu-id="3c31c-147">Cuando el adaptador recibe el mensaje de la base de datos de cuadro de mensajes, el adaptador HTTP llama el **ISSOTicket.RedeemTicket (método)** con el vale cifrado y el nombre de la aplicación para recuperar las credenciales de back-end de la Almacén de SSO.</span><span class="sxs-lookup"><span data-stu-id="3c31c-147">When the adapter receives the message from the MessageBox database, the HTTP adapter calls the **ISSOTicket.RedeemTicket Method** with the encrypted ticket along with the application name to retrieve the back-end credentials from the SSO store.</span></span> <span data-ttu-id="3c31c-148">Seguidamente, el adaptador de HTTP utiliza las credenciales externas para conectarse al sistema de servidor y procesar la solicitud.</span><span class="sxs-lookup"><span data-stu-id="3c31c-148">The HTTP adapter then uses the external credentials to connect to the back-end system and process the request.</span></span> <span data-ttu-id="3c31c-149">Para obtener más información sobre las aplicaciones afiliadas, vea [aplicaciones afiliadas de SSO](../core/sso-affiliate-applications.md).</span><span class="sxs-lookup"><span data-stu-id="3c31c-149">For more information about the affiliate applications, see [SSO Affiliate Applications](../core/sso-affiliate-applications.md).</span></span>  
  
 <span data-ttu-id="3c31c-150">En escenarios en los que una orquestación llama al adaptador, el motor de mensajería de BizTalk envía este mensaje a la base de datos de cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="3c31c-150">In the scenario where an orchestration invokes the adapter, the BizTalk Messaging Engine sends this message to the MessageBox database.</span></span> <span data-ttu-id="3c31c-151">La orquestación debe asegurarse de que tanto el **SSOTicket** propiedad de contexto y la **Microsoft.BizTalk.XLANGs.BTXEngine.OriginatorSID** son propiedad de contexto del mensaje que contiene el vale mantiene.</span><span class="sxs-lookup"><span data-stu-id="3c31c-151">The orchestration should ensure that both the **SSOTicket** context property and the **Microsoft.BizTalk.XLANGs.BTXEngine.OriginatorSID** context property of the message that contains the ticket are maintained.</span></span> <span data-ttu-id="3c31c-152">Cuando el adaptador recibe este mensaje de la base de datos de cuadro de mensajes, el adaptador llama **RedeemTicket** con el vale cifrado para recuperar las credenciales de back-end del almacén de SSO.</span><span class="sxs-lookup"><span data-stu-id="3c31c-152">When the adapter receives this message from the MessageBox database, the adapter calls **RedeemTicket** with the encrypted ticket to retrieve the back-end credentials from the SSO store.</span></span> <span data-ttu-id="3c31c-153">El usuario que diseñe la programación deberá copiar específicamente esta propiedad en el mensaje.</span><span class="sxs-lookup"><span data-stu-id="3c31c-153">The user designing the schedule should specifically copy this property to the message.</span></span>  
  
 <span data-ttu-id="3c31c-154">**Compatibilidad de inicio de sesión único para los adaptadores de envío HTTP**</span><span class="sxs-lookup"><span data-stu-id="3c31c-154">**Single Sign-On Support for the HTTP Send Adapters**</span></span>  
  
 <span data-ttu-id="3c31c-155">Si está habilitado el SSO, cuando un puerto de envío HTTP recibe un mensaje con el **seguro** propiedad, llama al servidor SSO para validar y canjear el vale para una aplicación afiliada.</span><span class="sxs-lookup"><span data-stu-id="3c31c-155">If SSO is enabled, when an HTTP send port receives a message with the **Secure** property, it calls the SSO server to validate and redeem the ticket for an affiliate application.</span></span> <span data-ttu-id="3c31c-156">La aplicación de administración, los administradores afiliados o los administradores de SSO de la aplicación afiliada pueden llamar a SSO para canjear un vale.</span><span class="sxs-lookup"><span data-stu-id="3c31c-156">The administration application, affiliate administrators, or SSO administrators for the affiliate application can call SSO to redeem a ticket.</span></span> <span data-ttu-id="3c31c-157">SSO se encarga entonces de descifrar el vale y de obtener las credenciales de servidor.</span><span class="sxs-lookup"><span data-stu-id="3c31c-157">SSO then decrypts the ticket and obtains the back-end credentials.</span></span> <span data-ttu-id="3c31c-158">Los escenario de paso a través y de orquestación son los mismos que para el puerto de envío de HTTP.</span><span class="sxs-lookup"><span data-stu-id="3c31c-158">The pass-through and orchestration scenario are the same as for the HTTP send port.</span></span>  
  
 <span data-ttu-id="3c31c-159">De forma predeterminada, el SSO está deshabilitado en el puerto de envío de HTTP.</span><span class="sxs-lookup"><span data-stu-id="3c31c-159">By default, SSO is disabled for the HTTP send port.</span></span> <span data-ttu-id="3c31c-160">Para obtener más información acerca de cómo habilitar SSO para el puerto de envío HTTP, consulte [configurar un puerto de envío HTTP](../core/configuring-an-http-send-port.md).</span><span class="sxs-lookup"><span data-stu-id="3c31c-160">For more information about enabling SSO for the HTTP send port, see [Configuring an HTTP Send Port](../core/configuring-an-http-send-port.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="3c31c-161">El inicio de sesión único (SSO) sólo podrá utilizarse con la autenticación básica o implícita.</span><span class="sxs-lookup"><span data-stu-id="3c31c-161">You can only use Single Sign-On with basic and digest authentication.</span></span>  
  
 <span data-ttu-id="3c31c-162">Para implementar correctamente la compatibilidad del inicio de sesión único en el adaptador de envío y de recepción HTTP, deberán cumplirse las condiciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="3c31c-162">To correctly implement Single Sign On support for the HTTP receive and send adapter the following conditions must be met:</span></span>  
  
-   <span data-ttu-id="3c31c-163">Debe especificar la misma cuenta de usuario en los siguientes lugares:</span><span class="sxs-lookup"><span data-stu-id="3c31c-163">The same user account must be specified in the following places:</span></span>  
  
    -   <span data-ttu-id="3c31c-164">La identidad del grupo de aplicaciones (IIS 7.0) o identidad de aplicaciones COM+ de host del directorio IIS virtual al que supervisa el adaptador de recepción HTTP.</span><span class="sxs-lookup"><span data-stu-id="3c31c-164">The application pool identity (IIS 7.0) or hosting COM+ application identity for the IIS virtual directory that is monitored by the HTTP receive adapter.</span></span> <span data-ttu-id="3c31c-165">Para obtener más información acerca de cómo configurar IIS para HTTP ubicaciones de recepción, consulte [cómo configurar IIS para una ubicación de recepción HTTP](../core/how-to-configure-iis-for-an-http-receive-location.md).</span><span class="sxs-lookup"><span data-stu-id="3c31c-165">For more information about configuring IIS for HTTP receive locations, see [How to Configure IIS for an HTTP Receive Location](../core/how-to-configure-iis-for-an-http-receive-location.md).</span></span>  
  
    -   <span data-ttu-id="3c31c-166">Las credenciales de inicio de sesión para la instancia de host aislado que se ejecuta el adaptador de HTTP.</span><span class="sxs-lookup"><span data-stu-id="3c31c-166">The logon credentials used for the isolated host instance that the HTTP adapter is running in.</span></span> <span data-ttu-id="3c31c-167">Para obtener información sobre cómo configurar las credenciales de inicio de sesión para una instancia de host, consulte [cómo modificar propiedades de instancia de Host](../core/how-to-modify-host-instance-properties.md).</span><span class="sxs-lookup"><span data-stu-id="3c31c-167">For information about how to configure the logon credentials for a host instance, see [How to Modify Host Instance Properties](../core/how-to-modify-host-instance-properties.md).</span></span>  
  
-   <span data-ttu-id="3c31c-168">El host aislado que esté utilizando el adaptador de HTTP deberá configurarse con la opción Autenticación de confianza.</span><span class="sxs-lookup"><span data-stu-id="3c31c-168">The isolated host that the HTTP adapter is using must be configured as Authentication Trusted.</span></span> <span data-ttu-id="3c31c-169">Para obtener información acerca de cómo configurar un host como autenticación de confianza, consulte [cómo modificar propiedades de Host](../core/how-to-modify-host-properties.md).</span><span class="sxs-lookup"><span data-stu-id="3c31c-169">For information about how to configure a host as Authentication Trusted, see [How to Modify Host Properties](../core/how-to-modify-host-properties.md).</span></span>  
  
## <a name="negative-acknowledgment-nack-messages-generated-for-failed-transmissions-by-the-http-or-soap-adapter"></a><span data-ttu-id="3c31c-170">Mensajes de confirmación negativa (NACK) generados por los adaptadores HTTP o SOAP para errores de transmisión</span><span class="sxs-lookup"><span data-stu-id="3c31c-170">Negative Acknowledgment (NACK) Messages Generated for Failed Transmissions by the HTTP or SOAP Adapter</span></span>  
 <span data-ttu-id="3c31c-171">Cuando un mensaje se transmite correctamente, el motor de mensajería de BizTalk publica un mensaje de confirmación asociado (ACK) al cuadro de mensajes, siempre que estén habilitadas las notificaciones.</span><span class="sxs-lookup"><span data-stu-id="3c31c-171">When a message is successfully transmitted, the BizTalk Messaging Engine publishes an associated acknowledgment (ACK) message to the MessageBox if delivery notifications are enabled.</span></span> <span data-ttu-id="3c31c-172">Del mismo modo, cuando el motor de mensajería de BizTalk suspende un mensaje, o cuando el motor de orquestación suspende una orquestación, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] publica un mensaje de confirmación negativa (NACK) asociado al cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="3c31c-172">Likewise, when a message is suspended by the BizTalk Messaging Engine or an orchestration is suspended by the orchestration engine, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] publishes an associated negative acknowledgment (NACK) message to the MessageBox.</span></span> <span data-ttu-id="3c31c-173">El mensaje de confirmación negativa (NACK) contiene propiedades de contexto y un cuerpo de mensaje que contiene un error de SOAP.</span><span class="sxs-lookup"><span data-stu-id="3c31c-173">The NACK message contains context properties and a message body part that consists of a SOAP fault.</span></span> <span data-ttu-id="3c31c-174">Si el mensaje de confirmación negativa se genera debido a un error de transmisión del adaptador HTTP o SOAP, el error de SOAP contendrá los elementos Headers y Body de la respuesta procedente del servidor Web de destino.</span><span class="sxs-lookup"><span data-stu-id="3c31c-174">If the NACK message is generated due to a failed transmission from the HTTP or SOAP adapter, the SOAP fault contains the Headers element and the Body element of the response from the destination Web server.</span></span> <span data-ttu-id="3c31c-175">A continuación, se incluye el ejemplo de un error de SOAP incluido en un mensaje de confirmación negativa que se ha generado debido a un error en la transmisión HTTP:</span><span class="sxs-lookup"><span data-stu-id="3c31c-175">The following is an example of the SOAP fault in a NACK generated for a failed HTTP transmission:</span></span>  
  
```  
<SOAP:Envelope xmlns:SOAP="http://schemas.xmlsoap.org/soap/envelope/" SOAP:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">  
   <SOAP:Body>  
      <SOAP:Fault>  
         <faultcode>Microsoft BizTalk Server Negative Acknowledgment</faultcode>   
         <faultstring>An error occurred while processing the message, refer to the details section for more information</faultstring>   
         <faultactor>http://localhost/receivestandard.asp</faultactor>   
         <detail>  
            <ns0:NACK Type="NACK" xmlns:ns0="http://schema.microsoft.com/BizTalk/2003/NACKMessage.xsd">  
            <NAckID>{4E646707-03AA-4493-95C7-A64B09E2987D}</NAckID>  
            <ErrorCode>0x80131600</ErrorCode>  
            <ErrorCategory>0</ErrorCategory>  
            <ErrorDescription>The remote server returned an error: (404) Not Found.</ErrorDescription>  
            <ErrorDetail>  
            <HttpErrorDetail xmlns="http://schema.microsoft.com/BizTalk/2006/HttpErrorDetails.xsd">  
               <Headers>Server: Microsoft-IIS/5.1 Date: Wed, 21 Apr 2005 00:27:47 GMT X-Powered-By: ASP.NET Connection: close Content-Type: text/html Content-Length: 67 </Headers>  
               <Body>We could not locate the page you requested. Please check the URL.</Body>  
            </HttpErrorDetail>  
            </ErrorDetail>  
            </ns0:NACK>  
         </detail>  
      </SOAP:Fault>  
   </SOAP:Body>  
</SOAP:Envelope>  
```  
  
> [!NOTE]
>  <span data-ttu-id="3c31c-176">Los elementos Headers y Body tienen un límite de 48 KB.</span><span class="sxs-lookup"><span data-stu-id="3c31c-176">The Headers element and the Body element are limited to 48 KB.</span></span> <span data-ttu-id="3c31c-177">El elemento Headers se redondea hacia el par de valores de encabezado entero que esté más cercano sin exceder dicho límite.</span><span class="sxs-lookup"><span data-stu-id="3c31c-177">The Headers element is rounded to the nearest complete header value pair without exceeding the limit.</span></span> <span data-ttu-id="3c31c-178">El elemento Body se trunca a 48 KB.</span><span class="sxs-lookup"><span data-stu-id="3c31c-178">The Body element is truncated to 48 KB.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="3c31c-179">Los mensajes de confirmación (ACK) y de confirmación negativa (NACK) se descartan cuando no hay suscripciones que coincidan.</span><span class="sxs-lookup"><span data-stu-id="3c31c-179">NACK and ACK messages are discarded if there are no matching subscriptions for them.</span></span> <span data-ttu-id="3c31c-180">El motor de mensajería de BizTalk no suspende los mensajes de confirmación y de confirmación negativa.</span><span class="sxs-lookup"><span data-stu-id="3c31c-180">NACK and ACK messages are not suspended by the BizTalk Messaging Engine.</span></span>  
  
 <span data-ttu-id="3c31c-181">Para suscribirse a un mensaje de confirmación negativa (NACK), puede seguir uno de estos procedimientos:</span><span class="sxs-lookup"><span data-stu-id="3c31c-181">To subscribe to a NACK message, you can do one of the following:</span></span>  
  
-   <span data-ttu-id="3c31c-182">Crear un puerto de envío con un filtro para la propiedad de contexto de mensaje en cuestión.</span><span class="sxs-lookup"><span data-stu-id="3c31c-182">Create a send port with a filter for the appropriate message context property.</span></span> <span data-ttu-id="3c31c-183">Vea **propiedades de contexto de mensaje** [!INCLUDE[ui-guidance-developers-reference](../includes/ui-guidance-developers-reference.md)] para obtener una lista de propiedades de contexto del mensaje de sistema, incluidas aquéllas relativas a la confirmación del mensaje.</span><span class="sxs-lookup"><span data-stu-id="3c31c-183">See **Message Context Properties** [!INCLUDE[ui-guidance-developers-reference](../includes/ui-guidance-developers-reference.md)] for a listing of system message context properties including those related to message acknowledgment.</span></span>  
  
-   <span data-ttu-id="3c31c-184">Enviar desde un puerto de orquestación marcado con **notificación de entrega = transmitido**.</span><span class="sxs-lookup"><span data-stu-id="3c31c-184">Send from an orchestration port marked with **Delivery Notification = Transmitted**.</span></span> <span data-ttu-id="3c31c-185">Si un puerto de orquestación está marcado con **notificación de entrega = transmitido**, la orquestación espera hasta que recibe una confirmación o una confirmación NEGATIVA para el mensaje que se ha transmitido.</span><span class="sxs-lookup"><span data-stu-id="3c31c-185">If an orchestration port is marked with **Delivery Notification = Transmitted**, the orchestration will wait until it receives either an ACK or a NACK for the message that was transmitted.</span></span> <span data-ttu-id="3c31c-186">Si se genera un mensaje de confirmación negativa, éste se dirige a la orquestación que, a su vez, emite una excepción de tipo DeliveryFailureException.</span><span class="sxs-lookup"><span data-stu-id="3c31c-186">If a NACK is generated then it will be routed to the orchestration and the orchestration will throw a DeliveryFailureException.</span></span> <span data-ttu-id="3c31c-187">La excepción DeliveryFailureException queda deserializada del error de SOAP contenido en el cuerpo del mensaje de confirmación negativa.</span><span class="sxs-lookup"><span data-stu-id="3c31c-187">The DeliveryFailureException is deserialized from the SOAP fault that is contained within the NACK message body.</span></span> <span data-ttu-id="3c31c-188">Para recuperar la cadena de mensaje de excepción del error de SOAP devuelto a la orquestación, convierta la excepción DeliveryFailureException en SoapException y, a continuación, obtenga acceso a InnerXml desde la sección de detalles de SOAP.</span><span class="sxs-lookup"><span data-stu-id="3c31c-188">To retrieve the exception message string from the SOAP fault that is returned to the orchestration, cast the DeliveryFailureException to a SoapException and then access the InnerXml from the SOAP Detail section.</span></span> <span data-ttu-id="3c31c-189">El siguiente ejemplo de código muestra cómo hacerlo:</span><span class="sxs-lookup"><span data-stu-id="3c31c-189">The following code sample demonstrates how to do this:</span></span>  
  
    ```  
    // Cast the DeliveryFailureException to a SoapException…  
    System.Web.Services.Protocols.SoapException se = (System.Web.Services.Protocols.SoapException)e.InnerException;  
    System.Diagnostics.Trace.WriteLine(se.Detail.InnerXml);  
    //e is an Microsoft.XLANGs.BaseTypes.DeliveryFailureException  
    //object type created in an Exception handler  
  
    ```  
  
     <span data-ttu-id="3c31c-190">El ejemplo de código que figura sobre estas líneas devuelve un fragmento XML similar al siguiente.</span><span class="sxs-lookup"><span data-stu-id="3c31c-190">The code sample above will return an XML fragment similar to the following:</span></span>  
  
    ```  
    <ns0:NACK Type="NACK" xmlns:ns0="http://schema.microsoft.com/BizTalk/2003/NACKMessage.xsd">  
    <NAckID>{4E646707-03AA-4493-95C7-A64B09E2987D}</NAckID>  
    <ErrorCode>0x80131600</ErrorCode>  
    <ErrorCategory>0</ErrorCategory>  
    <ErrorDescription>The remote server returned an error: (404) Not Found.</ErrorDescription>  
    <ErrorDetail>  
    <HttpErrorDetail xmlns="http://schema.microsoft.com/BizTalk/2006/HttpErrorDetails.xsd">  
       <Headers>Server: Microsoft-IIS/5.1 Date: Wed, 21 Apr 2005 00:27:47 GMT X-Powered-By: ASP.NET Connection: close Content-Type: text/html Content-Length: 67 </Headers>  
       <Body>We could not locate the page you requested. Please check the URL.</Body>  
    </HttpErrorDetail>  
    </ErrorDetail>  
    </ns0:NACK>  
    ```  
  
## <a name="see-also"></a><span data-ttu-id="3c31c-191">Vea también</span><span class="sxs-lookup"><span data-stu-id="3c31c-191">See Also</span></span>  
 [<span data-ttu-id="3c31c-192">Adaptador de HTTP</span><span class="sxs-lookup"><span data-stu-id="3c31c-192">HTTP Adapter</span></span>](../core/http-adapter.md)  
<span data-ttu-id="3c31c-193">**Objetos COM de SSO**[!INCLUDE[ui-guidance-developers-reference](../includes/ui-guidance-developers-reference.md)]</span><span class="sxs-lookup"><span data-stu-id="3c31c-193">**SSO COM objects** [!INCLUDE[ui-guidance-developers-reference](../includes/ui-guidance-developers-reference.md)]</span></span>
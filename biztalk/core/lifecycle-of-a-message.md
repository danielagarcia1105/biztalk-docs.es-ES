---
title: Ciclo de vida de un mensaje | Documentos de Microsoft
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- messages, MessageBox database
- messages, orchestrations
- messages, host instances
- messages, receive locations
- send ports, about send ports
- processing, messages
- messages, processing
- host instances, about host instances
- receive locations, about receive locations
- hosts, about hosts
- messages, lifecycle
- MessageBox database, about MessageBox database
- receive ports, about receive ports
- send port groups, about send port groups
- messages, hosts
- messages, send port groups
- messages, receive ports
- orchestrations, about orchestrations
- messages, send ports
ms.assetid: d2374f86-9b5f-404f-ba7b-9cab69873fa8
caps.latest.revision: "13"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: e05aca3ec819fb8615552c5ed57114032d7ea60b
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
---
# <a name="lifecycle-of-a-message"></a><span data-ttu-id="a00fc-102">Ciclo de vida de un mensaje</span><span class="sxs-lookup"><span data-stu-id="a00fc-102">Lifecycle of a Message</span></span>
<span data-ttu-id="a00fc-103">La ilustración siguiente ofrece información general de alto nivel de la arquitectura de BizTalk Server desde el punto de vista de la mensajería.</span><span class="sxs-lookup"><span data-stu-id="a00fc-103">The following figure provides a high-level overview of the BizTalk Server architecture from a messaging perspective.</span></span>  
  
 <span data-ttu-id="a00fc-104">![Arquitectura de mensajería de BizTalk Server](../core/media/arch-messaging-01.gif "arch_messaging_01")</span><span class="sxs-lookup"><span data-stu-id="a00fc-104">![BizTalk Server messaging architecture](../core/media/arch-messaging-01.gif "arch_messaging_01")</span></span>  
  
 <span data-ttu-id="a00fc-105">En esta vista simplificada, se recibe un mensaje a través de una ubicación de recepción definida en un puerto de recepción determinado.</span><span class="sxs-lookup"><span data-stu-id="a00fc-105">In this simplified view, a message is received through a receive location defined in a given receive port.</span></span> <span data-ttu-id="a00fc-106">La ubicación de recepción procesa el mensaje y lo publica en la base de datos de cuadro de mensajes, el mecanismo principal de persistencia y enrutamiento de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="a00fc-106">This message is processed by the receive location and then published to the MessageBox database, the main persistence and routing mechanism for BizTalk Server.</span></span> <span data-ttu-id="a00fc-107">El cuadro de mensajes evalúa las suscripciones activas y enruta el mensaje a las orquestaciones y puertos de envío en los que coinciden las suscripciones.</span><span class="sxs-lookup"><span data-stu-id="a00fc-107">The MessageBox evaluates active subscriptions and routes the message to those orchestrations and send ports with matching subscriptions.</span></span> <span data-ttu-id="a00fc-108">Las orquestaciones pueden procesar el mensaje y publica mensajes a través del cuadro de mensajes en un puerto de envío, desde donde se transportan al destino final.</span><span class="sxs-lookup"><span data-stu-id="a00fc-108">Orchestrations may process the message and publish messages through the MessageBox to a send port where it is pushed out to its final destination.</span></span>  
  
 <span data-ttu-id="a00fc-109">A continuación se presentan los componentes principales del procesamiento de mensajes de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="a00fc-109">The following are key components involved in BizTalk Server message processing.</span></span>  
  
## <a name="receive-ports-and-receive-locations"></a><span data-ttu-id="a00fc-110">Puertos de recepción y ubicaciones de recepción</span><span class="sxs-lookup"><span data-stu-id="a00fc-110">Receive Ports and Receive Locations</span></span>  
 <span data-ttu-id="a00fc-111">A *puerto de recepción* es una colección de uno o más ubicaciones de recepción que definen puntos de entrada específicos en BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="a00fc-111">A *receive port* is a collection of one or more receive locations that define specific entry points into BizTalk Server.</span></span> <span data-ttu-id="a00fc-112">A *ubicación de recepción* es la configuración de un solo punto de conexión (URL) para recibir mensajes.</span><span class="sxs-lookup"><span data-stu-id="a00fc-112">A *receive location* is the configuration of a single endpoint (URL) to receive messages.</span></span> <span data-ttu-id="a00fc-113">La ubicación contiene la información de configuración para el adaptador de recepción y la canalización de recepción.</span><span class="sxs-lookup"><span data-stu-id="a00fc-113">The location contains configuration information for both a receive adapter and a receive pipeline.</span></span> <span data-ttu-id="a00fc-114">El *adaptador* es responsable de la parte de transporte y las comunicaciones de recibir un mensaje.</span><span class="sxs-lookup"><span data-stu-id="a00fc-114">The *adapter* is responsible for the transport and communications part of receiving a message.</span></span> <span data-ttu-id="a00fc-115">Entre los ejemplos se incluyen el adaptador de archivo y el adaptador de SOAP, que reciben mensajes desde distintas procedencias.</span><span class="sxs-lookup"><span data-stu-id="a00fc-115">Examples include the File adapter and SOAP adapter, each of which receives messages from different types of sources.</span></span> <span data-ttu-id="a00fc-116">La canalización de recepción se encarga de la preparación del mensaje para su publicación en el cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="a00fc-116">The receive pipeline is responsible for preparing the message for publishing into the MessageBox.</span></span> <span data-ttu-id="a00fc-117">A *canalización* es una serie de componentes que se ejecutan en secuencia, cada uno con el procesamiento específico de un mensaje como cifrado y descifrado, análisis o validación.</span><span class="sxs-lookup"><span data-stu-id="a00fc-117">A *pipeline* is a series of components that are executed in sequence, each providing specific processing to a message such as decryption/encryption, parsing, or validation.</span></span> <span data-ttu-id="a00fc-118">Para obtener más información acerca de las canalizaciones, puertos de recepción y ubicaciones de recepción, consulte [artefactos](../core/artifacts.md).</span><span class="sxs-lookup"><span data-stu-id="a00fc-118">For more information about pipelines, receive ports, and receive locations, see [Artifacts](../core/artifacts.md).</span></span>  
  
## <a name="send-ports-and-send-port-groups"></a><span data-ttu-id="a00fc-119">Puertos de envío y grupos de puertos de envío</span><span class="sxs-lookup"><span data-stu-id="a00fc-119">Send Ports and Send Port Groups</span></span>  
 <span data-ttu-id="a00fc-120">A *puerto de envío* es la combinación de una canalización de envío y un adaptador de envío.</span><span class="sxs-lookup"><span data-stu-id="a00fc-120">A *send port* is the combination of a send pipeline and a send adapter.</span></span> <span data-ttu-id="a00fc-121">Un grupo de puertos de envío representa un conjunto de puertos de envío y funciona como una lista de distribución de mensajes de correo electrónico.</span><span class="sxs-lookup"><span data-stu-id="a00fc-121">A send port group is a collection of send ports and works much like an e-mail distribution list.</span></span> <span data-ttu-id="a00fc-122">Cuando se envía un mensaje a un grupo de puertos de envío, dicho mensaje se enviará a todos los puertos de envío del grupo.</span><span class="sxs-lookup"><span data-stu-id="a00fc-122">A message sent to a send port group will be sent to all send ports in that group.</span></span> <span data-ttu-id="a00fc-123">La canalización de envío sirve para preparar un mensaje procedente de BizTalk Server para transmitirlo a otro servicio.</span><span class="sxs-lookup"><span data-stu-id="a00fc-123">The send pipeline is used to prepare a message coming from BizTalk Server for transmission to another service.</span></span> <span data-ttu-id="a00fc-124">El adaptador de envío se encarga de enviar el mensaje con un protocolo específico, como, por ejemplo, SOAP o FTP.</span><span class="sxs-lookup"><span data-stu-id="a00fc-124">The send adapter is responsible for actually sending the message using a specific protocol such as SOAP, or FTP.</span></span> <span data-ttu-id="a00fc-125">Para obtener más información sobre los puertos de envío y grupos de puertos de envío, consulte [artefactos](../core/artifacts.md).</span><span class="sxs-lookup"><span data-stu-id="a00fc-125">For more information on send ports and send port groups, see [Artifacts](../core/artifacts.md).</span></span>  
  
## <a name="orchestrations"></a><span data-ttu-id="a00fc-126">Orquestaciones</span><span class="sxs-lookup"><span data-stu-id="a00fc-126">Orchestrations</span></span>  
 <span data-ttu-id="a00fc-127">Las orquestaciones pueden realizar suscripciones para recibir y publicar (enviar) mensajes a través del cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="a00fc-127">Orchestrations can subscribe to (receive) and publish (send) messages through the MessageBox.</span></span> <span data-ttu-id="a00fc-128">Además, las orquestaciones pueden construir nuevos mensajes.</span><span class="sxs-lookup"><span data-stu-id="a00fc-128">In addition, orchestrations can construct new messages.</span></span> <span data-ttu-id="a00fc-129">Los mensajes se reciben con el mecanismo de suscripción de enrutamiento ya mencionado.</span><span class="sxs-lookup"><span data-stu-id="a00fc-129">Messages are received using the subscription and routing mechanism already discussed.</span></span> <span data-ttu-id="a00fc-130">Cuando se completan las suscripciones para las orquestaciones, se activa una nueva instancia y el mensaje se entrega, o, en caso de que se trate de suscripciones de instancia, la instancia vuelve a hidratarse si es necesario y el mensaje se entrega.</span><span class="sxs-lookup"><span data-stu-id="a00fc-130">When subscriptions are filled for orchestrations, a new instance is activated and the message is delivered, or in the case of instance subscriptions, the instance is rehydrated if necessary and the message is then delivered.</span></span> <span data-ttu-id="a00fc-131">Cuando se envían mensajes desde una orquestación, que se publican en el cuadro de mensajes de la misma manera como un mensaje que llega a una ubicación de recepción con las propiedades adecuadas se inserta en la base de datos para su uso en el enrutamiento.</span><span class="sxs-lookup"><span data-stu-id="a00fc-131">When messages are sent from an orchestration, they are published to the MessageBox in the same manner as a message arriving at a receive location with the appropriate properties is inserted into the database for use in routing.</span></span> <span data-ttu-id="a00fc-132">Para obtener más información acerca de las orquestaciones, consulte [artefactos](../core/artifacts.md).</span><span class="sxs-lookup"><span data-stu-id="a00fc-132">For more information about orchestrations, see [Artifacts](../core/artifacts.md).</span></span>  
  
## <a name="messagebox-database"></a><span data-ttu-id="a00fc-133">Base de datos de cuadro de mensaje</span><span class="sxs-lookup"><span data-stu-id="a00fc-133">MessageBox Database</span></span>  
 <span data-ttu-id="a00fc-134">El núcleo del motor de suscripción o publicación de BizTalk Server es la base de datos de cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="a00fc-134">The heart of the publish/subscribe engine in BizTalk Server is the MessageBox database.</span></span> <span data-ttu-id="a00fc-135">El cuadro de mensajes está formada por dos componentes: una o más bases de datos de Microsoft SQL Server y el agente de mensaje.</span><span class="sxs-lookup"><span data-stu-id="a00fc-135">The MessageBox is made up of two components: one or more Microsoft SQL Server databases and the Message Agent.</span></span> <span data-ttu-id="a00fc-136">La base de datos de SQL Server proporciona el almacén de persistencia para numerosos componentes, entre los que se incluyen mensajes, propiedades de mensaje, suscripciones, estados de orquestación, datos de seguimiento y colas de hosts para el enrutamiento.</span><span class="sxs-lookup"><span data-stu-id="a00fc-136">The SQL Server database provides the persistence store for many things including messages, message properties, subscriptions, orchestration states, tracking data, and host queues for routing.</span></span> <span data-ttu-id="a00fc-137">Para obtener más información acerca de la base de datos de cuadro de mensajes, vea [la base de datos de cuadro de mensajes](../core/the-messagebox-database.md).</span><span class="sxs-lookup"><span data-stu-id="a00fc-137">For more information about the MessageBox database, see [The MessageBox Database](../core/the-messagebox-database.md).</span></span>  
  
## <a name="hosts-and-host-instances"></a><span data-ttu-id="a00fc-138">Host e instancias de host</span><span class="sxs-lookup"><span data-stu-id="a00fc-138">Hosts and Host Instances</span></span>  
 <span data-ttu-id="a00fc-139">A *host* es una representación lógica de un proceso de Microsoft Windows que ejecuta artefactos de BizTalk Server como puertos de envío y orquestaciones.</span><span class="sxs-lookup"><span data-stu-id="a00fc-139">A *host* is a logical representation of a Microsoft Windows process that executes BizTalk Server artifacts such as send ports and orchestrations.</span></span> <span data-ttu-id="a00fc-140">A *instancia de host* es la representación física de un host en un servidor específico.</span><span class="sxs-lookup"><span data-stu-id="a00fc-140">A *host instance* is the physical representation of a host on a specific server.</span></span> <span data-ttu-id="a00fc-141">Existen dos tipos de host: el host de tipo En curso, propiedad de BizTalk Server y administrado por él, o el host aislado, que implica que el código de BizTalk Server se está ejecutando en un proceso no controlado por BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="a00fc-141">A host can be either an in-process host, which means it is owned and managed by BizTalk Server, or an isolated host, which means that the BizTalk Server code is running in a process that is not controlled by BizTalk Server.</span></span> <span data-ttu-id="a00fc-142">Un buen ejemplo de host aislado es Internet Information Services (IIS), que aloja las funciones de recepción de los adaptadores de HTTP y SOAP.</span><span class="sxs-lookup"><span data-stu-id="a00fc-142">A good example of an isolated host is Internet Information Services (IIS), which hosts the receive functionality of the HTTP and SOAP adapters.</span></span> <span data-ttu-id="a00fc-143">Los hosts se definen para un grupo de BizTalk Server completo, un conjunto de servidores BizTalk Server que comparten configuración, cuadros de mensajes, puertos, etc.</span><span class="sxs-lookup"><span data-stu-id="a00fc-143">Hosts are defined for an entire BizTalk Server group; a collection of BizTalk Servers that share configuration, MessageBoxes, ports, and so on.</span></span> <span data-ttu-id="a00fc-144">Para obtener más información sobre los hosts y las instancias de host, consulte [entidades](../core/entities.md).</span><span class="sxs-lookup"><span data-stu-id="a00fc-144">For more information about hosts and host instances, see [Entities](../core/entities.md).</span></span>  
  
## <a name="saving-a-message-body"></a><span data-ttu-id="a00fc-145">Guardar un cuerpo de mensaje</span><span class="sxs-lookup"><span data-stu-id="a00fc-145">Saving a Message Body</span></span>  
 <span data-ttu-id="a00fc-146">Hay tres formas de guardar un cuerpo de mensaje.</span><span class="sxs-lookup"><span data-stu-id="a00fc-146">There are three ways to save a message body.</span></span>  
  
### <a name="from-the-admin-mmc-group-hub-page-queries"></a><span data-ttu-id="a00fc-147">Desde las consultas de la página del concentrador de grupo del MMC de administradores</span><span class="sxs-lookup"><span data-stu-id="a00fc-147">From the Admin MMC group hub page queries</span></span>  
 <span data-ttu-id="a00fc-148">Este método solo es para los mensajes de la base de datos de cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="a00fc-148">This method is for messages in the MessageBox database only.</span></span>  
  
-   <span data-ttu-id="a00fc-149">Visualización de una instancia de servicio.</span><span class="sxs-lookup"><span data-stu-id="a00fc-149">View a Service Instance.</span></span>  
  
-   <span data-ttu-id="a00fc-150">Abra la **detalles de la instancia de servicio** cuadro de diálogo.</span><span class="sxs-lookup"><span data-stu-id="a00fc-150">Open the **Service Instance Details** dialog box.</span></span>  
  
-   <span data-ttu-id="a00fc-151">Haga clic en el **ficha mensajes** para ver la lista de mensajes asociados a esta instancia.</span><span class="sxs-lookup"><span data-stu-id="a00fc-151">Click the **Messages Tab** to view the list of messages associated with this instance.</span></span>  
  
-   <span data-ttu-id="a00fc-152">Haga clic en el mensaje y, a continuación, haga clic en **guardar**.</span><span class="sxs-lookup"><span data-stu-id="a00fc-152">Either right-click the message, and then click **Save**.</span></span>  
  
     <span data-ttu-id="a00fc-153">-O bien-</span><span class="sxs-lookup"><span data-stu-id="a00fc-153">-or-</span></span>  
  
-   <span data-ttu-id="a00fc-154">Haga doble clic en el mensaje para abrirlo en el **Visor de mensajes de**y haga clic en **guardar**.</span><span class="sxs-lookup"><span data-stu-id="a00fc-154">Double-click the message to open it in the **Message Viewer**, and click **Save**.</span></span>  
  
### <a name="from-the-operations-om"></a><span data-ttu-id="a00fc-155">Desde el modelo de objetos de operaciones</span><span class="sxs-lookup"><span data-stu-id="a00fc-155">From the Operations OM</span></span>  
  
-   <span data-ttu-id="a00fc-156">Use **GetInstance** para recuperar un objeto de instancia del servicio.</span><span class="sxs-lookup"><span data-stu-id="a00fc-156">Use **GetInstance** to retrieve a Service Instance object.</span></span>  
  
-   <span data-ttu-id="a00fc-157">Use **Instance.Messages []** para enumerar todos los mensajes que actualmente hace referencia a la instancia de servicio.</span><span class="sxs-lookup"><span data-stu-id="a00fc-157">Use **Instance.Messages [ ]** to enumerate all messages which the service instance currently references.</span></span>  
  
-   <span data-ttu-id="a00fc-158">Usar métodos en el objeto de mensaje como **Message.BodyPart []** y **Message.Context []** para tener acceso y guardarlo.</span><span class="sxs-lookup"><span data-stu-id="a00fc-158">Use methods on the message object such as **Message.BodyPart [ ]** and **Message.Context [  ]** to access and save it.</span></span>  
  
### <a name="from-the-dta"></a><span data-ttu-id="a00fc-159">Desde DTA</span><span class="sxs-lookup"><span data-stu-id="a00fc-159">From the DTA</span></span>  
  
-   <span data-ttu-id="a00fc-160">Recuperar mensajes de DTA mediante la **GetTrackedInstance** y **GetTrackedmessage** llamadas API.</span><span class="sxs-lookup"><span data-stu-id="a00fc-160">Retrieve messages from the DTA using the **GetTrackedInstance** and **GetTrackedmessage** API calls.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a00fc-161">Vea también</span><span class="sxs-lookup"><span data-stu-id="a00fc-161">See Also</span></span>  
 [<span data-ttu-id="a00fc-162">Arquitectura en tiempo de ejecución</span><span class="sxs-lookup"><span data-stu-id="a00fc-162">Runtime Architecture</span></span>](../core/runtime-architecture.md)
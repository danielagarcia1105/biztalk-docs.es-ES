---
title: Cómo probar y depurar un adaptador | Documentos de Microsoft
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: cf6563ea-b4ea-4617-b3da-d31250d002ab
caps.latest.revision: 8
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 508f0b5a5ee7b29ed6e2fbde9a94b352d645e550
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
ms.locfileid: "22256868"
---
# <a name="how-to-test-and-debug-an-adapter"></a><span data-ttu-id="4eece-102">Cómo probar y depurar un adaptador</span><span class="sxs-lookup"><span data-stu-id="4eece-102">How to Test and Debug an Adapter</span></span>
<span data-ttu-id="4eece-103">La depuración de problemas en tiempo de ejecución requiere a menudo llevar a cabo un enfoque desde varias perspectivas.</span><span class="sxs-lookup"><span data-stu-id="4eece-103">Debugging run-time problems often requires a multifaceted approach.</span></span> <span data-ttu-id="4eece-104">Los datos se deben recopilar de varios orígenes, por ejemplo, el seguimiento del software, los contadores de rendimiento, las entradas del registro de eventos, los eventos de Instrumental de administración de Windows (WMI) y el código de origen de la depuración, con el fin de determinar la causa de los problemas o errores en el software.</span><span class="sxs-lookup"><span data-stu-id="4eece-104">Data must be gathered from multiple sources such as software tracing, performance counters, event log entries, Windows Management Instrumentation (WMI) events, and debugging source code to determine the cause of problems or software bugs.</span></span>  
  
 <span data-ttu-id="4eece-105">Para depurar un adaptador, éste deberá estar conectado al proceso BtsNtSvc.exe, dado que los adaptadores de recepción y de envío se ejecutan en el espacio de direcciones del servicio de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="4eece-105">Because receive and send adapters run in the address space of the BizTalk service the debugger needs to be attached to the BtsNtSvc.exe process to debug an adapter.</span></span> <span data-ttu-id="4eece-106">Sin embargo, en el caso de los adaptadores de recepción aislados, el depurador debe estar conectado al proceso que aloja el adaptador.</span><span class="sxs-lookup"><span data-stu-id="4eece-106">However for isolated receive adapters, the debugger needs to be attached to the process that hosts the adapter.</span></span>  
  
 <span data-ttu-id="4eece-107">El código de tiempo de ejecución del adaptador se debe instrumentalizar con código de seguimiento para capturar diagnósticos en tiempo de ejecución y solucionar problemas.</span><span class="sxs-lookup"><span data-stu-id="4eece-107">The adapter run-time code should be instrumented with tracing code to capture run-time diagnostics for troubleshooting.</span></span> <span data-ttu-id="4eece-108">Para ello, puede usar Enterprise Instrumentation Framework (EIF) de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="4eece-108">You can do this by using the Microsoft Enterprise Instrumentation Framework (EIF).</span></span> <span data-ttu-id="4eece-109">Normalmente resulta útil agregar instrucciones de seguimiento para los diferentes niveles de gravedad, tales como realizar el seguimiento únicamente de las condiciones de error, de los errores y las advertencias y, finalmente, realizar el seguimiento de errores, advertencias e instrucciones informativas.</span><span class="sxs-lookup"><span data-stu-id="4eece-109">Typically it is useful to add trace statements for different levels of severity, for example, tracing for error conditions only, tracing for errors and warnings, and finally tracing for errors, warnings, and informational statements.</span></span> <span data-ttu-id="4eece-110">Además, puede que los adaptadores más complejos tengan subsistemas independientes para los que es necesario realizar un seguimiento de forma aislada unos de otros.</span><span class="sxs-lookup"><span data-stu-id="4eece-110">Further, more complex adapters may have separate subsystems that need to be traced in isolation from each other.</span></span> <span data-ttu-id="4eece-111">Por ejemplo, un adaptador puede tener un subsistema de red y un subsistema principal. Al habilitar el seguimiento para todos los subsistemas, puede que se genere una cantidad excesiva de "ruido" en algunos casos.</span><span class="sxs-lookup"><span data-stu-id="4eece-111">For example, an adapter may have a network subsubsystem and a core subsystem; enabling tracing for all subsystems may generate an excessive amount of "noise" in some scenarios.</span></span>  
  
 <span data-ttu-id="4eece-112">Se deben agregar contadores de rendimiento para capturar tasas y valores en tiempo de ejecución y aportar más información sobre el comportamiento del adaptador en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="4eece-112">Performance counters should be added to capture rates and values at run time to give more information about the run-time behavior of the adapter.</span></span> <span data-ttu-id="4eece-113">Por ejemplo, un adaptador podría publicar contadores de rendimiento para los números sin procesar de mensajes enviados de cada uno de los extremos, además de la tasa de mensajes enviados por segundo.</span><span class="sxs-lookup"><span data-stu-id="4eece-113">For example, an adapter might publish performance counters for the raw numbers of messages sent on a per-endpoint basis as well as the rate of messages sent per second.</span></span>  
  
 <span data-ttu-id="4eece-114">Los eventos de WMI también pueden resultar de utilidad en algunos escenarios de error críticos.</span><span class="sxs-lookup"><span data-stu-id="4eece-114">WMI events may also be useful for some critical error scenarios.</span></span>  <span data-ttu-id="4eece-115">Por ejemplo, si un adaptador genera un error crítico que hace que éste cierre una ubicación de recepción, la activación de un evento de WMI permite a un administrador escuchar dicho evento y llevar a cabo la acción necesaria.</span><span class="sxs-lookup"><span data-stu-id="4eece-115">For instance if an adapter hits a critical error that causes it to shut down a receive location, firing a WMI event allows an administrator to listen on that event and take appropriate action.</span></span>  
  
## <a name="adapter-testing"></a><span data-ttu-id="4eece-116">Pruebas de adaptadores</span><span class="sxs-lookup"><span data-stu-id="4eece-116">Adapter Testing</span></span>  
 <span data-ttu-id="4eece-117">Al desarrollar un adaptador personalizado para BizTalk Server, recuerde que deberá hacerlo siguiendo los estándares de calidad del software empresarial.</span><span class="sxs-lookup"><span data-stu-id="4eece-117">When you develop a custom adapter for BizTalk Server, remember that it should be developed to enterprise software quality.</span></span> <span data-ttu-id="4eece-118">Esto significa que debe probar el adaptador exhaustivamente antes de enviarlo.</span><span class="sxs-lookup"><span data-stu-id="4eece-118">This means that you need to test the adapter thoroughly before shipping it.</span></span> <span data-ttu-id="4eece-119">En esta sección, si bien no se describe con total detalle la forma de probar los adaptadores, sí se ofrecen unas pautas de lo que se debe llevar a cabo.</span><span class="sxs-lookup"><span data-stu-id="4eece-119">While it does not completely detail how adapters should be tested, this section gives an idea of what needs to be done.</span></span> <span data-ttu-id="4eece-120">En general las pruebas de código en tiempo de ejecución, como adaptadores deben abarcar tres grandes categorías: pruebas funcionales, pruebas de esfuerzo y pruebas de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="4eece-120">In general the testing of run-time code such as adapters should cover three broad categories: functional testing, stress testing, and performance testing.</span></span>  
  
### <a name="function-testing"></a><span data-ttu-id="4eece-121">Pruebas funcionales</span><span class="sxs-lookup"><span data-stu-id="4eece-121">Function Testing</span></span>  
 <span data-ttu-id="4eece-122">El adaptador se debe probar para todas las permutaciones de su funcionalidad, incluidas tanto las pruebas positivas como las negativas.</span><span class="sxs-lookup"><span data-stu-id="4eece-122">The adapter should be tested for all permutations of its functionality, including both positive tests and negative tests.</span></span> <span data-ttu-id="4eece-123">Las pruebas positivas deberían incluir al menos los siguientes escenarios:</span><span class="sxs-lookup"><span data-stu-id="4eece-123">Positive tests should include but not be limited to the following scenarios:</span></span>  
  
-   <span data-ttu-id="4eece-124">Recibir mensajes</span><span class="sxs-lookup"><span data-stu-id="4eece-124">Receive a message(s)</span></span>  
  
-   <span data-ttu-id="4eece-125">Transmitir mensajes</span><span class="sxs-lookup"><span data-stu-id="4eece-125">Transmit a message(s)</span></span>  
  
-   <span data-ttu-id="4eece-126">Transmitir un mensaje mediante un puerto dinámico</span><span class="sxs-lookup"><span data-stu-id="4eece-126">Transmit a message using a dynamic port</span></span>  
  
-   <span data-ttu-id="4eece-127">Deshabilitar ubicaciones de recepción</span><span class="sxs-lookup"><span data-stu-id="4eece-127">Disable receive locations</span></span>  
  
-   <span data-ttu-id="4eece-128">Actualizar la configuración</span><span class="sxs-lookup"><span data-stu-id="4eece-128">Update configuration</span></span>  
  
-   <span data-ttu-id="4eece-129">Asegurar que las ventanas de servicio funcionan tanto en los adaptadores de recepción como en los de envío</span><span class="sxs-lookup"><span data-stu-id="4eece-129">Ensure service windows are working for both receive and send adapters</span></span>  
  
-   <span data-ttu-id="4eece-130">Asegurar la integridad transaccional de los adaptadores con transacciones</span><span class="sxs-lookup"><span data-stu-id="4eece-130">Ensure transactional integrity for transacted adapters</span></span>  
  
 <span data-ttu-id="4eece-131">Las pruebas negativas deberían incluir, entre otras:</span><span class="sxs-lookup"><span data-stu-id="4eece-131">Negative tests should include but not be limited to:</span></span>  
  
-   <span data-ttu-id="4eece-132">Recibir mensajes no válidos</span><span class="sxs-lookup"><span data-stu-id="4eece-132">Receive a bad message(s)</span></span>  
  
-   <span data-ttu-id="4eece-133">Recibir un lote mixto de mensajes, algunos válidos y otros no válidos</span><span class="sxs-lookup"><span data-stu-id="4eece-133">Receive a mixed batch of messages, some good and some bad</span></span>  
  
-   <span data-ttu-id="4eece-134">Transmitir error</span><span class="sxs-lookup"><span data-stu-id="4eece-134">Transmit failure</span></span>  
  
-   <span data-ttu-id="4eece-135">Reintentar con éxito</span><span class="sxs-lookup"><span data-stu-id="4eece-135">Retry successful</span></span>  
  
-   <span data-ttu-id="4eece-136">Si se produce un error en el reintento, pasar al siguiente transporte con éxito</span><span class="sxs-lookup"><span data-stu-id="4eece-136">Retry fails, move to next transport successful</span></span>  
  
-   <span data-ttu-id="4eece-137">Si se produce un error en el traslado al siguiente transporte, suspender el mensaje</span><span class="sxs-lookup"><span data-stu-id="4eece-137">Move to next transport fails, suspend message</span></span>  
  
-   <span data-ttu-id="4eece-138">Transmitir un lote mixto de mensajes</span><span class="sxs-lookup"><span data-stu-id="4eece-138">Transmit a mixed batch of messages</span></span>  
  
-   <span data-ttu-id="4eece-139">Conmutación por error de la base de datos</span><span class="sxs-lookup"><span data-stu-id="4eece-139">Database failover</span></span>  
  
### <a name="stress-testing"></a><span data-ttu-id="4eece-140">Pruebas de esfuerzo</span><span class="sxs-lookup"><span data-stu-id="4eece-140">Stress Testing</span></span>  
 <span data-ttu-id="4eece-141">Los adaptadores son componentes de tiempo de ejecución, y como tales deben cumplir con los rigurosos requisitos del software de tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="4eece-141">Adapters are run-time components and as such should meet the stringent requirements for run-time software.</span></span> <span data-ttu-id="4eece-142">Generalmente, las pruebas de esfuerzo se llevan a cabo mediante la ejecución de escenarios bajo carga durante un período de tiempo.</span><span class="sxs-lookup"><span data-stu-id="4eece-142">Typically stress testing is carried out by running scenarios under load for a period of time.</span></span> <span data-ttu-id="4eece-143">Además se deberían realizar pruebas de errores entre el tiempo medio de alto esfuerzo y de bajo esfuerzo, en el que el adaptador se ejecuta bajo carga durante un período de tiempo determinado.</span><span class="sxs-lookup"><span data-stu-id="4eece-143">Further high-stress and low-stress mean time between failure tests should be performed, whereby the adapter is run under load for a measured time period.</span></span>  
  
 <span data-ttu-id="4eece-144">Por citar algunas directrices generales para estas pruebas, podríamos indicar que el adaptador se ejecute a alto esfuerzo durante 72 horas aproximadamente, donde el número de mensajes a través del adaptador produzca una utilización de la CPU de en torno al 80 o 90 por ciento.</span><span class="sxs-lookup"><span data-stu-id="4eece-144">Some rough guidelines for these tests might be running the adapter at high stress for around 72 hours, where the number of messages through the adapter causes the CPU utilization to be around of 80 to 90 percent.</span></span> <span data-ttu-id="4eece-145">En una situación de bajo esfuerzo, la utilización de la CPU estaría en torno al 30 o 40 por ciento durante aproximadamente 120 horas.</span><span class="sxs-lookup"><span data-stu-id="4eece-145">For low stress, the CPU utilization would be around 30 to 40 percent for around 120 hours.</span></span>  
  
### <a name="performance-testing"></a><span data-ttu-id="4eece-146">Pruebas de rendimiento</span><span class="sxs-lookup"><span data-stu-id="4eece-146">Performance Testing</span></span>  
 <span data-ttu-id="4eece-147">Los adaptadores se deben desarrollar teniendo en cuenta el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="4eece-147">Adapters should be developed with performance in mind.</span></span> <span data-ttu-id="4eece-148">Antes de lanzar un adaptador, debería validar su rendimiento.</span><span class="sxs-lookup"><span data-stu-id="4eece-148">Before releasing an adapter you should validate its performance.</span></span> <span data-ttu-id="4eece-149">Es importante garantizar que su rendimiento se escale horizontal y verticalmente, es decir, al agregar más CPU se produce un aumento del rendimiento del mismo modo que al agregar más equipos.</span><span class="sxs-lookup"><span data-stu-id="4eece-149">It is important to ensure that its performance scales up and scales out; that is, adding more CPUs leads to a performance increase as does adding more computers.</span></span> <span data-ttu-id="4eece-150">La generación de perfiles del código permite eliminar los cuellos de botella del rendimiento.</span><span class="sxs-lookup"><span data-stu-id="4eece-150">Profiling the code can help to eliminate performance bottlenecks.</span></span>
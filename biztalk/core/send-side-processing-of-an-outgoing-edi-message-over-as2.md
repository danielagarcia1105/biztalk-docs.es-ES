---
title: "Procesamiento de un mensaje EDI saliente a través de AS2 en el lado de envío | Documentos de Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: dfb63b22-6e2e-4d4f-b028-301c8d4d53b0
caps.latest.revision: "23"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: b893f7a5732bf204764bf7377ee39a8e628f3747
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
---
# <a name="send-side-processing-of-an-outgoing-edi-message-over-as2"></a><span data-ttu-id="7d372-102">Procesamiento de envío de mensajes EDI salientes a través de AS2</span><span class="sxs-lookup"><span data-stu-id="7d372-102">Send-Side Processing of an Outgoing EDI Message over AS2</span></span>
<span data-ttu-id="7d372-103">El procesamiento de envío de un mensaje EDI a través de AS2 incluye el envío de un mensaje AS2 con la carga EDI y la recepción de confirmaciones de MDN y EDI (si están habilitadas).</span><span class="sxs-lookup"><span data-stu-id="7d372-103">Send-side processing of an EDI message over AS2 includes sending an AS2 message with the EDI payload and receiving MDN and EDI acknowledgments (if enabled).</span></span>  
  
 <span data-ttu-id="7d372-104">La canalización de envío AS2EDISend envía un mensaje EDI/AS2 ensamblado al socio comercial receptor a través de HTTP/HTTPS.</span><span class="sxs-lookup"><span data-stu-id="7d372-104">The AS2EDISend send pipeline sends an assembled EDI/AS2 message to the receiving trading partner over HTTP/HTTPS.</span></span> <span data-ttu-id="7d372-105">La canalización de recepción AS2EDIReceive recibe un MDN devuelto como respuesta al mensaje AS2 y una confirmación de EDI en respuesta al mensaje EDI.</span><span class="sxs-lookup"><span data-stu-id="7d372-105">The AS2EDIReceive receive pipeline receives an MDN returned in response to the AS2 message, and an EDI acknowledgment returned in response to the EDI message.</span></span> <span data-ttu-id="7d372-106">Cada una de estas canalizaciones procesa un mensaje AS2 y procesa la carga EDI en un mensaje AS2.</span><span class="sxs-lookup"><span data-stu-id="7d372-106">Each of these pipelines processes an AS2 message and processes the EDI payload within an AS2 message.</span></span> <span data-ttu-id="7d372-107">Puede incluir estas canalizaciones en un puerto de envío HTTP de petición-respuesta bidireccional o en un puerto de envío HTTP unidireccional y en un puerto de recepción HTTP unidireccional.</span><span class="sxs-lookup"><span data-stu-id="7d372-107">You can include these pipelines in an HTTP two-way solicit response send port, or in a one-way HTTP send port and a one-way HTTP receive port.</span></span>  
  
 <span data-ttu-id="7d372-108">Para enviar un intercambio EDI a través de AS2, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] llevará a cabo los pasos siguientes:</span><span class="sxs-lookup"><span data-stu-id="7d372-108">To send an EDI interchange over AS2, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will perform the following steps:</span></span>  
  
-   <span data-ttu-id="7d372-109">Procesar la carga EDI para enviar</span><span class="sxs-lookup"><span data-stu-id="7d372-109">Processing the EDI payload for sending</span></span>  
  
-   <span data-ttu-id="7d372-110">Enviar el mensaje AS2</span><span class="sxs-lookup"><span data-stu-id="7d372-110">Sending the AS2 message</span></span>  
  
-   <span data-ttu-id="7d372-111">Recibir el MDN devuelto</span><span class="sxs-lookup"><span data-stu-id="7d372-111">Receiving the returned MDN</span></span>  
  
-   <span data-ttu-id="7d372-112">Recibir la confirmación EDI devuelta</span><span class="sxs-lookup"><span data-stu-id="7d372-112">Receiving the returned EDI acknowledgment</span></span>  
  
## <a name="processing-the-edi-payload-for-sending"></a><span data-ttu-id="7d372-113">Procesar la carga EDI para el envío</span><span class="sxs-lookup"><span data-stu-id="7d372-113">Processing the EDI Payload for Sending</span></span>  
 <span data-ttu-id="7d372-114">Antes de crear un mensaje AS2, la canalización AS2EdiSend debe procesar el intercambio EDI.</span><span class="sxs-lookup"><span data-stu-id="7d372-114">Before creating an AS2 message, the AS2EdiSend pipeline must process the EDI interchange.</span></span> <span data-ttu-id="7d372-115">Si está habilitado el procesamiento por lotes saliente, conjuntos de transacciones se procesarán por lotes como se describe en [ensamblar un intercambio de EDI por lotes](../core/assembling-a-batched-edi-interchange.md).</span><span class="sxs-lookup"><span data-stu-id="7d372-115">If outbound batching is enabled, transaction sets will be batched as described in [Assembling a Batched EDI Interchange](../core/assembling-a-batched-edi-interchange.md).</span></span> <span data-ttu-id="7d372-116">El ensamblador EDI creará el intercambio EDI tal y como se describe en [cómo funciona el de ensamblador de EDI](../core/how-the-edi-assembler-works.md).</span><span class="sxs-lookup"><span data-stu-id="7d372-116">The EDI Assembler will create the EDI interchange as described in [How the EDI Assembler Works](../core/how-the-edi-assembler-works.md).</span></span>  
  
## <a name="sending-the-as2-message"></a><span data-ttu-id="7d372-117">Envía el mensaje AS2</span><span class="sxs-lookup"><span data-stu-id="7d372-117">Sending the AS2 Message</span></span>  
 <span data-ttu-id="7d372-118">El codificador AS2 de la canalización de envío AS2 realiza primero la resolución del acuerdo para determinar las propiedades del acuerdo que se utilizarán para procesar el mensaje saliente.</span><span class="sxs-lookup"><span data-stu-id="7d372-118">The AS2 Encoder in the AS2 send pipeline first performs agreement resolution to determine the agreement properties to be used to process the outgoing message.</span></span> <span data-ttu-id="7d372-119">Para obtener más información, consulte [resolución del acuerdo para mensajes AS2 salientes](../core/agreement-resolution-for-outgoing-as2-messages.md).</span><span class="sxs-lookup"><span data-stu-id="7d372-119">For more information, see [Agreement Resolution for Outgoing AS2 Messages](../core/agreement-resolution-for-outgoing-as2-messages.md).</span></span>  
  
 <span data-ttu-id="7d372-120">El codificador AS2 crea el conjunto de encabezados HTTP necesarios para enviar un mensaje AS2.</span><span class="sxs-lookup"><span data-stu-id="7d372-120">The AS2 Encoder builds the set of HTTP headers required to send an AS2 message.</span></span> <span data-ttu-id="7d372-121">Agrega estos encabezados a la propiedad de contexto `HTTP.UserHttpHeaders`, que consiste en una cadena única de valores de encabezado.</span><span class="sxs-lookup"><span data-stu-id="7d372-121">It adds these headers to the `HTTP.UserHttpHeaders` context property, which is a single string of header values.</span></span> <span data-ttu-id="7d372-122">El Codificador AS2 integra los siguientes encabezados AS2 en `HTTP.UserHttpHeaders`.</span><span class="sxs-lookup"><span data-stu-id="7d372-122">The AS2 Encoder builds the following AS2 headers in `HTTP.UserHttpHeaders`.</span></span> <span data-ttu-id="7d372-123">Estos encabezados deben estar en los mensajes AS2.</span><span class="sxs-lookup"><span data-stu-id="7d372-123">These headers must be in the AS2 messages.</span></span>  
  
-   <span data-ttu-id="7d372-124">AS2-To</span><span class="sxs-lookup"><span data-stu-id="7d372-124">AS2-To</span></span>  
  
-   <span data-ttu-id="7d372-125">AS2-From</span><span class="sxs-lookup"><span data-stu-id="7d372-125">AS2-From</span></span>  
  
-   <span data-ttu-id="7d372-126">AS2-Version</span><span class="sxs-lookup"><span data-stu-id="7d372-126">AS2-Version</span></span>  
  
-   <span data-ttu-id="7d372-127">MessageID</span><span class="sxs-lookup"><span data-stu-id="7d372-127">MessageID</span></span>  
  
-   <span data-ttu-id="7d372-128">OriginalMessageID (solo para MDN)</span><span class="sxs-lookup"><span data-stu-id="7d372-128">OriginalMessageID (for MDNs only)</span></span>  
  
 <span data-ttu-id="7d372-129">Si el **solicitar MDN** propiedad está activada, la canalización establecerá los encabezados Disposition-Notification-To, Receipt-Delivery-Option y Signed-Receipt-MICalg AS2 en el mensaje a los valores de las propiedades correspondientes y establecerá el encabezado de AS2 Signed-Receipt-Protocol en "pcks7-signature" si el **solicitar MDN firmado** se comprueba la propiedad.</span><span class="sxs-lookup"><span data-stu-id="7d372-129">If the **Request MDN** property is checked, the pipeline will set the Disposition-Notification-To, Receipt-Delivery-Option, and Signed-Receipt-MICalg AS2 headers in the message to the values in the corresponding properties; and it will set the Signed-Receipt-Protocol AS2 header to "pcks7-signature" if the **Request signed MDN** property is checked.</span></span>  
  
 <span data-ttu-id="7d372-130">Si la propiedad de contexto `HTTP.UserHttpHeaders` no existe, el codificador AS2 la creará.</span><span class="sxs-lookup"><span data-stu-id="7d372-130">If the `HTTP.UserHttpHeaders` context property does not exist, the AS2 Encoder will create it.</span></span> <span data-ttu-id="7d372-131">Si `HTTP.UserHttpHeaders` ya existe, el codificador AS2 la utilizará en lugar de crearla.</span><span class="sxs-lookup"><span data-stu-id="7d372-131">If `HTTP.UserHttpHeaders` already exists, the AS2 Encoder will use it, rather than creating it.</span></span> <span data-ttu-id="7d372-132">Si crea `HTTP.UserHttpHeaders`, escribe encabezados en ella y, a continuación, la escribe en el contexto del mensaje, el codificador AS2 utilizará estos encabezados y tendrán prioridad frente a los encabezados de otros orígenes.</span><span class="sxs-lookup"><span data-stu-id="7d372-132">If you create `HTTP.UserHttpHeaders`, write headers to it, and then write it to the context of the message, the AS2 Encoder will use those headers, and they will take priority over headers from other sources.</span></span> <span data-ttu-id="7d372-133">La excepción es el encabezado AS2-From que siempre se toma a de las propiedades del acuerdo.</span><span class="sxs-lookup"><span data-stu-id="7d372-133">The exception to that is the AS2-From header, which is always taken from the agreement properties.</span></span>  
  
 <span data-ttu-id="7d372-134">Si un encabezado de AS2 no se encuentra en `HTTP.UserHttpHeaders`, el codificador AS2 lo agregará desde las propiedades de contexto único.</span><span class="sxs-lookup"><span data-stu-id="7d372-134">If an AS2 header is not in `HTTP.UserHttpHeaders`, the AS2 Encoder will add it from single context properties.</span></span> <span data-ttu-id="7d372-135">Esto significa que se pueden agregar encabezados AS2 promoviéndolos o escribiéndolos en el contexto del mensaje (si no se encuentran ya en `HTTP.UserHttpHeaders`).</span><span class="sxs-lookup"><span data-stu-id="7d372-135">This means that you can add AS2 headers by promoting or writing them to the context of the message (if they are not already in `HTTP.UserHttpHeaders`).</span></span> <span data-ttu-id="7d372-136">Si un encabezado AS2 no está ni en `HTTP.UserHttpHeaders`, ni como propiedad en el contexto, el codificador AS2 lo agregará en `HTTP.UserHttpHeaders` a partir de las propiedades del acuerdo.</span><span class="sxs-lookup"><span data-stu-id="7d372-136">If an AS2 header is neither in `HTTP.UserHttpHeaders`, nor present as a property in the context, the AS2 Encoder will add it from agreement properties into `HTTP.UserHttpHeaders`.</span></span>  
  
 <span data-ttu-id="7d372-137">Después de que el codificador AS2 crea los encabezados en la propiedad `HTTP.UserHttpHeaders`, lo escribe en el contexto del mensaje.</span><span class="sxs-lookup"><span data-stu-id="7d372-137">After the AS2 Encoder builds the headers in the `HTTP.UserHttpHeaders` property, it writes it to the context of the message.</span></span> <span data-ttu-id="7d372-138">El adaptador de HTTP recoge `HTTP.UserHttpHeaders` y antepone los valores del encabezado de `HTTP.UserHttpHeaders` en el mensaje.</span><span class="sxs-lookup"><span data-stu-id="7d372-138">The HTTP Adapter picks up `HTTP.UserHttpHeaders`, and prepends the header values from `HTTP.UserHttpHeaders` into the message.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="7d372-139">El transporte de AS2 está destinado para funcionar solo con el adaptador de HTTP.</span><span class="sxs-lookup"><span data-stu-id="7d372-139">AS2 transport is intended to work only with the HTTP adapter.</span></span> <span data-ttu-id="7d372-140">Sin embargo, si establece manualmente las propiedades de contexto adecuadas, puede utilizar el adaptador de archivo para transportar mensajes AS2.</span><span class="sxs-lookup"><span data-stu-id="7d372-140">However, if you manually set the appropriate context properties, you can use the FILE Adapter to transport AS2 messages.</span></span> <span data-ttu-id="7d372-141">Para obtener más información, consulte [enviar un mensaje AS2 a través de un puerto de envío de archivo](../core/sending-an-as2-message-over-a-file-send-port.md).</span><span class="sxs-lookup"><span data-stu-id="7d372-141">For more information, see [Sending an AS2 Message over a FILE Send Port](../core/sending-an-as2-message-over-a-file-send-port.md).</span></span>  
  
## <a name="processing-the-returned-mdn"></a><span data-ttu-id="7d372-142">Procesar el MDN devuelto</span><span class="sxs-lookup"><span data-stu-id="7d372-142">Processing the Returned MDN</span></span>  
 <span data-ttu-id="7d372-143">Si un MDN está habilitado, la canalización de recepción asociada con el puerto de envío bidireccional recibe el MDN desde la entidad que recibe el mensaje AS2.</span><span class="sxs-lookup"><span data-stu-id="7d372-143">If an MDN is enabled, the receive pipeline associated with the two-way send port receives the MDN from the party that receives the AS2 message.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="7d372-144">Para obtener más información acerca del procesamiento que las canalizaciones de envío de AS2 realizan en los MDN entrantes, vea [enviar un MDN saliente](../core/sending-an-outgoing-mdn.md).</span><span class="sxs-lookup"><span data-stu-id="7d372-144">For more information about the processing that the AS2 send pipelines perform on incoming MDNs, see [Sending an Outgoing MDN](../core/sending-an-outgoing-mdn.md).</span></span>  
  
## <a name="processing-the-returned-edi-acknowledgment"></a><span data-ttu-id="7d372-145">Procesar la confirmación EDI devuelta</span><span class="sxs-lookup"><span data-stu-id="7d372-145">Processing the Returned EDI Acknowledgment</span></span>  
 <span data-ttu-id="7d372-146">Si la confirmación EDI está habilitada, la canalización de recepción asociada con el puerto de envío bidireccional también recibe una confirmación EDI desde el receptor del mensaje EDI (porque filtra en el tipo de mensaje de confirmación EDI de BizTalk).</span><span class="sxs-lookup"><span data-stu-id="7d372-146">If an EDI acknowledgment is enabled, the receive pipeline associated with the two-way send port also receives an EDI acknowledgment from the receiver of the EDI message (because it filters on the BizTalk EDI ACK message type).</span></span> <span data-ttu-id="7d372-147">Para obtener más información, consulte [procesar una confirmación recibido](../core/processing-a-received-acknowledgment.md).</span><span class="sxs-lookup"><span data-stu-id="7d372-147">For more information, see [Processing a Received Acknowledgment](../core/processing-a-received-acknowledgment.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7d372-148">Vea también</span><span class="sxs-lookup"><span data-stu-id="7d372-148">See Also</span></span>  
 [<span data-ttu-id="7d372-149">Cómo BizTalk Server envía mensajes AS2</span><span class="sxs-lookup"><span data-stu-id="7d372-149">How BizTalk Server Sends AS2 Messages</span></span>](../core/how-biztalk-server-sends-as2-messages.md)
---
title: Cómo crear vínculos de rol en orquestaciones | Documentos de Microsoft
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: cc386ac2-a851-4342-9ceb-0b6faddf4ece
caps.latest.revision: 13
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: e40a77392af9e97791cd9afbacc8f0b533f60288
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
ms.locfileid: "22250428"
---
# <a name="how-to-create-role-links-in-orchestrations"></a><span data-ttu-id="1b7a7-102">Cómo crear vínculos de rol en orquestaciones</span><span class="sxs-lookup"><span data-stu-id="1b7a7-102">How to Create Role Links in Orchestrations</span></span>
<span data-ttu-id="1b7a7-103">Las tareas básicas que deberá realizar para usar los vínculos de rol en la orquestación son:</span><span class="sxs-lookup"><span data-stu-id="1b7a7-103">The following are the basic tasks you will need to complete to use role links in your orchestration:</span></span>  
  
-   <span data-ttu-id="1b7a7-104">Crear entidades y puertos de envío, y asociarlos entre sí</span><span class="sxs-lookup"><span data-stu-id="1b7a7-104">Create parties and send ports and associate them with each other.</span></span>  
  
-   <span data-ttu-id="1b7a7-105">Utilice el procedimiento siguiente para crear tipos de vínculos de rol y agregar los tipos de puerto.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-105">Use the following procedure to create role link types and add the port types.</span></span>  
  
    |<span data-ttu-id="1b7a7-106">Para crear un tipo de vínculo de rol</span><span class="sxs-lookup"><span data-stu-id="1b7a7-106">To create a role link type</span></span>|  
    |--------------------------------|  
    |<span data-ttu-id="1b7a7-107">1.  En la ventana Vista orquestación, expanda **tipos**, haga clic en **tipos de vínculo de función**y, a continuación, haga clic en **nuevo tipo de vínculo de función**.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-107">1.  In the Orchestration View window, expand **Types**, right-click **Role Link Types**, and then click **New Role Link Type**.</span></span><br /><span data-ttu-id="1b7a7-108">2.  Haga clic en el tipo de vínculo de rol que acaba de crear.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-108">2.  Click the role link type you just created.</span></span> <span data-ttu-id="1b7a7-109">En la ventana Propiedades, en la **identificador** , escriba `Provider_Consumer_RoleLinkType`.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-109">In the Properties window, in the **Identifier** field, type `Provider_Consumer_RoleLinkType`.</span></span><br /><span data-ttu-id="1b7a7-110">3.  Expanda **Provider_Consumer_RoleLinkType**y, a continuación, haga clic en **Role_1**.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-110">3.  Expand **Provider_Consumer_RoleLinkType**, and then click **Role_1**.</span></span> <span data-ttu-id="1b7a7-111">En la ventana Propiedades, en la **identificador** , escriba `ConsumerRole`.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-111">In the Properties window, in the **Identifier** field, type `ConsumerRole`.</span></span><br /><span data-ttu-id="1b7a7-112">4.  Haga clic en **ConsumerRole**y, a continuación, haga clic en **Agregar tipo de puerto**.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-112">4.  Right-click **ConsumerRole**, and then click **Add Port Type**.</span></span> <span data-ttu-id="1b7a7-113">Con ello, se inicia el Asistente para tipo de puerto.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-113">This starts the Port Type Wizard.</span></span><br /><span data-ttu-id="1b7a7-114">5.  En el **Asistente para el tipo de puerto** página, haga clic en **siguiente**.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-114">5.  On the **Welcome to the Port Type Wizard** page, click **Next**.</span></span><br /><span data-ttu-id="1b7a7-115">6.  En el **seleccione un tipo de puerto o cree un nuevo tipo de puerto** , seleccione **crear un nuevo tipo de puerto**y, a continuación, para **nombre de tipo de puerto**, tipo `ConsumerPortType`.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-115">6.  On the **Select a Port Type or create a new Port Type** page, select **Create a new Port Type**, and then for **Port Type Name**, type `ConsumerPortType`.</span></span><br /><span data-ttu-id="1b7a7-116">7.  Para **patrón de comunicación**, seleccione **unidireccional**y para **restricciones de acceso**, seleccione **público: sin límite**.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-116">7.  For **Communication Pattern**, select **One-Way**, and for **Access Restrictions**, select **Public - no limit**.</span></span> <span data-ttu-id="1b7a7-117">Haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-117">Click **Next**.</span></span><br /><span data-ttu-id="1b7a7-118">8.  En el **completar el Asistente para puertos** página, haga clic en **finalizar**.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-118">8.  On the **Completing the Port Wizard** page, click **Finish**.</span></span><br /><span data-ttu-id="1b7a7-119">9. Haga clic en **Provider_Consumer_RoleLinkType**y, a continuación, haga clic en **nuevo rol**.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-119">9. Right-click **Provider_Consumer_RoleLinkType**, and then click **New Role**.</span></span><br /><span data-ttu-id="1b7a7-120">10. Haga clic en **Role_1**y, a continuación, en la ventana Propiedades, en la **identificador** , escriba `ProviderRole`.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-120">10. Click **Role_1**, and then in the Properties window, in the **Identifier** field, type `ProviderRole`.</span></span><br /><span data-ttu-id="1b7a7-121">11. Haga clic en **ProviderRole**y, a continuación, haga clic en **Agregar tipo de puerto**.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-121">11. Right-click **ProviderRole**, and then click **Add Port Type**.</span></span> <span data-ttu-id="1b7a7-122">Con ello, se inicia el Asistente para tipo de puerto.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-122">This starts the Port Type Wizard.</span></span><br /><span data-ttu-id="1b7a7-123">12. En el **Asistente para el tipo de puerto** página, haga clic en **siguiente**.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-123">12. On the **Welcome to the Port Type Wizard** page, click **Next**.</span></span><br /><span data-ttu-id="1b7a7-124">13. En el **seleccione un tipo de puerto o cree un nuevo tipo de puerto** , seleccione **crear un nuevo tipo de puerto**y, a continuación, para **nombre de tipo de puerto**, tipo `ProviderPortType`.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-124">13. On the **Select a Port Type or create a new Port Type** page, select **Create a new Port Type**, and then for **Port Type Name**, type `ProviderPortType`.</span></span><br /><span data-ttu-id="1b7a7-125">14. Para **patrón de comunicación**, seleccione **unidireccional**y para **restricciones de acceso**, seleccione **público: sin límite**.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-125">14. For **Communication Pattern**, select **One-Way**, and for **Access Restrictions**, select **Public - no limit**.</span></span> <span data-ttu-id="1b7a7-126">Haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-126">Click **Next**.</span></span><br /><span data-ttu-id="1b7a7-127">15. En el **completar el Asistente para puertos** página, haga clic en **finalizar**.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-127">15. On the **Completing the Port Wizard** page, click **Finish**.</span></span> <span data-ttu-id="1b7a7-128">**Nota:** puertos configurados colocados dentro de los vínculos de rol no conservan su información de enlace asociado.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-128">**Note:**      Configured ports placed inside of role links do not retain their associated binding information.</span></span>|  
  
     <span data-ttu-id="1b7a7-129">En el procedimiento anterior, crear un tipo de vínculo de función que contiene dos roles: ProviderRole, que recibirá y procesará mensajes del consumidor; y ConsumerRole que la orquestación usará el puerto de envío que se proporciona con el rol para enviar mensajes a la consumidor.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-129">In the preceding procedure, you create a role link type that contains two roles—a ProviderRole that will receive and process messages from the consumer and a ConsumerRole that your orchestration will use the send port provided with the role to send messages to the consumer.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="1b7a7-130">El tipo de vínculo de rol puede incluir un rol de proveedor y un rol de consumidor, además de poder incluir solo uno de ellos o uno de cada, dependiendo de las necesidades del proceso empresarial.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-130">The role link type can contain a provider role and a consumer role, and it can include one of either or one of each, depending on your business process needs.</span></span>  
  
-   <span data-ttu-id="1b7a7-131">Para agregar vínculos de rol a la orquestación, siga este procedimiento.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-131">Use the following procedure to add role links to your orchestration.</span></span>  
  
    |<span data-ttu-id="1b7a7-132">Para crear un vínculo de rol con el Asistente para vínculo de función</span><span class="sxs-lookup"><span data-stu-id="1b7a7-132">To create a role link by using the Role Link Wizard</span></span>|  
    |---------------------------------------------------------|  
    |<span data-ttu-id="1b7a7-133">1.  En el cuadro de herramientas de orquestaciones, arrastre la **vínculo de función** forma a la superficie de diseño.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-133">1.  In the orchestration Toolbox, drag the **Role Link** shape to the design surface.</span></span> <span data-ttu-id="1b7a7-134">Con ello, se inicia el Asistente para vínculo de función.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-134">This starts the Role Link Wizard.</span></span><br /><span data-ttu-id="1b7a7-135">2.  En el **éste es el Asistente para vínculo de función** página, haga clic en **siguiente**.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-135">2.  On the **Welcome to the Role Link Wizard** page, click **Next**.</span></span><br /><span data-ttu-id="1b7a7-136">3.  En el **nombre de vínculo de función** página, en la **nombre** , escriba `Provider_Consumer`.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-136">3.  On the **Role Link Name** page, in the **Name** field, type `Provider_Consumer`.</span></span> <span data-ttu-id="1b7a7-137">Haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-137">Click **Next**.</span></span><br /><span data-ttu-id="1b7a7-138">4.  En el **tipo de vínculo de función** página, seleccione **utilizar un tipo de vínculo de rol existente**.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-138">4.  On the **Role Link Type** page, select **Use an existing Role Link Type**.</span></span> <span data-ttu-id="1b7a7-139">En el **nombre de tipo de vínculo de función** lista desplegable, seleccione **Provider_Consumer_RoleLinkType**.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-139">In the **Role Link Type Name** drop-down list, select **Provider_Consumer_RoleLinkType**.</span></span> <span data-ttu-id="1b7a7-140">Haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-140">Click **Next**.</span></span><br /><span data-ttu-id="1b7a7-141">5.  En el **identificación de función** página, seleccione **ProviderRole** desde el **qué función implementará esta orquestación para recibir y procesar mensajes de socios?** lista desplegable.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-141">5.  On the **Role Identification** page, select **ProviderRole** from the **Which role will this orchestration implement to receive and process messages from partners?** drop-down list.</span></span> <span data-ttu-id="1b7a7-142">El asistente selecciona automáticamente **ConsumerRole** para **esta orquestación utilizará la siguiente función para enviar mensajes a los socios comerciales en los puertos dentro de la función**.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-142">The wizard automatically selects **ConsumerRole** for **This orchestration will use the role below to send messages to partners on ports inside the role**.</span></span> <span data-ttu-id="1b7a7-143">Haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-143">Click **Next**.</span></span><br /><span data-ttu-id="1b7a7-144">6.  En el **uso de vínculo de función** página, seleccione **enviaré el primer mensaje en función de mi socio**.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-144">6.  On the **Role Link Usage** page, select **I will be sending the first message to my partner's role**.</span></span> <span data-ttu-id="1b7a7-145">Haga clic en **Finalizar**.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-145">Click **Finish**.</span></span>|  
  
     <span data-ttu-id="1b7a7-146">En el procedimiento anterior, la función ConsumerRole se define de forma más detallada como rol de inicio.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-146">In the preceding procedure, you further define the ConsumerRole as the initiating role.</span></span> <span data-ttu-id="1b7a7-147">Esto significa que la orquestación enviará el primer mensaje al consumidor a través del puerto proporcionado por ConsumerRole y, a continuación, ProviderRole recibirá el mensaje que devuelve el consumidor para su posterior procesamiento.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-147">This means that your orchestration will send the first message to the consumer through the port provided by the ConsumerRole and then the ProviderRole will receive the message sent back from the consumer for further processing.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="1b7a7-148">Si hay solo un rol en el tipo de vínculo de rol, debe definir el rol en el proceso empresarial seleccionando la opción **rol de proveedor: recibiré el primer mensaje** o **rol de consumidor: enviaré el primer mensaje** en lugar de realizar el paso 5 del procedimiento anterior.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-148">If there is only one role in the role link type, you need to define your role in the business process by selecting either **Provider Role: I will be receiving the first message** or **Consumer Role: I will be sending the first message** instead of performing step 5 in the preceding procedure.</span></span>  
  
-   <span data-ttu-id="1b7a7-149">Diseñar el proceso empresarial.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-149">Design your business process.</span></span> <span data-ttu-id="1b7a7-150">Puede aprovechar los conjuntos de correlaciones para asegurarse de que un mensaje entrante coincide con la instancia correspondiente de una orquestación.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-150">You can leverage correlation sets to ensure that an incoming message matches the appropriate instance of an orchestration.</span></span>  
  
-   <span data-ttu-id="1b7a7-151">Asociar los puertos con **enviar** y **recepción** formas.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-151">Associate the ports with **Send** and **Receive** shapes.</span></span> <span data-ttu-id="1b7a7-152">Además, haga lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="1b7a7-152">In addition, do the following:</span></span>  
  
    -   <span data-ttu-id="1b7a7-153">Si el rol de inicio es un consumidor para enviar mensajes, establezca explícitamente la **DestinationParty** propiedad (una vez y solo una vez) en la orquestación.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-153">If the initiating role is a consumer for sending messages, explicitly set the **DestinationParty** property (once and only once) in your orchestration.</span></span> <span data-ttu-id="1b7a7-154">Para ello, establezca el valor de la **DestinationParty** en el **expresión** forma, como en el ejemplo siguiente, donde ConfirmOrder es el nombre de un vínculo de función, y PartnerName y OrganizationName son parámetros de una entidad:</span><span class="sxs-lookup"><span data-stu-id="1b7a7-154">To do so, set the value of the **DestinationParty** in the **Expression** shape, as in the following example, where ConfirmOrder is the name of a role link, and PartnerName and OrganizationName are parameters of a party:</span></span>  
  
        ```  
        ConfirmOrder(Microsoft.XLANGs.BaseTypes.DestinationParty) = new Microsoft.XLANGs.BaseTypes.Party("PartnerName", "OrganizationName");  
        ```  
  
    -   <span data-ttu-id="1b7a7-155">Si el rol de inicio es un proveedor para recibir mensajes, la **DestinationParty** propiedad se inicializa automáticamente por el receptor.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-155">If the initiating role is a provider for receiving messages, the **DestinationParty** property is initialized automatically by the receiver.</span></span> <span data-ttu-id="1b7a7-156">El **DestinationParty** se establece en el proveedor.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-156">The **DestinationParty** is set to the provider itself.</span></span> <span data-ttu-id="1b7a7-157">El **SourceParty** propiedad es de solo lectura y se proporciona a través de un componente de canalización de confianza para resolver el nombre de la entidad en función del identificador de seguridad (SID) del remitente o de un certificado asociado a la entidad.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-157">The **SourceParty** property is read-only, and is supplied through a trusted pipeline component to resolve the party name based on the security identifier (SID) of the sender or on a certificate associated with the party.</span></span> <span data-ttu-id="1b7a7-158">El host que ejecuta el componente de canalización debe marcarse como **autenticación de confianza**.</span><span class="sxs-lookup"><span data-stu-id="1b7a7-158">The host running the pipeline component must be marked as **Authentication Trusted**.</span></span> <span data-ttu-id="1b7a7-159">Puede obtener el valor de la **SourceParty** en el **expresión** forma mediante el código de ejemplo siguiente:</span><span class="sxs-lookup"><span data-stu-id="1b7a7-159">You can get the value of the **SourceParty** in the **Expression** shape by using the following sample code:</span></span>  
  
        ```  
        PartyName = Buyer_Supplier(Microsoft.XLANGs.BaseTypes.SourceParty);  
        ```  
  
## <a name="examples-of-using-role-links"></a><span data-ttu-id="1b7a7-160">Ejemplos de uso de vínculos de rol</span><span class="sxs-lookup"><span data-stu-id="1b7a7-160">Examples of Using Role Links</span></span>  
  
-   [<span data-ttu-id="1b7a7-161">PartyResolution (ejemplo de BizTalk Server)</span><span class="sxs-lookup"><span data-stu-id="1b7a7-161">PartyResolution (BizTalk Server Sample)</span></span>](../core/partyresolution-biztalk-server-sample.md)  
  
-   <span data-ttu-id="1b7a7-162">Descargue el ejemplo SDK "Using Role Links" de los ejemplos de código de BizTalk Server disponibles en [http://go.microsoft.com/fwlink/?LinkId=73703](http://go.microsoft.com/fwlink/?LinkId=73703).</span><span class="sxs-lookup"><span data-stu-id="1b7a7-162">Download the SDK sample "Using Role Links" from the BizTalk Server code samples available at [http://go.microsoft.com/fwlink/?LinkId=73703](http://go.microsoft.com/fwlink/?LinkId=73703).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1b7a7-163">Vea también</span><span class="sxs-lookup"><span data-stu-id="1b7a7-163">See Also</span></span>  
 <span data-ttu-id="1b7a7-164">[Usar vínculos de rol en orquestaciones](../core/using-role-links-in-orchestrations.md) </span><span class="sxs-lookup"><span data-stu-id="1b7a7-164">[Using Role Links in Orchestrations](../core/using-role-links-in-orchestrations.md) </span></span>  
 <span data-ttu-id="1b7a7-165">[Cómo usar la forma de vínculo de función](../core/how-to-use-the-role-link-shape.md) </span><span class="sxs-lookup"><span data-stu-id="1b7a7-165">[How to Use the Role Link Shape](../core/how-to-use-the-role-link-shape.md) </span></span>  
 [<span data-ttu-id="1b7a7-166">Cómo usar al Asistente para vínculo de función</span><span class="sxs-lookup"><span data-stu-id="1b7a7-166">How to Use the Role Link Wizard</span></span>](../core/how-to-use-the-role-link-wizard.md)
---
title: En las fases de procesamiento de orden de procesamiento | Documentos de Microsoft
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 698005da-1ba8-4972-83db-f5ae45fd6a83
caps.latest.revision: "3"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 1a8eae6b814af36d0ea07065726ca66518984703
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
---
# <a name="processing-in-the-order-processing-stages"></a><span data-ttu-id="d6e94-102">Procesar en las fases de procesamiento de pedidos</span><span class="sxs-lookup"><span data-stu-id="d6e94-102">Processing in the Order Processing Stages</span></span>
<span data-ttu-id="d6e94-103">La solución de administración de procesos empresariales incluye dos fases, la **CableOrder1** y **CableOrder2** orquestaciones, que llevan a cabo las acciones de procesamiento de pedidos.</span><span class="sxs-lookup"><span data-stu-id="d6e94-103">The Business Process Management solution includes two stages, the **CableOrder1** and **CableOrder2** orchestrations, that perform the order processing actions.</span></span> <span data-ttu-id="d6e94-104">Para obtener más información acerca de cómo se dividió el proceso de pedido en fases, vea [número de fases de procesamiento](../core/number-of-processing-stages.md).</span><span class="sxs-lookup"><span data-stu-id="d6e94-104">For more information about how the order process was divided into stages, see [Number of Processing Stages](../core/number-of-processing-stages.md).</span></span>  
  
 <span data-ttu-id="d6e94-105">Ambas fases de procesamiento comienzan cuando reciben un mensaje de pedido y responden con un mensaje de estado para la **OrderManager** orquestación una vez que se ha iniciado.</span><span class="sxs-lookup"><span data-stu-id="d6e94-105">Both processing stages begin when they receive an order message and both reply with a status message to the **OrderManager** orchestration once they have started.</span></span> <span data-ttu-id="d6e94-106">De forma similar, ambos devuelven un mensaje a la **OrderManager** para indicar si la fase completó o finalizó con un error.</span><span class="sxs-lookup"><span data-stu-id="d6e94-106">Similarly, both send a message back to the **OrderManager** to indicate whether the stage completed or terminated with an error.</span></span> <span data-ttu-id="d6e94-107">Para obtener más información acerca de la conexión entre el **OrderManager** orquestación y las fases de procesamiento, vea [enlace directo de socio inverso](../core/inverse-direct-partner-binding.md).</span><span class="sxs-lookup"><span data-stu-id="d6e94-107">For details about the connection between the **OrderManager** orchestration and the processing stages, see [Inverse Direct Partner Binding](../core/inverse-direct-partner-binding.md).</span></span>  
  
 <span data-ttu-id="d6e94-108">Las dos fases de procesamiento usan la autocorrelación, puertos dinámicos para devolver información de nuevo a la **OrderManger**.</span><span class="sxs-lookup"><span data-stu-id="d6e94-108">Both processing stages use self-correlating, dynamic ports to send information back to the **OrderManger**.</span></span> <span data-ttu-id="d6e94-109">Con puertos dinámicos, las orquestaciones copian la dirección del puerto del mensaje al puerto de envío.</span><span class="sxs-lookup"><span data-stu-id="d6e94-109">With dynamic ports, the orchestrations copy the port address from the message to send port.</span></span>  
  
 <span data-ttu-id="d6e94-110">Todos los mensajes de pedido las fases de procesamiento de recepción son los mensajes de pedido normalizado, canónica creados en el **OrderBroker**.</span><span class="sxs-lookup"><span data-stu-id="d6e94-110">All of the order messages the processing stages receive are the normalized, canonical order messages created in the **OrderBroker**.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="d6e94-111">Debido a la longitud de la **CableOrder1** y **CableOrder2** orquestaciones, puede que desee leer esta sección con las orquestaciones abiertas en Microsoft Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="d6e94-111">Because of the length of the **CableOrder1** and **CableOrder2** orchestrations, you may want to read this section with the orchestrations open in Microsoft Visual Studio.</span></span>  
  
## <a name="the-cableorder1-orchestration"></a><span data-ttu-id="d6e94-112">La orquestación CableOrder1</span><span class="sxs-lookup"><span data-stu-id="d6e94-112">The CableOrder1 Orchestration</span></span>  
 <span data-ttu-id="d6e94-113">El **CableOrder1** orquestación empieza cuando se recibe un mensaje de pedido.</span><span class="sxs-lookup"><span data-stu-id="d6e94-113">The **CableOrder1** orchestration starts when it receives an order message.</span></span> <span data-ttu-id="d6e94-114">Copia la dirección de respuesta del mensaje al puerto de finalización de la fase.</span><span class="sxs-lookup"><span data-stu-id="d6e94-114">It then copies the reply address from the message to the stage completion port.</span></span> <span data-ttu-id="d6e94-115">A continuación, genera un mensaje de confirmación y lo envía como respuesta a la **BeginStagePort** de puerto y, a continuación, guarda la información de enrutamiento en una variable local.</span><span class="sxs-lookup"><span data-stu-id="d6e94-115">Next, it constructs an acknowledgement message and sends it as a response to the **BeginStagePort** port, and then saves the routing information in a local variable.</span></span>  
  
 <span data-ttu-id="d6e94-116">A continuación, la orquestación obtiene la información de configuración de SSO.</span><span class="sxs-lookup"><span data-stu-id="d6e94-116">The orchestration next gets the configuration information from SSO.</span></span> <span data-ttu-id="d6e94-117">Para obtener más información acerca de cómo la solución usa SSO, vea [usar SSO de forma eficaz en la solución de administración de procesos empresariales](../core/using-sso-efficiently-in-the-business-process-management-solution.md).</span><span class="sxs-lookup"><span data-stu-id="d6e94-117">For more information about how the solution uses SSO, see [Using SSO Efficiently in the Business Process Management Solution](../core/using-sso-efficiently-in-the-business-process-management-solution.md).</span></span>  
  
 <span data-ttu-id="d6e94-118">La orquestación, a continuación, crea una instancia de la **OrderHandler** de objeto para comunicarse con los procesos de back-end, comprueba la validez del mensaje, analiza el mensaje, determina el tipo de servicio y qué acción se debe realizar.</span><span class="sxs-lookup"><span data-stu-id="d6e94-118">The orchestration then creates an instance of the **OrderHandler** object to communicate with the backend processes, checks the validity of the message, analyzes the message, determines the service type, and which action to take.</span></span> <span data-ttu-id="d6e94-119">Dependiendo de la acción que se va a realizar, llama a una de las orquestaciones de acción de pedido **activar**, **cambio**, o **cancelar** y pasa el **OrderHandler** objeto a la orquestación.</span><span class="sxs-lookup"><span data-stu-id="d6e94-119">Depending on the action to take, it calls one of the order action orchestrations **Activate**, **Change**, or **Cancel** and passes the **OrderHandler** object to the orchestration.</span></span>  
  
 <span data-ttu-id="d6e94-120">El **CableOrder1** orquestación, a continuación, vuelve una interrupción, envía un mensaje para el grupo de instalaciones y espera recibir.</span><span class="sxs-lookup"><span data-stu-id="d6e94-120">The **CableOrder1** orchestration then checks for an interrupt, sends a message to the facilities group and waits to hear back.</span></span> <span data-ttu-id="d6e94-121">Si la orquestación recibe un mensaje de respuesta del grupo de instalaciones, continúa el procesamiento.</span><span class="sxs-lookup"><span data-stu-id="d6e94-121">If the orchestration gets a message back from the facilities group, it continues processing.</span></span> <span data-ttu-id="d6e94-122">De lo contrario, si se produce una interrupción, la orquestación inicia una excepción de interrupción.</span><span class="sxs-lookup"><span data-stu-id="d6e94-122">Otherwise, if there is an interrupt, the orchestration throws an interrupt exception.</span></span>  
  
 <span data-ttu-id="d6e94-123">Finaliza la orquestación mediante la construcción de un mensaje de finalización y enviarlo a través de la **StageCompletion** puerto.</span><span class="sxs-lookup"><span data-stu-id="d6e94-123">The orchestration finishes by constructing a completion message and sending it through the **StageCompletion** port.</span></span>  
  
## <a name="the-cableorder2-orchestration"></a><span data-ttu-id="d6e94-124">La orquestación CableOrder2</span><span class="sxs-lookup"><span data-stu-id="d6e94-124">The CableOrder2 Orchestration</span></span>  
 <span data-ttu-id="d6e94-125">La orquestación CableOrder2 realiza los mismos pasos iniciales que la orquestación CableOrder1 para la información de enrutamiento, información de configuración de SSO y la creación de una instancia de la **OrderHandler** objeto.</span><span class="sxs-lookup"><span data-stu-id="d6e94-125">The CableOrder2 orchestration performs the same starting steps as the CableOrder1 orchestration for the routing information, SSO configuration information, and creating an instance of the **OrderHandler** object.</span></span>  
  
 <span data-ttu-id="d6e94-126">La orquestación, a continuación, busca una interrupción y pasa el **OrderHandler** objeto en una llamada a la **completar** orquestación.</span><span class="sxs-lookup"><span data-stu-id="d6e94-126">The orchestration then checks for an interrupt and passes the **OrderHandler** object in a call to the **Complete** orchestration.</span></span> <span data-ttu-id="d6e94-127">A continuación, la orquestación crea un mensaje de estado de pedido, actualiza el historial de pedidos y envía un mensaje de finalización a través de la **StageCompletion** puerto.</span><span class="sxs-lookup"><span data-stu-id="d6e94-127">Next, the orchestration creates an order status message, updates the order history, and sends a completion message through the **StageCompletion** port.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d6e94-128">Vea también</span><span class="sxs-lookup"><span data-stu-id="d6e94-128">See Also</span></span>  
 <span data-ttu-id="d6e94-129">[Control de versiones de la solución de administración de procesos empresariales](../core/versioning-the-business-process-management-solution.md) </span><span class="sxs-lookup"><span data-stu-id="d6e94-129">[Versioning the Business Process Management Solution](../core/versioning-the-business-process-management-solution.md) </span></span>  
 [<span data-ttu-id="d6e94-130">Procesamiento en la solución de administración de procesos empresariales</span><span class="sxs-lookup"><span data-stu-id="d6e94-130">Processing in the Business Process Management Solution</span></span>](../core/processing-in-the-business-process-management-solution.md)
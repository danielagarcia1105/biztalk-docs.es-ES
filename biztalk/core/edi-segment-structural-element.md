---
title: Elemento estructural de segmento EDI | Documentos de Microsoft
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 1f474a3d-004a-4981-b155-b0a5775918ba
caps.latest.revision: 6
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 5b05d7a793fe515b8d0254d63b9b96994ddb35d9
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
ms.locfileid: "22242220"
---
# <a name="edi-segment-structural-element"></a><span data-ttu-id="2633b-102">Elemento estructural de segmento EDI</span><span class="sxs-lookup"><span data-stu-id="2633b-102">EDI Segment Structural Element</span></span>
<span data-ttu-id="2633b-103">El segmento consta de uno o más elementos de datos y es una unidad intermedia de información en el mensaje.</span><span class="sxs-lookup"><span data-stu-id="2633b-103">The segment contains one or more data elements, and is an intermediate unit of information in the message.</span></span> <span data-ttu-id="2633b-104">Cada segmento comienza con un identificador de segmento de datos de tres caracteres y finaliza con un terminador de segmentos (de forma predeterminada el apostrofo (')).</span><span class="sxs-lookup"><span data-stu-id="2633b-104">Each segment starts with a three-character data segment identifier, and ends with a segment terminator (by default the apostrophe (')).</span></span> <span data-ttu-id="2633b-105">Los elementos de datos dentro del segmento se separan mediante separadores de elementos de datos.</span><span class="sxs-lookup"><span data-stu-id="2633b-105">The data elements within the segment are separated by data element separators.</span></span> <span data-ttu-id="2633b-106">El separador de elementos de datos es, de forma predeterminada, el signo más (+).</span><span class="sxs-lookup"><span data-stu-id="2633b-106">The data element separator is by default the plus sign (+).</span></span> <span data-ttu-id="2633b-107">Un segmento se clasifica como Obligatorio u Opcional.</span><span class="sxs-lookup"><span data-stu-id="2633b-107">A segment is classified as Mandatory or Optional.</span></span> <span data-ttu-id="2633b-108">Los separadores para intercambios salientes se pueden establecer en los acuerdos entre dos socios comerciales o como parte del acuerdo del socio comercial de reserva.</span><span class="sxs-lookup"><span data-stu-id="2633b-108">Separators for outgoing interchanges can be set in the agreements between two trading partners or as part of fallback trading partner agreement.</span></span>  
  
## <a name="nesting"></a><span data-ttu-id="2633b-109">Anidación</span><span class="sxs-lookup"><span data-stu-id="2633b-109">Nesting</span></span>  
 <span data-ttu-id="2633b-110">Segmentos pueden agruparse en una relación jerárquica denominada **anidamiento**.</span><span class="sxs-lookup"><span data-stu-id="2633b-110">Segments may be grouped in a hierarchical relationship called **nesting**.</span></span> <span data-ttu-id="2633b-111">Hay dos tipos distintos de anidamiento: explícitas e implícitas.</span><span class="sxs-lookup"><span data-stu-id="2633b-111">There are two distinct type of nesting: explicit and implicit.</span></span> <span data-ttu-id="2633b-112">Dentro de cualquier intercambio, sólo puede utilizarse un tipo de anidamiento.</span><span class="sxs-lookup"><span data-stu-id="2633b-112">Within any one interchange only one type of nesting can be used.</span></span>  
  
-   <span data-ttu-id="2633b-113">El anidamiento explícito utiliza una indicación explícita de que se anida el bucle.</span><span class="sxs-lookup"><span data-stu-id="2633b-113">Explicit nesting uses an explicit indication that the loop is nested.</span></span> <span data-ttu-id="2633b-114">Al utilizar el anidamiento explícito, el primer elemento de datos de componentes en la etiqueta de segmento será el código de segmento.</span><span class="sxs-lookup"><span data-stu-id="2633b-114">When explicit nesting is used, the first component data element in the segment tag will be the segment code.</span></span> <span data-ttu-id="2633b-115">Le seguirán los elementos de datos de componentes condicionales que indican los dos niveles y la incidencia de repetición del segmento.</span><span class="sxs-lookup"><span data-stu-id="2633b-115">It will be followed by conditional component data elements indicating both the level and the incidence of repetition of the segment.</span></span> <span data-ttu-id="2633b-116">El número de elementos de datos de componentes utilizado para este propósito depende del nivel jerárquico en el que aparece el segmento en la estructura de mensaje.</span><span class="sxs-lookup"><span data-stu-id="2633b-116">The number of component data elements used for this purpose depends upon the hierarchical level in which the segment appears in the message structure.</span></span> <span data-ttu-id="2633b-117">Si el segmento va a aparecer en el nivel uno, se utilizará el elemento de datos de componentes inmediatamente posterior al código de segmento.</span><span class="sxs-lookup"><span data-stu-id="2633b-117">If the segment is to appear at level one, the component data element immediately following the segment code will be used.</span></span> <span data-ttu-id="2633b-118">Si el segmento va a aparecer en el nivel dos, se utilizarán el elemento de datos de componentes inmediatamente posterior al código de segmento y el siguiente elemento de datos de componentes.</span><span class="sxs-lookup"><span data-stu-id="2633b-118">If the segment is to appear at level two, the component data element immediately following the segment code and the next component data element will both be used.</span></span> <span data-ttu-id="2633b-119">Si el segmento va a aparecer en el nivel tres, se utilizarán los tres elementos de datos de componentes inmediatamente posteriores al código de segmento.</span><span class="sxs-lookup"><span data-stu-id="2633b-119">If the segment is to appear at level three, the three component data elements following the segment code will be used.</span></span> <span data-ttu-id="2633b-120">Las canalizaciones no pueden realizar la comprobación de estructural de comparación de datos con la jerarquía.</span><span class="sxs-lookup"><span data-stu-id="2633b-120">Pipelines cannot perform structural verification comparing data to hierarchy.</span></span>  
  
-   <span data-ttu-id="2633b-121">En la anidación implícita, se sigue el orden de los segmentos especificado en la estructura de mensaje de forma estricta.</span><span class="sxs-lookup"><span data-stu-id="2633b-121">In Implicit nesting, the order of the segments specified in the message structure is strictly followed.</span></span> <span data-ttu-id="2633b-122">La relación de anidación entre los segmentos es evidente de forma implícita y no es necesaria ninguna otra indicación para el procesamiento.</span><span class="sxs-lookup"><span data-stu-id="2633b-122">The nesting relationship between the segments is implicitly evident and no further indication is required for processing.</span></span>  
  
## <a name="loops"></a><span data-ttu-id="2633b-123">Bucles</span><span class="sxs-lookup"><span data-stu-id="2633b-123">Loops</span></span>  
 <span data-ttu-id="2633b-124">Pueden repetir una o más segmentos como un **bucle** dentro de una transacción establecido.</span><span class="sxs-lookup"><span data-stu-id="2633b-124">One or more segment can repeat as a **loop** inside a transaction set.</span></span> <span data-ttu-id="2633b-125">Hay dos tipos distintos de bucles: enlazados y sin enlazar.</span><span class="sxs-lookup"><span data-stu-id="2633b-125">There are two distinct types of loops: unbounded and bounded.</span></span>  
  
### <a name="unbounded-loops"></a><span data-ttu-id="2633b-126">Bucles sin enlazar</span><span class="sxs-lookup"><span data-stu-id="2633b-126">Unbounded Loops</span></span>  
 <span data-ttu-id="2633b-127">Un bucle sin enlazar no tiene un único segmento de identificación para marcar el principio y el final del bucle.</span><span class="sxs-lookup"><span data-stu-id="2633b-127">An unbounded loop does not have a unique identifying segment to mark the beginning and end of the loop.</span></span> <span data-ttu-id="2633b-128">Se repite un bucle sin enlazar de acuerdo con un recuento.</span><span class="sxs-lookup"><span data-stu-id="2633b-128">An unbounded loop repeats according to a count.</span></span> <span data-ttu-id="2633b-129">Si el recuento no dispone de un valor, el bucle se repetirá dos veces.</span><span class="sxs-lookup"><span data-stu-id="2633b-129">If the count does not have a value, the loop will repeat twice.</span></span> <span data-ttu-id="2633b-130">Los segmentos en el bucle sólo pueden producirse una vez en un orden establecido.</span><span class="sxs-lookup"><span data-stu-id="2633b-130">Each segment in the loop can occur only once in a specified order.</span></span>  
  
 <span data-ttu-id="2633b-131">El inicio de un bucle sin enlazar se establece mediante un primer elemento de datos que es único.</span><span class="sxs-lookup"><span data-stu-id="2633b-131">The start of an unbounded loop is established by a first data element that is unique.</span></span> <span data-ttu-id="2633b-132">El primer elemento puede aparecer una vez y sólo una vez en cada repetición.</span><span class="sxs-lookup"><span data-stu-id="2633b-132">The first element can appear once and only once in each occurrence.</span></span> <span data-ttu-id="2633b-133">Los bucles sin enlazar pueden anidarse dentro de los bucles. Si es así, el bucle interno sin enlazar no puede iniciarse en la misma posición ordinal que el bucle externo ni iniciarse con el mismo Id. de segmento que el bucle externo.</span><span class="sxs-lookup"><span data-stu-id="2633b-133">Unbounded loops can be nested within loops; if so, the inner unbounded loop cannot start at the same ordinal position as any outer loop and cannot start with the same segment ID as any outer loop.</span></span> <span data-ttu-id="2633b-134">El bucle anidado no puede contener un segmento que sea también el segmento del principio de cada bucle exterior en la misma estructura de anidación.</span><span class="sxs-lookup"><span data-stu-id="2633b-134">The nested loop cannot contain a segment that is also the beginning segment of any outer loop in the same nesting structure.</span></span>  
  
### <a name="bounded-loops"></a><span data-ttu-id="2633b-135">Bucles enlazados</span><span class="sxs-lookup"><span data-stu-id="2633b-135">Bounded Loops</span></span>  
 <span data-ttu-id="2633b-136">Un bucle enlazado comienza con el segmento LS predefinido (Inicio de bucle) y finaliza con un segmento LE predefinido (Fin de bucle).</span><span class="sxs-lookup"><span data-stu-id="2633b-136">A bounded loop starts with the predefined segment LS (Loop Start) and ends with the predefined segment LE (Loop End).</span></span> <span data-ttu-id="2633b-137">La opcionalidad del segmento LS debe coincidir con la del primer segmento en el bucle.</span><span class="sxs-lookup"><span data-stu-id="2633b-137">The optionality of the LS segment must match that of the first segment in the loop.</span></span> <span data-ttu-id="2633b-138">Un bucle enlazado puede contener otro bucle enlazado.</span><span class="sxs-lookup"><span data-stu-id="2633b-138">A bounded loop can contain another bounded loop.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="2633b-139">Un bucle enlazado en X12 y un bucle explícito en EDIFACT son equivalentes.</span><span class="sxs-lookup"><span data-stu-id="2633b-139">A bounded loop in X12 and an explicit loop in EDIFACT are equivalent.</span></span>  
  
 <span data-ttu-id="2633b-140">Se utiliza el enlace en un bucle con el fin de resolver la ambigüedad.</span><span class="sxs-lookup"><span data-stu-id="2633b-140">Binding is used in a loop to resolve ambiguity.</span></span> <span data-ttu-id="2633b-141">El designador de requisitos en los segmentos LS/LE coincide con el designador de requisitos del primer segmento del bucle.</span><span class="sxs-lookup"><span data-stu-id="2633b-141">The requirement designator on the LS/LE segments matches the requirement designator of the first segment of the loop.</span></span> <span data-ttu-id="2633b-142">Los enlaces reducen las restricciones estructurales impuestas acerca del uso de ciertos segmentos de repetición habituales.</span><span class="sxs-lookup"><span data-stu-id="2633b-142">Binding loosens structural restrictions imposed on the usage of certain commonly repeating segments.</span></span> <span data-ttu-id="2633b-143">Los segmentos enlazados no tienen restricciones con respecto al comienzo del Id. de segmento.</span><span class="sxs-lookup"><span data-stu-id="2633b-143">Bounded segments have no restrictions with respect to the beginning segment ID.</span></span> <span data-ttu-id="2633b-144">Esto activa el mismo segmento para iniciar el bucle enlazado y puede utilizarse fuera del bucle, como en el ejemplo siguiente:</span><span class="sxs-lookup"><span data-stu-id="2633b-144">This enables the same segment to start a bounded loop and be used outside of the loop, as in the following example:</span></span>  
  
```  
AA  
LS  
BB  
CC  
LE  
BB  
```  
  
 <span data-ttu-id="2633b-145">Se permiten bucles subordinados (bucles dentro de bucles).</span><span class="sxs-lookup"><span data-stu-id="2633b-145">Subordinate loops (loops within loops) are allowed.</span></span> <span data-ttu-id="2633b-146">Si los bucles subordinados se anidan dentro de bucles, el bucle interior no puede iniciarse en la misma posición ordinal que el bucle exterior.</span><span class="sxs-lookup"><span data-stu-id="2633b-146">If bounded loops are nested within loops, the inner loop cannot start at the same ordinal position as any outer loop.</span></span> <span data-ttu-id="2633b-147">El bucle enlazado interior debe finalizar antes del bucle exterior inmediato.</span><span class="sxs-lookup"><span data-stu-id="2633b-147">The inner bounded loop must end before the immediate outer loop.</span></span>  
  
 <span data-ttu-id="2633b-148">Cada bucle enlazado dentro de un conjunto de transacciones debe tener un valor <loop_id> único definido de una a cuatro letras mayúsculas o dígitos numéricos.</span><span class="sxs-lookup"><span data-stu-id="2633b-148">Each bounded loop within a transaction set must have a uniquely defined <loop_id> value of one to four uppercase letters or numeric digits.</span></span> <span data-ttu-id="2633b-149">Se recomienda que los segmentos LS y LE correspondientes contengan el mismo valor único <loop_id>.</span><span class="sxs-lookup"><span data-stu-id="2633b-149">It is recommended that the corresponding LS and LE segments contain the same unique <loop_id> value.</span></span> <span data-ttu-id="2633b-150">El elemento de datos < loop_id > se procesará como un elemento de datos "normal" y se validan para el tipo de datos, longitud mín./máx., opcionalidad, etcetera. Validación de segmento cruzado (en LS y LE) no se llevará a cabo. BizTalk Server comprobará la resolución de ambigüedad sólo a través de la presencia del segmento LS y LE.</span><span class="sxs-lookup"><span data-stu-id="2633b-150">The <loop_id> data element will be processed as a “regular” data element and validated for data type, min/max length, optionality, etc. Cross-segment validation (across LS and LE) will not be carried out. BizTalk Server will verify ambiguity resolution via the presence of the LS and LE segment and nothing else.</span></span> <span data-ttu-id="2633b-151">En el caso de que se produzca una infracción de la regla de elemento de datos, el conjunto de transacciones se acepta con errores y BizTalk Server devuelve AK501=E y la valoración adecuada en AK2/AK3 en la confirmación.</span><span class="sxs-lookup"><span data-stu-id="2633b-151">In the case of data-element rule violation, the transaction set is accepted with errors, and BizTalk Server returns AK501=E and the appropriate valuation in AK2/AK3 in the ACK.</span></span>  
  
 <span data-ttu-id="2633b-152">También es necesario que se apliquen un par de segmentos LS/LE.</span><span class="sxs-lookup"><span data-stu-id="2633b-152">It is also required that pairing of LS/LE segments is enforced.</span></span> <span data-ttu-id="2633b-153">En el caso de que se produzca una falta de coincidencia, se denegará el conjunto de transacciones debido a un problema relacionado con la resolución de ambigüedad y AK501 = E y AK502 = 5 se devuelven en el Visor de eventos y la confirmación 997.</span><span class="sxs-lookup"><span data-stu-id="2633b-153">In case of a mismatch, the transaction set is rejected due to an inherent ambiguity resolution issue, and AK501 = E and AK502 = 5 are returned in the Event Viewer and the 997 ACK.</span></span> <span data-ttu-id="2633b-154">Si faltan los segmentos LS/LE pero el conjunto de transacciones no es ambiguo, éste se aceptará con errores y se devolverá AK501=E y AK502 = 5.</span><span class="sxs-lookup"><span data-stu-id="2633b-154">When  either or both LS/LE segments are missing, but the transaction set is not ambiguous, the transaction set will be accepted with errors, and AK501=E and AK502 = 5 returned.</span></span>  
  
 <span data-ttu-id="2633b-155">Un par LS/LE puede ser opcional u obligatorio.</span><span class="sxs-lookup"><span data-stu-id="2633b-155">An LS/LE pair can be optional or mandatory.</span></span> <span data-ttu-id="2633b-156">Sin embargo, a menos que el par se incluya en un bucle primario que sea repetible, éste nunca podrá ser de este tipo.</span><span class="sxs-lookup"><span data-stu-id="2633b-156">However, unless the pair is contained in a parent loop that is repeatable, the pair can never be repeatable.</span></span> <span data-ttu-id="2633b-157">En cualquier caso, tanto MaxOccurs para un par LS/LE puede ser 1, pero no inferior a 1. Esto es obligatorio en la validación de esquemas.</span><span class="sxs-lookup"><span data-stu-id="2633b-157">In either case, both MaxOccurs for an LS/LE pair can be 1, but not greater than 1.This is enforced in schema validation.</span></span>  
  
 <span data-ttu-id="2633b-158">El desensamblador EDI y el ensamblador EDI controlan los segmentos LS y LE.</span><span class="sxs-lookup"><span data-stu-id="2633b-158">The EDI Disassembler and EDI Assembler handle LS and LE segments.</span></span> <span data-ttu-id="2633b-159">Durante el análisis, el desensamblador crea nodos XML para los segmentos LS y LE, y valida los segmentos.</span><span class="sxs-lookup"><span data-stu-id="2633b-159">During parsing, the Disassembler created XML nodes for the LS and LE segments, and validates the segments.</span></span> <span data-ttu-id="2633b-160">Durante el proceso de serialización, el ensamblador crea los segmentos LS y LE a partir de nodos XML y los valida.</span><span class="sxs-lookup"><span data-stu-id="2633b-160">During serializing, the Assembler creates the LS and LE segments from XML nodes, and validates them.</span></span> <span data-ttu-id="2633b-161">Si un LS esperado o segmento LE es que falta, el conjunto de transacciones es rechaza o suspende con un AK501 = E y AK502 = 5.</span><span class="sxs-lookup"><span data-stu-id="2633b-161">If an expected LS or LE segment is missing, the transaction set is suspended/rejected with an AK501 = E and AK502 = 5.</span></span> <span data-ttu-id="2633b-162">Si los segmentos LS/LE están presentes sin el correspondiente elemento de datos y la validación EDI está habilitada, el conjunto de transacciones se acepta con errores y AK501 = E y AK502 = 5 se muestran en el Visor de eventos y 997 confirmación.</span><span class="sxs-lookup"><span data-stu-id="2633b-162">If LS/LE segments are present without corresponding data element, and EDI validation is enabled, the transaction set is accepted with errors and AK501 = E and AK502 = 5 are reported in the Event Viewer and the 997 ACK.</span></span>
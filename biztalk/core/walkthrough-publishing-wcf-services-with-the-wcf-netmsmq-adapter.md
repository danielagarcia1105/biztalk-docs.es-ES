---
title: 'Tutorial: Publicar servicios WCF con el adaptador WCF-NetMsmq | Documentos de Microsoft'
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: e623b6dc-32e5-467c-bb7d-68b7a75723c1
caps.latest.revision: "46"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: e7c80859e83d915d835aa99b0456ca763ed267f4
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
---
# <a name="walkthrough-publishing-wcf-services-with-the-wcf-netmsmq-adapter"></a><span data-ttu-id="be970-102">Tutorial: Publicar servicios WCF con el adaptador WCF-NetMsmq</span><span class="sxs-lookup"><span data-stu-id="be970-102">Walkthrough: Publishing WCF Services with the WCF-NetMsmq Adapter</span></span>
  
> [!NOTE]
>  <span data-ttu-id="be970-103">Para obtener más información acerca de los adaptadores, vea [adaptadores de BizTalk Server](../core/adapters-in-biztalk-server.md).</span><span class="sxs-lookup"><span data-stu-id="be970-103">For more information about adapters, see [Adapters in BizTalk Server](../core/adapters-in-biztalk-server.md).</span></span>  
  
## <a name="introduction"></a><span data-ttu-id="be970-104">Introducción</span><span class="sxs-lookup"><span data-stu-id="be970-104">Introduction</span></span>
  
 <span data-ttu-id="be970-105">En [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)], se puede publicar una orquestación como un Servicio [!INCLUDE[firstref_btsWinCommFoundation](../includes/firstref-btswincommfoundation-md.md)].</span><span class="sxs-lookup"><span data-stu-id="be970-105">In [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)], an orchestration can be published as a [!INCLUDE[firstref_btsWinCommFoundation](../includes/firstref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="be970-106">A través de una ubicación de recepción de BizTalk, una orquestación puede exponer un extremo de [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)], lo que permite que un cliente [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] lo llame</span><span class="sxs-lookup"><span data-stu-id="be970-106">Through a BizTalk receive location, an orchestration can expose a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] endpoint, which allows it to be called by a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] client.</span></span> <span data-ttu-id="be970-107">El **Asistente de publicación de servicio de WCF de BizTalk** proporciona una manera sencilla para exponer una orquestación como ubicación de recepción.</span><span class="sxs-lookup"><span data-stu-id="be970-107">The **BizTalk WCF Service Publishing Wizard** provides a simple way to expose an orchestration as a receive location.</span></span>  
  
 <span data-ttu-id="be970-108">El adaptador de WCF-NetMsmq utiliza el **NetMsmqBinding** enlace para proporcionar soporte técnico para el uso de Microsoft Message Queuing (también conocido como MSMQ) como su transporte subyacente.</span><span class="sxs-lookup"><span data-stu-id="be970-108">The WCF-NetMsmq adapter uses the **NetMsmqBinding** binding to provide support for using Microsoft Message Queuing (also known as MSMQ) as its underlying transport.</span></span> <span data-ttu-id="be970-109">El cliente de un Servicio [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] envía mensajes [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] a una cola MSMQ mediante la ubicación de recepción configurada para usar el adaptador de WCF-NetMSMQ.</span><span class="sxs-lookup"><span data-stu-id="be970-109">The client of a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service sends [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] messages to an MSMQ queue by using the receive location configured to use the WCF-NetMSMQ adapter.</span></span> <span data-ttu-id="be970-110">El adaptador toma los mensajes de [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] de la cola MSMQ, los convierte a formato [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] y los escribe en la base de datos de cuadro de mensajes de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="be970-110">The adapter picks up the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] messages from the MSMQ queue, converts them into [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] format, and writes them to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] MessageBox database.</span></span>  
  
 <span data-ttu-id="be970-111">En este tutorial se muestra cómo una aplicación de consola cliente de [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] usa el adaptador de WCF-NetMsmq para comunicarse con un Servicio [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)], hospedado en una aplicación de la consola .NET, mediante una cola de mensajes MSMQ.</span><span class="sxs-lookup"><span data-stu-id="be970-111">This walkthrough shows how a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] client console application uses the WCF-NetMsmq adapter to communicate with a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service, hosted in a .NET console application, through an MSMQ message queue.</span></span> <span data-ttu-id="be970-112">Muestra cómo se publican los metadatos para una ubicación de recepción con el Asistente para publicación de Servicio WCF de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="be970-112">It demonstrates how to publish metadata for a receive location with the BizTalk WCF Service Publishing Wizard.</span></span> <span data-ttu-id="be970-113">También se muestra cómo se configura una aplicación Web para admitir la publicación de metadatos.</span><span class="sxs-lookup"><span data-stu-id="be970-113">It also shows how to configure a Web application to support publishing metadata.</span></span>  
  
 <span data-ttu-id="be970-114">Cuando concluya el tutorial, comprenderá cómo se realizan las tareas siguientes:</span><span class="sxs-lookup"><span data-stu-id="be970-114">After completing this walkthrough, you will understand how to perform the following tasks:</span></span>  
  
-   <span data-ttu-id="be970-115">Desde [!INCLUDE[vs2010](../includes/vs2010-md.md)], use la **implementar** comando para implementar ensamblados de BizTalk a una instancia local de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="be970-115">From within [!INCLUDE[vs2010](../includes/vs2010-md.md)], use the **Deploy** command to deploy BizTalk assemblies to a local instance of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="be970-116">De este modo, se creará una aplicación de BizTalk que se rellenará con los ensamblados.</span><span class="sxs-lookup"><span data-stu-id="be970-116">This creates a BizTalk application that is populated with the assemblies.</span></span> <span data-ttu-id="be970-117">Un ensamblado de BizTalk contiene información de recursos, como orquestaciones, canalizaciones, esquemas y asignaciones que se utilizarán en una solución de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="be970-117">A BizTalk assembly contains resource information such as orchestrations, pipelines, schemas, and maps to be used in a BizTalk solution.</span></span>  
  
-   <span data-ttu-id="be970-118">En la consola de administración de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], configure una ubicación de recepción de WCF-NetMsmq para hospedar el Servicio [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] publicado.</span><span class="sxs-lookup"><span data-stu-id="be970-118">From the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, configure a WCF-NetMsmq receive location to host the published [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  
  
-   <span data-ttu-id="be970-119">Desde el **Asistente de publicación de servicio de WCF de BizTalk**, cree la aplicación Web para publicar los metadatos para una ubicación de recepción.</span><span class="sxs-lookup"><span data-stu-id="be970-119">From the **BizTalk WCF Service Publishing Wizard**, create the Web application to publish metadata for an existing receive location.</span></span> <span data-ttu-id="be970-120">El cliente que envía mensajes a la ubicación de recepción usa estos metadatos.</span><span class="sxs-lookup"><span data-stu-id="be970-120">This metadata is used by the client that submits messages to the receive location.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="be970-121">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="be970-121">Prerequisites</span></span>  
 <span data-ttu-id="be970-122">Para llevar a cabo los pasos descritos en este ejemplo, asegúrese de que el entorno instala los siguientes requisitos previos:</span><span class="sxs-lookup"><span data-stu-id="be970-122">To perform the steps in this sample ensure that your environment installs the following prerequisites:</span></span>  
  
-   <span data-ttu-id="be970-123">El equipo que genera los ensamblados y ejecuta el proceso de implementación tanto el equipo que ejecuta el ejemplo requieren Microsoft [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)], Microsoft [!INCLUDE[netfx40_short](../includes/netfx40-short-md.md)]y Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)].</span><span class="sxs-lookup"><span data-stu-id="be970-123">Both the computer that builds the assemblies and runs the deployment process, and the computer that runs the sample, require Microsoft [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)], Microsoft [!INCLUDE[netfx40_short](../includes/netfx40-short-md.md)], and Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)].</span></span>  
  
-   <span data-ttu-id="be970-124">El equipo que se usa para generar los ensamblados y ejecutar el proceso de implementación requiere Microsoft [!INCLUDE[vs2010](../includes/vs2010-md.md)].</span><span class="sxs-lookup"><span data-stu-id="be970-124">The computer used to build the assemblies and run the deployment process requires Microsoft [!INCLUDE[vs2010](../includes/vs2010-md.md)].</span></span>  
  
-   <span data-ttu-id="be970-125">El equipo que ejecuta el ejemplo requiere los adaptadores de [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] y las herramientas de administración de [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)].</span><span class="sxs-lookup"><span data-stu-id="be970-125">The computer that runs the sample requires the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Adapters and the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Administration Tools.</span></span> <span data-ttu-id="be970-126">Se trata de opciones de instalación durante la instalación de Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)].</span><span class="sxs-lookup"><span data-stu-id="be970-126">These are options to install during setup of Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)].</span></span>  
  
-   <span data-ttu-id="be970-127">En los equipos que use para realizar las tareas administrativas, debe ejecutar una cuenta de usuario que sea miembro del grupo de administradores de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] para configurar los parámetros de aplicación de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] en la consola de administración de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="be970-127">On the computers that you use to perform administrative tasks, you must run as a user account that is a member of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators group to configure the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application settings within the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="be970-128">Esta cuenta de usuario también debe ser miembro del grupo de administradores local para la implementación de la aplicación, la administración de las instancias de host y otras tareas que puedan ser necesarias.</span><span class="sxs-lookup"><span data-stu-id="be970-128">This user account must also be a member of the local Administrators group for application deployment, managing host instances, and other tasks that may be required.</span></span>  
  
-   <span data-ttu-id="be970-129">En cualquier equipo que requiera [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] capacidad, complete el procedimiento de instalación única para la [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] ejemplos en [http://go.microsoft.com/fwlink/?LinkId=135510](http://go.microsoft.com/fwlink/?LinkId=135510).</span><span class="sxs-lookup"><span data-stu-id="be970-129">On any computer that requires [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] capability, complete the one-time setup procedure for the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] samples at [http://go.microsoft.com/fwlink/?LinkId=135510](http://go.microsoft.com/fwlink/?LinkId=135510).</span></span>  
  
-   <span data-ttu-id="be970-130">En el equipo que ejecuta el ejemplo e importa un enlace o un archivo .msi en [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], asegúrese de que el host no es un host de confianza. De lo contrario, se producirá un error en la importación.</span><span class="sxs-lookup"><span data-stu-id="be970-130">On the computer that runs the sample and imports a binding or an .msi file into [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], ensure the host is not a trusted host or the import will fail.</span></span>  
  
-   <span data-ttu-id="be970-131">Debe descargar el código del tutorial y extraerlo en el equipo.</span><span class="sxs-lookup"><span data-stu-id="be970-131">You must download the walkthrough code and extract it to your computer.</span></span> <span data-ttu-id="be970-132">Este tutorial es una parte de todo el [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] paquete de tutoriales del adaptador.</span><span class="sxs-lookup"><span data-stu-id="be970-132">This walkthrough is a part of the entire [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Adapter Walkthrough package.</span></span> <span data-ttu-id="be970-133">Puede descargar el archivo **WCFAdapterWalkthroughs.exe** desde el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Developer Center en [http://go.microsoft.com/fwlink/?LinkId=194140](http://go.microsoft.com/fwlink/?LinkId=194140).</span><span class="sxs-lookup"><span data-stu-id="be970-133">You can download the file **WCFAdapterWalkthroughs.exe** from the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Developer Center at [http://go.microsoft.com/fwlink/?LinkId=194140](http://go.microsoft.com/fwlink/?LinkId=194140).</span></span>  
  
## <a name="build-and-deploy-the-biztalk-solution-biztalkapp"></a><span data-ttu-id="be970-134">Compilar e implementar la solución de BizTalk, BizTalkApp</span><span class="sxs-lookup"><span data-stu-id="be970-134">Build and deploy the BizTalk solution, BizTalkApp</span></span>  
  
1.  <span data-ttu-id="be970-135">Extraiga WCFNetMsmqAdapterPublishing.exe en **C:\WCFNetMsmqAdapterPublishing**.</span><span class="sxs-lookup"><span data-stu-id="be970-135">Extract WCFNetMsmqAdapterPublishing.exe to **C:\WCFNetMsmqAdapterPublishing**.</span></span>  
  
2.  <span data-ttu-id="be970-136">En [!INCLUDE[vs2010](../includes/vs2010-md.md)], abra el **WCFNetMsmqAdapterPublishing.sln** archivo.</span><span class="sxs-lookup"><span data-stu-id="be970-136">In [!INCLUDE[vs2010](../includes/vs2010-md.md)], open the **WCFNetMsmqAdapterPublishing.sln** file.</span></span>  
  
3.  <span data-ttu-id="be970-137">En el Explorador de soluciones, expanda **BizTalkApp**y, a continuación, abra **OrderProcess.odx** para revisar.</span><span class="sxs-lookup"><span data-stu-id="be970-137">In Solution Explorer, expand **BizTalkApp**, and then open **OrderProcess.odx** to review.</span></span> <span data-ttu-id="be970-138">La orquestación de ejemplo recibe mensajes de solicitud de pedido y devuelve simplemente el orden de mensajes de respuesta.</span><span class="sxs-lookup"><span data-stu-id="be970-138">The sample orchestration receives order request messages, and simply returns the order response messages.</span></span>  
  
4.  <span data-ttu-id="be970-139">Dado que la **BizTalkApp** ensamblado debe instalarse en la GAC, necesitará un archivo de clave de nombre seguro para completar el proceso de implementación.</span><span class="sxs-lookup"><span data-stu-id="be970-139">Because the **BizTalkApp** assembly must be installed in the GAC, it will need a strong name key file to complete the deployment process.</span></span> <span data-ttu-id="be970-140">Haga clic en el **BizTalkApp** del proyecto y, a continuación, haga clic en **propiedades**.</span><span class="sxs-lookup"><span data-stu-id="be970-140">Right-click the **BizTalkApp** project, and then click **Properties**.</span></span> <span data-ttu-id="be970-141">En el **propiedades** página, haga clic en **firma**y seleccione **firmar el ensamblado**.</span><span class="sxs-lookup"><span data-stu-id="be970-141">On the **Properties** page, click **Signing**, and select **Sign the assembly**.</span></span> <span data-ttu-id="be970-142">Haga clic en la flecha hacia abajo en la **elegir un archivo de clave de nombre seguro** la lista desplegable, haga clic en  **\<nuevo >** y escriba `keyfile.snk` en el **nombre de archivo de clave** cuadro de texto.</span><span class="sxs-lookup"><span data-stu-id="be970-142">Click the down arrow in the **Choose a strong name key file** drop-down list, click **\<New>** and enter `keyfile.snk` in the **key file name** textbox.</span></span> <span data-ttu-id="be970-143">Desactive la opción **proteger mi archivo de clave con una contraseña**y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="be970-143">Uncheck **Protect my key file with a password**, and then click **OK**.</span></span>  
  
5.  <span data-ttu-id="be970-144">Haga clic en el **implementación** ficha y, a continuación, cambie la **Server** propiedad si usa un servidor de base de datos diferente para la base de datos de administración de BizTalk además **LOCALHOST**.</span><span class="sxs-lookup"><span data-stu-id="be970-144">Click the **Deployment** tab, and then change the **Server** property if you use a different database server for the BizTalk Management database besides **LOCALHOST**.</span></span>  <span data-ttu-id="be970-145">Asegúrese de **aplicación de BizTalk** valor se establece en **WCFNetMsmqAdapterPublishing**.</span><span class="sxs-lookup"><span data-stu-id="be970-145">Ensure **BizTalk Application** value is set to **WCFNetMsmqAdapterPublishing**.</span></span> <span data-ttu-id="be970-146">Asegúrese de **instalar en la caché Global de ensamblados** está establecido en **True**.</span><span class="sxs-lookup"><span data-stu-id="be970-146">Ensure **Install to Global Assembly Cache** is set to **True**.</span></span>  
  
6.  <span data-ttu-id="be970-147">En el Explorador de soluciones, haga clic en el **BizTalkApp** del proyecto y, a continuación, haga clic en **volver a generar**.</span><span class="sxs-lookup"><span data-stu-id="be970-147">In Solution Explorer, right-click the **BizTalkApp**  project and then click **Rebuild**.</span></span>  
  
7.  <span data-ttu-id="be970-148">En el Explorador de soluciones, haga clic en **BizTalkApp**y, a continuación, haga clic en **implementar**.</span><span class="sxs-lookup"><span data-stu-id="be970-148">In Solution Explorer, right-click **BizTalkApp**, and then click **Deploy**.</span></span>  
  
## <a name="configure-the-application"></a><span data-ttu-id="be970-149">Configurar la aplicación</span><span class="sxs-lookup"><span data-stu-id="be970-149">Configure the application</span></span>  
  
1.  <span data-ttu-id="be970-150">Asegúrese de que el componente Message Queue Server (MSMQ) esté instalado en el equipo. Para ello:</span><span class="sxs-lookup"><span data-stu-id="be970-150">Make sure that the Microsoft Message Queuing (MSMQ) component is installed on your computer as follows:</span></span>  
  
    1.  <span data-ttu-id="be970-151">Haga clic en **iniciar**, haga clic en **equipo**y, a continuación, haga clic en **administrar** para abrir **el administrador del servidor**.</span><span class="sxs-lookup"><span data-stu-id="be970-151">Click **Start**, right-click **Computer**, and then click **Manage** to open **Server Manager**.</span></span>  
  
    2.  <span data-ttu-id="be970-152">Expanda el **características** nodo.</span><span class="sxs-lookup"><span data-stu-id="be970-152">Expand the **Features** node.</span></span>  <span data-ttu-id="be970-153">Si **Message Queue Server** no es está instalado, haga clic en **características**y seleccione **agregar características**.</span><span class="sxs-lookup"><span data-stu-id="be970-153">If **Message Queuing** is not installed, right-click **Features**, and select **Add Features**.</span></span> <span data-ttu-id="be970-154">Comprobar **Message Queue Server**, haga clic en **siguiente**y, a continuación, haga clic en **instalar** para instalar MSMQ en el sistema.</span><span class="sxs-lookup"><span data-stu-id="be970-154">Check **Message Queuing**, click **Next**, and then click **Install** to install MSMQ on that system.</span></span>  
  
2.  <span data-ttu-id="be970-155">Asegúrese de que Message Queue Server (MSMQ) se haya iniciado en el equipo para que el adaptador de WCF-NetMsmq pueda usarlo. Para ello:</span><span class="sxs-lookup"><span data-stu-id="be970-155">Make sure that the MSMQ message queuing service is started on your computer to be used by the WCF-NetMsmq adapter as follows:</span></span>  
  
    1.  <span data-ttu-id="be970-156">Haga clic en **iniciar**, seleccione **herramientas administrativas**y, a continuación, haga clic en **Services**.</span><span class="sxs-lookup"><span data-stu-id="be970-156">Click **Start**, point to **Administrative Tools**, and then click **Services**.</span></span>  
  
    2.  <span data-ttu-id="be970-157">En **servicios**, asegúrese de que el **estado** de la **Message Queue Server** servicio es **iniciado**.</span><span class="sxs-lookup"><span data-stu-id="be970-157">In **Services**, make sure that the **Status** of the **Message Queuing** service is **Started**.</span></span> <span data-ttu-id="be970-158">Si no se ha iniciado el servicio, haga clic en **Message Queue Server**y, a continuación, haga clic en **iniciar**.</span><span class="sxs-lookup"><span data-stu-id="be970-158">If the service is not started, right-click **Message Queuing**, and then click **Start**.</span></span>  
  
3.  <span data-ttu-id="be970-159">Cree la cola de destino que la ubicación de recepción usa, en la que el adaptador de WCF-NetMsmq toma los mensajes entrantes de [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] de los clientes.</span><span class="sxs-lookup"><span data-stu-id="be970-159">Create the target queue that the receive location uses from which the WCF-NetMsmq adapter picks up incoming [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] messages from the clients.</span></span>  
  
    1.  <span data-ttu-id="be970-160">Haga clic en **iniciar**, seleccione **herramientas administrativas**y, a continuación, haga clic en **administración de equipos**.</span><span class="sxs-lookup"><span data-stu-id="be970-160">Click **Start**, point to **Administrative Tools**, and then click **Computer Management**.</span></span>  
  
    2.  <span data-ttu-id="be970-161">En **administración de equipos**, expanda **servicios y aplicaciones**, expanda **Message Queue Server**, haga clic en **colas privadas**, seleccione **New**y, a continuación, haga clic en **cola privada**.</span><span class="sxs-lookup"><span data-stu-id="be970-161">In **Computer Management**, expand **Services and Applications**, expand **Message Queuing**, right-click **Private Queues**, point to **New**, and then click **Private Queue**.</span></span>  
  
    3.  <span data-ttu-id="be970-162">En el **cola privada nueva** cuadro de diálogo, escriba `WCFNetMsmqAdapterPublishing` en el **nombre de la cola** cuadro de texto, seleccione la **transaccional** casilla de verificación y, a continuación, haga clic en **Aceptar** .</span><span class="sxs-lookup"><span data-stu-id="be970-162">In the **New Private Queue** dialog box, type `WCFNetMsmqAdapterPublishing` in the **Queue name** text box, select the **Transactional** check box, and then click **OK**.</span></span>  
  
4.  <span data-ttu-id="be970-163">Cree una ubicación de recepción WCF-NetMsmq para la aplicación de ejemplo. Para ello:</span><span class="sxs-lookup"><span data-stu-id="be970-163">Create a WCF-NetMsmq receive location for the sample application as follows:</span></span>  
  
    1.  <span data-ttu-id="be970-164">Haga clic en **iniciar**, seleccione **todos los programas**, seleccione [!INCLUDE[btsBizTalkServerStartMenuItemui](../includes/btsbiztalkserverstartmenuitemui-md.md)]y, a continuación, haga clic en **administración de BizTalk Server**.</span><span class="sxs-lookup"><span data-stu-id="be970-164">Click **Start**, point to **All Programs**, point to [!INCLUDE[btsBizTalkServerStartMenuItemui](../includes/btsbiztalkserverstartmenuitemui-md.md)], and then click **BizTalk Server Administration**.</span></span>  
  
    2.  <span data-ttu-id="be970-165">En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] administración de la consola, expanda **grupo de BizTalk**, expanda **aplicaciones**, expanda **WCFNetMsmqAdapterPublishing**, haga clic en **Puertos de recepción**, seleccione **New**y, a continuación, haga clic en **puerto de recepción unidireccional.**</span><span class="sxs-lookup"><span data-stu-id="be970-165">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **BizTalk Group**, expand **Applications**, expand **WCFNetMsmqAdapterPublishing**, right-click **Receive Ports**, point to **New**, and then click **One-way Receive Port.**</span></span>  
  
    3.  <span data-ttu-id="be970-166">En el **propiedades de puerto de recepción** cuadro de diálogo, en la **nombre** cuadro de texto, escriba `WCFNetMsmqAdapterPublishing.ReceivePurchaseOrder`y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="be970-166">In the **Receive Port Properties** dialog box, in the **Name** text box, type `WCFNetMsmqAdapterPublishing.ReceivePurchaseOrder`, and then click **OK**.</span></span>  
  
    4.  <span data-ttu-id="be970-167">En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] consola de administración, haga clic en **WCFNetMsmqAdapterPublishing.ReceivePurchaseOrder**, seleccione **New**y, a continuación, haga clic en **ubicación de recepción**.</span><span class="sxs-lookup"><span data-stu-id="be970-167">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, right-click **WCFNetMsmqAdapterPublishing.ReceivePurchaseOrder**, point to **New**, and then click **Receive Location**.</span></span>  
  
    5.  <span data-ttu-id="be970-168">En el **propiedades de la ubicación de recepción** cuadro de diálogo, en la **nombre** cuadro de texto, escriba `WCFNetMsmqAdapterPublishing.ReceivePurchaseOrder.NetMsmq`.</span><span class="sxs-lookup"><span data-stu-id="be970-168">In the **Receive Location Properties** dialog box, in the **Name** text box, type `WCFNetMsmqAdapterPublishing.ReceivePurchaseOrder.NetMsmq`.</span></span>  
  
    6.  <span data-ttu-id="be970-169">En el **propiedades de la ubicación de recepción** cuadro de diálogo la **transporte** junto a la sección **tipo**, seleccione **WCF-NetMsmq** desde el lista desplegable y, a continuación, haga clic en **configurar**.</span><span class="sxs-lookup"><span data-stu-id="be970-169">In the **Receive Location Properties** dialog box, in the **Transport** section next to **Type**, select **WCF-NetMsmq** from the drop-down list, and then click **Configure**.</span></span>  
  
    7.  <span data-ttu-id="be970-170">En el **propiedades de transporte de WCF-NetMsmq** cuadro de diálogo, en la **General** ficha la **dirección (URI)** cuadro de texto, escriba `net.msmq://localhost/private/WCFNetMsmqAdapterPublishing`.</span><span class="sxs-lookup"><span data-stu-id="be970-170">In the **WCF-NetMsmq Transport Properties** dialog box, on the **General**  tab, in the **Address (URI)** text box, type `net.msmq://localhost/private/WCFNetMsmqAdapterPublishing`.</span></span>  
  
    8.  <span data-ttu-id="be970-171">En el **propiedades de transporte de WCF-NetMsmq** cuadro de diálogo la **enlace** ficha, asegúrese de que el **transaccional** casilla está activada.</span><span class="sxs-lookup"><span data-stu-id="be970-171">In the **WCF-NetMsmq Transport Properties** dialog box, on the **Binding**  tab, make sure that the **Transactional** check box is selected.</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="be970-172">Como ha creado la cola de destino como una cola transaccional, debe activar esta casilla de verificación.</span><span class="sxs-lookup"><span data-stu-id="be970-172">Because you created the target queue as a transactional queue, you must select this check box.</span></span> <span data-ttu-id="be970-173">Si no se activa, la ubicación de recepción no se habilitará ya que existirá una discrepancia entre el requisito transaccional de la ubicación de recepción y el de la cola MSMQ subyacente.</span><span class="sxs-lookup"><span data-stu-id="be970-173">If this box is not selected, the receive location will not be enabled because there will be a discrepancy between the transactional requirement of the receive location and that of the underlying MSMQ queue.</span></span>  
  
    9. <span data-ttu-id="be970-174">En el **propiedades de transporte de WCF-NetMsmq** cuadro de diálogo la **seguridad** ficha, seleccione **ninguno** desde el **modo de seguridad** lista desplegable .</span><span class="sxs-lookup"><span data-stu-id="be970-174">In the **WCF-NetMsmq Transport Properties** dialog box, on the **Security**  tab, select **None** from the **Security mode** drop-down list.</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="be970-175">En este tutorial se supone que MSMQ está instalado con la integración [!INCLUDE[btsAD](../includes/btsad-md.md)] deshabilitada en el equipo.</span><span class="sxs-lookup"><span data-stu-id="be970-175">This walkthrough assumes that MSMQ is installed with [!INCLUDE[btsAD](../includes/btsad-md.md)] integration disabled on your computer.</span></span> <span data-ttu-id="be970-176">El valor predeterminado, **WindowsDomain**, para la **MsmqAuthenticationMode** propiedad está disponible cuando [!INCLUDE[btsAD](../includes/btsad-md.md)] está habilitada la integración.</span><span class="sxs-lookup"><span data-stu-id="be970-176">The default value, **WindowsDomain**, for the **MSMQ authentication mode** property is available when [!INCLUDE[btsAD](../includes/btsad-md.md)] integration is enabled.</span></span>  
  
    10. <span data-ttu-id="be970-177">En el **propiedades de la ubicación de recepción** cuadro de diálogo, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="be970-177">In the **Receive Location Properties** dialog box, click **OK**.</span></span>  
  
5.  <span data-ttu-id="be970-178">Cree un puerto de envío de archivos para la aplicación de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="be970-178">Create a FILE send port for the sample application.</span></span> <span data-ttu-id="be970-179">Este puerto se usa para enrutar la respuesta desde el pedido de compra de la orquestación subyacente del servicio.</span><span class="sxs-lookup"><span data-stu-id="be970-179">This port is used to route the response from the purchase order from the service's underlying orchestration.</span></span>  
  
    1.  <span data-ttu-id="be970-180">En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] administración de la consola, expanda **WCFNetMsmqAdapterPublishing**, haga clic en **puertos de envío**, seleccione **nuevo**y, a continuación, haga clic en **Puerto de envío unidireccional estático**.</span><span class="sxs-lookup"><span data-stu-id="be970-180">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **WCFNetMsmqAdapterPublishing**, right-click **Send Ports**, point to **New**, and then click **Static One-way Send Port**.</span></span>  
  
    2.  <span data-ttu-id="be970-181">En el **propiedades de puerto de envío** cuadro de diálogo, en la **nombre** cuadro de texto, escriba `WCFNetMsmqAdapterPublishing.SendPurchaseOrder.File`.</span><span class="sxs-lookup"><span data-stu-id="be970-181">In the **Send Port Properties** dialog box, in the **Name** text box, type `WCFNetMsmqAdapterPublishing.SendPurchaseOrder.File`.</span></span>  
  
    3.  <span data-ttu-id="be970-182">En el **propiedades de puerto de envío** cuadro de diálogo, en la **transporte** junto a la sección **tipo**, seleccione **archivo** en la lista desplegable y, a continuación, Haga clic en **configurar**.</span><span class="sxs-lookup"><span data-stu-id="be970-182">In the **Send Port Properties** dialog box, in the **Transport** section next to **Type**, select **FILE** from the drop-down list, and then click **Configure**.</span></span>  
  
    4.  <span data-ttu-id="be970-183">En el **propiedades de transporte de archivo** cuadro de diálogo, en la **General** ficha la **carpeta de destino** cuadro de texto, escriba `C:\WCFNetMsmqAdapterPublishing\Out`y, a continuación, haga clic en **Aceptar** .</span><span class="sxs-lookup"><span data-stu-id="be970-183">In the **FILE Transport Properties** dialog box, on the **General** tab, in the **Destination folder** text box, type `C:\WCFNetMsmqAdapterPublishing\Out`, and then click **OK**.</span></span>  
  
    5.  <span data-ttu-id="be970-184">En el **propiedades de puerto de envío** cuadro de diálogo, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="be970-184">In the **Send Port Properties** dialog box, click **OK**.</span></span>  
  
6.  <span data-ttu-id="be970-185">Especifique el nombre de host y los enlaces de la aplicación de ejemplo. Para ello:</span><span class="sxs-lookup"><span data-stu-id="be970-185">Specify the host name and bindings for the sample application as follows:</span></span>  
  
    1.  <span data-ttu-id="be970-186">En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] administración de la consola, expanda **WCFNetMsmqAdapterPublishing**, expanda **orquestaciones**, haga clic en la orquestación de ejemplo, haga clic en **propiedades**, haga clic en **enlaces**y establezca **Host** a **BizTalkServerApplication** u otro host adecuado.</span><span class="sxs-lookup"><span data-stu-id="be970-186">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **WCFNetMsmqAdapterPublishing**, expand **Orchestrations**, right-click the sample orchestration, click **Properties**, click **Bindings**, and set **Host** to **BizTalkServerApplication** or another appropriate host.</span></span>  
  
    2.  <span data-ttu-id="be970-187">En el **propiedades de orquestación** cuadro de diálogo, seleccione **WCFNetMsmqAdapterPublishing.ReceivePurchaseOrder** desde el **puertos de recepción** la lista desplegable para el  **PurchaseOrderRequestPort**.</span><span class="sxs-lookup"><span data-stu-id="be970-187">In the **Orchestration Properties** dialog box, select **WCFNetMsmqAdapterPublishing.ReceivePurchaseOrder** from the **Receive Ports** drop-down list for the **PurchaseOrderRequestPort**.</span></span>  
  
    3.  <span data-ttu-id="be970-188">En el **propiedades de orquestación** cuadro de diálogo, seleccione **WCFNetMsmqAdapterPublishing.SendPurchaseOrder.File** desde el **grupos de puertos de envío y puertos de envío** lista desplegable para el **PurchaseOrderResponsePort**.</span><span class="sxs-lookup"><span data-stu-id="be970-188">In the **Orchestration Properties** dialog box, select **WCFNetMsmqAdapterPublishing.SendPurchaseOrder.File** from the **Send Ports/Send Port Groups** drop-down list for the **PurchaseOrderResponsePort**.</span></span>  
  
    4.  <span data-ttu-id="be970-189">En el **propiedades de orquestación** cuadro de diálogo, haga clic en **Aceptar** para guardar la configuración.</span><span class="sxs-lookup"><span data-stu-id="be970-189">In the **Orchestration Properties** dialog box, click **OK** to save the configuration.</span></span>  
  
## <a name="publish-the-metadata-for-the-wcf-netmsmq-receive-location"></a><span data-ttu-id="be970-190">Publicar los metadatos para ubicación de recepción de WCF-NetMsmq</span><span class="sxs-lookup"><span data-stu-id="be970-190">Publish the metadata for the WCF-NetMsmq receive location</span></span>  
  
1.  <span data-ttu-id="be970-191">Haga clic en **iniciar**, seleccione **todos los programas**, seleccione [!INCLUDE[btsBizTalkServerStartMenuItemui](../includes/btsbiztalkserverstartmenuitemui-md.md)]y, a continuación, haga clic en **Asistente de publicación de servicio de WCF de BizTalk**.</span><span class="sxs-lookup"><span data-stu-id="be970-191">Click **Start**, point to **All Programs**, point to [!INCLUDE[btsBizTalkServerStartMenuItemui](../includes/btsbiztalkserverstartmenuitemui-md.md)], and then click **BizTalk WCF Service Publishing Wizard**.</span></span>  
  
2.  <span data-ttu-id="be970-192">En el **éste es el Asistente para publicación de servicio WCF de BizTalk** página, haga clic en **siguiente**.</span><span class="sxs-lookup"><span data-stu-id="be970-192">On the **Welcome to the BizTalk WCF Service Publishing Wizard** page, click **Next**.</span></span>  
  
3.  <span data-ttu-id="be970-193">En el **tipo de servicio WCF** página, seleccione la **extremo de sólo metadatos (MEX)** ubicación de recepción de la casilla de verificación para publicar los metadatos para el WCFNetMsmq.</span><span class="sxs-lookup"><span data-stu-id="be970-193">On the **WCF Service Type** page, select the **Metadata only endpoint (MEX)** check box to publish the metadata for the WCFNetMsmq receive location.</span></span> <span data-ttu-id="be970-194">Seleccione **WCFNetMsmqAdapterPublishing.ReceivePurchaseOrder.NetMsmq** desde el **Publicar metadatos para la ubicación de recepción** lista desplegable y, a continuación, haga clic en **siguiente**.</span><span class="sxs-lookup"><span data-stu-id="be970-194">Select **WCFNetMsmqAdapterPublishing.ReceivePurchaseOrder.NetMsmq** from the **Publish metadata for receive location** drop-down list, and then click **Next**.</span></span>  
  
4.  <span data-ttu-id="be970-195">En el **crear servicio WCF** página, seleccione **publicar orquestaciones de BizTalk como servicio WCF**y, a continuación, haga clic en **siguiente**.</span><span class="sxs-lookup"><span data-stu-id="be970-195">On the **Create WCF Service** page, select **Publish BizTalk orchestrations as WCF service**, and then click **Next**.</span></span>  
  
5.  <span data-ttu-id="be970-196">En el **ensamblado de BizTalk** página, en la **archivo de ensamblado de BizTalk (\*.dll)** cuadro de texto, haga clic en **examinar** para ir a la **C:\ WCFNetMsmqAdapterPublishing\BizTalkApp\bin\Development** carpeta, haga doble clic en el ensamblado que contiene la orquestación de ejemplo para publicar y, a continuación, haga clic en **siguiente**.</span><span class="sxs-lookup"><span data-stu-id="be970-196">On the **BizTalk Assembly** page, in the **BizTalk assembly file (\*.dll)** text box, click **Browse** to browse to the **C:\WCFNetMsmqAdapterPublishing\BizTalkApp\bin\Development** folder, double-click the assembly containing the sample orchestration to publish, and then click **Next**.</span></span>  
  
6.  <span data-ttu-id="be970-197">En el **orquestaciones y puertos** página, asegúrese de que el **puerto: PurchaseOrderRequestPort** nodo está seleccionado en la página y, a continuación, haga clic en **siguiente**.</span><span class="sxs-lookup"><span data-stu-id="be970-197">On the **Orchestrations and Ports** page, make sure that the **Port: PurchaseOrderRequestPort** node is selected on the page, and then click **Next**.</span></span>  
  
     <span data-ttu-id="be970-198">Se publicará el intercambio de metadatos para el puerto de recepción y el cliente lo usará para enviar mensajes a la ubicación de recepción.</span><span class="sxs-lookup"><span data-stu-id="be970-198">The MEX for the receive port will be published and used by the client to submit messages to the receive location.</span></span>  
  
7.  <span data-ttu-id="be970-199">En el **propiedades del servicio WCF** página, en la **espacio de nombres de destino del servicio WCF** cuadro de texto, escriba un URI que desee que este [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] de servicio para usar y, a continuación, haga clic en **siguiente**.</span><span class="sxs-lookup"><span data-stu-id="be970-199">On the **WCF Service Properties** page, in the **Target namespace of WCF service** text box, type a URI that you want this published [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service to use, and then click **Next**.</span></span> <span data-ttu-id="be970-200">En este tutorial, deje la dirección URI predeterminada, `http://tempuri.org/`.</span><span class="sxs-lookup"><span data-stu-id="be970-200">For this walkthrough, leave the default URI, `http://tempuri.org/`.</span></span>  
  
8.  <span data-ttu-id="be970-201">En el **ubicación del servicio WCF** página, lleve a cabo las siguientes acciones para especificar la ubicación de la [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] services para crear y, a continuación, haga clic en **siguiente**:</span><span class="sxs-lookup"><span data-stu-id="be970-201">On the **WCF Service Location** page, perform the following actions to specify the location of the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] services to create, and then click **Next**:</span></span>  
  
    1.  <span data-ttu-id="be970-202">En el **ubicación** cuadro de texto, escriba el directorio Web nombre donde la [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] ejecuciones del servicio o haga clic en **examinar** y seleccione un directorio Web.</span><span class="sxs-lookup"><span data-stu-id="be970-202">In the **Location** text box, type the Web directory name where the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service runs or click **Browse** and select a Web directory.</span></span> <span data-ttu-id="be970-203">En este tutorial, deje la ubicación predeterminada (http://localhost/*\<nombre de ensamblado de BizTalk >*) en el **ubicación** cuadro de texto.</span><span class="sxs-lookup"><span data-stu-id="be970-203">For this walkthrough, leave the default location (http://localhost/*\<BizTalk Assembly Name>*) in the **Location** text box.</span></span>  
  
    2.  <span data-ttu-id="be970-204">Seleccione el **permitir acceso anónimo al servicio WCF** opción.</span><span class="sxs-lookup"><span data-stu-id="be970-204">Select the **Allow anonymous access to WCF service** option.</span></span> <span data-ttu-id="be970-205">Esta opción agrega acceso anónimo al directorio virtual creado.</span><span class="sxs-lookup"><span data-stu-id="be970-205">This option adds anonymous access to the created virtual directory.</span></span> <span data-ttu-id="be970-206">Es necesario seleccionarla para permitir la autenticación anónima para la aplicación Web que se creará en este tutorial.</span><span class="sxs-lookup"><span data-stu-id="be970-206">This option needs to be selected to allow anonymous authentication for the Web application that this wizard will create.</span></span>  
  
9. <span data-ttu-id="be970-207">En el **resumen de servicio WCF** página, haga clic en **crear** para crear el [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span><span class="sxs-lookup"><span data-stu-id="be970-207">On the **WCF Service Summary** page, click **Create** to create the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  
  
10. <span data-ttu-id="be970-208">En el **completar BizTalk WCF Asistente para publicar servicios** página, haga clic en **finalizar**.</span><span class="sxs-lookup"><span data-stu-id="be970-208">On the **Completing BizTalk WCF Service Publishing Wizard** page, click **Finish**.</span></span>  
  
## <a name="configure-the-web-application-hosting-the-published-metadata-service"></a><span data-ttu-id="be970-209">Configurar la aplicación Web que hospeda el servicio de metadatos publicados</span><span class="sxs-lookup"><span data-stu-id="be970-209">Configure the Web application hosting the published metadata service</span></span>  
  
1.  <span data-ttu-id="be970-210">Abra un símbolo del sistema, vaya a la **C:\inetpub\wwwroot\Microsoft.Samples.BizTalk.WCF.NetMsmqPublishing.BizTalkApp** carpeta donde el **Asistente de publicación de servicio de WCF de BizTalk** creado el [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]servicio.</span><span class="sxs-lookup"><span data-stu-id="be970-210">Open a command prompt, go to the **C:\inetpub\wwwroot\Microsoft.Samples.BizTalk.WCF.NetMsmqPublishing.BizTalkApp** folder where the **BizTalk WCF Service Publishing Wizard** created the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="be970-211">Abra la **Web.config** archivo mediante el Bloc de notas.</span><span class="sxs-lookup"><span data-stu-id="be970-211">Open the **Web.config** file using Notepad.</span></span>  
  
2.  <span data-ttu-id="be970-212">En el Bloc de notas, agregue la siguiente línea dentro de la  **\<system.web >** elemento:</span><span class="sxs-lookup"><span data-stu-id="be970-212">In Notepad, add the following line inside the **\<system.web>** element:</span></span>  
  
    ```  
    <trust level="Full" originUrl="" />  
    ```  
  
    > [!NOTE]
    >  <span data-ttu-id="be970-213">Este valor es opcional.</span><span class="sxs-lookup"><span data-stu-id="be970-213">This setting is optional.</span></span> <span data-ttu-id="be970-214">Esta configuración concede a la aplicación ASP.NET que hospeda el Servicio [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] publicado acceso a cualquier recurso que sea competencia de la seguridad del sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="be970-214">It grants the ASP.NET application hosting the published [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service access to any resource that is subject to operating system security.</span></span>  
  
3.  <span data-ttu-id="be970-215">Pruebe el Servicio [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] publicado mediante el uso de Internet Explorer de la siguiente forma:</span><span class="sxs-lookup"><span data-stu-id="be970-215">Test the published [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service by using Internet Explorer as follows:</span></span>  
  
    1.  <span data-ttu-id="be970-216">Haga clic en **iniciar**, seleccione **herramientas administrativas**y, a continuación, haga clic en **Internet Information Services (IIS) Manager**.</span><span class="sxs-lookup"><span data-stu-id="be970-216">Click **Start**, point to **Administrator Tools**, and then click **Internet Information Services (IIS) Manager**.</span></span>  
  
    2.  <span data-ttu-id="be970-217">En el Administrador de IIS, cree un grupo de aplicaciones en el que se ejecutará este servicio y que tenga los permisos correctos para la base de datos de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="be970-217">In IIS Manager, create an application pool within which this service will run that has the correct BizTalk database permissions.</span></span> <span data-ttu-id="be970-218">Haga clic en **grupos de aplicaciones**, haga clic en **Agregar grupo de aplicaciones**, escriba un nombre para el grupo de aplicaciones y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="be970-218">Right-click **Application Pools**, click **Add Application Pool**, enter a name for the application pool, and then click **OK**.</span></span>  
  
    3.  <span data-ttu-id="be970-219">Expanda **grupos de aplicaciones**, haga clic en el grupo de aplicaciones recién creado y, a continuación, seleccione **configuración avanzada**.</span><span class="sxs-lookup"><span data-stu-id="be970-219">Expand **Application Pools**, right-click the application pool you just created, and then select **Advanced Settings**.</span></span> <span data-ttu-id="be970-220">En **modelo de proceso** sección, especifique la cuenta que tiene acceso a la [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] bases de datos en el **identidad** campo.</span><span class="sxs-lookup"><span data-stu-id="be970-220">Under **Process Model** section, enter the account which has access to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases under the **Identity** field.</span></span>  
  
    4.  <span data-ttu-id="be970-221">Expanda **sitios Web**, expanda **sitio Web predeterminado**y, a continuación, expanda la aplicación Web que creó el Asistente para publicación de servicio WCF de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="be970-221">Expand **Web Sites**, expand **Default Web Site**, and then expand the Web application that the BizTalk WCF Service Publishing Wizard created.</span></span>  
  
    5.  <span data-ttu-id="be970-222">En el Administrador de IIS, en el panel central, haga clic en **vista de contenido** para mostrar los archivos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="be970-222">In IIS Manager, in the center pane, click **Content View** to display the files for the application.</span></span>  
  
    6.  <span data-ttu-id="be970-223">Haga clic en el **Microsoft_Samples_BizTalk_WCF_NetMsmqPublishing_BizTalkApp_OrderProcess_PurchaseOrderRequestPort.svc** servicio de archivos que la **Asistente de publicación de servicio de WCF de BizTalk** crea y, a continuación, haga clic en **examinar**.</span><span class="sxs-lookup"><span data-stu-id="be970-223">Right-click the **Microsoft_Samples_BizTalk_WCF_NetMsmqPublishing_BizTalkApp_OrderProcess_PurchaseOrderRequestPort.svc** service file that the **BizTalk WCF Service Publishing Wizard** created, and then click **Browse**.</span></span> <span data-ttu-id="be970-224">Se abrirá Internet Explorer para mostrar la **BizTalkServerInstance Service** página que indica que una instancia de la [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] servicio se está ejecutando.</span><span class="sxs-lookup"><span data-stu-id="be970-224">This opens Internet Explorer to display the **BizTalkServerInstance Service** page indicating that an instance of the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service is running.</span></span> <span data-ttu-id="be970-225">En la página también se muestra una dirección WSDL completa que puede copiar y usar con una herramienta de metadatos de servicio (svcutil.exe), o desde [!INCLUDE[vs2010](../includes/vs2010-md.md)], para recuperar código de proxy y un archivo de configuración que puede usarse para crear una aplicación cliente para el servicio.</span><span class="sxs-lookup"><span data-stu-id="be970-225">The page displays a full WSDL address that you can copy and use with the Service Metadata Tool (svcutil.exe), or from within [!INCLUDE[vs2010](../includes/vs2010-md.md)], to retrieve proxy code and a configuration file that can be used to create a client application for the service.</span></span>  
  
    7.  <span data-ttu-id="be970-226">Copiar en el Portapapeles la línea de comandos con la dirección WSDL completa de **BizTalkServerInstance Service** página que muestra Internet Explorer en el paso anterior.</span><span class="sxs-lookup"><span data-stu-id="be970-226">Copy to the Clipboard the command line with the full WSDL address from **BizTalkServerInstance Service** page that Internet Explorer shows in the previous step.</span></span>  
  
         <span data-ttu-id="be970-227">**svcutil.exe http://localhost/Microsoft.Samples.BizTalk.WCF.NetMsmqPublishing.BizTalkApp/Microsoft_Samples_BizTalk_WCF_NetMsmqPublishing_BizTalkApp_OrderProcess_PurchaseOrderRequestPort.svc?wsdl**</span><span class="sxs-lookup"><span data-stu-id="be970-227">**svcutil.exe http://localhost/Microsoft.Samples.BizTalk.WCF.NetMsmqPublishing.BizTalkApp/Microsoft_Samples_BizTalk_WCF_NetMsmqPublishing_BizTalkApp_OrderProcess_PurchaseOrderRequestPort.svc?wsdl**</span></span>  
  
## <a name="build-the-client-application"></a><span data-ttu-id="be970-228">Compile la aplicación cliente</span><span class="sxs-lookup"><span data-stu-id="be970-228">Build the client application</span></span>  
  
1.  <span data-ttu-id="be970-229">Abra un [!INCLUDE[vs2010](../includes/vs2010-md.md)] símbolo del sistema como administrador y vaya a la **C:\WCFNetMsmqAdapterPublishing\WCFClient** carpeta.</span><span class="sxs-lookup"><span data-stu-id="be970-229">Open a [!INCLUDE[vs2010](../includes/vs2010-md.md)] command prompt as Administrator and go to the **C:\WCFNetMsmqAdapterPublishing\WCFClient** folder.</span></span> <span data-ttu-id="be970-230">Aquí es donde colocará archivo de configuración de la aplicación y de la clase de proxy.</span><span class="sxs-lookup"><span data-stu-id="be970-230">This is where you will place the proxy class and application configuration file.</span></span>  
  
2.  <span data-ttu-id="be970-231">Pegue toda la línea de comandos de svcutil.exe que contiene la dirección WSDL completa que ha copiado en el procedimiento anterior y presione ENTRAR.</span><span class="sxs-lookup"><span data-stu-id="be970-231">Paste the entire svcutil.exe command line containing the full WSDL address that you copied in the previous procedure, and then press ENTER.</span></span> <span data-ttu-id="be970-232">Esto crea la clase de proxy, **BizTalkServiceInstance.cs**y el archivo de configuración de aplicación, **output.config**. Mantenga la ventana de símbolo del sistema abierta para su uso durante la última sección.</span><span class="sxs-lookup"><span data-stu-id="be970-232">This creates the proxy class, **BizTalkServiceInstance.cs**, and application configuration file, **output.config**. Keep the command prompt window open for use during the final section.</span></span>  
  
3.  <span data-ttu-id="be970-233">En [!INCLUDE[vs2010](../includes/vs2010-md.md)], en el Explorador de soluciones, haga clic en **WCFClient**, seleccione **agregar**y, a continuación, haga clic en **elemento existente**.</span><span class="sxs-lookup"><span data-stu-id="be970-233">In [!INCLUDE[vs2010](../includes/vs2010-md.md)], in Solution Explorer, right-click **WCFClient**, point to **Add**, and then click **Existing Item**.</span></span>  
  
4.  <span data-ttu-id="be970-234">En el **Agregar elemento existente** cuadro de diálogo, vaya a la **WCFClient** carpeta, seleccione **todos los archivos (\*.\*)**  en el **archivos de tipo** lista desplegable, seleccione la **BizTalkServiceInstance.cs** y **output.config** de archivos y, a continuación, haga clic en  **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="be970-234">In the **Add Existing Item** dialog box, browse to the **WCFClient** folder, select **All Files (\*.\*)** in the **Files of type** drop-down list, select the **BizTalkServiceInstance.cs** and **output.config** files, and then click **Add**.</span></span>  
  
5.  <span data-ttu-id="be970-235">Expanda **WCFClient**, haga clic en **output.config**, haga clic en **cambiar el nombre de**y, a continuación, escriba `App.config` como el nuevo nombre.</span><span class="sxs-lookup"><span data-stu-id="be970-235">Expand **WCFClient**, right-click **output.config**, click **Rename**, and then type `App.config` as the new name.</span></span>  
  
6.  <span data-ttu-id="be970-236">Haga doble clic en **Program.cs** para revisar cómo se llama publicado [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] servicio que utiliza la clase de proxy generada por svcutil.exe.</span><span class="sxs-lookup"><span data-stu-id="be970-236">Double-click **Program.cs** to review how to call the published [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service using the proxy class generated by svcutil.exe.</span></span>  
  
7.  <span data-ttu-id="be970-237">Expanda **referencias**y, a continuación, asegúrese de que el **WCFClient** proyecto tiene **System.ServiceModel.dll** que se hace referencia.</span><span class="sxs-lookup"><span data-stu-id="be970-237">Expand **References**, and then make sure that the **WCFClient** project has **System.ServiceModel.dll** referenced.</span></span>  
  
8.  <span data-ttu-id="be970-238">Haga clic en el **WCFClient** de proyecto y seleccione **generar**.</span><span class="sxs-lookup"><span data-stu-id="be970-238">Right-click the **WCFClient** project and select **Build**.</span></span> <span data-ttu-id="be970-239">Mantenga abierto [!INCLUDE[vs2010](../includes/vs2010-md.md)] y vaya a la sección siguiente.</span><span class="sxs-lookup"><span data-stu-id="be970-239">Keep [!INCLUDE[vs2010](../includes/vs2010-md.md)] open and go to the next section.</span></span>  
  
## <a name="test-the-sample-solution-with-the-wcf-netmsmq-adapter"></a><span data-ttu-id="be970-240">Probar la solución de ejemplo con el adaptador de WCF-NetMsmq</span><span class="sxs-lookup"><span data-stu-id="be970-240">Test the sample solution with the WCF-NetMsmq adapter</span></span>  
  
1.  <span data-ttu-id="be970-241">En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] consola de administración, haga clic en el **WCFNetMsmqAdapterPublishing** aplicación y, a continuación, haga clic en **iniciar**.</span><span class="sxs-lookup"><span data-stu-id="be970-241">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, right-click the **WCFNetMsmqAdapterPublishing** application, and then click **Start**.</span></span> <span data-ttu-id="be970-242">En el **iniciar** cuadro de diálogo, haga clic en **iniciar**.</span><span class="sxs-lookup"><span data-stu-id="be970-242">In the **Start** dialog box, click **Start**.</span></span>  
  
2.  <span data-ttu-id="be970-243">En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] administración de la consola, expanda **configuración de plataforma**, expanda **instancias de Host**, haga clic en **BizTalkServerApplication** u otro procede de la instancia de host y, a continuación, haga clic en **reiniciar**.</span><span class="sxs-lookup"><span data-stu-id="be970-243">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **Platform Settings**, expand **Host Instances**, right-click **BizTalkServerApplication** or another appropriate host instance, and then click **Restart**.</span></span> <span data-ttu-id="be970-244">Aunque este paso no es necesario, es aconsejable asegurarse de que el ejemplo funciona correctamente hasta este punto.</span><span class="sxs-lookup"><span data-stu-id="be970-244">While this step is not required, it is a good idea to ensure the sample works correctly up to this point.</span></span>  
  
3.  <span data-ttu-id="be970-245">En [!INCLUDE[vs2010](../includes/vs2010-md.md)], en la **depurar** menú, haga clic en **iniciar sin depurar** para ejecutar la aplicación WCFClient.</span><span class="sxs-lookup"><span data-stu-id="be970-245">In [!INCLUDE[vs2010](../includes/vs2010-md.md)], on the **Debug** menu, click **Start Without Debugging** to run the WCFClient application.</span></span> <span data-ttu-id="be970-246">Esto envía un mensaje de ejemplo a la ubicación de recepción WCF-NetMsmq.</span><span class="sxs-lookup"><span data-stu-id="be970-246">This sends a sample message to the WCF-NetMsmq receive location.</span></span> <span data-ttu-id="be970-247">Aparecerá el mensaje de salida siguiente que indica que se ha enviado el mensaje.</span><span class="sxs-lookup"><span data-stu-id="be970-247">You will see the output message below stating the message was sent.</span></span>  
  
     <span data-ttu-id="be970-248">**Ubicación de recepción de una llamada a la operación de envío de WCF-NetMsmq**</span><span class="sxs-lookup"><span data-stu-id="be970-248">**Calling the Submit operation on the WCF-NetMsmq receive location**</span></span>  
  
     <span data-ttu-id="be970-249">**Presione cualquier tecla para cerrar la aplicación cliente de WCF**</span><span class="sxs-lookup"><span data-stu-id="be970-249">**Press any key to close WCF client application**</span></span>  
  
4.  <span data-ttu-id="be970-250">Presione cualquier tecla para cerrar la aplicación WCFClient.</span><span class="sxs-lookup"><span data-stu-id="be970-250">Press any key to close the WCFClient application.</span></span>  
  
5.  <span data-ttu-id="be970-251">En el [!INCLUDE[vs2010](../includes/vs2010-md.md)] símbolo del sistema, vaya a la **C:\WCFNetMsmqAdapterPublishing\Out** carpeta y, a continuación, asegúrese de que el mensaje de respuesta que existe la aplicación WCFClient.</span><span class="sxs-lookup"><span data-stu-id="be970-251">In the [!INCLUDE[vs2010](../includes/vs2010-md.md)] Command Prompt, go to the **C:\WCFNetMsmqAdapterPublishing\Out** folder, and then make sure the response message that the WCFClient application sent back exists.</span></span>  
  
6.  <span data-ttu-id="be970-252">Haga doble clic en el archivo de {GUID} .xml para abrirlo en Internet Explorer y ver el **OrderID** valor procesadas por el servicio.</span><span class="sxs-lookup"><span data-stu-id="be970-252">Double-click the {GUID}.xml file to open it in Internet Explorer and view the **OrderID** value processed by the service.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="be970-253">Vea también</span><span class="sxs-lookup"><span data-stu-id="be970-253">See Also</span></span>  
 <span data-ttu-id="be970-254">[Configurar un WCF-NetMsmq ubicación de recepción](../core/how-to-configure-a-wcf-netmsmq-receive-location.md) </span><span class="sxs-lookup"><span data-stu-id="be970-254">[Configure a WCF-NetMsmq Receive Location](../core/how-to-configure-a-wcf-netmsmq-receive-location.md) </span></span>  
 <span data-ttu-id="be970-255">[Tutoriales del adaptador WCF](../core/wcf-adapter-walkthroughs.md) </span><span class="sxs-lookup"><span data-stu-id="be970-255">[WCF Adapter Walkthroughs](../core/wcf-adapter-walkthroughs.md) </span></span>  
 [<span data-ttu-id="be970-256">Adaptadores de recepción de la publicación de metadatos de servicio de WCF</span><span class="sxs-lookup"><span data-stu-id="be970-256">Publishing Service Metadata for the WCF Receive Adapters</span></span>](../core/publishing-service-metadata-for-the-wcf-receive-adapters.md)
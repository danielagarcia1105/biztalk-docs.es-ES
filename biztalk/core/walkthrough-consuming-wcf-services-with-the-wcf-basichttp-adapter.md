---
title: 'Tutorial: Consumir servicios WCF con el adaptador WCF-BasicHttp | Documentos de Microsoft'
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 2d280198-ba55-4937-91c9-19d6d0ed3194
caps.latest.revision: "49"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: c54646d106abe1824ce39de5a550f5f591bae882
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
---
# <a name="walkthrough-consuming-wcf-services-with-the-wcf-basichttp-adapter"></a><span data-ttu-id="cf160-102">Tutorial: Consumir servicios WCF con el adaptador WCF-BasicHttp</span><span class="sxs-lookup"><span data-stu-id="cf160-102">Walkthrough: Consuming WCF Services with the WCF-BasicHttp Adapter</span></span>
  
> [!NOTE]
>  <span data-ttu-id="cf160-103">Para obtener más información acerca de los adaptadores, vea [adaptadores de BizTalk Server](../core/adapters-in-biztalk-server.md).</span><span class="sxs-lookup"><span data-stu-id="cf160-103">For more information about adapters, see [Adapters in BizTalk Server](../core/adapters-in-biztalk-server.md).</span></span>  
  
## <a name="introduction"></a><span data-ttu-id="cf160-104">Introducción</span><span class="sxs-lookup"><span data-stu-id="cf160-104">Introduction</span></span>
  
 <span data-ttu-id="cf160-105">En este tutorial, va a consumir un servicio de [!INCLUDE[firstref_btsWinCommFoundation](../includes/firstref-btswincommfoundation-md.md)] hospedado en Internet Information Services (IIS), mediante la mensajería de BizTalk y el adaptador de envío de WCF-BasicHttp.</span><span class="sxs-lookup"><span data-stu-id="cf160-105">In this walkthrough, you will consume a [!INCLUDE[firstref_btsWinCommFoundation](../includes/firstref-btswincommfoundation-md.md)] service hosted inside Internet Information Services (IIS) using BizTalk messaging and the WCF-BasicHttp send adapter.</span></span> <span data-ttu-id="cf160-106">Este adaptador usa el **BasicHttpBinding** enlace para proporcionar una implementación de la pila de protocolos o transporte compatible con versiones anteriores de servicios Web para que sirvan como puente entre Microsoft [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] y [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] funcionalidad.</span><span class="sxs-lookup"><span data-stu-id="cf160-106">This adapter uses the **BasicHttpBinding** binding to provide a transport/protocol stack implementation compatible with earlier versions of Web services to serve as a bridge between Microsoft [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] functionality.</span></span> <span data-ttu-id="cf160-107">Una orquestación puede enlazarse con un puerto de envío que use un adaptador de [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] para llamar a un servicio de [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] y aprovechar su funcionalidad en su procesamiento empresarial lógico.</span><span class="sxs-lookup"><span data-stu-id="cf160-107">An orchestration can bind to a send port that uses a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] adapter to call a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service and leverage its functionality within its logical business processing.</span></span>  
  
 <span data-ttu-id="cf160-108">El adaptador de WCF-BasicHttp se compone tanto de un adaptador de envío como de uno de recepción.</span><span class="sxs-lookup"><span data-stu-id="cf160-108">The WCF-BasicHttp adapter consists of both a send adapter and a receive adapter.</span></span> <span data-ttu-id="cf160-109">En este ejemplo, va a usar únicamente la parte de envío del adaptador para realizar solicitudes de Servicio WCF a través del protocolo HTTP para un Servicio [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)].</span><span class="sxs-lookup"><span data-stu-id="cf160-109">In this sample you will use only the send side of this adapter to make WCF service requests through the HTTP protocol to a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  <span data-ttu-id="cf160-110">Para un puerto de envío de petición-respuesta, el adaptador de envío envía a un Servicio [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] y recibe una respuesta como resultado.</span><span class="sxs-lookup"><span data-stu-id="cf160-110">For a Solicit-Response send port, the send adapter sends to a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service and receives back a result response.</span></span>  <span data-ttu-id="cf160-111">Por el contrario, un adaptador de recepción de [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] permite que una orquestación [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] se publique y llame externamente desde una aplicación cliente de [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)].</span><span class="sxs-lookup"><span data-stu-id="cf160-111">Conversely, a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] receive adapter allows a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] orchestration to be published and called externally by a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] client application.</span></span> <span data-ttu-id="cf160-112">Hacer referencia a la [publicar servicios WCF](../core/publishing-wcf-services.md) para obtener información adicional.</span><span class="sxs-lookup"><span data-stu-id="cf160-112">Refer to the [Publishing WCF Services](../core/publishing-wcf-services.md) for additional information.</span></span>  
  
 <span data-ttu-id="cf160-113">Cuando concluya el tutorial, comprenderá cómo se realizan las tareas siguientes:</span><span class="sxs-lookup"><span data-stu-id="cf160-113">After completing this walkthrough, you will understand how to perform the following tasks:</span></span>  
  
-   <span data-ttu-id="cf160-114">Desde [!INCLUDE[btsCoName](../includes/btsconame-md.md)] [!INCLUDE[vs2010](../includes/vs2010-md.md)], use la **implementar** comando para implementar los ensamblados que contienen el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] solución y la [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] servicio a una instancia local de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="cf160-114">From within [!INCLUDE[btsCoName](../includes/btsconame-md.md)][!INCLUDE[vs2010](../includes/vs2010-md.md)], use the **Deploy** command to deploy the assemblies containing the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] solution and the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service to a local instance of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="cf160-115">De este modo, se creará una aplicación de BizTalk que se rellenará con los ensamblados.</span><span class="sxs-lookup"><span data-stu-id="cf160-115">This creates a BizTalk application that is populated with the assemblies.</span></span>  
  
-   <span data-ttu-id="cf160-116">Desde [!INCLUDE[vs2010](../includes/vs2010-md.md)], use la **Asistente de consumición de servicio WCF de BizTalk** para generar el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] esquemas y tipos necesarios para consumir el [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span><span class="sxs-lookup"><span data-stu-id="cf160-116">From within [!INCLUDE[vs2010](../includes/vs2010-md.md)], use the **BizTalk WCF Service Consuming Wizard** to generate the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] schemas and types necessary to consume the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="cf160-117">También se genera una orquestación vacía, que se puede usar y enlazar con un puerto lógico.</span><span class="sxs-lookup"><span data-stu-id="cf160-117">An empty orchestration is generated as well that you can use and bind to a logical port.</span></span> <span data-ttu-id="cf160-118">Esta orquestación se compila y se implementa junto con los esquemas y tipos.</span><span class="sxs-lookup"><span data-stu-id="cf160-118">This orchestration is complied and deployed along with schemas and types.</span></span> <span data-ttu-id="cf160-119">Sin embargo, el procesamiento del flujo de trabajo de la orquestación aquí está vacío y no se usa en este ejemplo, ya que solamente se trata de un escenario de mensajería de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="cf160-119">But the orchestration workflow processing is empty here and not used in this sample as this is merely a pure [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] messaging scenario.</span></span>  
  
-   <span data-ttu-id="cf160-120">Desde la consola de administración de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], configure el enrutamiento basado en contenido mediante el uso del puerto de envío WCF-BasicHttp.</span><span class="sxs-lookup"><span data-stu-id="cf160-120">From the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, configure content-based routing by using the WCF-BasicHttp send port.</span></span> <span data-ttu-id="cf160-121">Configurará el **SOAPAction** encabezado que el destino [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] servicio espera recibir.</span><span class="sxs-lookup"><span data-stu-id="cf160-121">You will configure the **SOAPAction** header that the target [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service expects to receive.</span></span>  
  
-   <span data-ttu-id="cf160-122">Desde la consola de administración de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], configure la expresión de filtro para enrutar los mensajes de error SOAP que un Servicio [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] puede enviar a una carpeta de salida.</span><span class="sxs-lookup"><span data-stu-id="cf160-122">From the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, configure the filter expression to route any SOAP fault messages that a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service can send to an output folder.</span></span>  
  
-   <span data-ttu-id="cf160-123">Desde el Administrador de Internet Information Services (IIS), configure la aplicación web que hospeda el Servicio [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] para que exponga sus metadatos.</span><span class="sxs-lookup"><span data-stu-id="cf160-123">From within Internet Information Services (IIS) Manager, configure the Web application hosting the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service to expose its metadata.</span></span> <span data-ttu-id="cf160-124">Una vez habilitada, la **Asistente de consumición de servicio WCF de BizTalk** puede obtener estos metadatos para generar tipos y esquemas para tener acceso a la [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] servicio.</span><span class="sxs-lookup"><span data-stu-id="cf160-124">After it is enabled, the **BizTalk WCF Service Consuming Wizard** can obtain this metadata to generate types and schemas to access the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="cf160-125">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="cf160-125">Prerequisites</span></span>  
 <span data-ttu-id="cf160-126">Para llevar a cabo los pasos descritos en este ejemplo, asegúrese de que el entorno instala los siguientes requisitos previos:</span><span class="sxs-lookup"><span data-stu-id="cf160-126">To perform the steps in this sample ensure that your environment installs the following prerequisites:</span></span>  
  
-   <span data-ttu-id="cf160-127">El equipo que genera los ensamblados y ejecuta el proceso de implementación tanto el equipo que ejecuta el ejemplo requieren Microsoft [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)], Microsoft [!INCLUDE[netfx40_short](../includes/netfx40-short-md.md)]y Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)].</span><span class="sxs-lookup"><span data-stu-id="cf160-127">Both the computer that builds the assemblies and runs the deployment process, and the computer that runs the sample, require Microsoft [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)], Microsoft [!INCLUDE[netfx40_short](../includes/netfx40-short-md.md)], and Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)].</span></span>  
  
-   <span data-ttu-id="cf160-128">El equipo que se usa para generar los ensamblados y ejecutar el proceso de implementación requiere Microsoft [!INCLUDE[vs2010](../includes/vs2010-md.md)].</span><span class="sxs-lookup"><span data-stu-id="cf160-128">The computer used to build the assemblies and run the deployment process requires Microsoft [!INCLUDE[vs2010](../includes/vs2010-md.md)].</span></span>  
  
-   <span data-ttu-id="cf160-129">El equipo que ejecuta el ejemplo requiere los adaptadores de [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] y las herramientas de administración de [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)].</span><span class="sxs-lookup"><span data-stu-id="cf160-129">The computer that runs the sample requires the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Adapters and the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Administration Tools.</span></span> <span data-ttu-id="cf160-130">Se trata de opciones de instalación durante la instalación de Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)].</span><span class="sxs-lookup"><span data-stu-id="cf160-130">These are options to install during setup of Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)].</span></span>  
  
-   <span data-ttu-id="cf160-131">En los equipos que use para realizar las tareas administrativas, debe ejecutar una cuenta de usuario que sea miembro del grupo de administradores de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] para configurar los parámetros de aplicación de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] en la consola de administración de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="cf160-131">On the computers that you use to perform administrative tasks, you must run as a user account that is a member of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators group to configure the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application settings within the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="cf160-132">Esta cuenta de usuario también debe ser miembro del grupo de administradores local para la implementación de la aplicación, la administración de las instancias de host y otras tareas que puedan ser necesarias.</span><span class="sxs-lookup"><span data-stu-id="cf160-132">This user account must also be a member of the local Administrators group for application deployment, managing host instances, and other tasks that may be required.</span></span>  
  
-   <span data-ttu-id="cf160-133">En cualquier equipo que requiera [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] capacidad, complete el procedimiento de instalación única para la [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] ejemplos en [http://go.microsoft.com/fwlink/?LinkId=135510](http://go.microsoft.com/fwlink/?LinkId=135510).</span><span class="sxs-lookup"><span data-stu-id="cf160-133">On any computer that requires [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] capability, complete the one-time setup procedure for the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] samples at [http://go.microsoft.com/fwlink/?LinkId=135510](http://go.microsoft.com/fwlink/?LinkId=135510).</span></span>  
  
-   <span data-ttu-id="cf160-134">En el equipo que ejecuta el ejemplo e importa un enlace o un archivo .msi en [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], asegúrese de que el host no es un host de confianza. De lo contrario, se producirá un error en la importación.</span><span class="sxs-lookup"><span data-stu-id="cf160-134">On the computer that runs the sample and imports a binding or an .msi file into [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], ensure the host is not a trusted host or the import will fail.</span></span>  
  
-   <span data-ttu-id="cf160-135">Debe descargar el código del tutorial y extraerlo en el equipo.</span><span class="sxs-lookup"><span data-stu-id="cf160-135">You must download the walkthrough code and extract it to your computer.</span></span>  <span data-ttu-id="cf160-136">Este tutorial es una parte de todo el [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] paquete de tutoriales del adaptador.</span><span class="sxs-lookup"><span data-stu-id="cf160-136">This walkthrough is a part of the entire [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Adapter Walkthrough package.</span></span> <span data-ttu-id="cf160-137">Puede descargar el archivo **WCFAdapterWalkthroughs.exe** desde el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Developer Center en[http://go.microsoft.com/fwlink/?LinkId=194140](http://go.microsoft.com/fwlink/?LinkId=194140).</span><span class="sxs-lookup"><span data-stu-id="cf160-137">You can download the file **WCFAdapterWalkthroughs.exe** from the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Developer Center at[http://go.microsoft.com/fwlink/?LinkId=194140](http://go.microsoft.com/fwlink/?LinkId=194140).</span></span>  
  
## <a name="deploy-the-sample-wcf-service"></a><span data-ttu-id="cf160-138">Implementar el servicio WCF de ejemplo</span><span class="sxs-lookup"><span data-stu-id="cf160-138">Deploy the sample WCF service</span></span>  
  
1.  <span data-ttu-id="cf160-139">Ejecutar la extracción automática **WCFBasicHttpSendAdapter.exe** de archivos y extraiga los archivos en el **C:\WCFBasicHttpSendAdapter** carpeta.</span><span class="sxs-lookup"><span data-stu-id="cf160-139">Run the self-extracting **WCFBasicHttpSendAdapter.exe** file and extract the files into the **C:\WCFBasicHttpSendAdapter** folder.</span></span>  
  
2.  <span data-ttu-id="cf160-140">Abra la **C:\WCFBasicHttpSendAdapter\WCFBasicHttpSendAdapter.sln** en [!INCLUDE[vs2010](../includes/vs2010-md.md)].</span><span class="sxs-lookup"><span data-stu-id="cf160-140">Open the **C:\WCFBasicHttpSendAdapter\WCFBasicHttpSendAdapter.sln** in [!INCLUDE[vs2010](../includes/vs2010-md.md)].</span></span>  
  
3.  <span data-ttu-id="cf160-141">En el Explorador de soluciones, expanda la **BasicHttpWCFServiceConsuming** proyecto.</span><span class="sxs-lookup"><span data-stu-id="cf160-141">In Solution Explorer, expand the **BasicHttpWCFServiceConsuming** project.</span></span> <span data-ttu-id="cf160-142">Este proyecto es el Servicio [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] que llamará el puerto de envío.</span><span class="sxs-lookup"><span data-stu-id="cf160-142">This project is the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service that will be called by the send port.</span></span> <span data-ttu-id="cf160-143">Será hospedado en un entorno de host administrado mediante Internet Information Services (IIS).</span><span class="sxs-lookup"><span data-stu-id="cf160-143">It will be hosted in a managed host environment using Internet Information Services (IIS).</span></span> <span data-ttu-id="cf160-144">El hospedaje en IIS usa la activación basada en mensajes para administrar la activación y duración del servicio.</span><span class="sxs-lookup"><span data-stu-id="cf160-144">Hosting in IIS uses message-based activation to manage the activation and lifetime of the service.</span></span> <span data-ttu-id="cf160-145">Expanda **App_Code**y, a continuación, abra **OrderProcess.cs** para revisar.</span><span class="sxs-lookup"><span data-stu-id="cf160-145">Expand **App_Code**, and then open **OrderProcess.cs** to review.</span></span> <span data-ttu-id="cf160-146">Esto [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] servicio recibe los mensajes de solicitud de pedido a través de la **OrderRequest** método.</span><span class="sxs-lookup"><span data-stu-id="cf160-146">This [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service receives order request messages through the **OrderRequest** method.</span></span> <span data-ttu-id="cf160-147">El archivo OrderProcess.cs contiene la definición de interfaz y la implementación del Servicio [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)].</span><span class="sxs-lookup"><span data-stu-id="cf160-147">The OrderProcess.cs file contains the interface defition and implementation of the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="cf160-148">Simplemente devuelve pedido mensajes de respuesta a través de la **OrderResponse** método.</span><span class="sxs-lookup"><span data-stu-id="cf160-148">It simply returns order response messages through the **OrderResponse** method.</span></span>  
  
4.  <span data-ttu-id="cf160-149">Revise el archivo OrderProcess.svc.</span><span class="sxs-lookup"><span data-stu-id="cf160-149">Review the OrderProcess.svc file.</span></span> <span data-ttu-id="cf160-150">Solo contiene una línea que se usa para indicar a IIS que debe activar el servicio para una aplicación cliente.</span><span class="sxs-lookup"><span data-stu-id="cf160-150">It contains only one line which is used to tell IIS to activate the service for a client application.</span></span> <span data-ttu-id="cf160-151">El  **@ServiceHost**  atributo utilizado para hospedar el servicio es un punto de extensibilidad dentro del [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] modelo de programación.</span><span class="sxs-lookup"><span data-stu-id="cf160-151">The **@ServiceHost** attribute used to host the service is a point of extensibility within the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] programming model.</span></span> <span data-ttu-id="cf160-152">Utiliza un modelo de generador **ServiceHostFactory** para crear una instancia de **ServiceHost** con una instancia de la [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] servicio para administrar las solicitudes entrantes.</span><span class="sxs-lookup"><span data-stu-id="cf160-152">A factory pattern uses **ServiceHostFactory** to create an instance of **ServiceHost** with an instance of the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service to handle incoming requests.</span></span> <span data-ttu-id="cf160-153">Creación de instancias de esta instancia se basa en el **ServiceBehaviorAttribute.ConcurrencyMode** propiedad, que determina si un servicio admite un subproceso, varios subprocesos o llamadas reentrantes.</span><span class="sxs-lookup"><span data-stu-id="cf160-153">Instantiation of this instance is based upon the **ServiceBehaviorAttribute.ConcurrencyMode** property, which determines whether a service supports one thread, multiple threads, or reentrant calls.</span></span> <span data-ttu-id="cf160-154">Creación de instancias también se determina mediante la **ServiceBehavior.InstanceMode** propiedad, que determina si una sola instancia dará servicio a todos los llamadores (singleton), si se crea una instancia por llamada (sin estado), o si una instancia se creará para cada sesión (con estado).</span><span class="sxs-lookup"><span data-stu-id="cf160-154">Instantiation is also determined by the **ServiceBehavior.InstanceMode** property, which determines if a only one instance will serve all callers (singleton), if one instance will be created per call (stateless), or if one instance will be created for each session (stateful).</span></span>  
  
    ```  
    <%@ServiceHost language=c# Debug="true" Service="Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BasicHttpWcfServiceConsuming.OrderProcessServiceType" %>  
    ```  
  
5.  <span data-ttu-id="cf160-155">En [!INCLUDE[vs2010](../includes/vs2010-md.md)], en el Explorador de soluciones, abra **Web.config** para revisar.</span><span class="sxs-lookup"><span data-stu-id="cf160-155">In [!INCLUDE[vs2010](../includes/vs2010-md.md)], in Solution Explorer, open **Web.config** to review.</span></span> <span data-ttu-id="cf160-156">Si se hospeda en IIS, el Servicio [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] se configura mediante un archivo Web.config, en lugar del archivo app.config (como es el caso cuando se hospeda en una aplicación de consola).</span><span class="sxs-lookup"><span data-stu-id="cf160-156">When hosted in IIS, a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service is configured using a Web.config file instead of an app.config file as when hosted in a console application.</span></span>  
  
    -   <span data-ttu-id="cf160-157">Asegúrese de que el **httpGetEnabled** atributo de la \< **serviceMetaData**> elemento está establecido en `true` para que la **Asistente de consumición de servicio WCF de BizTalk**  puede consumir los metadatos para el servicio.</span><span class="sxs-lookup"><span data-stu-id="cf160-157">Make sure that the **httpGetEnabled** attribute of the \<**serviceMetaData**> element is set to `true` so that the **BizTalk WCF Service Consuming Wizard** can consume the metadata for the service.</span></span>  
  
    -   <span data-ttu-id="cf160-158">Asegúrese de que el **modo** atributo de la \< **seguridad**> elemento está establecido en **ninguno**.</span><span class="sxs-lookup"><span data-stu-id="cf160-158">Make sure that the **mode** attribute of the \<**security**> element is set to **None**.</span></span> <span data-ttu-id="cf160-159">Dado que este tutorial usa el **ninguno** modo de seguridad, la aplicación que hospeda este servicio debe configurarse para permitir el acceso anónimo de Web.</span><span class="sxs-lookup"><span data-stu-id="cf160-159">Because this walkthrough uses the **None** security mode, the Web application hosting this service must be configured to allow anonymous access.</span></span>  
  
6.  <span data-ttu-id="cf160-160">Dado que la **Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BasicHttpWcfServiceConsuming** ensamblado debe instalarse en la GAC, necesitará un archivo de clave de nombre seguro para completar el proceso de implementación.</span><span class="sxs-lookup"><span data-stu-id="cf160-160">Because the **Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BasicHttpWcfServiceConsuming** assembly must be installed in the GAC, it will need a strong name key file to complete the deployment process.</span></span> <span data-ttu-id="cf160-161">Haga clic en el **BasicHttpWcfServiceConsuming** del proyecto y, a continuación, haga clic en **propiedades**.</span><span class="sxs-lookup"><span data-stu-id="cf160-161">Right-click the **BasicHttpWcfServiceConsuming** project, and then click **Properties**.</span></span> <span data-ttu-id="cf160-162">En el **propiedades** página, haga clic en **firma**y seleccione **firmar el ensamblado**.</span><span class="sxs-lookup"><span data-stu-id="cf160-162">On the **Properties** page, click **Signing**, and select **Sign the assembly**.</span></span> <span data-ttu-id="cf160-163">Haga clic en la flecha hacia abajo en la **elegir un archivo de clave de nombre seguro** la lista desplegable, haga clic en  **\<nuevo >**y escriba `keyfile.snk` en el **nombre de archivo de clave** cuadro de texto .</span><span class="sxs-lookup"><span data-stu-id="cf160-163">Click the down arrow in the **Choose a strong name key file** drop-down list, click **\<New>**, and enter `keyfile.snk` in the **key file name** textbox.</span></span>  <span data-ttu-id="cf160-164">Desactive la opción **proteger mi archivo de clave con una contraseña**y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="cf160-164">Uncheck **Protect my key file with a password**, and then click **OK**.</span></span>  
  
7.  <span data-ttu-id="cf160-165">En el Explorador de soluciones, haga clic en **BasicHttpWcfServiceConsuming**y, a continuación, haga clic en **volver a generar**.</span><span class="sxs-lookup"><span data-stu-id="cf160-165">In Solution Explorer, right-click **BasicHttpWcfServiceConsuming**, and then click **Rebuild**.</span></span>  
  
8.  <span data-ttu-id="cf160-166">Mediante el Explorador de Windows, copie el contenido de **C:\WCFBasicHttpSendAdapter\BasicHttpWCFServiceConsuming** a la **C:\InetPub\wwwroot** carpeta.</span><span class="sxs-lookup"><span data-stu-id="cf160-166">Using Windows Explorer, copy the contents of **C:\WCFBasicHttpSendAdapter\BasicHttpWCFServiceConsuming** to the **C:\InetPub\wwwroot** folder.</span></span>  
  
9. <span data-ttu-id="cf160-167">Configure la aplicación web para que hospede el Servicio [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] de la siguiente forma:</span><span class="sxs-lookup"><span data-stu-id="cf160-167">Configure the Web application to host the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service as follows:</span></span>  
  
    1.  <span data-ttu-id="cf160-168">Haga clic en **iniciar**, seleccione **herramientas administrativas**y, a continuación, haga clic en **Internet Information Services (IIS) Manager**.</span><span class="sxs-lookup"><span data-stu-id="cf160-168">Click **Start**, point to **Administrator Tools**, and then click **Internet Information Services (IIS) Manager**.</span></span>  
  
    2.  <span data-ttu-id="cf160-169">Cree un grupo de aplicaciones en el que se va a ejecutar este servicio.</span><span class="sxs-lookup"><span data-stu-id="cf160-169">Create an application pool within which this service will run.</span></span> <span data-ttu-id="cf160-170">Haga clic en **grupos de aplicaciones**, haga clic en **Agregar grupo de aplicaciones...** , escriba un nombre para el grupo de aplicaciones y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="cf160-170">Right-click **Application Pools**, click **Add Application Pool…**, enter a name for the application pool, and then click **OK**.</span></span>  
  
    3.  <span data-ttu-id="cf160-171">Expanda **grupos de aplicaciones**, haga clic en el grupo de aplicaciones recién creado y, a continuación, seleccione **configuración avanzada**.</span><span class="sxs-lookup"><span data-stu-id="cf160-171">Expand **Application Pools**, right-click the application pool you just created, and then select **Advanced Settings**.</span></span> <span data-ttu-id="cf160-172">En **modelo de proceso** sección, especifique la cuenta que tiene acceso a la [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] bases de datos en el **identidad** campo.</span><span class="sxs-lookup"><span data-stu-id="cf160-172">Under **Process Model** section, enter the account which has access to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases under the **Identity** field.</span></span>  
  
    4.  <span data-ttu-id="cf160-173">Expanda **sitios**, expanda **sitio Web predeterminado**, haga clic en **BasicHttpWCFServiceConsuming**y, a continuación, haga clic en **convertir en aplicación**para crear una aplicación Web para este [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] servicio.</span><span class="sxs-lookup"><span data-stu-id="cf160-173">Expand **Sites**, expand **Default Web Site**, right-click **BasicHttpWCFServiceConsuming**, and then click **Convert to Application** to create a Web application for this [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  
  
    5.  <span data-ttu-id="cf160-174">En el **convertir en aplicación** cuadro de diálogo, haga clic en **seleccione** para seleccionar el grupo de aplicaciones creado anteriormente y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="cf160-174">In the **Convert to Application** dialog box, click **Select** to select the application pool created earlier, and then click **OK**.</span></span>  
  
    6.  <span data-ttu-id="cf160-175">En la vista de características, haga clic en el **autenticación** icono y asegúrese de que el **autenticación anónima** opción es **habilitado**.</span><span class="sxs-lookup"><span data-stu-id="cf160-175">In Features View, click the **Authentication** icon and ensure that the **Anonymous Authentication** option is **enabled**.</span></span> <span data-ttu-id="cf160-176">Esto es compatible con [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] servicios con el **ninguno** modo de seguridad.</span><span class="sxs-lookup"><span data-stu-id="cf160-176">This supports [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] services with the **None** security mode.</span></span>  
  
10. <span data-ttu-id="cf160-177">Pruebe el Servicio [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] publicado, de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="cf160-177">Test the published [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service as follows:</span></span>  
  
    1.  <span data-ttu-id="cf160-178">En el Administrador de IIS, expanda **sitios Web**y, a continuación, expanda **BasicHttpWCFServiceConsuming**.</span><span class="sxs-lookup"><span data-stu-id="cf160-178">In IIS Manager, expand **Web Sites**, and then expand **BasicHttpWCFServiceConsuming**.</span></span>  
  
    2.  <span data-ttu-id="cf160-179">En el Administrador de IIS, en el panel derecho, haga clic en **OrderProcess.svc**y, a continuación, haga clic en **examinar**.</span><span class="sxs-lookup"><span data-stu-id="cf160-179">In IIS Manager, in the right pane, right-click **OrderProcess.svc**, and then click **Browse**.</span></span> <span data-ttu-id="cf160-180">Se abrirá Internet Explorer para mostrar la **OrderProcessServiceType Service** página que indica que ha creado correctamente un ejecución [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] servicio.</span><span class="sxs-lookup"><span data-stu-id="cf160-180">This opens Internet Explorer to display the **OrderProcessServiceType Service** page that indicates you have successfully created a running [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="cf160-181">La página también incluye una dirección WSDL completa que puede copiar y usar con una herramienta de metadatos de servicio (svcutil.exe) para crear código de proxy y un archivo de configuración que puede usarse para desarrollar una aplicación cliente para el servicio.</span><span class="sxs-lookup"><span data-stu-id="cf160-181">The page also includes a full WSDL address that you can copy and use with the Service Metadata Tool (svcutil.exe) to create proxy code and a configuration file that can be used to develop a client application for the service.</span></span>  
  
    3.  <span data-ttu-id="cf160-182">Copie la dirección completa de WSDL en el Portapapeles del sistema.</span><span class="sxs-lookup"><span data-stu-id="cf160-182">Copy the full WSDL address to the system Clipboard.</span></span> <span data-ttu-id="cf160-183">No copie la **"svcutil.exe"** parte: **http://localhost/BasicHttpWcfServiceConsuming/OrderProcess.svc?wsdl**</span><span class="sxs-lookup"><span data-stu-id="cf160-183">Do not copy the **“svcutil.exe”** part: **http://localhost/BasicHttpWcfServiceConsuming/OrderProcess.svc?wsdl**</span></span>  
  
## <a name="add-the-schemas-and-types-for-the-wcf-basichttp-adapter-to-the-sample-biztalk-application"></a><span data-ttu-id="cf160-184">Agregar esquemas y tipos para el adaptador de WCF-BasicHttp a la aplicación de BizTalk de ejemplo</span><span class="sxs-lookup"><span data-stu-id="cf160-184">Add the schemas and types for the WCF-BasicHttp adapter to the sample BizTalk application</span></span>  
  
1.  <span data-ttu-id="cf160-185">Puesto que el adaptador llama al Servicio [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)], necesita información de los esquemas y tipos sobre cómo realizar esa llamada al servicio mediante los metadatos.</span><span class="sxs-lookup"><span data-stu-id="cf160-185">Since the adapter will call the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service it needs information from schemas and types about how to make that call to that service using the metadata.</span></span> <span data-ttu-id="cf160-186">**BizTalkApp** proporciona los artefactos para consumir el [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span><span class="sxs-lookup"><span data-stu-id="cf160-186">**BizTalkApp** provides the artifacts to consume the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="cf160-187">En [!INCLUDE[vs2010](../includes/vs2010-md.md)], en el Explorador de soluciones, haga clic en **BizTalkApp**, haga clic en **agregar**y, a continuación, haga clic en **agregar elementos generados**.</span><span class="sxs-lookup"><span data-stu-id="cf160-187">In [!INCLUDE[vs2010](../includes/vs2010-md.md)], in Solution Explorer, right-click **BizTalkApp**, click **Add**, and then click **Add Generated Items**.</span></span>  
  
2.  <span data-ttu-id="cf160-188">En el **agregar elementos generados** cuadro de diálogo, en la **plantillas** sección, seleccione **consumir servicio WCF**y, a continuación, haga clic en **agregar**.</span><span class="sxs-lookup"><span data-stu-id="cf160-188">In the **Add Generated Items** dialog box, in the **Templates** section, select **Consume WCF Service**, and then click **Add**.</span></span>  
  
3.  <span data-ttu-id="cf160-189">En el **éste es el Asistente para consumición de servicio de BizTalk WCF** página, haga clic en **siguiente**.</span><span class="sxs-lookup"><span data-stu-id="cf160-189">On the **Welcome to the BizTalk WCF Service Consuming Wizard** page, click **Next**.</span></span> <span data-ttu-id="cf160-190">Este asistente leerá los metadatos y creará esquemas y tipos.</span><span class="sxs-lookup"><span data-stu-id="cf160-190">This wizard will read the metadata and create schemas and types.</span></span>  
  
4.  <span data-ttu-id="cf160-191">En el **origen de metadatos** página, seleccione la **punto de conexión de intercambio de metadatos (MEX)** opción consuma los metadatos de la dirección URL que ha copiado en el Portapapeles en el procedimiento anterior y, a continuación, haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="cf160-191">On the **Metadata source** page, select the **Metadata Exchange (MEX) endpoint** option to consume metadata from the URL that you copied to the Clipboard in the previous procedure, and then click **Next**.</span></span>  
  
5.  <span data-ttu-id="cf160-192">En el **extremo de metadatos** , pegue la dirección WSDL completa que ha copiado en el procedimiento anterior para la **dirección de metadatos** lista desplegable y, a continuación, haga clic en **obtener** para obtener el documento de metadatos para el ejemplo [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] servicio.</span><span class="sxs-lookup"><span data-stu-id="cf160-192">On the **Metadata Endpoint** page, paste the full WSDL address that you copied in the previous procedure to the **Metadata Address** drop-down list, and then click **Get** to get the metadata document for the sample [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="cf160-193">Obtener los metadatos permite la **siguiente** botón.</span><span class="sxs-lookup"><span data-stu-id="cf160-193">Obtaining the metadata enables the **Next** button.</span></span> <span data-ttu-id="cf160-194">Para continuar, haga clic en **Siguiente** .</span><span class="sxs-lookup"><span data-stu-id="cf160-194">Click **Next** to continue.</span></span>  
  
6.  <span data-ttu-id="cf160-195">En el **Importar resumen de metadatos de servicio de WCF** página, revise la configuración.</span><span class="sxs-lookup"><span data-stu-id="cf160-195">On the **Import WCF Service Metadata Summary** page, review your settings.</span></span> <span data-ttu-id="cf160-196">Este cuadro de diálogo muestra los resúmenes de espacio de nombres, de XSD y de WSDL de los metadatos que van a importarse.</span><span class="sxs-lookup"><span data-stu-id="cf160-196">This dialog box shows the namespace, XSD, and WSDL summaries of the metadata to be imported.</span></span> <span data-ttu-id="cf160-197">También muestra dónde se escribirá orquestación (.odx), los enlaces (.xml) y los archivos de esquema (.xsd) durante el proceso de importación.</span><span class="sxs-lookup"><span data-stu-id="cf160-197">It also shows where orchestration (.odx), bindings (.xml), and schema (.xsd) files will be written during the import process.</span></span> <span data-ttu-id="cf160-198">Haga clic en **importación** para crear los artefactos de BizTalk y los tipos que se usará para consumir el ejemplo [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] servicio.</span><span class="sxs-lookup"><span data-stu-id="cf160-198">Click **Import** to create the BizTalk artifacts and types to be used for consuming the sample [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  
  
7.  <span data-ttu-id="cf160-199">En el **completar el Asistente para consumición de servicio de BizTalk WCF** página, haga clic en **finalizar**.</span><span class="sxs-lookup"><span data-stu-id="cf160-199">On the **Completing the BizTalk WCF Service Consuming Wizard** page, click **Finish**.</span></span>  
  
8.  <span data-ttu-id="cf160-200">En [!INCLUDE[vs2010](../includes/vs2010-md.md)], en el Explorador de soluciones, la **Asistente de consumición de servicio WCF de BizTalk** genera los siguientes archivos:</span><span class="sxs-lookup"><span data-stu-id="cf160-200">In [!INCLUDE[vs2010](../includes/vs2010-md.md)], in Solution Explorer, the **BizTalk WCF Service Consuming Wizard** generates the following files:</span></span>  
  
    -   <span data-ttu-id="cf160-201">Un archivo de orquestación **OrderProcessServiceType.odx**.</span><span class="sxs-lookup"><span data-stu-id="cf160-201">An orchestration file **OrderProcessServiceType.odx**.</span></span> <span data-ttu-id="cf160-202">No hay ninguna fase de flujo de trabajo en esta orquestación.</span><span class="sxs-lookup"><span data-stu-id="cf160-202">There are no workflow stages in this orchestration.</span></span> <span data-ttu-id="cf160-203">Sin embargo, puede agregarla y enlazarla a puertos lógicos para consumir el Servicio [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)].</span><span class="sxs-lookup"><span data-stu-id="cf160-203">However, you could add to it and bind it to logical ports to consume the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="cf160-204">Contiene los tipos importantes de BizTalk, tales como tipos de puerto y tipos de mensaje de varias partes, que se usan en este ejemplo.</span><span class="sxs-lookup"><span data-stu-id="cf160-204">It does contain the important BizTalk types such as port types and multipart message types, which are used in this sample.</span></span> <span data-ttu-id="cf160-205">Para ver esta información, haga doble clic en el **OrderProcessServiceType.odx** orquestación.</span><span class="sxs-lookup"><span data-stu-id="cf160-205">To view this information, double-click the **OrderProcessServiceType.odx** orchestration.</span></span> <span data-ttu-id="cf160-206">Haga clic en **vista**, haga clic en **otras ventanas**y haga clic en **Vista orquestación**.</span><span class="sxs-lookup"><span data-stu-id="cf160-206">Click **View**, click **Other Windows**, and click **Orchestration View**.</span></span> <span data-ttu-id="cf160-207">Expanda **tipos**, expanda **tipos de puerto**y, a continuación, expanda **IOrderProcess**.</span><span class="sxs-lookup"><span data-stu-id="cf160-207">Expand **Types**, expand **Port Types**, and then expand **IOrderProcess**.</span></span> <span data-ttu-id="cf160-208">Verá el **enviar** método.</span><span class="sxs-lookup"><span data-stu-id="cf160-208">You will see the **Submit** method.</span></span> <span data-ttu-id="cf160-209">Expanda ese método y verá el **OrderRequest** y **OrderResponse** tipos de puertos.</span><span class="sxs-lookup"><span data-stu-id="cf160-209">Expand that method and you will see the **OrderRequest** and **OrderResponse** port types.</span></span> <span data-ttu-id="cf160-210">Haga clic en cada tipo de puerto y ver sus **descripción** campos en el Explorador de propiedades y vea el WSDL diferentes mensajes de entrada y salida.</span><span class="sxs-lookup"><span data-stu-id="cf160-210">Click each port type and view their **Description** fields in the property browser and see the different WSDL input and output messages.</span></span> <span data-ttu-id="cf160-211">Haga clic en **tipos de mensaje de varias partes** y ver el **OrderRequest** y **OrderResponse** tipos de mensaje de varias partes.</span><span class="sxs-lookup"><span data-stu-id="cf160-211">Click **Multi-Part Message Types** and view the **OrderRequest** and **OrderResponse** multi-part message types.</span></span> <span data-ttu-id="cf160-212">Haga clic en sus **descripción** campos y ver el WSDL de mensajes de nombres para cada tipo de mensaje.</span><span class="sxs-lookup"><span data-stu-id="cf160-212">Click their **Description** fields and view the WDSL message names for each message type.</span></span>  
  
    -   <span data-ttu-id="cf160-213">Se generan dos archivos de esquema.</span><span class="sxs-lookup"><span data-stu-id="cf160-213">Two schema files are generated.</span></span> <span data-ttu-id="cf160-214">El primer archivo de esquema (**OrderProcessServiceType_biztalk_WCF_basichttpsendadapter_basichttpWCFserviceconsuming.xsd**) define los tipos de mensaje que el ejemplo [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] utiliza el servicio.</span><span class="sxs-lookup"><span data-stu-id="cf160-214">The first schema file (**OrderProcessServiceType_biztalk_WCF_basichttpsendadapter_basichttpWCFserviceconsuming.xsd**) defines the message types that the sample [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service uses.</span></span> <span data-ttu-id="cf160-215">Usa el **OrderID** campo ambos **OrderRequest** y **OrderResponse** llamadas.</span><span class="sxs-lookup"><span data-stu-id="cf160-215">It uses the **OrderID** field in both **OrderRequest** and **OrderResponse** calls.</span></span>  
  
    -   <span data-ttu-id="cf160-216">El segundo archivo de esquema (**OrderProcessServiceType_schemas_microsoft_com_2003_10_Serialization.xsd**) exportado por [DataContractSerializer](http://go.microsoft.com/fwlink/?LinkId=81722) para los tipos, elementos y atributos de la espacio de nombres, http://schemas.microsoft.com/2003/10/Serialization/.</span><span class="sxs-lookup"><span data-stu-id="cf160-216">The second schema file (**OrderProcessServiceType_schemas_microsoft_com_2003_10_Serialization.xsd**) is exported by [DataContractSerializer](http://go.microsoft.com/fwlink/?LinkId=81722) for the types, elements, and attributes from the namespace, http://schemas.microsoft.com/2003/10/Serialization/.</span></span>  
  
    -   <span data-ttu-id="cf160-217">Se generan dos archivos de enlace, que se usará más adelante para crear la aplicación de BizTalk: **OrderProcessServiceType.BindingInfo.xml** y **OrderProcessServiceType_Custom.BindingInfo.xml**.</span><span class="sxs-lookup"><span data-stu-id="cf160-217">Two binding files are generated, which will be used later to create the BizTalk application: **OrderProcessServiceType.BindingInfo.xml** and **OrderProcessServiceType_Custom.BindingInfo.xml**.</span></span> <span data-ttu-id="cf160-218">En general, usará normalmente el archivo de enlace no personalizado.</span><span class="sxs-lookup"><span data-stu-id="cf160-218">In the general case you will typically use the non-custom binding file.</span></span> <span data-ttu-id="cf160-219">Sin embargo, en raras situaciones en las que tenga un elemento de enlace personalizado, use el archivo de enlace personalizado.</span><span class="sxs-lookup"><span data-stu-id="cf160-219">But in some rare situations where you have a custom binding element use the custom binding file.</span></span> <span data-ttu-id="cf160-220">El elemento de enlace personalizado crea puertos de envío para las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="cf160-220">The custom binding element creates send ports for the applications.</span></span> <span data-ttu-id="cf160-221">Haga doble clic en el **OrderProcessServiceType.BindingInfo.xml** de archivos y busque la **puertoEnvío** línea de definición y revise el puerto de envío que se crearán al importar este enlace de archivos en [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="cf160-221">Double-click the **OrderProcessServiceType.BindingInfo.xml** file and search for the **SendPort** definition line, and review the send port that will be created when you import this binding file into [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]:</span></span>  
  
        ```  
        <SendPort Name="WCFSendPort_OrderProcessServiceType_ServiceEndpoint" …  >  
        ```  
  
    -   <span data-ttu-id="cf160-222">Estos archivos se usan para que los puertos de envío que usan el adaptador de [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] consuman el Servicio [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] de ejemplo descrito en los metadatos.</span><span class="sxs-lookup"><span data-stu-id="cf160-222">These files are used for the send port using the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] adapter to consume the sample [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service described in the metadata.</span></span>  
  
## <a name="deploy-the-sample-biztalk-solution-biztalkapp"></a><span data-ttu-id="cf160-223">Implementar la solución de BizTalk de ejemplo, BizTalkApp</span><span class="sxs-lookup"><span data-stu-id="cf160-223">Deploy the sample BizTalk solution, BizTalkApp</span></span>  
  
1.  <span data-ttu-id="cf160-224">Implemente la aplicación [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] de la siguiente forma:</span><span class="sxs-lookup"><span data-stu-id="cf160-224">Deploy the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application as follows:</span></span>  
  
    1.  <span data-ttu-id="cf160-225">En [!INCLUDE[vs2010](../includes/vs2010-md.md)], en el Explorador de soluciones, haga clic en **BizTalkApp**y, a continuación, haga clic en **propiedades** .</span><span class="sxs-lookup"><span data-stu-id="cf160-225">In [!INCLUDE[vs2010](../includes/vs2010-md.md)], in Solution Explorer, right-click **BizTalkApp**, and then click **Properties** .</span></span>  
  
    2.  <span data-ttu-id="cf160-226">En el **Diseñador de proyectos** ventana, haga clic en **implementación** ficha y, a continuación, cambie la **Server** propiedad si utiliza un servidor de base de datos diferente para el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Base de datos de administración.</span><span class="sxs-lookup"><span data-stu-id="cf160-226">In the **Project Designer** window, click **Deployment** tab, and then change the **Server** property if you use a different database server for the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Management database.</span></span> <span data-ttu-id="cf160-227">Asegúrese de que el nombre de aplicación es **WCFBasicHttpSendAdapter**.</span><span class="sxs-lookup"><span data-stu-id="cf160-227">Ensure the application name is **WCFBasicHttpSendAdapter**.</span></span>  
  
    3.  <span data-ttu-id="cf160-228">En [!INCLUDE[vs2010](../includes/vs2010-md.md)], en el Explorador de soluciones, haga clic en **BizTalkApp**y, a continuación, haga clic en **volver a generar**.</span><span class="sxs-lookup"><span data-stu-id="cf160-228">In [!INCLUDE[vs2010](../includes/vs2010-md.md)], in Solution Explorer, right-click **BizTalkApp**, and then click **Rebuild**.</span></span>  
  
    4.  <span data-ttu-id="cf160-229">En [!INCLUDE[vs2010](../includes/vs2010-md.md)], en el Explorador de soluciones, haga clic en **BizTalkApp**y, a continuación, haga clic en **implementar**.</span><span class="sxs-lookup"><span data-stu-id="cf160-229">In [!INCLUDE[vs2010](../includes/vs2010-md.md)], in Solution Explorer, right-click **BizTalkApp**, and then click **Deploy**.</span></span>  <span data-ttu-id="cf160-230">Esto implementará el ensamblado Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BizTalkApp en la GAC y los artefactos a la [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] aplicación denominada **WCFBasicHttpSendAdapter**.</span><span class="sxs-lookup"><span data-stu-id="cf160-230">This deploys the Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BizTalkApp assembly to the GAC, and the artifacts to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application named **WCFBasicHttpSendAdapter**.</span></span>  
  
2.  <span data-ttu-id="cf160-231">Configure un puerto de envío WCF-BasicHttp en la aplicación de BizTalk de la siguiente forma:</span><span class="sxs-lookup"><span data-stu-id="cf160-231">Configure a WCF-BasicHttp send port in the BizTalk application as follows:</span></span>  
  
    1.  <span data-ttu-id="cf160-232">Haga clic en **iniciar**, seleccione **todos los programas**, seleccione [!INCLUDE[btsBizTalkServerStartMenuItemui](../includes/btsbiztalkserverstartmenuitemui-md.md)]y, a continuación, haga clic en **administración de BizTalk Server**.</span><span class="sxs-lookup"><span data-stu-id="cf160-232">Click **Start**, point to **All Programs**, point to [!INCLUDE[btsBizTalkServerStartMenuItemui](../includes/btsbiztalkserverstartmenuitemui-md.md)], and then click **BizTalk Server Administration**.</span></span>  
  
    2.  <span data-ttu-id="cf160-233">En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] administración de la consola, expanda **grupo de BizTalk**, expanda **aplicaciones**, haga clic en **WCFBasicHttpSendAdapter**, seleccione **Importación**y, a continuación, haga clic en **enlaces**.</span><span class="sxs-lookup"><span data-stu-id="cf160-233">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **BizTalk Group**, expand **Applications**, right-click **WCFBasicHttpSendAdapter**, point to **Import**, and then click **Bindings**.</span></span>  
  
    3.  <span data-ttu-id="cf160-234">En el **importar enlaces** cuadro de diálogo, vaya a la **C:\WCFBasicHttpSendAdapter\BizTalkApp** carpeta, seleccione **OrderProcessServiceType.BindingInfo.xml**y, a continuación, haga clic en **Abiertos**.</span><span class="sxs-lookup"><span data-stu-id="cf160-234">In the **Import Bindings** dialog box, go to the **C:\WCFBasicHttpSendAdapter\BizTalkApp** folder, select **OrderProcessServiceType.BindingInfo.xml**, and then click **Open**.</span></span> <span data-ttu-id="cf160-235">Este es uno de los archivos de enlace creados por la **Asistente de consumición de servicio WCF de BizTalk** previamente.</span><span class="sxs-lookup"><span data-stu-id="cf160-235">This is one of the binding files created by the **BizTalk WCF Service Consuming Wizard** previously.</span></span> <span data-ttu-id="cf160-236">Esto crea la **WCFSendPort_OrderProcessServiceType_ServiceEndpoint** puerto de envío.</span><span class="sxs-lookup"><span data-stu-id="cf160-236">This creates the **WCFSendPort_OrderProcessServiceType_ServiceEndpoint** send port.</span></span>  
  
    4.  <span data-ttu-id="cf160-237">En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] administración de la consola, expanda **WCFBasicHttpSendAdapter**y, a continuación, haga clic en **puertos de envío**.</span><span class="sxs-lookup"><span data-stu-id="cf160-237">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **WCFBasicHttpSendAdapter**, and then click **Send Ports**.</span></span>  
  
    5.  <span data-ttu-id="cf160-238">En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] consola de administración, en el panel derecho, haga doble clic en **WCFSendPort_OrderProcessServiceType_ServiceEndpoint**, que se creó mediante la importación del archivo de enlace OrderProcessServiceType.BindingInfo.xml.</span><span class="sxs-lookup"><span data-stu-id="cf160-238">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, in the right pane, double-click **WCFSendPort_OrderProcessServiceType_ServiceEndpoint**, which was created by importing the binding file OrderProcessServiceType.BindingInfo.xml.</span></span> <span data-ttu-id="cf160-239">Se abrirá la **propiedades de puerto de envío** cuadro de diálogo.</span><span class="sxs-lookup"><span data-stu-id="cf160-239">This brings up the **Send Port Properties** dialog box.</span></span>  
  
    6.  <span data-ttu-id="cf160-240">En el **propiedades de puerto de envío** cuadro de diálogo, haga clic en **configurar**.</span><span class="sxs-lookup"><span data-stu-id="cf160-240">In the **Send Port Properties** dialog box, click **Configure**.</span></span>  
  
    7.  <span data-ttu-id="cf160-241">En el **General** ficha revisión el **dirección (URI)** campo de **http://localhost/BasicHttpWcfServiceConsuming/OrderProcess.svc**.</span><span class="sxs-lookup"><span data-stu-id="cf160-241">On the **General** tab review the **Address(URI)** field of **http://localhost/BasicHttpWcfServiceConsuming/OrderProcess.svc**.</span></span> <span data-ttu-id="cf160-242">Esta es la dirección del Servicio [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] hospedado en IIS al que llamara el adaptador de WCF-BasicHttp.</span><span class="sxs-lookup"><span data-stu-id="cf160-242">This is the address of the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service hosted in IIS that the WCF-BasicHttp adapter will call.</span></span>  
  
    8.  <span data-ttu-id="cf160-243">Revise el contenido de la **encabezado de acción SOAP/acción** cuadro de texto:</span><span class="sxs-lookup"><span data-stu-id="cf160-243">Review the contents of the **SOAP Action header/Action** text box:</span></span>  
  
        ```  
        <BtsActionMapping xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">  
          <Operation Name="Submit" Action="http://Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BasicHttpWcfServiceConsuming/IOrderProcess/Submit" />  
        </BtsActionMapping>  
        ```  
  
         <span data-ttu-id="cf160-244">Este campo indica la intención del mensaje de solicitud SOAP HTTP saliente.</span><span class="sxs-lookup"><span data-stu-id="cf160-244">This field indicates the intent of the outgoing SOAP HTTP request message.</span></span> <span data-ttu-id="cf160-245">Aquí sirve para llamar a la operación de envío en la interfaz IOrderProcess del espacio de nombres Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BasicHttpWcfServiceConsuming.</span><span class="sxs-lookup"><span data-stu-id="cf160-245">Here it is to call the Submit operation on the IOrderProcess interface from the Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BasicHttpWcfServiceConsuming namespace.</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="cf160-246">El archivo de enlace que el **Asistente de consumición de servicio WCF de BizTalk** genera usa la acción de asignación de formato para la **StaticAction** propiedad.</span><span class="sxs-lookup"><span data-stu-id="cf160-246">The binding file that the **BizTalk WCF Service Consuming Wizard** generates uses the action mapping format for the **StaticAction** property.</span></span> <span data-ttu-id="cf160-247">Cuando use enrutamiento por contenidos para adaptadores para enviar mensajes a los servicios WCF de envío de WCF, debe establecer el **BTS. Operación** propiedad en componentes de canalización para el formato de asignación de acciones como el campo que se usará para el enrutamiento por contenidos.</span><span class="sxs-lookup"><span data-stu-id="cf160-247">When using content-based routing for the WCF send adapters to send messages to WCF services, you need to set the **BTS.Operation** property in pipeline components for the action mapping format as the field to be used for content-based routing.</span></span> <span data-ttu-id="cf160-248">De forma alternativa, puede usar el formato de acción única para el enrutamiento por contenidos.</span><span class="sxs-lookup"><span data-stu-id="cf160-248">Alternatively, you can use the single action format for content-based routing.</span></span> <span data-ttu-id="cf160-249">En este tutorial, va a usar el formato de acción única.</span><span class="sxs-lookup"><span data-stu-id="cf160-249">In this walkthrough, you use the single action format.</span></span> <span data-ttu-id="cf160-250">Para obtener más información sobre el formato de acción única y el formato de asignación de acciones, vea la **cuadro de diálogo de propiedades de transporte de WCF-BasicHttp, envío, General** ficha [!INCLUDE[ui-guidance-developers-reference](../includes/ui-guidance-developers-reference.md)].</span><span class="sxs-lookup"><span data-stu-id="cf160-250">For more information about the single action format and the action mapping format, see the **WCF-BasicHttp Transport Properties Dialog Box, Send, General** tab [!INCLUDE[ui-guidance-developers-reference](../includes/ui-guidance-developers-reference.md)].</span></span>  
  
    9. <span data-ttu-id="cf160-251">Haga clic en **Aceptar** dos veces para volver a la [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] consola de administración.</span><span class="sxs-lookup"><span data-stu-id="cf160-251">Click **OK** twice to return to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span>  
  
3.  <span data-ttu-id="cf160-252">Cree un puerto de recepción estático unidireccional y una ubicación de recepción ARCHIVOS.</span><span class="sxs-lookup"><span data-stu-id="cf160-252">Create a one-way static receive port and a FILE receive location.</span></span> <span data-ttu-id="cf160-253">Un puerto de recepción es un contenedor lógico para una o más ubicaciones de recepción.</span><span class="sxs-lookup"><span data-stu-id="cf160-253">A receive port is a logical container for one or more receive locations.</span></span> <span data-ttu-id="cf160-254">Aquí es donde se colocará un mensaje de [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] de ejemplo que el adaptador de archivo recogerá y enviará al Servicio [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)].</span><span class="sxs-lookup"><span data-stu-id="cf160-254">This is where you will drop a sample [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] message that will be picked up by the File adapter, and then sent to the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  
  
    1.  <span data-ttu-id="cf160-255">En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] administración de la consola, expanda **WCFBasicHttpSendAdapter**, haga clic en **puertos de recepción**, seleccione **New**y, a continuación, haga clic en  **Unidireccional puerto de recepción**.</span><span class="sxs-lookup"><span data-stu-id="cf160-255">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **WCFBasicHttpSendAdapter**, right-click **Receive Ports**, point to **New**, and then click **One-way Receive Port**.</span></span>  
  
    2.  <span data-ttu-id="cf160-256">En el **propiedades de puerto de recepción** cuadro de diálogo, en la **nombre** cuadro de texto, escriba `WCFBasicSendAdapter.ReceivePurchaseOrder`y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="cf160-256">In the **Receive Port Properties** dialog box, in the **Name** text box, type `WCFBasicSendAdapter.ReceivePurchaseOrder`, and then click **OK**.</span></span>  
  
    3.  <span data-ttu-id="cf160-257">En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] consola de administración, haga clic en **WCFBasicHttpSendAdapter.ReceivePurchaseOrder**, seleccione **New**y, a continuación, haga clic en **ubicación de recepción** .</span><span class="sxs-lookup"><span data-stu-id="cf160-257">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, right-click **WCFBasicHttpSendAdapter.ReceivePurchaseOrder**, point to **New**, and then click **Receive Location**.</span></span>  
  
    4.  <span data-ttu-id="cf160-258">En el **propiedades de la ubicación de recepción** cuadro de diálogo, en la **nombre** cuadro de texto, escriba `WCFBasicSendAdapter.ReceivePurchaseOrder.FILE`.</span><span class="sxs-lookup"><span data-stu-id="cf160-258">In the **Receive Location Properties** dialog box, in the **Name** text box, type `WCFBasicSendAdapter.ReceivePurchaseOrder.FILE`.</span></span>  
  
    5.  <span data-ttu-id="cf160-259">En el **propiedades de la ubicación de recepción** cuadro de diálogo, en el **transporte** junto a la sección **tipo**, seleccione **archivo** en la lista desplegable, y, a continuación, haga clic en **configurar**.</span><span class="sxs-lookup"><span data-stu-id="cf160-259">In the **Receive Location Properties** dialog box, in the **Transport** section next to **Type**, select **FILE** from the drop-down list, and then click **Configure**.</span></span>  
  
    6.  <span data-ttu-id="cf160-260">En el **propiedades de transporte de archivo** cuadro de diálogo la **General** ficha la **carpeta recepción** cuadro de texto, escriba `C:\WCFBasicHttpSendAdapter\OrderRequestIn`y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="cf160-260">In the **FILE Transport Properties** dialog box, on the **General**  tab, in the **Receive folder** text box, type `C:\WCFBasicHttpSendAdapter\OrderRequestIn`, and then click **OK**.</span></span>  
  
    7.  <span data-ttu-id="cf160-261">En el **propiedades de la ubicación de recepción** cuadro de diálogo, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="cf160-261">In the **Receive Location Properties** dialog box, click **OK**.</span></span>  
  
4.  <span data-ttu-id="cf160-262">Cree un filtro para enrutar mensajes al puerto de envío WCF-BasicHttp desde la ubicación de recepción de archivo que ha creado en el paso anterior.</span><span class="sxs-lookup"><span data-stu-id="cf160-262">Create a filter to route messages to the WCF-BasicHttp send port from the FILE receive location that you created in the previous step.</span></span> <span data-ttu-id="cf160-263">Un filtro asociado con un puerto actúa como una cláusula "where" de SQL, de modo que si evalúa el mensaje como true se proporcionará a ese puerto.</span><span class="sxs-lookup"><span data-stu-id="cf160-263">A filter associated with a port acts like a SQL “where” clause in that if it evaluates to true the message will be given to that port.</span></span>  
  
    1.  <span data-ttu-id="cf160-264">En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] administración de la consola, expanda **WCFBasicHttpSendAdapter**, haga clic en **puertos de envío**y, a continuación, haga doble clic en **WCFSendPort_OrderProcessServiceType_ ServiceEndpoint**.</span><span class="sxs-lookup"><span data-stu-id="cf160-264">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **WCFBasicHttpSendAdapter**, click **Send Ports**, and then double-click **WCFSendPort_OrderProcessServiceType_ServiceEndpoint**.</span></span>  
  
    2.  <span data-ttu-id="cf160-265">En el **propiedades de puerto de envío** cuadro de diálogo, en la **filtros** ficha, seleccione **BTS. ReceivePortName** en el **propiedad** , escriba `WCFBasicSendAdapter.ReceivePurchaseOrder` en el **valor** campo y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="cf160-265">In the **Send Port Properties** dialog box, on the **Filters** tab, select **BTS.ReceivePortName** in the **Property** field, type `WCFBasicSendAdapter.ReceivePurchaseOrder` in the **Value** field, and then click **OK**.</span></span> <span data-ttu-id="cf160-266">Esta expresión de filtro enruta los mensajes entrantes del puerto de recepción WCFBasicSendAdapter.ReceivePurchaseOrder hasta este puerto de envío WCF-BasicHttp.</span><span class="sxs-lookup"><span data-stu-id="cf160-266">This filter expression routes incoming messages from the WCFBasicSendAdapter.ReceivePurchaseOrder receive port to this WCF-BasicHttp send port.</span></span>  
  
5.  <span data-ttu-id="cf160-267">Cree dos puertos de envío de archivo para la aplicación de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="cf160-267">Create two FILE send ports for the sample application.</span></span> <span data-ttu-id="cf160-268">El primer puerto de envío envía mensajes de respuesta de salida al puerto de archivo del Servicio [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)].</span><span class="sxs-lookup"><span data-stu-id="cf160-268">The first send port sends output response messages to the FILE port from the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="cf160-269">El segundo puerto de envío se usa para controlar los mensajes con errores enviados desde el Servicio [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] y destinados al cliente.</span><span class="sxs-lookup"><span data-stu-id="cf160-269">The second send port is used to handle fault messages sent from the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service destined for the client.</span></span>  
  
    1.  <span data-ttu-id="cf160-270">En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] administración de la consola, expanda **WCFBasicHttpSendAdapter**, haga clic en **puertos de envío**, seleccione **New**y, a continuación, haga clic en  **Puerto de envío unidireccional estático**.</span><span class="sxs-lookup"><span data-stu-id="cf160-270">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **WCFBasicHttpSendAdapter**, right-click **Send Ports**, point to **New**, and then click **Static One-way Send Port**.</span></span>  
  
    2.  <span data-ttu-id="cf160-271">En el **propiedades de puerto de envío** cuadro de diálogo, en la **nombre** cuadro de texto, escriba `WCFBasicSendAdapter.SendPurchaseOrder.FILE`.</span><span class="sxs-lookup"><span data-stu-id="cf160-271">In the **Send Port Properties** dialog box, in the **Name** text box, type `WCFBasicSendAdapter.SendPurchaseOrder.FILE`.</span></span>  
  
    3.  <span data-ttu-id="cf160-272">En el **propiedades de puerto de envío** cuadro de diálogo, en la **transporte** sección junto a tipo, seleccione **archivo** desde la lista desplegable y, a continuación, haga clic en **configurar** .</span><span class="sxs-lookup"><span data-stu-id="cf160-272">In the **Send Port Properties** dialog box, in the **Transport** section next to Type, select **FILE** from the drop-down list, and then click **Configure**.</span></span>  
  
    4.  <span data-ttu-id="cf160-273">En el **propiedades de transporte de archivo** cuadro de diálogo, en la **General** ficha la **carpeta de destino** cuadro de texto, escriba `C:\WCFBasicHttpSendAdapter\OrderResponseOut`y, a continuación, haga clic en **Aceptar** .</span><span class="sxs-lookup"><span data-stu-id="cf160-273">In the **FILE Transport Properties** dialog box, on the **General** tab, in the **Destination folder** text box, type `C:\WCFBasicHttpSendAdapter\OrderResponseOut`, and then click **OK**.</span></span>  
  
    5.  <span data-ttu-id="cf160-274">En el **propiedades de puerto de envío** cuadro de diálogo, en la **filtros** ficha, seleccione **BTS. MessageType** en el **propiedad** , escriba `http://Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BasicHttpWCFServiceConsuming#OrderResponse` en el **valor** campo para especificar el tipo de mensaje de respuesta de la muestra [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] servicio, y a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="cf160-274">In the **Send Port Properties** dialog box, on the **Filters** tab, select **BTS.MessageType** in the **Property** field, type `http://Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BasicHttpWCFServiceConsuming#OrderResponse` in the **Value** field to specify the response message type from the sample [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service, and then click **OK**.</span></span> <span data-ttu-id="cf160-275">Esta expresión de filtro enruta los mensaje de respuesta del Servicio [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] de ejemplo para este puerto de envío de archivo.</span><span class="sxs-lookup"><span data-stu-id="cf160-275">This filter expression routes response messages from the sample [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service to this FILE send port.</span></span> <span data-ttu-id="cf160-276">El puerto de envío se suscribe a mensajes de tipo OrderResponse mediante la especificación de ese tipo en la propiedad de filtro.</span><span class="sxs-lookup"><span data-stu-id="cf160-276">The send port subscribes to messages of the OrderResponse type by specifying that type in the filter property.</span></span> <span data-ttu-id="cf160-277">Éste es el tipo de mensaje del mensaje de respuesta del Servicio [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)].</span><span class="sxs-lookup"><span data-stu-id="cf160-277">This is the message type of the response message from the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  
  
    6.  <span data-ttu-id="cf160-278">En el **propiedades de puerto de envío** cuadro de diálogo, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="cf160-278">In the **Send Port Properties** dialog box, click **OK**.</span></span>  
  
    7.  <span data-ttu-id="cf160-279">En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] administración de la consola, expanda **WCFBasicHttpSendAdapter**, haga clic en **puertos de envío**, seleccione **New**y, a continuación, haga clic en  **Puerto de envío unidireccional estático**.</span><span class="sxs-lookup"><span data-stu-id="cf160-279">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **WCFBasicHttpSendAdapter**, right-click **Send Ports**, point to **New**, and then click **Static One-way Send Port**.</span></span>  
  
    8.  <span data-ttu-id="cf160-280">En el **propiedades de puerto de envío** cuadro de diálogo, en la **nombre** cuadro de texto, escriba `WCFAdapterErrorSend.FILE`.</span><span class="sxs-lookup"><span data-stu-id="cf160-280">In the **Send Port Properties** dialog box, in the **Name** text box, type `WCFAdapterErrorSend.FILE`.</span></span>  
  
    9. <span data-ttu-id="cf160-281">En el **propiedades de puerto de envío** cuadro de diálogo, en la **transporte** junto a la sección **tipo**, seleccione **archivo** en la lista desplegable y, a continuación, Haga clic en **configurar**.</span><span class="sxs-lookup"><span data-stu-id="cf160-281">In the **Send Port Properties** dialog box, in the **Transport** section next to **Type**, select **FILE** from the drop-down list, and then click **Configure**.</span></span>  
  
    10. <span data-ttu-id="cf160-282">En el **propiedades de transporte de archivo** cuadro de diálogo, en la **General** ficha la **carpeta de destino** cuadro de texto, escriba `C:\WCFBasicHttpSendAdapter\WCFAdapterErrorOut\`y, a continuación, haga clic en **Aceptar** .</span><span class="sxs-lookup"><span data-stu-id="cf160-282">In the **FILE Transport Properties** dialog box, on the **General** tab, in the **Destination folder** text box, type `C:\WCFBasicHttpSendAdapter\WCFAdapterErrorOut\`, and then click **OK**.</span></span>  
  
    11. <span data-ttu-id="cf160-283">En el **propiedades de puerto de envío** cuadro de diálogo, en la **filtros** ficha, seleccione **WCF. IsFault** en el **propiedad** , escriba `True` en el **valor** campo y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="cf160-283">In the **Send Port Properties** dialog box, on the **Filters** tab, select **WCF.IsFault** in the **Property** field, type `True` in the **Value** field, and then click **OK**.</span></span> <span data-ttu-id="cf160-284">Dentro de una aplicación se puede detectar una excepción o error activando el **WCF. IsFault** propiedad del mensaje que se envía de vuelta al llamador.</span><span class="sxs-lookup"><span data-stu-id="cf160-284">Within an application an exception or fault can be detected by checking the **WCF.IsFault** property of the message sent back to the caller.</span></span> <span data-ttu-id="cf160-285">Esta propiedad se establecerá en **True** si el mensaje que se envía es un mensaje de error SOAP.</span><span class="sxs-lookup"><span data-stu-id="cf160-285">This property will be set to **True** if the message being sent is a SOAP fault message.</span></span> <span data-ttu-id="cf160-286">Esta expresión de filtro enruta los mensaje con errores del Servicio [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] de ejemplo para este puerto de envío de archivo.</span><span class="sxs-lookup"><span data-stu-id="cf160-286">This filter expression routes fault messages from the sample [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service to this FILE send port.</span></span>  
  
6.  <span data-ttu-id="cf160-287">Especifique el nombre de host y los enlaces de la aplicación de ejemplo. Para ello:</span><span class="sxs-lookup"><span data-stu-id="cf160-287">Specify the host name and bindings for the sample application as follows:</span></span>  
  
     <span data-ttu-id="cf160-288">En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] administración de la consola, expanda **WCFBasicHttpSendAdapter**, expanda **orquestaciones**, haga clic en el  **Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BizTalkApp.OrderProcessServiceTypeClient** orquestación, haga clic en **propiedades**, haga clic en **enlaces**, establezca **Host** a **BizTalkServerApplication**y, a continuación, haga clic en **Aceptar** para guardar la configuración.</span><span class="sxs-lookup"><span data-stu-id="cf160-288">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **WCFBasicHttpSendAdapter**, expand **Orchestrations**, right-click the **Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BizTalkApp.OrderProcessServiceTypeClient** orchestration, click **Properties**, click **Bindings**, set **Host** to **BizTalkServerApplication**, and then click **OK** to save the configuration.</span></span>  
  
## <a name="test-the-sample-solution-with-the-wcf-basichttp-send-adapter"></a><span data-ttu-id="cf160-289">Adaptador de envío de prueba de la solución de ejemplo con WCF-BasicHttp</span><span class="sxs-lookup"><span data-stu-id="cf160-289">Test the sample solution with the WCF-BasicHttp send adapter</span></span>  
  
1.  <span data-ttu-id="cf160-290">En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] consola de administración, haga clic en **WCFBasicHttpSendAdapter**y, a continuación, haga clic en **iniciar**.</span><span class="sxs-lookup"><span data-stu-id="cf160-290">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, right-click **WCFBasicHttpSendAdapter**, and then click **Start**.</span></span>  
  
2.  <span data-ttu-id="cf160-291">En el **iniciar** cuadro de diálogo, haga clic en **iniciar**.</span><span class="sxs-lookup"><span data-stu-id="cf160-291">In the **Start** dialog box, click **Start**.</span></span>  
  
3.  <span data-ttu-id="cf160-292">En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] administración de la consola, expanda **configuración de plataforma**, expanda **instancias de Host**, haga clic en **BizTalkServerApplication** u otro procede de la instancia de host y, a continuación, haga clic en **reiniciar**.</span><span class="sxs-lookup"><span data-stu-id="cf160-292">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **Platform Settings**, expand **Host Instances**, right-click **BizTalkServerApplication** or another appropriate host instance, and then click **Restart**.</span></span>  
  
4.  <span data-ttu-id="cf160-293">Abra un símbolo del sistema, escriba **iisreset** para reciclar IIS y sus servicios dependientes y, a continuación, presione ENTRAR.</span><span class="sxs-lookup"><span data-stu-id="cf160-293">Open a command prompt, type **iisreset** to recycle IIS and its dependent services, and then press ENTER.</span></span>  
  
5.  <span data-ttu-id="cf160-294">En el símbolo del sistema, copie **C:\WCFBasicHttpSendAdapter\TestData\WCFBasicSendAdapter.OrderRequest.Sample.xml** a la **C:\WCFBasicHttpSendAdapter\OrderRequestIn** carpeta.</span><span class="sxs-lookup"><span data-stu-id="cf160-294">At the command prompt, copy **C:\WCFBasicHttpSendAdapter\TestData\WCFBasicSendAdapter.OrderRequest.Sample.xml** to the **C:\WCFBasicHttpSendAdapter\OrderRequestIn** folder.</span></span> <span data-ttu-id="cf160-295">Este mensaje se enruta a bidireccional **WcfSendPort_OrderProcessServiceType_ServiceEndpoint** puerto de envío de petición-respuesta estático.</span><span class="sxs-lookup"><span data-stu-id="cf160-295">This message is routed to the two-way **WcfSendPort_OrderProcessServiceType_ServiceEndpoint** static Solicit-Response send port.</span></span>  <span data-ttu-id="cf160-296">El lado de envío de este bidireccional llamadas del puerto de envío **enviar** método en el [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] servicio hospedado en IIS.</span><span class="sxs-lookup"><span data-stu-id="cf160-296">The send side of this two-way send port calls **Submit** method on the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service hosted in IIS.</span></span> <span data-ttu-id="cf160-297">El resultado se devuelve al puerto de respuesta de la **WcfSendPort_OrderProcessServiceType_ServiceEndpoint** puerto de envío.</span><span class="sxs-lookup"><span data-stu-id="cf160-297">The result is returned to the response port of the **WcfSendPort_OrderProcessServiceType_ServiceEndpoint** send port.</span></span>  <span data-ttu-id="cf160-298">El **WCFBasicSendAdapter.SendPurchaseOrder.FILE** puerto de envío tiene una suscripción que se desencadenará cuando el tipo del mensaje es **http:// Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BasicHttpWCFServiceConsuming#OrderResponse**. Obtendrá el mensaje procesado correctamente y escribirlo en el **C:\WCFBasicHttpSendAdapter\OrderResponseOut** carpeta.</span><span class="sxs-lookup"><span data-stu-id="cf160-298">The **WCFBasicSendAdapter.SendPurchaseOrder.FILE** send port has a subscription that will be triggered when the type of the message is **http://Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BasicHttpWCFServiceConsuming#OrderResponse**.It will get the successfully processed message and write it out to the **C:\WCFBasicHttpSendAdapter\OrderResponseOut** folder.</span></span>  
  
6.  <span data-ttu-id="cf160-299">Compruebe el **C:\WCFBasicHttpSendAdapter\OrderResponseOut** carpeta para un mensaje de respuesta de la [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] servicio.</span><span class="sxs-lookup"><span data-stu-id="cf160-299">Check the **C:\WCFBasicHttpSendAdapter\OrderResponseOut** folder for a response message from the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  
  
7.  <span data-ttu-id="cf160-300">En el símbolo del sistema, **C:\WCFBasicHttpSendAdapter\TestData\WCFBasicSendAdapter.OrderRequest.Invalid.xml** a la **C:\WCFBasicHttpSendAdapter\OrderRequestIn** carpeta.</span><span class="sxs-lookup"><span data-stu-id="cf160-300">At the command prompt, **C:\WCFBasicHttpSendAdapter\TestData\WCFBasicSendAdapter.OrderRequest.Invalid.xml** to the **C:\WCFBasicHttpSendAdapter\OrderRequestIn** folder.</span></span> <span data-ttu-id="cf160-301">Este mensaje contiene un espacio de nombres no válido, por lo que el Servicio [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] devuelve un mensaje de error.</span><span class="sxs-lookup"><span data-stu-id="cf160-301">This message contains an invalid namespace so that the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service returns a fault message.</span></span>  
  
8.  <span data-ttu-id="cf160-302">Compruebe el **C:\WCFBasicHttpSendAdapter\WCFAdapterErrorOut** carpeta de un archivo XML que contiene el mensaje de error desde el [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span><span class="sxs-lookup"><span data-stu-id="cf160-302">Check the **C:\WCFBasicHttpSendAdapter\WCFAdapterErrorOut** folder for an XML file containing the fault message from the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="cf160-303">Mire el \< **faultstring**> campo que muestra la causa del mensaje de error como un cuerpo de mensaje no válido.</span><span class="sxs-lookup"><span data-stu-id="cf160-303">Look at the \<**faultstring**> field showing the cause of the fault message to be an invalid message body.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="cf160-304">Vea también</span><span class="sxs-lookup"><span data-stu-id="cf160-304">See Also</span></span>  
 <span data-ttu-id="cf160-305">[Tutorial: Publicar servicios WCF con el adaptador WCF-BasicHttp](../core/walkthrough-publishing-wcf-services-with-the-wcf-basichttp-adapter.md) </span><span class="sxs-lookup"><span data-stu-id="cf160-305">[Walkthrough: Publishing WCF Services with the WCF-BasicHttp Adapter](../core/walkthrough-publishing-wcf-services-with-the-wcf-basichttp-adapter.md) </span></span>  
 <span data-ttu-id="cf160-306">[Cómo usar el servicio de WCF de BizTalk consumiendo Asistente para consumir un servicio WCF](../core/how-to-use-the-biztalk-wcf-service-consuming-wizard-to-consume-a-wcf-service.md) </span><span class="sxs-lookup"><span data-stu-id="cf160-306">[How to Use the BizTalk WCF Service Consuming Wizard to Consume a WCF Service](../core/how-to-use-the-biztalk-wcf-service-consuming-wizard-to-consume-a-wcf-service.md) </span></span>  
 [<span data-ttu-id="cf160-307">Especificar el cuerpo del mensaje para los adaptadores de WCF</span><span class="sxs-lookup"><span data-stu-id="cf160-307">Specifying the Message Body for the WCF Adapters</span></span>](../core/specifying-the-message-body-for-the-wcf-adapters.md)
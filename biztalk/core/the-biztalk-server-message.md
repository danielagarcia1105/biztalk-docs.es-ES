---
title: Mensaje de BizTalk Server | Documentos de Microsoft
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- messages, properties
- messages, about messages
ms.assetid: 6048c191-b495-4fdc-b547-e3e322340a49
caps.latest.revision: 17
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: b4fd150a0b93cac10c4d1f79a526846629c62e67
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
ms.locfileid: "22279900"
---
# <a name="the-biztalk-server-message"></a><span data-ttu-id="ffe47-102">Mensaje de BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="ffe47-102">The BizTalk Server Message</span></span>
[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="ffe47-103">es, en esencia, un motor de control de mensajes.</span><span class="sxs-lookup"><span data-stu-id="ffe47-103"> is, at its core, a message-handling engine.</span></span> <span data-ttu-id="ffe47-104">Para conocer los detalles de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], es importante comprender los mensajes y cómo se representan, almacenan y procesan en BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="ffe47-104">To understand the details of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], it is important to understand messages and how they are represented, stored, and processed by BizTalk Server.</span></span> <span data-ttu-id="ffe47-105">Los detalles de cómo trabaja BizTalk Server con los mensajes son más fáciles de comprender una vez que se ha entendido qué es un mensaje.</span><span class="sxs-lookup"><span data-stu-id="ffe47-105">The details of how BizTalk Server works with messages become easier to understand after you have gained an understanding of what a message is.</span></span>  
  
 <span data-ttu-id="ffe47-106">Cada mensaje de BizTalk Server se considera un mensaje de varias partes y se compone de cero o más partes.</span><span class="sxs-lookup"><span data-stu-id="ffe47-106">Each message in BizTalk Server is considered a multi-part message and is made up of zero or more parts.</span></span> <span data-ttu-id="ffe47-107">Cada mensaje con una o varias partes tiene una de estas partes identificada como parte del cuerpo.</span><span class="sxs-lookup"><span data-stu-id="ffe47-107">Each message with one or more parts has one of these parts identified as the body part.</span></span> <span data-ttu-id="ffe47-108">Cada parte consta de un fragmento binario de datos que se puede representar como un documento XML, un archivo sin formato, una clase de .NET serializada u otra secuencia binaria de datos.</span><span class="sxs-lookup"><span data-stu-id="ffe47-108">Each part consists of a binary chunk of data which can represent an XML document, a flat file, a serialized .NET class, or other binary stream of data.</span></span> <span data-ttu-id="ffe47-109">La parte del cuerpo del mensaje se usa para identificar el tipo del mensaje que se puede usar para enrutamiento.</span><span class="sxs-lookup"><span data-stu-id="ffe47-109">You use the body part of the message to identify the type of the message that can be used for routing.</span></span>  
  
 <span data-ttu-id="ffe47-110">Un concepto muy importante entender es que todos los mensajes son inmutables en [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ffe47-110">A very important concept to understand is that all messages are immutable in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="ffe47-111">Esto significa que, una vez construido, un mensaje no se puede cambiar.</span><span class="sxs-lookup"><span data-stu-id="ffe47-111">This means that after a message is constructed, it cannot be changed.</span></span> <span data-ttu-id="ffe47-112">Un mensaje se considera construido cuando se ha colocado en la base de datos de cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="ffe47-112">A message is considered constructed after it is placed into the MessageBox database.</span></span> <span data-ttu-id="ffe47-113">Los cambios que se deban realizar en un mensaje requieren que se cree un mensaje nuevo y se utilice a partir de ese punto.</span><span class="sxs-lookup"><span data-stu-id="ffe47-113">Any changes to the message require that a new message is created and used from that point forward.</span></span> <span data-ttu-id="ffe47-114">Esto es especialmente claro en el Diseñador de orquestaciones, donde las reglas de compilación obligan a seguir instrucciones estrictas para construir un mensaje antes de usarlo y no permiten modificar el mensaje fuera de su bloque de construcción.</span><span class="sxs-lookup"><span data-stu-id="ffe47-114">This is especially clear in the Orchestration Designer, where compilation rules force you to follow strict guidelines about constructing a message before using it, and do not allow the message to be altered outside of its construction block.</span></span> <span data-ttu-id="ffe47-115">Si necesita cambiar el mensaje, debe crear un nuevo bloque de construcción que cree un mensaje del mismo tipo, copiar el mensaje original en el nuevo mensaje y realizar los cambios en el mensaje nuevo antes de dejar el bloque de construcción.</span><span class="sxs-lookup"><span data-stu-id="ffe47-115">If you need to change the message, you must create a new construction block that creates a message of the same type, copy the original message to the new message, and then make any changes to the new message before leaving the construction block.</span></span>  
  
## <a name="message-properties"></a><span data-ttu-id="ffe47-116">Propiedades del mensaje</span><span class="sxs-lookup"><span data-stu-id="ffe47-116">Message Properties</span></span>  
 <span data-ttu-id="ffe47-117">Además de las partes que componen un mensaje, cada mensaje en el sistema tiene un conjunto de propiedades que lo acompañan en lo que se conoce como el *contexto del mensaje*.</span><span class="sxs-lookup"><span data-stu-id="ffe47-117">In addition to the parts that make up a message, each message in the system has a set of properties that go along with it in what is known as the *message context*.</span></span> <span data-ttu-id="ffe47-118">Estas propiedades pueden ser valores extraídos del mensaje o relacionados con él.</span><span class="sxs-lookup"><span data-stu-id="ffe47-118">These properties can be values extracted from or related to the message itself.</span></span> <span data-ttu-id="ffe47-119">Por ejemplo, los adaptadores ponen propiedades en el contexto relacionadas con la recepción de un mensaje, como la ubicación en la que se recibió el mensaje y el tipo de adaptador que se usó para recibir el mensaje.</span><span class="sxs-lookup"><span data-stu-id="ffe47-119">For example, adapters put properties into the context related to the receiving of a message, such as the location at which the message was received, and the type of adapter that was used to receive the message.</span></span> <span data-ttu-id="ffe47-120">O bien se pueden escribir propiedades al contexto de o *promueve* en el contexto.</span><span class="sxs-lookup"><span data-stu-id="ffe47-120">Properties can either be written to the context, or *promoted* into the context.</span></span> <span data-ttu-id="ffe47-121">La diferencia entre estas dos opciones es que las propiedades promocionadas se pueden usar como criterios en el enrutamiento de un mensaje mientras que las propiedades escritas no.</span><span class="sxs-lookup"><span data-stu-id="ffe47-121">The difference between these two options is that promoted properties can be used as criteria in message routing while written properties cannot.</span></span>  
  
 <span data-ttu-id="ffe47-122">Este concepto de escribir o promocionar valores en el contexto está relacionado, aunque no es el mismo, con el concepto de promocionar propiedades en el Editor de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="ffe47-122">This concept of writing or promoting values to the context is related to, but not the same as, promoting properties in the BizTalk Editor.</span></span> <span data-ttu-id="ffe47-123">En el Editor de BizTalk, se puede marcar un elemento o un atributo de un esquema como una propiedad promocionada o un campo distintivo.</span><span class="sxs-lookup"><span data-stu-id="ffe47-123">In the BizTalk Editor, an element or attribute in a schema can be flagged as a promoted property or a distinguished field.</span></span> <span data-ttu-id="ffe47-124">Los elementos marcados con anotaciones PropertyField en el esquema de mensaje conducirán al desensamblador de canalización a poner una propiedad Promocionada en el contexto.</span><span class="sxs-lookup"><span data-stu-id="ffe47-124">Items that are marked with PropertyField annotations in your message schema will lead to the pipeline disassembler putting a Promoted property in the context.</span></span> <span data-ttu-id="ffe47-125">Los elementos marcados con anotaciones DistinguishedField en el esquema de mensaje conducirán al desensamblador de canalización a poner una propiedad Written en el contexto.</span><span class="sxs-lookup"><span data-stu-id="ffe47-125">Items that are marked with DistinguishedField annotations in your message schema will lead to the pipeline disassembler putting a Written property into the context.</span></span>  
  
 <span data-ttu-id="ffe47-126">El diseño de las propiedades promocionadas comenzó con el diseño de *correlación de mensajes*: la capacidad para relacionar un mensaje que se recibe a una instancia de orquestación ya se está ejecutando.</span><span class="sxs-lookup"><span data-stu-id="ffe47-126">The design for promoted properties started with the design of *message correlation*: the ability to relate a message being received to an already running orchestration instance.</span></span> <span data-ttu-id="ffe47-127">Para la correlación es necesario definir una propiedad o un conjunto de propiedades que proporcione el vínculo entre los mensajes y la orquestación.</span><span class="sxs-lookup"><span data-stu-id="ffe47-127">For correlation, there is a need to define a property or set of properties that provide the link between messages in the orchestration.</span></span> <span data-ttu-id="ffe47-128">Por ejemplo, en un proceso de compra, debe correlacionar los mensajes basados en PurchaseOrderID.</span><span class="sxs-lookup"><span data-stu-id="ffe47-128">For example, in a purchasing process, you need to correlate messages based on the PurchaseOrderID.</span></span> <span data-ttu-id="ffe47-129">Sin embargo, en muchos casos empresariales, el nombre del campo o atributo concreto de los mensajes puede no coincidir.</span><span class="sxs-lookup"><span data-stu-id="ffe47-129">However, in many business cases, the name of the particular field or attribute in the messages may not match.</span></span> <span data-ttu-id="ffe47-130">Un esquema de pedido puede tener un elemento denominado POId, mientras que la factura adjunta puede tener un elemento denominado OrderID.</span><span class="sxs-lookup"><span data-stu-id="ffe47-130">A purchase order schema might have an element named POId, while the companion invoice schema may have an element named OrderID.</span></span> <span data-ttu-id="ffe47-131">Para correlacionar mensajes por una propiedad con nombre como PurchaseOrderID en esta situación, el programador debe poder extraer del origen del valor el nombre de la propiedad por la que se va a crear la correlación.</span><span class="sxs-lookup"><span data-stu-id="ffe47-131">To correlate messages on a named property such as PurchaseOrderID in this situation, the developer must be able to abstract the name of the property to be correlated on from the source of the value.</span></span> <span data-ttu-id="ffe47-132">Los esquemas de propiedad admiten esta extracción.</span><span class="sxs-lookup"><span data-stu-id="ffe47-132">Property schemas support this abstraction.</span></span>  
  
 <span data-ttu-id="ffe47-133">A *esquema de propiedad* le permite definir las propiedades promocionadas en una ubicación común y pídales que hace referencia a otros esquemas.</span><span class="sxs-lookup"><span data-stu-id="ffe47-133">A *property schema* enables you to define promoted properties in a common location and have them referenced by other schemas.</span></span> <span data-ttu-id="ffe47-134">Al igual que otros esquemas, un esquema de propiedades tiene un espacio de nombres pero, a diferencia de otros esquemas, solo puede tener elementos definidos (es decir, ni registros ni atributos).</span><span class="sxs-lookup"><span data-stu-id="ffe47-134">Like other schemas, a property schema has a namespace, but unlike other schemas, it can only have defined elements (that is, not records or attributes).</span></span> <span data-ttu-id="ffe47-135">Cada elemento que se define en el esquema de propiedades tiene un nombre y un tipo.</span><span class="sxs-lookup"><span data-stu-id="ffe47-135">Each element that is defined in the property schema has a name and type.</span></span> <span data-ttu-id="ffe47-136">Puesto que puede ser necesario hacer referencia al esquema de propiedades en más de un esquema y puesto que la información del esquema de propiedades debe estar disponible para los componentes en tiempo de ejecución, se debe implementar el esquema de propiedades en BizTalk Server como los demás esquemas.</span><span class="sxs-lookup"><span data-stu-id="ffe47-136">Because the property schema may need to be referenced by more than one schema, and because the information in the property schema must be available to components at runtime, the property schema must get deployed to BizTalk Server like all other schemas.</span></span> <span data-ttu-id="ffe47-137">Además de los pasos normales de implementación de esquemas, se extrae información de las propiedades promocionadas y se almacena en la tabla bts_documentSpec de la base de datos de administración.</span><span class="sxs-lookup"><span data-stu-id="ffe47-137">In addition to the normal schema deployment steps, information about the promoted properties is extracted and stored in the bts_documentSpec table in the Management database.</span></span>  
  
 <span data-ttu-id="ffe47-138">Una vez creado un esquema de propiedades, elementos y atributos con el mismo tipo (por ejemplo.</span><span class="sxs-lookup"><span data-stu-id="ffe47-138">After a property schema has been created, elements and attributes with the same type (for example.</span></span> <span data-ttu-id="ffe47-139">valor entero) se puede promocionar como una de las propiedades con nombre en el esquema de propiedades.</span><span class="sxs-lookup"><span data-stu-id="ffe47-139">integer) can be promoted as one of the named properties in the property schema.</span></span>  
  
 <span data-ttu-id="ffe47-140">**Para completar el caso del ejemplo anterior, un programador realizaría los pasos siguientes para definir la propiedad compartida necesaria para la correlación.**</span><span class="sxs-lookup"><span data-stu-id="ffe47-140">**To complete the example case from above, a developer would perform the following steps to define the shared property needed for correlation.**</span></span>  
  
1.  <span data-ttu-id="ffe47-141">Crear un esquema de propiedades y definir un elemento de tipo xs:int denominado PurchaseOrderId.</span><span class="sxs-lookup"><span data-stu-id="ffe47-141">Create a property schema and define an element of type xs:int named PurchaseOrderId.</span></span>  
  
2.  <span data-ttu-id="ffe47-142">Crear un esquema PurchaseOrder y agregar un elemento o atributo de tipo xs:int denominado POId.</span><span class="sxs-lookup"><span data-stu-id="ffe47-142">Create a PurchaseOrder schema and add an element or attribute of type xs:int named POId.</span></span>  
  
3.  <span data-ttu-id="ffe47-143">Con el comando Mostrar promociones en el Editor de BizTalk, el programador agrega el campo POId a la lista de propiedades promocionadas e indica que se debe promocionar como la propiedad PurchaseOrderId definida en el esquema de propiedades seleccionando la propiedad denominada PurchaseOrderId en la lista.</span><span class="sxs-lookup"><span data-stu-id="ffe47-143">Using the show promotions command in the BizTalk Editor, the developer adds the POId field to the list of promoted properties and indicates that it should be promoted as the PurchaseOrderId property defined in the property schema by selecting the PurchaseOrderId named property from the list.</span></span>  
  
4.  <span data-ttu-id="ffe47-144">Crear un esquema Invoice y agregar un elemento o atributo de tipo xs:int denominado OrderId.</span><span class="sxs-lookup"><span data-stu-id="ffe47-144">Create an Invoice schema and add an element or attribute of type xs:int named OrderId.</span></span>  
  
5.  <span data-ttu-id="ffe47-145">Con el comando Mostrar promociones del Editor de BizTalk, el programador agrega el campo OrderId a la lista de propiedades promocionadas e indica que se debe promocionar como la propiedad PurchaseOrderId definida en el esquema de propiedades seleccionando la propiedad denominada PurchaseOrderId en la lista.</span><span class="sxs-lookup"><span data-stu-id="ffe47-145">Using the show promotions command in the BizTalk Editor, the developer adds the OrderId field to the list of promoted properties and indicates that it should be promoted as the PurchaseOrderId property defined in the property schema by selecting the PurchaseOrderId named property from the list.</span></span>  
  
 <span data-ttu-id="ffe47-146">Ahora que existe esta definición en los esquemas de documento, los componentes de canalización pueden promocionar correctamente OrderId y POId como la propiedad con nombre PurchaseOrderID para poder utilizarla para enrutamiento y correlación.</span><span class="sxs-lookup"><span data-stu-id="ffe47-146">Now that this definition exists in the document schemas, pipeline components can properly promote OrderId and POId as the named property PurchaseOrderID so that it can be used for routing and correlation.</span></span> <span data-ttu-id="ffe47-147">Para obtener información más detallada acerca de este proceso de promoción, consulte el tema "Procesamiento de mensajes" en este documento.</span><span class="sxs-lookup"><span data-stu-id="ffe47-147">For more details on this promotion process, see the topic "Message Processing" in this document.</span></span>  
  
 <span data-ttu-id="ffe47-148">Una de las ventajas de las propiedades promocionadas es que el valor del elemento que se promociona está disponible en el contexto del mensaje.</span><span class="sxs-lookup"><span data-stu-id="ffe47-148">One of the benefits of promoted properties is that the value of the element that is promoted is available in the context of the message.</span></span> <span data-ttu-id="ffe47-149">Esto significa que recuperar ese valor no consume recursos, ya que no se requiere cargar el mensaje en memoria para ejecutar la instrucción XPath en el mensaje.</span><span class="sxs-lookup"><span data-stu-id="ffe47-149">This means that retrieving that value is inexpensive, as it does not require loading the message into memory to execute an XPath statement on the message.</span></span> <span data-ttu-id="ffe47-150">En su lugar, se puede usar una bolsa de propiedades sencilla junto con una clave para obtener el valor.</span><span class="sxs-lookup"><span data-stu-id="ffe47-150">Instead, a simple property bag can be used along with a key to get the value.</span></span> <span data-ttu-id="ffe47-151">Este tipo de comportamiento es deseable en situaciones que no sean enrutamiento de mensajes y es el motivo para crear campos distintivos.</span><span class="sxs-lookup"><span data-stu-id="ffe47-151">This type of behavior is desirable in situations other than message routing and is the reason for creating distinguished fields.</span></span> <span data-ttu-id="ffe47-152">Si bien las propiedades promocionadas se promocionan en el contexto del mensaje, los campos distintivos se escriben en el contexto del mensaje.</span><span class="sxs-lookup"><span data-stu-id="ffe47-152">While promoted properties are promoted into the message context, distinguished fields are written into the message context.</span></span> <span data-ttu-id="ffe47-153">No obstante, a diferencia de las propiedades promocionadas, no hay ningún esquema de propiedades para campos distintivos.</span><span class="sxs-lookup"><span data-stu-id="ffe47-153">Unlike promoted properties however, there is no property schema for distinguished fields.</span></span> <span data-ttu-id="ffe47-154">Éste es el motivo para que no se puedan usar campos distintivos para enrutamiento y, por tanto, no están disponibles como criterio de filtro en una forma de recepción de orquestación o puerto de envío.</span><span class="sxs-lookup"><span data-stu-id="ffe47-154">This is why distinguished fields cannot be used for routing and are therefore not available as filter criteria in a send port or orchestration receive shape.</span></span> <span data-ttu-id="ffe47-155">Sin embargo, se pueden usar campos distintivos en orquestaciones para leer o escribir valores del contexto del mensaje en lugar de tener que cargar el mensaje en memoria y extraer el valor.</span><span class="sxs-lookup"><span data-stu-id="ffe47-155">Distinguished fields can, however, be used in orchestrations to read or write values from the message context instead of having to load the message into memory and extract the value.</span></span>  
  
 <span data-ttu-id="ffe47-156">Además de promocionar o escribir propiedades en el contexto del mensaje, se pueden agregar también predicados de mensaje al contexto.</span><span class="sxs-lookup"><span data-stu-id="ffe47-156">In addition to promoting or writing properties into the message context, message predicates can also be added to the context.</span></span> <span data-ttu-id="ffe47-157">Los predicados de mensaje se usan como medida de seguridad en BizTalk Server y proporcionan información contextual del mensaje, que debe coincidir con los valores especificados para cualquier servidor al que se va a enrutar el mensaje.</span><span class="sxs-lookup"><span data-stu-id="ffe47-157">Message predicates are used as a security measure in BizTalk Server and provide contextual information about the message, which must match values specified for any host that the message is to be routed to.</span></span> <span data-ttu-id="ffe47-158">Esta medida de seguridad permite configurar el entorno de BizTalk Server de forma que permita que hosts específicos sean los únicos hosts que pueden recibir y procesar mensajes concretos.</span><span class="sxs-lookup"><span data-stu-id="ffe47-158">This security measure allows you to configure your BizTalk Server environment in such a way as to allow specific hosts to be the only hosts that can receive and process particular messages.</span></span> <span data-ttu-id="ffe47-159">Como ejemplo, en la consola de administración de BizTalk Server, se puede configurar un host con la huella digital de un certificado para descodificar y descifrar mensajes.</span><span class="sxs-lookup"><span data-stu-id="ffe47-159">As an example, in the BizTalk Server Administration Console, a host can be configured with the thumbprint of a certificate to use for message decoding and decryption.</span></span> <span data-ttu-id="ffe47-160">Al configurar esta propiedad se crea una propiedad de aplicación para ese host en el cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="ffe47-160">Configuring this property creates an application property for that host in the MessageBox.</span></span> <span data-ttu-id="ffe47-161">Los mensajes protegidos que se reciben y descifran con esta huella digital se enrutan únicamente hacia los hosts que tienen la huella digital configurada.</span><span class="sxs-lookup"><span data-stu-id="ffe47-161">Secure messages that are received and decrypted using this thumbprint are then only routed to the hosts with the thumbprint configured.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ffe47-162">Vea también</span><span class="sxs-lookup"><span data-stu-id="ffe47-162">See Also</span></span>  
 [<span data-ttu-id="ffe47-163">Arquitectura en tiempo de ejecución</span><span class="sxs-lookup"><span data-stu-id="ffe47-163">Runtime Architecture</span></span>](../core/runtime-architecture.md)
---
title: Cómo investigar cuellos de botella | Documentos de Microsoft
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 7ca22d07-d5fe-4dfb-8b52-3be3a95b0d6f
caps.latest.revision: 4
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: a6a3cf4630bf3269516537439ed58b464589cf26
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
ms.locfileid: "22254900"
---
# <a name="how-to-investigate-bottlenecks"></a><span data-ttu-id="6d21e-102">Cómo investigar cuellos de botella</span><span class="sxs-lookup"><span data-stu-id="6d21e-102">How to Investigate Bottlenecks</span></span>
<span data-ttu-id="6d21e-103">En este tema se describe un proceso recomendado para investigar cuellos de botella.</span><span class="sxs-lookup"><span data-stu-id="6d21e-103">This topic describes a recommended process for how to investigate bottlenecks.</span></span>  
  
## <a name="what-is-the-source-of-the-problem"></a><span data-ttu-id="6d21e-104">¿Cuál es el origen del problema?</span><span class="sxs-lookup"><span data-stu-id="6d21e-104">What is the Source of the Problem?</span></span>  
 <span data-ttu-id="6d21e-105">El origen del problema podría estar relacionado con el hardware o el software.</span><span class="sxs-lookup"><span data-stu-id="6d21e-105">The source of the problem could be hardware or software related.</span></span> <span data-ttu-id="6d21e-106">Cuando los recursos se infrautilizan suele ser indicativo de un cuello de botella en alguna parte del sistema.</span><span class="sxs-lookup"><span data-stu-id="6d21e-106">When resources are underutilized it is usually an indication of a bottleneck somewhere in the system.</span></span> <span data-ttu-id="6d21e-107">Los cuellos de botella pueden estar ocasionados por limitaciones del hardware, por una configuración del software poco eficaz, o por ambos motivos.</span><span class="sxs-lookup"><span data-stu-id="6d21e-107">Bottlenecks can be caused either due to hardware limitations or due to inefficient software configurations or both.</span></span>  
  
 <span data-ttu-id="6d21e-108">La identificación de cuellos de botella es un proceso incremental, donde la solución de un cuello de botella puede llevar a descubrir otro.</span><span class="sxs-lookup"><span data-stu-id="6d21e-108">Identifying bottlenecks is an incremental process whereby alleviating one bottleneck can lead to the discovery of the next one.</span></span> <span data-ttu-id="6d21e-109">El objetivo de este tema consiste en encontrar el modo de identificar y solucionar estos cuellos de botella.</span><span class="sxs-lookup"><span data-stu-id="6d21e-109">The science of identifying and alleviating these bottlenecks is the objective of this topic.</span></span> <span data-ttu-id="6d21e-110">Es posible que un sistema obtenga valores máximos durante breves períodos de tiempo.</span><span class="sxs-lookup"><span data-stu-id="6d21e-110">It is possible for a system to perform at peaks for short periods of time.</span></span> <span data-ttu-id="6d21e-111">Sin embargo, para un rendimiento sostenible un sistema solo podrá procesar tan rápido como su componente de realización más lento.</span><span class="sxs-lookup"><span data-stu-id="6d21e-111">However, for sustainable throughput a system can only process as fast as its slowest performing component.</span></span>  
  
## <a name="using-a-serial-approach"></a><span data-ttu-id="6d21e-112">Uso de un enfoque en serie</span><span class="sxs-lookup"><span data-stu-id="6d21e-112">Using a Serial Approach</span></span>  
 <span data-ttu-id="6d21e-113">Los cuellos de botella se pueden producir en extremos (entrada/salida) del sistema o en cualquier otro lugar (orquestación/base de datos).</span><span class="sxs-lookup"><span data-stu-id="6d21e-113">Bottlenecks can occur at the endpoints (entry/exit) of the system or somewhere in the middle (orchestration/database).</span></span> <span data-ttu-id="6d21e-114">Una vez que se haya aislado la ubicación del cuello de botella, se puede llevar a cabo un enfoque estructurado para identificar el origen.</span><span class="sxs-lookup"><span data-stu-id="6d21e-114">After the location of the bottleneck has been isolated a structured approach can be undertaken to identify the source.</span></span> <span data-ttu-id="6d21e-115">Cuando se hayan solucionado los cuellos de botella, es fundamental volver a medir el rendimiento para asegurarse de que no se ha producido un cuello de botella nuevo en otro lugar del sistema más abajo de la línea.</span><span class="sxs-lookup"><span data-stu-id="6d21e-115">After the bottlenecks have been alleviated it is essential to measure performance again to ensure that a new bottleneck has not been introduced elsewhere in the system further down the line.</span></span>  
  
 <span data-ttu-id="6d21e-116">El proceso de identificar y corregir cuellos de botella debería realizarse en serie; solo se debería modificar un parámetro cada vez y, a continuación, se debería medir el rendimiento para comprobar el efecto de ese cambio.</span><span class="sxs-lookup"><span data-stu-id="6d21e-116">The process of identifying and fixing bottlenecks should be done in a serial manner whereby only one parameter at a time should be varied and then performance measured to verify the impact of that single change.</span></span> <span data-ttu-id="6d21e-117">Si se modifica más de un parámetro de una vez, podría ocultarse el efecto del cambio.</span><span class="sxs-lookup"><span data-stu-id="6d21e-117">Varying more than one parameter at a time could conceal the effect of the change.</span></span>  
  
 <span data-ttu-id="6d21e-118">Por ejemplo, si se cambia el parámetro 1 se podría mejorar el rendimiento, sin embargo, si se cambia el parámetro 2 junto con el parámetro 1 podría tener un efecto perjudicial y anular las ventajas de cambiar el parámetro 1 que llevaría a un efecto neto de cero.</span><span class="sxs-lookup"><span data-stu-id="6d21e-118">For example, changing parameter 1 could improve performance however, changing parameter 2 in conjunction with changing parameter 1 could have a detrimental effect negating the benefits of changing parameter 1 thus leading to a net zero effect.</span></span> <span data-ttu-id="6d21e-119">Sin embargo, esto provoca un negativo falso en el efecto de modificar el parámetro 1 y un positivo falso en el efecto de modificar el parámetro 2.</span><span class="sxs-lookup"><span data-stu-id="6d21e-119">However, this results in a false negative on the effect of varying parameter 1 and a false positive on the effect of varying parameter 2.</span></span>  
  
## <a name="testing-consistency"></a><span data-ttu-id="6d21e-120">Comprobar coherencia</span><span class="sxs-lookup"><span data-stu-id="6d21e-120">Testing Consistency</span></span>  
 <span data-ttu-id="6d21e-121">Es esencial medir las características del rendimiento después de cambiar la configuración para validar el efecto del cambio.</span><span class="sxs-lookup"><span data-stu-id="6d21e-121">Measuring performance characteristics after changing settings is imperative to validate the effect of the change.</span></span>  
  
-   <span data-ttu-id="6d21e-122">Hardware: Es importante usar hardware coherente ya que modifica el hardware puede mostrar un comportamiento incoherente que produzca resultados erróneos, por ejemplo, no use un equipo portátil.</span><span class="sxs-lookup"><span data-stu-id="6d21e-122">Hardware: It is important to use consistent hardware as varying the hardware can display inconsistent behavior producing misleading results e.g. do not use a laptop.</span></span>  
  
-   <span data-ttu-id="6d21e-123">Duración de la ejecución de pruebas: También es importante medir el rendimiento durante un período mínimo definido para asegurarse de que los resultados son sostenibles y no simplemente, valores máximos.</span><span class="sxs-lookup"><span data-stu-id="6d21e-123">Test Run Duration: It is also important to measure performance for a fixed minimum period to ensure that the results are indeed sustainable and not simply peaks.</span></span> <span data-ttu-id="6d21e-124">Otra razón para llevar a cabo pruebas durante períodos más largos es que se debe asegurar que el sistema ha pasado por el período inicial de preparación donde se han rellenado todas las cachés, que las tablas de la base de datos han alcanzado los recuentos esperados y que la limitación ha contado con tiempo suficiente para activarse y regular el rendimiento una vez alcanzados los umbrales predefinidos.</span><span class="sxs-lookup"><span data-stu-id="6d21e-124">Another reason to run tests for longer periods is to ensure that the system has gone through the initial warm/ramp up period where all caches are populated, database tables have reached expected counts and throttling is given sufficient time to kick in and regulate throughput once predefined thresholds are hit.</span></span> <span data-ttu-id="6d21e-125">Este enfoque ayudará a descubrir el rendimiento óptimo sostenible.</span><span class="sxs-lookup"><span data-stu-id="6d21e-125">This approach will help discover optimal sustainable throughput.</span></span>  
  
-   <span data-ttu-id="6d21e-126">Los parámetros de prueba: También es necesario no modificar los parámetros de ejecución de pruebas para probar serie de pruebas.</span><span class="sxs-lookup"><span data-stu-id="6d21e-126">Test Parameters: It is also imperative to not vary test parameters from test run to test run.</span></span> <span data-ttu-id="6d21e-127">Por ejemplo, si se modifica la complejidad de asignación o el tamaño del documento, se pueden producir resultados de latencia y rendimientos distintos.</span><span class="sxs-lookup"><span data-stu-id="6d21e-127">For example, varying map complexity and/or document sizes can produce different throughput and latency results.</span></span>  
  
-   <span data-ttu-id="6d21e-128">Un estado limpio: Una vez completada una prueba es importante para realizar la limpieza ejecutar todo el estado antes de ejecutar la prueba siguiente.</span><span class="sxs-lookup"><span data-stu-id="6d21e-128">Clean State: Once a test is complete it is important to cleanup all state before running the next test run.</span></span> <span data-ttu-id="6d21e-129">Por ejemplo, los datos históricos pueden acumularse en la base de datos, lo que influye en el rendimiento del tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="6d21e-129">For example, historical data can buildup in the database impacting runtime throughput.</span></span> <span data-ttu-id="6d21e-130">Si se reciclan las instancias de servicio, se liberan los recursos almacenados en caché como la memoria, las conexiones de la base de datos y los subprocesos.</span><span class="sxs-lookup"><span data-stu-id="6d21e-130">Recycling the service instances help to release cached resources like memory, database connections and threads.</span></span>  
  
## <a name="expectations-throughput-versus-latency"></a><span data-ttu-id="6d21e-131">Expectativas: Rendimiento frente a latencia</span><span class="sxs-lookup"><span data-stu-id="6d21e-131">Expectations: Throughput versus Latency</span></span>  
 <span data-ttu-id="6d21e-132">Es razonable esperar una determinada cantidad de rendimiento o latencia del sistema implementado.</span><span class="sxs-lookup"><span data-stu-id="6d21e-132">It is reasonable to expect a certain amount of throughput and/or latency from the deployed system.</span></span> <span data-ttu-id="6d21e-133">Esperar obtener un alto rendimiento y una latencia baja es como tirar en direcciones opuestas.</span><span class="sxs-lookup"><span data-stu-id="6d21e-133">Attempting to have both high throughput & low latency is like pulling in two different directions.</span></span> <span data-ttu-id="6d21e-134">Sin embargo, es realista esperar un rendimiento óptimo con una latencia razonable.</span><span class="sxs-lookup"><span data-stu-id="6d21e-134">However it is realistic to expect optimal throughput with reasonable latency.</span></span> <span data-ttu-id="6d21e-135">Cuando mejora el rendimiento, el sistema sufre más sobrecarga (mayor consumo de la CPU, mayor contención para E/S de disco, consumo excesivo de la memoria, mayor contención de bloqueo) lo que puede llevar a un efecto negativo en la latencia.</span><span class="sxs-lookup"><span data-stu-id="6d21e-135">As throughput improves increased stress (higher CPU consumption, higher disk-IO contention, memory pressure, greater lock contention) is placed on the system which can have a negative impact on latency.</span></span> <span data-ttu-id="6d21e-136">Para descubrir la capacidad óptima de un sistema, es necesario identificar y solucionar cualquier cuello de botella que se presente.</span><span class="sxs-lookup"><span data-stu-id="6d21e-136">To discover optimal capacity of a system it is imperative to identify and alleviate any and all bottlenecks.</span></span>  
  
 <span data-ttu-id="6d21e-137">Los cuellos de botella pueden estar ocasionados por los datos heredados (instancias completadas) que se encuentran en la base de datos que no se ha vaciado. Cuando sucede esto, puede reducirse el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="6d21e-137">Bottlenecks can be caused by legacy data (completed instances) residing in the database not cleaned out. When this occurs performance can degrade.</span></span> <span data-ttu-id="6d21e-138">Si se le da al sistema tiempo suficiente para que se purgue, será más fácil solucionar el problema.</span><span class="sxs-lookup"><span data-stu-id="6d21e-138">Giving the system sufficient time to drain can help alleviate the problem.</span></span> <span data-ttu-id="6d21e-139">Sin embargo, es importante descubrir la razón de la acumulación de datos para solucionar el problema.</span><span class="sxs-lookup"><span data-stu-id="6d21e-139">However, discovering the cause of the backlog buildup and helping alleviate the issue is important.</span></span>  
  
 <span data-ttu-id="6d21e-140">Para descubrir la razón de la acumulación, es importante analizar los datos históricos, supervisar los contadores Monitor de rendimiento (para descubrir patrones de uso y diagnosticar el origen de la acumulación).</span><span class="sxs-lookup"><span data-stu-id="6d21e-140">To discover the cause of the backlog, it is important to analyze historical data, monitor Performance Monitor counters (to discover usage patterns, and diagnose the source of the backlog).</span></span> <span data-ttu-id="6d21e-141">Esta es una situación frecuente cuando se procesan grandes volúmenes de datos por lotes todas las noches.</span><span class="sxs-lookup"><span data-stu-id="6d21e-141">This is a common situation where large volumes of data are processed in a batched manner on a nightly basis.</span></span> <span data-ttu-id="6d21e-142">Descubrir la capacidad del sistema y la posibilidad de recuperarse de una acumulación puede ser útil a la hora de tener en cuenta los requisitos de hardware para controlar casos de sobrecarga y la cantidad de espacio del búfer para almacenamiento dentro de un sistema para controlar, de este modo, picos imprevistos en el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="6d21e-142">Discovering the capacity of the system and its ability to recover from a backlog can be useful in estimating hardware requirements for handling overdrive scenarios and the amount of buffer room to accommodate within a system to handle unforeseen spikes in throughput.</span></span>  
  
 <span data-ttu-id="6d21e-143">Ajustar el sistema para un rendimiento sostenible y óptimo requiere un conocimiento en profundidad de la aplicación que se implementa, de los puntos fuertes y débiles del sistema, así como de los patrones de uso del caso específico.</span><span class="sxs-lookup"><span data-stu-id="6d21e-143">Tuning the system for optimal sustainable throughput requires an in depth understanding of the application being deployed, the strengths and weaknesses of the system and usage patterns of the specific scenario.</span></span> <span data-ttu-id="6d21e-144">El único modo de descubrir cuellos de botella y prever un rendimiento sostenible y óptimo con seguridad consiste en realizar comprobaciones exhaustivas en una topología que se aproxime a la que se usará en la producción.</span><span class="sxs-lookup"><span data-stu-id="6d21e-144">The only way to discover bottlenecks and predict optimal sustainable throughput with certainty is through thorough testing on a topology that closely matches what will be used in production.</span></span>  
  
 <span data-ttu-id="6d21e-145">En otros temas de esta sección se le indica cómo definir esa topología, cómo solucionar cuellos de botella y, con un poco de suerte, cómo evitarlos.</span><span class="sxs-lookup"><span data-stu-id="6d21e-145">Other topics in this section guides you through the process of defining that topology, and provides guidance on how to alleviate bottlenecks and hopefully help to avoid bottlenecks in the first place.</span></span>  
  
## <a name="scaling"></a><span data-ttu-id="6d21e-146">Ampliación</span><span class="sxs-lookup"><span data-stu-id="6d21e-146">Scaling</span></span>  
 <span data-ttu-id="6d21e-147">Los cuellos de botella se pueden producir en diferentes fases de la topología implementada.</span><span class="sxs-lookup"><span data-stu-id="6d21e-147">Bottlenecks can occur at various stages of the deployed topology.</span></span> <span data-ttu-id="6d21e-148">Algunos pueden solucionarse mediante la actualización del hardware.</span><span class="sxs-lookup"><span data-stu-id="6d21e-148">Some bottlenecks can be addressed by upgrading hardware.</span></span> <span data-ttu-id="6d21e-149">El hardware puede actualizarse si se escala verticalmente (más CPU, memorias o cachés) o si se escala horizontalmente (otros servidores).</span><span class="sxs-lookup"><span data-stu-id="6d21e-149">Hardware can be upgraded either by scaling-up (more CPU’s, memory or cache) or by scaling-out (additional servers).</span></span> <span data-ttu-id="6d21e-150">La decisión de escalar vertical u horizontalmente depende del tipo de cuello de botella que se ha encontrado y de la aplicación que se va a configurar.</span><span class="sxs-lookup"><span data-stu-id="6d21e-150">The decision to scale up/out depends on the type of bottleneck encountered and the application being configured.</span></span> <span data-ttu-id="6d21e-151">A continuación se presentan unas indicaciones que ayudarán a cambiar las topologías de implementación de hardware que se basan en los cuellos de botella que se han encontrado.</span><span class="sxs-lookup"><span data-stu-id="6d21e-151">The following will help with guidance on how to change hardware deployment topologies based on bottlenecks encountered.</span></span> <span data-ttu-id="6d21e-152">Una aplicación debe generarse a partir de cero para que pueda aprovechar las ventajas de escalarse vertical u horizontalmente. Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="6d21e-152">An application needs to be built from the ground up to be capable of taking advantage of scaling up/out. For example:</span></span>  
  
-   <span data-ttu-id="6d21e-153">Si la aplicación está serializada y depende de un único subproceso de ejecución, es posible que no ayude a solucionar el problema el hecho de escalar verticalmente un servidor con otras CPU y memorias.</span><span class="sxs-lookup"><span data-stu-id="6d21e-153">Scaling up a server with additional CPU’s and/or memory may not help alleviate the problem if the application is serialized and dependent on a single thread of execution.</span></span>  
  
-   <span data-ttu-id="6d21e-154">Es posible que el escalamiento horizontal con otros servidores no sea de ayuda si éstos simplemente agregan contención a un recurso común que no se pueda escalar.</span><span class="sxs-lookup"><span data-stu-id="6d21e-154">Scaling out a system with additional servers may not help if the additional servers simply add contention on a common resource that cannot be scaled.</span></span> <span data-ttu-id="6d21e-155">Sin embargo, el escalonamiento horizontal proporciona otras ventajas.</span><span class="sxs-lookup"><span data-stu-id="6d21e-155">However, scaling-out provides additional benefits.</span></span> <span data-ttu-id="6d21e-156">Implementar dos servidores de procesadores dobles en lugar de un servidor de procesador cuádruple ayuda a proporcionar un servidor redundante que cumple el doble propósito de escalar para controlar el rendimiento adicional y proporcionar una topología con una alta disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="6d21e-156">Deploying two dual-proc servers instead of one quad-proc server helps provide a redundant server that serves the dual purpose of scaling to handle additional throughput and provides a highly available topology.</span></span>
---
title: Cómo actualizar una orquestación | Documentos de Microsoft
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: ef3f032f-28a1-4d52-9d85-d5748c9e9682
caps.latest.revision: 21
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: edd9fa8e98b62ec92b1313cc1028efc5320ce17e
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
ms.locfileid: "22257892"
---
# <a name="how-to-upgrade-an-orchestration"></a><span data-ttu-id="16ad1-102">Cómo actualizar una orquestación</span><span class="sxs-lookup"><span data-stu-id="16ad1-102">How to Upgrade an Orchestration</span></span>
<span data-ttu-id="16ad1-103">Cómo actualizar una orquestación que se ejecuta en un entorno de producción cuando la orquestación controla transacciones de larga ejecución o está esperando una respuesta desde un puerto de petición-respuesta.</span><span class="sxs-lookup"><span data-stu-id="16ad1-103">How to update an orchestration that is running in a production environment when the orchestration handles long-running transactions or is waiting for a response from a solicit-response port.</span></span>

## <a name="overview"></a><span data-ttu-id="16ad1-104">Información general</span><span class="sxs-lookup"><span data-stu-id="16ad1-104">Overview</span></span>
 <span data-ttu-id="16ad1-105">Cuando una orquestación no procesa transacciones de larga ejecución, puede actualizarla como se describe en [lista de comprobación: actualizar los artefactos de una aplicación de BizTalk](../core/checklist-update-the-artifacts-in-a-biztalk-application.md).</span><span class="sxs-lookup"><span data-stu-id="16ad1-105">When an orchestration does not handle long-running transactions, you can update it as described in [Checklist: Update the Artifacts in a BizTalk Application](../core/checklist-update-the-artifacts-in-a-biztalk-application.md).</span></span> <span data-ttu-id="16ad1-106">Sin embargo, si la orquestación procesa transacciones de larga ejecución, no podrá transferir inmediatamente el sistema a la versión actualizada de la orquestación.</span><span class="sxs-lookup"><span data-stu-id="16ad1-106">When an orchestration handles long-running transactions, however, you cannot cut over to the updated version of the orchestration immediately.</span></span> <span data-ttu-id="16ad1-107">Debe dejar que la versión original termine de procesar los mensajes para que no se pierdan.</span><span class="sxs-lookup"><span data-stu-id="16ad1-107">You must allow the original version to finish processing its messages, so that they are not lost.</span></span> <span data-ttu-id="16ad1-108">Para ello, implemente la orquestación actualizada en la misma aplicación que la original.</span><span class="sxs-lookup"><span data-stu-id="16ad1-108">To accomplish this, you deploy the updated orchestration into the same application as the original one.</span></span> <span data-ttu-id="16ad1-109">A continuación, detenga la versión original e inicie la versión actualizada de modo que reciba todos los mensajes nuevos mientras la versión anterior sigue procesando cualquier mensaje en proceso.</span><span class="sxs-lookup"><span data-stu-id="16ad1-109">You then stop the original version and start the updated version so that it receives all new messages while the previous version continues to process any in-flight messages.</span></span> <span data-ttu-id="16ad1-110">Cuando la orquestación original termine de procesar todos los mensajes, anule su implementación desde la aplicación de BizTalk en la que se implementó.</span><span class="sxs-lookup"><span data-stu-id="16ad1-110">After the original orchestration has finished processing all of its messages, you undeploy it from the BizTalk application in which it was deployed.</span></span>  
  
 <span data-ttu-id="16ad1-111">Para obtener más información acerca de este escenario, vea [escenario: actualización de artefactos de la aplicación](../core/scenario-updating-application-artifacts.md).</span><span class="sxs-lookup"><span data-stu-id="16ad1-111">For more information about this scenario, see [Scenario: Updating Application Artifacts](../core/scenario-updating-application-artifacts.md).</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="16ad1-112">Si hay más de una orquestación enlazada al mismo puerto de recepción y cada una de ellas está iniciada o dada de alta, se insertarán mensajes duplicados en el sistema.</span><span class="sxs-lookup"><span data-stu-id="16ad1-112">If more than one orchestration is bound to the same receive port, and each orchestration is started or enlisted, you will introduce duplicate messages into the system.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="16ad1-113">Al efectuar la actualización a una nueva orquestación, puede que algunas instancias de orquestación pasen a un estado Suspendido (reanudable) en condiciones de mucha actividad debido a la condición de anticipación de la orquestación antigua y de la orquestación nueva durante la actualización.</span><span class="sxs-lookup"><span data-stu-id="16ad1-113">When upgrading to a new orchestration, some orchestration instances can become Suspended (resumable) under high stress because of the race condition between the old orchestration and the new orchestration during the upgrade.</span></span> <span data-ttu-id="16ad1-114">Para reanudar manualmente estas instancias de orquestación, consulte [cómo reanudar instancias de orquestación suspendidas](../core/how-to-resume-suspended-orchestration-instances.md).</span><span class="sxs-lookup"><span data-stu-id="16ad1-114">To manually resume these orchestration instances, see [How to Resume Suspended Orchestration Instances](../core/how-to-resume-suspended-orchestration-instances.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="16ad1-115">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="16ad1-115">Prerequisites</span></span>  
<span data-ttu-id="16ad1-116">Inicie sesión con una cuenta que sea miembro de la [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] grupo de administradores.</span><span class="sxs-lookup"><span data-stu-id="16ad1-116">Sign in with an account that is a member of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators group.</span></span> <span data-ttu-id="16ad1-117">La cuenta también debe tener permiso de lectura/escritura en el sistema de archivos local y la memoria caché global de ensamblados.</span><span class="sxs-lookup"><span data-stu-id="16ad1-117">Your account also must have Read/Write permission on the local file system, and the global assembly cache.</span></span> <span data-ttu-id="16ad1-118">La cuenta de administradores del equipo local cuenta con este permiso.</span><span class="sxs-lookup"><span data-stu-id="16ad1-118">The Administrators account on the local computer has this permission.</span></span>  

<span data-ttu-id="16ad1-119">Para obtener más información acerca de los permisos, consulte [permisos necesarios para implementar y administrar una aplicación de BizTalk](../core/permissions-required-for-deploying-and-managing-a-biztalk-application.md), y [derechos mínimos de seguridad ](https://social.technet.microsoft.com/wiki/contents/articles/24590.minimum-security-rights-for-biztalk-server-2006-to-2016.aspx).</span><span class="sxs-lookup"><span data-stu-id="16ad1-119">For more detailed information about permissions, see [Permissions Required for Deploying and Managing a BizTalk Application](../core/permissions-required-for-deploying-and-managing-a-biztalk-application.md), and [Minimum Security Rights ](https://social.technet.microsoft.com/wiki/contents/articles/24590.minimum-security-rights-for-biztalk-server-2006-to-2016.aspx).</span></span> 
 
## <a name="update-an-orchestration"></a><span data-ttu-id="16ad1-120">Actualizar una orquestación</span><span class="sxs-lookup"><span data-stu-id="16ad1-120">Update an orchestration</span></span>  
  
1.  <span data-ttu-id="16ad1-121">Realice los cambios necesarios en la orquestación.</span><span class="sxs-lookup"><span data-stu-id="16ad1-121">Make the necessary changes to the orchestration.</span></span>  
  
2.  <span data-ttu-id="16ad1-122">Incremente el número de versión del ensamblado como se indica a continuación:</span><span class="sxs-lookup"><span data-stu-id="16ad1-122">Increment the assembly version number, as follows:</span></span>  
  
    1.  <span data-ttu-id="16ad1-123">En el Explorador de soluciones, haga clic en el proyecto de BizTalk y, a continuación, haga clic en **propiedades** para iniciar el Diseñador de proyectos para el proyecto.</span><span class="sxs-lookup"><span data-stu-id="16ad1-123">In Solution Explorer, right-click the BizTalk project, and then click **Properties** to launch the Project Designer for the project.</span></span>  
  
    2.  <span data-ttu-id="16ad1-124">Haga clic en el **aplicación** ficha si aún no está activo y, a continuación, haga clic en **información de ensamblado**.</span><span class="sxs-lookup"><span data-stu-id="16ad1-124">Click the **Application** tab if it is not already active, and then click **Assembly Information**.</span></span>  
  
    3.  <span data-ttu-id="16ad1-125">En el panel derecho, incremente el número de versión del ensamblado.</span><span class="sxs-lookup"><span data-stu-id="16ad1-125">In the right pane, increase the assembly version number.</span></span> <span data-ttu-id="16ad1-126">Incremente únicamente el número principal o secundario de la versión.</span><span class="sxs-lookup"><span data-stu-id="16ad1-126">You should increase only the major or minor version number.</span></span> <span data-ttu-id="16ad1-127">El número de versión principal es el primer dígito en la secuencia (**0**. 0.0.0); el número de versión secundaria es el segundo dígito en la secuencia (0. **0**. 0.0).</span><span class="sxs-lookup"><span data-stu-id="16ad1-127">The major version number is the first digit in the sequence (**0**.0.0.0); the minor version number is the second digit in the sequence (0.**0**.0.0).</span></span> <span data-ttu-id="16ad1-128">BizTalk Server no reconocerá un cambio de número de versión que está más adelante en la secuencia, como 0,0. **0**.0 ó 0.0.0. **0**.</span><span class="sxs-lookup"><span data-stu-id="16ad1-128">BizTalk Server will not recognize a version number change that is later in the sequence, such as 0.0.**0**.0 or 0.0.0.**0**.</span></span>  
  
    4.  <span data-ttu-id="16ad1-129">Haga clic en **Aceptar** para cerrar el **información de ensamblado** cuadro de diálogo.</span><span class="sxs-lookup"><span data-stu-id="16ad1-129">Click **OK** to close the **Assembly Information** dialog box.</span></span>  
  
    5.  <span data-ttu-id="16ad1-130">Guarde el proyecto.</span><span class="sxs-lookup"><span data-stu-id="16ad1-130">Save the project.</span></span>  
  
3.  <span data-ttu-id="16ad1-131">Implemente el ensamblado en una aplicación de BizTalk desde Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="16ad1-131">Deploy the assembly from Visual Studio into a BizTalk application.</span></span> <span data-ttu-id="16ad1-132">Para obtener instrucciones, consulte [implementar ensamblados de BizTalk desde Visual Studio en una aplicación de BizTalk](../core/deploying-biztalk-assemblies-from-visual-studio-into-a-biztalk-application.md).</span><span class="sxs-lookup"><span data-stu-id="16ad1-132">For instructions, see [Deploying BizTalk Assemblies from Visual Studio into a BizTalk Application](../core/deploying-biztalk-assemblies-from-visual-studio-into-a-biztalk-application.md).</span></span> <span data-ttu-id="16ad1-133">Asegúrese de seleccionar la opción de implementación para instalar el ensamblado en la GAC.</span><span class="sxs-lookup"><span data-stu-id="16ad1-133">Make sure you select the deployment option to install the assembly in the GAC.</span></span>  
  
4.  <span data-ttu-id="16ad1-134">Pruebe el ensamblado que contiene la orquestación.</span><span class="sxs-lookup"><span data-stu-id="16ad1-134">Test the assembly containing the orchestration.</span></span>  
  
5.  <span data-ttu-id="16ad1-135">Exporte el ensamblado de la aplicación en el entorno de prueba a un archivo .msi, tal y como se describe en [cómo exportar una aplicación de BizTalk](../core/how-to-export-a-biztalk-application.md).</span><span class="sxs-lookup"><span data-stu-id="16ad1-135">Export the assembly from the application in your test environment into an .msi file, as described in [How to Export a BizTalk Application](../core/how-to-export-a-biztalk-application.md).</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="16ad1-136">Puede seguir los pasos siguientes para probar el ensamblado e implementarlo en el entorno de producción.</span><span class="sxs-lookup"><span data-stu-id="16ad1-136">You can use the following steps for testing the assembly as well as deploying it into your production environment.</span></span> <span data-ttu-id="16ad1-137">Para obtener más información sobre las tareas de implementación de aplicaciones en desarrollo, prueba, ensayo y producción, consulte [tareas de implementación de aplicación](../core/application-deployment-tasks.md).</span><span class="sxs-lookup"><span data-stu-id="16ad1-137">For more information about application deployment tasks in development, test, staging, and production, see [Application Deployment Tasks](../core/application-deployment-tasks.md).</span></span>  
  
6.  <span data-ttu-id="16ad1-138">Importar el archivo .msi en la aplicación de BizTalk en el entorno de producción que contiene la orquestación que desea actualizar, como se describe en [cómo importar una aplicación de BizTalk](../core/how-to-import-a-biztalk-application.md).</span><span class="sxs-lookup"><span data-stu-id="16ad1-138">Import the .msi file into the BizTalk application in your production environment that contains the orchestration that you want to update, as described in [How to Import a BizTalk Application](../core/how-to-import-a-biztalk-application.md).</span></span>  
  
7.  <span data-ttu-id="16ad1-139">Enlazar la orquestación actualizada usando los mismos enlaces que la orquestación original, tal como se describe en [cómo configurar enlaces para una orquestación](../core/how-to-configure-bindings-for-an-orchestration.md).</span><span class="sxs-lookup"><span data-stu-id="16ad1-139">Bind the updated orchestration using the same bindings as the original orchestration, as described in [How to Configure Bindings for an Orchestration](../core/how-to-configure-bindings-for-an-orchestration.md).</span></span>  
  
8.  <span data-ttu-id="16ad1-140">Dé de baja la orquestación original y, a continuación, inicie la orquestación actualizada.</span><span class="sxs-lookup"><span data-stu-id="16ad1-140">Unenlist the original orchestration, and then start the updated orchestration.</span></span> <span data-ttu-id="16ad1-141">Para evitar que se quiten mensajes, debe hacerlo mediante programación, como se describe en [implementar e iniciar una nueva versión de una orquestación mediante programación](../core/deploying-and-starting-a-new-version-of-an-orchestration-programmatically.md).</span><span class="sxs-lookup"><span data-stu-id="16ad1-141">To avoid any dropped messages, you should do this programmatically, as described in [Deploying and Starting a New Version of an Orchestration Programmatically](../core/deploying-and-starting-a-new-version-of-an-orchestration-programmatically.md).</span></span> <span data-ttu-id="16ad1-142">Como alternativa, puede realizar estos pasos manualmente, tal y como se describe en [cómo dar de baja una orquestación](../core/how-to-unenlist-an-orchestration.md), [cómo dar de alta una orquestación](../core/how-to-enlist-an-orchestration.md), y [cómo iniciar una orquestación](../core/how-to-start-an-orchestration.md).</span><span class="sxs-lookup"><span data-stu-id="16ad1-142">Alternatively, you can perform these steps manually, as described in [How to Unenlist an Orchestration](../core/how-to-unenlist-an-orchestration.md), [How to Enlist an Orchestration](../core/how-to-enlist-an-orchestration.md), and [How to Start an Orchestration](../core/how-to-start-an-orchestration.md).</span></span>  
  
9. <span data-ttu-id="16ad1-143">Supervisar el sistema para instancias de la versión original de orquestación que usan el concentrador de grupo página vista de consulta, como se describe en [cómo ver información de instancia para una orquestación](../core/how-to-view-instance-information-for-an-orchestration.md).</span><span class="sxs-lookup"><span data-stu-id="16ad1-143">Monitor the system for instances of the original orchestration version using the Group Hub page query view, as described in [How to View Instance Information for an Orchestration](../core/how-to-view-instance-information-for-an-orchestration.md).</span></span>  
  
10. <span data-ttu-id="16ad1-144">Cuando se completa todas las instancias activas, deshidratadas y suspendidas, anular la implementación de la orquestación original desde la aplicación, como se describe en [cómo quitar una orquestación de una aplicación](../core/how-to-remove-an-orchestration-from-an-application.md).</span><span class="sxs-lookup"><span data-stu-id="16ad1-144">When all of its active, dehydrated, and suspended instances are complete, undeploy the original orchestration from the application, as described in [How to Remove an Orchestration from an Application](../core/how-to-remove-an-orchestration-from-an-application.md).</span></span>  
  
11. <span data-ttu-id="16ad1-145">Si lo desea desinstalar la versión de ensamblado original de la GAC en cada equipo que ejecuta la aplicación, como se describe en [cómo desinstalar un ensamblado de la GAC](http://msdn.microsoft.com/library/464706a8-f902-4d05-a724-19169facd2b4).</span><span class="sxs-lookup"><span data-stu-id="16ad1-145">Optionally uninstall the original assembly version from the GAC on each computer running the application, as described in [How to Uninstall an Assembly from the GAC](http://msdn.microsoft.com/library/464706a8-f902-4d05-a724-19169facd2b4).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="16ad1-146">Vea también</span><span class="sxs-lookup"><span data-stu-id="16ad1-146">See Also</span></span>  
 <span data-ttu-id="16ad1-147">[Actualizar aplicaciones de BizTalk](../core/updating-biztalk-applications.md) </span><span class="sxs-lookup"><span data-stu-id="16ad1-147">[Updating BizTalk Applications](../core/updating-biztalk-applications.md) </span></span>  
 [<span data-ttu-id="16ad1-148">Administrar orquestaciones</span><span class="sxs-lookup"><span data-stu-id="16ad1-148">Managing Orchestrations</span></span>](../core/managing-orchestrations.md)
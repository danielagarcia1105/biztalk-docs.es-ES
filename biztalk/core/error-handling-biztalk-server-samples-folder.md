---
title: (Carpeta de ejemplos de BizTalk Server) de control de errores | Documentos de Microsoft
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- examples, errors
- errors, examples
- examples, messages
- messages, examples
- messages, errors
ms.assetid: b39791ed-277b-4625-b9a9-72480a1b6ff6
caps.latest.revision: 27
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 386e9729ac32cb08863e2ac3e0699ecda7890dbc
ms.sourcegitcommit: 5abd0ed3f9e4858ffaaec5481bfa8878595e95f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/28/2017
ms.locfileid: "25971482"
---
# <a name="error-handling-biztalk-server-samples-folder"></a><span data-ttu-id="d98cc-102">Error Handling (carpeta de ejemplos de BizTalk Server)</span><span class="sxs-lookup"><span data-stu-id="d98cc-102">Error Handling (BizTalk Server Samples Folder)</span></span>
<span data-ttu-id="d98cc-103">Este ejemplo tiene como finalidad crear una funcionalidad de control de errores para la aplicación de enrutamiento por contenidos (CBR).</span><span class="sxs-lookup"><span data-stu-id="d98cc-103">The purpose of this sample is to build an error-handling functionality for the content-based routing (CBR) application.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="d98cc-104">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="d98cc-104">Prerequisites</span></span>  
 <span data-ttu-id="d98cc-105">Para ejecutar el ejemplo, se recomienda que dispone de Microsoft Office InfoPath 2010 o posterior instalado.</span><span class="sxs-lookup"><span data-stu-id="d98cc-105">To run the sample, it is recommended that you have Microsoft Office InfoPath 2010 or later installed.</span></span> <span data-ttu-id="d98cc-106">Se puede ejecutar el ejemplo sin usar InfoPath pero, en ese caso, no se podrán ver los informes de gastos ni el envío de informes de gastos a través del adaptador de HTTP.</span><span class="sxs-lookup"><span data-stu-id="d98cc-106">You can run the sample without using InfoPath, but in that case you cannot see the expense reports and the submission of expense reports through the HTTP adapter.</span></span>  
  
## <a name="what-this-sample-does"></a><span data-ttu-id="d98cc-107">Descripción del ejemplo</span><span class="sxs-lookup"><span data-stu-id="d98cc-107">What This Sample Does</span></span>  
 <span data-ttu-id="d98cc-108">El ejemplo implementa parte de un sistema de procesamiento de informes de gastos.</span><span class="sxs-lookup"><span data-stu-id="d98cc-108">The sample implements part of an expense report processing system.</span></span> <span data-ttu-id="d98cc-109">En concreto, este ejemplo realiza lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="d98cc-109">Specifically, this sample does the following:</span></span>  
  
1.  <span data-ttu-id="d98cc-110">Define un esquema de informe de gastos con información sobre un informe de gastos y el enviador individual, incluido el nombre del departamento.</span><span class="sxs-lookup"><span data-stu-id="d98cc-110">Defines an expense report schema containing information about an expense report and the individual submitter including department name.</span></span>  
  
2.  <span data-ttu-id="d98cc-111">Permite el envío del informe de gastos a través de un directorio o de un servicio Web mediante InfoPath.</span><span class="sxs-lookup"><span data-stu-id="d98cc-111">Provides for the submission of the expense report through a directory or through a Web service using InfoPath.</span></span>  
  
3.  <span data-ttu-id="d98cc-112">Promueve la **departamento** y **correlationID** propiedades en el mensaje de documento para que se puede utilizar en un filtro de puerto para controlar el enrutamiento.</span><span class="sxs-lookup"><span data-stu-id="d98cc-112">Promotes the **Department** and **correlationID** properties in the message document so that it can be used in a port filter to control routing.</span></span>  
  
4.  <span data-ttu-id="d98cc-113">Enruta los informes de gastos del departamento de marketing a un archivo situado en un directorio, que simula la entrega al sistema de servidor del departamento.</span><span class="sxs-lookup"><span data-stu-id="d98cc-113">Routes expense reports belonging to the Marketing department to a file in a directory, simulating delivery to the department's back-end system.</span></span>  
  
5.  <span data-ttu-id="d98cc-114">Genera un mensaje de error correspondiente a los informes de gastos pertenecientes a otros departamentos distintos del departamento de marketing.</span><span class="sxs-lookup"><span data-stu-id="d98cc-114">Generates a failed message for expense reports belonging to departments other than Marketing.</span></span> <span data-ttu-id="d98cc-115">El mensaje de error contiene información sobre el error, incluidos el código y la descripción del error.</span><span class="sxs-lookup"><span data-stu-id="d98cc-115">The failed message includes information about the error including error code and error description.</span></span>  
  
6.  <span data-ttu-id="d98cc-116">Enruta los mensajes con errores a un destinatario físico (un usuario empresarial o un operador de la aplicación) para su corrección y reenvío.</span><span class="sxs-lookup"><span data-stu-id="d98cc-116">Routes failed messages to a human recipient (a business user or application operator) for correction and resubmission.</span></span>  
  
7.  <span data-ttu-id="d98cc-117">Enruta los informes de gastos reenviados por departamento, según se ha explicado anteriormente.</span><span class="sxs-lookup"><span data-stu-id="d98cc-117">Routes resubmitted expense reports based on department as described above.</span></span>  
  
 <span data-ttu-id="d98cc-118">Gran parte de este trabajo se lleva a cabo mediante una programación de orquestación de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d98cc-118">Much of this work is done through a BizTalk orchestration schedule.</span></span>  
  
## <a name="how-this-sample-is-designed-and-why"></a><span data-ttu-id="d98cc-119">Cómo se ha diseñado este ejemplo y por qué</span><span class="sxs-lookup"><span data-stu-id="d98cc-119">How This Sample is Designed and Why</span></span>  
 <span data-ttu-id="d98cc-120">El diseño se basa en las canalizaciones XML de envío y recepción predeterminadas, la promoción de propiedades, los filtros de suscripción y las programaciones de orquestación en [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] para enrutar mensajes.</span><span class="sxs-lookup"><span data-stu-id="d98cc-120">The design relies on the default send and receive XML pipelines, property promotion, subscription filters, and orchestration schedules within [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] to route messages.</span></span> <span data-ttu-id="d98cc-121">Los elementos de diseño y su justificación se enumeran en la tabla siguiente.</span><span class="sxs-lookup"><span data-stu-id="d98cc-121">Design elements and their justification are listed in the following table.</span></span>  
  
|<span data-ttu-id="d98cc-122">Elemento de diseño</span><span class="sxs-lookup"><span data-stu-id="d98cc-122">Design element</span></span>|<span data-ttu-id="d98cc-123">Razones seleccionadas</span><span class="sxs-lookup"><span data-stu-id="d98cc-123">Reason(s) selected</span></span>|  
|--------------------|--------------------------|  
|<span data-ttu-id="d98cc-124">Canalización de recepción XML predeterminada</span><span class="sxs-lookup"><span data-stu-id="d98cc-124">Default XML receive pipeline</span></span>|<span data-ttu-id="d98cc-125">-La canalización XMLReceive admite la promoción de propiedad; la canalización PassThruReceive no.</span><span class="sxs-lookup"><span data-stu-id="d98cc-125">-   The XMLReceive pipeline supports property promotion; the PassThruReceive pipeline does not.</span></span><br /><span data-ttu-id="d98cc-126">-El mensaje entrante está en formato XML y no necesita procesamiento más allá de desensamblado básico y la resolución de entidades.</span><span class="sxs-lookup"><span data-stu-id="d98cc-126">-   The inbound message is already in XML format and does not require processing beyond basic disassembly and party resolution.</span></span>|  
|<span data-ttu-id="d98cc-127">Enrutamiento para mensajes con errores</span><span class="sxs-lookup"><span data-stu-id="d98cc-127">Routing for failed messages</span></span>|<span data-ttu-id="d98cc-128">-Receive puertos suspender mensajes con errores y generar una confirmación negativa de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="d98cc-128">-   Receive ports suspend failed messages and generate a negative acknowledgment by default.</span></span> <span data-ttu-id="d98cc-129">Cuando el enrutamiento está activado, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] intenta enrutar los mensajes que no se pueden procesar hacia una aplicación suscriptora (por ejemplo, otro puerto de recepción o una programación de orquestación).</span><span class="sxs-lookup"><span data-stu-id="d98cc-129">When routing is enabled [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] attempts to route any message that fails processing to a subscribing application (such as another receive port or orchestration schedule).</span></span>|  
|<span data-ttu-id="d98cc-130">Promoción de propiedades</span><span class="sxs-lookup"><span data-stu-id="d98cc-130">Property promotion</span></span>|<span data-ttu-id="d98cc-131">-BizTalk Server depende de los campos de propiedades para efectuar el enrutamiento.</span><span class="sxs-lookup"><span data-stu-id="d98cc-131">-   BizTalk Server depends upon property fields to do routing.</span></span> <span data-ttu-id="d98cc-132">Los campos distintivos los utilizan las orquestaciones y no se pueden usar para enrutamiento.</span><span class="sxs-lookup"><span data-stu-id="d98cc-132">Distinguished fields are used by orchestrations and cannot be used for routing.</span></span>|  
|<span data-ttu-id="d98cc-133">Filtro de suscripción</span><span class="sxs-lookup"><span data-stu-id="d98cc-133">Subscription filter</span></span>|<span data-ttu-id="d98cc-134">-El filtro de suscripción realiza el enrutamiento mediante la captura de mensajes que cumplen uno o varios criterios basados en campos de propiedades.</span><span class="sxs-lookup"><span data-stu-id="d98cc-134">-   The subscription filter performs the routing by capturing messages that meet one or more criteria based on property fields.</span></span>|  
|<span data-ttu-id="d98cc-135">Programación de orquestación de BizTalk</span><span class="sxs-lookup"><span data-stu-id="d98cc-135">BizTalk orchestration schedule</span></span>|<span data-ttu-id="d98cc-136">: Proporciona la oportunidad de agregar información a los mensajes con errores.</span><span class="sxs-lookup"><span data-stu-id="d98cc-136">-   Provides the opportunity to add information to failed messages.</span></span><br /><span data-ttu-id="d98cc-137">-Habilita el enrutamiento de mensajes con errores a una ubicación dedicada para la intervención humana.</span><span class="sxs-lookup"><span data-stu-id="d98cc-137">-   Enables routing of failed messages to a dedicated location for human intervention.</span></span><br /><span data-ttu-id="d98cc-138">-Procesos informes de gastos reenviados.</span><span class="sxs-lookup"><span data-stu-id="d98cc-138">-   Processes resubmitted expense reports.</span></span>|  
|<span data-ttu-id="d98cc-139">XMLTransmit</span><span class="sxs-lookup"><span data-stu-id="d98cc-139">XMLTransmit</span></span>|<span data-ttu-id="d98cc-140">-Realiza el ensamblado básico de los mensajes XML salientes.</span><span class="sxs-lookup"><span data-stu-id="d98cc-140">-   Performs basic assembly of outgoing XML messages.</span></span> <span data-ttu-id="d98cc-141">La canalización PassThruTransmit no ofrece compatibilidad adicional.</span><span class="sxs-lookup"><span data-stu-id="d98cc-141">The PassThruTransmit pipeline provides no additional support.</span></span>|  
  
## <a name="where-to-find-this-sample"></a><span data-ttu-id="d98cc-142">Ubicación del ejemplo</span><span class="sxs-lookup"><span data-stu-id="d98cc-142">Where to Find This Sample</span></span>  
 <span data-ttu-id="d98cc-143">En este ejemplo se encuentra en <`Samples Path>`\Messaging\ErrorHandling\\.</span><span class="sxs-lookup"><span data-stu-id="d98cc-143">This sample is located at <`Samples Path>`\Messaging\ErrorHandling\\.</span></span>  
  
 <span data-ttu-id="d98cc-144">La siguiente tabla contiene una lista de archivos para este ejemplo.</span><span class="sxs-lookup"><span data-stu-id="d98cc-144">The following table contains a list of files for this sample.</span></span>  
  
|<span data-ttu-id="d98cc-145">Archivo</span><span class="sxs-lookup"><span data-stu-id="d98cc-145">File</span></span>|<span data-ttu-id="d98cc-146">Description</span><span class="sxs-lookup"><span data-stu-id="d98cc-146">Description</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="d98cc-147">Cleanup.bat</span><span class="sxs-lookup"><span data-stu-id="d98cc-147">Cleanup.bat</span></span>|<span data-ttu-id="d98cc-148">Se utiliza para anular la implementación de ensamblados y quitarlos de la caché de ensamblados global.</span><span class="sxs-lookup"><span data-stu-id="d98cc-148">Used to undeploy assemblies and remove them from the global assembly cache.</span></span><br /><br /> <span data-ttu-id="d98cc-149">Quita los puertos de envío y recepción.</span><span class="sxs-lookup"><span data-stu-id="d98cc-149">Removes send and receive ports.</span></span><br /><br /> <span data-ttu-id="d98cc-150">Quita los directorios virtuales de Internet Information Services (IIS) según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="d98cc-150">Removes Internet Information Services (IIS) virtual directories as needed.</span></span>|  
|<span data-ttu-id="d98cc-151">ErrorHandling.sln</span><span class="sxs-lookup"><span data-stu-id="d98cc-151">ErrorHandling.sln</span></span>|<span data-ttu-id="d98cc-152">Archivo de solución de Visual Studio para el ejemplo.</span><span class="sxs-lookup"><span data-stu-id="d98cc-152">Visual Studio solution file for the sample.</span></span>|  
|<span data-ttu-id="d98cc-153">ErrorHandlingBinding.xml</span><span class="sxs-lookup"><span data-stu-id="d98cc-153">ErrorHandlingBinding.xml</span></span>|<span data-ttu-id="d98cc-154">Archivo de enlace para el ejemplo.</span><span class="sxs-lookup"><span data-stu-id="d98cc-154">Binding file for the sample.</span></span>|  
|<span data-ttu-id="d98cc-155">Setup.bat</span><span class="sxs-lookup"><span data-stu-id="d98cc-155">Setup.bat</span></span>|<span data-ttu-id="d98cc-156">Se utiliza para crear e iniciar este ejemplo.</span><span class="sxs-lookup"><span data-stu-id="d98cc-156">Used to build and initialize this sample.</span></span>|  
|<span data-ttu-id="d98cc-157">Expense Report – John Doe.xml</span><span class="sxs-lookup"><span data-stu-id="d98cc-157">Expense Report – John Doe.xml</span></span>|<span data-ttu-id="d98cc-158">Ejemplo del documento de informe de gastos de InfoPath.</span><span class="sxs-lookup"><span data-stu-id="d98cc-158">Example expense report InfoPath document.</span></span>|  
|<span data-ttu-id="d98cc-159">Invalid Expense Report – John Doe.xml</span><span class="sxs-lookup"><span data-stu-id="d98cc-159">Invalid Expense Report – John Doe.xml</span></span>|<span data-ttu-id="d98cc-160">Ejemplo del documento de informe de gastos de InfoPath con datos no válidos.</span><span class="sxs-lookup"><span data-stu-id="d98cc-160">Example expense report InfoPath document with invalid data in it.</span></span>|  
|<span data-ttu-id="d98cc-161">En la carpeta ErrorHandler:</span><span class="sxs-lookup"><span data-stu-id="d98cc-161">In ErrorHandler folder:</span></span><br /><br /> <span data-ttu-id="d98cc-162">ErrorHandler.btproj</span><span class="sxs-lookup"><span data-stu-id="d98cc-162">ErrorHandler.btproj</span></span>|<span data-ttu-id="d98cc-163">Proyecto de BizTalk para la orquestación.</span><span class="sxs-lookup"><span data-stu-id="d98cc-163">BizTalk project for orchestration.</span></span>|  
|<span data-ttu-id="d98cc-164">En la carpeta ErrorHandler:</span><span class="sxs-lookup"><span data-stu-id="d98cc-164">In ErrorHandler folder:</span></span><br /><br /> <span data-ttu-id="d98cc-165">ResubmitLogic.odx</span><span class="sxs-lookup"><span data-stu-id="d98cc-165">ResubmitLogic.odx</span></span>|<span data-ttu-id="d98cc-166">Orquestación que se suscribe a los mensajes con errores, los envía al destinatario físico para su corrección y, a continuación, vuelve a enviar los mensajes corregidos al servidor para su enrutamiento.</span><span class="sxs-lookup"><span data-stu-id="d98cc-166">Orchestration that subscribes to failed messages, sends them to the human recipient for correction, and then resubmits corrected messages back into the server for routing.</span></span>|  
|<span data-ttu-id="d98cc-167">En la carpeta ErrorHandler:</span><span class="sxs-lookup"><span data-stu-id="d98cc-167">In ErrorHandler folder:</span></span><br /><br /> <span data-ttu-id="d98cc-168">SuspendMessage.odx</span><span class="sxs-lookup"><span data-stu-id="d98cc-168">SuspendMessage.odx</span></span>|<span data-ttu-id="d98cc-169">Orquestación usada para suspender mensajes que no se pueden procesar en la orquestación de control de errores.</span><span class="sxs-lookup"><span data-stu-id="d98cc-169">Orchestration used for suspending messages that cannot be processed within the error-handling orchestration.</span></span>|  
|<span data-ttu-id="d98cc-170">En la carpeta InfoPathForms:</span><span class="sxs-lookup"><span data-stu-id="d98cc-170">In InfoPathForms folder:</span></span><br /><br /> <span data-ttu-id="d98cc-171">Expense Report.xsn</span><span class="sxs-lookup"><span data-stu-id="d98cc-171">Expense Report.xsn</span></span><br /><br /> <span data-ttu-id="d98cc-172">Expense Report - Resubmit.xsn</span><span class="sxs-lookup"><span data-stu-id="d98cc-172">Expense Report - Resubmit.xsn</span></span>|<span data-ttu-id="d98cc-173">Formulario de InfoPath correspondiente al informe de gastos y formulario utilizado para ver y reenviar los mensajes con errores.</span><span class="sxs-lookup"><span data-stu-id="d98cc-173">Expense report InfoPath form and form used for viewing and resubmitting failed messages.</span></span>|  
|<span data-ttu-id="d98cc-174">En la carpeta PipelinesAndSchemas:</span><span class="sxs-lookup"><span data-stu-id="d98cc-174">In PipelinesAndSchemas folder:</span></span><br /><br /> <span data-ttu-id="d98cc-175">ExpenseReportSchema.xsd</span><span class="sxs-lookup"><span data-stu-id="d98cc-175">ExpenseReportSchema.xsd</span></span>|<span data-ttu-id="d98cc-176">Esquema XML para el documento de informe de gastos.</span><span class="sxs-lookup"><span data-stu-id="d98cc-176">XML schema for the expense report document.</span></span>|  
|<span data-ttu-id="d98cc-177">En la carpeta PipelinesAndSchemas:</span><span class="sxs-lookup"><span data-stu-id="d98cc-177">In PipelinesAndSchemas folder:</span></span><br /><br /> <span data-ttu-id="d98cc-178">PipelinesAndSchemas.btproj</span><span class="sxs-lookup"><span data-stu-id="d98cc-178">PipelinesAndSchemas.btproj</span></span>|<span data-ttu-id="d98cc-179">Proyecto de BizTalk para el ejemplo.</span><span class="sxs-lookup"><span data-stu-id="d98cc-179">BizTalk project for the sample.</span></span>|  
|<span data-ttu-id="d98cc-180">En la carpeta PipelinesAndSchemas:</span><span class="sxs-lookup"><span data-stu-id="d98cc-180">In PipelinesAndSchemas folder:</span></span><br /><br /> <span data-ttu-id="d98cc-181">PropertySchema.xsd</span><span class="sxs-lookup"><span data-stu-id="d98cc-181">PropertySchema.xsd</span></span>|<span data-ttu-id="d98cc-182">Esquema de propiedad del ejemplo.</span><span class="sxs-lookup"><span data-stu-id="d98cc-182">Property schema for the sample.</span></span>|  
  
## <a name="how-to-use-this-sample"></a><span data-ttu-id="d98cc-183">Uso del ejemplo</span><span class="sxs-lookup"><span data-stu-id="d98cc-183">How to Use This Sample</span></span>  
 <span data-ttu-id="d98cc-184">Este ejemplo proporciona un punto de partida para crear un procedimiento de control de errores propio.</span><span class="sxs-lookup"><span data-stu-id="d98cc-184">This sample provides a starting point for creating your own error handling procedure.</span></span>  
  
## <a name="building-and-initializing-this-sample"></a><span data-ttu-id="d98cc-185">Crear e inicializar este ejemplo</span><span class="sxs-lookup"><span data-stu-id="d98cc-185">Building and Initializing This Sample</span></span>  
  
#### <a name="to-build-and-initialize-the-compose-sample"></a><span data-ttu-id="d98cc-186">Para crear e inicializar el ejemplo de composición</span><span class="sxs-lookup"><span data-stu-id="d98cc-186">To build and initialize the Compose sample</span></span>  
  
1.  <span data-ttu-id="d98cc-187">En una ventana de comandos, desplácese a la siguiente carpeta:</span><span class="sxs-lookup"><span data-stu-id="d98cc-187">In a command window, navigate to the following folder:</span></span>  
  
     <span data-ttu-id="d98cc-188"><`Samples Path`>**\Messaging\ErrorHandling**</span><span class="sxs-lookup"><span data-stu-id="d98cc-188"><`Samples Path`>**\Messaging\ErrorHandling**</span></span>  
  
2.  <span data-ttu-id="d98cc-189">Ejecutar **Setup.bat**, que realiza las siguientes acciones:</span><span class="sxs-lookup"><span data-stu-id="d98cc-189">Run **Setup.bat**, which performs the following actions:</span></span>  
  
    -   <span data-ttu-id="d98cc-190">Crea tres carpetas: **ExpenseReportIn**, **ExpenseReportOut**, y **ResubmittedReportIn** en la ruta siguiente:</span><span class="sxs-lookup"><span data-stu-id="d98cc-190">Creates three folders: **ExpenseReportIn**, **ExpenseReportOut**, and **ResubmittedReportIn** under the following path:</span></span>  
  
         <span data-ttu-id="d98cc-191"><`Samples Path`>**\Messaging\ErrorHandling**</span><span class="sxs-lookup"><span data-stu-id="d98cc-191"><`Samples Path`>**\Messaging\ErrorHandling**</span></span>  
  
    -   <span data-ttu-id="d98cc-192">Copia y publica los formularios de InfoPath **Expense Report.xsn** y **Expense Report – Resubmit.xsn** en la carpeta **C:\Temp\InfoPathForms**.</span><span class="sxs-lookup"><span data-stu-id="d98cc-192">Copies and publishes the InfoPath forms **Expense Report.xsn** and **Expense Report – Resubmit.xsn** into the folder **C:\Temp\InfoPathForms**.</span></span>  
  
    -   <span data-ttu-id="d98cc-193">Compila los proyectos de [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] para este ejemplo.</span><span class="sxs-lookup"><span data-stu-id="d98cc-193">Compiles the [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] projects for this sample.</span></span>  
  
    -   <span data-ttu-id="d98cc-194">Crea un directorio virtual denominado **ExpenseReports**.</span><span class="sxs-lookup"><span data-stu-id="d98cc-194">Creates a virtual directory called **ExpenseReports**.</span></span>  
  
    -   <span data-ttu-id="d98cc-195">Crea una nueva aplicación de BizTalk denominada **Error Handling Sample** e implementa los ensamblados de ejemplo en ella.</span><span class="sxs-lookup"><span data-stu-id="d98cc-195">Creates a new BizTalk application called **Error Handling Sample** and deploys the sample assemblies into it.</span></span>  
  
    -   <span data-ttu-id="d98cc-196">Crea y enlaza las ubicaciones de recepción de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], así como los puertos de envío y recepción.</span><span class="sxs-lookup"><span data-stu-id="d98cc-196">Creates and binds the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] receive locations, and the send and receive ports.</span></span>  
  
    -   <span data-ttu-id="d98cc-197">Da de alta e inicia orquestaciones, habilita las ubicaciones de recepción e inicia los puertos de envío.</span><span class="sxs-lookup"><span data-stu-id="d98cc-197">Enlists and starts orchestrations, enables the receive locations, and starts the send ports.</span></span>  
  
         <span data-ttu-id="d98cc-198">Si opta por abrir y crear los proyectos de este ejemplo sin ejecutar Setup.bat, debe crear, en primer lugar, un par de claves de nombre seguro mediante la utilidad de nombre seguro de .NET Framework (sn.exe).</span><span class="sxs-lookup"><span data-stu-id="d98cc-198">If you choose to open and build the projects in this sample without running Setup.bat, you must first create a strong name key pair using the .NET Framework Strong Name utility (sn.exe).</span></span> <span data-ttu-id="d98cc-199">Utilice este par de claves para firmar los ensamblados de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="d98cc-199">Use this key pair to sign the sample assemblies.</span></span>  
  
3.  <span data-ttu-id="d98cc-200">Antes de intentar ejecutar este ejemplo, confirme que [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] no ha notificado ningún error durante el proceso de compilación o inicialización.</span><span class="sxs-lookup"><span data-stu-id="d98cc-200">Before attempting to run this sample, confirm that [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] did not report any errors during the build or initialization process.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="d98cc-201">Para deshacer los cambios realizados por Setup.bat, ejecute Cleanup.bat.</span><span class="sxs-lookup"><span data-stu-id="d98cc-201">To undo changes made by Setup.bat, run Cleanup.bat.</span></span> <span data-ttu-id="d98cc-202">Debe ejecutar Cleanup.bat antes de ejecutar Setup.bat por segunda vez.</span><span class="sxs-lookup"><span data-stu-id="d98cc-202">You must run Cleanup.bat before running Setup.bat a second time.</span></span>  
  
4.  <span data-ttu-id="d98cc-203">Si usa Internet Information Services (IIS) 7,0, deberá llevar a cabo más pasos de configuración para ajustar la definición del directorio virtual que corresponde a la ubicación de recepción HTTP de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] que usa el ejemplo.</span><span class="sxs-lookup"><span data-stu-id="d98cc-203">If you are using Internet Information Services (IIS) 7.0, you need to perform additional configuration steps to adjust the setting for the virtual directory that corresponds to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] HTTP receive location used by the sample.</span></span> <span data-ttu-id="d98cc-204">Para configurar IIS, lleve a cabo lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="d98cc-204">Configure IIS by doing the following:</span></span>  
  
    1.  <span data-ttu-id="d98cc-205">Mediante el administrador de IIS 7.0, cree un nuevo grupo de aplicaciones para el grupo Usuarios de hosts aislados de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d98cc-205">Using IIS 7.0 Manager, create a new application pool for the BizTalk Isolated Host Users group.</span></span>  
  
    2.  <span data-ttu-id="d98cc-206">Configure el grupo de aplicaciones para que se ejecute bajo la identidad del usuario de hosts aislados de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d98cc-206">Configure the application pool to run under the identity of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Isolated Host user.</span></span> <span data-ttu-id="d98cc-207">(También puede saltarse este paso si ya ha configurado un grupo de aplicaciones para otras ubicaciones de recepción de HTTP de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].)</span><span class="sxs-lookup"><span data-stu-id="d98cc-207">(You may skip this step if you already have an application pool configured for other [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] HTTP receive locations.)</span></span>  
  
    3.  <span data-ttu-id="d98cc-208">Configure el directorio virtual **ExpenseReport** para usar la recepción HTTP de grupo de aplicaciones creado en el paso anterior.</span><span class="sxs-lookup"><span data-stu-id="d98cc-208">Configure the virtual directory **ExpenseReport** to use the HTTP receive application pool created in the previous step.</span></span>  
  
     <span data-ttu-id="d98cc-209">Si todavía no dispone de una extensión de servidor Web para la extensión ISAPI BTSHTTPReceive.dll, créela y habilítela estableciendo su estado como permitido.</span><span class="sxs-lookup"><span data-stu-id="d98cc-209">If you do not already have a Web server extension for the BTSHTTPReceive.dll ISAPI extension, create and enable it by setting its status to "Allowed".</span></span> <span data-ttu-id="d98cc-210">Puede hacerlo en IIS 7.0 mediante la consola de administración de IIS (bien directamente en **herramientas administrativas** o mediante la consola de administración de equipos) como se indica a continuación:</span><span class="sxs-lookup"><span data-stu-id="d98cc-210">You can do this in IIS 7.0 by using the IIS Management console (either directly under **Administrative Tools** or through the Computer Management console) as follows:</span></span>  
  
    1.  <span data-ttu-id="d98cc-211">Expanda el **Administrador de Internet Information Services** árbol.</span><span class="sxs-lookup"><span data-stu-id="d98cc-211">Expand the **Internet Information Services Manager** tree.</span></span>  
  
    2.  <span data-ttu-id="d98cc-212">Haga clic en el **extensiones de servicio Web** carpeta.</span><span class="sxs-lookup"><span data-stu-id="d98cc-212">Click the **Web Service Extensions** folder.</span></span>  
  
    3.  <span data-ttu-id="d98cc-213">En el panel derecho de la consola de administración, haga clic en **agregar una nueva extensión de servicio Web**.</span><span class="sxs-lookup"><span data-stu-id="d98cc-213">In the right pane of the management console, click **Add a new Web Service extension**.</span></span>  
  
    4.  <span data-ttu-id="d98cc-214">En el **nueva extensión de servicio Web** cuadro de diálogo, haga clic en **agregar**.</span><span class="sxs-lookup"><span data-stu-id="d98cc-214">In the **New Web Service Extension** dialog box, click **Add**.</span></span>  
  
    5.  <span data-ttu-id="d98cc-215">En el **Agregar archivo** cuadro de diálogo, haga clic en **examinar** para seleccionar el archivo <`BizTalkInstallPath>`**\HttpReceive\BTSHTTPReceive.dll**y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="d98cc-215">In the **Add file** dialog box, click **Browse** to select the file <`BizTalkInstallPath>`**\HttpReceive\BTSHTTPReceive.dll**, and then click **OK**.</span></span>  
  
    6.  <span data-ttu-id="d98cc-216">Configure el directorio virtual **ExpenseReport** usar ruta de acceso local [!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]HTTPReceive</span><span class="sxs-lookup"><span data-stu-id="d98cc-216">Configure the virtual directory **ExpenseReport** to use local path [!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]HTTPReceive</span></span>  
  
     <span data-ttu-id="d98cc-217">Para obtener más información, consulte [cómo configurar IIS para una ubicación de recepción HTTP](../core/how-to-configure-iis-for-an-http-receive-location.md).</span><span class="sxs-lookup"><span data-stu-id="d98cc-217">For more information, see [How to Configure IIS for an HTTP Receive Location](../core/how-to-configure-iis-for-an-http-receive-location.md).</span></span>  
  
## <a name="running-the-sample"></a><span data-ttu-id="d98cc-218">Ejecutar el ejemplo</span><span class="sxs-lookup"><span data-stu-id="d98cc-218">Running the Sample</span></span>  
 <span data-ttu-id="d98cc-219">Antes de ejecutar el ejemplo con el informe de gastos correcto, use el procedimiento siguiente para verificar que el ejemplo "sin errores" funciona correctamente.</span><span class="sxs-lookup"><span data-stu-id="d98cc-219">Before running the sample with the correct expense report, use the following procedure to verify that the "no errors" case sample works correctly.</span></span>  
  
#### <a name="to-verify-that-the-no-errors-case-sample-works-correctly"></a><span data-ttu-id="d98cc-220">Para verificar que el ejemplo "sin errores" funciona correctamente</span><span class="sxs-lookup"><span data-stu-id="d98cc-220">To verify that the "no errors" case sample works correctly</span></span>  
  
1.  <span data-ttu-id="d98cc-221">Abra el formulario de InfoPath **Expense Report - John Doe.xml**.</span><span class="sxs-lookup"><span data-stu-id="d98cc-221">Open the InfoPath form **Expense Report - John Doe.xml**.</span></span> <span data-ttu-id="d98cc-222">Mire el **departamento** campo dentro del formulario.</span><span class="sxs-lookup"><span data-stu-id="d98cc-222">Look at the **Department** field within the form.</span></span> <span data-ttu-id="d98cc-223">Este campo debe estar establecido como "Marketing".</span><span class="sxs-lookup"><span data-stu-id="d98cc-223">This field should be set to "Marketing".</span></span>  
  
2.  <span data-ttu-id="d98cc-224">En la esquina superior izquierda de la ventana de InfoPath, haga clic en **enviar** o haga clic en **volver a enviar el informe de gastos**.</span><span class="sxs-lookup"><span data-stu-id="d98cc-224">In the upper-left corner of the InfoPath window, click **Submit** or click **Resubmit Expense Report**.</span></span> <span data-ttu-id="d98cc-225">Espere a que aparezca una ventana de confirmación que indique que el informe de gastos se ha enviado correctamente.</span><span class="sxs-lookup"><span data-stu-id="d98cc-225">Wait for a confirmation window that says the expense report was successfully submitted.</span></span>  
  
     <span data-ttu-id="d98cc-226">-OR-</span><span class="sxs-lookup"><span data-stu-id="d98cc-226">-OR-</span></span>  
  
     <span data-ttu-id="d98cc-227">Copie y pegue este archivo en el **ExpenseReportIn** carpeta.</span><span class="sxs-lookup"><span data-stu-id="d98cc-227">Copy and paste this file into the **ExpenseReportIn** folder.</span></span>  
  
3.  <span data-ttu-id="d98cc-228">Debería ver un nuevo archivo colocado en el **ExpenseReportOut** carpeta.</span><span class="sxs-lookup"><span data-stu-id="d98cc-228">You should see a new file dropped into the **ExpenseReportOut** folder.</span></span> <span data-ttu-id="d98cc-229">Este archivo es el mismo formulario de informe de gastos que se ha enviado en los pasos anteriores.</span><span class="sxs-lookup"><span data-stu-id="d98cc-229">This file is the same expense report form that was submitted during previous steps.</span></span>  
  
 <span data-ttu-id="d98cc-230">Después de confirmar el funcionamiento del ejemplo "sin errores", use el procedimiento siguiente para ejecutar el ejemplo con un informe de gastos incorrecto con el fin de desencadenar la funcionalidad de control de errores.</span><span class="sxs-lookup"><span data-stu-id="d98cc-230">After you confirm the "no errors" case, use the following procedure to run the sample with an incorrect expense report to trigger error-handling functionality.</span></span>  
  
#### <a name="to-trigger-error-handling"></a><span data-ttu-id="d98cc-231">Para desencadenar el control de errores</span><span class="sxs-lookup"><span data-stu-id="d98cc-231">To trigger error handling</span></span>  
  
1.  <span data-ttu-id="d98cc-232">Abra el formulario de InfoPath **Invalid Expense Report - John Doe.xml**.</span><span class="sxs-lookup"><span data-stu-id="d98cc-232">Open the InfoPath form **Invalid Expense Report - John Doe.xml**.</span></span> <span data-ttu-id="d98cc-233">Mire el **departamento** campo dentro del formulario.</span><span class="sxs-lookup"><span data-stu-id="d98cc-233">Look at the **Department** field within the form.</span></span> <span data-ttu-id="d98cc-234">Este campo está establecido con un valor no válido.</span><span class="sxs-lookup"><span data-stu-id="d98cc-234">This field is set to some invalid value.</span></span>  
  
2.  <span data-ttu-id="d98cc-235">En la esquina superior izquierda de la ventana de InfoPath, haga clic en **enviar**.</span><span class="sxs-lookup"><span data-stu-id="d98cc-235">In the upper-left corner of the InfoPath window, click **Submit**.</span></span> <span data-ttu-id="d98cc-236">Espere a que aparezca una ventana de confirmación que indique que el informe de gastos se ha enviado correctamente.</span><span class="sxs-lookup"><span data-stu-id="d98cc-236">Wait for a confirmation window that says the expense report was successfully submitted.</span></span>  
  
     <span data-ttu-id="d98cc-237">-OR-</span><span class="sxs-lookup"><span data-stu-id="d98cc-237">-OR-</span></span>  
  
     <span data-ttu-id="d98cc-238">Copie y pegue este archivo en el **ExpenseReportIn** carpeta.</span><span class="sxs-lookup"><span data-stu-id="d98cc-238">Copy and paste this file into the **ExpenseReportIn** folder.</span></span>  
  
3.  <span data-ttu-id="d98cc-239">Debería ver un nuevo archivo denominado **ErrorReport_\<***fecha*_*tiempo***\>.xml** coloca en el  **ExpenseReportOut** carpeta.</span><span class="sxs-lookup"><span data-stu-id="d98cc-239">You should see a new file called **ErrorReport_\<***date*_*time***\>.xml** dropped into the **ExpenseReportOut** folder.</span></span>  
  
     <span data-ttu-id="d98cc-240">Abra el archivo y observe que se trata del informe de gastos enviado en el paso anterior, pero con la información de errores agregada al principio.</span><span class="sxs-lookup"><span data-stu-id="d98cc-240">Open this file and observe that this is the expense report submitted in the previous step but with the error information added at the beginning.</span></span>  
  
4.  <span data-ttu-id="d98cc-241">Sustituya el valor incorrecto del departamento por "Marketing" y, a continuación, haga clic en **enviar** en la esquina superior izquierda de la ventana de InfoPath.</span><span class="sxs-lookup"><span data-stu-id="d98cc-241">Replace the erroneous department value with "Marketing", and then click **Submit** in the upper-left corner of the InfoPath window.</span></span>  
  
     <span data-ttu-id="d98cc-242">-OR-</span><span class="sxs-lookup"><span data-stu-id="d98cc-242">-OR-</span></span>  
  
     <span data-ttu-id="d98cc-243">Copie y pegue este archivo en el **ResubmittedReportIn** carpeta.</span><span class="sxs-lookup"><span data-stu-id="d98cc-243">Copy and paste this file into the **ResubmittedReportIn** folder.</span></span>  
  
5.  <span data-ttu-id="d98cc-244">Debería ver un nuevo archivo creado en el **ExpenseReportOut** carpeta.</span><span class="sxs-lookup"><span data-stu-id="d98cc-244">You should see a new file created in the **ExpenseReportOut** folder.</span></span> <span data-ttu-id="d98cc-245">Este archivo es el informe de gastos corregido que se ha enviado al servidor.</span><span class="sxs-lookup"><span data-stu-id="d98cc-245">This file is the corrected expense report that was resubmitted into the server.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d98cc-246">Vea también</span><span class="sxs-lookup"><span data-stu-id="d98cc-246">See Also</span></span>  
 <span data-ttu-id="d98cc-247">[Usar el enrutamiento de mensajes con errores](../core/using-failed-message-routing.md) </span><span class="sxs-lookup"><span data-stu-id="d98cc-247">[Using Failed Message Routing](../core/using-failed-message-routing.md) </span></span>  
 [<span data-ttu-id="d98cc-248">Messaging (carpeta de ejemplos de BizTalk Server)</span><span class="sxs-lookup"><span data-stu-id="d98cc-248">Messaging (BizTalk Server Samples Folder)</span></span>](../core/messaging-biztalk-server-samples-folder.md)
---
title: "Consideraciones al publicar servicios WCF con WCF adaptadores de recepción | Documentos de Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- publishing, WCF services
- WCF adapters, best practices
- WCF adapters, receive adapters
- WCF services, publishing
- best practices, WCF adapters
ms.assetid: 797b7ffd-534c-4f09-9738-fb17b208bc96
caps.latest.revision: "34"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 30175e7966d565306c45820f1a6c2e22e4611876
ms.sourcegitcommit: 5abd0ed3f9e4858ffaaec5481bfa8878595e95f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/28/2017
---
# <a name="considerations-when-publishing-wcf-services-with-the-wcf-receive-adapters"></a><span data-ttu-id="84057-102">Consideraciones al publicar servicios WCF con los adaptadores de recepción WCF</span><span class="sxs-lookup"><span data-stu-id="84057-102">Considerations When Publishing WCF Services with the WCF Receive Adapters</span></span>
<span data-ttu-id="84057-103">Este tema proporciona información que debe tenerse en cuenta a la hora de publicar servicios WCF con los adaptadores de recepción WCF.</span><span class="sxs-lookup"><span data-stu-id="84057-103">This topic provides information that you should take into consideration when publishing WCF services with the WCF receive adapters.</span></span>  <span data-ttu-id="84057-104">Publicar un servicio mediante un adaptador WCF permite que un cliente WCF lo pueda llamar del mismo modo que si fuera un Servicio WCF convencional.</span><span class="sxs-lookup"><span data-stu-id="84057-104">Publishing a service using a WCF adapter allows it to be called by a WCF client as if it were a typical WCF service.</span></span>  
  
## <a name="in-process-hosting"></a><span data-ttu-id="84057-105">Hosts de tipo En curso</span><span class="sxs-lookup"><span data-stu-id="84057-105">In-Process Hosting</span></span>  
 <span data-ttu-id="84057-106">Hospedar la ubicación de recepción en el espacio del proceso de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], btsntsvc.exe, permite disfrutar de las ventajas que ofrece el desarrollo y la implementación simplificados.</span><span class="sxs-lookup"><span data-stu-id="84057-106">Hosting the receive location within the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] process space, btsntsvc.exe, allows the benefits of simplified development and deployment.</span></span> <span data-ttu-id="84057-107">Además, crea más instancias de host que hospedar en IIS para aprovechar las capacidades de elevada disponibilidad y equilibrio de carga de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="84057-107">Additionally, it creates more host instances than hosting in IIS to take advantage of the high-availability and load balancing capabilities of  [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span>  <span data-ttu-id="84057-108">Para obtener información de hospedaje fuera de la [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] proceso en IIS, consulte [configurar IIS para los adaptadores de recepción de WCF aislados](../core/configuring-iis-for-the-isolated-wcf-receive-adapters.md).</span><span class="sxs-lookup"><span data-stu-id="84057-108">For information in hosting outside of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] process in IIS refer to [Configuring IIS for the Isolated WCF Receive Adapters](../core/configuring-iis-for-the-isolated-wcf-receive-adapters.md).</span></span>  
  
## <a name="set-the-isoneway-property-of-wcf-services-published-with-the-wcf-adapters-except-for-the-wcf-netmsmq-receive-adapter-to-false"></a><span data-ttu-id="84057-109">Establezca en false la propiedad IsOneWay de los Servicios WCF publicados con los adaptadores de WCF (excepto el adaptador de recepción WCF-NetMsmq).</span><span class="sxs-lookup"><span data-stu-id="84057-109">Set the IsOneWay property of WCF services published with the WCF adapters (except for the WCF-NetMsmq receive adapter) to false</span></span>  
 <span data-ttu-id="84057-110">El **System.ServiceModel.OperationContractAttribute.IsOneWay** propiedad de los servicios WCF publicados con los adaptadores WCF, excepto para servicios publicados con WCF-NetMsmq: donde se establece en el adaptador de recepción **true**  : se establece en **false** incluso para ubicaciones de recepción la unidireccionales.</span><span class="sxs-lookup"><span data-stu-id="84057-110">The **System.ServiceModel.OperationContractAttribute.IsOneWay** property of WCF services published with the WCF adapters—except for services published with the WCF-NetMsmq receive adapter where it is set to **true** —is set to **false** even for the one-way receive locations.</span></span> <span data-ttu-id="84057-111">Si el **IsOneWay** propiedad está establecida en **false**, incluso los métodos que devuelven un **void** dar lugar a un mensaje de respuesta.</span><span class="sxs-lookup"><span data-stu-id="84057-111">If the **IsOneWay** property is set to **false**, even methods that return a **void** result in a reply message.</span></span> <span data-ttu-id="84057-112">En este caso, la infraestructura crea y envía un mensaje vacío para indicar al usuario que llama que el método se ha devuelto.</span><span class="sxs-lookup"><span data-stu-id="84057-112">In this case, the infrastructure creates and sends an empty message to indicate to the caller that the method has returned.</span></span> <span data-ttu-id="84057-113">Esta aproximación permite habilitar la infraestructura para enviar excepciones iniciadas por la operación del servicio devuelta al cliente.</span><span class="sxs-lookup"><span data-stu-id="84057-113">Using this approach enables the infrastructure to send exceptions thrown by the service operation back to the client.</span></span>  
  
 <span data-ttu-id="84057-114">Para consumir servicios WCF publicados con los adaptadores de WCF (excepto el adaptador de recepción WCF-netmsmq) en el que **IsOneWay** es **false**, **IsOneWay** propiedad en el cliente debe establecerse en **false** como se indica a continuación:</span><span class="sxs-lookup"><span data-stu-id="84057-114">To consume WCF services published with the WCF adapters (except for the WCF-NetMsmq receive adapter) in which **IsOneWay** is **false**, the **IsOneWay** property on the client side must be set to **false** as follows:</span></span>  
  
```  
[ServiceContract(Namespace="Microsoft.WCF.Documentation")]  
  public interface ISampleService{  
    [OperationContract(IsOneWay=false, ReplyAction="*",Action="…"]  
    string SampleMethod(string msg);  
}  
```  
  
> [!NOTE]
>  <span data-ttu-id="84057-115">Dado que el valor predeterminado de la **IsOneWay** propiedad es **false**, no es necesario especificar la propiedad en el código.</span><span class="sxs-lookup"><span data-stu-id="84057-115">Because the default value of the **IsOneWay** property is **false**, you do not have to specify the property in the code.</span></span>  
  
## <a name="the-replyaction-property-of-the-operationcontractattribute-on-the-client-side-should-be-set-to--an-asterisk-when-consuming-wcf-services-published-with-one-way-receive-locations"></a><span data-ttu-id="84057-116">La propiedad ReplyAction de OperationContractAttribute del equipo cliente debe establecerse en "*" (un asterisco) al consumir servicios WCP publicados con ubicaciones de recepción unidireccionales.</span><span class="sxs-lookup"><span data-stu-id="84057-116">The ReplyAction property of the OperationContractAttribute on the client side should be set to "*" (an asterisk) when consuming WCF services published with one-way receive locations</span></span>  
 <span data-ttu-id="84057-117">El **System.ServiceModel.OperationContractAttribute.ReplyAction** propiedad de la **System.ServiceModel.OperationContractAttribute** puede utilizarse en el cliente para especificar el valor de la Acción de SOAP para los mensajes de respuesta de los servicios de WCF.</span><span class="sxs-lookup"><span data-stu-id="84057-117">The **System.ServiceModel.OperationContractAttribute.ReplyAction** property of the **System.ServiceModel.OperationContractAttribute** can be used on the client side to specify the value of the SOAP action for the response messages from WCF services.</span></span>  
  
 <span data-ttu-id="84057-118">Además de especificar un valor en particular para el encabezado de acción del mensaje de respuesta (para notificar al cliente que es una respuesta y la acción que debe seguirse), también puede especificar la cadena "*" (un asterisco).</span><span class="sxs-lookup"><span data-stu-id="84057-118">In addition to specifying a particular value for the action header of the reply message (to notify the client this is a reply and what action to be taken), you can also specify the string "*" (an asterisk).</span></span> <span data-ttu-id="84057-119">Especificar un asterisco en la aplicación cliente le ordena al cliente que no valide la acción de respuesta en los mensajes de respuesta que envía el servicio.</span><span class="sxs-lookup"><span data-stu-id="84057-119">Specifying an asterisk in a client application instructs the client not to validate the reply action in response messages that the service sends.</span></span>  
  
 <span data-ttu-id="84057-120">Para consumir un WCF servicio publicado por un unidireccional ubicación de recepción, el método de proxy para el servicio WCF debe devolver **void**, en cuyo caso el método proxy espera que el servicio WCF enviará un mensaje vacío para indicar al llamador que se ha devuelto el método.</span><span class="sxs-lookup"><span data-stu-id="84057-120">To consume a WCF service published by a one-way receive location, the proxy method for the WCF service must return **void**, in which case the proxy method expects that the WCF service will send an empty message to indicate to the caller that the method has returned.</span></span> <span data-ttu-id="84057-121">El método proxy reciba este mensaje vacío, la **ReplyAction** propiedad de la **OperationContractAttribute** debe establecerse en "*" (un asterisco) como se indica a continuación:</span><span class="sxs-lookup"><span data-stu-id="84057-121">For the proxy method to receive this empty message, the **ReplyAction** property of the **OperationContractAttribute** should be set to "*" (an asterisk) as follows:</span></span>  
  
```  
[ServiceContract(Namespace="Microsoft.WCF.Documentation")]  
  public interface ISampleService{  
    [OperationContract(IsOneWay=false, ReplyAction="*",Action="…"]  
    string SampleMethod(string msg);  
}  
```  
  
> [!NOTE]
>  <span data-ttu-id="84057-122">No es necesario establecer la **ReplyAction** propiedad a "\*" (un asterisco) para el adaptador de WCF-NetMsmq, porque el adaptador WCF-NetMsmq requiere que los clientes WCF establecer el **IsOneWay** propiedad **true**.</span><span class="sxs-lookup"><span data-stu-id="84057-122">You do not have to set the **ReplyAction** property to "\*" (an asterisk) for the WCF-NetMsmq adapter, because the WCF-NetMsmq adapter requires the WCF clients to set the **IsOneWay** property to **true**.</span></span>  
  
## <a name="an-isolated-host-instance-can-run-only-one-adapter"></a><span data-ttu-id="84057-123">Una instancia de host aislado sólo puede ejecutar un adaptador</span><span class="sxs-lookup"><span data-stu-id="84057-123">An isolated host instance can run only one adapter</span></span>  
 <span data-ttu-id="84057-124">Una instancia de host aislado sólo puede ejecutar un adaptador.</span><span class="sxs-lookup"><span data-stu-id="84057-124">An isolated host instance can run only one adapter.</span></span> <span data-ttu-id="84057-125">Si configura los controladores de recepción de varios adaptadores aislados como los adaptadores de HTTP, SOAP y WCF con un host aislado, debe crear varios grupos de aplicaciones, uno para cada adaptador.</span><span class="sxs-lookup"><span data-stu-id="84057-125">If you configure the receive handlers of multiple isolated adapters such as HTTP, SOAP, and WCF adapters with one isolated host, you must create multiple application pools, one application pool for each adapter.</span></span> <span data-ttu-id="84057-126">Para obtener más información acerca de los hosts aislados de BizTalk, consulte [habilitar servicios Web](../core/enabling-web-services.md).</span><span class="sxs-lookup"><span data-stu-id="84057-126">For more information about BizTalk isolated hosts, see [Enabling Web Services](../core/enabling-web-services.md).</span></span>  
  
## <a name="use-the-template----content-specified-by-template-option-when-sending-non-xml-content-as-response-messages"></a><span data-ttu-id="84057-127">Utilice la opción "Plantilla: contenido especificado por plantilla" al enviar contenido que no sea XML como mensajes de respuesta</span><span class="sxs-lookup"><span data-stu-id="84057-127">Use the "Template -- content specified by template" option when sending non-XML content as response messages</span></span>  
 <span data-ttu-id="84057-128">Los adaptadores de WCF con **cuerpo--cuerpo de mensaje de respuesta de BizTalk** (el valor predeterminado) opción no permite el envío de mensajes que no son XML como las imágenes de mapa de bits y datos de caracteres.</span><span class="sxs-lookup"><span data-stu-id="84057-128">The WCF adapters with **Body -- BizTalk response message body** (the default value) option do not allow sending non-XML messages such as character data and bitmap images.</span></span> <span data-ttu-id="84057-129">Puede usar el **plantilla--contenido especificado por plantilla** opción para los adaptadores de WCF enviar mensajes no XML.</span><span class="sxs-lookup"><span data-stu-id="84057-129">You can use the **Template -- content specified by template** option for the WCF adapters to send non-XML messages.</span></span> <span data-ttu-id="84057-130">Para obtener más información acerca de cómo usar la plantilla, vea [especificar el cuerpo del mensaje para los adaptadores de WCF](../core/specifying-the-message-body-for-the-wcf-adapters.md).</span><span class="sxs-lookup"><span data-stu-id="84057-130">For more information about how to use the template, see [Specifying the Message Body for the WCF Adapters](../core/specifying-the-message-body-for-the-wcf-adapters.md).</span></span>  
  
## <a name="setting-up-the-permissions-for-a-wcf-service-published-with-the-wcf-service-publishing-wizard"></a><span data-ttu-id="84057-131">Configurar los permisos para un Servicio WCF publicado con el Asistente para publicación de Servicio WCF.</span><span class="sxs-lookup"><span data-stu-id="84057-131">Setting up the permissions for a WCF service published with the WCF Service Publishing Wizard</span></span>  
 <span data-ttu-id="84057-132">Al usar aplicaciones ASP.NET creadas mediante el Asistente para publicación de Servicio WCF en la plataforma [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] o [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)], pueden aparecer problemas relacionados con el acceso a los DLL durante la invocación del Servicio WCF.</span><span class="sxs-lookup"><span data-stu-id="84057-132">When using ASP.NET applications created with the WCF Service Publishing Wizard on the [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] or [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] platform, errors relating to accessing DLLs during WCF service invocation may occur.</span></span> <span data-ttu-id="84057-133">Estos errores suelen estar relacionados a problemas con el valor predeterminado de seguridad de [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] y [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="84057-133">These errors are typically related to issues with default [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] and [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] security.</span></span> <span data-ttu-id="84057-134">Para obtener más información acerca de estos errores, vea el artículo de Microsoft Help and Support denominado "Recibe un"System.IO.FileNotFoundException"Error cuando la aplicación cliente llama un servicio Web" en el sitio Web de ayuda y soporte técnico en [http:// ¿go.Microsoft.com/fwlink/? LinkId = 43659](http://go.microsoft.com/fwlink/?LinkId=43659).</span><span class="sxs-lookup"><span data-stu-id="84057-134">For more information about these errors, see the Microsoft Help and Support article called "You Receive a "System.IO.FileNotFoundException" Error When the Client Application Calls a Web Service" on the Help and Support Web site at [http://go.microsoft.com/fwlink/?LinkId=43659](http://go.microsoft.com/fwlink/?LinkId=43659).</span></span>  
  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="84057-135"> requiere que, al proceso que ejecuta el Servicio WCF, se le concedan los permisos apropiados si un host de tipo en curso o un host aislado ejecutan el servicio.</span><span class="sxs-lookup"><span data-stu-id="84057-135"> requires that the process running the WCF service is granted the appropriate permissions whether an in-process host or an isolated host runs the service.</span></span> <span data-ttu-id="84057-136">En [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] y [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)], el grupo de Windows predeterminado para hosts aislados es el Grupo de usuarios de hosts aislados. Como consecuencia, si se agregan los permisos a este grupo, se debería solucionar el problema.</span><span class="sxs-lookup"><span data-stu-id="84057-136">Under [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] and [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] the default Windows group for isolated hosts is the Isolated Host Users Group, so adding the permissions to the Isolated Host Users Group should resolve this issue.</span></span>  
  
#### <a name="to-add-the-permissions-to-the-isolated-host-users-group"></a><span data-ttu-id="84057-137">Para agregar los permisos al Grupo de usuarios de hosts aislados</span><span class="sxs-lookup"><span data-stu-id="84057-137">To add the permissions to the Isolated Host Users Group</span></span>  
  
1.  <span data-ttu-id="84057-138">En el Explorador de Microsoft Windows, localice el directorio %windir%\temp.</span><span class="sxs-lookup"><span data-stu-id="84057-138">In Microsoft Windows Explorer, locate the %windir%\temp directory.</span></span>  
  
2.  <span data-ttu-id="84057-139">Haga clic en % windir%\temp y, a continuación, haga clic en **propiedades**.</span><span class="sxs-lookup"><span data-stu-id="84057-139">Right-click %windir%\temp, and then click **Properties**.</span></span>  
  
3.  <span data-ttu-id="84057-140">En el **propiedades** cuadro de diálogo, haga clic en el **seguridad** ficha.</span><span class="sxs-lookup"><span data-stu-id="84057-140">In the **Properties** dialog box, click the **Security** tab.</span></span>  
  
4.  <span data-ttu-id="84057-141">Haga clic en **agregar**, seleccione **el grupo de usuarios de hosts aislados**y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="84057-141">Click **Add**, select **the Isolated Host Users Group**, and then click **OK**.</span></span>  
  
## <a name="setting-up-the-permissions-for-a-wcf-receive-location-with-the-wcf-netmsmq-adapter"></a><span data-ttu-id="84057-142">Configurar los permisos para una ubicación de recepción WCF con el adaptador de WCF-NetMsmq</span><span class="sxs-lookup"><span data-stu-id="84057-142">Setting up the permissions for a WCF receive location with the WCF-NetMsmq adapter</span></span>  
 <span data-ttu-id="84057-143">Cuando un cliente de WCF que utiliza NetMsmqBinding envía un mensaje a un Servicio WCF publicado con el adaptador de WCF-NetMsmq, éste dirige el mensaje a la cola de destino, que es la cola administrada por el administrador de colas del servicio.</span><span class="sxs-lookup"><span data-stu-id="84057-143">When a WCF client using the NetMsmqBinding sends a message to a WCF service published with the WCF-NetMsmq adapter, it addresses the message to the target queue, which is the queue managed by the service's queue manager.</span></span> <span data-ttu-id="84057-144">El administrador de colas del cliente envía el mensaje a una cola de transmisión (o saliente).</span><span class="sxs-lookup"><span data-stu-id="84057-144">The queue manager on the client sends the message to a transmission (or outgoing) queue.</span></span> <span data-ttu-id="84057-145">La cola de transmisión es una cola situada en el administrador de colas del cliente que almacena mensajes para transmitirlos a la cola de destino.</span><span class="sxs-lookup"><span data-stu-id="84057-145">The transmission queue is a queue on the client-side queue manager that stores messages for transmission to the target queue.</span></span>  
  
 <span data-ttu-id="84057-146">El administrador de colas del servicio acepta los mensajes dirigidos a las colas de destino que le pertenecen y, además, almacena los mensajes.</span><span class="sxs-lookup"><span data-stu-id="84057-146">The service's queue manager accepts messages addressed to the target queues it owns and stores the messages.</span></span> <span data-ttu-id="84057-147">A continuación, el servicio realiza solicitudes para leer de la cola de destino y el administrador de colas entrega los mensajes al servicio.</span><span class="sxs-lookup"><span data-stu-id="84057-147">Then, the service makes requests to read from the target queue, and the queue manager delivers the messages to the service.</span></span> <span data-ttu-id="84057-148">Por este motivo, la cuenta del servicio de la instancia de host de BizTalk que aloja la ubicación de recepción debe disponer de los permisos necesarios para leer desde la cola de destino.</span><span class="sxs-lookup"><span data-stu-id="84057-148">For this reason, the service account for the BizTalk host instance hosting the receive location should have the permissions to read from the target queue.</span></span>  
  
## <a name="use-an-empty-body-path-expression-to-receive-a-soap-message-with-character-data-in-the-content-of-the-soap-body-element"></a><span data-ttu-id="84057-149">Utilizar una expresión de ruta de cuerpo vacía para recibir un mensaje SOAP con datos de caracteres en el contenido del elemento de cuerpo SOAP</span><span class="sxs-lookup"><span data-stu-id="84057-149">Use an empty body path expression to receive a SOAP message with character data in the content of the SOAP Body element</span></span>  
 <span data-ttu-id="84057-150">Adaptador para crear un mensaje de BizTalk a partir de un mensaje de respuesta entrante con datos de caracteres en el contenido del mensaje SOAP de recepción de WCF **cuerpo** elemento, como se muestra en el ejemplo siguiente, que debe conservarse el **ruta de cuerpo expresión** cuadro de texto vacío en la **mensaje** ficha en el cuadro de diálogo de propiedades de transporte WCF adaptador.</span><span class="sxs-lookup"><span data-stu-id="84057-150">For a WCF receive adapter to create a BizTalk message from an incoming response message with character data in the content of the SOAP **Body** element, as shown in the following example, you should leave the **Body path expression** text box empty on the **Message** tab in the WCF adapter transport properties dialog box.</span></span>  
  
```  
<s:Envelope xmlns:s="http://www.w3.org/2003/05/soap-envelope" xmlns:a="http://www.w3.org/2005/08/addressing">  
    <s:Header>  
      ...  
    </s:Header>  
    <s:Body>Contoso</s:Body>  
</s:Envelope>  
```  
  
 <span data-ttu-id="84057-151">Si selecciona el **sobres** o **cuerpo** opción, el adaptador no puede crear el mensaje de BizTalk desde el mensaje entrante anterior.</span><span class="sxs-lookup"><span data-stu-id="84057-151">If you select the **Envelope** or **Body** option, the adapter cannot create the BizTalk message from the previous incoming message.</span></span> <span data-ttu-id="84057-152">El mensaje no se suspende porque los mensajes que producen error en el procesamiento del cálculo de referencia de SOAP entrante no se suspenden.</span><span class="sxs-lookup"><span data-stu-id="84057-152">The message is not suspended because messages that fail in the inbound SOAP marshaling processing are not suspended.</span></span> <span data-ttu-id="84057-153">Para obtener más información acerca de cómo utilizar la expresión de ruta de acceso de cuerpo en el **mensaje** pestaña, vea [especificar el cuerpo del mensaje para los adaptadores de WCF](../core/specifying-the-message-body-for-the-wcf-adapters.md).</span><span class="sxs-lookup"><span data-stu-id="84057-153">For more information about how to use the body path expression on the **Message** tab, see [Specifying the Message Body for the WCF Adapters](../core/specifying-the-message-body-for-the-wcf-adapters.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="84057-154">Puede usar la herramienta TraceViewer (SvcTraceViewer.exe) de Windows SDK mediante la configuración de BTSNTSvc.exe.config.file.</span><span class="sxs-lookup"><span data-stu-id="84057-154">You can use the TraceViewer tool (SvcTraceViewer.exe) in the Windows SDK by configuring the BTSNTSvc.exe.config.file.</span></span> <span data-ttu-id="84057-155">Para obtener más información sobre el SDK de Windows, consulte "What's New in the Windows SDK" en [http://go.microsoft.com/fwlink/?LinkId=75219](http://go.microsoft.com/fwlink/?LinkId=75219).</span><span class="sxs-lookup"><span data-stu-id="84057-155">For more information about the Windows SDK, see "What's New in the Windows SDK" at [http://go.microsoft.com/fwlink/?LinkId=75219](http://go.microsoft.com/fwlink/?LinkId=75219).</span></span> <span data-ttu-id="84057-156">Para obtener más información acerca de la herramienta TraceViewer, vea "TraceViewer Tool (SvcTraceViewer.exe)" en [http://go.microsoft.com/fwlink/?LinkId=75218](http://go.microsoft.com/fwlink/?LinkId=75218).</span><span class="sxs-lookup"><span data-stu-id="84057-156">For more information about the TraceViewer tool, see "TraceViewer Tool (SvcTraceViewer.exe)" at [http://go.microsoft.com/fwlink/?LinkId=75218](http://go.microsoft.com/fwlink/?LinkId=75218).</span></span>  
  
## <a name="using-schemas-that-reference-other-schemas"></a><span data-ttu-id="84057-157">Utilizar esquemas que hacen referencia a otros esquemas</span><span class="sxs-lookup"><span data-stu-id="84057-157">Using schemas that reference other schemas</span></span>  
 <span data-ttu-id="84057-158">Puede usar el **redefinir**, **incluyen**, y **importar** elementos cuando los esquemas se hacen grandes y complejos, o cuando los esquemas que representan los distintos tipos de mensajes de instancia tienen algunas partes en común.</span><span class="sxs-lookup"><span data-stu-id="84057-158">You can use the **redefine**, **include**, and **import** elements when your schemas become large and complex, or when the schemas that represent your different types of instance messages have some portions in common.</span></span> <span data-ttu-id="84057-159">Puede resultar útil combinar esquemas más pequeños en los esquemas que en última instancia definen la estructura de los mensajes de instancias que planea intercambiar con socios comerciales.</span><span class="sxs-lookup"><span data-stu-id="84057-159">It can be useful to combine smaller schemas into the schemas that ultimately define the structure of the instance messages you plan to exchange with trading partners.</span></span> <span data-ttu-id="84057-160">Puede publicar estos esquemas como servicios WCF utilizando el Asistente para publicación de Servicio WCF de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="84057-160">You can publish these schemas as WCF services by using the BizTalk WCF Service Publishing Wizard.</span></span>  
  
 <span data-ttu-id="84057-161">Debe utilizar el Asistente para publicación de Servicio WCF de BizTalk para crear artefactos de BizTalk necesarios para consumir los servicios WCF desde un proyecto de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="84057-161">You should use the BizTalk WCF Service Consuming Wizard to create the BizTalk artifacts necessary to consume the WCF services from a BizTalk project.</span></span> <span data-ttu-id="84057-162">Si desea consumir los servicios WCF desde una aplicación .NET, debe utilizar la herramienta de metadatos del modelo de servicio (Svcutil.exe) para crear la clase proxy para los servicios WCF.</span><span class="sxs-lookup"><span data-stu-id="84057-162">If you want to consume the WCF services from a .NET application, you should use the Service Model Metadata Utility tool (Svcutil.exe) to create the proxy class for the WCF services.</span></span> <span data-ttu-id="84057-163">Para obtener más información sobre cómo usar esquemas que hacen referencia a otros esquemas, vea [esquemas que usar otros esquemas](../core/schemas-that-use-other-schemas.md) y [cómo crear esquemas que usar otros esquemas](../core/how-to-create-schemas-that-use-other-schemas.md).</span><span class="sxs-lookup"><span data-stu-id="84057-163">For more information about how to use schemas that reference other schemas, see [Schemas That Use Other Schemas](../core/schemas-that-use-other-schemas.md) and [How to Create Schemas That Use Other Schemas](../core/how-to-create-schemas-that-use-other-schemas.md).</span></span> <span data-ttu-id="84057-164">Para obtener más información acerca de Svcutil.exe, vea "Service Model Metadata utilidad Tool (Svcutil.exe)" en [http://go.microsoft.com/fwlink/?LinkID=74696](http://go.microsoft.com/fwlink/?LinkID=74696).</span><span class="sxs-lookup"><span data-stu-id="84057-164">For more information about Svcutil.exe, see "Service Model Metadata Utility Tool (Svcutil.exe)" at [http://go.microsoft.com/fwlink/?LinkID=74696](http://go.microsoft.com/fwlink/?LinkID=74696).</span></span>  
  
 <span data-ttu-id="84057-165">La siguiente tabla muestra las limitaciones y consideraciones que necesita tener en cuenta a la hora de consumir servicios WCF publicados con esquemas que utilizan otros esquemas.</span><span class="sxs-lookup"><span data-stu-id="84057-165">The following table shows the limitations and considerations that you need to know when consuming published WCF services with schemas that use other schemas.</span></span>  
  
|<span data-ttu-id="84057-166">Elemento de esquema XML</span><span class="sxs-lookup"><span data-stu-id="84057-166">XML schema element</span></span>|<span data-ttu-id="84057-167">Consumir servicios WCF publicados con el Asistente para publicación de Servicio WCF de BizTalk</span><span class="sxs-lookup"><span data-stu-id="84057-167">Consuming WCF services published with the BizTalk WCF Service Publishing Wizard</span></span>|<span data-ttu-id="84057-168">Consumir servicios WCF alojados por aplicaciones .NET</span><span class="sxs-lookup"><span data-stu-id="84057-168">Consuming WCF services hosted by .NET applications</span></span>|  
|------------------------|-------------------------------------------------------------------------------------|--------------------------------------------------------|  
|<span data-ttu-id="84057-169">\<importar\></span><span class="sxs-lookup"><span data-stu-id="84057-169">\<import\></span></span>|<span data-ttu-id="84057-170">Compatible con el Asistente para consumición del Servicio WCF de BizTalk y Svcutil.exe</span><span class="sxs-lookup"><span data-stu-id="84057-170">Supported with both the BizTalk WCF Service Consuming Wizard and Svcutil.exe</span></span>|<span data-ttu-id="84057-171">Compatible con el Asistente para consumición del Servicio WCF de BizTalk y Svcutil.exe</span><span class="sxs-lookup"><span data-stu-id="84057-171">Supported with both the BizTalk WCF Service Consuming Wizard and Svcutil.exe</span></span>|  
|<span data-ttu-id="84057-172">\<incluir\></span><span class="sxs-lookup"><span data-stu-id="84057-172">\<include\></span></span>|<span data-ttu-id="84057-173">Compatible con el Asistente de consumición de servicio WCF de BizTalk y Svcutil.exe **Nota:** Svcutil.exe puede generar un mensaje de advertencia al crear la clase de proxy.</span><span class="sxs-lookup"><span data-stu-id="84057-173">Supported with both the BizTalk WCF Service Consuming Wizard and Svcutil.exe **Note:**  Svcutil.exe may raise a warning message when creating the proxy class.</span></span>|<span data-ttu-id="84057-174">Compatible con el Asistente de consumición de servicio WCF de BizTalk y Svcutil.exe **Nota:** Svcutil.exe puede generar un mensaje de advertencia al crear la clase de proxy.</span><span class="sxs-lookup"><span data-stu-id="84057-174">Supported with both the BizTalk WCF Service Consuming Wizard and Svcutil.exe **Note:**  Svcutil.exe may raise a warning message when creating the proxy class.</span></span>|  
|<span data-ttu-id="84057-175">\<volver a definir\></span><span class="sxs-lookup"><span data-stu-id="84057-175">\<redefine\></span></span>|<span data-ttu-id="84057-176">-Compatible con el servicio de WCF de BizTalk consumiendo Asistente</span><span class="sxs-lookup"><span data-stu-id="84057-176">-   Supported with the BizTalk WCF Service Consuming Wizard</span></span><br /><span data-ttu-id="84057-177">-Compatibilidad svcutil.exe limitada **Nota:** Svcutil.exe cuenta con la misma limitación para el **redefinir** tiene elemento como XSD.exe.</span><span class="sxs-lookup"><span data-stu-id="84057-177">-   Limited support by Svcutil.exe **Note:**  Svcutil.exe has the same limitation for the **redefine** element as XSD.exe has.</span></span>|<span data-ttu-id="84057-178">Compatible con el Asistente de consumición de servicio WCF de BizTalk y Svcutil.exe **Nota:** Svcutil.exe puede generar un mensaje de advertencia al crear la clase de proxy.</span><span class="sxs-lookup"><span data-stu-id="84057-178">Supported with both the BizTalk WCF Service Consuming Wizard and Svcutil.exe **Note:**  Svcutil.exe may raise a warning message when creating the proxy class.</span></span>|  
  
> [!NOTE]
>  <span data-ttu-id="84057-179">Svcutil.exe puede generar un mensaje de advertencia al crear la clase de proxy en el servicio de WCF de BizTalk publicado con los esquemas mediante la **incluyen** y **redefinir** elementos.</span><span class="sxs-lookup"><span data-stu-id="84057-179">Svcutil.exe may raise a warning message when creating the proxy class against the published BizTalk WCF service with the schemas using the **include** and **redefine** elements.</span></span> <span data-ttu-id="84057-180">Por ejemplo, para indicar que el elemento global ya ha sido declarado.</span><span class="sxs-lookup"><span data-stu-id="84057-180">For example, "The global element has already been declared."</span></span>  
  
## <a name="ensure-that-an-in-process-wcf-receive-location-is-not-disabled-after-you-change-the-computer-name-part-in-its-service-endpoint-address"></a><span data-ttu-id="84057-181">Garantizar que una ubicación de recepción WCF en curso no se encuentra deshabilitada después de cambiar la parte del nombre del equipo en la dirección de extremo de servicio</span><span class="sxs-lookup"><span data-stu-id="84057-181">Ensure that an in-process WCF receive location is not disabled after you change the computer name part in its service endpoint address</span></span>  
 <span data-ttu-id="84057-182">Si cambia la parte del nombre del equipo en el **dirección (URI)** ubicación de recepción del cuadro de texto de un WCF que se ejecutan en un proceso, le recomendamos que use la consola de administración de BizTalk para comprobar si la ubicación de recepción se sigue ejecutando.</span><span class="sxs-lookup"><span data-stu-id="84057-182">If you change the computer name part in the **Address (URI)** text box of a running in-process WCF receive location, we recommend that you use the BizTalk Administration console to check whether the receive location is still running.</span></span> <span data-ttu-id="84057-183">Por ejemplo, si cambia una dirección de punto de conexión de servicio mediante WCF-NetTcp adaptador de recepción, **net.tcp://\<***el nombre del equipo***\>/samplepath**a **net.tcp://localhost/samplepath**, la ubicación de recepción puede deshabilitarse con una **Service.InvalidOperationException**.</span><span class="sxs-lookup"><span data-stu-id="84057-183">For example, if you change a service endpoint address using the WCF-NetTcp receive adapter, **net.tcp://\<***Your Computer Name***\>/samplepath**, to **net.tcp://localhost/samplepath**, the receive location may be disabled with a **Service.InvalidOperationException**.</span></span> <span data-ttu-id="84057-184">Si sólo modifica la parte del nombre del equipo en la dirección de extremo de servicio sin modificar la parte de la ruta, asegúrese de que la ubicación de recepción no se encuentra deshabilitada y habilítela si es necesario.</span><span class="sxs-lookup"><span data-stu-id="84057-184">If you change only the computer name part in the service endpoint address without modifying the path part, make sure that the receive location is not disabled, and enable it if necessary.</span></span>  
  
## <a name="set-the-appropriate-msdtc-security-configuration-options-on-client-computers-communicating-with-remote-wcf-receive-locations-through-a-transaction-protocol"></a><span data-ttu-id="84057-185">Establezca las opciones apropiadas de configuración de seguridad de MSDTC en los equipos clientes que se comunican con ubicaciones de recepción WCF remotas a través de un protocolo de transacción</span><span class="sxs-lookup"><span data-stu-id="84057-185">Set the appropriate MSDTC Security Configuration options on client computers communicating with remote WCF receive locations through a transaction protocol</span></span>  
 <span data-ttu-id="84057-186">Adaptadores de recepción WCF-NetTcp, WCF-WSHttp y WCF-NetNamedPipe pueden participar en procesos de coordinación transaccionales que los clientes de WCF administran con la **WS-AtomicTransaction** y **OleTransaction**protocolos de transacción.</span><span class="sxs-lookup"><span data-stu-id="84057-186">WCF-NetTcp, WCF-WSHttp, and WCF-NetNamedPipe receive adapters can participate in transactional coordination processes that WCF clients manage with the **WS-AtomicTransaction** and **OleTransaction** transaction protocols.</span></span> <span data-ttu-id="84057-187">Los mensajes pueden transmitirse a las ubicaciones de recepción de destino y pueden eliminarse de la base de datos de cuadro de mensajes en un contexto transaccional usando el protocolo WS-AtomicTransaction.</span><span class="sxs-lookup"><span data-stu-id="84057-187">Messages can be transmitted to the destination receive locations and deleted from the MessageBox database in a transactional context by using the transaction protocols.</span></span>  
  
 <span data-ttu-id="84057-188">Para comunicarse con el servidor remoto de ubicaciones de recepción WCF mediante el uso de los protocolos de transacción, debe configurar de manera adecuada MSDTC **configuración de seguridad** opciones en los equipos de cliente WCF.</span><span class="sxs-lookup"><span data-stu-id="84057-188">To communicate with remote WCF receive locations by using the transaction protocols, you must appropriately configure MSDTC **Security Configuration** options on WCF client computers.</span></span> <span data-ttu-id="84057-189">En la tabla siguiente se enumera los valores necesarios para las opciones que están disponibles en el MSDTC **configuración de seguridad** cuadro de diálogo:</span><span class="sxs-lookup"><span data-stu-id="84057-189">The following table lists the required values for the options that are available in the MSDTC **Security Configuration** dialog box:</span></span>  
  
|<span data-ttu-id="84057-190">Opción de configuración</span><span class="sxs-lookup"><span data-stu-id="84057-190">Configuration option</span></span>|<span data-ttu-id="84057-191">Valor predeterminado</span><span class="sxs-lookup"><span data-stu-id="84057-191">Default value</span></span>|<span data-ttu-id="84057-192">Valor recomendado</span><span class="sxs-lookup"><span data-stu-id="84057-192">Recommended value</span></span>|  
|--------------------------|-------------------|-----------------------|  
|<span data-ttu-id="84057-193">Acceso de DTC a la red</span><span class="sxs-lookup"><span data-stu-id="84057-193">Network DTC Access</span></span>|<span data-ttu-id="84057-194">Deshabilitado</span><span class="sxs-lookup"><span data-stu-id="84057-194">Disabled</span></span>|<span data-ttu-id="84057-195">Habilitado</span><span class="sxs-lookup"><span data-stu-id="84057-195">Enabled</span></span>|  
|<span data-ttu-id="84057-196">Permitir salientes</span><span class="sxs-lookup"><span data-stu-id="84057-196">Allow Outbound</span></span>|<span data-ttu-id="84057-197">Deshabilitado</span><span class="sxs-lookup"><span data-stu-id="84057-197">Disabled</span></span>|<span data-ttu-id="84057-198">Habilitado</span><span class="sxs-lookup"><span data-stu-id="84057-198">Enabled</span></span>|  
|<span data-ttu-id="84057-199">Se requiere autenticación mutua</span><span class="sxs-lookup"><span data-stu-id="84057-199">Mutual Authentication Required</span></span>|<span data-ttu-id="84057-200">Habilitado</span><span class="sxs-lookup"><span data-stu-id="84057-200">Enabled</span></span>|<span data-ttu-id="84057-201">Habilitada si recepción remotos correspondientes ejecutan Windows Server 2003 SP1 o SP2 ubicaciones y se configuran con **requiere autenticación mutua**.</span><span class="sxs-lookup"><span data-stu-id="84057-201">Enabled if the corresponding remote receive locations are running Windows Server 2003 SP1 or SP2, and are configured with **Mutual Authentication Required**.</span></span>|  
|<span data-ttu-id="84057-202">Se requiere autenticación de llamada entrante</span><span class="sxs-lookup"><span data-stu-id="84057-202">Incoming Caller Authentication Required</span></span>|<span data-ttu-id="84057-203">Deshabilitado</span><span class="sxs-lookup"><span data-stu-id="84057-203">Disabled</span></span>|<span data-ttu-id="84057-204">Habilitada si se ejecuta MSDTC en un clúster.</span><span class="sxs-lookup"><span data-stu-id="84057-204">Enabled if running MSDTC on a cluster.</span></span>|  
  
 <span data-ttu-id="84057-205">Después de aplicar estos cambios, deberá reiniciar el servicio MSDTC.</span><span class="sxs-lookup"><span data-stu-id="84057-205">After you apply these changes, you have to restart the MSDTC service.</span></span>  
  
 <span data-ttu-id="84057-206">Para obtener acceso a MSDTC **configuración de seguridad** diálogo cuadro, siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="84057-206">To access the MSDTC **Security Configuration** dialog box, follow these steps:</span></span>  
  
1.  <span data-ttu-id="84057-207">Haga clic en **iniciar**, haga clic en **ejecutar**y el tipo de **dcomcnfg** para iniciar el **servicios de componentes** consola de administración.</span><span class="sxs-lookup"><span data-stu-id="84057-207">Click **Start**, click **Run**, and type **dcomcnfg** to launch the **Component Services** Management console.</span></span>  
  
2.  <span data-ttu-id="84057-208">Expanda **servicios de componentes**, expanda **equipos**, haga clic en **Mi PC**y, a continuación, haga clic en **propiedades**.</span><span class="sxs-lookup"><span data-stu-id="84057-208">Expand **Component Services**, expand **Computers**, right-click **My Computer**, and then click **Properties**.</span></span>  
  
3.  <span data-ttu-id="84057-209">En el **propiedades de Mi PC** cuadro de diálogo, haga clic en el **MSDTC** ficha y, a continuación, haga clic en **configuración de seguridad** para mostrar la **la configuración de seguridad**  cuadro de diálogo.</span><span class="sxs-lookup"><span data-stu-id="84057-209">In the **My Computer Properties** dialog box, click the **MSDTC** tab, and then click **Security Configuration** to display the **Security Configuration** dialog box.</span></span>  
  
## <a name="explanation-of-the-soap-wrapper-when-using-the-biztalk-wcf-service-publishing-wizard"></a><span data-ttu-id="84057-210">Explicación del contenedor SOAP cuando se usa al Asistente para publicación de Servicio WCF de BizTalk</span><span class="sxs-lookup"><span data-stu-id="84057-210">Explanation of the SOAP wrapper when using the BizTalk WCF Service Publishing Wizard</span></span>  
 <span data-ttu-id="84057-211">Cuando se expone una orquestación como servicio de [!INCLUDE[firstref_btsWinCommFoundation](../includes/firstref-btswincommfoundation-md.md)] mediante el Asistente para publicación de Servicio [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)], se genera un contenedor.</span><span class="sxs-lookup"><span data-stu-id="84057-211">When an orchestration is exposed as a [!INCLUDE[firstref_btsWinCommFoundation](../includes/firstref-btswincommfoundation-md.md)] service by using the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Service Publishing Wizard, a wrapper is generated.</span></span> <span data-ttu-id="84057-212">Este contenedor usa el nombre del método del puerto en el mensaje XML al que se envía el mensaje.</span><span class="sxs-lookup"><span data-stu-id="84057-212">This wrapper uses the method name of the port in the XML message to which the message is sent.</span></span> <span data-ttu-id="84057-213">Este contenedor es el valor predeterminado para los sobres SOAP de Microsoft</span><span class="sxs-lookup"><span data-stu-id="84057-213">This wrapper is the default for Microsoft SOAP envelopes.</span></span> <span data-ttu-id="84057-214">y permite a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] envolver el mensaje SOAP de varias partes en un mensaje de WCF para que el adaptador pueda transmitirlo al extremo.</span><span class="sxs-lookup"><span data-stu-id="84057-214">It allows [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] to wrap the multi-part SOAP message in one WCF message to be transmitted to the endpoint by the adapter.</span></span>  
  
 <span data-ttu-id="84057-215">Se recomienda que el remitente use un contenedor y el destinatario lo espere, o bien que el remitente no use un contenedor y el destinatario espere el mensaje de [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] sin procesar.</span><span class="sxs-lookup"><span data-stu-id="84057-215">As a best practice, either the sender should use a wrapper and the receiver should expect it, or the sender should not use a wrapper and the receiver should expect the raw [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] message.</span></span> <span data-ttu-id="84057-216">Si no se acuerda previamente si se va a usar un contenedor o no, se pueden producir problemas de compatibilidad entre lo que se envía y lo que se recibe.</span><span class="sxs-lookup"><span data-stu-id="84057-216">Failure to agree ahead of time on whether to use a wrapper can cause incompatibility issues between what is sent and what is received.</span></span>
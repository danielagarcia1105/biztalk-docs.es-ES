---
title: Loans Processing Using Business Rules (ejemplo de BizTalk Server) | Documentos de Microsoft
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- examples, business rules
- business rules, examples
ms.assetid: 3e1c80c6-adc1-4a0f-83fd-409ce1b8f21f
caps.latest.revision: "28"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 82476c440f1bae482eff5308f1a5238f8bd85d92
ms.sourcegitcommit: 3fc338e52d5dbca2c3ea1685a2faafc7582fe23a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 12/01/2017
---
# <a name="loans-processing-using-business-rules-biztalk-server-sample"></a><span data-ttu-id="c9930-102">Préstamos procesamiento con reglas de negocios (ejemplo de BizTalk Server)</span><span class="sxs-lookup"><span data-stu-id="c9930-102">Loans Processing Using Business Rules (BizTalk Server Sample)</span></span>
<span data-ttu-id="c9930-103">En el ejemplo Loans Processing Using Business Rules se muestra cómo usar un conjunto de reglas administrado en una orquestación y cómo usar una combinación de entradas conocidas como hechos para calcular la configuración de algunos campos en un documento que se está procesando.</span><span class="sxs-lookup"><span data-stu-id="c9930-103">The Loans Processing Using Business Rules sample demonstrates how to use a set of rules managed within an orchestration, and how to use a combination of inputs known as facts, to calculate settings for some fields within a document being processed.</span></span> <span data-ttu-id="c9930-104">Los hechos pueden ser el resultado de la llamada a un ensamblado basado en .NET, de los valores recuperados del XML del mensaje o de los datos recuperados de una base de datos.</span><span class="sxs-lookup"><span data-stu-id="c9930-104">Facts can be the result of calling a .NET-based assembly, the values retrieved from the XML of the message, or the data retrieved from a database.</span></span> <span data-ttu-id="c9930-105">En el ejemplo también se muestra cómo puede cambiar las reglas en cualquier momento, lo que afecta a los cálculos posteriores sin tener que volver a realizar la implementación.</span><span class="sxs-lookup"><span data-stu-id="c9930-105">The sample also demonstrates how you can change the rules at any time, affecting subsequent calculations without the need to redeploy.</span></span>  
  
## <a name="what-this-sample-does"></a><span data-ttu-id="c9930-106">Descripción del ejemplo</span><span class="sxs-lookup"><span data-stu-id="c9930-106">What This Sample Does</span></span>  
 <span data-ttu-id="c9930-107">En este ejemplo se muestran estas funciones en el contexto de un escenario de procesamiento de préstamos simplificado.</span><span class="sxs-lookup"><span data-stu-id="c9930-107">This sample demonstrates these capabilities within the context of a simplified loan processing scenario.</span></span> <span data-ttu-id="c9930-108">La orquestación de BizTalk Server recoge y procesa una solicitud de préstamo, que se conoce también como un escenario de préstamo, en formato de mensaje XML.</span><span class="sxs-lookup"><span data-stu-id="c9930-108">BizTalk Server orchestration picks up and processes a loan application, also known as a loan case, in XML message format.</span></span> <span data-ttu-id="c9930-109">Esta orquestación usa el Motor de reglas de negocios para evaluar los mensajes entrantes en base a las reglas, modifica el mensaje con el resultado de la aplicación de las reglas y, a continuación, escribe el mensaje como un archivo en la carpeta de salida.</span><span class="sxs-lookup"><span data-stu-id="c9930-109">This orchestration uses the Business Rule Engine to evaluate incoming messages according to the rules, modifying the message with the result of the application of the rules, and then writing the message as a file to an output folder.</span></span>  
  
 <span data-ttu-id="c9930-110">Basadas en hechos de varios orígenes, incluido el mensaje que se va a procesar, este ejemplo establece el **IncomeStatus**, **CommitmentsStatus**, **EmploymentStatus**y  **ResidencyStatus** elementos del mensaje que se va a procesar.</span><span class="sxs-lookup"><span data-stu-id="c9930-110">Based on facts from several sources, including the message being processed, this sample sets the **IncomeStatus**, **CommitmentsStatus**, **EmploymentStatus**, and **ResidencyStatus** elements of the message being processed.</span></span>  
  
## <a name="where-to-find-this-sample"></a><span data-ttu-id="c9930-111">Ubicación del ejemplo</span><span class="sxs-lookup"><span data-stu-id="c9930-111">Where to Find This Sample</span></span>  
 <span data-ttu-id="c9930-112">\<*Ejemplos de ruta de acceso*\>\Business Rules\Loans Processing using Business Rules\\</span><span class="sxs-lookup"><span data-stu-id="c9930-112">\<*Samples Path*\>\Business Rules\Loans Processing using Business Rules\\</span></span>  
  
 <span data-ttu-id="c9930-113">En la tabla siguiente se enumeran los archivos del ejemplo y se describe su propósito.</span><span class="sxs-lookup"><span data-stu-id="c9930-113">The following table shows the files in this sample and describes their purpose.</span></span>  
  
|<span data-ttu-id="c9930-114">Archivos</span><span class="sxs-lookup"><span data-stu-id="c9930-114">File(s)</span></span>|<span data-ttu-id="c9930-115">Description</span><span class="sxs-lookup"><span data-stu-id="c9930-115">Description</span></span>|  
|---------------|-----------------|  
|<span data-ttu-id="c9930-116">Case.xsd</span><span class="sxs-lookup"><span data-stu-id="c9930-116">Case.xsd</span></span>|<span data-ttu-id="c9930-117">Archivo de esquema para solicitudes de préstamos entrantes, que se conocen también como escenarios de préstamos.</span><span class="sxs-lookup"><span data-stu-id="c9930-117">Schema file for inbound loan applications, otherwise known as loan cases.</span></span>|  
|<span data-ttu-id="c9930-118">Cleanup.bat</span><span class="sxs-lookup"><span data-stu-id="c9930-118">Cleanup.bat</span></span>|<span data-ttu-id="c9930-119">Se utiliza para anular la implementación de ensamblados y quitarlos de la caché de ensamblados global (GAC).</span><span class="sxs-lookup"><span data-stu-id="c9930-119">Used to undeploy assemblies and remove them from the global assembly cache (GAC).</span></span> <span data-ttu-id="c9930-120">Quita los puertos de envío y recepción.</span><span class="sxs-lookup"><span data-stu-id="c9930-120">Removes send and receive ports.</span></span> <span data-ttu-id="c9930-121">Quita los directorios virtuales de los Servicios de Microsoft Internet Information (IIS) según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="c9930-121">Removes Microsoft Internet Information Services (IIS) virtual directories as needed.</span></span>|  
|<span data-ttu-id="c9930-122">Create_CustInfo_Table.sql</span><span class="sxs-lookup"><span data-stu-id="c9930-122">Create_CustInfo_Table.sql</span></span>|<span data-ttu-id="c9930-123">Secuencia de comandos de SQL para la creación de la tabla CustInfo en la base de datos de ejemplo Northwind de SQL.</span><span class="sxs-lookup"><span data-stu-id="c9930-123">SQL script for creating the CustInfo table in the SQL Northwind sample database.</span></span>|  
|<span data-ttu-id="c9930-124">LoanProcessorBinding.xml</span><span class="sxs-lookup"><span data-stu-id="c9930-124">LoanProcessorBinding.xml</span></span>|<span data-ttu-id="c9930-125">Se utiliza para la instalación automatizada, como el enlace de puerto.</span><span class="sxs-lookup"><span data-stu-id="c9930-125">Used for automated setup such as port binding.</span></span>|  
|<span data-ttu-id="c9930-126">LoansProcessor.btproj, LoansProcessor.sln</span><span class="sxs-lookup"><span data-stu-id="c9930-126">LoansProcessor.btproj, LoansProcessor.sln</span></span>|<span data-ttu-id="c9930-127">Proyecto de BizTalk y archivos de solución para este ejemplo.</span><span class="sxs-lookup"><span data-stu-id="c9930-127">BizTalk project and solution files for this sample.</span></span>|  
|<span data-ttu-id="c9930-128">My Sample Service.odx</span><span class="sxs-lookup"><span data-stu-id="c9930-128">My Sample Service.odx</span></span>|<span data-ttu-id="c9930-129">Orquestación de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] para este ejemplo.</span><span class="sxs-lookup"><span data-stu-id="c9930-129">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] orchestration for this sample.</span></span>|  
|<span data-ttu-id="c9930-130">sampleLoan.xml</span><span class="sxs-lookup"><span data-stu-id="c9930-130">sampleLoan.xml</span></span>|<span data-ttu-id="c9930-131">Archivo de entrada de ejemplo, con valores vacíos para los cuatro elementos de estado al final de la estructura XML en el archivo.</span><span class="sxs-lookup"><span data-stu-id="c9930-131">Sample input file, with empty values for the four status elements at the end of the XML structure in the file.</span></span>|  
|<span data-ttu-id="c9930-132">Setup.bat</span><span class="sxs-lookup"><span data-stu-id="c9930-132">Setup.bat</span></span>|<span data-ttu-id="c9930-133">Se utiliza para crear e iniciar este ejemplo.</span><span class="sxs-lookup"><span data-stu-id="c9930-133">Used to build and initialize this sample.</span></span>|  
|<span data-ttu-id="c9930-134">En la carpeta \CreateRules:</span><span class="sxs-lookup"><span data-stu-id="c9930-134">In the \CreateRules folder:</span></span><br /><br /> <span data-ttu-id="c9930-135">App.ico, AssemblyInfo.cs, Case.xsd, CreateLoanProcessingPolicy.csproj, CreateLoanProcessingPolicy.sln, WriteToBRL.cs</span><span class="sxs-lookup"><span data-stu-id="c9930-135">App.ico, AssemblyInfo.cs, Case.xsd, CreateLoanProcessingPolicy.csproj, CreateLoanProcessingPolicy.sln, WriteToBRL.cs</span></span>|<span data-ttu-id="c9930-136">Archivos de proyecto, de solución, de origen y archivos relacionados de Visual C# usados para crear la aplicación que genera, mediante programación, las reglas en el conjunto.</span><span class="sxs-lookup"><span data-stu-id="c9930-136">Visual C# project, solution, source, and related files used to create the application that programmatically creates the rules in the set.</span></span> <span data-ttu-id="c9930-137">Para obtener ejemplos sobre la generación mediante programación de conjuntos de reglas, vea el archivo de origen WriteToBRL.cs.</span><span class="sxs-lookup"><span data-stu-id="c9930-137">For examples of programmatically building sets of rules, refer to the source file WriteToBRL.cs.</span></span>|  
|<span data-ttu-id="c9930-138">En la carpeta \myFactRetriever:</span><span class="sxs-lookup"><span data-stu-id="c9930-138">In the \myFactRetriever folder:</span></span><br /><br /> <span data-ttu-id="c9930-139">AssemblyInfo.cs</span><span class="sxs-lookup"><span data-stu-id="c9930-139">AssemblyInfo.cs</span></span><br /><br /> <span data-ttu-id="c9930-140">FactRetrieverForLoansProcessing.cs</span><span class="sxs-lookup"><span data-stu-id="c9930-140">FactRetrieverForLoansProcessing.cs</span></span><br /><br /> <span data-ttu-id="c9930-141">myFactRetriever.csproj</span><span class="sxs-lookup"><span data-stu-id="c9930-141">myFactRetriever.csproj</span></span><br /><br /> <span data-ttu-id="c9930-142">myFactRetriever.sln</span><span class="sxs-lookup"><span data-stu-id="c9930-142">myFactRetriever.sln</span></span>|<span data-ttu-id="c9930-143">Archivos de proyecto, de solución, de origen y archivos relacionados de Visual C# usados para crear un ensamblado que pueda utilizarse para recuperar información de la tabla CustInfo, agregada anteriormente a la base de datos de ejemplo Northwind de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c9930-143">Visual C# project, solution, source, and related files used to create an assembly that you use to retrieve information from the CustInfo table added earlier to the Northwind sample SQL Server database.</span></span>|  
  
## <a name="building-and-initializing-this-sample"></a><span data-ttu-id="c9930-144">Crear e inicializar este ejemplo</span><span class="sxs-lookup"><span data-stu-id="c9930-144">Building and Initializing This Sample</span></span>  
  
#### <a name="to-build-and-initialize-the-loans-processing-using-business-rules-sample"></a><span data-ttu-id="c9930-145">Para crear e inicializar el ejemplo Loans Processing Using Business Rules</span><span class="sxs-lookup"><span data-stu-id="c9930-145">To build and initialize the Loans Processing Using Business Rules sample</span></span>  
  
1.  <span data-ttu-id="c9930-146">Asegúrese de que la base de datos Northwind esté instalada en el equipo.</span><span class="sxs-lookup"><span data-stu-id="c9930-146">Make sure that you have the Northwind database on your machine.</span></span>  
  
    > [!IMPORTANT]
    >  <span data-ttu-id="c9930-147">Para ejecutar este ejemplo, debe tener la base de datos de ejemplo Northwind de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c9930-147">To run this sample, you must have the Northwind SQL Server sample database.</span></span> <span data-ttu-id="c9930-148">[Descargar](https://www.microsoft.com/download/details.aspx?id=23654)e instalar.</span><span class="sxs-lookup"><span data-stu-id="c9930-148">[Download](https://www.microsoft.com/download/details.aspx?id=23654), and install.</span></span> 
  
2.  <span data-ttu-id="c9930-149">En una ventana de comandos, desplácese a la siguiente carpeta:</span><span class="sxs-lookup"><span data-stu-id="c9930-149">In a command window, navigate to the following folder:</span></span>  
  
     <span data-ttu-id="c9930-150">\<*Ejemplos de ruta de acceso*\>\Business Rules\Loans Processing using Business Rules</span><span class="sxs-lookup"><span data-stu-id="c9930-150">\<*Samples Path*\>\Business Rules\Loans Processing using Business Rules</span></span>  
  
3.  <span data-ttu-id="c9930-151">Ejecute el archivo Setup.bat que realiza las acciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="c9930-151">Run the file Setup.bat, which performs the following actions:</span></span>  
  
    -   <span data-ttu-id="c9930-152">Realiza una limpieza de GAC para eliminar los datos residuales de ejecuciones anteriores de este ejemplo.</span><span class="sxs-lookup"><span data-stu-id="c9930-152">Cleans up the GAC to eliminate any residual data from previous runs of this sample.</span></span>  
  
    -   <span data-ttu-id="c9930-153">Compila e implementa el programa de administrador de almacenes de datos, myFactRetreiever.dll.</span><span class="sxs-lookup"><span data-stu-id="c9930-153">Compiles and deploys the fact retriever program, myFactRetreiever.dll.</span></span>  
  
    -   <span data-ttu-id="c9930-154">Mediante el uso del archivo de secuencia de comandos SQL Create_CustInfo_Table.sql, agrega una tabla llamada CustInfo a la base de datos de ejemplo Northwind de SQL.</span><span class="sxs-lookup"><span data-stu-id="c9930-154">Using the SQL script file Create_CustInfo_Table.sql, adds a table named CustInfo to the Northwind sample SQL database.</span></span>  
  
    -   <span data-ttu-id="c9930-155">Realiza una limpieza del almacén de reglas de SQL compartido para eliminar los residuos de ejecuciones anteriores de este ejemplo.</span><span class="sxs-lookup"><span data-stu-id="c9930-155">Cleans up the shared SQL rule store to eliminate residue of previous runs of this sample.</span></span>  
  
    -   <span data-ttu-id="c9930-156">Crea, publica e implementa la versión más reciente (1.0) del conjunto de reglas de procesamiento de préstamos.</span><span class="sxs-lookup"><span data-stu-id="c9930-156">Creates, publishes, and deploys the most recent version (1.0) of the loans processing rule set.</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="c9930-157">Puede usar la herramienta Compositor de reglas de negocio que se proporciona con [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] para examinar las reglas que se han establecido mediante programación.</span><span class="sxs-lookup"><span data-stu-id="c9930-157">You can use the Business Rule Composer tool supplied with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] to examine the rules that have been set programmatically.</span></span>  
  
    -   <span data-ttu-id="c9930-158">Crea las carpetas de entrada (In) y de salida (Out) para este ejemplo.</span><span class="sxs-lookup"><span data-stu-id="c9930-158">Creates the input (In) and output (Out) folders for this sample.</span></span>  
  
    -   <span data-ttu-id="c9930-159">Compila e implementa los proyectos restantes de [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] de este ejemplo, incluido el proyecto de BizTalk que contiene la orquestación usada para coordinar el ejemplo.</span><span class="sxs-lookup"><span data-stu-id="c9930-159">Compiles and deploys the remaining [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] projects for this sample, including the BizTalk project that contains the orchestration you use to coordinate this sample.</span></span>  
  
    -   <span data-ttu-id="c9930-160">Crea y enlaza la ubicación de recepción de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] y los puertos de envío y recepción.</span><span class="sxs-lookup"><span data-stu-id="c9930-160">Creates and binds the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] receive location, and the send and receive ports.</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="c9930-161">Este ejemplo muestra las siguientes advertencias al crear y enlazar puertos:</span><span class="sxs-lookup"><span data-stu-id="c9930-161">This sample displays the following warnings when creating and binding ports:</span></span>  
        >   
        >  `Warning: Receive handler not specified for receive location "LoansProcessor_1.0.0.0_LoansProcessor.My_Sample_Service_Incoming_ReceiveLocation"; updating with first receive handler with matching transport type.`  
        >   
        >  `Warning: Host not specified for orchestration "LoansProcessor.My_Sample_Service"; updating with first available host.`  
        >   
        >  <span data-ttu-id="c9930-162">Puede omitir estas advertencias de forma segura.</span><span class="sxs-lookup"><span data-stu-id="c9930-162">You can safely ignore these warnings.</span></span> <span data-ttu-id="c9930-163">(Para dar cabida a posibles diferencias de nombre en las instalaciones de usuario, se han omitido del archivo de enlace el nombre del host y el controlador de recepción).</span><span class="sxs-lookup"><span data-stu-id="c9930-163">(To accommodate for possible naming differences in user installations, the host name and receive handler have been omitted from the binding file.)</span></span>  
  
    -   <span data-ttu-id="c9930-164">Habilita la ubicación de recepción e inicia el puerto de envío.</span><span class="sxs-lookup"><span data-stu-id="c9930-164">Enables the receive location, and starts the send port.</span></span>  
  
    -   <span data-ttu-id="c9930-165">Da de alta e inicia la orquestación.</span><span class="sxs-lookup"><span data-stu-id="c9930-165">Enlists and starts the orchestration.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c9930-166">Si su nombre de host de BizTalk no es BizTalkServerApplication, modifique los archivos Setup.bat y LoanProcessorBinding.xml para que reflejen el nombre de host apropiado.</span><span class="sxs-lookup"><span data-stu-id="c9930-166">If your BizTalk host name is not BizTalkServerApplication, modify the file Setup.bat and the file LoanProcessorBinding.xml to reflect the proper host name.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c9930-167">Antes de intentar ejecutar este ejemplo, debe confirmar que [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] no ha informado de ningún error durante el proceso de generación e inicialización.</span><span class="sxs-lookup"><span data-stu-id="c9930-167">You should confirm that [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] did not report any errors during the build and initialization process before attempting to run this sample.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c9930-168">Si opta por abrir y crear los proyectos en este ejemplo sin ejecutar el archivo Setup.bat, primero debe crear un par de claves de nombre seguro mediante la utilidad de nombre seguro de .NET Framework (sn.exe).</span><span class="sxs-lookup"><span data-stu-id="c9930-168">If you choose to open and build the projects in this sample without running the file Setup.bat, you must first create a strong name key pair using the .NET Framework Strong Name utility (sn.exe).</span></span> <span data-ttu-id="c9930-169">Utilice este par de claves para firmar los ensamblados resultantes.</span><span class="sxs-lookup"><span data-stu-id="c9930-169">Use this key pair to sign the resulting assemblies.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c9930-170">Para deshacer los cambios realizados por Setup.bat, ejecute Cleanup.bat.</span><span class="sxs-lookup"><span data-stu-id="c9930-170">To undo changes made by Setup.bat, run Cleanup.bat.</span></span> <span data-ttu-id="c9930-171">Debe ejecutar Cleanup.bat antes de ejecutar Setup.bat por segunda vez.</span><span class="sxs-lookup"><span data-stu-id="c9930-171">You must run Cleanup.bat before running Setup.bat a second time.</span></span>  
  
## <a name="running-this-sample"></a><span data-ttu-id="c9930-172">Ejecución del ejemplo</span><span class="sxs-lookup"><span data-stu-id="c9930-172">Running This Sample</span></span>  
  
#### <a name="to-run-the-loans-processing-using-business-rules-sample"></a><span data-ttu-id="c9930-173">Para ejecutar el ejemplo Loans Processing Using Business Rules</span><span class="sxs-lookup"><span data-stu-id="c9930-173">To run the Loans Processing Using Business Rules sample</span></span>  
  
1.  <span data-ttu-id="c9930-174">Pegue una copia del archivo sampleLoan.xml en la **\In** carpeta.</span><span class="sxs-lookup"><span data-stu-id="c9930-174">Paste a copy of the file sampleLoan.xml into the **\In** folder.</span></span>  
  
2.  <span data-ttu-id="c9930-175">Observe el archivo .xml creado en la carpeta **Out**. Contiene el mensaje de entrada XML con datos agregados a los cuatro elementos siguientes al final de la estructura XML: **IncomeStatus**, **CommitmentsStatus**, **EmploymentStatus**, y **ResidencyStatus**.</span><span class="sxs-lookup"><span data-stu-id="c9930-175">Observe the .xml file created in the folder **Out**. It contains the input XML message with data added to the following four status elements at the end of the XML structure: **IncomeStatus**, **CommitmentsStatus**, **EmploymentStatus**, and **ResidencyStatus**.</span></span>  
  
 <span data-ttu-id="c9930-176">Puede usar la herramienta Compositor de reglas de negocios para cambiar las reglas del conjunto de reglas y volver a implementar esas reglas.</span><span class="sxs-lookup"><span data-stu-id="c9930-176">You can use the Business Rule Composer tool to change the rules in the rule set, and then redeploy those rules.</span></span>  
  
#### <a name="to-use-the-business-rule-composer-tool-to-change-one-or-more-of-the-rules-in-a-rule-set"></a><span data-ttu-id="c9930-177">Para usar la herramienta Compositor de reglas de negocio para cambiar una o varias reglas de un conjunto de reglas</span><span class="sxs-lookup"><span data-stu-id="c9930-177">To use the Business Rule Composer tool to change one or more of the rules in a rule set</span></span>  
  
1.  <span data-ttu-id="c9930-178">Haga clic en **iniciar**, seleccione **programas**, seleccione [!INCLUDE[btsBizTalkServerStartMenuItemui](../includes/btsbiztalkserverstartmenuitemui-md.md)]y, a continuación, haga clic en **Compositor de reglas de negocios**.</span><span class="sxs-lookup"><span data-stu-id="c9930-178">Click **Start**, point to **Programs**, point to [!INCLUDE[btsBizTalkServerStartMenuItemui](../includes/btsbiztalkserverstartmenuitemui-md.md)], and then click **Business Rule Composer**.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="c9930-179">En un sistema que admita el Control de cuentas de usuario (UAC), es posible que deba ejecutar la herramienta con privilegios administrativos.</span><span class="sxs-lookup"><span data-stu-id="c9930-179">On a system that supports User Account Control (UAC), you may need to run the tool with Administrative privileges.</span></span> <span data-ttu-id="c9930-180">Para ello, haga clic en la aplicación y, a continuación, seleccione **ejecutar como administrador**.</span><span class="sxs-lookup"><span data-stu-id="c9930-180">To do this, right-click the application, and then select **Run as administrator**.</span></span>  
  
2.  <span data-ttu-id="c9930-181">En el **SQL Server** cuadro de diálogo, haga clic en **Aceptar** para conectarse al almacén de reglas.</span><span class="sxs-lookup"><span data-stu-id="c9930-181">In the **SQL Server** dialog box, click **OK** to connect to the rule store.</span></span>  
  
3.  <span data-ttu-id="c9930-182">En **Explorador de directivas**, debajo del nodo **LoanProcessing**, haga clic en el **versión 1.0 – implementada** nodo y, a continuación, haga clic en **copia**.</span><span class="sxs-lookup"><span data-stu-id="c9930-182">In **Policy Explorer**, below the node **LoanProcessing**, right-click the **Version 1.0 – Deployed** node, and then click **Copy**.</span></span>  
  
4.  <span data-ttu-id="c9930-183">Haga clic en **LoanProcessing**y, a continuación, haga clic en **pegar**.</span><span class="sxs-lookup"><span data-stu-id="c9930-183">Right-click **LoanProcessing**, and then click **Paste**.</span></span>  
  
5.  <span data-ttu-id="c9930-184">Cambie cualquier regla o acción de forma que dará como resultado valores diferentes para la **IncomeStatus**, **CommitmentsStatus**, **EmploymentStatus**, y  **ResidencyStatus** elementos.</span><span class="sxs-lookup"><span data-stu-id="c9930-184">Change any rule or action in a way that will result in different values for the **IncomeStatus**, **CommitmentsStatus**, **EmploymentStatus**, and **ResidencyStatus** elements.</span></span> <span data-ttu-id="c9930-185">Asegúrese de que cambia también el valor de la parte de negación (básicamente, el **Else** cláusula) de cualquier regla que desee cambiar.</span><span class="sxs-lookup"><span data-stu-id="c9930-185">Ensure that you also change the value of the negation portion (essentially, the **Else** clause) of any rule that you choose to change.</span></span>  
  
     <span data-ttu-id="c9930-186">La siguiente tabla muestra el conjunto de reglas usado por este ejemplo.</span><span class="sxs-lookup"><span data-stu-id="c9930-186">The following table shows the set of rules used by this sample.</span></span> <span data-ttu-id="c9930-187">A menos que se especifique lo contrario, los hechos provienen del mensaje entrante.</span><span class="sxs-lookup"><span data-stu-id="c9930-187">Unless specifically mentioned otherwise, facts are from the incoming XML message.</span></span> <span data-ttu-id="c9930-188">La cadena (db) indica una base de datos como el origen de un hecho.</span><span class="sxs-lookup"><span data-stu-id="c9930-188">The string (db) indicates a database as the source of a fact.</span></span>  
  
    |<span data-ttu-id="c9930-189">Número de regla</span><span class="sxs-lookup"><span data-stu-id="c9930-189">Rule number</span></span>|<span data-ttu-id="c9930-190">Nombre de regla</span><span class="sxs-lookup"><span data-stu-id="c9930-190">Rule name</span></span>|<span data-ttu-id="c9930-191">Description</span><span class="sxs-lookup"><span data-stu-id="c9930-191">Description</span></span>|  
    |-----------------|---------------|-----------------|  
    |<span data-ttu-id="c9930-192">1</span><span class="sxs-lookup"><span data-stu-id="c9930-192">1</span></span>|<span data-ttu-id="c9930-193">Regla de estado de entrada</span><span class="sxs-lookup"><span data-stu-id="c9930-193">Income Status Rule</span></span>|<span data-ttu-id="c9930-194">IF **BasicSalary** + **OtherIncome** > 0</span><span class="sxs-lookup"><span data-stu-id="c9930-194">IF **BasicSalary** + **OtherIncome** > 0</span></span><br /><br /> <span data-ttu-id="c9930-195">A continuación, **IncomeStatus** = **válido**</span><span class="sxs-lookup"><span data-stu-id="c9930-195">THEN **IncomeStatus** = **Valid**</span></span>|  
    |<span data-ttu-id="c9930-196">2</span><span class="sxs-lookup"><span data-stu-id="c9930-196">2</span></span>|<span data-ttu-id="c9930-197">Regla de estado de confirmación</span><span class="sxs-lookup"><span data-stu-id="c9930-197">Commitments Status Rule</span></span>|<span data-ttu-id="c9930-198">IF **identificador** == **Id. (db)**</span><span class="sxs-lookup"><span data-stu-id="c9930-198">IF **ID** == **ID (db)**</span></span><br /><br /> <span data-ttu-id="c9930-199">y</span><span class="sxs-lookup"><span data-stu-id="c9930-199">AND</span></span><br /><br /> <span data-ttu-id="c9930-200">IF **CreditCardBalance (db)** > 500</span><span class="sxs-lookup"><span data-stu-id="c9930-200">IF **CreditCardBalance (db)** > 500</span></span><br /><br /> <span data-ttu-id="c9930-201">A continuación, **CommitmentsStatus** =</span><span class="sxs-lookup"><span data-stu-id="c9930-201">THEN **CommitmentsStatus** =</span></span><br /><br /> <span data-ttu-id="c9930-202">"Compute Commitments"</span><span class="sxs-lookup"><span data-stu-id="c9930-202">"Compute Commitments"</span></span>|  
    |<span data-ttu-id="c9930-203">3</span><span class="sxs-lookup"><span data-stu-id="c9930-203">3</span></span>|<span data-ttu-id="c9930-204">Regla de estado laboral</span><span class="sxs-lookup"><span data-stu-id="c9930-204">Employment Status Rule</span></span>|<span data-ttu-id="c9930-205">IF **EmploymentType &#124; TimeInMonths** > 18</span><span class="sxs-lookup"><span data-stu-id="c9930-205">IF **EmploymentType &#124; TimeInMonths** > 18</span></span><br /><br /> <span data-ttu-id="c9930-206">A continuación, **EmploymentStatus** = **válido**</span><span class="sxs-lookup"><span data-stu-id="c9930-206">THEN **EmploymentStatus** = **Valid**</span></span>|  
    |<span data-ttu-id="c9930-207">4</span><span class="sxs-lookup"><span data-stu-id="c9930-207">4</span></span>|<span data-ttu-id="c9930-208">Regla de situación legal</span><span class="sxs-lookup"><span data-stu-id="c9930-208">Residency Status Rule</span></span>|<span data-ttu-id="c9930-209">IF **PlaceOfResidence &#124; TimeInMonths** > 18</span><span class="sxs-lookup"><span data-stu-id="c9930-209">IF **PlaceOfResidence &#124; TimeInMonths** > 18</span></span><br /><br /> <span data-ttu-id="c9930-210">A continuación, **ResidencyStatus** = **válido**</span><span class="sxs-lookup"><span data-stu-id="c9930-210">THEN **ResidencyStatus** = **Valid**</span></span>|  
    |<span data-ttu-id="c9930-211">!1, !2, !3, !4</span><span class="sxs-lookup"><span data-stu-id="c9930-211">!1, !2, !3, !4</span></span>|<span data-ttu-id="c9930-212">Reglas de negación</span><span class="sxs-lookup"><span data-stu-id="c9930-212">Negation Rules</span></span>|<span data-ttu-id="c9930-213">Las condiciones que son un operador lógico **no** de la condición correspondiente descrita en las reglas 1 – 4.</span><span class="sxs-lookup"><span data-stu-id="c9930-213">Conditions that are a logical **NOT** of the corresponding condition described in rules 1–4.</span></span> <span data-ttu-id="c9930-214">Las acciones resultantes son un cambio en la cadena que se está estableciendo.</span><span class="sxs-lookup"><span data-stu-id="c9930-214">Resulting actions are a change in the string that is being set.</span></span>|  
  
6.  <span data-ttu-id="c9930-215">Haga clic en el **versión 1.1 (sin guardar)** nodo y, a continuación, haga clic en **guardar**.</span><span class="sxs-lookup"><span data-stu-id="c9930-215">Right-click the **Version 1.1(not saved)** node, and then click **Save**.</span></span>  
  
7.  <span data-ttu-id="c9930-216">Haga clic en el **versión 1.1** nodo y, a continuación, haga clic en **publicar**.</span><span class="sxs-lookup"><span data-stu-id="c9930-216">Right-click the **Version 1.1** node, and then click **Publish**.</span></span>  
  
8.  <span data-ttu-id="c9930-217">Haga clic en el **versión 1.1** nodo y, a continuación, haga clic en **implementar**.</span><span class="sxs-lookup"><span data-stu-id="c9930-217">Right-click the **Version 1.1** node, and then click **Deploy**.</span></span>  
  
9. <span data-ttu-id="c9930-218">Espere 60 segundos para que los cambios se propaguen por el almacén de reglas de SQL Server compartido.</span><span class="sxs-lookup"><span data-stu-id="c9930-218">Wait for 60 seconds for the changes to propagate to the shared SQL Server rule store.</span></span>  
  
10. <span data-ttu-id="c9930-219">Pegue una copia del archivo sampleLoan.xml en la carpeta **en**.</span><span class="sxs-lookup"><span data-stu-id="c9930-219">Paste a copy of the file sampleLoan.xml into the folder **In**.</span></span>  
  
11. <span data-ttu-id="c9930-220">Observe el archivo .xml creado en la carpeta **Out**. Contiene el mensaje de entrada XML con datos agregados a los cuatro elementos siguientes al final de la estructura XML: **IncomeStatus**, **CommitmentsStatus**, **EmploymentStatus**, y **ResidencyStatus**.</span><span class="sxs-lookup"><span data-stu-id="c9930-220">Observe the .xml file created in the folder **Out**. It contains the input XML message with data added to the following four status elements at the end of the XML structure: **IncomeStatus**, **CommitmentsStatus**, **EmploymentStatus**, and **ResidencyStatus**.</span></span> <span data-ttu-id="c9930-221">Los datos agregados a estos elementos se diferenciarán, o no, de la ejecución anterior, en función de la naturaleza de los cambios realizados en el paso 5 de este procedimiento.</span><span class="sxs-lookup"><span data-stu-id="c9930-221">The data added to these elements will differ, or not, from the previous run, based on the nature of the changes made in step 5in this procedure.</span></span>  
  
## <a name="comments"></a><span data-ttu-id="c9930-222">Comentarios</span><span class="sxs-lookup"><span data-stu-id="c9930-222">Comments</span></span>  
 <span data-ttu-id="c9930-223">Si desea ver la información de seguimiento de este ejemplo, debe anular la implementación y volver a implementar el conjunto de reglas correspondiente (procesamiento de préstamos) mediante el uso del Asistente para implementar el Motor de reglas de negocios.</span><span class="sxs-lookup"><span data-stu-id="c9930-223">If you want to view the tracking information for this sample, you must undeploy and then redeploy the relevant rule set (Loans Processing) by using the Business Rules Engine Deployment Wizard.</span></span>  
  
 <span data-ttu-id="c9930-224">En este ejemplo se muestra cómo se pueden usar las reglas de negocios para aplicar directivas empresariales en forma de reglas dentro de una orquestación.</span><span class="sxs-lookup"><span data-stu-id="c9930-224">This sample demonstrates how you can use business rules to apply business policies in the form of rules within an orchestration.</span></span> <span data-ttu-id="c9930-225">También se muestra cómo pueden cambiarse las directivas y realizar el cambio en la directiva reflejada de forma dinámica en la orquestación sin tener que volver a compilar o implementar la solución de orquestación.</span><span class="sxs-lookup"><span data-stu-id="c9930-225">It also demonstrates how you can change the policies, and have the change in the policy reflected dynamically within the orchestration without having to recompile or redeploy the orchestration solution.</span></span>  
  
 <span data-ttu-id="c9930-226">Los escenarios de préstamos de entrada de este ejemplo son mensajes XML con la siguiente estructura:</span><span class="sxs-lookup"><span data-stu-id="c9930-226">Input loan cases to this sample are XML messages that have the following structure:</span></span>  
  
```  
    Name  
    ID  
    Income  
        BasicSalary  
        OtherIncome  
    EmploymentType  
        TimeInMonths  
    PlaceOfResidence  
        TimeInMonths  
    CommitmentsStatus  
    IncomeStatus  
    EmploymentStatus  
    ResidencyStatus  
```  
  
## <a name="see-also"></a><span data-ttu-id="c9930-227">Vea también</span><span class="sxs-lookup"><span data-stu-id="c9930-227">See Also</span></span>  
 [<span data-ttu-id="c9930-228">Reglas de negocio (carpeta de ejemplos de BizTalk Server)</span><span class="sxs-lookup"><span data-stu-id="c9930-228">Business Rules (BizTalk Server Samples Folder)</span></span>](../core/business-rules-biztalk-server-samples-folder.md)
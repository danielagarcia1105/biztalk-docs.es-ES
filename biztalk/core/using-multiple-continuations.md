---
title: Uso de varias continuaciones | Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 01a38087-71ee-40b3-a957-6a2653bd6435
caps.latest.revision: 10
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 78468438dbd04583f8936bab28e80bf400e83d72
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/27/2018
ms.locfileid: "36987141"
---
# <a name="using-multiple-continuations"></a><span data-ttu-id="7867c-102">Usar varias continuaciones</span><span class="sxs-lookup"><span data-stu-id="7867c-102">Using Multiple Continuations</span></span>
<span data-ttu-id="7867c-103">Usar el Editor de perfiles de seguimiento (TPE) en entornos donde hay varias actividades requiere una comprensión adecuada del escenario en que se realiza el seguimiento de estas actividades, a fin de asignar los puertos de recepción, las orquestaciones y los puertos de envío en el orden correcto.</span><span class="sxs-lookup"><span data-stu-id="7867c-103">Using the Tracking Profile Editor (TPE) in environments in which there are multiple activities requires that you understand the scenario in which the activities are being tracked in order to map the receive ports, orchestrations, and send ports in the proper sequence.</span></span>  
  
 <span data-ttu-id="7867c-104">En un perfil de seguimiento, el TPE evalúa el principio y el final de la actividad de manera automática.</span><span class="sxs-lookup"><span data-stu-id="7867c-104">In a tracking profile, the TPE assesses the beginning and end of the activity automatically.</span></span> <span data-ttu-id="7867c-105">La actividad se inicia cuando se recopila el primer dato y finaliza cuando se recopila el último.</span><span class="sxs-lookup"><span data-stu-id="7867c-105">The activity starts when the first piece of data is collected and ends when the last piece is collected.</span></span>  
  
 <span data-ttu-id="7867c-106">En la mayoría de los casos, crear una sola continuación, como una continuación entre dos orquestaciones, constituye un proceso sencillo para los programadores.</span><span class="sxs-lookup"><span data-stu-id="7867c-106">In most cases creating a single continuation, such as a continuation between two orchestrations, is a straightforward process for developers.</span></span> <span data-ttu-id="7867c-107">Cuando el TPE da muestras de complejidad es cuando se requieren varias continuaciones.</span><span class="sxs-lookup"><span data-stu-id="7867c-107">Where TPE exhibits complexity is in the case of multiple continuations.</span></span> <span data-ttu-id="7867c-108">Un escenario de varias continuaciones es aquél en que una actividad de Supervisión de la actividad económica (BAM) abarca varios puertos de recepción, orquestaciones y puertos de envío.</span><span class="sxs-lookup"><span data-stu-id="7867c-108">A multiple continuation scenario  is where a Business Activity Monitoring (BAM) activity spans multiple receive ports, orchestrations, and send ports.</span></span> <span data-ttu-id="7867c-109">Para recopilar los datos de BAM en un mismo registro, debe crear continuaciones entre todas las programaciones de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="7867c-109">In order to collect the BAM data in one record, you must create continuations between all the BizTalk Server schedules.</span></span> <span data-ttu-id="7867c-110">Este proceso puede resultar complejo cuando se completa mediante la interfaz de usuario del TPE.</span><span class="sxs-lookup"><span data-stu-id="7867c-110">This process can be complex when completed through the TPE user interface (UI).</span></span>  
  
 <span data-ttu-id="7867c-111">En este tema se describe cómo crear una y varias continuaciones en distintos escenarios.</span><span class="sxs-lookup"><span data-stu-id="7867c-111">This topic describes how to create single and multiple continuations in different scenarios.</span></span>  
  
#### <a name="base-scenario-description---multiple-receive-ports-orchestrations-and-send-ports"></a><span data-ttu-id="7867c-112">Descripción del escenario básico: varios puertos de recepción, orquestaciones y puertos de envío</span><span class="sxs-lookup"><span data-stu-id="7867c-112">Base Scenario Description - Multiple Receive Ports, Orchestrations, and Send Ports</span></span>  
 <span data-ttu-id="7867c-113">El escenario consiste en un servidor de BizTalk que tiene varios puertos de recepción (R), orquestaciones (O) y puertos de envío (S).</span><span class="sxs-lookup"><span data-stu-id="7867c-113">The scenario consists of a BizTalk server that has a number of receive ports (R), orchestrations (O), and send ports (S).</span></span> <span data-ttu-id="7867c-114">Existe una propiedad de contexto interchangeID genérica que se usa para vincular las continuaciones.</span><span class="sxs-lookup"><span data-stu-id="7867c-114">There is a generic interchangeID context property that is used to link the continuations.</span></span> <span data-ttu-id="7867c-115">Puede usar cualquier propiedad de contexto, como activityID u otro identificador exclusivo.</span><span class="sxs-lookup"><span data-stu-id="7867c-115">You can use any context property, such as the activityID or other unique identifier.</span></span> <span data-ttu-id="7867c-116">La elección del contenido específico no es relevante para la explicación del escenario.</span><span class="sxs-lookup"><span data-stu-id="7867c-116">The choice of the specific content is not germane to the discussion of the scenario.</span></span>  
  
 <span data-ttu-id="7867c-117">A efectos del escenario, no se especifican explicaciones sobre los datos, hitos ni valores de propiedades de contexto cuyo seguimiento se realiza desde estos puertos y orquestaciones.</span><span class="sxs-lookup"><span data-stu-id="7867c-117">For the purposes of the scenario, discussions of the data item/milestone/context-property-value being tracked from these ports and orchestrations are not specified.</span></span> <span data-ttu-id="7867c-118">Esa parte de la asignación corresponde a la lógica empresarial.</span><span class="sxs-lookup"><span data-stu-id="7867c-118">That part of the mapping is specific to the business logic.</span></span> <span data-ttu-id="7867c-119">El objetivo es capturar todos los datos de BAM de todos los puertos y las orquestaciones en una misma fila de la tabla de actividad completada.</span><span class="sxs-lookup"><span data-stu-id="7867c-119">The goal is to capture all BAM data from all the ports and orchestrations in a single row in the completed activity table.</span></span> <span data-ttu-id="7867c-120">Las distintas maneras en que se puede recibir y procesar un mensaje en las orquestaciones presenta algunos desafíos y soluciones interesantes.</span><span class="sxs-lookup"><span data-stu-id="7867c-120">The different ways in which a message can be received and processed by orchestrations presents some interesting challenges and solutions.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="7867c-121">El escenario de un puerto o una orquestación puede considerarse un caso especial del escenario de varios puertos y varias orquestaciones.</span><span class="sxs-lookup"><span data-stu-id="7867c-121">The scenario of one port or one orchestration can be considered a special case of the many port and many orchestrations scenario.</span></span>  
  
#### <a name="scenario-solution-1---one-receive-port-and-one-orchestration"></a><span data-ttu-id="7867c-122">Solución de escenario 1: un puerto de recepción y una orquestación</span><span class="sxs-lookup"><span data-stu-id="7867c-122">Scenario Solution 1 - One Receive Port and One Orchestration</span></span>  
 <span data-ttu-id="7867c-123">En este escenario, un mensaje llega exactamente a uno de los puertos de recepción (R1) y lo procesa exactamente una de las orquestaciones (O1).</span><span class="sxs-lookup"><span data-stu-id="7867c-123">In this scenario, a message arrives at exactly one of the receive ports (R1) and is processed by exactly one of the orchestrations (O1).</span></span>  
  
 <span data-ttu-id="7867c-124">El proceso de creación de la continuación es el siguiente:</span><span class="sxs-lookup"><span data-stu-id="7867c-124">The process to create the continuation is as follows:</span></span>  
  
1. <span data-ttu-id="7867c-125">Cree una continuación en la vista de árbol de actividades de carpeta del perfil de seguimiento.</span><span class="sxs-lookup"><span data-stu-id="7867c-125">Create a continuation in the folder activity tree view of the tracking profile.</span></span>  
  
2. <span data-ttu-id="7867c-126">Elija el esquema de propiedades de contexto haciendo clic en el **Seleccionar origen de eventos** botón y, a continuación, haga clic en el **Seleccionar propiedad de contexto** elemento de menú.</span><span class="sxs-lookup"><span data-stu-id="7867c-126">Choose the context property schema by clicking the **Select Event Source** button, and then clicking the **Select Context Property** menu item.</span></span>  
  
3. <span data-ttu-id="7867c-127">Busque el **propiedad interchangeId** en el **nombre de la propiedad de contexto** lista y, a continuación, selecciónelo.</span><span class="sxs-lookup"><span data-stu-id="7867c-127">Locate the **interchangeId property** in the **Context Property Name** list, and then select it.</span></span>  
  
4. <span data-ttu-id="7867c-128">Desde el esquema de propiedades, asigne interchangeID a la carpeta de continuación que acaba de crear.</span><span class="sxs-lookup"><span data-stu-id="7867c-128">From the property schema, map the interchangeID to the continuation folder that you just created.</span></span>  
  
5. <span data-ttu-id="7867c-129">Haga clic con el botón secundario en el nodo interchangeID recién creado en el árbol de actividades y seleccione los puertos desde los que efectuar las asignaciones.</span><span class="sxs-lookup"><span data-stu-id="7867c-129">Right-click the newly created interchangeID node in the activity tree, and then select the ports from which to map.</span></span>  
  
6. <span data-ttu-id="7867c-130">En el **seleccionar puertos** cuadro de diálogo que aparece, seleccione todos **N** puertos de recepción.</span><span class="sxs-lookup"><span data-stu-id="7867c-130">In the **Select Ports** dialog box that is displayed, select all **N** receive ports.</span></span>  
  
7. <span data-ttu-id="7867c-131">Cree una carpeta continuationID en el árbol de actividades de carpeta.</span><span class="sxs-lookup"><span data-stu-id="7867c-131">Create a continuationID folder in the folder activity tree.</span></span>  
  
8. <span data-ttu-id="7867c-132">Abra cada orquestación haciendo clic en el **Seleccionar origen de eventos** botón y, a continuación, haga clic en el **seleccionar programación de orquestación** elemento de menú.</span><span class="sxs-lookup"><span data-stu-id="7867c-132">Open each orchestration by clicking the **Select Event Source** button, and then clicking the **Select Orchestration Schedule** menu item.</span></span> <span data-ttu-id="7867c-133">En cada orquestación, haga clic con el botón secundario en una forma de la orquestación y asigne la propiedad de contexto interchangeID al continuationID recién creado.</span><span class="sxs-lookup"><span data-stu-id="7867c-133">From each orchestration, right-click a shape in the orchestration, and then map the interchangeID context property to the newly created continuationID.</span></span>  
  
   <span data-ttu-id="7867c-134">En una implementación con tres orquestaciones, la apariencia del perfil de seguimiento será parecida a la siguiente:</span><span class="sxs-lookup"><span data-stu-id="7867c-134">In a deployment with three orchestrations, your tracking profile would look similar to this:</span></span>  
  
   <span data-ttu-id="7867c-135">![TPE escenario de continuación múltiple 1](../core/media/4761d680-7218-4404-a636-06739f70f344.gif "4761d680-7218-4404-a636-06739f70f344")</span><span class="sxs-lookup"><span data-stu-id="7867c-135">![TPE multiple continuation scenario 1](../core/media/4761d680-7218-4404-a636-06739f70f344.gif "4761d680-7218-4404-a636-06739f70f344")</span></span>  
  
#### <a name="scenario-solution-2---one-receive-port-and-multiple-orchestrations"></a><span data-ttu-id="7867c-136">Solución de escenario 2: un puerto de recepción y varias orquestaciones</span><span class="sxs-lookup"><span data-stu-id="7867c-136">Scenario Solution 2 - One Receive Port and Multiple Orchestrations</span></span>  
 <span data-ttu-id="7867c-137">En este escenario, un mensaje llega exactamente a uno de los puertos de recepción y lo procesan todas y cada una de las orquestaciones.</span><span class="sxs-lookup"><span data-stu-id="7867c-137">In this scenario, a message arrives at exactly one of the receive ports and is processed by each and every orchestration.</span></span> <span data-ttu-id="7867c-138">Esto sucede porque el mensaje se envía simultáneamente a todas las orquestaciones.</span><span class="sxs-lookup"><span data-stu-id="7867c-138">This happens as the message is simultaneously sent to each of the orchestrations.</span></span>  
  
 <span data-ttu-id="7867c-139">En este caso, se necesita una continuación y un continuationID para cada orquestación.</span><span class="sxs-lookup"><span data-stu-id="7867c-139">In this case, we would need a continuation and continuationID for each orchestration.</span></span> <span data-ttu-id="7867c-140">El proceso de creación de las continuaciones sería similar a los pasos descritos en la solución de escenario 1.</span><span class="sxs-lookup"><span data-stu-id="7867c-140">The process for creating the continuations would be similar to the steps outlined in scenario solution 1.</span></span> <span data-ttu-id="7867c-141">Para una implementación con tres orquestaciones, el perfil de seguimiento resultante tiene un aspecto similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="7867c-141">For a three-orchestration deployment, your resulting tracking profile looks something like this:</span></span>  
  
 <span data-ttu-id="7867c-142">![Escenario de continuación múltiple TPE 2](../core/media/3cebd82f-9192-4d52-84c7-584f24e8ecca.gif "3cebd82f-9192-4d52-84c7-584f24e8ecca")</span><span class="sxs-lookup"><span data-stu-id="7867c-142">![TPE Multiple continuation scenario 2](../core/media/3cebd82f-9192-4d52-84c7-584f24e8ecca.gif "3cebd82f-9192-4d52-84c7-584f24e8ecca")</span></span>  
  
#### <a name="scenario-solution-3---content-based-routing"></a><span data-ttu-id="7867c-143">Solución de escenario 3: enrutamiento por contenidos</span><span class="sxs-lookup"><span data-stu-id="7867c-143">Scenario Solution 3 - Content Based Routing</span></span>  
 <span data-ttu-id="7867c-144">En este escenario se define una solución de enrutamiento (CBR) por contenidos.</span><span class="sxs-lookup"><span data-stu-id="7867c-144">This scenario defines a content based routing (CBR) solution.</span></span> <span data-ttu-id="7867c-145">Un mensaje llega exactamente a uno de los puertos de recepción y se envía exactamente a uno de los puertos de envío.</span><span class="sxs-lookup"><span data-stu-id="7867c-145">A message arrives at exactly one of the receive ports and is sent to exactly one of the send ports.</span></span> <span data-ttu-id="7867c-146">Este enrutamiento se produce según el valor de una propiedad de contexto del mensaje.</span><span class="sxs-lookup"><span data-stu-id="7867c-146">This routing happens based on a context property value in the message.</span></span> <span data-ttu-id="7867c-147">En este caso, solo se necesita una continuación.</span><span class="sxs-lookup"><span data-stu-id="7867c-147">In this case, we would need one continuation.</span></span> <span data-ttu-id="7867c-148">La asignación tiene una apariencia similar a la siguiente:</span><span class="sxs-lookup"><span data-stu-id="7867c-148">The mapping looks something like this:</span></span>  
  
 <span data-ttu-id="7867c-149">![Escenario de continuación CBR. ](../core/media/4459a73d-515f-4d6d-a68f-b18eee072df8.gif "4459a73d-515f-4d6d-a68f-b18eee072df8")</span><span class="sxs-lookup"><span data-stu-id="7867c-149">![Continuation CBR scenario.](../core/media/4459a73d-515f-4d6d-a68f-b18eee072df8.gif "4459a73d-515f-4d6d-a68f-b18eee072df8")</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="7867c-150">La asignación anterior también es válida para un mensaje que llega exactamente a uno de los puertos de recepción y se envía a todos los puertos de envío.</span><span class="sxs-lookup"><span data-stu-id="7867c-150">The above mapping is also valid for a message that arrives at exactly one of the receive ports and is sent to all of the send ports.</span></span>  
  
#### <a name="scenario-solution-4---one-orchestration-multiple-send-ports"></a><span data-ttu-id="7867c-151">Solución de escenario 4: una orquestación y varios puertos de envío</span><span class="sxs-lookup"><span data-stu-id="7867c-151">Scenario Solution 4 - One Orchestration, Multiple Send Ports</span></span>  
 <span data-ttu-id="7867c-152">En este escenario, hay varios envío.</span><span class="sxs-lookup"><span data-stu-id="7867c-152">In this scenario, there are multiple send.</span></span> <span data-ttu-id="7867c-153">puertos.</span><span class="sxs-lookup"><span data-stu-id="7867c-153">ports.</span></span> <span data-ttu-id="7867c-154">Un mensaje se procesa exactamente una de las orquestaciones, que viene determinada por las reglas de procesamiento y se envía a todos los puertos de envío.</span><span class="sxs-lookup"><span data-stu-id="7867c-154">A message is processed by exactly one of the orchestrations, which is determined by the processing rules, and is sent to all of the send ports.</span></span> <span data-ttu-id="7867c-155">En este caso, solo se necesita una continuación.</span><span class="sxs-lookup"><span data-stu-id="7867c-155">In this case, we would need one continuation.</span></span> <span data-ttu-id="7867c-156">La asignación tiene una apariencia similar a la siguiente:</span><span class="sxs-lookup"><span data-stu-id="7867c-156">The mapping looks something like this:</span></span>  
  
 <span data-ttu-id="7867c-157">![Escenario de continuación 4](../core/media/3ab10b51-d306-4ad1-acb6-6731e23394ac.gif "3ab10b51-d306-4ad1-acb6-6731e23394ac")</span><span class="sxs-lookup"><span data-stu-id="7867c-157">![Coninuation Scenario 4](../core/media/3ab10b51-d306-4ad1-acb6-6731e23394ac.gif "3ab10b51-d306-4ad1-acb6-6731e23394ac")</span></span>  
  
#### <a name="scenario-solution-5---sequential-orchestrations"></a><span data-ttu-id="7867c-158">Solución de escenario 5: orquestaciones secuenciales</span><span class="sxs-lookup"><span data-stu-id="7867c-158">Scenario Solution 5 - Sequential Orchestrations</span></span>  
 <span data-ttu-id="7867c-159">En este escenario, un mensaje se procesa secuencialmente por cada orquestación, una a una, y se pasa a la siguiente orquestación mediante la continuación.</span><span class="sxs-lookup"><span data-stu-id="7867c-159">In this scenario, a message is processed by each orchestration in sequence, one by one, and is passed to the next orchestration via the continuation.</span></span> <span data-ttu-id="7867c-160">La asignación tiene una apariencia similar a la siguiente:</span><span class="sxs-lookup"><span data-stu-id="7867c-160">The mapping looks something like this:</span></span>  
  
 <span data-ttu-id="7867c-161">![Escenario de continuación 5](../core/media/563cacee-104c-4f8a-9836-da90aecb7487.gif "563cacee-104c-4f8a-9836-da90aecb7487")</span><span class="sxs-lookup"><span data-stu-id="7867c-161">![Continuation scenario 5](../core/media/563cacee-104c-4f8a-9836-da90aecb7487.gif "563cacee-104c-4f8a-9836-da90aecb7487")</span></span>  
  
### <a name="collecting-data-in-an-asynchronous-environment"></a><span data-ttu-id="7867c-162">Recopilar datos en un entorno asíncrono</span><span class="sxs-lookup"><span data-stu-id="7867c-162">Collecting Data in an Asynchronous Environment</span></span>  
 <span data-ttu-id="7867c-163">Cuando se configuran continuaciones, BAM espera la llegada de datos.</span><span class="sxs-lookup"><span data-stu-id="7867c-163">When you set up continuations, BAM expects the data to arrive.</span></span> <span data-ttu-id="7867c-164">En un entorno asíncrono, es posible que no se reciba respuesta de un proceso de servidor.</span><span class="sxs-lookup"><span data-stu-id="7867c-164">In an asynchronous environment you may not receive a response from a backend process.</span></span>  
  
 <span data-ttu-id="7867c-165">Si no se reciben los datos de respuesta, la instancia de actividad espera por tiempo indefinido.</span><span class="sxs-lookup"><span data-stu-id="7867c-165">If you do not receive the response data, the activity instance waits indefinitely.</span></span> <span data-ttu-id="7867c-166">La actividad nunca se completa y los registros permanecen en las tablas de la base de datos de importación principal de BAM.</span><span class="sxs-lookup"><span data-stu-id="7867c-166">The activity will never complete and the records remain in the tables in the BAM Primary Import database.</span></span> <span data-ttu-id="7867c-167">Piense en el caso de las transacciones de larga ejecución, en las que no existe ningún modo de saber cuándo llegarán los datos restantes.</span><span class="sxs-lookup"><span data-stu-id="7867c-167">Consider the case of long-running transactions, where there is no way to tell when the remaining data will arrive.</span></span> <span data-ttu-id="7867c-168">No existe ningún tiempo de espera, puesto que la llegada de los datos dependerá de los procesos o la lógica empresariales, tras los cuales la actividad se marca como completa.</span><span class="sxs-lookup"><span data-stu-id="7867c-168">There is no time-out, as data arrival will depend on business logic or processes, after which the activity is marked as complete.</span></span> <span data-ttu-id="7867c-169">Los datos pueden llegar el mismo día o, en un caso extremo, el año próximo.</span><span class="sxs-lookup"><span data-stu-id="7867c-169">The data could arrive the same day, or in extreme cases, the following year.</span></span>  
  
 <span data-ttu-id="7867c-170">La solución consiste en usar actividades relacionadas.</span><span class="sxs-lookup"><span data-stu-id="7867c-170">The solution is to use related activities.</span></span>  
  
 <span data-ttu-id="7867c-171">Divida la actividad en dos actividades.</span><span class="sxs-lookup"><span data-stu-id="7867c-171">Split your activity into two activities.</span></span> <span data-ttu-id="7867c-172">Relacione ambas entre sí y relacione la respuesta a la actividad original.</span><span class="sxs-lookup"><span data-stu-id="7867c-172">Relate the two activities, and relate the response to the original activity.</span></span>  
  
 <span data-ttu-id="7867c-173">Para obtener más información acerca de las actividades relacionadas, consulte [relaciones de actividades](../core/activity-relationships.md).</span><span class="sxs-lookup"><span data-stu-id="7867c-173">For more information about related activities, see [Activity Relationships](../core/activity-relationships.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7867c-174">Vea también</span><span class="sxs-lookup"><span data-stu-id="7867c-174">See Also</span></span>  
 [<span data-ttu-id="7867c-175">Editor de perfiles de seguimiento</span><span class="sxs-lookup"><span data-stu-id="7867c-175">Tracking Profile Editor</span></span>](../core/tracking-profile-editor.md)
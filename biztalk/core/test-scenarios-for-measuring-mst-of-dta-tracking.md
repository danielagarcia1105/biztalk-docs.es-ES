---
title: Escenarios de prueba para medir MST de seguimiento de DTA | Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 303dc1d8-baac-4b54-92c8-95c0ce640a76
caps.latest.revision: 12
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 1386c7113c534c2491bed447fdcc0ba970881bac
ms.sourcegitcommit: ed9590dbcd97c12a1fe5ce2cdf8d826492cccdff
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/08/2018
ms.locfileid: "39640152"
---
# <a name="test-scenarios-for-measuring-mst-of-dta-tracking"></a><span data-ttu-id="4e8b7-102">Escenarios de prueba para medir MST de seguimiento de DTA</span><span class="sxs-lookup"><span data-stu-id="4e8b7-102">Test Scenarios for Measuring MST of DTA Tracking</span></span>
<span data-ttu-id="4e8b7-103">Para mostrar el funcionamiento de todo esto en la práctica y para presentar una técnica sencilla de medir el rendimiento máximo sostenible (MST) para seguimiento, presentamos ahora un escenario de prueba en el que se ha medido el MST de seguimiento.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-103">To show how all of this works in practice and to introduce a simple technique for measuring maximum sustainable throughput (MST) for tracking, we will now present a test scenario for which the tracking MST has been measured.</span></span> <span data-ttu-id="4e8b7-104">Además de las técnicas proporcionadas, también puede usar los datos presentados como punto de inicio para calcular el rendimiento de seguimiento para otros sistemas.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-104">Not only will we provide the techniques involved, but you can use the data presented as a starting point to estimate tracking performance for other systems.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="4e8b7-105">El lector debería tener en cuenta que la información contenida en este tema representa la visión actual de Microsoft acerca de los asuntos tratados desde la fecha de publicación.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-105">Readers should be aware that the information contained in this topic represents the current view of Microsoft on the issues discussed as of the date of publication.</span></span> <span data-ttu-id="4e8b7-106">Puesto que debemos responder a condiciones de mercado y tecnologías variables, no debe interpretarse como un compromiso por parte de Microsoft, y Microsoft no puede garantizar la precisión de la información que se presenta después de la fecha de publicación.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-106">Because we must respond to changing market conditions and technologies, Microsoft cannot guarantee the accuracy of any information presented after the date of publication.</span></span>  
  
## <a name="test-scenario-topology-and-configuration"></a><span data-ttu-id="4e8b7-107">Topología y configuración del escenario de prueba</span><span class="sxs-lookup"><span data-stu-id="4e8b7-107">Test Scenario Topology and Configuration</span></span>  
 <span data-ttu-id="4e8b7-108">En la ilustración siguiente se muestran la topología y la configuración del escenario de prueba.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-108">The following figure shows the topology and configuration for the test scenario.</span></span>  <span data-ttu-id="4e8b7-109">Es una salida de compilación considerable con cuatro servidores de base de datos de cuadro de mensajes, un servidor de base de datos BizTalkDTADb dedicado y un total de siete servidores que ejecutan [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="4e8b7-109">It is a sizable build-out with four MessageBox database servers, a dedicated BizTalkDTADb database server, and a total of seven servers running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="4e8b7-110">Tenga en cuenta que el servidor de BAM reflejado en la ilustración no estaba en uso para este escenario de prueba.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-110">Note that the BAM server pictured in the figure was not in use for this test scenario.</span></span>  
  
 <span data-ttu-id="4e8b7-111">**Rendimiento sostenible de BizTalkDTADb**</span><span class="sxs-lookup"><span data-stu-id="4e8b7-111">**BizTalkDTADb Sustainable Throughput**</span></span>  
  
 <span data-ttu-id="4e8b7-112">![Seguimiento de topología](../core/media/trackingperformancetopology.gif "TrackingPerformanceTopology")</span><span class="sxs-lookup"><span data-stu-id="4e8b7-112">![Tracking performance topology](../core/media/trackingperformancetopology.gif "TrackingPerformanceTopology")</span></span>  
  
 <span data-ttu-id="4e8b7-113">**Especificación de hardware (BizTalk Server)**</span><span class="sxs-lookup"><span data-stu-id="4e8b7-113">**Hardware specification (BizTalk Server)**</span></span>  
  
- <span data-ttu-id="4e8b7-114">CPU: Dual 3 GHz (caché: L2: 512 KB/L3: 1 MB)</span><span class="sxs-lookup"><span data-stu-id="4e8b7-114">CPU: Dual 3 GHz (Cache: L2: 512 KB/L3: 1 MB)</span></span>  
  
- <span data-ttu-id="4e8b7-115">Memoria: 2 GB de RAM</span><span class="sxs-lookup"><span data-stu-id="4e8b7-115">Memory: 2 GB of RAM</span></span>  
  
- <span data-ttu-id="4e8b7-116">UNIDAD DE DISCO DURO: 2 X 32 GB / 15 K</span><span class="sxs-lookup"><span data-stu-id="4e8b7-116">HDD: 2 X 32 GB/15 K</span></span>  
  
  <span data-ttu-id="4e8b7-117">**Especificación de hardware (SQL Server)**</span><span class="sxs-lookup"><span data-stu-id="4e8b7-117">**Hardware specification (SQL Server)**</span></span>  
  
- <span data-ttu-id="4e8b7-118">CPU: Cuatro 2 GHz (L2: 512 KB/L3: 1 MB)</span><span class="sxs-lookup"><span data-stu-id="4e8b7-118">CPU: Quad 2 GHz (L2: 512 KB/L3: 1 MB)</span></span>  
  
- <span data-ttu-id="4e8b7-119">Memoria: 4 GB de RAM</span><span class="sxs-lookup"><span data-stu-id="4e8b7-119">Memory: 4 GB of RAM</span></span>  
  
- <span data-ttu-id="4e8b7-120">UNIDAD DE DISCO DURO: 2 X 32 GB/15 K + SAN</span><span class="sxs-lookup"><span data-stu-id="4e8b7-120">HDD: 2 X 32 GB/15 K + SAN</span></span>  
  
  <span data-ttu-id="4e8b7-121">En la ilustración siguiente se proporciona información general de la arquitectura del escenario de prueba, donde</span><span class="sxs-lookup"><span data-stu-id="4e8b7-121">The next figure provides an overview of the test scenario architecture, where</span></span>  
  
- <span data-ttu-id="4e8b7-122">**TP** = punto de seguimiento, un punto en el que algunos elementos se realiza un seguimiento como eventos o las propiedades del mensaje.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-122">**TP** = Track Point, a point at which some elements are tracked such as events or message properties.</span></span>  
  
- <span data-ttu-id="4e8b7-123">**MB** = cuerpo del mensaje, un punto en el que se realiza el seguimiento de un cuerpo del mensaje.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-123">**MB** = Message Body, a point at which a message body is tracked.</span></span>  
  
  <span data-ttu-id="4e8b7-124">En la siguiente arquitectura de solución se muestra una configuración de seguimiento con tres componentes de configuración principales:</span><span class="sxs-lookup"><span data-stu-id="4e8b7-124">The following solution architecture shows a tracking configuration with three main configuration components:</span></span>  
  
- <span data-ttu-id="4e8b7-125">**Seguimiento de DTA predeterminado**.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-125">**Default DTA Tracking**.</span></span> <span data-ttu-id="4e8b7-126">Todos los puntos de seguimiento de eventos en la ilustración están activadas de forma predeterminada cuando [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] está instalado.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-126">All of the event track points in the figure are on by default when [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] is installed.</span></span>  
  
- <span data-ttu-id="4e8b7-127">**Propiedades de mensaje**.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-127">**Message Properties**.</span></span> <span data-ttu-id="4e8b7-128">El punto de seguimiento asociado con el desensamblador (DA) en la canalización de entrada representa el seguimiento de 10 propiedades del mensaje de entrada.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-128">The track point associated with the dis-assembler (DA) component in the inbound pipeline represents the tracking of 10 properties from the inbound message.</span></span> <span data-ttu-id="4e8b7-129">Para obtener más información acerca de cómo promocionar propiedades para el seguimiento, vea [promocionar propiedades](../core/promoting-properties.md).</span><span class="sxs-lookup"><span data-stu-id="4e8b7-129">For more information about how to promote properties for tracking, see [Promoting Properties](../core/promoting-properties.md).</span></span>  
  
- <span data-ttu-id="4e8b7-130">**Cuerpo del mensaje**.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-130">**Message Body**.</span></span> <span data-ttu-id="4e8b7-131">En la ilustración, los dos puntos de cuerpo del mensaje (MB) representan los puntos en los que se realiza el seguimiento de los cuerpos de mensaje.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-131">The two message body (MB) points from the figure represent the points at which message bodies are tracked.</span></span> <span data-ttu-id="4e8b7-132">Para obtener más información sobre cómo configurar el seguimiento de cuerpos de mensaje, consulte [configuración de seguimiento del uso de la consola de administración de BizTalk Server](http://msdn.microsoft.com/49b7f9d3-60b5-41bd-ba8b-029253926bef).</span><span class="sxs-lookup"><span data-stu-id="4e8b7-132">For more information on how to set up message body tracking, see [Configuring Tracking Using the BizTalk Server Administration Console](http://msdn.microsoft.com/49b7f9d3-60b5-41bd-ba8b-029253926bef).</span></span>  
  
  <span data-ttu-id="4e8b7-133">**Arquitectura del escenario de prueba**</span><span class="sxs-lookup"><span data-stu-id="4e8b7-133">**Test Scenario Architecture**</span></span>  
  
  <span data-ttu-id="4e8b7-134">![Escenarios de rendimiento](../core/media/performancescenarios.gif "PerformanceScenarios")</span><span class="sxs-lookup"><span data-stu-id="4e8b7-134">![Performance scenarios](../core/media/performancescenarios.gif "PerformanceScenarios")</span></span>  
  
## <a name="test-techniques"></a><span data-ttu-id="4e8b7-135">Técnicas de la prueba</span><span class="sxs-lookup"><span data-stu-id="4e8b7-135">Test Techniques</span></span>  
 <span data-ttu-id="4e8b7-136">El adaptador de archivo se usó para la recepción y para el envío.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-136">The file adapter was used for both receiving and sending.</span></span> <span data-ttu-id="4e8b7-137">Usamos la herramienta para la generación de cargas, LoadGen 2007, para entregar los mensajes al recurso compartido de archivos de entrada.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-137">We used the Load Generation tool, LoadGen 2007, to deliver messages to the inbound file share.</span></span> <span data-ttu-id="4e8b7-138">Esta herramienta se configuró para entregar archivos a un ritmo específico de modo que se pudiera variar la carga mientras buscábamos nuestro nivel de MST de seguimiento.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-138">The LoadGen tool was configured to deliver files at a specific rate so that we could vary the load while searching for our tracking MST level.</span></span> <span data-ttu-id="4e8b7-139">Para obtener más información acerca de la herramienta LoadGen, consulte [mediante la herramienta Microsoft BizTalk LoadGen 2007](../core/using-the-microsoft-biztalk-loadgen-2007-tool.md).</span><span class="sxs-lookup"><span data-stu-id="4e8b7-139">For more information about the LoadGen tool, see [Using the Microsoft BizTalk LoadGen 2007 Tool](../core/using-the-microsoft-biztalk-loadgen-2007-tool.md).</span></span>  
  
 <span data-ttu-id="4e8b7-140">Para nuestras pruebas, asumimos un requisito de retención de 24 horas en la base de datos BizTalkDTADb.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-140">For our tests, we assumed a requirement of 24 hrs retention in the BizTalkDTADb database.</span></span> <span data-ttu-id="4e8b7-141">Esto es, todo lo que fuera más antiguo de 24 horas se purgó de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-141">That is, anything older than 24 hrs was purged from the database.</span></span> <span data-ttu-id="4e8b7-142">El trabajo de SQL de archivo y purga está diseñado para que únicamente los datos que se han archivado se purguen, de modo que no se pierdan datos durante el proceso.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-142">The archive and purge SQL job is designed so that only the data that has been archived is purged so that no data is lost during the process.</span></span>  
  
 <span data-ttu-id="4e8b7-143">Para probar por completo el sistema con este requisito, fue necesario ejecutar la carga durante al menos 25 horas para que se incluyera al menos un ciclo de archivo y purga.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-143">To fully test the system with this requirement, it was necessary to run the load for at least 25 hours so that at least one archive and purge cycle was included.</span></span> <span data-ttu-id="4e8b7-144">Decidimos ejecutarla durante un tiempo completo de 48 horas para supervisar el sistema durante las 24 horas posteriores al primer archivo con el fin de asegurarnos de que era sostenible.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-144">We elected to run for a full 48 hours to monitor the system for 24 hours after the first archive to be sure it was sustainable.</span></span> <span data-ttu-id="4e8b7-145">Las primeras 24 horas eran necesarias para crear datos con la antigüedad suficiente para su archivo (cada 24 horas) con el fin de simular un estado fijo.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-145">The first 24 hours was required in order to build up data that was old enough to be archived (every 24 hours) to simulate steady state.</span></span> <span data-ttu-id="4e8b7-146">Después, durante las siguientes 24 horas, el sistema se supervisó para determinar que todos los procesos (por ejemplo, TDDS, archivado y purga) podían mantener el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-146">The system was monitored during the second 24 hours to determine that all processes (for example, TDDS, archiving and purging) were able to keep up with the throughput.</span></span>  
  
 <span data-ttu-id="4e8b7-147">A partir de nuestra comprensión del comportamiento del seguimiento, solo hay unos pocos indicadores clave de rendimiento (KPI) que suele ser necesario supervisar para determinar la sostenibilidad:</span><span class="sxs-lookup"><span data-stu-id="4e8b7-147">Drawing from our understanding of the tracking behavior, there are just a few key performance indicators (KPI) that typically need to be monitored to determine sustainability:</span></span>  
  
- <span data-ttu-id="4e8b7-148">**El disco físico de tiempo de inactividad para el archivo de datos de base de datos de BizTalkDTADb**.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-148">**The physical disk idle time for BizTalkDTADb database data file**.</span></span> <span data-ttu-id="4e8b7-149">Si el tiempo de inactividad del disco físico se acerca a 0, es un buen signo de que la base de datos BizTalkDTADb está saturada con la llegada de datos en los que se ha efectuado un seguimiento, la actividad de archivo o de purga.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-149">If the physical disk idle time approaches 0, this is a good sign that the BizTalkDTADb database is saturated with either the influx of tracked data, archiving activity, and/or purging activity.</span></span>  
  
- <span data-ttu-id="4e8b7-150">**La profundidad de la tabla trackingdata**.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-150">**The trackingdata table depth**.</span></span> <span data-ttu-id="4e8b7-151">Si la tabla trackingdata comienza a aumentar ininterrumpidamente, es decir que continúa aumentando sin enlaces, es un claro signo de que, a la velocidad de rendimiento actual, TDDS no puede insertar datos en la base de datos BizTalkDTADb con la velocidad suficiente para mantener el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-151">If the trackingdata table starts to grow monotonically, that is, continues to grow unbounded, then it is a clear sign that, at the current throughput rate, TDDS is not able to insert data into the BizTalkDTADb database fast enough to keep up.</span></span>  
  
- <span data-ttu-id="4e8b7-152">**La profundidad de cola de impresión**.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-152">**The spool depth**.</span></span> <span data-ttu-id="4e8b7-153">Hay varias causas de que la cola de impresión aumente.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-153">There are a number of things that can cause the spool to grow.</span></span> <span data-ttu-id="4e8b7-154">Una de las situaciones que causan este crecimiento es si se queda atrás el trabajo de SQL que copia los cuerpos de mensajes en los que se ha efectuado el seguimiento de la base de datos de cuadro de mensajes a la base de datos BizTalkDTADb.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-154">One of the situations that can cause spool growth is if the SQL job that copies tracked message bodies from the MessageBox database to the BizTalkDTADb database gets behind.</span></span> <span data-ttu-id="4e8b7-155">Debido a que los mensajes en los que es necesario efectuar un seguimiento no se pueden quitar de la base de datos de cuadro de mensajes (mediante los trabajos de limpieza del cuadro de mensajes) hasta que se hayan copiado correctamente a la base de datos BizTalkDTADb, si el trabajo de copia se queda atrás, la cola de impresión aumenta de tamaño.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-155">Because the messages that need to be tracked cannot be removed from the MessageBox database (by the MessageBox cleanup jobs) until they have been successfully copied to the BizTalkDTADb database, if the copy job gets behind, it results in spool build up.</span></span>  
  
  <span data-ttu-id="4e8b7-156">Para la mayoría de los sistemas, la supervisión solo de estos tres indicadores de rendimiento bajo carga proporciona la información suficiente para determinar si la carga es sostenible o no.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-156">For the majority of systems, monitoring just these three performance indicators under load provides enough information to determine if the load is sustainable or not.</span></span>  
  
  <span data-ttu-id="4e8b7-157">**Indicadores clave de rendimiento bajo carga sostenible**</span><span class="sxs-lookup"><span data-stu-id="4e8b7-157">**Key Performance Indicators Under Sustainable Load**</span></span>  
  
  <span data-ttu-id="4e8b7-158">![Supervisión del rendimiento de la base de datos de seguimiento](../core/media/perf-monitor-tracking-db.gif "Perf_Monitor_Tracking_db")</span><span class="sxs-lookup"><span data-stu-id="4e8b7-158">![Performance monitoring for the Tracking database](../core/media/perf-monitor-tracking-db.gif "Perf_Monitor_Tracking_db")</span></span>  
  
  <span data-ttu-id="4e8b7-159">Con el escenario de ejemplo y una carga de 20 mensajes recibidos por segundo, obtuvimos datos de 48 horas de indicadores clave de rendimiento, tal y como se muestra en el gráfico de monitor de rendimiento generado.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-159">Using the sample scenario, with a load of 20 messages received per second, we acquired 48 hours worth of key performance indicators as shown in the generated Perfmon graph.</span></span> <span data-ttu-id="4e8b7-160">Observe en el gráfico las siguientes tendencias que indican sostenibilidad:</span><span class="sxs-lookup"><span data-stu-id="4e8b7-160">Note from the graph, the following trends that indicate sustainability:</span></span>  
  
- <span data-ttu-id="4e8b7-161">**La profundidad de BizTalkDTADbdata (líneas negras)**.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-161">**BizTalkDTADbdata depth (black lines)**.</span></span> <span data-ttu-id="4e8b7-162">Con nuestras tres bases de datos de cuadro de mensajes de publicación podemos observar que, incluso después del primer archivo a las 24 horas, la profundidad de la tabla trackingdata se estabiliza y no continúa creciendo.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-162">With our three publishing MessageBox databases, we can see that, even after the first archive at 24 hours, the depth of the trackingdata table stabilizes and does not continue to trend up.</span></span>  
  
- <span data-ttu-id="4e8b7-163">**Cola de impresión de profundidad (líneas azules)**.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-163">**Spool depth (blue lines)**.</span></span> <span data-ttu-id="4e8b7-164">La profundidad de la cola de impresión es muy estable durante la ejecución, lo que indica que, incluso con los recursos empleados para el archivo y la purga, los mensajes en los que se efectuó el seguimiento, de 10 kilobytes de tamaño cada uno, se copian a la base de datos BizTalkDTADb sin que se queden atrás.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-164">The spool depth is very stable throughout the run indicating that, even with archiving and purging taking resources, the tracked messages, which are each 10 kilobytes in size, are copied to the BizTalkDTADb database without falling behind.</span></span>  
  
- <span data-ttu-id="4e8b7-165">**Tiempo de inactividad de disco (línea roja) físico del archivo de datos de la base de datos de BizTalkDTADb**.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-165">**BizTalkDTADb database data file Physical Disk Idle Time (red line)**.</span></span> <span data-ttu-id="4e8b7-166">Durante las primeras 24 horas antes de que el archivo y la purga entren en acción, la base de datos BizTalkDTADb va acumulando más y más datos, lo que produce más y más E/S del disco a medida que TDDS inserta datos.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-166">For the first 24 hours before archive and purge have any work to do, the BizTalkDTADb database is accumulating more and more data which results in more and more disk I/O as data is inserted by TDDS.</span></span> <span data-ttu-id="4e8b7-167">Esto se considera claramente un descenso fijo en el tiempo de inactividad del disco físico.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-167">This is clearly seen as a steady decline in the physical disk idle time.</span></span>  
  
   <span data-ttu-id="4e8b7-168">A las 24 horas en la ejecución, se observa una clara caída en tiempo de inactividad de E/S, que coincide con la primera vez que el archivo y purga tienen trabajo para hacer.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-168">At 24 hours into the run, a clear drop in I/O idle time is observed, which coincides with the first time that archive and purge have work to do.</span></span> <span data-ttu-id="4e8b7-169">Después del primer archivo, purga tiene trabajo que hacer cada minuto para purgar datos antiguos de 24 horas (Recuerde, hay todavía se cargan en el sistema), que da como resultado un cercano a cero el tiempo de inactividad.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-169">After the first archive, purge has work to do every minute to purge data older than 24 hours (remember, there is still load on the system), which results in a near zero idle time.</span></span>  
  
   <span data-ttu-id="4e8b7-170">Aquí el punto clave es que, después de haber realizado el primer archivo, es decir, que el sistema ha superado la primera ventana de “retención de datos de la base de datos BizTalkDTADb activa”, el tiempo de inactividad del disco se acercará mucho al valor cero cuando el sistema se encuentra en el MST o cerca de éste.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-170">A key point here is that, after the first archive has taken place, that is, the system has passed the first "live BizTalkDTADb database data retention" window, the disk idle time will be very near zero when the system is at or near MST.</span></span> <span data-ttu-id="4e8b7-171">Esto se debe a que el cuello de botella de la base de datos BizTalkDTADb es casi siempre la velocidad del subsistema de E/S del disco.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-171">This is because the bottleneck for the BizTalkDTADb database is almost always the speed of the disk I/O subsystem.</span></span>  
  
  <span data-ttu-id="4e8b7-172">En muchos casos, puede resultar beneficioso medir el MST con el seguimiento desactivado a modo de línea de base del sistema.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-172">In many cases, it can be beneficial to measure MST with tracking off as a baseline for the system.</span></span> <span data-ttu-id="4e8b7-173">En nuestro caso, por ejemplo, el MST con todo el seguimiento desactivado fue de 290 mensajes por segundo, lo que representa el MST multiplicado varias veces obtenido cuando el sistema tiene el seguimiento activado con las características y la ventana de retención de datos de DTA indicadas anteriormente.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-173">In our case, for example, the MST with all tracking turned off was 290 messages per second, which is many times the MST of the system with tracking turned on with the features and DTA data retention window stated above.</span></span> <span data-ttu-id="4e8b7-174">Esto nos indica que el sistema se infrautiliza de forma significativa cuando el seguimiento está activado.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-174">This tells us that the system with tracking turned on is significantly under utilized.</span></span> <span data-ttu-id="4e8b7-175">Esto significa que no necesitamos crear un sistema con capacidad para 290 mensajes/s cuando el seguimiento que necesitamos efectuar en algunos aspectos solo permitirá un MST de 20 mensajes/s. Dicho de otro modo, suponiendo que el hardware de la base de datos BizTalkDTADb no cambie, serían necesarios muchos menos servidores de base de datos de cuadro de mensajes y de BizTalk para alcanzar un rendimiento de 20 mensajes por segundo que los que tenemos en nuestro escenario.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-175">That is, we do not need to build a system capable of 290 messages/sec when tracking the things we need to track will only support an MST of 20 messages/sec. Stated another way, assuming the BizTalkDTADb database hardware doesn’t change, many fewer BizTalk and MessageBox database servers would be required to achieve a throughput of 20 messages per second than what we have in our scenario.</span></span>  
  
## <a name="searching-for-maximum-sustainable-throughput"></a><span data-ttu-id="4e8b7-176">Buscar el rendimiento máximo sostenible</span><span class="sxs-lookup"><span data-stu-id="4e8b7-176">Searching for Maximum Sustainable Throughput</span></span>  
 <span data-ttu-id="4e8b7-177">Ahora que ya hemos visto el aspecto del KPI en un sistema que se ejecuta a MST, recopilemos y conozcamos cómo hemos llegado a la conclusión de nuestro MST de 20 mensajes/s para el escenario de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-177">Now that we have seen what the KPI look like for a system running at MST, let’s back up and discuss how we arrived at our 20 messages/sec MST for the sample scenario.</span></span> <span data-ttu-id="4e8b7-178">Se trata de un enfoque iterativo sencillo y de "búsqueda binaria", como se describe a continuación:</span><span class="sxs-lookup"><span data-stu-id="4e8b7-178">It is a simple iterative, "binary search" approach as follows:</span></span>  
  
- <span data-ttu-id="4e8b7-179">**Elegir un punto de partida**.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-179">**Pick a starting point**.</span></span> <span data-ttu-id="4e8b7-180">A menos que ya tiene experiencia con las pruebas de rendimiento en [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], tendrá que aprovechar la información disponible sobre lo que se ha conseguido en otros sistemas.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-180">Unless you already have experience with performance testing on [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], you will need to avail yourself of the information available on what has been achieved on other systems.</span></span>  
  
   <span data-ttu-id="4e8b7-181">Por ejemplo, se ha proporcionado todo el hardware, la configuración y la arquitectura de la solución para el escenario de ejemplo en este tema.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-181">For example, we have provided all of the hardware, configuration, and solution architecture for the sample scenario in this topic.</span></span> <span data-ttu-id="4e8b7-182">Con ello, el tipo de seguimiento que habíamos activado (predeterminado + 10 propiedades + cuerpos de mensaje de 10KB) y el MST alcanzado (20 mensajes/s) con una ventana de retención de datos de DTA de 24 horas, compárelo con su configuración y sus requisitos.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-182">Using that, and the type of tracking we had turned on (default + 10 properties + 10KB message bodies) and the MST we achieved (20 msgs/sec) with a 24 hour DTA data retention window, compare that to your setup and requirements.</span></span>  
  
   <span data-ttu-id="4e8b7-183">Al menos debería ser capaz de estimar si el MST de su solución será superior o inferior al que obtuvimos nosotros.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-183">You should at least be able to estimate if the MST for your solution will be higher or lower than what we achieved.</span></span> <span data-ttu-id="4e8b7-184">También puede encontrar varios estudios de casos técnicos disponibles con los que pueda comparar su sistema.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-184">Various technical case studies may also be available to which you can compare your system.</span></span> <span data-ttu-id="4e8b7-185">Para obtener ejemplos, vea los casos prácticos disponibles en BizTalk Server Developer Center en [ http://go.microsoft.com/fwlink/?LinkId=49339 ](http://go.microsoft.com/fwlink/?LinkId=49339).</span><span class="sxs-lookup"><span data-stu-id="4e8b7-185">For examples, see the case studies available on the BizTalk Server Developer Center, at [http://go.microsoft.com/fwlink/?LinkId=49339](http://go.microsoft.com/fwlink/?LinkId=49339).</span></span>  
  
- <span data-ttu-id="4e8b7-186">**Ejecute el sistema bajo la carga de MST estimada y supervise el KPI**.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-186">**Run the system under the estimated MST load and monitor the KPI**.</span></span> <span data-ttu-id="4e8b7-187">Normalmente, comenzar por los valores elevados del MST que espera puede reducir el tiempo que se tarda en encontrar el MST.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-187">Typically, starting out on the high side of your expected MST can shorten the time it takes to find MST.</span></span> <span data-ttu-id="4e8b7-188">Al comenzar en estos valores, empujará el KPI a la saturación (especialmente la E/S del disco) en menos tiempo de lo que duraría descubrir que se encuentra por debajo del MST (esto es, al menos una ventana de retención de datos completos).</span><span class="sxs-lookup"><span data-stu-id="4e8b7-188">By starting high, you will drive the KPI to saturation (especially disk I/O) in less time than it will take to discover that you are below MST (that is, at least one full data retention window).</span></span>  
  
- <span data-ttu-id="4e8b7-189">**Refinar la estimación del MST y repita**.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-189">**Refine the MST Estimate and Repeat**.</span></span> <span data-ttu-id="4e8b7-190">Con los resultados obtenidos en la ejecución de prueba, perfeccione la estimación del MST y repita la prueba con la nueva estimación.</span><span class="sxs-lookup"><span data-stu-id="4e8b7-190">Looking at your results for the test run, refine your estimate of MST and repeat the test using the new estimate.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4e8b7-191">Vea también</span><span class="sxs-lookup"><span data-stu-id="4e8b7-191">See Also</span></span>  
 <span data-ttu-id="4e8b7-192">[Medir el rendimiento de seguimiento sostenible máximo](../core/measuring-maximum-sustainable-tracking-throughput.md) </span><span class="sxs-lookup"><span data-stu-id="4e8b7-192">[Measuring Maximum Sustainable Tracking Throughput](../core/measuring-maximum-sustainable-tracking-throughput.md) </span></span>  
 <span data-ttu-id="4e8b7-193">[Comprender el comportamiento del rendimiento de seguimiento de DTA](../core/understanding-dta-tracking-performance-behavior.md) </span><span class="sxs-lookup"><span data-stu-id="4e8b7-193">[Understanding DTA Tracking Performance Behavior](../core/understanding-dta-tracking-performance-behavior.md) </span></span>  
 <span data-ttu-id="4e8b7-194">[Sugerencias y trucos para encontrar MST de seguimiento de DTA](../core/tips-and-tricks-for-finding-mst-of-dta-tracking.md) </span><span class="sxs-lookup"><span data-stu-id="4e8b7-194">[Tips and Tricks for Finding MST of DTA Tracking](../core/tips-and-tricks-for-finding-mst-of-dta-tracking.md) </span></span>  
 [<span data-ttu-id="4e8b7-195">Instrucciones para ajustar el tamaño de la base de datos de seguimiento</span><span class="sxs-lookup"><span data-stu-id="4e8b7-195">Tracking Database Sizing Guidelines</span></span>](../core/tracking-database-sizing-guidelines.md)

---
title: Adaptador de WCF-BasicHttpRelay | Documentos de Microsoft
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 22eefde6-80f5-4d45-80cf-55f743ff9d45
caps.latest.revision: "5"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 72a72129a9b0ee48969d528374c2a06497aa3311
ms.sourcegitcommit: 5abd0ed3f9e4858ffaaec5481bfa8878595e95f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/28/2017
---
# <a name="wcf-basichttprelay-adapter"></a>Adaptador WCF-BasicHttpRelay
[!INCLUDE[btsCoName](../includes/btsconame-md.md)][!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] utiliza la **WCF-BasicHttpRelay** adaptador para recibir y enviar solicitudes de servicio WCF a través de la [BasicHttpRelayBinding clase](https://msdn.microsoft.com/library/azure/microsoft.servicebus.basichttprelaybinding.aspx). El **WCF-BasicHttpRelay** adaptador utiliza los extremos de retransmisión de Bus de servicio mediante el **BasicHttpRelayBinding**.  

## <a name="before-you-begin"></a>Antes de empezar

A partir de [!INCLUDE[bts2016_md](../includes/bts2016-md.md)], este adaptador puede usar Access Control Service (ACS) o la firma de acceso compartido (SAS) para athenticate con Bus de servicio. Se recomienda utilizar la firma de acceso compartido (SAS) para autenticar con Bus de servicio. 

Cuando se crea un espacio de nombres de Bus de servicio, no se crea automáticamente el espacio de nombres de Control de acceso (ACS). Si utiliza ACS para autenticar, debe crear un nuevo espacio de nombres de ACS. Vea [adaptador SB-Messaging](../core/sb-messaging-adapter.md) para obtener más información, incluidos los pasos para recuperar los valores de clave de ACS.
  
## <a name="create-the-receive-location"></a>Crear la ubicación de recepción
  
> [!NOTE]
>  Antes de completar el procedimiento siguiente, debe haber agregado un unidireccional puerto de recepción. Vea [cómo crear un puerto de recepción](../core/how-to-create-a-receive-port.md).  
  
1.  En la consola de administración de BizTalk Server, expanda [!INCLUDE[btsBizTalkServerAdminConsoleui](../includes/btsbiztalkserveradminconsoleui-md.md)], expanda **grupo de BizTalk**, expanda **aplicaciones**y, a continuación, expanda la aplicación en la que desea crear una ubicación de recepción.  
  
2.  En el panel izquierdo, haga clic en el nodo **Puertos de recepción** y, en el panel derecho, haga clic con el botón derecho en el puerto de recepción al que desea asociar la nueva ubicación de recepción y, a continuación, haga clic en **Propiedades**.  
  
3.  En el panel de la izquierda del cuadro de diálogo **Propiedades de puerto de recepción** , seleccione **Ubicaciones de recepción**y, en el panel de la derecha, haga clic en **Nueva** para crear una nueva ubicación de recepción.  
  
4.  En el **propiedades de la ubicación de recepción** cuadro de diálogo, en la **transporte** sección, seleccione **WCF-BasicHttpRelay** desde el **tipo** lista desplegable y, a continuación, haga clic en **configurar** para configurar las propiedades de transporte para la ubicación de recepción.  
  
5.  En el **propiedades de transporte de WCF-BasicHttpRelay** cuadro de diálogo, en la **General** pestaña, configure la dirección del extremo donde se hospeda el extremo de retransmisión de Bus de servicio y la identidad del servicio para el Ubicación de recepción WCF-BasicHttpRelay.  
  
    |Use|Para|  
    |--------------|----------------|  
    |**Dirección (URI)**|Requerido. Especifique el URI donde se implementa el extremo de retransmisión del Service Bus. |  
    |**Identidad del extremo**|Opcional. Especifique la identidad del extremo. Esta configuración habilita al extremo para autenticar la ubicación de recepción. En el proceso de negociación entre el extremo y la ubicación de recepción, la infraestructura de Windows Communication Foundation (WCF) asegurará que la identidad del servicio esperado coincide con los valores de este elemento.<br /><br /> El valor predeterminado es una cadena vacía.|  
  
6.  En el **propiedades de transporte de WCF-BasicHttpRelay** cuadro de diálogo, en la **enlace** pestaña, configure las propiedades relacionadas con la codificación y el tiempo de espera.  
  
    |Use|Para|  
    |--------------|----------------|  
    |**Abra el tiempo de espera (hh:mmss)**|Especificar un valor de marco temporal que indica el intervalo de tiempo proporcionado para que se complete una operación de apertura del canal. Este valor debe ser mayor o igual que **System.TimeSpan.Zero**.<br /><br /> Valor predeterminado: 00:01:00<br /><br /> Valor máximo:  23:59:59|  
    |**Enviar tiempo de espera (hh:mmss)**|Especificar un valor de marco temporal que indica el intervalo de tiempo proporcionado para que se complete una operación de envío. Este valor debe ser mayor o igual que **System.TimeSpan.Zero**. Si usa un puerto de recepción solicitud-respuesta, este valor especifica un marco temporal para que se complete la interacción, incluso cuando el cliente devuelva un mensaje grande.<br /><br /> Valor predeterminado: 00:01:00<br /><br /> Valor máximo:  23:59:59|  
    |**Tiempo de espera de cierre (hh:mmss)**|Especificar un valor de marco temporal que indica el intervalo de tiempo proporcionado para que se complete una operación de cierre del canal. Este valor debe ser mayor o igual que **System.TimeSpan.Zero**.<br /><br /> Valor predeterminado: 00:01:00<br /><br /> Valor máximo:  23:59:59|  
    |**Tamaño máximo del mensaje recibido (bytes)**|Especificar el tamaño máximo, en bytes, para mensajes, con encabezados incluidos, que se pueden recibir a través de la red. El tamaño de los mensajes se limita mediante la cantidad de memoria asignada a cada mensaje. Puede usar esta propiedad para limitar la exposición a ataques por denegación de servicio (DoS).<br /><br /> El adaptador de WCF-BasicHttpRelay aprovecha la [BasicHttpRelayBinding](http://msdn.microsoft.com/library/windowsazure/microsoft.servicebus.basichttprelaybinding.aspx) clase en el modo de transferencia almacenado en búfer para comunicarse con un punto de conexión. Para el modo de transporte almacenado en búfer, el [BasicHttpRelayBinding.MaxBufferSize](http://msdn.microsoft.com/library/windowsazure/microsoft.servicebus.basichttprelaybinding.maxbuffersize.aspx) propiedad siempre es igual al valor de esta propiedad.<br /><br /> Valor predeterminado: 65536<br /><br /> Valor máximo: 2147483647|  
    |**Codificación de mensajes**|Especificar el codificador que se usa para codificar el mensaje SOAP. Los valores válidos incluyen los siguientes:<br /><br /> -   **Texto**: usar un codificador de mensajes de texto.<br />-   **MTOM**: usar un codificador Message Transmission organización Mechanism 1.0 (MTOM).<br /><br /> El valor predeterminado es **texto**.|  
    |**Codificación de texto**|Especifique la codificación que se usará para emitir los mensajes en el enlace del juego de caracteres cuando la **codificación de mensajes** propiedad está establecida en **texto**. Los valores válidos incluyen los siguientes:<br /><br /> -   **UTF-16LE (unicodeFFFE)**: codificación Unicode BigEndian.<br />-   **UTF-16**: codificación de 16 bits.<br />-   **UTF-8**: codificación de 8 bits<br /><br /> El valor predeterminado es **utf-8**.|  
    |**Número máximo de llamadas simultáneos**|Especificar el número de llamadas concurrentes en una instancia de servicio única. Las llamadas que superan el límite se ponen en cola. Establecer este valor como 0 es equivalente a establecerlo como **Int32.MaxValue**.<br /><br /> El valor predeterminado es 200.|  
  
7.  En el **propiedades de transporte de WCF-BasicHttpRelay** cuadro de diálogo el **seguridad** ficha, definir la seguridad de la ubicación de recepción de las capacidades de WCF-BasicHttpRelay.  
  
    |Use|Para|  
    |--------------|----------------|  
    |**Modo de seguridad**|Especificar el tipo de seguridad que se usa. Los valores válidos incluyen los siguientes:<br /><br /> -   **Ninguno**: mensajes no están protegidos durante la transferencia.<br />-   **Transporte**: se proporciona seguridad mediante el transporte HTTPS. Los mensajes SOAP están protegidos mediante HTTPS. Para usar este modo, debe configurar Capa de sockets seguros (SSL) en los Servicios de Microsoft Internet Information Server (IIS).<br />-   **Mensaje**: seguridad se proporciona mediante la seguridad de los mensajes SOAP mediante el transporte HTTP. De forma predeterminada, el **Cuerpo** de SOAP está cifrado y firmado. El único valor válido **tipo de credencial de cliente de mensaje** de WCF-Basic es adaptador **certificado**. Este modo necesita el transporte HTTP. Cuando se utiliza este modo de seguridad, el certificado de servicio para esta ubicación debe proporcionarse a través de recepción la **huella digital de certificado de servicio** propiedad.<br />-   **TransportWithMessageCredential**: el transporte HTTPS proporciona integridad, confidencialidad y autenticación del servicio. Para usar este modo, debe configurar Capa de sockets seguros (SSL) en los Servicios de Microsoft Internet Information Server (IIS).<br /><br /> El valor predeterminado es **Transporte**.|  
    |**Tipo de credencial de cliente de mensajes**|Especifique las opciones de seguridad de nivel de mensaje solo si ha definido la **modo de seguridad** anteriormente a **mensaje** o **TransportWithMessageCredential**. Los valores válidos incluyen los siguientes:<br /><br /> -   **Nombre de usuario**: habilita la ubicación de recepción para requerir que los clientes se autentican utilizando la **nombre de usuario** credencial. Debe crear el dominio o cuentas de usuario locales correspondientes a las credenciales de cliente.<br />-   **Certificado**: los clientes se autentican en esta ubicación de recepción mediante el certificado de cliente. La cadena de certificados de CA de los certificados X.509 del cliente debe estar instalada en el almacén de certificados Entidades emisoras de certificados raíz de confianza del equipo de modo que se puedan autenticar los clientes en esta ubicación de recepción.<br /><br /> El valor predeterminado es **nombre de usuario**.|  
    |**Conjunto de algoritmos**|Especifique los algoritmos de cifrado y de encapsulado de claves de mensaje solo si ha definido la **modo de seguridad** modo anteriormente a **mensaje** o **TransportWithMessageCredential**. Esto no es aplicable si establece la **modo de seguridad** a **ninguno** o **transporte**.<br /><br /> Estos algoritmos se asignan a los que se indican en la especificación Security Policy Language (WS-SecurityPolicy). Los valores posibles son:<br /><br /> -   **Basic128**: Use el cifrado Aes128, Sha1 para la síntesis del mensaje y Rsa-oaep-mgf1p para el encapsulado de claves.<br />-   **Basic128Rsa15**: Use Aes128 para el cifrado de mensajes, Sha1 para la síntesis del mensaje y Rsa15 para el encapsulado de claves.<br />-   **Basic128Sha256**: Use Aes256 para el cifrado de mensajes, Sha256 para la síntesis del mensaje y Rsa-oaep-mgf1p para el encapsulado de claves.<br />-   **Basic128Sha256Rsa15**: Use Aes128 para el cifrado de mensajes, Sha256 para la síntesis del mensaje y Rsa15 para el encapsulado de claves.<br />-   **Basic192**: Use el cifrado Aes192, Sha1 para la síntesis del mensaje y Rsa-oaep-mgf1p para el encapsulado de claves.<br />-   **Basic192Rsa15**: Use Aes192 para el cifrado de mensajes, Sha1 para la síntesis del mensaje y Rsa15 para el encapsulado de claves.<br />-   **Basic192Sha256**: Use Aes192 para el cifrado de mensajes, Sha256 para la síntesis del mensaje y Rsa-oaep-mgf1p para el encapsulado de claves.<br />-   **Basic192Sha256Rsa15**: Use Aes192 para el cifrado de mensajes, Sha256 para la síntesis del mensaje y Rsa15 para el encapsulado de claves.<br />-   **Basic256**: Use el cifrado Aes256, Sha1 para la síntesis del mensaje y Rsa-oaep-mgf1p para el encapsulado de claves.<br />-   **Basic256Rsa15**: Use Aes256 para el cifrado de mensajes, Sha1 para la síntesis del mensaje y Rsa15 para el encapsulado de claves.<br />-   **Basic256Sha256**: Use Aes256 para el cifrado de mensajes, Sha256 para la síntesis del mensaje y Rsa-oaep-mgf1p para el encapsulado de claves.<br />-   **Basic256Sha256Rsa15**: Use Aes256 para el cifrado de mensajes, Sha256 para la síntesis del mensaje y Rsa15 para el encapsulado de claves.<br />-   **TripleDes**: Use el cifrado TripleDes, Sha1 para la síntesis del mensaje y Rsa-oaep-mgf1p para el encapsulado de claves.<br />-   **TripleDesRsa15**: Use el cifrado TripleDes, Sha1 para la síntesis del mensaje y Rsa15 para el encapsulado de claves.<br />-   **TripleDesSha256**: Use TripleDes para el cifrado de mensajes, Sha256 para la síntesis del mensaje y Rsa-oaep-mgf1p para el encapsulado de claves.<br />-   **TripleDesSha256Rsa15**: Use TripleDes para el cifrado de mensajes, Sha256 para la síntesis del mensaje y Rsa15 para el encapsulado de claves.<br /><br /> El valor predeterminado es **Basic256**.|  
    |**Servicio - huella digital**|Especificar la huella digital del certificado X.509 para esta ubicación de recepción que los clientes utilizan para autenticar el servicio. La huella digital puede seleccionarse desplazándose por **Mi** almacén, dentro de **Usuario actual** , con el botón **Examinar** . **Nota:** debe establecer esta propiedad solo si establece la **modo de seguridad** modo anteriormente a **mensaje** o **TransportWithMessageCredential**. Esto no es aplicable si establece la **modo de seguridad** a **ninguno** o **transporte**. **Nota:** debe instalar el certificado de servicio en la **usuario actual** ubicación de la cuenta de usuario para el controlador de recepción que aloja esta ubicación de recepción. <br /><br /> Longitud mínima: 0<br /><br /> Longitud máxima: 40<br /><br /> El valor predeterminado es una cadena vacía.|  
    |**Tipo de autenticación de cliente de retransmisión**|Especifique la opción para autenticar con el extremo de retransmisión del Service Bus desde donde se recibe el mensaje. Los valores válidos incluyen los siguientes:<br /><br /> -   **Ninguno**: No se requiere autenticación.<br />-   **RelayAccessToken**: especifique esta opción para utilizar un token de seguridad para autorizar con el extremo de retransmisión de Bus de servicio.<br /><br /> El valor predeterminado es **RelayAccessToken**.|  
    |**Habilitar la detección de servicio**|Seleccione esta casilla para especificar si el comportamiento del servicio se publica en el Registro de Servicio.<br /><br /> -   **Nombre para mostrar** : especifique el nombre con el que el servicio se publica en el registro del servicio.<br />-   **Modo de detección** : establecer el modo de detección del servicio publicado en el registro del servicio. Para más información sobre los modos de detección, vea [http://msdn.microsoft.com/library/microsoft.servicebus.discoverytype.aspx](http://msdn.microsoft.com/library/microsoft.servicebus.discoverytype.aspx).|  
    |**Servicio de control de acceso**|Se aplica a [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)] y [!INCLUDE[btsBizTalkServerNoVersion_md](../includes/btsbiztalkservernoversion-md.md)] de 2013.<br/><br/>Si establece el **Tipo de autenticación de cliente de retransmisión** en **RelayAccessToken**, haga clic en el botón **Editar** e indique los siguientes detalles:<br /><br /> -   **Uri de STS del servicio de Control de acceso** : establezca esta propiedad en `https://<Namespace>-sb.accesscontrol.windows.net/`, donde \<espacio de nombres\> es el espacio de nombres de Bus de servicio.<br />-   **Nombre del emisor** : especifique el nombre del emisor. Normalmente, este valor está establecido en el propietario.<br />-   **Clave del emisor** : especifique la clave del emisor.|  
    |**Información de conexión de Bus de servicio** | Nuevo a partir de [!INCLUDE[bts2016_md](../includes/bts2016-md.md)].<br/><br/>Elija esta opción utilizar la firma de acceso compartido (SAS) o el servicio de Control de acceso (ACS) del espacio de nombres de Bus de servicio. <br/><br/>Seleccione una opción y, a continuación, seleccione **editar** para escribir la información de clave:<br/><br/> - **Firma de acceso compartido** : escriba el nombre de la clave de acceso y la clave de acceso. Ambos valores se muestran en la [portal de Azure](https://portal.azure.com).<br/> - **Access Control Service** : escriba el URI de STS (`https://<yourNamespace>-sb.accesscontrol.windows.net/`), nombre del emisor y clave del emisor. Usar Windows PowerShell para recuperar estos valores, como se describe en [adaptador SB-Messaging](../core/sb-messaging-adapter.md). |
  
8.  En el **propiedades de transporte de WCF-BasicHttpRelay** cuadro de diálogo, en la **mensajes** ficha, especifique la selección de datos de SOAP **cuerpo** elemento.  
  
    |Use|Para|  
    |--------------|----------------|  
    |**Sobre--entero \<soap: Envelope\>**|Cree la parte del cuerpo del mensaje de BizTalk a partir del **Sobre** de SOAP completo de un mensaje entrante.<br /><br /> Esta opción está desactivada de forma predeterminada.|  
    |**Cuerpo--contenido \<soap: Body\> elemento**|Usar el contenido del elemento **Cuerpo** de SOAP de un mensaje entrante para crear la parte del cuerpo del mensaje de BizTalk. Si el elemento **Body** tiene varios elementos secundarios, sólo el primero de ellos será la parte del cuerpo del mensaje de BizTalk.<br /><br /> Esta es la configuración predeterminada.|  
    |**Ruta--contenido ubicado por la ruta de cuerpo**|Usar la expresión de ruta de cuerpo mostrada en el cuadro de texto **Expresión de ruta de cuerpo** para crear la parte del cuerpo del mensaje de BizTalk. Esta expresión se evalúa con respecto al elemento secundario inmediato del elemento **Cuerpo** de SOAP de un mensaje entrante.<br /><br /> Esta opción está desactivada de forma predeterminada.|  
    |**Expresión de ruta de cuerpo**|Escribir la expresión de ruta de cuerpo para identificar una parte específica de un mensaje entrante utilizada para crear la parte del cuerpo del mensaje de BizTalk. Esta expresión de ruta de cuerpo se evalúa con respecto al elemento secundario inmediato del elemento **Cuerpo** de SOAP de un mensaje entrante. Si esta expresión de ruta de cuerpo devuelve varios nodos, solo se elegirá el primero de ellos para la parte del cuerpo del mensaje de BizTalk. Esta propiedad es necesaria si la opción **Ruta -- contenido ubicado por la ruta de cuerpo** aparece seleccionada.<br /><br /> Tipo: cadena<br /><br /> Longitud mínima: 0<br /><br /> Longitud máxima: 32767<br /><br /> El valor predeterminado es una cadena vacía.|  
    |**Codificación de nodo**|Especifique el tipo de codificación que WCF-BasicHttpRelay adaptador de recepción utiliza para descodificar el nodo identificado por la expresión de ruta de cuerpo en el **expresión de ruta de acceso del cuerpo** cuadro de texto.<br /><br /> Esta propiedad es necesaria si la opción **Ruta -- contenido ubicado por la ruta de cuerpo** aparece seleccionada. Los valores válidos incluyen los siguientes:<br /><br /> -   **Base64**: codificación Base64.<br />-   **Hex**: codificación Hexadecimal.<br />-   **Cadena**: codificación de texto - UTF-8<br />-   **XML**: los adaptadores WCF crean el cuerpo del mensaje de BizTalk con el XML externo del nodo seleccionado por la expresión de ruta de acceso de cuerpo en el **expresión de ruta de acceso del cuerpo** cuadro de texto.<br /><br /> El valor predeterminado es **XML**.|  
    |**Cuerpo--Cuerpo de mensaje de respuesta de BizTalk**|Use la parte del cuerpo del mensaje de BizTalk para crear el contenido del elemento **Cuerpo** de SOAP de un mensaje de respuesta saliente. Esta propiedad sólo es válida para las ubicaciones de recepción de solicitud-respuesta.<br /><br /> Esta es la configuración predeterminada.|  
    |**Plantilla--contenido especificado por plantilla**|Use la plantilla proporcionada en el cuadro de texto **XML** para crear el contenido del elemento **Cuerpo** de SOAP de un mensaje saliente. Esta propiedad sólo es válida para las ubicaciones de recepción de solicitud-respuesta.<br /><br /> Esta opción está desactivada de forma predeterminada.|  
    |**XML**|Escriba la plantilla con formato XML para el contenido del elemento **Cuerpo** de SOAP de un mensaje saliente. Esta propiedad es necesaria si la opción **Cuerpo – cuerpo de mensaje de respuesta de BizTalk** aparece seleccionada. Esta propiedad sólo es válida para las ubicaciones de recepción de solicitud-respuesta.<br /><br /> Tipo: cadena<br /><br /> Longitud mínima: 0<br /><br /> Longitud máxima: 32767<br /><br /> El valor predeterminado es  **\<bts-msg-body xmlns = "http://www.microsoft.com/schemas/bts2007" encoding = "xml"\>**.|  
    |**Suspender mensaje de solicitud en caso de error**|Especificar si se va a suspender el mensaje de solicitud cuyo procesamiento de entrada no se puede realizar correctamente debido a un error de canalización de recepción o de enrutamiento.<br /><br /> Esta opción está desactivada de forma predeterminada.|  
    |**Incluir detalle de excepción en errores**|Especificar si se van a devolver errores de SOAP cuando se produce un error para una depuración sencilla.<br /><br /> Esta opción está desactivada de forma predeterminada.|  
  
9. Haga clic en **Aceptar**.  
  
10. Especifique los valores apropiados en el cuadro de diálogo **Propiedades de la ubicación de recepción** para completar la configuración de la ubicación de recepción y haga clic en **Aceptar** para guardar la configuración. Para obtener información sobre la **propiedades de ubicaciones de recepción** cuadro de diálogo, vea [cómo crear una ubicación de recepción](../core/how-to-create-a-receive-location.md).  

## <a name="create-the-send-port"></a>Crear el puerto de envío

1.  En la consola de administración de BizTalk, cree un nuevo puerto de envío o haga doble clic en un puerto de envío existente para modificarlo. Vea [cómo crear un puerto de envío](../core/how-to-create-a-send-port2.md). Configure todas las opciones del puerto de envío y especifique **WCF-BasicHttpRelay** para el **tipo** opción en el **transporte** sección de la **General**ficha.  
  
2.  En el **General** ficha la **transporte** sección, haga clic en el **configurar** botón.  
  
3.  En el **propiedades de transporte de WCF-BasicHttpRelay** cuadro de diálogo, en la **General** ficha, especifique lo siguiente:  
  
    |Use|Para|  
    |--------------|----------------|  
    |**Dirección (URI)**|Requerido. Especifique la dirección URL donde se implementa el extremo de retransmisión en el Bus de servicio. Normalmente, la dirección URL tiene el siguiente formato:<br /><br /> `https://<namespace>.servicebus.windows.net/`|  
    |**Identidad del extremo**|Opcional. Especifique la identidad del extremo. Esta configuración permite que el puerto de envío se autentique con el extremo. En el proceso de negociación entre el extremo y el puerto de envío, la infraestructura de Windows Communication Foundation (WCF) asegurará que la identidad del extremo coincide con los valores de este elemento.<br /><br /> Esta opción está desactivada de forma predeterminada.|  
    |**Acción**|Especifique el **SOAPAction** campo de encabezado HTTP para los mensajes salientes. Esta propiedad también puede establecerse a través de la propiedad de contexto de mensaje **WCF. Acción** en una canalización o una orquestación. Puede especificar este valor de dos maneras diferentes: el formato de acción única y el formato de asignación de acciones. Si establece esta propiedad en el formato de acción única: por ejemplo, `http://contoso.com/Svc/Op1`- la **SOAPAction** encabezado mensajes salientes siempre se establece en el valor especificado en esta propiedad.<br /><br /> Si establece esta propiedad en el formato de asignación de acción, la salida **SOAPAction** encabezado viene determinado por la **BTS. Operación** propiedad de contexto. Por ejemplo, si esta propiedad se establece en el siguiente formato XML y **BTS. Operación** propiedad está establecida en Op1, el adaptador de envío WCF usa `http://contoso.com/Svc/Op1` para los salientes **SOAPAction** encabezado.<br /><br /> `<BtsActionMapping> <Operation Name="Op1" Action="http://contoso.com/Svc/Op1" /> <Operation Name="Op2" Action="http://contoso.com/Svc/Op2" /> </BtsActionMapping>`<br /><br /> Si los mensajes salientes proceden de un puerto de orquestación, las instancias de orquestación establecen dinámicamente la **BTS. Operación** propiedad con el nombre de la operación del puerto. Si los mensajes salientes se enrutan con enrutamiento por contenidos, puede establecer el **BTS. Operación** propiedad en componentes de canalización.<br /><br /> Importante:<br /><br /> [!INCLUDE[sb](../includes/sb-md.md)] requiere que se establezca una acción de SOAP al enviar mensajes a extremos de retransmisión.<br /><br /> Longitud mínima: 0<br /><br /> Longitud máxima: 32767<br /><br /> El valor predeterminado es una cadena vacía.|  
  
4.  En el **propiedades de transporte de WCF-BasicHttpRelay** cuadro de diálogo, en la **enlace** pestaña, configure el tiempo de espera y propiedades de codificación.  
  
    |Use|Para|  
    |--------------|----------------|  
    |**Abra el tiempo de espera (hh:mmss)**|Especificar un valor de marco temporal que indica el intervalo de tiempo proporcionado para que se complete una operación de apertura del canal. Este valor debe ser mayor o igual que **System.TimeSpan.Zero**.<br /><br /> Valor predeterminado: 00:01:00<br /><br /> Valor máximo:  23:59:59|  
    |**Enviar tiempo de espera (hh:mmss)**|Especificar un valor de marco temporal que indica el intervalo de tiempo proporcionado para que se complete una operación de envío. Este valor debe ser mayor o igual que **System.TimeSpan.Zero**. Si usa un puerto de envío de petición-respuesta, este valor especifica un marco temporal para que se complete la interacción, incluso cuando el servicio devuelva un mensaje grande.<br /><br /> Valor predeterminado: 00:01:00<br /><br /> Valor máximo:  23:59:59|  
    |**Tiempo de espera de cierre (hh:mmss)**|Especificar un valor de marco temporal que indica el intervalo de tiempo proporcionado para que se complete una operación de cierre del canal. Este valor debe ser igual o mayor que **System.TimeSpan.Zero**.<br /><br /> Valor predeterminado: 00:01:00<br /><br /> Valor máximo:  23:59:59|  
    |**Tamaño máximo del mensaje recibido (bytes)**|Especificar el tamaño máximo, en bytes, para mensajes, con encabezados incluidos, que se pueden recibir a través de la red. El tamaño de los mensajes se limita mediante la cantidad de memoria asignada a cada mensaje. Puede usar esta propiedad para limitar la exposición a ataques por denegación de servicio (DoS).<br /><br /> El adaptador de WCF-BasicHttpRelay aprovecha la [BasicHttpBinding](http://go.microsoft.com/fwlink/?LinkId=81086) clase en el modo de transferencia almacenado en búfer para comunicarse con un punto de conexión. Para el modo de transporte almacenado en búfer, el [BasicHttpBinding.MaxBufferSize](http://go.microsoft.com/fwlink/?LinkId=80659) propiedad siempre es igual al valor de esta propiedad.<br /><br /> Valor predeterminado: 65536<br /><br /> Valor máximo: 2147483647|  
    |**Codificación de mensajes**|Especificar el codificador que se usa para codificar el mensaje SOAP. Los valores válidos incluyen los siguientes:<br /><br /> -                         **Texto**: usar un codificador de mensajes de texto.<br /><br /> -                         **MTOM**: usar un codificador Message Transmission organización Mechanism 1.0 (MTOM).<br /><br /> Valor predeterminado: **texto**|  
    |**Codificación de texto**|Especifique la codificación que se usará para emitir los mensajes en el enlace del juego de caracteres cuando la **codificación de mensajes** propiedad está establecida en **texto**. Los valores válidos incluyen los siguientes:<br /><br /> -                         **UTF-16LE (unicodeFFFE)**: codificación Unicode BigEndian.<br /><br /> -                         **UTF-16**: codificación de 16 bits.<br /><br /> -                         **UTF-8**: codificación de 8 bits<br /><br /> Valor predeterminado: **utf-8**|  
  
5.  En el **propiedades de transporte de WCF-BasicHttpRelay** cuadro de diálogo, en la **seguridad** ficha, defina las capacidades de seguridad del puerto de envío WCF-BasicHttpRelay.  
  
    |Use|Para|  
    |--------------|----------------|  
    |**Modo de seguridad**|Especificar el tipo de seguridad que se usa. Los valores válidos incluyen los siguientes:<br /><br /> -                         **Ninguno**: mensajes no están protegidos durante la transferencia.<br /><br /> -                         **Transporte**: se proporciona seguridad mediante el transporte HTTPS. Los mensajes SOAP están protegidos mediante HTTPS. La cadena de certificados de CA del certificado X.509 del servicio debe estar instalada en el almacén de certificados Entidades emisoras de certificados raíz de confianza del equipo de modo que se pueda autenticar el servicio en el puerto de envío mediante el certificado del servicio.<br /><br /> -                         **Mensaje**: seguridad se proporciona mediante la seguridad del mensaje SOAP. De forma predeterminada, el mensaje SOAP **cuerpo** elemento está cifrado y firmado. El único valor válido **tipo de credencial de cliente de mensaje** para el envío de WCF-BasicHttpRelay adaptador es **certificado**. Este modo necesita el transporte HTTP.<br /><br /> -                         **TransportWithMessageCredential**: el transporte HTTPS proporciona integridad, confidencialidad y autenticación del servicio. La cadena de certificados de CA del certificado X.509 del servicio debe estar instalada en el almacén de certificados Entidades emisoras de certificados raíz de confianza en este equipo de modo que se pueda autenticar el servicio en el puerto de envío mediante el certificado del servicio. La seguridad de mensajes de SOAP proporciona la autenticación del puerto de envío.<br /><br /> El valor predeterminado es **ninguno**.|  
    |**Tipo de credencial de cliente de mensajes**|Especifique las opciones de seguridad de nivel de mensaje solo si ha definido la **modo de seguridad** anteriormente a **mensaje** o **TransportWithMessageCredential**. Los valores válidos incluyen los siguientes:<br /><br /> -                         **Nombre de usuario**: este puerto de envío se autentica en el punto de conexión con un **nombre de usuario** credencial. Esto no es compatible con el adaptador de envío WCF-BasicHttpRelay.<br /><br /> -                         **Certificado**: este puerto de envío se autentica en el punto de conexión mediante el certificado de cliente especificado mediante el **huella digital de certificado de cliente** propiedad. Además, cuando se utiliza este tipo de credencial, el certificado de servicio debe proporcionarse a través de la **huella digital de certificado de servicio** propiedad.<br /><br /> El valor predeterminado es **nombre de usuario**.|  
    |**Conjunto de algoritmos**|Especificar el cifrado de mensajes y los algoritmos de encapsulado de claves. Estos algoritmos se asignan a los que se indican en la especificación Security Policy Language (WS-SecurityPolicy). Los valores posibles son:<br /><br /> -                         **Basic128**: Use el cifrado Aes128, Sha1 para la síntesis del mensaje y Rsa-oaep-mgf1p para el encapsulado de claves.<br /><br /> -                         **Basic128Rsa15**: Use Aes128 para el cifrado de mensajes, Sha1 para la síntesis del mensaje y Rsa15 para el encapsulado de claves.<br /><br /> -                         **Basic128Sha256**: Use Aes256 para el cifrado de mensajes, Sha256 para la síntesis del mensaje y Rsa-oaep-mgf1p para el encapsulado de claves.<br /><br /> -                         **Basic128Sha256Rsa15**: Use Aes128 para el cifrado de mensajes, Sha256 para la síntesis del mensaje y Rsa15 para el encapsulado de claves.<br /><br /> -                         **Basic192**: Use el cifrado Aes192, Sha1 para la síntesis del mensaje y Rsa-oaep-mgf1p para el encapsulado de claves.<br /><br /> -                         **Basic192Rsa15**: Use Aes192 para el cifrado de mensajes, Sha1 para la síntesis del mensaje y Rsa15 para el encapsulado de claves.<br /><br /> -                         **Basic192Sha256**: Use Aes192 para el cifrado de mensajes, Sha256 para la síntesis del mensaje y Rsa-oaep-mgf1p para el encapsulado de claves.<br /><br /> -                         **Basic192Sha256Rsa15**: Use Aes192 para el cifrado de mensajes, Sha256 para la síntesis del mensaje y Rsa15 para el encapsulado de claves.<br /><br /> -                         **Basic256**: Use el cifrado Aes256, Sha1 para la síntesis del mensaje y Rsa-oaep-mgf1p para el encapsulado de claves.<br /><br /> -                         **Basic256Rsa15**: Use Aes256 para el cifrado de mensajes, Sha1 para la síntesis del mensaje y Rsa15 para el encapsulado de claves.<br /><br /> -                         **Basic256Sha256**: Use Aes256 para el cifrado de mensajes, Sha256 para la síntesis del mensaje y Rsa-oaep-mgf1p para el encapsulado de claves.<br /><br /> -                         **Basic256Sha256Rsa15**: Use Aes256 para el cifrado de mensajes, Sha256 para la síntesis del mensaje y Rsa15 para el encapsulado de claves.<br /><br /> -                         **TripleDes**: Use el cifrado TripleDes, Sha1 para la síntesis del mensaje y Rsa-oaep-mgf1p para el encapsulado de claves.<br /><br /> -                         **TripleDesRsa15**: Use el cifrado TripleDes, Sha1 para la síntesis del mensaje y Rsa15 para el encapsulado de claves.<br /><br /> -                         **TripleDesSha256**: Use TripleDes para el cifrado de mensajes, Sha256 para la síntesis del mensaje y Rsa-oaep-mgf1p para el encapsulado de claves.<br /><br /> -                         **TripleDesSha256Rsa15**: Use TripleDes para el cifrado de mensajes, Sha256 para la síntesis del mensaje y Rsa15 para el encapsulado de claves.<br /><br /> El valor predeterminado es **Basic256**.|  
    |**Huella digital de certificado de cliente**|Especifique la huella digital del certificado X.509 para autenticar este puerto de envío en el extremo. Puede seleccionar la huella digital desplazándose hasta la **mi** almacenar en la **usuario actual** ubicación con el **examinar** botón.<br /><br /> Nota:<br /><br /> Debe instalar el certificado de cliente en el **usuario actual** ubicación de la cuenta de usuario para el controlador de envío que aloja este puerto de envío.<br /><br /> Longitud mínima: 0<br /><br /> Longitud máxima: 40<br /><br /> El valor predeterminado es una cadena vacía.|  
    |**Huella digital de certificado de servicio**|Especifique la huella digital del certificado X.509 para autenticar el extremo al que este puerto de envío envía mensajes. Puede seleccionar la huella digital desplazándose por el **otras personas** almacenar en la **equipo Local** ubicación con el **examinar** botón.<br /><br /> Longitud mínima: 0<br /><br /> Longitud máxima: 40<br /><br /> El valor predeterminado es una cadena vacía.|  
    |**Credenciales de nombre de usuario**|Especificar las credenciales para enviar mensajes. Puede especificar la propiedad haciendo clic en el **editar** botón. Debe establecer las credenciales si seleccionó la **nombre de usuario** opción **tipo de credencial de cliente de mensaje**.<br /><br /> El valor predeterminado es **no use Single Sign-On**.|  
    |**Usar identidad de servicio de ACS**|Se aplica a [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)] y [!INCLUDE[btsBizTalkServerNoVersion_md](../includes/btsbiztalkservernoversion-md.md)] de 2013.<br/><br/>Seleccione esta casilla de verificación y haga clic en **editar** y proporcione los valores siguientes para autenticar con el Bus de servicio.<br /><br /> -                         **Uri de STS del servicio de Control de acceso** : establezca esta propiedad en `https://<Namespace>-sb.accesscontrol.windows.net/`, donde \<espacio de nombres\> es el espacio de nombres de Bus de servicio.<br /><br /> -                         **Nombre del emisor** : especifique el nombre del emisor. Normalmente, este valor está establecido en el propietario.<br /><br /> -                         **Clave del emisor** : especifique la clave del emisor.|  
    |**Información de conexión de Bus de servicio** | Nuevo a partir de [!INCLUDE[bts2016_md](../includes/bts2016-md.md)].<br/><br/>Elija esta opción utilizar la firma de acceso compartido (SAS) o el servicio de Control de acceso (ACS) del espacio de nombres de Bus de servicio. <br/><br/>Seleccione una opción y, a continuación, seleccione **editar** para escribir la información de clave:<br/><br/> - **Firma de acceso compartido** : escriba el nombre de la clave de acceso y la clave de acceso. Ambos valores se muestran en la [portal de Azure](https://portal.azure.com).<br/> - **Access Control Service** : escriba el URI de STS (`https://<yourNamespace>-sb.accesscontrol.windows.net/`), nombre del emisor y clave del emisor. Usar Windows PowerShell para recuperar estos valores, como se describe en [adaptador SB-Messaging](../core/sb-messaging-adapter.md). |
  
6.  En el **propiedades de transporte de WCF-BasicHttpRelay** cuadro de diálogo, en la **Proxy** pestaña, configure la configuración de proxy para el puerto de envío WCF-BasicHttpRelay.  
  
    |Use|Para|  
    |--------------|----------------|  
    |**Usar configuración de proxy del controlador de envío**|Especificar si el puerto de envío usa la configuración de proxy en el controlador de envío que aloja este puerto de envío.<br /><br /> Esta es la configuración predeterminada.|  
    |**No utilice el proxy**|Indicar si el puerto de envío usa un servidor proxy.<br /><br /> Esta opción está desactivada de forma predeterminada.|  
    |**Utilizar proxy**|Indicar si este puerto de envío usa el servidor proxy especificado en el **dirección** propiedad.<br /><br /> Esta opción está desactivada de forma predeterminada.|  
    |**Dirección**|Especificar la dirección del servidor proxy. Use la **https** o **http** esquema según la configuración de seguridad. Esta dirección puede ir seguida de dos puntos y el número de puerto. Por ejemplo, http://127.0.0.1:8080.<br /><br /> Esta propiedad requiere un valor sólo si **utilizar proxy** está seleccionada.<br /><br /> Tipo: cadena<br /><br /> Longitud máxima: 256<br /><br /> El valor predeterminado es una cadena vacía.|  
    |**Nombre de usuario.**|Especificar el nombre de usuario que se utilizará para la autenticación. Si se usa la autenticación integrada, el nombre de usuario incluye el dominio, es decir, dominio\nombre de usuario. Si se usa la autenticación básica o implícita, el nombre de usuario no incluye el dominio\\. Esta propiedad requiere un valor sólo si **utilizar proxy** está seleccionada.<br /><br /> Nota:<br /><br /> El adaptador de envío WCF-BasicHttpRelay usa la autenticación básica para el proxy.<br /><br /> Tipo: cadena<br /><br /> Longitud mínima: 0<br /><br /> Longitud máxima: 256<br /><br /> El valor predeterminado es una cadena vacía.|  
    |**Contraseña**|Especificar la contraseña que se utilizará para la autenticación.<br /><br /> Esta propiedad requiere un valor sólo si **utilizar proxy** está seleccionada.<br /><br /> Tipo: cadena<br /><br /> Longitud mínima: 0<br /><br /> Longitud máxima: 256<br /><br /> El valor predeterminado es una cadena vacía.|  
  
7.  En el **propiedades de transporte de WCF-BasicHttpRelay** cuadro de diálogo, en la **mensajes** ficha, especifique la selección de datos de SOAP **cuerpo** elemento.  
  
    |Use|Para|  
    |--------------|----------------|  
    |**Cuerpo--Cuerpo de mensaje de solicitud de BizTalk**|Utilice la parte del cuerpo de mensaje de BizTalk para crear el contenido del mensaje SOAP **cuerpo** (elemento) para un mensaje saliente.<br /><br /> Esta es la configuración predeterminada.|  
    |**Plantilla--contenido especificado por plantilla**|Use la plantilla proporcionada en el cuadro de texto **XML** para crear el contenido del elemento **Cuerpo** de SOAP de un mensaje saliente.<br /><br /> Esta opción está desactivada de forma predeterminada.|  
    |**XML**|Escriba la plantilla con formato XML para el contenido del mensaje SOAP **cuerpo** elemento de un mensaje saliente. Esta propiedad es necesaria si la opción **Cuerpo – cuerpo de mensaje de respuesta de BizTalk** aparece seleccionada.<br /><br /> Tipo: cadena<br /><br /> Longitud mínima: 0<br /><br /> Longitud máxima: 32767<br /><br /> El valor predeterminado es `<bts-msg-body xmlns="http://www.microsoft.com/schemas/bts2007" encoding="xml"/>`.|  
    |**Sobre--entero \<soap: Envelope\>**|Cree la parte del cuerpo del mensaje de BizTalk a partir del **Sobre** de SOAP completo de un mensaje entrante. Esta propiedad sólo es válida para puertos de petición-respuesta.<br /><br /> Esta opción está desactivada de forma predeterminada.|  
    |**Cuerpo--contenido \<soap: Body\> elemento**|Usar el contenido del elemento **Cuerpo** de SOAP de un mensaje entrante para crear la parte del cuerpo del mensaje de BizTalk. Si el elemento **Body** tiene varios elementos secundarios, sólo el primero de ellos será la parte del cuerpo del mensaje de BizTalk. Esta propiedad sólo es válida para puertos de petición-respuesta.<br /><br /> Esta es la configuración predeterminada.|  
    |**Ruta--contenido ubicado por la ruta de cuerpo**|Usar la expresión de ruta de cuerpo mostrada en el cuadro de texto **Expresión de ruta de cuerpo** para crear la parte del cuerpo del mensaje de BizTalk. Esta expresión se evalúa con respecto al elemento secundario inmediato del elemento **Cuerpo** de SOAP de un mensaje entrante. Esta propiedad sólo es válida para puertos de petición-respuesta.<br /><br /> Esta opción está desactivada de forma predeterminada.|  
    |**Expresión de ruta de cuerpo**|Escribir la expresión de ruta de cuerpo para identificar una parte específica de un mensaje entrante utilizada para crear la parte del cuerpo del mensaje de BizTalk. Esta expresión se evalúa con respecto al elemento secundario inmediato del mensaje SOAP **cuerpo** nodo de un mensaje entrante. Si esta expresión de ruta de cuerpo devuelve varios nodos, solo se elegirá el primero de ellos para la parte del cuerpo del mensaje de BizTalk. Esta propiedad es necesaria si la opción **Ruta -- contenido ubicado por la ruta de cuerpo** aparece seleccionada. Esta propiedad sólo es válida para puertos de petición-respuesta.<br /><br /> Tipo: cadena<br /><br /> Longitud mínima: 0<br /><br /> Longitud máxima: 32767<br /><br /> El valor predeterminado es una cadena vacía.|  
    |**Codificación de nodo**|Especifique el tipo de codificación que el adaptador de envío WCF-BasicHttpRelay usa para descodificar el nodo identificado por la expresión de ruta de acceso de cuerpo en el **expresión de ruta de acceso del cuerpo** cuadro de texto. Esta propiedad es necesaria si la opción **Ruta -- contenido ubicado por la ruta de cuerpo** aparece seleccionada. Esta propiedad sólo es válida para puertos de petición-respuesta. Los valores válidos incluyen los siguientes:<br /><br /> - **Base64**: codificación Base64.<br /><br /> -                         **Hex**: codificación Hexadecimal.<br /><br /> -                         **Cadena**: codificación de texto - UTF-8<br /><br /> -                         **XML**: los adaptadores WCF crean el cuerpo del mensaje de BizTalk con el XML externo del nodo seleccionado por la expresión de ruta de acceso de cuerpo en el **expresión de ruta de acceso del cuerpo** cuadro de texto.<br /><br /> El valor predeterminado es **XML**.|  
    |**Propagar mensaje de error**|Active esta casilla para enrutar el mensaje que genere un error de procesamiento de salida a una aplicación de suscripción (por ejemplo, otro puerto de recepción o programación de orquestación). Desactive la casilla para suspender los mensajes con error y generar una confirmación negativa (NACK). Esta propiedad sólo es válida para puertos de petición-respuesta.<br /><br /> El valor predeterminado es activada.|  
  
8.  Haga clic en **Aceptar** y **Aceptar** nuevo para guardar la configuración.  
  
## <a name="add-a-proxy-to-the-send-handler"></a>Agregar a un proxy para el controlador de envío

Puede agregar a un servidor proxy para el puerto de envío o el controlador de envío. Si va a agregar a un servidor proxy en el puerto de envío, a continuación, omita esta sección.

1.  En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] consola de administración, expanda [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] administración, expanda **grupo de BizTalk**, expanda **configuración de plataforma**y, a continuación, expanda **adaptadores**.  
  
2.  Seleccione **WCF-BasicHttpRelay**y, a continuación, seleccione el controlador de envío.  
  
3.  En **propiedades de controlador de adaptador**, en la **General** ficha, seleccione **propiedades**.  
  
4.  En el **Proxy** ficha, realice lo siguiente.  
  
    |Use|Para|  
    |--------------|----------------|  
    |**Utilizar proxy**|Indicar si este controlador de envío usa un servidor proxy.<br /><br /> Esta opción está desactivada de forma predeterminada.|  
    |**Dirección**|Especificar la dirección del servidor proxy. Use la **https** o **http** esquema según la configuración de seguridad. Esta dirección puede ir seguida de dos puntos y el número de puerto. Por ejemplo, http://127.0.0.1:8080.<br /><br /> Esta propiedad requiere un valor sólo si **utilizar proxy** está seleccionada.<br /><br /> Tipo: cadena<br /><br /> Longitud máxima: 256<br /><br /> El valor predeterminado es una cadena vacía.|  
    |**Nombre de usuario.**|Especificar el nombre de usuario que se utilizará para la autenticación. Si se usa la autenticación integrada o básica, el nombre de usuario incluye el dominio, es decir, dominio\nombre de usuario. Si se utiliza la autenticación implícita, el nombre de usuario no incluye el dominio\\.<br /><br /> Esta propiedad requiere un valor sólo si **utilizar proxy** está seleccionada.<br /><br /> Tipo: cadena<br /><br /> Longitud mínima: 0<br /><br /> Longitud máxima: 256<br /><br /> El valor predeterminado es una cadena vacía.|  
    |**Contraseña**|Especificar la contraseña que se utilizará para la autenticación.<br /><br /> Esta propiedad requiere un valor sólo si **utilizar proxy** está seleccionada.<br /><br /> Tipo: cadena<br /><br /> Longitud mínima: 0<br /><br /> Longitud máxima: 256<br /><br /> El valor predeterminado es una cadena vacía.|  
  
5.  Haga clic en **Aceptar** hasta que salga de todos los cuadros de diálogo.  
  
## <a name="see-also"></a>Vea también  
[Adaptador SB-Messaging](../core/sb-messaging-adapter.md)

[Uso de adaptadores](../core/using-adapters.md)
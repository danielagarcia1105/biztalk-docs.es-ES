---
title: Convoyes secuenciales | Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- convoy sets
- correlation sets, sequential receive tasks
ms.assetid: f05ff42c-2236-42a3-8166-19700e0c3d97
caps.latest.revision: 10
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: a160c8db8f0cff4ad9465e1e19c418fc0831a5d9
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/27/2018
ms.locfileid: "36971205"
---
# <a name="sequential-convoys"></a><span data-ttu-id="4bf5f-102">Convoyes secuenciales</span><span class="sxs-lookup"><span data-stu-id="4bf5f-102">Sequential Convoys</span></span>
<span data-ttu-id="4bf5f-103">Un convoy secuencial permite unir varios mensajes individuales para obtener un resultado necesario.</span><span class="sxs-lookup"><span data-stu-id="4bf5f-103">A sequential convoy enables multiple single messages to join together to achieve a required result.</span></span> <span data-ttu-id="4bf5f-104">Un convoy secuencial es un conjunto de mensajes relacionados que tienen un orden predefinido.</span><span class="sxs-lookup"><span data-stu-id="4bf5f-104">A sequential convoy is a set of related messages that have a predefined order.</span></span> <span data-ttu-id="4bf5f-105">Aunque los mensajes no tienen que ser exactamente iguales, BizTalk Server debe recibirlos en orden secuencial.</span><span class="sxs-lookup"><span data-stu-id="4bf5f-105">Although the messages do not have to be exactly the same, BizTalk Server must receive them in a sequential order.</span></span>  
  
 <span data-ttu-id="4bf5f-106">Por ejemplo, supongamos el caso de una empresa de venta directa en Internet que recibe pedidos nuevos de clientes directos y distribuidores durante el transcurso del día.</span><span class="sxs-lookup"><span data-stu-id="4bf5f-106">For example, suppose that an online retail company receives new orders from direct clients and from dealers throughout the course of the day.</span></span> <span data-ttu-id="4bf5f-107">Todos los pedidos recibidos antes de las 2:00 p.m. deben enviarse al almacén en un único lote, y la secuencia de recepción de los pedidos se debe mantener.</span><span class="sxs-lookup"><span data-stu-id="4bf5f-107">All orders received before 2:00 PM must go to the warehouse in a single batch, and the sequence of the receipt of the orders must be preserved.</span></span> <span data-ttu-id="4bf5f-108">De este modo, los pedidos recibidos con anterioridad tendrán prioridad en el caso de que se agoten las existencias de un artículo en el almacén.</span><span class="sxs-lookup"><span data-stu-id="4bf5f-108">This enables earlier orders to have priority in case any items are out of stock in the warehouse.</span></span> <span data-ttu-id="4bf5f-109">Para crear este lote de pedidos, se ensamblan todos los pedidos del día en un único archivo que contiene información de encabezado sobre el lote.</span><span class="sxs-lookup"><span data-stu-id="4bf5f-109">You build this batch order by assembling all orders for the day in a single file that has batch header information.</span></span> <span data-ttu-id="4bf5f-110">A las 2:00 p.m., todos los pedidos del día se envían al almacén para su procesamiento.</span><span class="sxs-lookup"><span data-stu-id="4bf5f-110">At 2:00 PM, all orders for the day go to the warehouse for processing.</span></span> <span data-ttu-id="4bf5f-111">Todos los pedidos recibidos después de las 2:00 p.m. se colocan en un lote nuevo para procesarlos el día siguiente.</span><span class="sxs-lookup"><span data-stu-id="4bf5f-111">All orders received after 2:00 PM are put into a new batch for processing on the following day.</span></span>  
  
 <span data-ttu-id="4bf5f-112">El escenario anterior es un ejemplo de proceso empresarial en el que se necesita un procesamiento de convoy secuencial para los mensajes entrantes.</span><span class="sxs-lookup"><span data-stu-id="4bf5f-112">The preceding scenario is an example of a business process that requires sequential convoy processing of incoming messages.</span></span> <span data-ttu-id="4bf5f-113">Según las normas de la empresa, todos los pedidos individuales recibidos antes de las 2:00 p.m. de un día concreto, se deben procesar a la vez como un lote.</span><span class="sxs-lookup"><span data-stu-id="4bf5f-113">The business requirements state that all single orders received before 2:00 PM for a specific day should batch together.</span></span> <span data-ttu-id="4bf5f-114">Para ello, es necesario que el primer mensaje recibido inicie una nueva instancia de orquestación e inicialice un conjunto de correlaciones.</span><span class="sxs-lookup"><span data-stu-id="4bf5f-114">This requires the first message received to start a new orchestration instance and initialize a correlation set.</span></span> <span data-ttu-id="4bf5f-115">A partir de ese momento, los demás pedidos recibidos que sean de ese mismo tipo de mensaje se enrutan a la instancia de orquestación que ya hay en ejecución.</span><span class="sxs-lookup"><span data-stu-id="4bf5f-115">At that point, all other orders received of that message type route to the already-running orchestration instance.</span></span> <span data-ttu-id="4bf5f-116">Para lograr esto, se coloca un **escuchar** forma (que contiene un **recepción** forma y un **retraso** forma) dentro de un **bucle** forma.</span><span class="sxs-lookup"><span data-stu-id="4bf5f-116">To accomplish this, you position a **Listen** shape (containing a **Receive** shape and a **Delay** shape) inside a **Loop** shape.</span></span> <span data-ttu-id="4bf5f-117">Tras alcanzarse la forma Retraso, termina la forma Bucle.</span><span class="sxs-lookup"><span data-stu-id="4bf5f-117">After reaching the delay, the loop ends.</span></span> <span data-ttu-id="4bf5f-118">Esto permite la recepción de un número desconocido de pedidos en el mismo proceso empresarial.</span><span class="sxs-lookup"><span data-stu-id="4bf5f-118">This allows for the receipt of an unknown number of orders in the same business process.</span></span>  
  
## <a name="implementing-sequential-convoys"></a><span data-ttu-id="4bf5f-119">Implementar convoyes secuenciales</span><span class="sxs-lookup"><span data-stu-id="4bf5f-119">Implementing Sequential Convoys</span></span>  
 <span data-ttu-id="4bf5f-120">Para implementar los convoyes secuenciales se utiliza el patrón de diseño de mensajería de "recepciones correlacionadas secuenciales" de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="4bf5f-120">You can implement sequential convoys by using the "sequential correlated receives" messaging design pattern in BizTalk Server.</span></span> <span data-ttu-id="4bf5f-121">Las recepciones correlacionadas secuenciales son recepciones que guardan correlación con recepciones anteriores.</span><span class="sxs-lookup"><span data-stu-id="4bf5f-121">Sequential correlated receives are receives that are correlated to previous receives.</span></span>  
  
 <span data-ttu-id="4bf5f-122">El procesamiento de convoy se usa en los casos en los que los conjuntos de correlaciones de una recepción los inicializa otra recepción.</span><span class="sxs-lookup"><span data-stu-id="4bf5f-122">Convoy processing takes place for cases in which the correlation sets for a receive are initialized by another receive.</span></span>  
  
 <span data-ttu-id="4bf5f-123">Hay una serie de restricciones aplicables a las recepciones que requieren un procesamiento de convoy. Estas restricciones son las siguientes:</span><span class="sxs-lookup"><span data-stu-id="4bf5f-123">For receives that require convoy processing, the following restrictions apply:</span></span>  
  
- <span data-ttu-id="4bf5f-124">Los conjuntos de correlaciones que constituyen un conjunto de convoy secuencial para una determinada recepción los debe inicializar una recepción anterior.</span><span class="sxs-lookup"><span data-stu-id="4bf5f-124">The correlation sets that constitute a sequential convoy set for a particular receive must be initialized by one preceding receive.</span></span>  
  
- <span data-ttu-id="4bf5f-125">El puerto de una recepción que requiere un procesamiento de convoy secuencial debe ser el mismo que el puerto de la recepción que inicializa el conjunto de convoy.</span><span class="sxs-lookup"><span data-stu-id="4bf5f-125">The port for a receive that requires sequential convoy processing must be the same as the port for the receive initializing the convoy set.</span></span> <span data-ttu-id="4bf5f-126">No se admiten convoyes entre puertos.</span><span class="sxs-lookup"><span data-stu-id="4bf5f-126">Cross-port convoys are not supported.</span></span>  
  
- <span data-ttu-id="4bf5f-127">Los tipos de mensaje de una recepción que requiere un procesamiento de convoy deben coincidir con el tipo de mensaje de la recepción que inicializa el conjunto de convoy, excepto si hay activa una instrucción de recepción en un puerto de entrega ordenada.</span><span class="sxs-lookup"><span data-stu-id="4bf5f-127">Message types for a receive that requires convoy processing must match the message type for the receive initializing the convoy set, unless the receive statement is operating on an ordered delivery port.</span></span>  
  
- <span data-ttu-id="4bf5f-128">Todas las recepciones que participan en un convoy secuencial deben ejecutarse con posterioridad a todos los conjuntos de correlaciones inicializados (o posteriores) por la recepción originadora de la inicialización, salvo si se procesan en un puerto de entrega ordenada.</span><span class="sxs-lookup"><span data-stu-id="4bf5f-128">All receives participating in a sequential convoy must follow all the correlation sets that are initialized (or followed) by the initializing receive, unless operating on an ordered delivery port.</span></span>  
  
- <span data-ttu-id="4bf5f-129">Si una instrucción de recepción de activación inicializa un convoy secuencial, la recepción de activación no puede tener una expresión de filtro, salvo si se procesa en un puerto de entrega ordenada.</span><span class="sxs-lookup"><span data-stu-id="4bf5f-129">If a sequential convoy is initialized by an activate receive statement, then the activate receive cannot have a filter expression unless operating on an ordered delivery port.</span></span>  
  
- <span data-ttu-id="4bf5f-130">Si una instrucción de recepción de activación inicializa un convoy secuencial, las siguientes recepciones no pueden estar dentro de una orquestación anidada.</span><span class="sxs-lookup"><span data-stu-id="4bf5f-130">If a sequential convoy is initialized by an activate receive, the following receives cannot be inside a nested orchestration.</span></span>  
  
  <span data-ttu-id="4bf5f-131">Para obtener un ejemplo de implementación de convoy secuencial, consulte [agregador (ejemplo de BizTalk Server)](../core/aggregator-biztalk-server-sample.md).</span><span class="sxs-lookup"><span data-stu-id="4bf5f-131">For an example of sequential convoy implementation, see [Aggregator (BizTalk Server Sample)](../core/aggregator-biztalk-server-sample.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4bf5f-132">Vea también</span><span class="sxs-lookup"><span data-stu-id="4bf5f-132">See Also</span></span>  
 <span data-ttu-id="4bf5f-133">[Trabajar con escenarios de convoyes](../core/working-with-convoy-scenarios.md) </span><span class="sxs-lookup"><span data-stu-id="4bf5f-133">[Working with Convoy Scenarios](../core/working-with-convoy-scenarios.md) </span></span>  
 [<span data-ttu-id="4bf5f-134">Convoyes paralelos</span><span class="sxs-lookup"><span data-stu-id="4bf5f-134">Parallel Convoys</span></span>](../core/parallel-convoys.md)
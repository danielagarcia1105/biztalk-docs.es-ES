---
title: Implementar un mecanismo de liberación de lotes externo | Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 5633a448-cc29-4931-a3ad-206ae25c989b
caps.latest.revision: 17
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 298857d60662bbe2240a5cfb6cc797e4fda7abdb
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/27/2018
ms.locfileid: "37010373"
---
# <a name="implementing-an-external-batch-release-mechanism"></a><span data-ttu-id="f3f8b-102">Implementar un mecanismo de lanzamiento de lotes externo</span><span class="sxs-lookup"><span data-stu-id="f3f8b-102">Implementing an External Batch Release Mechanism</span></span>
<span data-ttu-id="f3f8b-103">Puede desencadenar el lanzamiento de un lote mediante un desencadenador de versión externo.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-103">You can trigger the release of a batch using an external release trigger.</span></span> <span data-ttu-id="f3f8b-104">El lanzamiento se puede desencadenar de forma automática mediante una aplicación servidor, para línea empresarial al alcanzar un determinado umbral.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-104">The release could be automatically triggered by a back-end, line-of-business application upon reaching a certain threshold.</span></span> <span data-ttu-id="f3f8b-105">Este mecanismo es además desencadena de forma automática el lanzamiento del lote mediante una programación o un recuento de conjuntos de transacciones o caracteres, o desencadena de forma manual el lote al hacer clic en el **invalidar** situado en la **por lotes Configuración** página de la ficha de acuerdo unidireccional.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-105">This mechanism is in addition to automatically triggering the batch release by a schedule or a count of transaction sets or characters, or manually triggering the batch by clicking the **Override** button in the **Batch Configuration** page of the one-way agreement tab.</span></span>  
  
 <span data-ttu-id="f3f8b-106">Para implementar un desencadenador de versión externo, es necesario configurar un puerto y una ubicación de recepción para procesar OverrideControlMessage.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-106">To implement an external release trigger, you need to set up a receive port and location to process the OverrideControlMessage.</span></span> <span data-ttu-id="f3f8b-107">La ubicación de recepción debe usar la canalización de recepción `Edi.BatchControlMessageRecvPipeline`.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-107">The receive location must use the `Edi.BatchControlMessageRecvPipeline` receive pipeline.</span></span> <span data-ttu-id="f3f8b-108">Esta es la misma canalización que usa la ubicación de recepción BatchControlMessageRecvLoc y que usa [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] para procesar mensajes de invalidación de forma manual.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-108">This is the same pipeline that is used by the BatchControlMessageRecvLoc receive location that [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] uses to process manual override messages.</span></span> <span data-ttu-id="f3f8b-109">No obstante, BatchControlMessageRecvLoc es una ubicación de recepción de tipo SQL, mientras que la ubicación de recepción que ha configurado para un desencadenador de versiones externo puede utilizar cualquier tipo de adaptador.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-109">However, BatchControlMessageRecvLoc is a SQL-type receive location, while the receive location that you set up for an external release trigger can use any adapter type.</span></span>  
  
 <span data-ttu-id="f3f8b-110">El mensaje de control XML desencadena un lanzamiento de lote externo.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-110">An external batch release is triggered by an XML control message.</span></span> <span data-ttu-id="f3f8b-111">Para desencadenar el lote, la aplicación servidor enruta el mensaje de control a la ubicación de recepción.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-111">To trigger the batch, the back-end application routes the control message to the receive location.</span></span> <span data-ttu-id="f3f8b-112">Puede modificar el mensaje de control para activar, invalidar o finalizar el lote.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-112">You can modify the control message to activate, override, or terminate the batch.</span></span> <span data-ttu-id="f3f8b-113">Vea el procedimiento que se describe a continuación para crear el mensaje de control.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-113">See the procedure below for creating the control message.</span></span>  
  
 <span data-ttu-id="f3f8b-114">Para habilitar el desencadenador de versión externo, debe seleccionar la **desencadenador de versión externo** propiedad en el **configuración por lotes** página de la **las propiedades del acuerdo** cuadro de diálogo cuadro para X12 o EDIFACT.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-114">To enable the external release trigger, you must select the **External release trigger** property in the **Batch Configuration** page of the **Agreement Properties** dialog box for either X12 or EDIFACT.</span></span> <span data-ttu-id="f3f8b-115">Esta propiedad indica que para la liberación de lotes es necesario un mensaje de liberación externo.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-115">This property indicates that an external release message is required for batch release.</span></span> <span data-ttu-id="f3f8b-116">El **invalidar** botón, **detener** botón, y **activación** los controles del intervalo siguen siendo válidos si el **desencadenador de versión externo** tiene propiedad se ha seleccionado.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-116">The **Override** button, **Stop** button, and **Activation** range controls remain valid if the **External release trigger** property has been selected.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="f3f8b-117">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="f3f8b-117">Prerequisites</span></span>  
 <span data-ttu-id="f3f8b-118">Debe iniciar sesión como miembro del grupo de administradores de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] o de operadores B2B de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f3f8b-118">You must be logged on as a member of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators or [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] B2B Operators group.</span></span>  
  
### <a name="to-create-a-receive-location-for-the-external-batch-release-trigger-message"></a><span data-ttu-id="f3f8b-119">Para crear una ubicación de recepción para el mensaje de desencadenador de versión de lote externo</span><span class="sxs-lookup"><span data-stu-id="f3f8b-119">To create a receive location for the external batch release trigger message</span></span>  
  
1. <span data-ttu-id="f3f8b-120">En la consola de administración de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], cree un puerto de recepción unidireccional.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-120">In [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration Console, create a one-way receive port.</span></span> <span data-ttu-id="f3f8b-121">Para obtener instrucciones sobre cómo crear un puerto de recepción, consulte [cómo crear un puerto de recepción](../core/how-to-create-a-receive-port.md).</span><span class="sxs-lookup"><span data-stu-id="f3f8b-121">For instructions on how to create a receive port, see [How to Create a Receive Port](../core/how-to-create-a-receive-port.md).</span></span>  
  
2. <span data-ttu-id="f3f8b-122">Cree una ubicación unidireccional en el puerto de recepción.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-122">Create a one-way receive location in the receive port.</span></span>  
  
3. <span data-ttu-id="f3f8b-123">Seleccione el tipo de transporte.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-123">Select the transport type.</span></span> <span data-ttu-id="f3f8b-124">Puede seleccionar cualquier tipo para esta ubicación de recepción.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-124">You can select any type for this receive location.</span></span> <span data-ttu-id="f3f8b-125">Una solución habitual es seleccionar el tipo de archivo y especificar una carpeta para recibir el archivo.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-125">A common solution is to select the FILE type, and enter a folder to receive the file.</span></span>  
  
4. <span data-ttu-id="f3f8b-126">Para la canalización de recepción, seleccione `BatchControlMessageRecvPipeline`.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-126">For Receive pipeline, select `BatchControlMessageRecvPipeline`.</span></span>  
  
5. <span data-ttu-id="f3f8b-127">Haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-127">Click **OK**.</span></span>  
  
### <a name="to-create-the-external-batch-release-trigger-message"></a><span data-ttu-id="f3f8b-128">Para crear el mensaje de desencadenador de versión de lote externo</span><span class="sxs-lookup"><span data-stu-id="f3f8b-128">To create the external batch release trigger message</span></span>  
  
1. <span data-ttu-id="f3f8b-129">En el Bloc de notas, cree un nuevo archivo y denomínelo con una extensión .xml.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-129">In Notepad, create a new file and name it with an .xml extension.</span></span>  
  
2. <span data-ttu-id="f3f8b-130">Agregue lo siguiente al archivo:</span><span class="sxs-lookup"><span data-stu-id="f3f8b-130">Add the following to the file:</span></span>  
  
   ```  
   <?xml version="1.0" encoding="utf-8"?>  
   <ControlMessage xmlns="http://SQLControlMessage.IssueSelect">  
     <PAM_Control xmlns="http://SQLControlMessage.IssueSelect">  
       <DestinationParty>[Party ID]</DestinationParty>  
       <EdiMessageType>[0 for X12\HIPAA|1 for Edifact]</EdiMessageType>  
       <ActionType>EdiBatchOverride</ActionType>  
       <ActionDateTime>[yyyy-mm-ddThh:mm:ss.sss]</ActionDateTime>  
       <UsedOnce>0</UsedOnce>  
       <BatchId>[Batch ID]</BatchId>  
       <BatchName>[Batch Name]</BatchName>  
       <DestinationPartyName>[Destination Party/Partner name]</DestinationPartyName>  
       <SenderPartyName>[Sender Party/Partner name]</SenderPartyName>  
       <AgreementName>[Agreement Name]</AgreementName>  
       <ReceiverPartyNameType>[Receiver Party/Partner name]</ReceiverPartyNameType>  
       <ToBeBatched>1</ToBeBatched>  
     </PAM_Control>  
   </ControlMessage>  
   ```  
  
    <span data-ttu-id="f3f8b-131">Reemplace los valores del fragmento anterior, tal como se indica a continuación:</span><span class="sxs-lookup"><span data-stu-id="f3f8b-131">Replace the values in the above excerpt as follows:</span></span>  
  
   - <span data-ttu-id="f3f8b-132">Especifique el tipo de acción.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-132">Specify the action type.</span></span> <span data-ttu-id="f3f8b-133">Normalmente, el **ActionType** debe establecerse en **EdiBatchOverride** para invalidar la configuración de lote realizada en el acuerdo.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-133">Typically, the **ActionType** must be set to **EdiBatchOverride** to override the batch settings done in the agreement.</span></span> <span data-ttu-id="f3f8b-134">También puede establecerlo en **EdiBatchTerminate** para finalizar el lote a través de un desencadenador externo.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-134">You can also set this to **EdiBatchTerminate** to terminate the batch through an external trigger.</span></span>  
  
     > [!NOTE]
     >  <span data-ttu-id="f3f8b-135">Microsoft recomienda no usar el desencadenador de versión externo para activar un lote.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-135">Microsoft recommends you should not use external release trigger to activate a batch.</span></span> <span data-ttu-id="f3f8b-136">Por lo tanto, no debe especificar **ActionType** como **EdiBatchActivate**.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-136">So, you should not specify **ActionType** as **EdiBatchActivate**.</span></span>  
  
   - <span data-ttu-id="f3f8b-137">Determine el identificador del lote y el nombre del lote.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-137">Determine the Batch ID and Batch Name.</span></span> <span data-ttu-id="f3f8b-138">Para ello, abra el **las propiedades del acuerdo** diálogo cuadro y, en la ficha de acuerdo unidireccional, haga clic en **configuración por lotes**.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-138">To do so, open the **Agreement Properties** dialog box, and on the one-way agreement tab, click **Batch Configuration**.</span></span> <span data-ttu-id="f3f8b-139">Haga clic en la pestaña del lote que desea invalidar y especifique el valor de **nombre de lote** y **Id. de lote** campos en el **BatchName** y **BatchID**nodos del mensaje de control.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-139">Click the tab for the batch to be overridden and enter the value of **Batch name** and **Batch ID** fields into the **BatchName** and **BatchID** nodes of the control message.</span></span>  
  
   - <span data-ttu-id="f3f8b-140">Especifique el nombre de la entidad de destino.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-140">Specify the destination party name.</span></span> <span data-ttu-id="f3f8b-141">En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] consola de administración, haga clic en el **partes** nodo y desde el **entidades y perfiles empresariales** página, obtenga el nombre de la entidad o socio que va a recibir el procesamiento por lotes los intercambios.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-141">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, click the **Parties** node, and from the **Parties and Business Profiles** page, get the name of the party/partner that will be receiving the batched interchanges.</span></span> <span data-ttu-id="f3f8b-142">Escriba el nombre en el **ReceiverPartyNameType** nodo del mensaje de control.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-142">Enter the name in the **ReceiverPartyNameType** node of the control message.</span></span>  
  
   - <span data-ttu-id="f3f8b-143">Especifique el nombre de la entidad remitente.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-143">Specify the sender party name.</span></span> <span data-ttu-id="f3f8b-144">En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] consola de administración, haga clic en el **partes** nodo y desde el **entidades y perfiles empresariales** página, obtenga el nombre de la entidad o socio que va a enviar los intercambios por lotes .</span><span class="sxs-lookup"><span data-stu-id="f3f8b-144">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, click the **Parties** node, and from the **Parties and Business Profiles** page, get the name of the party/partner that will be sending the batched interchanges.</span></span> <span data-ttu-id="f3f8b-145">Escriba el nombre en el **SenderPartyName** nodo del mensaje de control.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-145">Enter the name in the **SenderPartyName** node of the control message.</span></span>  
  
   - <span data-ttu-id="f3f8b-146">Especifique el nombre del acuerdo.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-146">Specify the agreement name.</span></span> <span data-ttu-id="f3f8b-147">En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] consola de administración, haga clic en el **partes** nodo y desde el **entidades y perfiles empresariales** página, en el **acuerdos** sección, Haga clic en el acuerdo que tiene la configuración por lotes que necesita para invalidarse mediante el mensaje de control y, a continuación, haga clic en **propiedades**.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-147">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, click the **Parties** node, and from the **Parties and Business Profiles** page, in the **Agreements** section, right-click the agreement that has the batch configuration that needs be to overridden using the control message, and then click **Properties**.</span></span> <span data-ttu-id="f3f8b-148">En el **las propiedades del acuerdo** cuadro de diálogo el **General** ficha la **propiedades generales** página, copie el valor de la **nombre** campo en el **parámetros del acuerdo** sección y péguelo en el **AgreementName** nodo del mensaje de control.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-148">In the **Agreement Properties** dialog box, in the **General** tab, on the **General Properties** page, copy the value from the **Name** field in the **Agreement Parameters** section, and paste it in the **AgreementName** node of the control message.</span></span>  
  
   > [!NOTE]
   >  <span data-ttu-id="f3f8b-149">No es necesario que especifique un identificador de entidad de destino.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-149">You do not need to specify a destination party ID.</span></span> <span data-ttu-id="f3f8b-150">El elemento solo es necesario en el mensaje de control para la compatibilidad con versiones anteriores.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-150">The element is required in the control message only for backward compatibility.</span></span>  
  
3. <span data-ttu-id="f3f8b-151">Guarde el archivo.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-151">Save the file.</span></span>  
  
### <a name="to-enable-the-external-release-trigger"></a><span data-ttu-id="f3f8b-152">Para habilitar el desencadenador de versión externo</span><span class="sxs-lookup"><span data-stu-id="f3f8b-152">To enable the external release trigger</span></span>  
  
1. <span data-ttu-id="f3f8b-153">En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] consola de administración, haga clic en el **partes** nodo y desde el **entidades y perfiles empresariales** página, en el **acuerdos** sección, Haga clic en el acuerdo que tiene la configuración por lotes que necesita para invalidarse mediante el mensaje de control y, a continuación, haga clic en **propiedades**.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-153">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, click the **Parties** node, and from the **Parties and Business Profiles** page, in the **Agreements** section, right-click the agreement that has the batch configuration that needs be to overridden using the control message, and then click **Properties**.</span></span> <span data-ttu-id="f3f8b-154">En el **las propiedades del acuerdo** haga clic en el cuadro de diálogo, en la ficha de acuerdo unidireccional, **configuración por lotes**.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-154">In the **Agreement Properties** dialog box, on the one-way agreement tab, click **Batch Configuration**.</span></span>  
  
2. <span data-ttu-id="f3f8b-155">En el **configuración por lotes** página, haga clic en la pestaña del lote que se desea tener un desencadenador de versión externo y, a continuación, en el **versión** sección, seleccione **desencadenador de versión externo** .</span><span class="sxs-lookup"><span data-stu-id="f3f8b-155">In the **Batch Configuration** page, click the tab for the batch for which you want to have an external release trigger, and then under the **Release** section, select **External release trigger**.</span></span>  
  
3. <span data-ttu-id="f3f8b-156">Haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="f3f8b-156">Click **OK**.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f3f8b-157">Vea también</span><span class="sxs-lookup"><span data-stu-id="f3f8b-157">See Also</span></span>  
 <span data-ttu-id="f3f8b-158">[La configuración de lotes EDI](../core/configuring-edi-batches.md) </span><span class="sxs-lookup"><span data-stu-id="f3f8b-158">[Configuring EDI Batches](../core/configuring-edi-batches.md) </span></span>  
 [<span data-ttu-id="f3f8b-159">Cómo crear una ubicación de recepción</span><span class="sxs-lookup"><span data-stu-id="f3f8b-159">How to Create a Receive Location</span></span>](../core/how-to-create-a-receive-location.md)
---
title: ¿Qué es el seguimiento de mensajes? | Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- HAT, metadata
- HAT, messages
- messages, tracking
- data, HAT
- metadata, tracking
- tracking, metadata
- HAT, data security
- tracking, messages
- configuring [HAT tracking], messages
- data, security
ms.assetid: 51cec59d-b411-4d8f-b771-7b2cf0f38945
caps.latest.revision: 18
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 944261c6193020c158f707b7f8d39c55ce2d058f
ms.sourcegitcommit: ed9590dbcd97c12a1fe5ce2cdf8d826492cccdff
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/08/2018
ms.locfileid: "39640128"
---
# <a name="what-is-message-tracking"></a><span data-ttu-id="2f515-103">¿Qué es el seguimiento de mensajes?</span><span class="sxs-lookup"><span data-stu-id="2f515-103">What is Message Tracking?</span></span>
<span data-ttu-id="2f515-104">Un mensaje es una instancia electrónica de datos, que se intercambia normalmente entre dos aplicaciones o procesos empresariales que se estén ejecutando.</span><span class="sxs-lookup"><span data-stu-id="2f515-104">A message is an electronic instance of data, as typically exchanged between two running business processes or applications.</span></span> <span data-ttu-id="2f515-105">Una instancia de mensaje está compuesta por un cuerpo de mensaje, propiedades de mensaje y metadatos.</span><span class="sxs-lookup"><span data-stu-id="2f515-105">A message instance is made up of a message body, message properties, and metadata.</span></span>  
  
 <span data-ttu-id="2f515-106">La consola de administración de BizTalk Server puede utilizarse para habilitar el seguimiento de propiedades de mensaje y de cuerpos de mensaje.</span><span class="sxs-lookup"><span data-stu-id="2f515-106">You can use the BizTalk Server Administration Console to enable message body and message property tracking.</span></span> <span data-ttu-id="2f515-107">Aquí también es posible ver el cuerpo del mensaje del que se efectúa el seguimiento, incluida la información de esquema, el nombre seguro y todas las propiedades promocionadas para el mensaje generado.</span><span class="sxs-lookup"><span data-stu-id="2f515-107">There you can also view the tracked message body, including schema information, strong name, and all the promoted properties for the generated message.</span></span>  
  
## <a name="message-body"></a><span data-ttu-id="2f515-108">Cuerpo de mensaje</span><span class="sxs-lookup"><span data-stu-id="2f515-108">Message Body</span></span>  
 <span data-ttu-id="2f515-109">El seguimiento del cuerpo del mensaje proporciona un registro de mensajes enviados y recibidos.</span><span class="sxs-lookup"><span data-stu-id="2f515-109">Tracking the message body provides a record of messages sent and received.</span></span> <span data-ttu-id="2f515-110">Para guardar los mensajes después de que se haya completado el procesamiento de instancias de servicio, debe tener activado el seguimiento del cuerpo de los mensajes.</span><span class="sxs-lookup"><span data-stu-id="2f515-110">You must have message body tracking turned on in order to save messages after service instances processing is complete.</span></span> <span data-ttu-id="2f515-111">Después de haber establecido las opciones de seguimiento, puede tardar unos minutos en ver los mensajes.</span><span class="sxs-lookup"><span data-stu-id="2f515-111">After you have set the tracking options, it can take a few minutes before you can view the messages.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="2f515-112">El servicio Agente SQL Server debe ejecutarse en todas las bases de datos de cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="2f515-112">The SQL Server Agent service must be running on all MessageBox databases.</span></span> <span data-ttu-id="2f515-113">El TrackedMessages_Copy_\<Nombrecuadrodemensajes\> trabajo hace que los cuerpos de mensaje disponibles para consultas de seguimiento y WMI.</span><span class="sxs-lookup"><span data-stu-id="2f515-113">The TrackedMessages_Copy_\<MessageBoxName\> job makes message bodies available to tracking queries and WMI.</span></span> <span data-ttu-id="2f515-114">Para copiar eficazmente los cuerpos de mensaje, que permanecen en la base de datos de cuadro de mensajes y periódicamente se copian en la base de datos de seguimiento de BizTalk (BizTalkDTADb) mediante el TrackedMessages_Copy_\<Nombrecuadrodemensajes\> trabajo.</span><span class="sxs-lookup"><span data-stu-id="2f515-114">To efficiently copy the message bodies, they remain in the MessageBox database and are periodically copied to the BizTalk Tracking (BizTalkDTADb) database by the TrackedMessages_Copy_\<MessageBoxName\> job.</span></span> <span data-ttu-id="2f515-115">Asimismo, la ejecución del servicio Agente SQL Server constituye un requisito previo para que el proceso de archivo y purga funcione correctamente.</span><span class="sxs-lookup"><span data-stu-id="2f515-115">Having the SQL Server Agent service running is also a prerequisite for the archiving and purging process to work correctly.</span></span>  
  
 <span data-ttu-id="2f515-116">Puede utilizar mensajes de los que se ha realizado un seguimiento para proporcionar confirmación de recepción, habilitar la solución de problemas y permitir la extracción de datos de las transacciones históricas.</span><span class="sxs-lookup"><span data-stu-id="2f515-116">You can use tracked messages to provide confirmation of receipt, to enable troubleshooting, and to allow data mining of historical transactions.</span></span> <span data-ttu-id="2f515-117">Es posible realizar un seguimiento de los cuerpos de mensaje en las orquestaciones, canalizaciones y puertos de entrada y salida.</span><span class="sxs-lookup"><span data-stu-id="2f515-117">You can track the message bodies at the input and output of ports, pipelines, and orchestrations.</span></span> <span data-ttu-id="2f515-118">Puede recuperar estos mensajes mediante la consola de administración de BizTalk Server o mediante las interfaces de programación de aplicaciones (API) de Instrumental de administración de Windows (WMI) o del modelo de objetos (OM) de Operaciones (recomendado).</span><span class="sxs-lookup"><span data-stu-id="2f515-118">You can recover these messages using the BizTalk Server Administration Console, using the Operations object model (OM) (recommended) or through Windows Management Instrumentation (WMI) application programming interfaces (APIs).</span></span>  
  
 <span data-ttu-id="2f515-119">BizTalk Server no realiza el seguimiento de mensajes que no utilizan correctamente uno de los puntos de seguimiento.</span><span class="sxs-lookup"><span data-stu-id="2f515-119">BizTalk Server does not track messages that do not successfully make it through one of the tracking points.</span></span> <span data-ttu-id="2f515-120">En algunos casos, como cuando se suspende un mensaje porque no es válido, o si no hay ningún host espera el mensaje, puede colocarse en la cola de suspensión sin que se realiza el seguimiento.</span><span class="sxs-lookup"><span data-stu-id="2f515-120">In some cases—such as when a message is suspended because it is invalid, or if no host is expecting the message—it may be placed in the Suspended queue without being tracked.</span></span> <span data-ttu-id="2f515-121">Si termina este mensaje, no se realizará ningún registro.</span><span class="sxs-lookup"><span data-stu-id="2f515-121">If you terminate this message there will be no record of it.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="2f515-122">El seguimiento de cuerpos de mensaje no constituye un sustituto de la auditoría legalmente obligatoria y no es compatible con la imposibilidad del rechazo.</span><span class="sxs-lookup"><span data-stu-id="2f515-122">Message body tracking is not a substitute for legally binding auditing, and does not support nonrepudiation.</span></span>  
  
## <a name="message-properties"></a><span data-ttu-id="2f515-123">Propiedades del mensaje</span><span class="sxs-lookup"><span data-stu-id="2f515-123">Message Properties</span></span>  
 <span data-ttu-id="2f515-124">Las propiedades de mensaje incluyen propiedades promocionadas, información de enrutamiento y datos de socios comerciales.</span><span class="sxs-lookup"><span data-stu-id="2f515-124">Message properties include promoted properties, routing information, and trading partner data.</span></span> <span data-ttu-id="2f515-125">El seguimiento de las propiedades de mensaje le permite localizar un mensaje determinado entre los miles de los que puede haber realizado un seguimiento, si proporciona un registro de las propiedades promocionadas para cada mensaje en la lista Resultados.</span><span class="sxs-lookup"><span data-stu-id="2f515-125">Message property tracking enables you to locate a specific message from the thousands that you may have tracked, by providing a record of promoted properties for each message in the results list.</span></span> <span data-ttu-id="2f515-126">A continuación, puede realizar un seguimiento de un subconjunto del mensaje mediante una de estas propiedades.</span><span class="sxs-lookup"><span data-stu-id="2f515-126">You can then track a subset of the message itself, using one of these properties.</span></span>  
  
 <span data-ttu-id="2f515-127">Para realizar un seguimiento de propiedades de contexto, defina un esquema de propiedades para el espacio de nombres que se utiliza en el contexto para almacenar propiedades.</span><span class="sxs-lookup"><span data-stu-id="2f515-127">To track context properties, you define a property schema for the namespace used in the context to store the properties.</span></span> <span data-ttu-id="2f515-128">Desde allí, puede seleccionar las propiedades de contexto de las que desea realizar un seguimiento. BizTalk Server realiza el seguimiento de éstas del mismo modo que realiza el seguimiento de las propiedades de mensaje promocionadas.</span><span class="sxs-lookup"><span data-stu-id="2f515-128">From there, you can select the context properties you want to track. BizTalk Server tracks them in the same way it tracks promoted message properties.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="2f515-129">Asegúrese de asignar nombres diferentes a las propiedades del esquema.</span><span class="sxs-lookup"><span data-stu-id="2f515-129">Make sure you give different names to the properties in the schema.</span></span> <span data-ttu-id="2f515-130">Si crea nombres duplicados, se genera un mensaje de error.</span><span class="sxs-lookup"><span data-stu-id="2f515-130">An error message appears if you create duplicate names.</span></span>  
  
 <span data-ttu-id="2f515-131">Por ejemplo, podría utilizar el editor de esquemas para promocionar el campo de número de pedido desde un esquema de pedido.</span><span class="sxs-lookup"><span data-stu-id="2f515-131">For example, you could use the Schema Editor to promote the PO Number field from a Purchase Order schema.</span></span> <span data-ttu-id="2f515-132">A continuación, mediante Vista Búsqueda de mensajes, podría encontrar las instancias de mensaje que contengan un valor particular del campo del que se ha realizado un seguimiento, como número de pedido = 16995.</span><span class="sxs-lookup"><span data-stu-id="2f515-132">Then, using the Find Message View, you could find the message instances that contain a particular value for that tracked field, such as PO Number = 16995.</span></span>  
  
 <span data-ttu-id="2f515-133">El seguimiento de la propiedad de mensaje crea mucha menos carga que el seguimiento del cuerpo del mensaje, ya que el primero solo realiza el seguimiento de los campos seleccionados.</span><span class="sxs-lookup"><span data-stu-id="2f515-133">Message property tracking creates much less overhead than message body tracking, because message property tracking only tracks the selected fields.</span></span> <span data-ttu-id="2f515-134">Después de haber establecido las opciones de seguimiento para la propiedad del mensaje, puede tardar unos minutos en ver las propiedades.</span><span class="sxs-lookup"><span data-stu-id="2f515-134">After you set the tracking options for the message property, it can take a few minutes before you can view the properties.</span></span>  
  
## <a name="metadata"></a><span data-ttu-id="2f515-135">Metadatos</span><span class="sxs-lookup"><span data-stu-id="2f515-135">Metadata</span></span>  
 <span data-ttu-id="2f515-136">Los metadatos, como el identificador de instancia de mensaje, la orquestación o canalización que registra el mensaje, el punto en el que la orquestación o canalización registra el mensaje y otros detalles de seguimiento pertinentes.</span><span class="sxs-lookup"><span data-stu-id="2f515-136">Metadata, such as the message instance identifier, the orchestration or pipeline logging the message, the point at which the orchestration or pipeline logs the message, and other relevant tracking details.</span></span> <span data-ttu-id="2f515-137">Para que un mensaje de la base de datos de cuadro de mensajes se enrute a un proceso empresarial, debe contener las propiedades de contexto, como origen y tipo de mensaje.</span><span class="sxs-lookup"><span data-stu-id="2f515-137">For a message in the MessageBox database to route to a business process, it must contain context properties such as message type and origin.</span></span> <span data-ttu-id="2f515-138">Estas propiedades se convierten en metadatos.</span><span class="sxs-lookup"><span data-stu-id="2f515-138">These properties become metadata.</span></span> <span data-ttu-id="2f515-139">El seguimiento de mensajes y de instancias de servicio usa los criterios de suscripción para consultar estos metadatos.</span><span class="sxs-lookup"><span data-stu-id="2f515-139">Message and service instance tracking uses subscription criteria to query against this metadata.</span></span>  
  
 <span data-ttu-id="2f515-140">A través de la consola de administración de BizTalk Server, puede promocionar las propiedades de contexto seleccionando un esquema particular de sistema.</span><span class="sxs-lookup"><span data-stu-id="2f515-140">Through the BizTalk Server Administration Console, you can promote context properties by selecting the particular system schema.</span></span> <span data-ttu-id="2f515-141">Los esquemas de sistema se encuentran en el nodo Aplicaciones\BizTalk.System\Esquemas.</span><span class="sxs-lookup"><span data-stu-id="2f515-141">The system schemas are located in the Applications\BizTalk.System\Schemas node.</span></span> <span data-ttu-id="2f515-142">BizTalk Server realiza un seguimiento estas propiedades de contexto global, es decir, todos los mensajes hacer un seguimiento de la propiedad de contexto determinado.</span><span class="sxs-lookup"><span data-stu-id="2f515-142">BizTalk Server tracks these context properties globally—that is, all messages now track the particular context property.</span></span> <span data-ttu-id="2f515-143">Esto puede aumentar considerablemente el tamaño de la base de datos de seguimiento de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="2f515-143">This may significantly increase the size of the BizTalk Tracking database.</span></span>  
  
## <a name="sensitive-data"></a><span data-ttu-id="2f515-144">Datos confidenciales</span><span class="sxs-lookup"><span data-stu-id="2f515-144">Sensitive Data</span></span>  
 <span data-ttu-id="2f515-145">Puede proteger los datos siguientes si se asegura de que no aparezcan en la ventana de propiedades de esquemas correspondiente, con lo que no serán susceptibles de seguimiento.</span><span class="sxs-lookup"><span data-stu-id="2f515-145">You can secure the following data ensuring that it does not appear in corresponding schemas property window and therefore becomes unavailable for tracking.</span></span>  
  
-   <span data-ttu-id="2f515-146">Aplicar el **isSensitive** atributo para cualquier propiedad confidencial de un esquema de propiedad, por lo que ya no está visible en la propiedad de mensaje de seguimiento de las selecciones de configuración.</span><span class="sxs-lookup"><span data-stu-id="2f515-146">Apply the **isSensitive** attribute to any sensitive properties in a property schema, so that it is no longer visible in the Message Property tracking configuration selections.</span></span>  
  
-   <span data-ttu-id="2f515-147">Todos los transportes estándar tienen contraseñas confidenciales, por lo que no se puede realizar el seguimiento de estos transportes.</span><span class="sxs-lookup"><span data-stu-id="2f515-147">All out-of-box transports contain passwords marked as sensitive, so the transports cannot be tracked.</span></span>  
  
-   <span data-ttu-id="2f515-148">Asimismo, estas propiedades confidenciales ya no están en la base de datos de administración. Por tanto, si establece opciones de seguimiento directamente en la base de datos, no se podrá realizar un seguimiento de éstas.</span><span class="sxs-lookup"><span data-stu-id="2f515-148">In addition, these sensitive properties are no longer in the Management database, so if you are setting tracking options directly in the database, they are unavailable for tracking.</span></span>  
  
-   <span data-ttu-id="2f515-149">Si realiza el seguimiento de cuerpos de mensaje salientes a través de la red, el seguimiento de mensajes quita todas las propiedades de transporte del acceso directo del cuerpo de mensaje del que se ha realizado el seguimiento.</span><span class="sxs-lookup"><span data-stu-id="2f515-149">If you track outbound on-the-wire message bodies, message tracking removes all the transport properties from the shortcut of the tracked message body.</span></span> <span data-ttu-id="2f515-150">Por tanto, además de quitar propiedades de transporte saliente del acceso directo del cuerpo de mensaje del que se ha realizado un seguimiento, el seguimiento de mensajes también quita las propiedades de los transportes entrantes.</span><span class="sxs-lookup"><span data-stu-id="2f515-150">Therefore, in addition to removing outbound transport properties from the shortcut of the tracked message body, message tracking also removes properties from inbound transports.</span></span>  
  
    > [!IMPORTANT]
    >  <span data-ttu-id="2f515-151">Una propiedad promocionada puede contener datos confidenciales.</span><span class="sxs-lookup"><span data-stu-id="2f515-151">A promoted property can contain sensitive data.</span></span> <span data-ttu-id="2f515-152">Si las consultas de seguimiento de la página Concentrador de grupo realizan el seguimiento de una propiedad que incluya datos confidenciales, cualquier usuario con permiso para ejecutar las consultas de seguimiento podrá ver estos datos.</span><span class="sxs-lookup"><span data-stu-id="2f515-152">If tracking queries from the Group Hub page track a property which includes sensitive data, any user with permissions to run the tracking queries can view this data.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2f515-153">Vea también</span><span class="sxs-lookup"><span data-stu-id="2f515-153">See Also</span></span>  
 [<span data-ttu-id="2f515-154">Configurar el seguimiento mediante la consola de administración de BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="2f515-154">Configuring Tracking Using the BizTalk Server Administration Console</span></span>](http://msdn.microsoft.com/49b7f9d3-60b5-41bd-ba8b-029253926bef)

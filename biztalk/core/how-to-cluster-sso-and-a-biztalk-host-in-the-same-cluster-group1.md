---
title: Cómo agrupar SSO y un Host de BizTalk en el mismo Group1 clúster | Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 413cc8f4-f343-4c1c-8b79-3b15cb4c101d
caps.latest.revision: 44
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 554f6a6515b9b586387c85e040b051e528a9db8b
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/27/2018
ms.locfileid: "36966973"
---
# <a name="how-to-cluster-sso-and-a-biztalk-host-in-the-same-cluster-group"></a><span data-ttu-id="a5ba1-102">Cómo agrupar SSO y un host de BizTalk en el mismo grupo de clúster</span><span class="sxs-lookup"><span data-stu-id="a5ba1-102">How to Cluster SSO and a BizTalk Host in the Same Cluster Group</span></span>
<span data-ttu-id="a5ba1-103">Con [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], es posible agrupar uno o varios hosts de BizTalk y el servicio de inicio de sesión único empresarial (SSO) en el mismo clúster de Windows Server.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-103">With [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] you can cluster one or more BizTalk hosts and the Enterprise Single Sign-On (SSO) service on the same Windows Server cluster.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="a5ba1-104">La correcta puesta en práctica de esta estrategia exige la creación de alguna instancia de host de BizTalk y del servicio SSO como recursos de clúster en el mismo grupo de clústeres.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-104">Correct implementation of this strategy requires that you create any BizTalk host instances and the SSO service as cluster resources in the same cluster group.</span></span>  
  
 <span data-ttu-id="a5ba1-105">El uso de la organización por clústeres de Windows con uno o varios hosts de BizTalk y SSO se suele incluirse en una de las siguientes categorías:</span><span class="sxs-lookup"><span data-stu-id="a5ba1-105">The use of Windows Clustering with one or more BizTalk hosts and SSO typically falls into one of these categories:</span></span>  
  
1. <span data-ttu-id="a5ba1-106">Agrupación en clústeres del servidor secreto principal de SSO y de uno o varios hosts de BizTalk en el mismo grupo de clústeres.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-106">Clustering the SSO master secret server and one or more BizTalk hosts in the same cluster group.</span></span>  
  
    <span data-ttu-id="a5ba1-107">En este escenario, la dependencia entre los hosts de BizTalk en clúster y el servicio SSO agrupado se mantiene para que si el grupo de clúster se conmuta por error, todos los recursos se muevan con el grupo.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-107">In this scenario, the dependency between the clustered BizTalk hosts and the clustered SSO service is maintained so that if the cluster group is failed over, all resources move with the group.</span></span>  
  
    <span data-ttu-id="a5ba1-108">Si el servicio SSO está configurado como un recurso en clúster en un equipo de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], debe crear un servicio web de IIS en clúster en el mismo grupo de clústeres.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-108">If the SSO service is configured as a clustered resource on a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computer, you must create a clustered IIS web service in the same cluster group.</span></span> <span data-ttu-id="a5ba1-109">Esto debe hacerse para asegurarse de que todas las instancias de host aislado se ejecuten en el nodo de clúster en el que se ejecuta el servicio SSO.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-109">This must be done to ensure that all isolated host instances will run on the cluster node that the SSO service is running on.</span></span> <span data-ttu-id="a5ba1-110">Con esto se garantiza que los adaptadores que se ejecuten en una instancia de host aislado tendrán acceso al servicio SSO, puesto que las instancias de host aislado se ejecutan en IIS.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-110">This ensures that any adapters that run in an isolated host instance will have access to the SSO service since isolated host instances run in IIS.</span></span>  
  
   > [!NOTE]
   >  <span data-ttu-id="a5ba1-111">Si se está ejecutando una instancia de un host de BizTalk en el mismo nodo de clúster que se está ejecutando una instancia del servicio SSO en clúster, la instancia en clúster del servicio SSO no se conmutarán por error a menos que se ha detenido la instancia del host de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-111">If an unclustered instance of a BizTalk host is running on the same cluster node that a clustered instance of the SSO service is running, the clustered instance of the SSO service cannot be failed over unless the unclustered instance of the BizTalk host is stopped.</span></span> <span data-ttu-id="a5ba1-112">Una instancia del host de BizTalk mantiene una dependencia con la instancia agrupada del servicio SSO que se ejecuta en el nodo del clúster e impide que la instancia del servicio SSO en clúster de conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-112">An unclustered instance of the BizTalk host maintains a dependency upon the clustered instance of the SSO service running on the cluster node and prevents the clustered instance of the SSO service from failing over.</span></span> <span data-ttu-id="a5ba1-113">Por ello, se recomienda no crear una instancia que no está en clúster de un host de BizTalk para que se ejecute en el mismo nodo de clúster en el que se ejecuta una instancia en clúster del servicio SSO.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-113">For this reason, it is recommended that you do not create an unclustered instance of a BizTalk host to run on the same cluster node that is running a clustered instance of the SSO service.</span></span>  
  
2. <span data-ttu-id="a5ba1-114">Agrupación en clúster del servicio SSO (servidor secreto no principal) y uno o varios hosts de BizTalk en el mismo grupo de clústeres.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-114">Clustering the SSO service (non master secret server) and one or more BizTalk hosts in the same cluster group.</span></span> <span data-ttu-id="a5ba1-115">En este escenario, se requiere la disponibilidad de un servidor secreto principal remoto.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-115">This scenario requires that a remote master secret server be available.</span></span> <span data-ttu-id="a5ba1-116">En este escenario, la dependencia entre los hosts de BizTalk en clúster y el servicio SSO en clúster se mantiene para que, en el caso de que se efectúe una conmutación por error del grupo de clústeres, todos los recursos se muevan con el grupo.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-116">In this scenario, the dependency between the clustered BizTalk hosts and the clustered SSO service is maintained so if the cluster group is failed over, all resources move with the group.</span></span>  
  
    <span data-ttu-id="a5ba1-117">Si el servicio SSO está configurado como un recurso en clúster en un equipo de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], debe crear un servicio web de IIS en clúster en el mismo grupo de clústeres.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-117">If the SSO service is configured as a clustered resource on a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computer, you must create a clustered IIS web service in the same cluster group.</span></span> <span data-ttu-id="a5ba1-118">Esto debe hacerse para asegurarse de que todas las instancias de host aislado se ejecuten en el nodo de clúster en el que se ejecuta el servicio SSO.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-118">This must be done to ensure that all isolated host instances will run on the cluster node that the SSO service is running on.</span></span> <span data-ttu-id="a5ba1-119">Con esto se garantiza que los adaptadores que se ejecuten en una instancia de host aislado tendrán acceso al servicio SSO, puesto que las instancias de host aislado se ejecutan en IIS.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-119">This ensures that any adapters that run in an isolated host instance will have access to the SSO service since isolated host instances run in IIS.</span></span>  
  
   > [!NOTE]
   >  <span data-ttu-id="a5ba1-120">Si una instancia de host de BizTalk que no está en clúster se ejecuta en el mismo nodo de clúster en el que se ejecuta una instancia en clúster del servicio SSO, entonces no será posible efectuar la conmutación por error de la instancia en clúster del servicio SSO, a menos que se detenga la instancia que no está en clúster del host de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-120">If an unclustered instance of a BizTalk host is running on the same cluster node that a clustered instance of the SSO service is running then the clustered instance of the SSO service cannot be failed over unless the unclustered instance of the BizTalk host is stopped.</span></span> <span data-ttu-id="a5ba1-121">Una instancia que no está en clúster de host de BizTalk mantiene una dependencia con la instancia en clúster del servicio SSO que se ejecuta en el nodo de clúster e impide la conmutación por error de ésta.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-121">An un-clustered instance of the BizTalk host maintains a dependency upon the clustered instance of the SSO service running on the cluster node and prevents the clustered instance of the SSO service from failing over.</span></span> <span data-ttu-id="a5ba1-122">Por este motivo, se recomienda que no cree una instancia de un host de BizTalk para ejecutar en el mismo nodo de clúster que se está ejecutando una instancia del servicio SSO en clúster.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-122">For this reason, it is recommended that you not create a unclustered instance of a BizTalk host to run on the same cluster node that is running a clustered instance of the SSO service.</span></span>  
  
3. <span data-ttu-id="a5ba1-123">Agrupación en clúster de uno o varios hosts de BizTalk en un clúster de Windows Server sin agrupar en clúster el servicio SSO.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-123">Clustering one or more BizTalk hosts on a Windows Server cluster without clustering the SSO service.</span></span> <span data-ttu-id="a5ba1-124">En este escenario, uno o varios hosts de BizTalk están configurados como recursos de clúster, pero el servicio SSO no está configurado como un recurso en clúster.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-124">In this scenario, one or more BizTalk hosts are configured as cluster resources but the SSO service is not configured as a clustered resource.</span></span> <span data-ttu-id="a5ba1-125">Este diseño proporciona una alta disponibilidad de los hosts de BizTalk en clúster, aunque no ocurre lo mismo con el servicio SSO.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-125">This design provides high availability for the clustered BizTalk hosts but does not provide high availability for the SSO service.</span></span> <span data-ttu-id="a5ba1-126">En este escenario, si se produce un error en el servicio SSO de un nodo, también se producirá un error en los componentes de BizTalk Server que dependen de SSO.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-126">In this scenario, if the SSO service on a node fails then BizTalk Server components that depend on SSO on that node will also fail.</span></span> <span data-ttu-id="a5ba1-127">Para obtener más información acerca de cómo configurar un host de BizTalk Server como un recurso de clúster, consulte [cómo configurar un Host de BizTalk como un recurso de clúster](http://msdn.microsoft.com/library/6e9aab00-7623-4175-bb12-ba916306f1e3).</span><span class="sxs-lookup"><span data-stu-id="a5ba1-127">For more information about how to configure a BizTalk Server host as a cluster resource see [How to Configure a BizTalk Host as a Cluster Resource](http://msdn.microsoft.com/library/6e9aab00-7623-4175-bb12-ba916306f1e3).</span></span>  
  
   <span data-ttu-id="a5ba1-128">Los siguientes procedimientos describen los pasos que deben seguirse para agrupar en clúster un host de BizTalk y el servicio SSO en el mismo clúster de Windows Server.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-128">The following procedures describe the steps that you should follow to cluster a BizTalk host and the SSO service on the same Windows Server cluster.</span></span>  
  
### <a name="to-cluster-a-biztalk-host-and-the-sso-master-secret-server-on-the-same-windows-server-cluster"></a><span data-ttu-id="a5ba1-129">Para agrupar un host de BizTalk y el servidor secreto principal de SSO en el mismo clúster de Windows Server</span><span class="sxs-lookup"><span data-stu-id="a5ba1-129">To cluster a BizTalk host and the SSO master secret server on the same Windows Server cluster</span></span>  
  
1. <span data-ttu-id="a5ba1-130">Si el clúster no está configurado con un recurso Coordinador de transacciones distribuidas (MSDTC) agrupado, agrupe MSDTC en un clúster de conmutación por error de Windows Server siguiendo los pasos descritos en [lista de comprobación: creación de un MS DTC Resource en un equipo con Windows Server 2008 Clúster de conmutación por error](http://go.microsoft.com/fwlink/p/?LinkID=129677) (http://go.microsoft.com/fwlink/p/?LinkID=129677).</span><span class="sxs-lookup"><span data-stu-id="a5ba1-130">If the cluster is not configured with a clustered Distributed Transaction Coordinator (MSDTC) resource, cluster MSDTC on a Windows Server failover cluster by following the steps in [Checklist: Creating an MS DTC Resource in a Windows Server 2008 Failover Cluster](http://go.microsoft.com/fwlink/p/?LinkID=129677) (http://go.microsoft.com/fwlink/p/?LinkID=129677).</span></span>  
  
2. <span data-ttu-id="a5ba1-131">Instalar y configurar el servicio de inicio de sesión único en el clúster de Windows Server siguiendo los pasos descritos en [cómo agrupar el servidor secreto principal](http://msdn.microsoft.com/library/59895616-4178-46d0-b9ff-95589b809ff5).</span><span class="sxs-lookup"><span data-stu-id="a5ba1-131">Install and configure the SSO service on the Windows Server cluster by following the steps in [How to Cluster the Master Secret Server](http://msdn.microsoft.com/library/59895616-4178-46d0-b9ff-95589b809ff5).</span></span> <span data-ttu-id="a5ba1-132">Dado que BizTalk Server se ejecutará en el clúster de Windows Server, instale todos los componentes de BizTalk Server necesarios, aunque, en esta ocasión, tan solo se efectuará la configuración de los componentes de SSO.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-132">Since you will be running BizTalk Server on the Windows Server cluster, install all required BizTalk Server components even though you will only be configuring the SSO components at this time.</span></span>  
  
3. <span data-ttu-id="a5ba1-133">Agrupe en clúster IIS en el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] equipo siguiendo los pasos documentados en [970759 "configuración de IIS 7.0 en un Microsoft Windows Server 2008 failover cluster" del artículo de Microsoft Knowledge Base](http://go.microsoft.com/fwlink/p/?LinkId=152793) (<http://go.microsoft.com/fwlink/p/?LinkId=152793>).</span><span class="sxs-lookup"><span data-stu-id="a5ba1-133">Cluster IIS on the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computer by following the steps documented in [Microsoft Knowledge Base article 970759 "Configuring IIS 7.0 in a Microsoft Windows Server 2008 failover cluster"](http://go.microsoft.com/fwlink/p/?LinkId=152793) (<http://go.microsoft.com/fwlink/p/?LinkId=152793>).</span></span> <span data-ttu-id="a5ba1-134">Cree el servicio web de IIS en clúster en el mismo grupo de clústeres del servicio SSO en clúster.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-134">Create the clustered IIS Web service in the same cluster group as the clustered SSO service.</span></span>  
  
4. <span data-ttu-id="a5ba1-135">Mueva el grupo de clúster que contiene el servicio SSO en clúster a uno de los nodos del clúster e iniciar sesión en este nodo de clúster.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-135">Move the cluster group that contains the clustered SSO service to one of the cluster nodes, and log on to this cluster node.</span></span>  
  
5. <span data-ttu-id="a5ba1-136">Inicie el programa de configuración de BizTalk Server y complete la configuración de BizTalk Server en este nodo de clúster.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-136">Start the BizTalk Server Configuration program, and complete the configuration of BizTalk Server on this cluster node.</span></span> <span data-ttu-id="a5ba1-137">Puesto que es el primer equipo BizTalk Server en el grupo, haga clic en **crear un nuevo grupo de BizTalk** al configurar el grupo de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-137">Since this is the first BizTalk Server computer in the group, click **Create a new BizTalk Group** when configuring the BizTalk Group.</span></span>  
  
6. <span data-ttu-id="a5ba1-138">Cuando la configuración de BizTalk Server se haya completado correctamente, mueva el grupo de clústeres que contiene el servicio SSO en clúster a otro nodo de clúster e inicie sesión en éste.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-138">Once the BizTalk Server configuration has completed successfully, move the cluster group that contains the clustered SSO service to the other cluster node, and log on to this cluster node.</span></span>  
  
7. <span data-ttu-id="a5ba1-139">Inicie el programa de configuración de BizTalk Server y complete la configuración de BizTalk Server en este nodo de clúster.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-139">Start the BizTalk Server Configuration program, and complete the configuration of BizTalk Server on this cluster node.</span></span> <span data-ttu-id="a5ba1-140">Haga clic en **unirse a un grupo de BizTalk existente** al configurar el componente de grupo de BizTalk en este nodo del clúster, y especifique el grupo de BizTalk que creó en el primer nodo.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-140">Click **Join an existing BizTalk Group** when configuring the BizTalk Group component on this cluster node, and specify the BizTalk group that you created on the first node.</span></span>  
  
8. <span data-ttu-id="a5ba1-141">Una vez que la configuración de BizTalk Server se completó correctamente, cree uno o más hosts de BizTalk agrupados, siga los pasos descritos en [cómo configurar un Host de BizTalk como un recurso de clúster](http://msdn.microsoft.com/library/6e9aab00-7623-4175-bb12-ba916306f1e3).</span><span class="sxs-lookup"><span data-stu-id="a5ba1-141">Once the BizTalk Server configuration has completed successfully, create one or more clustered BizTalk hosts by following the steps in [How to Configure a BizTalk Host as a Cluster Resource](http://msdn.microsoft.com/library/6e9aab00-7623-4175-bb12-ba916306f1e3).</span></span>  
  
   > [!NOTE]
   >  <span data-ttu-id="a5ba1-142">En este escenario, todos los hosts de BizTalk deben crearse como recursos de clúster en el mismo grupo de clústeres que el del recurso del servicio SSO en clúster.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-142">In this scenario, all BizTalk hosts must be created as cluster resources in the same cluster group as the clustered SSO service resource.</span></span> <span data-ttu-id="a5ba1-143">Ejecuta una instancia de host de BizTalk no agrupada en un nodo de clúster de Windows Server donde está agrupado el servicio SSO no es una configuración admitida.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-143">Running a unclustered BizTalk host instance on a Windows Server Cluster node where the SSO service is clustered is not a supported configuration.</span></span> <span data-ttu-id="a5ba1-144">Esto se debe a que la instancia de host de BizTalk que no está en clúster no se llevará a cabo correctamente si el servicio SSO en clúster se ha conmutado por error a otro nodo debido a la dependencia de una instancia de host de BizTalk del servicio SSO.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-144">This is because the unclustered BizTalk host instance will fail when the clustered SSO service is failed over to another node due to the dependency of a BizTalk host instance on the SSO service.</span></span>  
  
### <a name="to-cluster-a-biztalk-host-and-sso-non-master-secret-server-on-the-same-windows-server-cluster-when-the-sso-master-secret-server-is-remote"></a><span data-ttu-id="a5ba1-145">Para agrupar un host de BizTalk y SSO (servidor secreto no principal) en el mismo clúster de Windows Server cuando el servidor secreto principal de SSO es remoto</span><span class="sxs-lookup"><span data-stu-id="a5ba1-145">To cluster a BizTalk host and SSO (non master secret server) on the same Windows Server cluster when the SSO master secret server is remote</span></span>  
  
1. <span data-ttu-id="a5ba1-146">Si el clúster no está configurado con un recurso Coordinador de transacciones distribuidas (MSDTC) agrupado, agrupe MSDTC en un clúster de conmutación por error de Windows Server siguiendo los pasos descritos en [lista de comprobación: creación de un MS DTC Resource en un equipo con Windows Server 2008 Clúster de conmutación por error](http://go.microsoft.com/fwlink/p/?LinkID=129677) (http://go.microsoft.com/fwlink/p/?LinkID=129677).</span><span class="sxs-lookup"><span data-stu-id="a5ba1-146">If the cluster is not configured with a clustered Distributed Transaction Coordinator (MSDTC) resource, cluster MSDTC on a Windows Server failover cluster by following the steps in [Checklist: Creating an MS DTC Resource in a Windows Server 2008 Failover Cluster](http://go.microsoft.com/fwlink/p/?LinkID=129677) (http://go.microsoft.com/fwlink/p/?LinkID=129677).</span></span>  
  
2. <span data-ttu-id="a5ba1-147">Crear grupos de dominio con los nombres **administradores de SSO** y **administradores afiliados de SSO**.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-147">Create domain groups with the names **SSO Administrators** and **SSO Affiliate Administrators**.</span></span> <span data-ttu-id="a5ba1-148">Para crear una instancia en clúster del servicio SSO, debe crear el **administradores de SSO** y **administradores afiliados de SSO** grupos como grupos de dominio.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-148">To create a clustered instance of the SSO service, you must create the **SSO Administrators** and **SSO Affiliate Administrators** groups as domain groups.</span></span>  
  
3. <span data-ttu-id="a5ba1-149">Cree o designe una cuenta de dominio que sea miembro de la **administradores de SSO** grupo de dominio.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-149">Create or designate a domain account that is a member of the **SSO Administrators** domain group.</span></span> <span data-ttu-id="a5ba1-150">El servicio SSO de cada nodo se configurará para iniciar la sesión como esta cuenta de dominio.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-150">The SSO service on each node will be configured to log on as this domain account.</span></span> <span data-ttu-id="a5ba1-151">Esta cuenta debe tener la **iniciar sesión como un servicio** en cada nodo del clúster.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-151">This account must have the **Log on as a service** right on each node in the cluster.</span></span>  
  
4. <span data-ttu-id="a5ba1-152">Agregue la cuenta que usas para iniciar sesión durante el proceso de instalación y configuración para el dominio **administradores de SSO** grupo.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-152">Add the account that you are using to log on during the installation and configuration process to the domain **SSO Administrators** group.</span></span>  
  
   > [!IMPORTANT]
   >  <span data-ttu-id="a5ba1-153">Si no se completan los pasos 3 y 4, la configuración del servicio SSO no se llevará a cabo correctamente.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-153">Configuration of the SSO service will fail if steps 3 and 4 are not completed.</span></span>  
  
5. <span data-ttu-id="a5ba1-154">Inicie sesión en uno de los nodos de clúster e instale [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a5ba1-154">Log on to one of the cluster nodes and install [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="a5ba1-155">Seleccione la opción para iniciar el programa de configuración cuando haya finalizado correctamente la instalación.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-155">Select the option to start the configuration program when installation has completed successfully.</span></span>  
  
6. <span data-ttu-id="a5ba1-156">Elija la **configuración personalizada** opción y escriba los valores adecuados para el **el nombre del servidor de base de datos**, **nombre de usuario** y **contraseña**campos.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-156">Choose the **Custom Configuration** option and enter the appropriate values for the **Database server name**, **User name** and **Password** fields.</span></span> <span data-ttu-id="a5ba1-157">Tras especificar estos valores, haga clic en el **configurar** botón para continuar.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-157">After entering these values click the **Configure** button to continue.</span></span>  
  
7. <span data-ttu-id="a5ba1-158">Establezca las opciones siguientes para la característica SSO:</span><span class="sxs-lookup"><span data-stu-id="a5ba1-158">Set the following options for the SSO feature:</span></span>  
  
   1.  <span data-ttu-id="a5ba1-159">Seleccione la comprobación de la casilla junto a **habilitar Enterprise Single Sign-On en este equipo**.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-159">Select the check the box next to **Enable Enterprise Single Sign-On on this computer**.</span></span>  
  
   2.  <span data-ttu-id="a5ba1-160">Haga clic en la opción de **unir un sistema SSO existente**.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-160">Click the option to **Join an existing SSO system**.</span></span>  
  
   3.  <span data-ttu-id="a5ba1-161">Especifique valores para el nombre de la base de datos y del servidor de la base de datos de SSO existentes.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-161">Enter values for the existing SSO Database Server Name and Database Name.</span></span>  
  
   4.  <span data-ttu-id="a5ba1-162">Indique la cuenta de servicio SSO existente al especificar la cuenta que se va a usar para el servicio de inicio de sesión único empresarial.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-162">Enter the existing SSO service account when specifying the account to use for the Enterprise Single Sign-On service.</span></span>  
  
8. <span data-ttu-id="a5ba1-163">Puesto que es el primer servidor BizTalk Server en el grupo, elija la opción **crear un nuevo grupo de BizTalk** al configurar el componente de grupo de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-163">Since this is the first BizTalk Server in the group choose the option to **Create a new BizTalk Group** when configuring the BizTalk Group component.</span></span>  
  
9. <span data-ttu-id="a5ba1-164">Especifique el resto de las opciones de configuración según corresponda y aplique la configuración de BizTalk Server a este nodo.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-164">Specify the remaining configuration options as needed and apply the BizTalk Server configuration to this node.</span></span>  
  
10. <span data-ttu-id="a5ba1-165">Una vez que la configuración de BizTalk Server haya finalizado correctamente en el primer nodo, inicie sesión en el segundo nodo e instale [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a5ba1-165">Once the BizTalk Server configuration has completed successfully on the first node, log on to the second node and install [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="a5ba1-166">Seleccione la opción para iniciar el programa de configuración cuando haya finalizado correctamente la instalación.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-166">Select the option to start the configuration program when installation has completed successfully.</span></span>  
  
11. <span data-ttu-id="a5ba1-167">Elija la **configuración personalizada** opción y, a continuación, escriba los valores adecuados para el **el nombre del servidor de base de datos**, **nombre de usuario** y **contraseña** campos.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-167">Choose the **Custom Configuration** option, and then enter the appropriate values for the **Database server name**, **User name** and **Password** fields.</span></span> <span data-ttu-id="a5ba1-168">Tras especificar estos valores, haga clic en el **configurar** botón para continuar.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-168">After entering these values, click the **Configure** button to continue.</span></span>  
  
12. <span data-ttu-id="a5ba1-169">Establezca las opciones siguientes para la característica SSO:</span><span class="sxs-lookup"><span data-stu-id="a5ba1-169">Set the following options for the SSO feature:</span></span>  
  
    1.  <span data-ttu-id="a5ba1-170">Seleccione la comprobación de la casilla junto a **habilitar Enterprise Single Sign-On en este equipo**.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-170">Select the check the box next to **Enable Enterprise Single Sign-On on this computer**.</span></span>  
  
    2.  <span data-ttu-id="a5ba1-171">Haga clic en **unir un sistema SSO existente**.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-171">Click **Join an existing SSO system**.</span></span>  
  
    3.  <span data-ttu-id="a5ba1-172">Especifique valores para el nombre de la base de datos y del servidor de la base de datos de SSO existentes.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-172">Enter values for the existing SSO Database Server Name and Database Name.</span></span>  
  
    4.  <span data-ttu-id="a5ba1-173">Indique la cuenta de servicio SSO existente al especificar la cuenta que se va a usar para el servicio de inicio de sesión único empresarial.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-173">Enter the existing SSO service account when specifying the account to use for the Enterprise Single Sign-On service.</span></span>  
  
13. <span data-ttu-id="a5ba1-174">Elija la opción de **unirse a un grupo de BizTalk existente** al configurar el componente de grupo de BizTalk en este nodo del clúster, y especifique el grupo de BizTalk que creó en el primer nodo.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-174">Choose the option to **Join an existing BizTalk Group** when configuring the BizTalk Group component on this cluster node, and specify the BizTalk group that you created on the first node.</span></span>  
  
14. <span data-ttu-id="a5ba1-175">Especifique el resto de las opciones de configuración según corresponda y aplique la configuración de BizTalk Server a este nodo.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-175">Specify the remaining configuration options as needed and apply the BizTalk Server configuration to this node.</span></span>  
  
15. <span data-ttu-id="a5ba1-176">Una vez completada la configuración de BizTalk Server correctamente, siga los pasos que se detallan a continuación para agrupar en clúster el servicio SSO:</span><span class="sxs-lookup"><span data-stu-id="a5ba1-176">After the BizTalk Server configuration has completed successfully, follow these steps to cluster the SSO service:</span></span>  
  
    1.  <span data-ttu-id="a5ba1-177">Detenga el servicio SSO en cada uno de los nodos del clúster. Para ello, escriba el siguiente comando en un símbolo del sistema:</span><span class="sxs-lookup"><span data-stu-id="a5ba1-177">Stop the SSO service on each of the cluster nodes by typing the following command from a command:</span></span>  
  
        ```  
        net stop entsso  
        ```  
  
    2.  <span data-ttu-id="a5ba1-178">En la administración de clúster de conmutación por error, mueva todos los grupos de clústeres a un nodo e inicie sesión en este último.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-178">In Failover Cluster Management, move all cluster groups to one node and log on to this node.</span></span>  
  
    3.  <span data-ttu-id="a5ba1-179">En el panel izquierdo, haga clic para seleccionar un servicio o aplicación en clúster que contenga un recurso de dirección IP y nombre de red.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-179">In the left hand pane click to select a clustered service or application that contains an IP Address and Network Name resource.</span></span> <span data-ttu-id="a5ba1-180">Este servicio o aplicación en clúster contendrá el servicio SSO en clúster y el host de BizTalk en clúster.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-180">This clustered service or application will contain the clustered SSO service and the clustered BizTalk host.</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="a5ba1-181">Un servicio SSO en clúster no necesita de forma explícita el uso de un recurso de disco físico en clúster en el mismo grupo.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-181">A clustered SSO service does not explicitly require the use of a clustered Physical Disk resource in the same group.</span></span>  
  
    4.  <span data-ttu-id="a5ba1-182">Haga clic en el servicio en clúster o la aplicación, elija **agregar un recurso**y haga clic en **servicio genérico** para mostrar el **Asistente para nuevo recurso** cuadro de diálogo.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-182">Right-click the clustered service or application, point to **Add a resource**, and click **Generic Service** to display the **New Resource Wizard** dialog box.</span></span>  
  
    5.  <span data-ttu-id="a5ba1-183">En el **Seleccionar servicio** página de la **Asistente para nuevo recurso**, seleccione **Enterprise Single Sign-On Service**y, a continuación, haga clic en **siguiente**.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-183">On the **Select Service** page of the **New Resource Wizard**, select **Enterprise Single Sign-On Service**, and then click **Next**.</span></span>  
  
    6.  <span data-ttu-id="a5ba1-184">En el **confirmación** página haga clic en **siguiente**.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-184">On the **Confirmation** page click **Next**.</span></span>  
  
    7.  <span data-ttu-id="a5ba1-185">En el **resumen** página haga clic en **finalizar**.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-185">On the **Summary** page click **Finish**.</span></span> <span data-ttu-id="a5ba1-186">Aparecerá una instancia agrupada del servicio de inicio de sesión único de Enterprise en **otros recursos** en el panel central de la **administración del clúster de conmutación por error** interfaz.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-186">A clustered instance of the Enterprise Single Sign-On Service will appear under **Other Resources** in the center pane of the **Failover Cluster Management** interface.</span></span>  
  
    8.  <span data-ttu-id="a5ba1-187">Haga clic en la instancia en clúster de que el servicio de inicio de sesión único de Enterprise y seleccione **propiedades** para mostrar el **Enterprise Single Sign-On propiedades del servicio** cuadro de diálogo.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-187">Right-click the clustered instance of the Enterprise Single Sign-On Service and select **Properties** to display the **Enterprise Single Sign-On Service Properties** dialog box.</span></span>  
  
    9. <span data-ttu-id="a5ba1-188">Haga clic en el **dependencias** ficha del cuadro de diálogo de propiedades y haga clic en **insertar**.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-188">Click the **Dependencies** tab of the properties dialog box and click **Insert**.</span></span>  
  
    10. <span data-ttu-id="a5ba1-189">Haga clic en el cuadro de lista desplegable bajo **recursos**, seleccione el **nombre:** recursos y haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-189">Click the drop down box under **Resource**, select the **Name:** resource and click **OK**.</span></span>  
  
        > [!IMPORTANT]
        >  <span data-ttu-id="a5ba1-190">Si no se agrega la dependencia a la **nombre:** recursos, los equipos cliente SSO generarán un error similar al siguiente al intentar ponerse en contacto con esta instancia en clúster del servicio SSO:</span><span class="sxs-lookup"><span data-stu-id="a5ba1-190">If you do not add the dependency to the **Name:** resource, SSO client computers will generate an error similar to the following when they try to contact this clustered instance of the SSO service:</span></span>  
        >   
        >  <span data-ttu-id="a5ba1-191">No se pudieron recuperar los secretos principales.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-191">Failed to retrieve master secrets.</span></span>  
        >   
        >  <span data-ttu-id="a5ba1-192">Compruebe que el nombre del servidor secreto principal es correcto y está disponible.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-192">Verify that the master secret server name is correct and that it is available.</span></span> <span data-ttu-id="a5ba1-193">Nombre del servidor secreto: ENTSSO Código de error: 0x800706D9. No hay más extremos disponibles desde el asignador de extremos.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-193">Secret Server Name: ENTSSO Error Code: 0x800706D9, there are no more endpoints available from the endpoint mapper.</span></span>  
  
16. <span data-ttu-id="a5ba1-194">Agrupe en clúster IIS en el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] equipo siguiendo los pasos documentados en [970759 "configuración de IIS 7.0 en un Microsoft Windows Server 2008 failover cluster" del artículo de Microsoft Knowledge Base](http://go.microsoft.com/fwlink/p/?LinkId=152793) (<http://go.microsoft.com/fwlink/p/?LinkId=152793>).</span><span class="sxs-lookup"><span data-stu-id="a5ba1-194">Cluster IIS on the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computer by following the steps documented in [Microsoft Knowledge Base article 970759 "Configuring IIS 7.0 in a Microsoft Windows Server 2008 failover cluster"](http://go.microsoft.com/fwlink/p/?LinkId=152793) (<http://go.microsoft.com/fwlink/p/?LinkId=152793>).</span></span> <span data-ttu-id="a5ba1-195">Cree el servicio web IIS en clúster en el mismo grupo de clúster que el servicio SSO en clúster.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-195">Create the clustered IIS web service in the same cluster group as the clustered SSO service.</span></span>  
  
17. <span data-ttu-id="a5ba1-196">En administración de clúster de conmutación por error, a la derecha, haga clic en el servicio en clúster o la aplicación que contiene el servicio de inicio de sesión único empresarial en clúster y, a continuación, haga clic en **conectar este servicio o aplicación** para iniciar todos los recursos en el servicio en clúster o la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-196">In Failover Cluster Management, right click the clustered service or application that contains the clustered Enterprise Single Sign-On service and then click **Bring this service or application online** to start all of the resources in the clustered service or application.</span></span>  
  
18. <span data-ttu-id="a5ba1-197">Haga clic en el servicio en clúster o la aplicación, elija **mover este servicio o aplicación a otro nodo**y haga clic en el segundo nodo.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-197">Right-click the clustered service or application, point to **Move this service or application to another node**, and click the second node.</span></span> <span data-ttu-id="a5ba1-198">Este paso mueve el servicio o la aplicación en clúster que contiene el servicio Inicio de sesión único empresarial en clúster del primer nodo al segundo.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-198">This step moves the clustered service or application that contains the clustered Enterprise Single Sign-On service from the first node to the second node.</span></span>  
  
19. <span data-ttu-id="a5ba1-199">Haga clic en el servicio Enterprise Single Sign-On en clúster y haga clic en **desconectar este servicio o aplicación**, a continuación, haga clic en la instancia del servicio SSO en clúster y haga clic en **poner este servicio o aplicación en línea**.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-199">Right-click the clustered Enterprise Single Sign-On service and click **Take this service or application offline**, then right-click the clustered instance of the SSO service and click **Bring this service or application online**.</span></span>  
  
20. <span data-ttu-id="a5ba1-200">Con la utilidad de línea de comandos ssomanage, establezca el servicio SSO en clúster como el nombre del servidor de SSO para todos los usuarios.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-200">Set the SSO server name for all users to the clustered SSO service with the ssomanage command line utility.</span></span> <span data-ttu-id="a5ba1-201">Este comando debería ejecutarse desde la carpeta de instalación de SSO en cada uno de los servidores BizTalk Server del grupo.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-201">This command should be run from the SSO installation folder on each BizTalk server in the group.</span></span> <span data-ttu-id="a5ba1-202">Por ejemplo, la siguiente línea de comandos establecerá el nombre del servicio SSO en clúster como el nombre del servidor SSO para todos los usuarios.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-202">For example, the following command line will set the SSO server name for all users to the clustered SSO service:</span></span>  
  
    ```  
    ssomanage -serverall SSOCLUSTER  
    ```  
  
    > [!NOTE]
    >  <span data-ttu-id="a5ba1-203">*SSOCLUSTER* es un marcador de posición para el recurso de nombre de red real creado en el grupo de clúster que contiene el servicio SSO en clúster.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-203">*SSOCLUSTER* is a placeholder for the actual network name resource that is created in the cluster group that contains the clustered SSO service.</span></span>  
  
21. <span data-ttu-id="a5ba1-204">Actualice el nombre de servidor de SSO accesible en el **propiedades del grupo de BizTalk** página para hacer referencia al servicio SSO en clúster.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-204">Update the SSO Server name accessible in the **BizTalk Group Properties** page to reference the clustered SSO service.</span></span> <span data-ttu-id="a5ba1-205">Abra **administración de BizTalk Server**, haga clic en el grupo de BizTalk, seleccione el **propiedades** elemento de menú, actualice la entrada de nombre de servidor de SSO y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-205">Open **BizTalk Server Administration**, right-click the BizTalk Group, select the **Properties** menu item, update the entry for SSO Server name, and then click **OK**.</span></span>  
  
22. <span data-ttu-id="a5ba1-206">Siga los pasos de [cómo configurar un Host de BizTalk como un recurso de clúster](http://msdn.microsoft.com/library/6e9aab00-7623-4175-bb12-ba916306f1e3) para crear una o varias instancias de host de BizTalk en clúster en el mismo grupo de clúster que ha creado el servicio SSO en clúster.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-206">Follow the steps in [How to Configure a BizTalk Host as a Cluster Resource](http://msdn.microsoft.com/library/6e9aab00-7623-4175-bb12-ba916306f1e3) to create one or more clustered BizTalk host instances in the same cluster group that you have created the clustered SSO service.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="a5ba1-207">En este escenario, todos los hosts de BizTalk deben crearse como recursos de clúster en el mismo grupo de clústeres que el del recurso del servicio SSO en clúster.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-207">In this scenario, all BizTalk hosts must be created as cluster resources in the same cluster group as the clustered SSO service resource.</span></span> <span data-ttu-id="a5ba1-208">La ejecución de una instancia de host de BizTalk que no está en clúster en un nodo de clúster de Windows Server en el que está agrupado en clúster el servicio SSO no es una configuración admitida.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-208">Running an unclustered BizTalk host instance on a Windows Server Cluster node where the SSO service is clustered is not a supported configuration.</span></span> <span data-ttu-id="a5ba1-209">Esto se debe a que la instancia de host de BizTalk que no está en clúster no se llevará a cabo correctamente si el servicio SSO en clúster se ha conmutado por error a otro nodo debido a la dependencia de una instancia de host de BizTalk del servicio SSO.</span><span class="sxs-lookup"><span data-stu-id="a5ba1-209">This is because the unclustered BizTalk host instance will fail when the clustered SSO service is failed over to another node due to the dependency of a BizTalk host instance on the SSO service.</span></span>
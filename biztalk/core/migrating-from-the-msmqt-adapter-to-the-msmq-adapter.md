---
title: Migrar desde el adaptador de MSMQT al adaptador de MSMQ | Documentos de Microsoft
ms.custom: 
ms.date: 2015-12-07
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- performance, MSMQT adapters
- scaling, MSMQT adapters
- reliability, MSMQT adapters
- MSMQT adapters, transactional consistency
- migrating, MSMQT adapters
- MSMQT adapters, ordered delivery
- MSMQT adapters, migrating to MSMQ adapters
- MSMQT adapters, scaling
- MSMQT adapters, reliability
- MSMQ adapters, migrating MSMQT adapters
- high availability, MSMQT adapters
- MSMQT adapters, performance
- MSMQT adapters, availability
ms.assetid: 97126f70-0be5-4a2f-bcba-173fd932b6de
caps.latest.revision: "30"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 2b1fce448788a8c6c5721403dbb7e4e58609a31a
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
---
# <a name="migrating-from-the-msmqt-adapter-to-the-msmq-adapter"></a><span data-ttu-id="b9e46-102">Migrar del adaptador de MSMQT al adaptador de MSMQ</span><span class="sxs-lookup"><span data-stu-id="b9e46-102">Migrating from the MSMQT Adapter to the MSMQ Adapter</span></span>
<span data-ttu-id="b9e46-103">Este tema comenta los aspectos que se deben considerar respecto a la entrega ordenada de un extremo a otro, la coherencia transaccional, una alta disponibilidad y escalabilidad antes de migrar soluciones del adaptador de BizTalk para Message Queue (MSMQT) al adaptador de Message Queue Server (MSMQ).</span><span class="sxs-lookup"><span data-stu-id="b9e46-103">This topic discusses points to consider regarding end-to-end ordered delivery, transactional consistency, high availability, and scalability before migrating solutions from the BizTalk Message Queuing (MSMQT) adapter to the Message Queuing (MSMQ) adapter.</span></span> <span data-ttu-id="b9e46-104">En este tema, los conceptos de entrega ordenada, coherencia transaccional, alta disponibilidad y escalabilidad son los siguientes:</span><span class="sxs-lookup"><span data-stu-id="b9e46-104">For purposes of this topic ordered delivery, transactional consistency, high availability, and scalability are defined as follows:</span></span>  
  
-   <span data-ttu-id="b9e46-105">**Entrega ordenada.**</span><span class="sxs-lookup"><span data-stu-id="b9e46-105">**Ordered delivery.**</span></span> <span data-ttu-id="b9e46-106">Garantizar que los mensajes se envían desde BizTalk Server en el mismo orden en el que se recibieron.</span><span class="sxs-lookup"><span data-stu-id="b9e46-106">Guarantee that messages are sent out of BizTalk Server in the same order that they are received.</span></span>  
  
-   <span data-ttu-id="b9e46-107">**Coherencia transaccional.**</span><span class="sxs-lookup"><span data-stu-id="b9e46-107">**Transactional consistency.**</span></span> <span data-ttu-id="b9e46-108">Garantizar que no se pierden ni se duplican los mensajes que se procesan debido a errores de hardware, de software o de red.</span><span class="sxs-lookup"><span data-stu-id="b9e46-108">Guarantee that messages being processed are not lost or duplicated due to hardware, software, or network failure.</span></span>  
  
-   <span data-ttu-id="b9e46-109">**Alta disponibilidad.**</span><span class="sxs-lookup"><span data-stu-id="b9e46-109">**High availability.**</span></span> <span data-ttu-id="b9e46-110">Garantizar que los servicios usados para procesar mensajes están siempre disponibles para el procesamiento.</span><span class="sxs-lookup"><span data-stu-id="b9e46-110">Guarantee that services used to process messages are always available for processing.</span></span>  
  
-   <span data-ttu-id="b9e46-111">**Escalabilidad.**</span><span class="sxs-lookup"><span data-stu-id="b9e46-111">**Scalability.**</span></span> <span data-ttu-id="b9e46-112">Capacidad de aumentar el volumen de procesamiento de mensajes existente.</span><span class="sxs-lookup"><span data-stu-id="b9e46-112">Ability to increase existing message-processing capacity.</span></span>  
  
## <a name="end-to-end-ordered-delivery"></a><span data-ttu-id="b9e46-113">Entrega ordenada de extremo a extremo</span><span class="sxs-lookup"><span data-stu-id="b9e46-113">End-to-End Ordered Delivery</span></span>  
 <span data-ttu-id="b9e46-114">El adaptador de MSMQT garantiza la entrega ordenada de los mensajes de un extremo a otro.</span><span class="sxs-lookup"><span data-stu-id="b9e46-114">The MSMQT adapter ensures end-to-end ordered delivery of messages.</span></span> <span data-ttu-id="b9e46-115">Esto significa que si una aplicación MSMQ envía los mensajes 1, 2 y 3 a una ubicación de recepción enlazada al adaptador de MSMQT, estos mensajes se entregan a una orquestación o un puerto de envío de BizTalk Server en el mismo orden: 1, 2, 3.</span><span class="sxs-lookup"><span data-stu-id="b9e46-115">This means that if an MSMQ application sends messages 1, 2, and 3 to a receive location bound to the MSMQT adapter, then these messages are delivered to an orchestration or send port in BizTalk Server in the same order: 1, 2, 3.</span></span> <span data-ttu-id="b9e46-116">Un uso de esta funcionalidad serían las operaciones de bolsa que se deben enviar y ejecutar en el mismo orden en el que se reciben.</span><span class="sxs-lookup"><span data-stu-id="b9e46-116">One use of this functionality might include stock market trades that must be submitted and executed in the same order that they are received.</span></span>  
  
 <span data-ttu-id="b9e46-117">La entrega ordenada de un extremo a otro con MSMQT requiere el trabajo conjunto de muchos componentes.</span><span class="sxs-lookup"><span data-stu-id="b9e46-117">End-to-end in-order delivery with MSMQT requires many components to be working together.</span></span> <span data-ttu-id="b9e46-118">La siguiente secuencia de sucesos muestra cómo se lleva esto a cabo con el adaptador de MSMQT:</span><span class="sxs-lookup"><span data-stu-id="b9e46-118">The following sequence of events illustrates how this is done with the MSMQT adapter:</span></span>  
  
1.  <span data-ttu-id="b9e46-119">La API MSMQ de un equipo remoto recibe los mensajes 1, 2 y 3 en orden y los envía a una cola transaccional local en el mismo orden: 1, 2, 3.</span><span class="sxs-lookup"><span data-stu-id="b9e46-119">The MSMQ API on a remote computer receives messages 1, 2, and 3 in order and pushes them into a transactional, local queue in the same order: 1, 2, 3.</span></span>  
  
2.  <span data-ttu-id="b9e46-120">Un cliente MSMQ del equipo remoto toma los mensajes de la cola y los envía a la cola MSMQT en este orden: 1, 2, 3.</span><span class="sxs-lookup"><span data-stu-id="b9e46-120">An MSMQ client on the remote computer takes the messages from the queue and sends them to the MSMQT queue in order: 1, 2, 3.</span></span>  
  
3.  <span data-ttu-id="b9e46-121">El adaptador de MSMQT recibe los mensajes en el orden 1, 2, 3 y los entrega al componente Agente de mensajes de BizTalk en el mismo orden: 1, 2, 3.</span><span class="sxs-lookup"><span data-stu-id="b9e46-121">The MSMQT adapter receives the messages in order 1, 2, 3 and hands them to the BizTalk MessageAgent component in the same order: 1, 2, 3.</span></span>  
  
4.  <span data-ttu-id="b9e46-122">El componente Agente de mensajes de BizTalk garantiza que los mensajes se envíen al cuadro de mensaje en este orden: 1, 2, 3.</span><span class="sxs-lookup"><span data-stu-id="b9e46-122">The BizTalk MessageAgent component ensures that the messages are sent to the MessageBox in order: 1, 2, 3.</span></span>  
  
5.  <span data-ttu-id="b9e46-123">El cuadro de mensaje enruta los mensajes y garantiza que, si se enrutan a la misma instancia de una orquestación o un puerto de envío, se entreguen a esta instancia en el mismo orden: 1, 2, 3.</span><span class="sxs-lookup"><span data-stu-id="b9e46-123">The MessageBox routes the messages and ensures that if they are routed to the same instance of an orchestration or a send port, that they are delivered to this instance in the same order: 1, 2, 3.</span></span>  
  
 <span data-ttu-id="b9e46-124">En [!INCLUDE[btsBizTalkServer2004](../includes/btsbiztalkserver2004-md.md)], MSMQT es el único adaptador capaz de garantizar la entrega ordenada de un extremo a otro.</span><span class="sxs-lookup"><span data-stu-id="b9e46-124">In [!INCLUDE[btsBizTalkServer2004](../includes/btsbiztalkserver2004-md.md)], MSMQT is the only adapter capable of guaranteeing end-to end ordered delivery.</span></span> <span data-ttu-id="b9e46-125">Todos los demás adaptadores integrados de BizTalk pueden cambiar el orden de los mensajes en los pasos 3 a 5 anteriores.</span><span class="sxs-lookup"><span data-stu-id="b9e46-125">All of the other integrated BizTalk adapters can potentially change the order of the messages in steps 3 through 5 listed above.</span></span> <span data-ttu-id="b9e46-126">La mayoría de los demás adaptadores integrados completan el paso 3 usando un componente conocido como Gestor extremo, que es intrínsecamente multiproceso y, por tanto, no mantiene el orden.</span><span class="sxs-lookup"><span data-stu-id="b9e46-126">Most of the other integrated adapters complete step 3 by the use of a component known as the End Point Manager, which is inherently multithreaded and therefore does not preserve order.</span></span> <span data-ttu-id="b9e46-127">El adaptador de MSMQ para [!INCLUDE[btsBizTalkServer2004](../includes/btsbiztalkserver2004-md.md)] puede usar una característica de "Procesamiento en serie" que mantiene el orden para el Paso 3, aunque no solicita al Agente de mensajes que mantenga el orden ulteriormente, por lo que los mensajes se pueden enrutar a una orquestación o un puerto de envío de forma no ordenada.</span><span class="sxs-lookup"><span data-stu-id="b9e46-127">The MSMQ adapter for [!INCLUDE[btsBizTalkServer2004](../includes/btsbiztalkserver2004-md.md)] can use a "Serial Processing" feature that preserves order for step 3, but it does not then ask the MessageAgent to preserve order going forward, so the messages may be routed to an orchestration or send port out of order.</span></span>  
  
 <span data-ttu-id="b9e46-128">**Entrega ordenada con el adaptador de MSMQ end-to-end**</span><span class="sxs-lookup"><span data-stu-id="b9e46-128">**End-to-end ordered delivery with the MSMQ adapter**</span></span>  
  
 <span data-ttu-id="b9e46-129">Para lograr la entrega ordenada con el adaptador de MSMQ end-to-end, siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="b9e46-129">To achieve end-to-end ordered delivery with the MSMQ adapter, follow these steps:</span></span>  
  
1.  <span data-ttu-id="b9e46-130">Habilitar la **entrega ordenada** puerto para la orquestación de suscripción de propiedad en la recepción o puerto de envío.</span><span class="sxs-lookup"><span data-stu-id="b9e46-130">Enable the **Ordered Delivery** property on the receive port for the subscribing orchestration or send port.</span></span> <span data-ttu-id="b9e46-131">En [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] puertos de recepción en orquestaciones y puertos de envío tienen un **entrega ordenada** opción de configuración.</span><span class="sxs-lookup"><span data-stu-id="b9e46-131">In [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] receive ports in orchestrations and send ports have an **Ordered Delivery** configuration option.</span></span> <span data-ttu-id="b9e46-132">Si está habilitada esta opción, el puerto de recepción de la orquestación o el puerto de envío pide al cuadro de mensajes que le entregue los mensajes en el mismo orden en el que se enviaron al cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="b9e46-132">If this option is enabled, then the orchestration receive port or the send port asks the MessageBox to deliver messages to it in the same order they were submitted into the MessageBox.</span></span>  
  
2.  <span data-ttu-id="b9e46-133">Establecer el **procesamiento ordenado** propiedad para la ubicación de recepción que está enlazada al adaptador de MSMQ a `True`.</span><span class="sxs-lookup"><span data-stu-id="b9e46-133">Set the **Ordered Processing** property for the receive location that is bound to the MSMQ adapter to `True`.</span></span> <span data-ttu-id="b9e46-134">En [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], las ubicaciones de recepción que usan el transporte MSMQ se pueden configurar para utilizar Procesamiento ordenado que, si está habilitado, garantiza el envío de los mensajes al cuadro de mensajes en el mismo orden en el que se reciben.</span><span class="sxs-lookup"><span data-stu-id="b9e46-134">In [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], receive locations that use the MSMQ transport can be configured to use Ordered Processing which, if enabled, ensures that messages are sent to the MessageBox in the same order that they were received.</span></span>  
  
3.  <span data-ttu-id="b9e46-135">Establecer el **transaccional** propiedad para la ubicación de recepción que está enlazada al adaptador de MSMQ a `True`.</span><span class="sxs-lookup"><span data-stu-id="b9e46-135">Set the **Transactional** property for the receive location that is bound to the MSMQ adapter to `True`.</span></span>  
  
4.  <span data-ttu-id="b9e46-136">Asegúrese de que las colas MSMQ que están supervisando las ubicaciones de recepción de MSMQ están marcadas como "Transaccional".</span><span class="sxs-lookup"><span data-stu-id="b9e46-136">Ensure that any MSMQ queues that are being monitored by the MSMQ receive locations are marked as "Transactional".</span></span> <span data-ttu-id="b9e46-137">Esta propiedad debe estar establecida en las colas para garantizar la entrega ordenada de los mensajes.</span><span class="sxs-lookup"><span data-stu-id="b9e46-137">This property must be set on the queues to ensure ordered delivery of messages.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="b9e46-138">La entrega ordenada de los mensajes está garantizada únicamente si solo un equipo sirve a las colas MSMQ que están supervisando las ubicaciones de recepción de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="b9e46-138">Ordered delivery is guaranteed only if the MSMQ queue or queues that are being monitored by BizTalk receive locations is/are serviced by only one computer.</span></span> <span data-ttu-id="b9e46-139">Esto puede suponer problemas de escalabilidad, como se explica a continuación.</span><span class="sxs-lookup"><span data-stu-id="b9e46-139">This can present problems for scalability, as described below.</span></span>  
  
## <a name="transaction-usage-when-processing-messages-with-the-msmqt-adapter-vs-the-msmq-adapter"></a><span data-ttu-id="b9e46-140">Uso de transacciones cuando se procesan mensajes con el adaptador de MSMQT frente al adaptador de MSMQ</span><span class="sxs-lookup"><span data-stu-id="b9e46-140">Transaction Usage When Processing Messages with the MSMQT Adapter vs. the MSMQ Adapter</span></span>  
 <span data-ttu-id="b9e46-141">Con respecto al uso de transacciones, hay una diferencia clave en el modo en que procesan los mensajes los adaptadores de MSMQT y MSMQ.</span><span class="sxs-lookup"><span data-stu-id="b9e46-141">With regard to transaction usage, there is a key difference between how the MSMQT and MSMQ adapters process messages.</span></span>  
  
 <span data-ttu-id="b9e46-142">Cuando se usa el adaptador de MSMQT, el proceso de recibir un mensaje de la red y procesarlo con BizTalk Server se realiza en una sola transacción.</span><span class="sxs-lookup"><span data-stu-id="b9e46-142">When using the MSMQT adapter, the process of receiving a message from the network and processing it with BizTalk Server is handled under a single transaction.</span></span> <span data-ttu-id="b9e46-143">Cuando se usa el adaptador de MSMQT, los mensajes de confirmación generados para el remitente indican que el mensaje se ha recibido y procesado correctamente en BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="b9e46-143">When using the MSMQT adapter, ACK messages generated for the sender are an indication that the message has been received and has been successfully processed by BizTalk Server.</span></span>  
  
 <span data-ttu-id="b9e46-144">Cuando se usa el adaptador de MSMQ, los procesos de recibir un mensaje de la red y procesarlo con BizTalk Server se realizan en dos transacciones diferentes, una para recibir el mensaje de la red y otra para procesarlo con BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="b9e46-144">When using the MSMQ adapter, the processes of receiving a message from the network and processing it with BizTalk Server are handled under two separate transactions, one for receiving from the network and one for processing it with BizTalk Server.</span></span> <span data-ttu-id="b9e46-145">Cuando se usa el adaptador de MSMQ, los mensajes de confirmación generados para el remitente solo indican que el mensaje se ha recibido correctamente de la red, no que se haya procesado correctamente en BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="b9e46-145">When using the MSMQ adapter, ACK messages generated for the sender are only an indication that the message has been successfully received from the network, not that the message has been successfully processed by BizTalk Server.</span></span> <span data-ttu-id="b9e46-146">El remitente recibe un mensaje de confirmación de Microsoft Message Queue Server cuando se recibe el mensaje de la red en el servidor y se guarda en la cola de MSMQ independientemente de que BizTalk Server esté instalado o no.</span><span class="sxs-lookup"><span data-stu-id="b9e46-146">The sender receives an ACK from the Microsoft Message Queuing server when the message is received from the network and persisted into the local MSMQ queue regardless of whether BizTalk Server is installed.</span></span> <span data-ttu-id="b9e46-147">Una vez guardado el mensaje en la cola de MSMQ, el adaptador de MSMQ de BizTalk lo recoge, lo procesa y lo publica en el cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="b9e46-147">After the message has been persisted to the MSMQ queue, the BizTalk MSMQ adapter picks it up, processes it, and publishes it to the MessageBox.</span></span> <span data-ttu-id="b9e46-148">Si este proceso no se realiza correctamente, se envía el mensaje a la cola de suspensión de BizTalk o se deja en la cola de MSMQ local (cuando se usa procesamiento transaccional), y el remitente no tiene ninguna indicación de que no se procesó el mensaje en BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="b9e46-148">If this process fails, the message is either sent to the BizTalk suspended queue or left in the local MSMQ queue (when using transactional processing), and the sender has no indication that the message failed processing in BizTalk Server.</span></span>  
  
 <span data-ttu-id="b9e46-149">Si su arquitectura requiere la recepción de mensajes de confirmación cuando BizTalk Server procesa correctamente los mensajes, debe agregar mensajes de confirmación de nivel de aplicación si migra del adaptador de MSMQT al adaptador de MSMQ.</span><span class="sxs-lookup"><span data-stu-id="b9e46-149">If your architecture requires that you receive ACKs when your messages are successfully processed by BizTalk Server, then you must add application-level ACKs if you are migrating from the MSMQT adapter to the MSMQ adapter.</span></span> <span data-ttu-id="b9e46-150">Deberá actualizar la aplicación de orquestación y envío para implementar los mensajes de confirmación de nivel de aplicación.</span><span class="sxs-lookup"><span data-stu-id="b9e46-150">You will need to update your orchestration and sending application to implement application-level ACKs.</span></span>  
  
## <a name="high-availability-transactional-in-order"></a><span data-ttu-id="b9e46-151">Alta disponibilidad (transaccional, en orden)</span><span class="sxs-lookup"><span data-stu-id="b9e46-151">High Availability (Transactional, in Order)</span></span>  
 <span data-ttu-id="b9e46-152">Para proporcionar alta disponibilidad para el adaptador de MSMQT puede agregar varios equipos al host de recepción y configurar Equilibrio de carga de red (NLB) para tolerancia a errores o es posible agrupar el BizTalk Host predeterminado.</span><span class="sxs-lookup"><span data-stu-id="b9e46-152">To provide high availability for the MSMQT adapter you can either add multiple computers to the receive host and configure Network Load Balancing (NLB) for fault tolerance or you can cluster the default BizTalk Host.</span></span> <span data-ttu-id="b9e46-153">Si ejecuta el adaptador de MSMQT junto con NLB, si un servidor deja de funcionar, los demás servidores controlan la carga.</span><span class="sxs-lookup"><span data-stu-id="b9e46-153">If you are running the MSMQT adapter in conjunction with NLB, if one server goes down the other servers handle the load.</span></span> <span data-ttu-id="b9e46-154">Si ejecuta los controladores del adaptador de MSMQT en un host agrupado y un nodo de host deja de funcionar, el software del clúster conmuta al otro nodo.</span><span class="sxs-lookup"><span data-stu-id="b9e46-154">If you are running the MSMQT adapter handlers on a clustered host, if one host node fails, cluster software fails over the clustered host to the other node.</span></span> <span data-ttu-id="b9e46-155">Cuando se usa el adaptador de MSMQ, NLB no funciona si es necesario procesamiento transaccional sin pérdida de datos, porque el adaptador de MSMQ usa colas de MSMQ locales para almacenamiento intermedio.</span><span class="sxs-lookup"><span data-stu-id="b9e46-155">When using the MSMQ adapter, NLB does not work if you need transactional processing with no data loss because the MSMQ adapter uses local MSMQ queues for intermediate storage.</span></span> <span data-ttu-id="b9e46-156">En este escenario, si se ha entregado un mensaje a la cola de MSMQ local pero no lo ha consumido el adaptador de MSMQ, el mensaje se pierde si el equipo deja de funcionar.</span><span class="sxs-lookup"><span data-stu-id="b9e46-156">In this scenario, if a message has been delivered to the local MSMQ queue but has not been consumed by the MSMQ adapter, the message is lost if the computer fails.</span></span>  
  
 <span data-ttu-id="b9e46-157">Para proporcionar alta disponibilidad y la coherencia transaccional con el adaptador de MSMQ, debe hacer lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="b9e46-157">To provide high availability and transactional consistency with the MSMQ adapter, you should do the following:</span></span>  
  
1.  <span data-ttu-id="b9e46-158">Configure Microsoft Message Queuing (MSMQ) como un recurso agrupado en un grupo de clúster de Windows Server en los servidores BizTalk.</span><span class="sxs-lookup"><span data-stu-id="b9e46-158">Configure Microsoft Message Queuing (MSMQ) as a clustered resource in a Windows Server cluster group on your BizTalk servers.</span></span>  
  
2.  <span data-ttu-id="b9e46-159">Configure el controlador de recepción del adaptador de MSMQ en una instancia de host de BizTalk que se haya configurado como un recurso de clúster en el mismo grupo de clúster que el recurso de MSMQ agrupado.</span><span class="sxs-lookup"><span data-stu-id="b9e46-159">Configure the MSMQ adapter receive handler in a BizTalk Host instance that has been configured as a cluster resource in the same cluster group as the clustered MSMQ resource.</span></span>  
  
3.  <span data-ttu-id="b9e46-160">Configure el recurso de clúster para la instancia de host de BizTalk con el fin de que mantenga una dependencia del recurso de MSMQ agrupado.</span><span class="sxs-lookup"><span data-stu-id="b9e46-160">Configure the cluster resource for the BizTalk Host instance so that it maintains a dependency on the clustered MSMQ resource.</span></span>  
  
 <span data-ttu-id="b9e46-161">Para implementar la entrega ordenada con esta arquitectura, siga los pasos que se explican en la sección "End-to-end entrega ordenada con el adaptador de MSMQ."</span><span class="sxs-lookup"><span data-stu-id="b9e46-161">To implement ordered delivery with this architecture, follow the steps presented earlier under "End-to-end ordered delivery with the MSMQ adapter."</span></span>  
  
## <a name="high-availability-nontransactional-not-in-order"></a><span data-ttu-id="b9e46-162">Alta disponibilidad (no transaccional, sin orden)</span><span class="sxs-lookup"><span data-stu-id="b9e46-162">High Availability (Nontransactional, Not in Order)</span></span>  
 <span data-ttu-id="b9e46-163">Si necesita alta disponibilidad pero no necesita procesamiento transaccional, puede lograrlo con el adaptador de MSMQ, mediante la implementación de NLB y la ejecución de instancias de un host configurado con los controladores de envío y recepción de MSMQ en varios servidores BizTalk detrás de NLB.</span><span class="sxs-lookup"><span data-stu-id="b9e46-163">If you need high availability but do not need transactional processing, you can achieve this with the MSMQ adapter by implementing NLB and running instances of a host configured with the MSMQ send and receive handlers on multiple BizTalk servers behind NLB.</span></span> <span data-ttu-id="b9e46-164">Al implementar NLB con MSMQ debe seguir los procedimientos recomendados como se documenta en el artículo 899611 de Microsoft Knowledge Base "cómo Message Queue Server puede funcionar a través de red (NLB) de equilibrio de carga" disponible en [http://go.microsoft.com/fwlink/? LinkId = 57510](http://go.microsoft.com/fwlink/?LinkId=57510).</span><span class="sxs-lookup"><span data-stu-id="b9e46-164">When implementing NLB with MSMQ you should follow best practices as documented in Microsoft Knowledge Base article 899611, "How Message Queuing can function over Network Load Balancing (NLB)" available at [http://go.microsoft.com/fwlink/?LinkId=57510](http://go.microsoft.com/fwlink/?LinkId=57510).</span></span> <span data-ttu-id="b9e46-165">En este escenario, si uno de los servidores BizTalk deja de funcionar, los mensajes que se están ejecutando en la instancia de host de ese servidor BizTalk no estarán disponibles hasta que se recupere el servidor BizTalk.</span><span class="sxs-lookup"><span data-stu-id="b9e46-165">In this scenario, if one of the BizTalk servers fails, the messages that are running in the host instance on that BizTalk server will be unavailable until the BizTalk server is recovered.</span></span> <span data-ttu-id="b9e46-166">Esta configuración proporciona alta disponibilidad porque, si uno de los servidores de BizTalk no está disponible, NLB enruta las solicitudes al otro servidor BizTalk.</span><span class="sxs-lookup"><span data-stu-id="b9e46-166">This configuration provides high availability because if one of the BizTalk servers is not available, NLB routes requests to the other BizTalk server.</span></span>  
  
## <a name="scalability-nontransactional-not-in-order"></a><span data-ttu-id="b9e46-167">Escalabilidad (no transaccional, sin orden)</span><span class="sxs-lookup"><span data-stu-id="b9e46-167">Scalability (Nontransactional, Not in Order)</span></span>  
 <span data-ttu-id="b9e46-168">Para obtener escalabilidad, siga las instrucciones para lograr alta disponibilidad (no transaccional) y agregue instancias de host adicionales.</span><span class="sxs-lookup"><span data-stu-id="b9e46-168">You can achieve scalability by following the guidelines for high availability (nontransactional) and adding additional host instances.</span></span> <span data-ttu-id="b9e46-169">Esta arquitectura proporciona entrega rápida y escalabilidad, pero no proporciona entrega ordenada.</span><span class="sxs-lookup"><span data-stu-id="b9e46-169">This architecture provides fast delivery as well as scalability, but does not provide ordered delivery.</span></span>  
  
## <a name="scalability-transactional-not-in-order"></a><span data-ttu-id="b9e46-170">Escalabilidad (transaccional, sin orden)</span><span class="sxs-lookup"><span data-stu-id="b9e46-170">Scalability (Transactional, Not in Order)</span></span>  
 <span data-ttu-id="b9e46-171">Para la entrega transaccional de los mensajes sin orden, puede combinar el uso de NLB con clústeres de MSMQ y Windows.</span><span class="sxs-lookup"><span data-stu-id="b9e46-171">For transactional delivery of messages without ordered delivery, you can combine the use of NLB with MSMQ and Windows clustering.</span></span> <span data-ttu-id="b9e46-172">Esta arquitectura requiere que configure al menos dos grupos de clúster en dos entornos de Windows Cluster con los pasos que se explican en la sección "Alta disponibilidad (transaccional, en orden)" para cada clúster de Windows.</span><span class="sxs-lookup"><span data-stu-id="b9e46-172">This architecture requires that you configure at least two cluster groups on two separate Windows Cluster environments following the steps under "High Availability (Transactional, in Order)" for each Windows Cluster.</span></span> <span data-ttu-id="b9e46-173">A continuación, implemente NLB para distribuir la carga entre los grupos de clúster.</span><span class="sxs-lookup"><span data-stu-id="b9e46-173">You then implement NLB to distribute load between the cluster groups.</span></span> <span data-ttu-id="b9e46-174">Puesto que no se admite Windows NLB en un clúster de Windows, este escenario requiere una solución de NLB en hardware.</span><span class="sxs-lookup"><span data-stu-id="b9e46-174">Because Windows NLB is not supported running on a Windows Cluster, this scenario requires a hardware NLB solution.</span></span> <span data-ttu-id="b9e46-175">El diagrama siguiente muestra esta arquitectura.</span><span class="sxs-lookup"><span data-stu-id="b9e46-175">The following diagram illustrates this architecture.</span></span>  
  
 <span data-ttu-id="b9e46-176">![Equilibrio de carga entre grupos de clúster](../core/media/scaleclusteredmsmqwithnlb.gif "ScaleClusteredMSMQwithNLB")</span><span class="sxs-lookup"><span data-stu-id="b9e46-176">![Load balancing between cluster groups](../core/media/scaleclusteredmsmqwithnlb.gif "ScaleClusteredMSMQwithNLB")</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="b9e46-177">Esta arquitectura no proporciona entrega ordenada.</span><span class="sxs-lookup"><span data-stu-id="b9e46-177">This architecture does not provide ordered delivery.</span></span>  
  
## <a name="scalability-transactional-in-order"></a><span data-ttu-id="b9e46-178">Escalabilidad (transaccional, en orden)</span><span class="sxs-lookup"><span data-stu-id="b9e46-178">Scalability (Transactional, in Order)</span></span>  
 <span data-ttu-id="b9e46-179">Escalar de forma horizontal una arquitectura que proporcione alta disponibilidad, coherencia transaccional y entrega ordenada es problemático al usar MSMQ 3.0 o anterior, puesto que no se admiten lecturas transaccionales remotas a menos que tanto el equipo con BizTalk Server como el servidor MSMQ remoto ejecuten MSMQ 4.0.</span><span class="sxs-lookup"><span data-stu-id="b9e46-179">Scaling out an architecture that provides high availability, transactional consistency, and ordered delivery is problematic when using MSMQ 3.0 or earlier because remote transactional reads are not supported unless both the BizTalk Server computer and the remote MSMQ server are running MSMQ 4.0.</span></span> <span data-ttu-id="b9e46-180">Si se usa MSMQ 3.0 o anterior, debe conseguirse la escala horizontal mediante varias colas locales de MSMQ.</span><span class="sxs-lookup"><span data-stu-id="b9e46-180">When using MSMQ 3.0 or earlier, scale out must be achieved using multiple local MSMQ queues.</span></span> <span data-ttu-id="b9e46-181">Además, en este escenario, si se interrumpe la conexión TCP/IP a NLB para la sesión de MSMQ, se puede restaurar después con NLB a otro equipo, lo que puede producir una entrega no ordenada.</span><span class="sxs-lookup"><span data-stu-id="b9e46-181">Furthermore, in this scenario, if the TCP/IP connection for the MSMQ session to the NLB is broken, it may subsequently be restored by NLB to a different computer, which can cause out-of-order delivery.</span></span>  
  
 <span data-ttu-id="b9e46-182">Una posible solución a esta limitación es equilibrar manualmente la carga de entrega de mensajes asignando colas de destino a diferentes equipos.</span><span class="sxs-lookup"><span data-stu-id="b9e46-182">One possible workaround to this limitation is to manually load balance message delivery by allocating destination queues to different computers.</span></span> <span data-ttu-id="b9e46-183">Para ello, vincule instancias de host de BizTalk específicas con colas de MSMQ específicas.</span><span class="sxs-lookup"><span data-stu-id="b9e46-183">You can so this by tying specific BizTalk Host instances to specific MSMQ queues.</span></span> <span data-ttu-id="b9e46-184">Así, por ejemplo, si recibe un gran número de documentos de un socio comercial concreto, cree un host y una cola de recepción aparte en un servidor BizTalk concreto solo para ese asociado.</span><span class="sxs-lookup"><span data-stu-id="b9e46-184">So for example, if you receive a large number of documents from one particular trading partner, create a separate host and receive queue on a particular BizTalk server for just that trading partner.</span></span>  
  
 <span data-ttu-id="b9e46-185">Si es posible, ejecute MSMQ 4.0 en equipos remotos cuando se requieran tanto lecturas transaccionales remotas como balance de cargas.</span><span class="sxs-lookup"><span data-stu-id="b9e46-185">If possible, run MSMQ 4.0 on remote computers when both remote transactional reads and load balancing are required.</span></span>  
  
## <a name="summary"></a><span data-ttu-id="b9e46-186">Resumen</span><span class="sxs-lookup"><span data-stu-id="b9e46-186">Summary</span></span>  
 <span data-ttu-id="b9e46-187">En la tabla siguiente, se resumen las arquitecturas que puede implementar para alojar funcionalidad específica.</span><span class="sxs-lookup"><span data-stu-id="b9e46-187">The following table summarizes the architectures that you can implement to accommodate specific functionality.</span></span>  
  
|<span data-ttu-id="b9e46-188">**Funcionalidad**</span><span class="sxs-lookup"><span data-stu-id="b9e46-188">**Functionality**</span></span>|<span data-ttu-id="b9e46-189">**Ni NLB ni clúster**</span><span class="sxs-lookup"><span data-stu-id="b9e46-189">**Neither NLB nor cluster**</span></span>|<span data-ttu-id="b9e46-190">**NLB**</span><span class="sxs-lookup"><span data-stu-id="b9e46-190">**NLB**</span></span>|<span data-ttu-id="b9e46-191">**Cluster**</span><span class="sxs-lookup"><span data-stu-id="b9e46-191">**Cluster**</span></span>|<span data-ttu-id="b9e46-192">**NLB y clúster**</span><span class="sxs-lookup"><span data-stu-id="b9e46-192">**NLB and cluster**</span></span>|  
|-----------------------|---------------------------------|-------------|-----------------|-------------------------|  
|<span data-ttu-id="b9e46-193">Entrega ordenada de un extremo a otro</span><span class="sxs-lookup"><span data-stu-id="b9e46-193">End-to-end ordered delivery</span></span>|<span data-ttu-id="b9e46-194">Sí</span><span class="sxs-lookup"><span data-stu-id="b9e46-194">Yes</span></span>|<span data-ttu-id="b9e46-195">No</span><span class="sxs-lookup"><span data-stu-id="b9e46-195">No</span></span>|<span data-ttu-id="b9e46-196">Sí</span><span class="sxs-lookup"><span data-stu-id="b9e46-196">Yes</span></span>|<span data-ttu-id="b9e46-197">Posible con configuración manual</span><span class="sxs-lookup"><span data-stu-id="b9e46-197">Possible with manual configuration</span></span>|  
|<span data-ttu-id="b9e46-198">Coherencia transaccional</span><span class="sxs-lookup"><span data-stu-id="b9e46-198">Transactional consistency</span></span>|<span data-ttu-id="b9e46-199">No (los mensajes se pueden perder o duplicar si se producen errores en el servicio)</span><span class="sxs-lookup"><span data-stu-id="b9e46-199">No (messages can be lost or duplicated if service failure occurs)</span></span>|<span data-ttu-id="b9e46-200">No</span><span class="sxs-lookup"><span data-stu-id="b9e46-200">No</span></span>|<span data-ttu-id="b9e46-201">Sí</span><span class="sxs-lookup"><span data-stu-id="b9e46-201">Yes</span></span>|<span data-ttu-id="b9e46-202">Sí</span><span class="sxs-lookup"><span data-stu-id="b9e46-202">Yes</span></span>|  
|<span data-ttu-id="b9e46-203">Alta disponibilidad</span><span class="sxs-lookup"><span data-stu-id="b9e46-203">Highly available</span></span>|<span data-ttu-id="b9e46-204">No</span><span class="sxs-lookup"><span data-stu-id="b9e46-204">No</span></span>|<span data-ttu-id="b9e46-205">Sí</span><span class="sxs-lookup"><span data-stu-id="b9e46-205">Yes</span></span>|<span data-ttu-id="b9e46-206">Sí</span><span class="sxs-lookup"><span data-stu-id="b9e46-206">Yes</span></span>|<span data-ttu-id="b9e46-207">Sí</span><span class="sxs-lookup"><span data-stu-id="b9e46-207">Yes</span></span>|  
|<span data-ttu-id="b9e46-208">Escalable</span><span class="sxs-lookup"><span data-stu-id="b9e46-208">Scalable</span></span>|<span data-ttu-id="b9e46-209">No</span><span class="sxs-lookup"><span data-stu-id="b9e46-209">No</span></span>|<span data-ttu-id="b9e46-210">Sí</span><span class="sxs-lookup"><span data-stu-id="b9e46-210">Yes</span></span>|<span data-ttu-id="b9e46-211">No</span><span class="sxs-lookup"><span data-stu-id="b9e46-211">No</span></span>|<span data-ttu-id="b9e46-212">Sí</span><span class="sxs-lookup"><span data-stu-id="b9e46-212">Yes</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="b9e46-213">Vea también</span><span class="sxs-lookup"><span data-stu-id="b9e46-213">See Also</span></span>  
 [<span data-ttu-id="b9e46-214">Uso de clúster de Windows Server para proporcionar alta disponibilidad para el servidor BizTalk Server Hosts2</span><span class="sxs-lookup"><span data-stu-id="b9e46-214">Using Windows Server Cluster to Provide High Availability for BizTalk Server Hosts2</span></span>](../core/use-windows-cluster-to-provide-high-availability-for-biztalk-hosts.md)
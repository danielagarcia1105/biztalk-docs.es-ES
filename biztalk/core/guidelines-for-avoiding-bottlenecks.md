---
title: Directrices para evitar cuellos de botella | Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 640ab399-b22d-4f71-b41d-ea8d778e064a
caps.latest.revision: 9
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 45071b7990d8fd4a926efa56b9e98cbd633553ac
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/27/2018
ms.locfileid: "37017812"
---
# <a name="guidelines-for-avoiding-bottlenecks"></a><span data-ttu-id="d7fc9-102">Directrices para evitar cuellos de botella</span><span class="sxs-lookup"><span data-stu-id="d7fc9-102">Guidelines for Avoiding Bottlenecks</span></span>
<span data-ttu-id="d7fc9-103">Aunque la configuración predeterminada de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] proporciona un rendimiento óptimo para muchas configuraciones de hardware y software, en algunas situaciones conviene modificar los valores de configuración o la configuración de implementación.</span><span class="sxs-lookup"><span data-stu-id="d7fc9-103">While the default settings in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] provide optimal performance for many hardware and software configurations, in some scenarios it may be beneficial to modify the settings or deployment configuration.</span></span> <span data-ttu-id="d7fc9-104">Al configurar [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], tenga en cuenta las siguientes directrices sobre rendimiento:</span><span class="sxs-lookup"><span data-stu-id="d7fc9-104">When configuring [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], consider the following performance guidelines:</span></span>  

-   <span data-ttu-id="d7fc9-105">Para evitar la contención de recursos, aísle la recepción, la orquestación y el envío en host distintos.</span><span class="sxs-lookup"><span data-stu-id="d7fc9-105">To prevent resource contention, isolate receiving, orchestration, and sending onto separate hosts.</span></span> <span data-ttu-id="d7fc9-106">Para reducir aún más la contención, aísle el servicio de seguimiento de otros hosts.</span><span class="sxs-lookup"><span data-stu-id="d7fc9-106">To further minimize contention, isolate the tracking service from other hosts.</span></span>  

-   <span data-ttu-id="d7fc9-107">Si el cuello de botella se produce en el procesamiento de la CPU en BizTalk Server, escale verticalmente BizTalk Server mediante la inclusión de CPU adicionales o la actualización a CPU más rápidas.</span><span class="sxs-lookup"><span data-stu-id="d7fc9-107">If CPU processing on the BizTalk Server is the bottleneck, scale up BizTalk Server by including additional CPUs or upgrading to faster CPUs.</span></span>  

## <a name="sql-server-guidelines"></a><span data-ttu-id="d7fc9-108">Directrices de SQL Server</span><span class="sxs-lookup"><span data-stu-id="d7fc9-108">SQL Server Guidelines</span></span>  
 <span data-ttu-id="d7fc9-109">Al configurar Microsoft SQL Server con [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], tenga en cuenta las siguientes directrices sobre rendimiento:</span><span class="sxs-lookup"><span data-stu-id="d7fc9-109">Consider the following performance guidelines when configuring Microsoft SQL Server with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]:</span></span>  

- [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="d7fc9-110"> las bases de datos deben configurarse para ejecutarse en una instancia dedicada de SQL Server siempre que sea posible.</span><span class="sxs-lookup"><span data-stu-id="d7fc9-110"> databases should be configured to run on a dedicated SQL Server instance whenever possible.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="d7fc9-111"> es una aplicación intensiva de bases de datos, por lo que separación de la [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] equipos y los equipos de SQL Server que hospedan el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] mejorará el rendimiento de bases de datos y debe considerarse una práctica recomendada en una producción [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] entorno.</span><span class="sxs-lookup"><span data-stu-id="d7fc9-111"> is a databases intensive application, so separation of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computer(s) and the SQL Server computer(s) that house the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases will improve performance and should be considered a best practice in a production [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment.</span></span>  

- <span data-ttu-id="d7fc9-112">Siempre que sea posible, utilice un subsistema rápido de discos con SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d7fc9-112">Whenever possible, use a fast disk subsystem with SQL Server.</span></span> <span data-ttu-id="d7fc9-113">Utilice una matriz redundante de discos independientes de tipo 5 (RAID5/10) o una red de área de almacenamiento (SAN) con un sistema de alimentación auxiliar.</span><span class="sxs-lookup"><span data-stu-id="d7fc9-113">Use a redundant array of independent disks type 5 (RAID5/10) or a storage area network (SAN) with backup power supply.</span></span>  

- <span data-ttu-id="d7fc9-114">Para realizar copias de seguridad de las bases de datos con regularidad, utilice el proceso de recuperación ante desastres de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d7fc9-114">Use the SQL Server disaster recovery process to back up your databases regularly.</span></span> <span data-ttu-id="d7fc9-115">El servicio de BizTalk Server se recupera automáticamente de problemas de funcionamiento en la conexión con SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d7fc9-115">The BizTalk Server service automatically recovers from SQL Server connection malfunctions.</span></span>  

- <span data-ttu-id="d7fc9-116">Aísle cada cuadro de mensajes en un servidor independiente de la base de datos de seguimiento de BizTalk (BizTalkDTADb).</span><span class="sxs-lookup"><span data-stu-id="d7fc9-116">Isolate each message box onto a separate server from the BizTalk Tracking database (BizTalkDTADb).</span></span> <span data-ttu-id="d7fc9-117">En el caso de implementaciones más pequeñas, si hay recursos de CPU disponibles, el aislamiento del cuadro de mensajes en un disco físico independiente de la base de datos BizTalkDTADb bastaría.</span><span class="sxs-lookup"><span data-stu-id="d7fc9-117">For smaller deployments if CPU resources are available, isolating the message box onto a separate physical disk from the BizTalkDTADb database might be sufficient.</span></span>  

- <span data-ttu-id="d7fc9-118">El cuadro de mensajes principal podría ser el cuello de botella debido a una saturación del procesador de la CPU o a la latencia de operaciones de disco (longitud media de la cola del disco).</span><span class="sxs-lookup"><span data-stu-id="d7fc9-118">The primary MessageBox could be the bottleneck due to CPU processor saturation or latency from disk operations (average disk queue length).</span></span> <span data-ttu-id="d7fc9-119">Si el cuello de botella se encuentra en el procesamiento de la CPU, agregue procesadores de CPU al cuadro de mensajes principal.</span><span class="sxs-lookup"><span data-stu-id="d7fc9-119">If CPU processing is the bottleneck, add CPU processors to the primary message box.</span></span> <span data-ttu-id="d7fc9-120">Si no es así, pruebe a deshabilitar la publicación en el cuadro de mensaje principal. De este modo, el cuadro puede controlar con mayor eficacia el enrutamiento de mensajes a las demás bases de datos de cuadro de mensaje.</span><span class="sxs-lookup"><span data-stu-id="d7fc9-120">If not try disabling publishing on the Master MessageBox, this way the Master MessageBox can more efficiently handle routing of messages to the other MessageBox databases.</span></span>  

- <span data-ttu-id="d7fc9-121">Si el cuello de botella se encuentra en las operaciones de disco, mueva la base de datos BizTalkDTADb a un equipo dedicado con SQL Server o a un disco dedicado.</span><span class="sxs-lookup"><span data-stu-id="d7fc9-121">If disk operations are the bottleneck, move the BizTalkDTADb database to a dedicated SQL Server computer and/or dedicated disk.</span></span> <span data-ttu-id="d7fc9-122">Si el cuello de botella no se encuentra en el procesamiento de la CPU ni en las operaciones de disco en el cuadro de mensajes principal, puede crear nuevas bases de datos de cuadro de mensajes en el mismo equipo de SQL Server para aprovechar el hardware existente.</span><span class="sxs-lookup"><span data-stu-id="d7fc9-122">If CPU processing and disk operations on the primary message box are not the bottleneck, you can create new MessageBox databases on the same SQL Server computer to leverage your existing hardware.</span></span>  

- <span data-ttu-id="d7fc9-123">Siga las prácticas recomendadas de SQL Server para aislar los archivos de registro de transacciones y datos de las bases de datos de cuadro de mensajes y BizTalkDTADb en discos físicos diferentes.</span><span class="sxs-lookup"><span data-stu-id="d7fc9-123">Follow SQL Server best practices to isolate the transaction and data log files for the MessageBox and BizTalkDTADb databases onto separate physical disks.</span></span>  

- <span data-ttu-id="d7fc9-124">Asigne suficiente espacio de almacenamiento para los archivos de registro y de datos; en caso contrario, SQL Server consumirá automáticamente todo el espacio disponible en los discos donde se guardan los archivos de registro.</span><span class="sxs-lookup"><span data-stu-id="d7fc9-124">Allocate sufficient storage space for the data and log files; otherwise SQL Server will automatically consume all of the available space on the disks that the log files are kept.</span></span> <span data-ttu-id="d7fc9-125">El tamaño inicial de los archivos de registro dependerá de los requisitos específicos de cada escenario concreto.</span><span class="sxs-lookup"><span data-stu-id="d7fc9-125">Initial size of the log files will depend on the specific requirements in your particular scenario.</span></span> <span data-ttu-id="d7fc9-126">Realice una estimación del tamaño medio de los archivos de la implementación según los resultados de la prueba y amplíe el espacio de almacenamiento antes de implementar la solución.</span><span class="sxs-lookup"><span data-stu-id="d7fc9-126">Estimate the average file size in your deployment based on testing results, and expand the storage space before implementing your solution.</span></span>  

- <span data-ttu-id="d7fc9-127">Asigne suficiente espacio de almacenamiento para bases de datos que hacen un uso intensivo del disco, como las bases de datos de cuadro de mensaje, de seguimiento y de supervisión de la actividad económica (BAM).</span><span class="sxs-lookup"><span data-stu-id="d7fc9-127">Allocate sufficient storage space for high-disk-usage databases, such as the MessageBox, Tracking, and Business Activity Monitoring (BAM) databases.</span></span> <span data-ttu-id="d7fc9-128">Si la solución utiliza el protocolo de mensajería BizTalk Framework, asigne suficiente espacio de almacenamiento para la base de datos de configuración de BizTalk (BizTalkMgmtDb).</span><span class="sxs-lookup"><span data-stu-id="d7fc9-128">If your solution uses the BizTalk Framework messaging protocol, allocate sufficient storage space for the BizTalk Configuration database (BizTalkMgmtDb).</span></span>  

- <span data-ttu-id="d7fc9-129">En función de las necesidades empresariales [períodos de retención de datos] y de la cantidad de datos procesada en el escenario concreto, configure trabajos de archivado y purga en la base de datos de seguimiento, de modo que la base de datos BizTalkDTADb no aumente demasiado.</span><span class="sxs-lookup"><span data-stu-id="d7fc9-129">Depending on business needs [data retention periods] and the volume of data processed in your particular scenario, configure the Archive/Purge jobs on the Tracking database such that the BizTalkDTADb database does not grow too large.</span></span> <span data-ttu-id="d7fc9-130">El crecimiento de esta base de datos puede reducir el rendimiento (en especial cuando una base de datos BizTalkDTADb admite varios cuadros de mensajes) ya que, al alcanzar el límite de su capacidad, se establece un límite en la velocidad de inserción de los datos.</span><span class="sxs-lookup"><span data-stu-id="d7fc9-130">The growth of this database can degrade performance (especially when one BizTalkDTADb database supports multiple message boxes) because reaching the full capacity of the database imposes a limit on the rate of data insertion.</span></span>  

- <span data-ttu-id="d7fc9-131">Escale verticalmente los servidores que alojan las bases de datos de cuadro de mensajes y BizTalkDTADb si éstas generan el cuello de botella.</span><span class="sxs-lookup"><span data-stu-id="d7fc9-131">Scale up the servers hosting the MessageBox and BizTalkDTADb databases if they are the bottleneck.</span></span> <span data-ttu-id="d7fc9-132">Para escalar verticalmente el hardware, agregue diversas CPU, agregue memoria, actualice a CPU más rápidas y utilice discos dedicados de alta velocidad.</span><span class="sxs-lookup"><span data-stu-id="d7fc9-132">You can scale up the hardware by adding CPUs, adding memory, upgrading to faster CPUs and using high-speed dedicated disks.</span></span>

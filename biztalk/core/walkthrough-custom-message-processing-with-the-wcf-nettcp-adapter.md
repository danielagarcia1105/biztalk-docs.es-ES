---
title: 'Tutorial: Mensaje personalizado procesamiento con el adaptador de WCF-NetTcp | Microsoft Docs'
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: b56b7492-2ea0-4c63-8f1b-430eb277517d
caps.latest.revision: 32
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: d8b74c2ead4ece353dae155d272a9a1aee5fb676
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/27/2018
ms.locfileid: "37006213"
---
# <a name="walkthrough-custom-message-processing-with-the-wcf-nettcp-adapter"></a><span data-ttu-id="8c2e8-102">Tutorial: Mensaje personalizado procesamiento con el adaptador de WCF-NetTcp</span><span class="sxs-lookup"><span data-stu-id="8c2e8-102">Walkthrough: Custom Message Processing with the WCF-NetTcp Adapter</span></span>
<span data-ttu-id="8c2e8-103">En este tutorial, un cliente de [!INCLUDE[firstref_btsWinCommFoundation](../includes/firstref-btswincommfoundation-md.md)] envía un mensaje de [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] que contiene datos binarios de imagen JPEG integrados a una ubicación de recepción de BizTalk mediante el adaptador de WCF-NetTcp.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-103">In this walkthrough a [!INCLUDE[firstref_btsWinCommFoundation](../includes/firstref-btswincommfoundation-md.md)] client submits a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] message containing embedded binary JPEG image data to a BizTalk receive location using the WCF-NetTcp adapter.</span></span> <span data-ttu-id="8c2e8-104">Se extrae la imagen JPEG codificada en binario con una instrucción XPath (con codificación de nodo Base64) a través de la **cuerpo de mensaje entrante** configuración en la configuración del adaptador.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-104">The binary encoded JPEG image gets extracted by using an XPath statement (with Base64 Node encoding) through the **Inbound Message Body** settings in the adapter’s configuration.</span></span> <span data-ttu-id="8c2e8-105">El procesamiento de XPath difiere del método predeterminado en que usa [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] para controlar los mensajes entrantes.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-105">XPath processing differs from the default method that [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] uses to handle incoming messages.</span></span> <span data-ttu-id="8c2e8-106">En el método de forma predeterminada, el adaptador obtiene todo el contenido de la **cuerpo** elemento de la [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] del mensaje y, a continuación, se envía a la base de datos de BizTalk MessageBox.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-106">In the default method, the adapter obtains the entire contents of the **Body** element of the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] message, and then submits it to the BizTalk MessageBox database.</span></span> <span data-ttu-id="8c2e8-107">El procesamiento de mensajes de XPath extrae partes específicas de un mensaje de [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] entrante para crear un mensaje de BizTalk personalizado.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-107">XPath message processing extracts specific parts of an incoming [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] message to create a custom BizTalk message.</span></span> <span data-ttu-id="8c2e8-108">En este ejemplo de procesamiento de XPath localiza un elemento XML denominado **SendPicture** en entrante [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] mensaje (que se encuentra en formato XML).</span><span class="sxs-lookup"><span data-stu-id="8c2e8-108">In this sample XPath processing locates an XML element named **SendPicture** in the incoming [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] message (which is in XML format).</span></span> <span data-ttu-id="8c2e8-109">Después de encontrar ese elemento, XPath extrae su valor como un objeto codificado en Base64 y coloca el valor binario en un mensaje de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-109">After finding that element, XPath extracts the element's value as a binary Base64 encoded object, and places that binary value into a BizTalk message.</span></span> <span data-ttu-id="8c2e8-110">El mensaje se publica en la base de datos de cuadro de mensajes y luego se pasa a un puerto de envío de archivos con la ayuda de una suscripción de filtro de puertos de envío.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-110">The message is published to the MessageBox database, then output to a FILE send port with the help of a send port filter subscription.</span></span> <span data-ttu-id="8c2e8-111">No se usa ninguna orquestación en este ejemplo, y todo el procesamiento se realiza mediante la mensajería de BizTalk con XPath.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-111">No orchestrations are used in this sample, and all the processing is done through BizTalk messaging using XPath.</span></span>  

 <span data-ttu-id="8c2e8-112">Se usa un adaptador de [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] para comunicarse con clientes [!INCLUDE[firstref_btsWinCommFoundation](../includes/firstref-btswincommfoundation-md.md)] y los servicios remotos de [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] desde [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="8c2e8-112">A [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] adapter is used to communicate with [!INCLUDE[firstref_btsWinCommFoundation](../includes/firstref-btswincommfoundation-md.md)] clients and [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] remote services from [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span>  <span data-ttu-id="8c2e8-113">Permite publicar las orquestaciones y los esquemas como servicios de [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] y también proporciona la capacidad de que una orquestación consuma servicios WCF externos.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-113">It allows orchestrations and schemas to be published as [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] services, and also provides the ability for an orchestration to consume external WCF services.</span></span> <span data-ttu-id="8c2e8-114">El adaptador de WCF-NetTcp usa el **NetTcpBinding** enlace, lo que significa que el transporte TCP debe usar una codificación de mensajes binaria optimizada.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-114">The WCF-NetTcp adapter uses the **NetTcpBinding** binding, which means the TCP transport using an optimized binary message encoding.</span></span> <span data-ttu-id="8c2e8-115">El adaptador de WCF-NetTcp consta de un adaptador de envío y un adaptador de recepción.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-115">The WCF-NetTcp adapter consists of both a send adapter and a receive adapter.</span></span> <span data-ttu-id="8c2e8-116">Proporciona acceso completo a características de confiabilidad, seguridad y transacciones de SOAP.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-116">It provides full access to SOAP security, reliability, and transaction features.</span></span>  

 <span data-ttu-id="8c2e8-117">Cuando concluya el tutorial, comprenderá cómo se realizan las tareas siguientes:</span><span class="sxs-lookup"><span data-stu-id="8c2e8-117">After completing this walkthrough, you will understand how to perform the following tasks:</span></span>  

- <span data-ttu-id="8c2e8-118">Importar, mediante la consola de administración de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], un archivo MSI para crear un puerto de envío, un puerto de recepción y una ubicación de recepción.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-118">By using the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, import an MSI file to create a send port, a receive port, and a receive location.</span></span>  

- <span data-ttu-id="8c2e8-119">Mediante el uso de la [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] administración de consola, configure un [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] ubicación de recepción para ejecutar una instrucción XPath para extraer datos desde el **SendPicture** elemento de la [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] mensaje.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-119">By using the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, configure a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] receive location to run an XPath statement to extract data from the **SendPicture** element of the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] message.</span></span>  

> [!NOTE]
>  <span data-ttu-id="8c2e8-120">El **hosttrusted** elemento especifica si el host asociado con el controlador de recepción es de confianza.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-120">The **hosttrusted** element specifies whether the host associated with the receive handler is trusted.</span></span> <span data-ttu-id="8c2e8-121">En el archivo bindings.xml, se establece el valor predeterminado `false` porque en el ejemplo no se tiene en cuenta el servicio de inicio de sesión único (SSO) empresarial de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="8c2e8-121">In the bindings.xml file, it is set to its default setting of `false` because in this sample we don't care about the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Enterprise Single Sign-On service (SSO).</span></span> <span data-ttu-id="8c2e8-122">SSO permite el paso de credenciales de usuario a través de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] para integrar aplicaciones de terceros en [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="8c2e8-122">SSO allows the passing of user credentials through [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] to integrate third-party applications with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="8c2e8-123">El valor `false` impide que un mensaje de BizTalk pase a través de un servicio de BizTalk como parte del procesamiento de SSO.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-123">A `false` setting prevents a BizTalk message from passing through the BizTalk service as part of the SSO processing.</span></span>  

## <a name="prerequisites"></a><span data-ttu-id="8c2e8-124">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="8c2e8-124">Prerequisites</span></span>  
 <span data-ttu-id="8c2e8-125">Para llevar a cabo los pasos descritos en este ejemplo asegurarse de que el entorno instala los siguientes requisitos previos;</span><span class="sxs-lookup"><span data-stu-id="8c2e8-125">To perform the steps in this sample ensure that your environment installs the following prerequisites;</span></span>  

- <span data-ttu-id="8c2e8-126">El equipo que genera los ensamblados y ejecuta el proceso de implementación tanto el equipo que ejecuta el ejemplo requieren Microsoft [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)], Microsoft [!INCLUDE[netfx40_short](../includes/netfx40-short-md.md)]y Microsoft BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-126">Both the computer that builds the assemblies and runs the deployment process, and the computer that runs the sample, require Microsoft [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)], Microsoft [!INCLUDE[netfx40_short](../includes/netfx40-short-md.md)], and Microsoft BizTalk Server.</span></span>  

- <span data-ttu-id="8c2e8-127">El equipo que se usa para generar los ensamblados y ejecutar el proceso de implementación requiere Microsoft Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-127">The computer used to build the assemblies and run the deployment process requires Microsoft Visual Studio.</span></span>  

- <span data-ttu-id="8c2e8-128">El equipo que ejecuta el ejemplo requiere los adaptadores de [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] y las herramientas de administración de [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)].</span><span class="sxs-lookup"><span data-stu-id="8c2e8-128">The computer that runs the sample requires the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Adapters and the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Administration Tools.</span></span> <span data-ttu-id="8c2e8-129">Estas son opciones para instalar durante la instalación de Microsoft BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-129">These are options to install during setup of Microsoft BizTalk Server.</span></span>  

- <span data-ttu-id="8c2e8-130">En los equipos que use para realizar las tareas administrativas, debe ejecutar una cuenta de usuario que sea miembro del grupo de administradores de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] para configurar los parámetros de aplicación de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] en la consola de administración de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="8c2e8-130">On the computers that you use to perform administrative tasks, you must run as a user account that is a member of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators group to configure the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application settings within the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="8c2e8-131">Esta cuenta de usuario también debe ser miembro del grupo de administradores local para la implementación de la aplicación, la administración de las instancias de host y otras tareas que puedan ser necesarias.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-131">This user account must also be a member of the local Administrators group for application deployment, managing host instances, and other tasks that may be required.</span></span>  

- <span data-ttu-id="8c2e8-132">En cualquier equipo que requiera [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] capacidad, complete el procedimiento de instalación única para la [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] ejemplos en [ http://go.microsoft.com/fwlink/?LinkId=135510 ](http://go.microsoft.com/fwlink/?LinkId=135510).</span><span class="sxs-lookup"><span data-stu-id="8c2e8-132">On any computer that requires [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] capability, complete the one-time setup procedure for the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] samples at [http://go.microsoft.com/fwlink/?LinkId=135510](http://go.microsoft.com/fwlink/?LinkId=135510).</span></span>  

- <span data-ttu-id="8c2e8-133">En el equipo que ejecuta el ejemplo e importa un archivo .msi en [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], asegúrese de que el host no es un host de confianza. De lo contrario, se producirá un error en la importación.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-133">On the computer that runs the sample and imports an .msi file into [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], ensure the host is not a trusted host or the import will fail.</span></span>  

- <span data-ttu-id="8c2e8-134">Debe descargar el código del tutorial y extraerlo en el equipo.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-134">You must download the walkthrough code and extract it to your computer.</span></span>  <span data-ttu-id="8c2e8-135">Este tutorial es una parte de todo el [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] paquete de tutoriales del adaptador.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-135">This walkthrough is a part of the entire [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Adapter Walkthrough package.</span></span> <span data-ttu-id="8c2e8-136">Puede descargar el archivo **WCFAdapterWalkthroughs.exe** desde el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Developer Center en [ http://go.microsoft.com/fwlink/?LinkId=194140 ](http://go.microsoft.com/fwlink/?LinkId=194140).</span><span class="sxs-lookup"><span data-stu-id="8c2e8-136">You can download the file **WCFAdapterWalkthroughs.exe** from the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Developer Center at [http://go.microsoft.com/fwlink/?LinkId=194140](http://go.microsoft.com/fwlink/?LinkId=194140).</span></span>  

### <a name="configure-the-wcfcustommessageprocessing-application-and-artifacts"></a><span data-ttu-id="8c2e8-137">Configuración de la aplicación WCFCustomMessageProcessing y los artefactos</span><span class="sxs-lookup"><span data-stu-id="8c2e8-137">Configure the WCFCustomMessageProcessing application and artifacts</span></span>  

1. <span data-ttu-id="8c2e8-138">En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] consola de administración, haga clic en **aplicaciones**, seleccione **importación**y, a continuación, seleccione **archivo MSI**.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-138">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, right-click **Applications**, select **Import**, and then select **MSI file**.</span></span> <span data-ttu-id="8c2e8-139">Vaya a la **C:\WCFCustomMessageProcessing\WCFCustomMessageProcessing.msi** de archivo y, a continuación, haga clic en **abierto**.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-139">Go to the **C:\WCFCustomMessageProcessing\WCFCustomMessageProcessing.msi** file, and then click **Open**.</span></span> <span data-ttu-id="8c2e8-140">Esto crea los siguientes artefactos para esta aplicación:</span><span class="sxs-lookup"><span data-stu-id="8c2e8-140">This creates the following artifacts for this application:</span></span>  

   - <span data-ttu-id="8c2e8-141">**FileSP** puerto de envío: la ubicación en el sistema de archivos local de **C:\WCFCustomMessageProcessing\Out** donde envía los datos de imagen JPEG [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] como el resultado final del procesamiento del ejemplo.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-141">**FileSP** send port: The location on the local file system of **C:\WCFCustomMessageProcessing\Out** where the JPEG image data is sent by [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] as the final output of the sample processing.</span></span> <span data-ttu-id="8c2e8-142">Puede ver el filtro de puerto de envío de **BTS. RecievePortName = NetTcpRP** configurado en el **propiedades de FileSP** cuadro de diálogo en **filtros**.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-142">You can view the send port filter of **BTS.RecievePortName = NetTcpRP** configured in the **FileSP Properties** dialog box under **Filters**.</span></span> <span data-ttu-id="8c2e8-143">El filtro está asociado con el puerto de recepción NetTcp.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-143">The filter is associated with the NetTcp receive port.</span></span> <span data-ttu-id="8c2e8-144">Ubicación de salida de puerto de envío de los mensajes aceptados en NetTcpRP puerto de recepción se enviarán a la FileSP **C:\WCFCustomMessageProcessing\Out** después de la ubicación de recepción ejecuta el procesamiento de XPath en el mensaje.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-144">Any messages accepted on the NetTcpRP receive port will be sent to the FileSP send port output location of **C:\WCFCustomMessageProcessing\Out** after the receive location executes the XPath processing on the message.</span></span>  

   - <span data-ttu-id="8c2e8-145">**NetTcpRP** puerto de recepción: el puerto que contiene lógicamente el **NetTcpRL** ubicación de recepción.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-145">**NetTcpRP** receive port: The port that logically contains the **NetTcpRL** receive location.</span></span>  

   - <span data-ttu-id="8c2e8-146">**NetTcpRL** ubicación de recepción: se usa el valor predeterminado **PassThroughTransmit** datos entrante de imagen de canalización y el adaptador de WCF-NetTcp para ejecutar una instrucción XPath para extraer la imagen JPEG [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] mensaje.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-146">**NetTcpRL** receive location: This uses the default **PassThroughTransmit** pipeline and the WCF-NetTcp adapter to run an XPath statement to pull the JPEG image data out of the incoming [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] message.</span></span>  

### <a name="alternative-steps-to-configure-the-wcfcustommessageprocessing-application"></a><span data-ttu-id="8c2e8-147">Otros pasos para configurar la aplicación WCFCustomMessageProcessing</span><span class="sxs-lookup"><span data-stu-id="8c2e8-147">Alternative steps to configure the WCFCustomMessageProcessing application</span></span>  

- <span data-ttu-id="8c2e8-148">Como alternativa, estos son los pasos manuales para configurar la aplicación sin usar la **C:\WCFCustomMessageProcessing\bindings.xml** archivo.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-148">Alternatively, here are the manual steps to configure the application without using the **C:\WCFCustomMessageProcessing\bindings.xml** file.</span></span> <span data-ttu-id="8c2e8-149">No es necesario que haga esto si el proceso de importación de archivo de enlace anterior funciona correctamente.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-149">You do not need to do this if the previous binding file import process works correctly.</span></span>  <span data-ttu-id="8c2e8-150">Sin embargo, su lectura le proporcionará información de lo que ocurre con el archivo MSI.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-150">But, reading it may increase your knowledge of what is going on with the MSI file.</span></span>  

- <span data-ttu-id="8c2e8-151">Crear un puerto de recepción unidireccional (**NetTcpRP**) y una ubicación de recepción (**NetTcpRL**).</span><span class="sxs-lookup"><span data-stu-id="8c2e8-151">Create a one-way receive port (**NetTcpRP**) and a receive location (**NetTcpRL**).</span></span>  

  1. <span data-ttu-id="8c2e8-152">Expanda el **WCFCustomMessageProcessing** aplicación, haga clic en **puertos de recepción**, seleccione **New**y seleccione **puerto de recepción unidireccional**.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-152">Expand the **WCFCustomMessageProcessing** application, right-click **Receive Ports**, select **New**, and select **One-way Receive Port**.</span></span> <span data-ttu-id="8c2e8-153">En el **propiedades de puerto de recepción** diálogo cuadro, escriba `NetTcpRP` para **nombre**y haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-153">In the **Receive Port Properties** dialog box, enter `NetTcpRP` for **Name**, and click **OK**.</span></span>  

  2. <span data-ttu-id="8c2e8-154">Haga clic en el **NetTcpRP** puerto de recepción, seleccione **New**y seleccione **ubicación de recepción**.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-154">Right-click the **NetTcpRP** receive port, select **New**, and select **Receive Location**.</span></span> <span data-ttu-id="8c2e8-155">En el **propiedades de ubicación de recepción** diálogo cuadro, escriba `NetTcRL` para **nombre**.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-155">In the **Receive Location Properties** dialog box, enter `NetTcRL` for **Name**.</span></span> <span data-ttu-id="8c2e8-156">En el **transporte** sección, haga clic en el **tipo** cuadro de lista desplegable, seleccione **WCF-NetTcp** desde la lista desplegable y, a continuación, haga clic en **configurar**.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-156">In the **Transport** section, click the **Type** drop-down list box, select **WCF-NetTcp** from the drop-down list, and then click **Configure**.</span></span>  

  3. <span data-ttu-id="8c2e8-157">En el **General** , escriba **TCP://localhost/nettcprl/Image** en el **dirección (URI)** campo.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-157">On the **General** tab, enter **net.tcp://localhost/NetTcpRL/Image** in the **Address(URI)** field.</span></span>  

  4. <span data-ttu-id="8c2e8-158">En el **seguridad** pestaña, establezca el **modo de seguridad** a **ninguno.**</span><span class="sxs-lookup"><span data-stu-id="8c2e8-158">On the **Security** tab, set the **Security mode** to **None.**</span></span>  

  5. <span data-ttu-id="8c2e8-159">En el **mensaje** ficha, seleccione el **ruta** opción para la **cuerpo del mensaje entrante de BizTalk**y escriba `/*[local-name()="SendPicture" and namespace-uri()='http://tempuri.org/']/*[local-name()="stream"]` para la expresión de ruta de cuerpo.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-159">On the **Message** tab, select the **Path** option for the **Inbound BizTalk message body**, and enter `/*[local-name()="SendPicture" and namespace-uri()='http://tempuri.org/']/*[local-name()="stream"]` for the body path expression.</span></span> <span data-ttu-id="8c2e8-160">Seleccione **Base64** como el **codificación de nodo**.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-160">Select **Base64** as the **Node Encoding**.</span></span> <span data-ttu-id="8c2e8-161">El **ruta de acceso** opción se establece en valor porque el cuerpo de la [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] del mensaje que [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] recibe tiene el formato siguiente:  **\<SendPicture xmlns = "http://tempuri.org/"\> \<secuencia\>*real en base 64 codifica los datos de imagen binarios*\</transmitir\>\</SendPicture\>**</span><span class="sxs-lookup"><span data-stu-id="8c2e8-161">The **Path** option is set to value because the body of the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] message that [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] receives is in the following format: **\<SendPicture xmlns="http://tempuri.org/"\>\<stream\>*actual base 64 encoded binary image data*\</stream\>\</SendPicture\>**</span></span>  

  6. <span data-ttu-id="8c2e8-162">En el **propiedades de ubicación de recepción** cuadro de diálogo, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-162">In the **Receive Location Properties** dialog box, click **OK**.</span></span>  

- <span data-ttu-id="8c2e8-163">Cree un puerto de envío de archivos unidireccional (FileSP) suscrito al puerto de recepción NetTcpRP.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-163">Create a one-way file send port (FileSP) subscribed to the NetTcpRP receive port.</span></span>  

  1.  <span data-ttu-id="8c2e8-164">Haga clic en **puertos de envío**, seleccione **New**y seleccione **puerto de recepción unidireccional**.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-164">Right-click **Send Ports**, select **New**, and select **One-way Receive Port**.</span></span> <span data-ttu-id="8c2e8-165">Seleccione **Puerto unidireccional estático**.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-165">Select **Static One-way Port**.</span></span> <span data-ttu-id="8c2e8-166">Escriba `FileSP` para **nombre**.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-166">Enter `FileSP` for **Name**.</span></span>  

  2.  <span data-ttu-id="8c2e8-167">En el **transporte** sección, haga clic en el **tipo** cuadro de lista desplegable, seleccione **archivo** desde la lista desplegable y, a continuación, haga clic en **configurar**.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-167">In the **Transport** section, click the **Type** drop-down list box, select **FILE** from the drop-down list, and then click **Configure**.</span></span>  

  3.  <span data-ttu-id="8c2e8-168">En **carpeta de destino** escriba `C:\WCFCustomMessageProcessing\Out`y haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-168">Under **Destination Folder** enter `C:\WCFCustomMessageProcessing\Out`, and click **OK**.</span></span>  

  4.  <span data-ttu-id="8c2e8-169">Haga clic en **filtros**, seleccione `BTS.ReceivePortName == NetTcpRP`y, a continuación, haga clic en **Aceptar.**</span><span class="sxs-lookup"><span data-stu-id="8c2e8-169">Click **Filters**, select `BTS.ReceivePortName == NetTcpRP`, and then click **OK.**</span></span>  

### <a name="configure-the-send-port-and-run-the-application"></a><span data-ttu-id="8c2e8-170">Configuración del puerto de envío y ejecución de la aplicación</span><span class="sxs-lookup"><span data-stu-id="8c2e8-170">Configure the send port and run the application</span></span>  

1. <span data-ttu-id="8c2e8-171">Haga clic en el **WCFCustomMessageProcessing** aplicación y seleccione **iniciar**.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-171">Right-click the **WCFCustomMessageProcessing** application and select **Start**.</span></span> <span data-ttu-id="8c2e8-172">Esto dará de alta la ubicación de recepción NetTcpRL e iniciará el puerto de envío FileSP.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-172">That will enlist the NetTcpRL receive location and start the FileSP send port.</span></span>  

2. <span data-ttu-id="8c2e8-173">En [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], abra el `Client.sln` de archivos desde el **c: wcfcustommessageprocessing\client** carpeta.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-173">In [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], open up the `Client.sln` file from the **C:WCFCustomMessageProcessing\Client** folder.</span></span> <span data-ttu-id="8c2e8-174">En el Explorador de soluciones, haga clic en el **cliente** del proyecto y seleccione **compilar**.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-174">In Solution Explorer, right-click the **Client** project and select **Build**.</span></span>  

3. <span data-ttu-id="8c2e8-175">En [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], seleccione **depurar**y, a continuación, seleccione **iniciar sin depurar** para ejecutar la aplicación Client.exe.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-175">In [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], select **Debug**, and then select **Start Without Debugging** to run the Client.exe application.</span></span> <span data-ttu-id="8c2e8-176">Aparecerá un símbolo del sistema que indica que la imagen se envió a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="8c2e8-176">A command prompt will appear saying the image was submitted to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span>  

4. <span data-ttu-id="8c2e8-177">Observe la salida del archivo {GUID} .jpg correcta en la carpeta de archivos de puerto de envío de **C:\WCFCustomMessageProcessing\Out**. Esto muestra que el procesamiento de la aplicación para extraer el archivo JPEG y escribirlo en un puerto de envío de archivos se completó correctamente.</span><span class="sxs-lookup"><span data-stu-id="8c2e8-177">Observe the successful {GUID}.jpg file output to the send port file folder of **C:\WCFCustomMessageProcessing\Out**. This shows that the application processing to extract the JPEG file and write it out to a FILE send port completed successfully.</span></span>

---
title: Solución de problemas de certificados | Documentos de Microsoft
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: b7013db6-ebf7-4294-a072-e9b5b0ad0de2
caps.latest.revision: 26
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 963dfdd55937fd3e41fa50a5e2a609dd591f728f
ms.sourcegitcommit: 5abd0ed3f9e4858ffaaec5481bfa8878595e95f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/28/2017
ms.locfileid: "25975970"
---
# <a name="troubleshooting-certificates"></a>Solucionar problemas de certificados
Microsoft [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] puede hacer uso de certificados digitales de infraestructura de clave pública (PKI) a efectos de cifrado y descifrado de documentos, firma y comprobación de documento (no rechazo), así como para la resolución de entidades. En este tema se describen varias opciones de configuración y de escenarios de uso de certificación, además de proporcionar algunas instrucciones generales para el uso de certificados digitales con [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].  
  
## <a name="certificate-usage-scenarios-and-configuration-options"></a>Opciones de configuración y de escenarios de uso de certificado  
 La mayoría de los problemas que se producen durante el uso de certificados con [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] son el resultado de una configuración incorrecta o incompleta. Por ejemplo, la importación del certificado correcto en el almacén de certificados erróneo, el certificado incorrecto en el almacén correcto o error al especificar la información correspondiente en la consola de administración de BizTalk, harán que se produzcan errores en tiempo de ejecución al usar los certificados.  
  
 Use la siguiente tabla como referencia para las opciones de configuración y de escenarios de uso de certificados disponibles en [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]:  
  
|**Uso de certificados**|**Contexto de usuario**|**Ubicación de almacén de certificados**|**Tipo de certificado**|**Componente de canalización usado**|**Parámetros de configuración de la consola de administración de BizTalk Server**|  
|---------------------------|----------------------|------------------------------------|--------------------------|---------------------------------|-------------------------------------------------------------------------------|  
|Cifrado (envío)|Cuenta usada por la instancia de host asociada al controlador de envío|Inicie sesión en cada equipo que ejecuta [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] que alojarán las canalizaciones de codificador de S/MIME e importe el certificado de cifrado en el **equipo Local \ otras personas** almacenar.|Certificado público de socio comercial|Codificador de MIME/SMIME|-Especifique valores para el certificado de cifrado **nombre común** y **huella digital** en el **certificado** página de la **propiedades de puerto de envío**cuadro de diálogo.<br />-Especifique canalización **Encode** opciones en el **configurar canalización** cuadro de diálogo. El **configurar canalización** se muestra el cuadro de diálogo haciendo clic en el botón junto a la **canalización de envío** la lista desplegable en el **General** página de la **enviar Propiedades de puerto** cuadro de diálogo.|  
|Descifrado (recepción)|Cuenta usada por la instancia de host asociada al controlador de recepción|Inicie sesión en cada equipo que ejecuta [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] que se alojarán las canalizaciones de descodificador de S/MIME como cada cuenta de servicio de la instancia de host e importe el certificado de descifrado para el **usuario actual \ Personal** almacenar. **Nota:** para que el descifrado de canalización se complete correctamente en un equipo con IIS 7.0, asegúrese de que la cuenta para el grupo de aplicaciones de IIS y la cuenta utilizada por la instancia de host asociada con el controlador de recepción son los mismos y que esta cuenta es miembro de la \<machineName\>grupo \IIS_WPG. Para obtener más información acerca de cómo establecer la identidad de proceso IIS para IIS 7.0, vea [directrices para resolver problemas de permisos de IIS](../core/guidelines-for-resolving-iis-permissions-problems.md). Estos procesos se deben ejecutar en la misma cuenta para comprobar que se carga el perfil de cuenta que, a su vez, carga las claves de registro necesarias para llevar a cabo el descifrado en la canalización. Por motivos de rendimiento, IIS 6.0 no carga el perfil de cuenta al iniciar el proceso w3wp.exe asociado, de modo que la instancia de host de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] debe configurarse con la misma cuenta, para que [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] cargue el perfil de cuenta y las claves de Registro.|Certificado privado propio|Descodificador de MIME/SMIME|-Especifique valores para el certificado de descifrado **nombre común** y **huella digital** en el **certificados** página de cada **propiedades de Host**cuadro de diálogo.<br />-Especifique canalización **Decode** opciones en el **configurar canalización** cuadro de diálogo. El **configurar canalización** se muestra el cuadro de diálogo haciendo clic en el botón junto a la **canalización de recepción** la lista desplegable en el **General** página de la  **Propiedades de la ubicación de recepción** cuadro de diálogo.|  
|Firma (envío)|Cuenta usada por la instancia de host asociada al controlador de envío|Inicie sesión en cada equipo que ejecuta [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] que se alojarán las canalizaciones de codificador de S/MIME como cada cuenta de servicio de la instancia de host e importe el certificado de firma para el **usuario actual \ Personal** almacenar.|Certificado privado propio|Codificador de MIME/SMIME|-Especifique valores para el certificado de firma **nombre común** y **huella digital** en el **certificado** página de la **propiedades de grupo de BizTalk**cuadro de diálogo. **Nota:** sólo un certificado de firma se puede especificar por cada [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] grupo.<br />-Especifique canalización **Encode** opciones en el **configurar canalización** cuadro de diálogo. El **configurar canalización** se muestra el cuadro de diálogo haciendo clic en el botón junto a la **canalización de envío** la lista desplegable en el **General** página de la **enviar Propiedades de puerto** cuadro de diálogo.|  
|Comprobación de firma (recepción)|Cuenta usada por la instancia de host asociada al controlador de recepción|Inicie sesión en cada equipo que ejecuta [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] que alojarán las canalizaciones de descodificador de S/MIME e importe el certificado de firma en el **equipo Local \ otras personas** almacenar.|Certificado público de socio comercial|Descodificador de MIME/SMIME|-Especifique valores para el certificado de verificación **nombre común** y **huella digital** en el **certificados** página de cada **propiedades de la entidad**cuadro de diálogo.<br />-Especifique canalización **Decode** opciones en el **configurar canalización** cuadro de diálogo. El **configurar canalización** se muestra el cuadro de diálogo haciendo clic en el botón junto a la **canalización de recepción** la lista desplegable en el **General** página de la  **Propiedades de la ubicación de recepción** cuadro de diálogo. **Nota:** configuración de la **Decode** opción requiere que se implemente una canalización con el componente de descodificador MIME/SMIME.|  
|Resolución de entidades (recepción)|Cuenta usada por la instancia de host asociada al controlador de recepción|Inicie sesión en el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] equipo de la entidad que se está configurando la resolución e importe el certificado en el **equipo Local \ otras personas** almacenar.|Certificado público de socio comercial|Resolución de entidades|-Especifique valores para el certificado **nombre común** y **huella digital** en el **certificados** página de cada **propiedades de Host** cuadro de diálogo .<br />-Especifique **ResolveParty** opciones en el **configurar canalización** cuadro de diálogo. El **configurar canalización** se muestra el cuadro de diálogo haciendo clic en el botón junto a la **canalización de recepción** la lista desplegable en el **General** página de la  **Propiedades de la ubicación de recepción** cuadro de diálogo. **Nota:** configuración de esta opción requiere el uso de una canalización que contiene el **la resolución de entidades** componente. El **XMLReceive** canalización contiene la **la resolución de entidades** componente.|  
|HTTPS (envío)|Cuenta usada por la instancia de host asociada al controlador de envío|La comunicación SSL no necesita un certificado de cliente. En caso de que sea necesario un certificado de cliente, será a discreción del administrador de servidor Web de destino. Si el servidor Web de destino necesita un certificado de cliente, realice los siguientes pasos:<br /><br /> : Obtenga el certificado público del socio comercial.<br />-Log en cada equipo que ejecuta [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] como la cuenta utilizada por la instancia de host asociada con el controlador de envío.<br />-Importe el certificado en el **usuario actual \ Personal** almacenar.<br /><br /> Para obtener información sobre cómo obtener un certificado mediante las páginas Web de servicios de Certificate Server de Windows Server 2008, consulte [solicitar un certificado Over the Web](http://go.microsoft.com/fwlink/?LinkId=129628).|Certificado público de socio comercial|N/D|-   **Transporte HTTP** : Configure la **huella digital de certificado de cliente SSL** opción el **autenticación** pestaña de la **propiedades de transporte HTTP** cuadro de diálogo . El **propiedades de transporte HTTP** se muestra el cuadro de diálogo, haga clic en el **configurar** situado en la **General** página de la **propiedades de puerto de envío** cuadro de diálogo.<br />-   **Transporte SOAP** : Configure la **huella digital del certificado de cliente** opción el **General** pestaña de la **propiedades de transporte SOAP** cuadro de diálogo. El **propiedades de transporte SOAP** se muestra el cuadro de diálogo, haga clic en el **configurar** situado en la **General** página de la **propiedades de puerto de envío** cuadro de diálogo.|  
  
#### <a name="to-display-the-certificates-management-console-interface-for-local-computer-and-current-user"></a>Para mostrar la interfaz de la consola de administración de certificados de Equipo local y Usuario actual  
  
1.  Haga clic en **iniciar**, haga clic en **ejecutar**, tipo **MMC**y haga clic en **Aceptar** para abrir el **Microsoft Management Console**.  
  
2.  Haga clic en el **archivo** menú y, a continuación, haga clic en **agregar o quitar complemento** para mostrar la **agregar o quitar complemento** cuadro de diálogo.  
  
3.  Seleccione **certificados** en la lista de complementos disponibles y haga clic en **agregar**.  
  
4.  Seleccione **cuenta de equipo**, haga clic en **siguiente**y, a continuación, haga clic en **finalizar**. Esto agregará la **consola de administración de certificados** interfaz para **equipo Local**.  
  
5.  Asegúrese de que **certificados** sigue seleccionado en la lista de complementos y, a continuación, haga clic en **agregar** nuevo.  
  
6.  Seleccione **mi cuenta de usuario** y, a continuación, haga clic en **finalizar**. Esto agregará la **consola de administración de certificados** interfaz para **usuario actual**.  
  
    > [!NOTE]
    >  Esto muestra la **consola de administración de certificados** para la cuenta que han iniciado sesión como. Si es necesario importar certificados en el almacén Personal para una cuenta de servicio, primero debe iniciar sesión con las credenciales de la cuenta de servicio.  
  
7.  Haga clic en el **Aceptar** situado en la **agregar o quitar complemento** cuadro de diálogo.  
  
## <a name="general-guidelines"></a>Directrices generales  
  
-   **Asegúrese de que el certificado importado se usa para el propósito planteado**: para ello, haga doble clic en el certificado en el **consola de administración de certificados** de interfaz y, a continuación, haga clic en el **detalles**  pestaña de la **certificado** cuadro de diálogo. A continuación, haga clic en el **todos los** opción para la **mostrar** lista desplegable y, a continuación, haga clic para seleccionar la **EKU** o **uso mejorado de clave** campos Para comprobar el fin previsto. Si [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] trata de usar un certificado con un fin distinto al previsto, se producirá un error en tiempo de ejecución.  
  
-   **Pruebe la conexión al sitio Web de destino**: si está usando SSL, asegúrese de que puede conectarse al sitio Web de destino con Internet Explorer antes de intentar conectarse al sitio Web de destino con los transportes HTTP o SOAP. Compruebe que ningún cuadro de diálogo se muestran en el Explorador de Internet cuando se conecta al sitio Web de destino. [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]no tiene ningún mecanismo para interactuar con los cuadros de diálogo que pueden aparecer al conectarse al sitio web de destino. Un cuadro de diálogo puede mostrarse de Internet Explorer si el nombre del sitio web de destino no coincide con el nombre especificado para el sitio web en el certificado SSL o si la entidad de certificación de raíz para el certificado SSL no está en la correspondiente **raíz de confianza Entidades de certificación** almacenar.  
  
-   **Use la herramienta de diagnóstico de SSL para analizar problemas de conexión de SSL:** herramienta el diagnóstico de SSL es un componente opcional del Kit de herramientas de diagnóstico de IIS.  Descargar el Kit de herramientas de diagnóstico IIS de [herramientas de diagnóstico de los servicios de Internet Information Server](http://go.microsoft.com/fwlink/?LinkId=64426).  
  
-   **Asegúrese de que el certificado es válido**. [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]no le informará si el certificado ha expirado. En lugar de ello, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] suspenderá el mensaje.  
  
## <a name="see-also"></a>Vea también  
 [Certificados de cifrado y de firma](../core/encryption-and-signing-certificates.md)
---
title: PartyResolution (ejemplo de BizTalk Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- examples, parties
- orchestrations, examples
- parties, examples
- parties, orchestrations
- examples, routing
- orchestrations, parties
- examples, orchestrations
- examples, messages
- routing, messages
- messages, routing
ms.assetid: 220e6bc5-6f04-4f37-b0d0-f11c2cc14422
caps.latest.revision: 33
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 35334b61199d758a5eafe8623ea576a047799925
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/27/2018
ms.locfileid: "36984437"
---
# <a name="partyresolution-biztalk-server-sample"></a><span data-ttu-id="5cfe5-102">PartyResolution (ejemplo de BizTalk Server)</span><span class="sxs-lookup"><span data-stu-id="5cfe5-102">PartyResolution (BizTalk Server Sample)</span></span>
<span data-ttu-id="5cfe5-103">En el ejemplo de PartyResolution se muestra cómo utilizar orquestaciones de BizTalk con resolución de entidades para enrutar mensajes a uno de los dos destinatarios posibles.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-103">The PartyResolution sample demonstrates how to use BizTalk orchestrations with party resolution to route messages to one of two possible recipients.</span></span>  

## <a name="what-this-sample-does"></a><span data-ttu-id="5cfe5-104">Descripción del ejemplo</span><span class="sxs-lookup"><span data-stu-id="5cfe5-104">What This Sample Does</span></span>  
 <span data-ttu-id="5cfe5-105">En este ejemplo se ejecutan varias orquestaciones que muestran los distintos roles siguientes:</span><span class="sxs-lookup"><span data-stu-id="5cfe5-105">This sample runs multiple orchestrations that demonstrate the following different roles:</span></span>  

-   <span data-ttu-id="5cfe5-106">Orquestación del comprador, que se  utiliza para iniciar el procesamiento de mensajes de pedidos.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-106">Buyer orchestration, used to initiate the purchase order (PO) message processing.</span></span>  

-   <span data-ttu-id="5cfe5-107">Orquestación del proveedor, que muestra tanto la resolución de entidades entrantes como salientes.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-107">Supplier orchestration, which demonstrates both inbound and outbound party resolution.</span></span>  

-   <span data-ttu-id="5cfe5-108">Orquestaciones ShipmentAgency1 y ShipmentAgency2, que responden a la orquestación del proveedor basada en el destino de envío del pedido.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-108">ShipmentAgency1 and ShipmentAgency2 orchestrations, which respond to the supplier orchestration based on the shipment destination in the PO.</span></span>  

## <a name="how-this-sample-is-designed-and-why"></a><span data-ttu-id="5cfe5-109">Cómo se ha diseñado este ejemplo y por qué</span><span class="sxs-lookup"><span data-stu-id="5cfe5-109">How This Sample is Designed and Why</span></span>  
 <span data-ttu-id="5cfe5-110">La resolución de entidades se refiere al proceso de determinar quién envía un mensaje (es decir, qué entidad).</span><span class="sxs-lookup"><span data-stu-id="5cfe5-110">Party resolution refers to the process of determining who (that is, what party) sends a message.</span></span> <span data-ttu-id="5cfe5-111">Por ejemplo, es posible que desee habilitar a enviar mensajes solo a las entidades conocidas.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-111">For example, you may want to enable only known parties to send a message.</span></span> <span data-ttu-id="5cfe5-112">La resolución de entidades salientes es el proceso por el que se determina a qué entidades se les debería enviar un mensaje.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-112">Outbound party resolution is the process by which you determine which parties should be sent a message.</span></span>  

 <span data-ttu-id="5cfe5-113">Además de la resolución de entidades, en este ejemplo se muestra cómo implementar y usar roles.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-113">In addition to party resolution, this sample demonstrates how to implement and use roles.</span></span> <span data-ttu-id="5cfe5-114">Por ejemplo, para procesar el envío de su producto, se crea un puerto de envío al que se envía un documento para indicar al remitente que envíe su producto.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-114">For example, to process the shipment of your product, you create a send port to which you send a document instructing a shipper to ship your product.</span></span> <span data-ttu-id="5cfe5-115">Si tiene que elegir entre varios remitentes, puede crear un rol de remitente en su orquestación en vez de crear varios puertos de envío cuya única diferencia sea la dirección URL del remitente.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-115">If you have multiple shippers to choose from, you can create a shipper role in your orchestration rather than create multiple send ports whose only difference is the shipper's URL.</span></span> <span data-ttu-id="5cfe5-116">Puede enviar mensajes relacionados con el envío del producto al rol de remitente.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-116">You can then send messages relating to product shipment to the shipper role.</span></span> <span data-ttu-id="5cfe5-117">Cree entidades y asocie un puerto de envío a cada entidad y certificado de entidades.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-117">You create parties and associate a send port to each party and party certificate.</span></span> <span data-ttu-id="5cfe5-118">Por último, dé de alta cada entidad al rol de remitente para habilitarla.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-118">Finally, you enlist each party to the shipper role to enable it.</span></span> <span data-ttu-id="5cfe5-119">En la orquestación, puede especificar dinámicamente a qué remitente está enviando el mensaje.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-119">In the orchestration, you can then dynamically specify which shipper you are sending the message to.</span></span>  

 <span data-ttu-id="5cfe5-120">Este ejemplo también muestra cómo utilizar correlaciones para que el mensaje entrante coincida con la instancia de orquestación derecha.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-120">This sample also demonstrates how to use correlation to match the incoming message to the right orchestration instance.</span></span>  

- <span data-ttu-id="5cfe5-121">A continuación se muestran los flujos de procesos empresariales para el comprador, el proveedor y las agencias de envío:</span><span class="sxs-lookup"><span data-stu-id="5cfe5-121">The business process flows for the buyer, supplier, and shipping agencies are as follows:</span></span>  

- <span data-ttu-id="5cfe5-122">Flujo de procesos empresariales del comprador:</span><span class="sxs-lookup"><span data-stu-id="5cfe5-122">Buyer business process flow:</span></span>  

  1.  <span data-ttu-id="5cfe5-123">Recibir mensajes de pedido de departamentos internos como archivo .xml.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-123">Receive PO message from internal department as an .xml file.</span></span>  

  2.  <span data-ttu-id="5cfe5-124">Enviar mensajes de pedido al proveedor.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-124">Send PO message to supplier.</span></span>  

- <span data-ttu-id="5cfe5-125">Flujo de procesos empresariales del proveedor:</span><span class="sxs-lookup"><span data-stu-id="5cfe5-125">Supplier business process flow:</span></span>  

  1.  <span data-ttu-id="5cfe5-126">Resuelve la entidad (resolución de entidad entrante) para actualizar la entidad de origen basada en el certificado de firma.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-126">Resolve the party (inbound party resolution) to update the source party based on signature certificate.</span></span>  

  2.  <span data-ttu-id="5cfe5-127">Recibir un mensaje de activación (pedido) del comprador.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-127">Receive an activation message (PO) from buyer.</span></span>  

  3.  <span data-ttu-id="5cfe5-128">Enviar un mensaje de confirmación de pedido al comprador.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-128">Send a PO Acknowledgement message to buyer.</span></span>  

  4.  <span data-ttu-id="5cfe5-129">Comprobar el país de entrega.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-129">Verify the delivery country/region.</span></span>  

  5.  <span data-ttu-id="5cfe5-130">Resolver la entidad saliente para encontrar la agencia de envío que se va a utilizar.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-130">Resolve the outbound party to find which shipping agency to use.</span></span> <span data-ttu-id="5cfe5-131">Si EE.UU. es el país, la agencia de envío es ShipmentAgency2.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-131">If the country/region is U.S., the shipping agency is ShipmentAgency2.</span></span> <span data-ttu-id="5cfe5-132">Si Canadá es el país, la agencia de envío es ShipmentAgency1.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-132">If the country/region is Canada, the shipping agency is ShipmentAgency1.</span></span>  

  6.  <span data-ttu-id="5cfe5-133">Enviar un mensaje de solicitud de envío de pedido a la agencia de envío correspondiente.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-133">Send a Shipment Order Request message to the appropriate shipping agency.</span></span>  

  7.  <span data-ttu-id="5cfe5-134">Recibir el mensaje de confirmación de envío de pedido de la agencia de envío correspondiente.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-134">Receive the Shipment Order Acknowledgement message from the appropriate shipping agency.</span></span>  

  8.  <span data-ttu-id="5cfe5-135">Enviar un mensaje de consejo de envío a la agencia de envío correspondiente.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-135">Send a Shipment Advice message to the appropriate shipping agency.</span></span>  

  9. <span data-ttu-id="5cfe5-136">Recibir un mensaje de confirmación de consejo de envío de la agencia de envío correspondiente.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-136">Receive a Shipment Advice Acknowledgement message from the appropriate shipping agency.</span></span>  

  10. <span data-ttu-id="5cfe5-137">Enviar un mensaje final de notificación de entrega de pedido al comprador.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-137">Send a final PO Delivery Receipt message to the buyer.</span></span>  

- <span data-ttu-id="5cfe5-138">Flujo de procesos empresariales de la agencia de envío (igual para las dos agencias de envío):</span><span class="sxs-lookup"><span data-stu-id="5cfe5-138">Shipping agency business process flow (same for both shipping agencies):</span></span>  

  1.  <span data-ttu-id="5cfe5-139">Recibir el mensaje de solicitud de envío de pedido del proveedor.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-139">Receive the Shipment Order Request message from the supplier.</span></span>  

  2.  <span data-ttu-id="5cfe5-140">Generar y enviar un mensaje de confirmación para el mensaje de solicitud de envío de pedido.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-140">Generate and send an Acknowledgement message for the Shipment Order Request message.</span></span>  

  3.  <span data-ttu-id="5cfe5-141">Recibir un mensaje de consejo de envío del proveedor.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-141">Receive a Shipment Advice message from the supplier.</span></span>  

  4.  <span data-ttu-id="5cfe5-142">Generar y enviar un mensaje de confirmación para el mensaje de consejo de envío.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-142">Generate and send an Acknowledgement message for the Shipment Advice message.</span></span>  

  <span data-ttu-id="5cfe5-143">Las instrucciones siguientes explican cómo se diseña este ejemplo:</span><span class="sxs-lookup"><span data-stu-id="5cfe5-143">The following statements explain how this sample is designed:</span></span>  

- <span data-ttu-id="5cfe5-144">La orquestación BuyerProcess.odx recibe un mensaje y utiliza la canalización personalizada MimePartyResSendPipeline para codificar el mensaje y enviarlo al proveedor.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-144">The BuyerProcess.odx orchestration receives a message and uses the custom pipeline MimePartyResSendPipeline to encode the message and send it to the supplier.</span></span> <span data-ttu-id="5cfe5-145">Esta operación se realiza mediante el Diseñador de canalizaciones para generar e implementar una canalización de envío personalizada.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-145">This is done by using Pipeline Designer to build and deploy a custom send pipeline.</span></span> <span data-ttu-id="5cfe5-146">Antes de enviar el mensaje al proveedor, el mensaje se firma digitalmente con la clave privada del comprador que se especifica en Propiedades del grupo de BizTalk de la consola de administración de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="5cfe5-146">Before sending the message to the supplier, the message is digitally signed with buyer's private key, which is specified in BizTalk Group Properties in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span>  

- <span data-ttu-id="5cfe5-147">La orquestación SupplierProcess.odx utiliza la canalización personalizada MimePartyResReceivePipeline, que incluye un componente descodificador de MIME/SMIME para descodificar el mensaje y realizar resolución de entidades entrantes mediante la clave pública del comprador para resolver y validar la identidad del comprador.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-147">The SupplierProcess.odx orchestration uses the custom pipeline MimePartyResReceivePipeline, which includes a MIME/SMIME decoder component, to decode the message and perform inbound party resolution by using the buyer's public key to resolve and validate the buyer's identity.</span></span> <span data-ttu-id="5cfe5-148">Esta operación se realiza al generar e implementar una canalización de recepción personalizada.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-148">This is done by building and deploying a custom receive pipeline.</span></span>  

- <span data-ttu-id="5cfe5-149">La orquestación del proveedor inicia el POCorrelationSets, que está definido para que se base en una propiedad promocionada PONo.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-149">The supplier orchestration then initiates the POCorrelationSets which is defined to base on a promoted property - PONo.</span></span> <span data-ttu-id="5cfe5-150">La propiedad PONo se utiliza para que coincidan los mensajes entrantes y salientes de esta instancia de orquestación en la fase posterior, ya que existen varias acciones de envío y recepción a través de toda la orquestación.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-150">The PONo is used to match the inbound and outbound messages to this orchestration instance in the later stage, because there are multiple send and receive actions throughout the entire orchestration.</span></span>  

- <span data-ttu-id="5cfe5-151">La orquestación del proveedor implementa vínculos de rol para que se ocupen de la resolución de entidades entrantes y salientes.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-151">The supplier orchestration implements role links to deal with inbound and outbound party resolution.</span></span> <span data-ttu-id="5cfe5-152">La orquestación del proveedor usa dos tipos de vínculo de rol:</span><span class="sxs-lookup"><span data-stu-id="5cfe5-152">The supplier orchestration uses two role link types:</span></span>  

  -   <span data-ttu-id="5cfe5-153">Tipo de vínculo de rol Buyer_Supplier</span><span class="sxs-lookup"><span data-stu-id="5cfe5-153">Buyer_Supplier role link type</span></span>  

  -   <span data-ttu-id="5cfe5-154">Tipo de vínculo de rol Supplier_Shipment</span><span class="sxs-lookup"><span data-stu-id="5cfe5-154">Supplier_Shipment role link type</span></span>  

- <span data-ttu-id="5cfe5-155">En el Buyer_Supplier **vínculo de función** forma, el proveedor se encuentra en el rol de proveedor y el comprador se encuentra en el rol de consumidor porque el proveedor recibe el primer mensaje del comprador.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-155">In the Buyer_Supplier **Role Link** shape, the supplier is in the Provider role and the buyer is in the Consumer role because the supplier receives the first message from the buyer.</span></span> <span data-ttu-id="5cfe5-156">Cuando la orquestación del proveedor envía la confirmación al rol de comprador, hay un puerto de envío asociado al comprador, y se envía el mensaje al comprador a través del puerto de envío especificado.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-156">When the supplier orchestration sends the acknowledgment to the buyer role, there is a send port associated with the buyer, and the message is sent to the buyer through the specified send port.</span></span> <span data-ttu-id="5cfe5-157">Para buscar el puerto de envío, haga clic en **BuyerAgency** en el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] consola de administración y, a continuación, haga clic en **propiedades**.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-157">To find the send port, right-click **BuyerAgency** in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console and then click **Properties**.</span></span> <span data-ttu-id="5cfe5-158">El puerto de envío se muestra bajo **puertos de envío**.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-158">The send port is displayed under **Send Ports**.</span></span>  

- <span data-ttu-id="5cfe5-159">Después, la orquestación utiliza la expresión siguiente para devolver la información de socios comerciales y escribe un archivo XML en una carpeta mediante una llamada a un ensamblado externo denominado CheckPartyName.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-159">The orchestration then uses the following expression to return the partner information, and writes an XML file to a folder through a call to an external assembly named CheckPartyName.</span></span>  

  ```  
  Buyer_Supplier(Microsoft.XLANGs.BaseTypes.SourceParty)  
  ```  

- <span data-ttu-id="5cfe5-160">En el Supplier_Shipment **vínculo de función** forma, el rol de envío contiene un puerto de envío con dos operaciones que se usan para enviar el mensaje del proveedor a la Agencia de envío adecuado según la entidad de destino.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-160">In the Supplier_Shipment **Role Link** shape, the Shipment role contains a send port with two operations that are used to send the message from the supplier to the appropriate shipping agency depending on the destination party.</span></span> <span data-ttu-id="5cfe5-161">El rol de proveedor contiene un puerto de recepción con dos operaciones que se usan para recibir la respuesta de la agencia de envío.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-161">The Supplier role contains a receive port with two operations that are used to receive the response from the shipping agency.</span></span> <span data-ttu-id="5cfe5-162">La correlación se utiliza al enviar y recibir estos mensajes y se basa en el PONo.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-162">The correlation is used when sending and receiving these messages, and it is based on the PONo.</span></span>  

  > [!NOTE]
  >  <span data-ttu-id="5cfe5-163">Al enlazar la orquestación del proveedor, se encontrará con que solo es necesario que se enlace un puerto de envío y dos puertos de recepción.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-163">When you bind the supplier orchestration, you will find that only one send port and two receive ports need to be bound.</span></span> <span data-ttu-id="5cfe5-164">Esto se debe a que los puertos de envío de las entidades de destino ya están enlazados con las entidades.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-164">This is because the send ports to the destination parties are already bound with the parties.</span></span> <span data-ttu-id="5cfe5-165">Además, uno de los puertos de recepción en la orquestación contiene dos operaciones de recepción, por lo que aunque vea tres **recepción** formas, sólo dos de ellos deben estar enlazados.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-165">Moreover, one of the receive ports in the orchestration contains two receive operations, so even if you see three **Receive** shapes, only two of them need to be bound.</span></span>  

- <span data-ttu-id="5cfe5-166">La orquestación del proveedor utiliza la primera línea en el código siguiente para obtener la agencia de envío llamando a un ensamblado externo denominado QueryShipmentCatalogComponent.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-166">The supplier orchestration uses the first line in the following code to get the shipment agency by calling an external assembly named QueryShipmentCatalogComponent.</span></span> <span data-ttu-id="5cfe5-167">A continuación, usa la segunda línea para establecer la entidad de destino del rol de envío.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-167">It then uses the second line to set the destination party for the shipment role.</span></span>  

  ```  
  strShipmentName= objQueryShipmentCatalog.GetShipmentDetails(POMessage.MessagePart_1.POHeader.Address.Country);  
  Supplier_Shipment(Microsoft.XLANGs.BaseTypes.DestinationParty) = new Microsoft.XLANGs.BaseTypes.Party(strShipmentName,"OrganizationName");  
  ```  

- <span data-ttu-id="5cfe5-168">Shipper1Process.odx y Shipper2Process.odx se generan para recibir el pedido de envío y el consejo de envío de SupplierProcess.odx y enviar la respuesta de nuevo a SupplierProcess.odx.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-168">Shipper1Process.odx and Shipper2Process.odx are built to receive the shipping order and the shipping advice from SupplierProcess.odx and to send the response back to SupplierProcess.odx.</span></span> <span data-ttu-id="5cfe5-169">En las dos orquestaciones de remitente, se utiliza la correlación y el tipo de correlación se basa en la propiedad promocionada PONo.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-169">In both of the shipper orchestrations, correlation is used, and the correlation type is based on the promoted property PONo.</span></span>  

## <a name="where-to-find-this-sample"></a><span data-ttu-id="5cfe5-170">Ubicación del ejemplo</span><span class="sxs-lookup"><span data-stu-id="5cfe5-170">Where to Find This Sample</span></span>  
 <span data-ttu-id="5cfe5-171">*\<Ejemplos de la ruta de acceso\>* \Orchestrations\PartyResolution\\</span><span class="sxs-lookup"><span data-stu-id="5cfe5-171">*\<Samples Path\>* \Orchestrations\PartyResolution\\</span></span>  

 <span data-ttu-id="5cfe5-172">En la tabla siguiente se enumeran los archivos del ejemplo y se describe su propósito.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-172">The following table shows the files in this sample and describes their purpose.</span></span>  


|                                                                                                                                 <span data-ttu-id="5cfe5-173">Archivos</span><span class="sxs-lookup"><span data-stu-id="5cfe5-173">File(s)</span></span>                                                                                                                                 |                                                                                                                                                              <span data-ttu-id="5cfe5-174">Descripción</span><span class="sxs-lookup"><span data-stu-id="5cfe5-174">Description</span></span>                                                                                                                                                              |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                                                                                      <span data-ttu-id="5cfe5-175">BuyerBinding.xml ShippingAgency1Binding.xml, ShippingAgency2Binding.xml, SupplierBinding.xml,</span><span class="sxs-lookup"><span data-stu-id="5cfe5-175">BuyerBinding.xml, ShippingAgency1Binding.xml, ShippingAgency2Binding.xml, SupplierBinding.xml</span></span>                                                                                      |                                                                                                                                            <span data-ttu-id="5cfe5-176">Se usa para la instalación automatizada, como el enlace de puerto.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-176">Used for automated setup such as port binding.</span></span>                                                                                                                                             |
|                                                                                                                               <span data-ttu-id="5cfe5-177">Cleanup.bat</span><span class="sxs-lookup"><span data-stu-id="5cfe5-177">Cleanup.bat</span></span>                                                                                                                               |                                                                   <span data-ttu-id="5cfe5-178">Se utiliza para anular la implementación de ensamblados y quitarlos de la caché de ensamblados global.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-178">Used to undeploy assemblies and remove them from the global assembly cache.</span></span> <span data-ttu-id="5cfe5-179">Quita los puertos de envío y recepción.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-179">Removes send and receive ports.</span></span> <span data-ttu-id="5cfe5-180">Quita los directorios virtuales de los Servicios de Microsoft Internet Information (IIS) según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-180">Removes Microsoft Internet Information Services (IIS) virtual directories as needed.</span></span>                                                                    |
|                                                                                                                           <span data-ttu-id="5cfe5-181">PartyResolution.sln</span><span class="sxs-lookup"><span data-stu-id="5cfe5-181">PartyResolution.sln</span></span>                                                                                                                           |                                                                                                                              <span data-ttu-id="5cfe5-182">Archivo de solución que contiene todos los proyectos en varias subcarpetas.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-182">Solution file that contains all of the projects in the various subfolders.</span></span>                                                                                                                               |
|                                                                                                                            <span data-ttu-id="5cfe5-183">PurchaseOrder.xml</span><span class="sxs-lookup"><span data-stu-id="5cfe5-183">PurchaseOrder.xml</span></span>                                                                                                                            |                                                                                                                                                           <span data-ttu-id="5cfe5-184">Pedido de entrada de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-184">Sample input PO.</span></span>                                                                                                                                                            |
|                                                                                                                                <span data-ttu-id="5cfe5-185">Setup.bat</span><span class="sxs-lookup"><span data-stu-id="5cfe5-185">Setup.bat</span></span>                                                                                                                                |                                                                                                                                         <span data-ttu-id="5cfe5-186">Se utiliza para crear e iniciar partes de este ejemplo.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-186">Used to build and initialize portions of this sample.</span></span>                                                                                                                                         |
|                                                                                                    <span data-ttu-id="5cfe5-187">En la carpeta \Buyer:</span><span class="sxs-lookup"><span data-stu-id="5cfe5-187">In the \Buyer folder:</span></span><br /><br /> <span data-ttu-id="5cfe5-188">Buyer.btproj BuyerProcess.odx</span><span class="sxs-lookup"><span data-stu-id="5cfe5-188">Buyer.btproj, BuyerProcess.odx</span></span>                                                                                                     |                                                                                                                             <span data-ttu-id="5cfe5-189">Proyecto y orquestación de BizTalk utilizados para implementar al comprador en este ejemplo.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-189">BizTalk project and orchestration used to implement the buyer in this sample.</span></span>                                                                                                                             |
|                                                                                                             <span data-ttu-id="5cfe5-190">En la carpeta \Catalog:</span><span class="sxs-lookup"><span data-stu-id="5cfe5-190">In the \Catalog folder:</span></span><br /><br /> <span data-ttu-id="5cfe5-191">Catalog.xml</span><span class="sxs-lookup"><span data-stu-id="5cfe5-191">Catalog.xml</span></span>                                                                                                             |                                                                                                                         <span data-ttu-id="5cfe5-192">Se utiliza para determinar la agencia de envío en función del destino de envío especificado en el pedido.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-192">Used to determine shipment agency based on shipping destination specified in the PO.</span></span>                                                                                                                          |
|                                                                                      <span data-ttu-id="5cfe5-193">En la carpeta \CheckPartyName:</span><span class="sxs-lookup"><span data-stu-id="5cfe5-193">In the \CheckPartyName folder:</span></span><br /><br /> <span data-ttu-id="5cfe5-194">AssemblyInfo.cs, CheckPartyName.csproj, Class1.cs</span><span class="sxs-lookup"><span data-stu-id="5cfe5-194">AssemblyInfo.cs, CheckPartyName.csproj, Class1.cs</span></span>                                                                                       |                                                                                                  <span data-ttu-id="5cfe5-195">Archivos de origen y de proyecto de Visual C# de Microsoft para la aplicación CheckPartyName utilizada para obtener acceso a las propiedades de la entidad de origen.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-195">Microsoft Visual C# project and source files for the CheckPartyName application used to access the properties of the source party.</span></span>                                                                                                   |
|                                                                <span data-ttu-id="5cfe5-196">En la carpeta \FilePolling:</span><span class="sxs-lookup"><span data-stu-id="5cfe5-196">In the \FilePolling folder:</span></span><br /><br /> <span data-ttu-id="5cfe5-197">App.ico, AssemblyInfo.cs, FilePolling.cs, FilePolling.csproj, FilePolling.resx, FilePolling.sln,</span><span class="sxs-lookup"><span data-stu-id="5cfe5-197">App.ico, AssemblyInfo.cs, FilePolling.cs, FilePolling.csproj, FilePolling.resx, FilePolling.sln,</span></span>                                                                 |                                                                 <span data-ttu-id="5cfe5-198">Solución, proyecto, origen y archivos asociados de Visual C# para la aplicación FilePolling.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-198">Visual C# solution, project, source, and associated files for the FilePolling application.</span></span><br /><br /> <span data-ttu-id="5cfe5-199">Utilice esta aplicación para mantenerse informado acerca del estado de procesamiento de este escenario automatizado.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-199">Use this application to keep informed about the progressing state of this automated scenario.</span></span>                                                                  |
|                                                                            <span data-ttu-id="5cfe5-200">En la carpeta \Pipeline\projectschema:</span><span class="sxs-lookup"><span data-stu-id="5cfe5-200">In the \Pipeline\projectschema folder:</span></span><br /><br /> <span data-ttu-id="5cfe5-201">MimePartyResReceivePipeline.btp, MimePartyResSendPipeline.btp</span><span class="sxs-lookup"><span data-stu-id="5cfe5-201">MimePartyResReceivePipeline.btp, MimePartyResSendPipeline.btp</span></span>                                                                             |                                                                                             <span data-ttu-id="5cfe5-202">Archivos de canalización de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] que usan los distintos roles en este ejemplo.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-202">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] pipeline files used by the different roles in this sample.</span></span>                                                                                             |
|                                                                <span data-ttu-id="5cfe5-203">En la carpeta \QueryShipmentCatalogComponent:</span><span class="sxs-lookup"><span data-stu-id="5cfe5-203">In the \QueryShipmentCatalogComponent folder:</span></span><br /><br /> <span data-ttu-id="5cfe5-204">AssemblyInfo.cs, QueryShipmentCatalog.cs, QueryShipmentCatalogComponent.csproj</span><span class="sxs-lookup"><span data-stu-id="5cfe5-204">AssemblyInfo.cs, QueryShipmentCatalog.cs, QueryShipmentCatalogComponent.csproj</span></span>                                                                 | <span data-ttu-id="5cfe5-205">Archivos de origen y proyecto de Visual C # para el componente QueryShipmentCatalog que se utiliza para obtener acceso al catálogo de envío definido en el archivo Catalog.xml.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-205">Visual C# project and source files for the QueryShipmentCatalog component used to access the shipment catalog defined in the file Catalog.xml.</span></span><br /><br /> <span data-ttu-id="5cfe5-206">El componente QueryShipmentCatalog determina qué agencia de envío utilizará el proveedor.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-206">The QueryShipmentCatalog component determines which shipment agency the supplier will use.</span></span> <span data-ttu-id="5cfe5-207">Utiliza datos de Catalog.xml para determinar el mejor remitente basado en la geografía.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-207">It uses data from Catalog.xml to determine the best shipper based on geography.</span></span> |
| <span data-ttu-id="5cfe5-208">En la carpeta \Schemas:</span><span class="sxs-lookup"><span data-stu-id="5cfe5-208">In the \Schemas folder:</span></span><br /><br /> <span data-ttu-id="5cfe5-209">PODeliveryReceipt.xsd, POPropertySchema.xsd, PurchaseOrder.xsd, PurchaseOrderAcknowledgement.xsd, Schemas.btproj, ShipmentAdvice.xsd, ShipmentAdviceAcknowledgement.xsd, ShipmentOrderAcknowledgement.xsd, ShipmentOrderRequest.xsd</span><span class="sxs-lookup"><span data-stu-id="5cfe5-209">PODeliveryReceipt.xsd, POPropertySchema.xsd, PurchaseOrder.xsd, PurchaseOrderAcknowledgement.xsd, Schemas.btproj, ShipmentAdvice.xsd, ShipmentAdviceAcknowledgement.xsd, ShipmentOrderAcknowledgement.xsd, ShipmentOrderRequest.xsd</span></span> |                                                                                                                                           <span data-ttu-id="5cfe5-210">Esquemas que varios roles usan en este ejemplo.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-210">Schemas used by the various roles in this sample.</span></span>                                                                                                                                           |
|                                                                  <span data-ttu-id="5cfe5-211">En la carpeta \ShipmentAgency1:</span><span class="sxs-lookup"><span data-stu-id="5cfe5-211">In the \ShipmentAgency1 folder:</span></span><br /><br /> <span data-ttu-id="5cfe5-212">ShipmentAdviceAck.btm, ShipmentAgency1.btproj, ShipmentOrderAck.btm, Shipper1Process.odx</span><span class="sxs-lookup"><span data-stu-id="5cfe5-212">ShipmentAdviceAck.btm, ShipmentAgency1.btproj, ShipmentOrderAck.btm, Shipper1Process.odx</span></span>                                                                   |                                                                                                                      <span data-ttu-id="5cfe5-213">Asignaciones, orquestación y proyecto de BizTalk que se utilizan para implementar ShipmentAgency1 en este ejemplo.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-213">BizTalk project, orchestration, and maps used to implement ShipmentAgency1 in this sample.</span></span>                                                                                                                       |
|                                                                  <span data-ttu-id="5cfe5-214">En la carpeta \ShipmentAgency2:</span><span class="sxs-lookup"><span data-stu-id="5cfe5-214">In the \ShipmentAgency2 folder:</span></span><br /><br /> <span data-ttu-id="5cfe5-215">ShipmentAdviceAck.btm, ShipmentAgency2.btproj, ShipmentOrderAck.btm, Shipper2Process.odx</span><span class="sxs-lookup"><span data-stu-id="5cfe5-215">ShipmentAdviceAck.btm, ShipmentAgency2.btproj, ShipmentOrderAck.btm, Shipper2Process.odx</span></span>                                                                   |                                                                                                                      <span data-ttu-id="5cfe5-216">Asignaciones, orquestación y proyecto de BizTalk que se utilizan para implementar ShipmentAgency2 en este ejemplo.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-216">BizTalk project, orchestration, and maps used to implement ShipmentAgency2 in this sample.</span></span>                                                                                                                       |
|                                     <span data-ttu-id="5cfe5-217">En la carpeta \Supplier:</span><span class="sxs-lookup"><span data-stu-id="5cfe5-217">In the \Supplier folder:</span></span><br /><br /> <span data-ttu-id="5cfe5-218">PO_POAck.btm, PO_ShipmentOrderRequest.btm, ShipmentAdviceAck_PODeliveryReceipt.btm, ShipmentOrder_ShipmentAdvice.btm, Supplier.btproj, SupplierProcess.odx</span><span class="sxs-lookup"><span data-stu-id="5cfe5-218">PO_POAck.btm, PO_ShipmentOrderRequest.btm, ShipmentAdviceAck_PODeliveryReceipt.btm, ShipmentOrder_ShipmentAdvice.btm, Supplier.btproj, SupplierProcess.odx</span></span>                                     |                                                                                                                        <span data-ttu-id="5cfe5-219">Asignaciones, orquestación y proyecto de BizTalk que se utilizan para implementar al remitente en este ejemplo.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-219">BizTalk project, orchestration, and maps used to implement the supplier in this sample.</span></span>                                                                                                                        |

## <a name="building-and-initializing-this-sample"></a><span data-ttu-id="5cfe5-220">Crear e inicializar este ejemplo</span><span class="sxs-lookup"><span data-stu-id="5cfe5-220">Building and Initializing This Sample</span></span>  

> [!NOTE]
>  <span data-ttu-id="5cfe5-221">Antes de generar e inicializar este ejemplo, se debe asegurar de que el host En curso de BizTalk predeterminado está configurado como Autenticación de confianza.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-221">Before you build and initialize this sample, you need to make sure that the default BizTalk In-Process Host is configured as Authentication Trusted.</span></span> <span data-ttu-id="5cfe5-222">Para obtener más información, consulte [recomendaciones de seguridad en tiempo de ejecución de BizTalk Server](../core/biztalk-server-runtime-security-recommendations.md).</span><span class="sxs-lookup"><span data-stu-id="5cfe5-222">For more information, see [BizTalk Server Runtime Security Recommendations](../core/biztalk-server-runtime-security-recommendations.md).</span></span>  

 <span data-ttu-id="5cfe5-223">El componente de canalización MIME no es compatible con una instancia de host de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-223">The MIME pipeline component is not supported in a 64-bit host instance.</span></span> <span data-ttu-id="5cfe5-224">El host asociado con el controlador de envío y de recepción para el adaptador de archivo debe configurarse como un host de solo 32 bits.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-224">The host associated with the send and receive handler for the file adapter must be configured as a 32-bit only host.</span></span> <span data-ttu-id="5cfe5-225">Para obtener más información sobre este, consulte [cómo modificar las propiedades de Host](../core/how-to-modify-host-properties.md).</span><span class="sxs-lookup"><span data-stu-id="5cfe5-225">For more information on this see [How to Modify Host Properties](../core/how-to-modify-host-properties.md).</span></span> <span data-ttu-id="5cfe5-226">Si ya tiene un host de solo 32 bits configurado en el sistema y desea usarlo, vea [configurar el adaptador de archivo](../core/configure-the-file-adapter.md) para obtener instrucciones sobre cómo configurar hosts asociados con el adaptador de archivo de envío y controlador de recepción.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-226">If you already have a 32-bit only host configured on the system, and want to use it, see [Configuring the File Adapter](../core/configure-the-file-adapter.md) for instructions on configuring the host(s) associated to the file adapter’s send and receive handler.</span></span>  

 <span data-ttu-id="5cfe5-227">El certificado que se menciona en esta sección debe agregarse al almacén Personal de la cuenta de inicio de sesión configurada para la instancia de host en proceso predeterminada de BizTalk que va a firmar los mensajes.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-227">The certificate mentioned in this section must to be added to the Personal store of the Logon account configured for the default BizTalk In-Process host instance which will be signing messages.</span></span>  

 <span data-ttu-id="5cfe5-228">De forma predeterminada, el archivo setup.bat mencionado más abajo instalará el ejemplo de resolución de entidad en la aplicación de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] predeterminada.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-228">By default the setup.bat file mentioned below will install the Party Resolution sample into the default [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application.</span></span> <span data-ttu-id="5cfe5-229">Para modificar el archivo setup.bat e implementar el ejemplo en una nueva aplicación de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], debe abrir el archivo setup.bat y reemplazar la sección precedida por la instrucción `@ECHO Deploy Assemblies...` por lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="5cfe5-229">You can modify the setup.bat file to deploy the sample into a new [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application by opening the setup.bat file and replacing the section preceded by the statement `@ECHO Deploy Assemblies...` with the following:</span></span>  

```  
@ECHO Deploy Assemblies...  

btstask AddApp -ApplicationName:PartyResolutionSample -Description:"Party Resolution Orchestration sample from the SDK"  
btstask AddResource -ApplicationName:PartyResolutionSample -Type:System.BizTalk:BizTalkAssembly  -Source:Schemas\bin\Release\Schemas.dll -Options:GacOnAdd  
btstask AddResource -ApplicationName:PartyResolutionSample -Type:System.BizTalk:BizTalkAssembly  -Source:Pipeline\projectschema\bin\Release\ProjectSchema.dll -Options:GacOnAdd   
btstask AddResource -ApplicationName:PartyResolutionSample -Type:System.BizTalk:BizTalkAssembly  -Source:Buyer\bin\Release\Buyer.dll -Options:GacOnAdd  
btstask ImportBindings -ApplicationName:PartyResolutionSample -Source:%BuyerBindingFileName%  
btstask AddResource -ApplicationName:PartyResolutionSample -Type:System.BizTalk:BizTalkAssembly  -Source:ShipmentAgency1\bin\Release\ShipmentAgency1.dll -Options:GacOnAdd  
btstask ImportBindings -ApplicationName:PartyResolutionSample -Source:%ShipmentAgency1BindingFileName%  
btstask AddResource -ApplicationName:PartyResolutionSample -Type:System.BizTalk:BizTalkAssembly  -Source:ShipmentAgency2\bin\Release\ShipmentAgency2.dll -Options:GacOnAdd  
btstask ImportBindings -ApplicationName:PartyResolutionSample -Source:%ShipmentAgency2BindingFileName%  
btstask AddResource -ApplicationName:PartyResolutionSample -Type:System.BizTalk:BizTalkAssembly  -Source:Supplier\bin\Release\Supplier.dll -Options:GacOnAdd  
btstask ImportBindings -ApplicationName:PartyResolutionSample -Source:%SupplierBindingFileName%  
```  

#### <a name="to-build-and-initialize-the-partyresolution-sample"></a><span data-ttu-id="5cfe5-230">Para crear e iniciar el ejemplo PartyResolution</span><span class="sxs-lookup"><span data-stu-id="5cfe5-230">To build and initialize the PartyResolution sample</span></span>  

1. <span data-ttu-id="5cfe5-231">En una ventana de comandos, desplácese a la siguiente carpeta:</span><span class="sxs-lookup"><span data-stu-id="5cfe5-231">In a command window, navigate to the following folder:</span></span>  

    <span data-ttu-id="5cfe5-232">\<*Ejemplos de la ruta de acceso*> \Orchestrations\PartyResolution</span><span class="sxs-lookup"><span data-stu-id="5cfe5-232">\<*Samples Path*>\Orchestrations\PartyResolution</span></span>  

2. <span data-ttu-id="5cfe5-233">Ejecute el archivo Setup.bat que realiza las acciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="5cfe5-233">Run the file Setup.bat, which performs the following actions:</span></span>  

   - <span data-ttu-id="5cfe5-234">Compila los proyectos de [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] para este ejemplo e implementa los ensamblados resultantes.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-234">Compiles the [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] projects for this sample, and deploys the resulting assemblies.</span></span>  

   - <span data-ttu-id="5cfe5-235">Crea y enlaza los puertos de envío y recepción de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="5cfe5-235">Creates and binds the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] send and receive ports.</span></span>  

      <span data-ttu-id="5cfe5-236">Puede recibir las advertencias siguientes o similares durante el proceso de instalación.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-236">You may receive the following or similar warnings during the setup process.</span></span> <span data-ttu-id="5cfe5-237">Los puede pasar por alto sin que afecte a la seguridad.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-237">You can safely ignore them.</span></span>  

     ```  
     "C:\Program Files\Microsoft BizTalk Server <version>\SDK\Samples\Orchestrations\PartyResolution\PartyResolution.sln" (Buildtarget) (1) ->  
     "C:\Program Files\Microsoft BizTalk Server <version>\SDK\Samples\Orchestrations\PartyResolution\Supplier\Supplier.btproj" (default target) (5) ->  
     "C:\Program Files\Microsoft BizTalk Server <version>\SDK\Samples\Orchestrations\PartyResolution\Supplier\Supplier.btproj" (default target) (5:2) ->  
     (CompileODX target) ->  
       C:\Program Files\Microsoft BizTalk Server <version>\SDK\Samples\Orchestrations\PartyResolution\Supplier\SupplierProcess.odx(831,13): warning X4014: convoy processing will not occur -- check your protocol if you were expecting it [C:\ProgramFiles\Microsoft BizTalk Server <version>\SDK\Samples\Orchestrations\PartyResolution\Supplier\Supplier.btproj]  
       C:\Program Files\Microsoft BizTalk Server <version>\SDK\Samples\Orchestrations\PartyResolution\Supplier\SupplierProcess.odx(841,13): warning X4014: convoy processing will not occur -- check your protocol if you were expecting it [C:\ProgramFiles\Microsoft BizTalk Server <version>\SDK\Samples\Orchestrations\PartyResolution\Supplier\Supplier.btproj]  

     ```  

3. <span data-ttu-id="5cfe5-238">Iniciar **símbolo del sistema de Visual Studio**.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-238">Start **Visual Studio Command Prompt**.</span></span>  

4. <span data-ttu-id="5cfe5-239">Escriba los siguientes comandos para instalar los ensamblados en la caché de ensamblados global:</span><span class="sxs-lookup"><span data-stu-id="5cfe5-239">Type the following commands to install the assemblies to the global assembly cache:</span></span>  

   - <span data-ttu-id="5cfe5-240">gacutil -i [!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]SDK\Samples\Orchestrations\PartyResolution\Schemas\bin\Release\schemas.dll</span><span class="sxs-lookup"><span data-stu-id="5cfe5-240">gacutil -i [!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]SDK\Samples\Orchestrations\PartyResolution\Schemas\bin\Release\schemas.dll</span></span>  

   - <span data-ttu-id="5cfe5-241">gacutil -i [!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]SDK\Samples\Orchestrations\PartyResolution\Pipeline\projectschema\bin\Release\ProjectSchema.dll</span><span class="sxs-lookup"><span data-stu-id="5cfe5-241">gacutil -i [!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]SDK\Samples\Orchestrations\PartyResolution\Pipeline\projectschema\bin\Release\ProjectSchema.dll</span></span>  

   - <span data-ttu-id="5cfe5-242">gacutil -i [!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]SDK\Samples\Orchestrations\PartyResolution\Buyer\bin\Release\Buyer.dll </span><span class="sxs-lookup"><span data-stu-id="5cfe5-242">gacutil -i [!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]SDK\Samples\Orchestrations\PartyResolution\Buyer\bin\Release\Buyer.dll</span></span>  

   - <span data-ttu-id="5cfe5-243">gacutil -i [!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]SDK\Samples\Orchestrations\PartyResolution\ShipmentAgency1\bin\Release\ShipmentAgency1.dll</span><span class="sxs-lookup"><span data-stu-id="5cfe5-243">gacutil -i [!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]SDK\Samples\Orchestrations\PartyResolution\ShipmentAgency1\bin\Release\ShipmentAgency1.dll</span></span>  

   - <span data-ttu-id="5cfe5-244">gacutil -i [!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]SDK\Samples\Orchestrations\PartyResolution\ShipmentAgency2\bin\Release\ShipmentAgency2.dll</span><span class="sxs-lookup"><span data-stu-id="5cfe5-244">gacutil -i [!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]SDK\Samples\Orchestrations\PartyResolution\ShipmentAgency2\bin\Release\ShipmentAgency2.dll</span></span>  

   - <span data-ttu-id="5cfe5-245">gacutil -i [!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]SDK\Samples\Orchestrations\PartyResolution\Supplier\bin\Release\Supplier.dll</span><span class="sxs-lookup"><span data-stu-id="5cfe5-245">gacutil -i [!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]SDK\Samples\Orchestrations\PartyResolution\Supplier\bin\Release\Supplier.dll</span></span>  

5. <span data-ttu-id="5cfe5-246">Obtenga un certificado de correo electrónico seguro de una entidad emisora de certificados (CA).</span><span class="sxs-lookup"><span data-stu-id="5cfe5-246">Obtain a secured e-mail certificate from a certificate authority (CA).</span></span> <span data-ttu-id="5cfe5-247">La entidad emisora de certificados podría ser una autoridad de terceros o la autoridad dentro de su organización.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-247">The CA could be a third-party authority or the authority within your organization.</span></span> <span data-ttu-id="5cfe5-248">Después de obtener el certificado, exporte la clave pública y la clave privada.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-248">After you obtain the certificate, export the public key and private key.</span></span>  

6. <span data-ttu-id="5cfe5-249">Para importar la clave privada al almacén Personal de la cuenta de inicio sesión de la instancia de host, así como la clave pública al almacén Otras personas del equipo local, haga lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="5cfe5-249">To import the private key to the Personal store of the Host instance logon account and the public key to the Local Computer Other People store, do the following:</span></span>  

   1. <span data-ttu-id="5cfe5-250">En [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] consola de administración, expanda el grupo de BizTalk y, a continuación, expanda **configuración de plataforma**.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-250">In [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration Console, expand the BizTalk Group, and then expand **Platform Settings**.</span></span>  

   2. <span data-ttu-id="5cfe5-251">Haga clic en **instancias de Host** y busque la cuenta de inicio de sesión que aparece para la instancia de host en proceso predeterminada.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-251">Click on **Host Instances** and find the Logon account shown for the default In-Process host instance.</span></span> <span data-ttu-id="5cfe5-252">En una instalación predeterminada, el host en proceso predeterminado debe denominarse BizTalkServerApplication.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-252">In a default installation the default In-Process host should be named BizTalkServerApplication.</span></span>  

   3. <span data-ttu-id="5cfe5-253">Haga clic en **Inicio**y, a continuación, haga clic en **Ejecutar**.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-253">Click **Start**, and then click **Run**.</span></span> <span data-ttu-id="5cfe5-254">En el **ejecutar** , escriba **mmc.exe**y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-254">In the **Run** box, type **mmc.exe**, and then click **OK**.</span></span> <span data-ttu-id="5cfe5-255">Escriba la contraseña correcta de la cuenta de inicio de sesión de la instancia de host para abrir Microsoft Management Console (MMC) en esa cuenta.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-255">Enter the correct password for the host instance logon account to open the Microsoft Management Console (MMC) under that account.</span></span>  

   4. <span data-ttu-id="5cfe5-256">En el menú **Archivo** , haga clic en **Agregar o quitar complemento**.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-256">On the **File** menu, click **Add/Remove Snap-in**.</span></span>  

   5. <span data-ttu-id="5cfe5-257">En el **agregar o quitar complementos** cuadro de diálogo, seleccione **certificados**y, a continuación, haga clic en **agregar**.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-257">In the **Add or Remove Snap-ins** dialog box, select **Certificates**, and then click **Add**.</span></span>  

   6. <span data-ttu-id="5cfe5-258">En el **complemento certificados** cuadro de diálogo, seleccione **mi cuenta de usuario**y, a continuación, haga clic en **finalizar**.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-258">In the **Certificates snap-in** dialog box, select **My user account**, and then click **Finish**.</span></span>  

   7. <span data-ttu-id="5cfe5-259">En el **agregar o quitar complementos** cuadro de diálogo, seleccione **certificados**y, a continuación, haga clic en **agregar**.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-259">In the **Add or Remove Snap-ins** dialog box, select **Certificates**, and then click **Add**.</span></span>  

   8. <span data-ttu-id="5cfe5-260">En el **complemento certificados** cuadro de diálogo, seleccione **cuenta de equipo**y, a continuación, haga clic en **siguiente**.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-260">In the **Certificates snap-in** dialog box, select **Computer account**, and then click **Next**.</span></span>  

   9. <span data-ttu-id="5cfe5-261">En el **Seleccionar equipo** cuadro de diálogo, seleccione **ordenador**y, a continuación, haga clic en **finalizar**.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-261">In the **Select Computer** dialog box, select **Local computer**, and then click **Finish**.</span></span>  

   10. <span data-ttu-id="5cfe5-262">En el **agregar o quitar complementos** cuadro de diálogo, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-262">In the **Add or Remove Snap-ins** dialog box, click **OK**.</span></span>  

   11. <span data-ttu-id="5cfe5-263">Expanda el **certificados - usuario actual** nodo y, a continuación, expanda **Personal**.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-263">Expand the **Certificates - Current User** node and then expand **Personal**.</span></span> <span data-ttu-id="5cfe5-264">Haga clic en **certificados**, haga clic en **todas las tareas**y, a continuación, haga clic en **importación**.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-264">Right-click **Certificates**, click **All Tasks**, and then click **Import**.</span></span>  

   12. <span data-ttu-id="5cfe5-265">Importe la clave privada y proporcione una contraseña en el asistente.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-265">Import the private key and provide a password in the wizard.</span></span>  

   13. <span data-ttu-id="5cfe5-266">Expanda el **certificados (equipo Local)** nodo y, a continuación, expanda **otras personas**.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-266">Expand the **Certificates (Local Computer)** node and then expand **Other People**.</span></span> <span data-ttu-id="5cfe5-267">Haga clic en **certificados**, haga clic en **todas las tareas**y, a continuación, haga clic en **importación**.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-267">Right-click **Certificates**, click **All Tasks**, and then click **Import**.</span></span>  

   14. <span data-ttu-id="5cfe5-268">Importe la clave pública.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-268">Import the public key.</span></span>  

7. <span data-ttu-id="5cfe5-269">En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] consola de administración, haga clic en el **grupo de BizTalk** nodo y, a continuación, haga clic en **propiedades**.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-269">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, right-click the **BizTalk Group** node and then click **Properties**.</span></span> <span data-ttu-id="5cfe5-270">En el **grupo de BizTalk - propiedades de grupo** cuadro de diálogo, seleccione **certificado**.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-270">In the **BizTalk Group - Group Properties** dialog box, select **Certificate**.</span></span>  

8. <span data-ttu-id="5cfe5-271">En el **certificado** cuadro de diálogo, haga clic en **examinar** y seleccione la clave privada que acaba de importar.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-271">In the **Certificate** dialog box, click **Browse** and select the private key you just imported.</span></span> <span data-ttu-id="5cfe5-272">El certificado que aquí se especifica se usa para firmar el mensaje de salida.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-272">The certificate specified here is used to sign the outbound message.</span></span> <span data-ttu-id="5cfe5-273">Haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-273">Click **OK**.</span></span>  

9. <span data-ttu-id="5cfe5-274">Para actualizar la entidad BuyerAgency en este ejemplo, haga lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="5cfe5-274">To update the BuyerAgency party in this sample do the following:</span></span>  

   1. <span data-ttu-id="5cfe5-275">En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] consola de administración, seleccione **partes**.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-275">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, select **Parties**.</span></span>  

   2. <span data-ttu-id="5cfe5-276">Haga clic en **BuyerAgency** y, a continuación, haga clic en **propiedades**.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-276">Right-click **BuyerAgency** and then click **Properties**.</span></span> <span data-ttu-id="5cfe5-277">En el **buyeragency – propiedades de entidad** cuadro de diálogo, seleccione **General**.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-277">In the **BuyerAgency - Party Properties** dialog box, select **General**.</span></span>  

   3. <span data-ttu-id="5cfe5-278">En el **alias** sección del cuadro de diálogo, agregar un nuevo alias con el nombre y el calificador establecido en **WindowsUser**.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-278">Under the **Aliases** section of the dialog, add a new alias with the name and qualifier set to **WindowsUser**.</span></span> <span data-ttu-id="5cfe5-279">Establezca el valor en un nombre de usuario en formato de \<dominio\nombre de usuario > (por ejemplo, undominio\unusuario).</span><span class="sxs-lookup"><span data-stu-id="5cfe5-279">Set the Value to a user name in format of \<domain\user name> (e.g. SOMEDOMAIN\someuser).</span></span>  

   4. <span data-ttu-id="5cfe5-280">Seleccione **certificado** y, a continuación, haga clic en **examinar** y seleccione la clave pública que acaba de importar.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-280">Select **Certificate** and then click **Browse** and select the public key you just imported.</span></span> <span data-ttu-id="5cfe5-281">Se utiliza el certificado especificado aquí para validar la identidad del remitente del mensaje entrante.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-281">The certificate specified here is used to validate the sender identity of the inbound message.</span></span> <span data-ttu-id="5cfe5-282">Haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-282">Click **OK**.</span></span>  

10. <span data-ttu-id="5cfe5-283">En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] administración de la consola, expanda **configuración de plataforma**y, a continuación, seleccione **Hosts**.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-283">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **Platform Settings**, and then select **Hosts**.</span></span>  

11. <span data-ttu-id="5cfe5-284">Haga clic en **BizTalkServerApplication** y, a continuación, haga clic en **propiedades**.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-284">Right-click **BizTalkServerApplication** and then click **Properties**.</span></span> <span data-ttu-id="5cfe5-285">En el **BizTalkServerApplication - propiedades de Host** cuadro de diálogo, seleccione **certificados**.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-285">In the **BizTalkServerApplication - Host Properties** dialog box, select **Certificates**.</span></span>  

12. <span data-ttu-id="5cfe5-286">Haga clic en **examinar** y seleccione la clave privada que acaba de importar.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-286">Click **Browse** and select the private key you just imported.</span></span> <span data-ttu-id="5cfe5-287">El certificado que aquí se especifica se usa para descifrar los mensajes de entrada.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-287">The certificate specified here is used to decrypt the inbound messages.</span></span> <span data-ttu-id="5cfe5-288">Haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-288">Click **OK**.</span></span>  

13. <span data-ttu-id="5cfe5-289">En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] administración de la consola, expanda **configuración de plataforma**y, a continuación, seleccione **instancias de Host**.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-289">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **Platform Settings**, and then select **Host Instances**.</span></span>  

14. <span data-ttu-id="5cfe5-290">Haga clic en **BizTalkServerApplication** y, a continuación, haga clic en **reiniciar**.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-290">Right-click **BizTalkServerApplication** and then click **Restart**.</span></span>  

## <a name="running-this-sample"></a><span data-ttu-id="5cfe5-291">Ejecución del ejemplo</span><span class="sxs-lookup"><span data-stu-id="5cfe5-291">Running This Sample</span></span>  

#### <a name="to-run-the-partyresolution-sample"></a><span data-ttu-id="5cfe5-292">Para ejecutar el ejemplo de PartyResolution</span><span class="sxs-lookup"><span data-stu-id="5cfe5-292">To run the PartyResolution sample</span></span>  

1.  <span data-ttu-id="5cfe5-293">Ejecute FilePolling.exe desde la carpeta siguiente:</span><span class="sxs-lookup"><span data-stu-id="5cfe5-293">Run FilePolling.exe from the following folder:</span></span>  

     <span data-ttu-id="5cfe5-294">*\<Ejemplos de la ruta de acceso >* \Orchestrations\PartyResolution\FilePolling\bin\Debug</span><span class="sxs-lookup"><span data-stu-id="5cfe5-294">*\<Samples Path>* \Orchestrations\PartyResolution\FilePolling\bin\Debug</span></span>  

2.  <span data-ttu-id="5cfe5-295">Haga clic en **iniciar sondeo**.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-295">Click **Start polling**.</span></span>  

3.  <span data-ttu-id="5cfe5-296">Pegue una copia del archivo de instancia de pedido proporcionado PurchaseOrder.xml en la carpeta siguiente:</span><span class="sxs-lookup"><span data-stu-id="5cfe5-296">Paste a copy of the provided PO instance file, PurchaseOrder.xml, in the following folder:</span></span>  

     <span data-ttu-id="5cfe5-297">*\<Ejemplos de la ruta de acceso >* \Orchestrations\PartyResolution\FileDrop\PurchaseOrder</span><span class="sxs-lookup"><span data-stu-id="5cfe5-297">*\<Samples Path>* \Orchestrations\PartyResolution\FileDrop\PurchaseOrder</span></span>  

4.  <span data-ttu-id="5cfe5-298">Observe la secuencia de mensajes que se proporcionan en forma de cuadros de mensajes, que le mantienen informado acerca del progreso del ejemplo:</span><span class="sxs-lookup"><span data-stu-id="5cfe5-298">Observe the sequence of messages that are provided in the form of message boxes that keep you informed about the progress of the sample:</span></span>  

    1.  <span data-ttu-id="5cfe5-299">Cuando el proveedor recibe el pedido del comprador.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-299">When the supplier receives the PO from the buyer.</span></span>  

    2.  <span data-ttu-id="5cfe5-300">Cuando se recibe una solicitud de envío de pedido de agencia de envío 1 o 2.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-300">When a shipment order request is received from shipment agency 1 or 2.</span></span>  

    3.  <span data-ttu-id="5cfe5-301">Cuando la agencia de envío 1 o 2 recibe un consejo de envío.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-301">When a shipment advice is received by shipment agency 1 or 2.</span></span>  

    4.  <span data-ttu-id="5cfe5-302">Cuando el proveedor envía la confirmación de entrega de pedido al comprador.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-302">When the supplier sends the PO delivery receipt to the buyer.</span></span>  

5.  <span data-ttu-id="5cfe5-303">Haga clic en **Exit** para cerrar el programa de sondeo de archivos.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-303">Click **Exit** to close the File Polling program.</span></span>  

> [!NOTE]
>  <span data-ttu-id="5cfe5-304">Puede cambiar la ficha País de PurchaseOrder.xml a "EE. UU." y, a continuación, repetir los pasos 2 y 3.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-304">You can edit the Country tag in PurchaseOrder.xml to "US" and then repeat step 2 and step 3.</span></span> <span data-ttu-id="5cfe5-305">Observe que el pedido de envío se envía ahora a la agencia de envío 2.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-305">Observe that the shipment order is now sent to shipment agency 2.</span></span>  

## <a name="uninstalling-this-sample"></a><span data-ttu-id="5cfe5-306">Desinstalar este ejemplo</span><span class="sxs-lookup"><span data-stu-id="5cfe5-306">Uninstalling This Sample</span></span>  

#### <a name="to-uninstall-the-partyresolution-sample"></a><span data-ttu-id="5cfe5-307">Para desinstalar el ejemplo PartyResolution</span><span class="sxs-lookup"><span data-stu-id="5cfe5-307">To uninstall the PartyResolution sample</span></span>  

1. <span data-ttu-id="5cfe5-308">En un [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] símbolo del sistema, cambie el directorio (**cd**) a \< *ruta de ejemplos*> \Orchestrations\ PartyResolution\\.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-308">At a [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] command prompt, change directory (**cd**) to \<*Samples Path*>\Orchestrations\ PartyResolution\\.</span></span>  

2. <span data-ttu-id="5cfe5-309">Ejecute Cleanup.bat.</span><span class="sxs-lookup"><span data-stu-id="5cfe5-309">Run Cleanup.bat.</span></span>  

## <a name="see-also"></a><span data-ttu-id="5cfe5-310">Vea también</span><span class="sxs-lookup"><span data-stu-id="5cfe5-310">See Also</span></span>  
 <span data-ttu-id="5cfe5-311">[Componente de canalización de resolución de entidades](../core/party-resolution-pipeline-component.md) </span><span class="sxs-lookup"><span data-stu-id="5cfe5-311">[Party Resolution Pipeline Component](../core/party-resolution-pipeline-component.md) </span></span>  
 <span data-ttu-id="5cfe5-312">[Cómo configurar el componente de canalización de codificador de MIME / SMIME](../core/how-to-configure-the-mime-smime-encoder-pipeline-component.md) </span><span class="sxs-lookup"><span data-stu-id="5cfe5-312">[How to Configure the MIME-SMIME Encoder Pipeline Component](../core/how-to-configure-the-mime-smime-encoder-pipeline-component.md) </span></span>  
 <span data-ttu-id="5cfe5-313">[Cómo configurar el componente de canalización de descodificador de MIME / SMIME](../core/how-to-configure-the-mime-smime-decoder-pipeline-component.md) </span><span class="sxs-lookup"><span data-stu-id="5cfe5-313">[How to Configure the MIME-SMIME Decoder Pipeline Component](../core/how-to-configure-the-mime-smime-decoder-pipeline-component.md) </span></span>  
 [<span data-ttu-id="5cfe5-314">Orquestaciones (carpetas de ejemplos de BizTalk Server)</span><span class="sxs-lookup"><span data-stu-id="5cfe5-314">Orchestrations (BizTalk Server Samples Folder)</span></span>](../core/orchestrations-biztalk-server-samples-folder.md)
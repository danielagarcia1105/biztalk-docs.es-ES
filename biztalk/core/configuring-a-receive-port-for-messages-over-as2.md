---
title: "Configurar un puerto de recepción de mensajes a través de AS2 | Documentos de Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 01d4d897-d12b-4de4-a86b-e6d2718470c2
caps.latest.revision: "18"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 6f1a024769b0728873d6cf217e3028d2c5532055
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
---
# <a name="configuring-a-receive-port-for-messages-over-as2"></a><span data-ttu-id="1f1aa-102">Configurar un puerto de recepción para mensajes a través de AS2</span><span class="sxs-lookup"><span data-stu-id="1f1aa-102">Configuring a Receive Port for Messages over AS2</span></span>
<span data-ttu-id="1f1aa-103">Para recibir un mensaje AS2 con una carga EDI o que no sea EDI, cree un puerto de recepción HTTP para recibir el mensaje y devolver una respuesta a la entidad.</span><span class="sxs-lookup"><span data-stu-id="1f1aa-103">To receive an AS2 message with an EDI or non-EDI payload, create an HTTP receive port to receive the message and return a response back to the party.</span></span>  
  
 <span data-ttu-id="1f1aa-104">Si el MDN se va a devolver de forma sincrónica, el puerto de recepción debe ser un puerto de recepción de solicitud-respuesta bidireccional.</span><span class="sxs-lookup"><span data-stu-id="1f1aa-104">If the MDN will be returned synchronously, the receive port must be a two-way request-response receive port.</span></span> <span data-ttu-id="1f1aa-105">Una ubicación de recepción en el puerto de recepción recibirá el mensaje AS2, mientras que el puerto de envío asociado con el puerto de recepción bidireccional enviará el MDN sincrónico.</span><span class="sxs-lookup"><span data-stu-id="1f1aa-105">A receive location in the receive port will receive the AS2 message, while the send port associated with the two-way receive port will send the synschronous MDN.</span></span>  
  
 <span data-ttu-id="1f1aa-106">Si se devuelve el MDN de forma asíncrona, el puerto de recepción puede ser un puerto de recepción unidireccional debido a que el MDN debe devolverse mediante un puerto de envío dinámico distinto.</span><span class="sxs-lookup"><span data-stu-id="1f1aa-106">If the MDN will be returned asynchronously, the receive port can be a one-way receive port, because the MDN must be returned over a separate dynamic send port.</span></span> <span data-ttu-id="1f1aa-107">El puerto de recepción devolverá una respuesta HTTP si se trata de un puerto unidireccional o bidireccional.</span><span class="sxs-lookup"><span data-stu-id="1f1aa-107">An HTTP response will be returned by the receive port, whether it is a one-way or two-way port.</span></span> <span data-ttu-id="1f1aa-108">Si establece un puerto de recepción bidireccional para recibir un mensaje AS2, mientras se devuelve un MDN asíncrono, se devolverá la respuesta HTTP a través del puerto de envío de la ubicación de recepción bidireccional.</span><span class="sxs-lookup"><span data-stu-id="1f1aa-108">If you set up a two-way receive port to receive an AS2 message, while returning an asynchronoius MDN, the HTTP response will be returned over the send port of the two-way receive location.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="1f1aa-109">El puerto de recepción bidireccional que se va a utilizar para recibir mensajes AS2 no debe utilizarse para recibir mensajes MDN.</span><span class="sxs-lookup"><span data-stu-id="1f1aa-109">The two-way receive port used to receive AS2 messages should not be used to receive MDN messages.</span></span> <span data-ttu-id="1f1aa-110">Los mensajes MDN deben recibirse en un puerto de recepción unidireccional.</span><span class="sxs-lookup"><span data-stu-id="1f1aa-110">MDN messages should be received on a static one-way receive port.</span></span> <span data-ttu-id="1f1aa-111">Un puerto de recepción de solicitud o respuesta para un MDN evitaría que un mensaje 200OK se devolviese en repuesta al MDN entrante y, por lo tanto, se producen reintentos innecesarios de la transmisión MDN.</span><span class="sxs-lookup"><span data-stu-id="1f1aa-111">Using a request/response receive port for an MDN would prevent a 200OK message from being returned in response to the incoming MDN, thereby causing unnecessary retries of the MDN transmission.</span></span>  
  
 <span data-ttu-id="1f1aa-112">Cree el puerto de recepción con la siguiente configuración:</span><span class="sxs-lookup"><span data-stu-id="1f1aa-112">Create the receive port with the following configuration:</span></span>  
  
|<span data-ttu-id="1f1aa-113">Ubicación</span><span class="sxs-lookup"><span data-stu-id="1f1aa-113">Location</span></span>|<span data-ttu-id="1f1aa-114">Propiedad</span><span class="sxs-lookup"><span data-stu-id="1f1aa-114">Property</span></span>|<span data-ttu-id="1f1aa-115">Configuración</span><span class="sxs-lookup"><span data-stu-id="1f1aa-115">Setting</span></span>|  
|--------------|--------------|-------------|  
|<span data-ttu-id="1f1aa-116">**Propiedades de puerto de recepción: General**</span><span class="sxs-lookup"><span data-stu-id="1f1aa-116">**Receive Port Properties: General**</span></span>|<span data-ttu-id="1f1aa-117">Tipo de puerto</span><span class="sxs-lookup"><span data-stu-id="1f1aa-117">Port type</span></span>|<span data-ttu-id="1f1aa-118">Solicitudes y respuestas</span><span class="sxs-lookup"><span data-stu-id="1f1aa-118">Request-Response</span></span>|  
|<span data-ttu-id="1f1aa-119">**Propiedades de la ubicación de recepción: General**</span><span class="sxs-lookup"><span data-stu-id="1f1aa-119">**Receive Location Properties: General**</span></span>|<span data-ttu-id="1f1aa-120">Tipo de transporte</span><span class="sxs-lookup"><span data-stu-id="1f1aa-120">Transport Type</span></span>|<span data-ttu-id="1f1aa-121">HTTP **Nota:** sólo el adaptador HTTP puede utilizarse para transportar mensajes con codificación EDIINT/AS2.</span><span class="sxs-lookup"><span data-stu-id="1f1aa-121">HTTP **Note:**  Only the HTTP adapter can be used for transporting EDIINT/AS2-encoded messages.</span></span> <span data-ttu-id="1f1aa-122">Este transporte no funcionará con un adaptador que no sea el adaptador de HTTP.</span><span class="sxs-lookup"><span data-stu-id="1f1aa-122">This transport will not work with an adapter other than the HTTP adapter.</span></span>|  
|<span data-ttu-id="1f1aa-123">**Propiedades de la ubicación de recepción: General**</span><span class="sxs-lookup"><span data-stu-id="1f1aa-123">**Receive Location Properties: General**</span></span>|<span data-ttu-id="1f1aa-124">Controlador de recepción</span><span class="sxs-lookup"><span data-stu-id="1f1aa-124">Receive handler</span></span>|<span data-ttu-id="1f1aa-125">BizTalkServerIsolatedHost</span><span class="sxs-lookup"><span data-stu-id="1f1aa-125">BizTalkServerIsolatedHost</span></span>|  
|<span data-ttu-id="1f1aa-126">**Propiedades de la ubicación de recepción: General**</span><span class="sxs-lookup"><span data-stu-id="1f1aa-126">**Receive Location Properties: General**</span></span>|<span data-ttu-id="1f1aa-127">Canalización de recepción</span><span class="sxs-lookup"><span data-stu-id="1f1aa-127">Receive pipeline</span></span>|<span data-ttu-id="1f1aa-128">-AS2EdiReceive (si la carga es con codificación EDI)</span><span class="sxs-lookup"><span data-stu-id="1f1aa-128">-   AS2EdiReceive (if the payload is EDI-encoded)</span></span><br /><span data-ttu-id="1f1aa-129">-AS2Receive (si la carga no es de codificación EDI) **Nota:** cuando se utiliza la canalización AS2EdiReceive, debe agregar la cuenta de usuario que se ejecuta el proceso de instancia de Host aislado de BizTalk al grupo de usuarios de la aplicación de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="1f1aa-129">-   AS2Receive (if the payload is not EDI-encoded) **Note:**  When using the AS2EdiReceive pipeline, you must add the user account that the BizTalk Isolated Host Instance process is running under to the BizTalk Application Users group.</span></span> <span data-ttu-id="1f1aa-130">La canalización AS2EdiReceive se ejecuta en el proceso de instancia de host aislado de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="1f1aa-130">The AS2EdiReceive pipeline executes in the BizTalk Isolated Host Instance process.</span></span> <span data-ttu-id="1f1aa-131">La canalización AS2EdiReceive obtiene acceso al almacén de SSO, que requiere que el usuario se encuentre en el grupo de usuarios de la aplicación [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="1f1aa-131">The AS2EdiReceive pipeline accesses the SSO store, which requires that the user is in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Application Users group.</span></span>|  
|<span data-ttu-id="1f1aa-132">**Propiedades de la ubicación de recepción: General**</span><span class="sxs-lookup"><span data-stu-id="1f1aa-132">**Receive Location Properties: General**</span></span>|<span data-ttu-id="1f1aa-133">Canalización de envío</span><span class="sxs-lookup"><span data-stu-id="1f1aa-133">Send pipeline</span></span>|<span data-ttu-id="1f1aa-134">AS2Send</span><span class="sxs-lookup"><span data-stu-id="1f1aa-134">AS2Send</span></span>|  
|<span data-ttu-id="1f1aa-135">**Propiedades de transporte HTTP**</span><span class="sxs-lookup"><span data-stu-id="1f1aa-135">**HTTP Transport Properties**</span></span>|<span data-ttu-id="1f1aa-136">Directorio virtual más extensión ISAPI</span><span class="sxs-lookup"><span data-stu-id="1f1aa-136">Virtual directory plus ISAPI extension</span></span>|<span data-ttu-id="1f1aa-137">/\<nombre del directorio virtual >/BTSHTTPReceive.dll</span><span class="sxs-lookup"><span data-stu-id="1f1aa-137">/\<name of virtual directory>/BTSHTTPReceive.dll</span></span>|  
|<span data-ttu-id="1f1aa-138">**Propiedades de transporte HTTP**</span><span class="sxs-lookup"><span data-stu-id="1f1aa-138">**HTTP Transport Properties**</span></span>|<span data-ttu-id="1f1aa-139">Tipo de contenido de devolución de solicitud-respuesta</span><span class="sxs-lookup"><span data-stu-id="1f1aa-139">Request-Response Return content type</span></span>|<span data-ttu-id="1f1aa-140">text/xml</span><span class="sxs-lookup"><span data-stu-id="1f1aa-140">text/xml</span></span>|  
  
## <a name="functionality-of-the-receive-location-in-synchronous-and-asynchronous-modes"></a><span data-ttu-id="1f1aa-141">Funcionalidad de la ubicación de recepción en los modos sincrónico y asíncrono</span><span class="sxs-lookup"><span data-stu-id="1f1aa-141">Functionality of the Receive Location in Synchronous and Asynchronous Modes</span></span>  
 <span data-ttu-id="1f1aa-142">El puerto de recepción bidireccional realiza lo siguiente para recibir y procesar un mensaje EDI o AS2 y devolver una respuesta:</span><span class="sxs-lookup"><span data-stu-id="1f1aa-142">The two-way receive port does the following to receive and process an EDI/AS2 message and return a response:</span></span>  
  
-   <span data-ttu-id="1f1aa-143">Reciba el mensaje AS2 a través de HTTP.</span><span class="sxs-lookup"><span data-stu-id="1f1aa-143">Receive the AS2 message over HTTP.</span></span>  
  
-   <span data-ttu-id="1f1aa-144">Procese el mensaje AS2 mediante la canalización de recepción AS2EDIReceive (para mensajes con codificación EDI) o la canalización de recepción AS2Receive (para mensajes que no se encuentren codificados en EDI).</span><span class="sxs-lookup"><span data-stu-id="1f1aa-144">Process the AS2 message using the AS2EDIReceive receive pipeline (for EDI-encoded messages) or the AS2Receive receive pipeline (for messages that are not encoded in EDI).</span></span> <span data-ttu-id="1f1aa-145">Para obtener más información acerca de este proceso, consulte [procesar un mensaje AS2 entrante](../core/processing-an-incoming-as2-message.md).</span><span class="sxs-lookup"><span data-stu-id="1f1aa-145">For more information on this process, see [Processing an Incoming AS2 Message](../core/processing-an-incoming-as2-message.md).</span></span>  
  
-   <span data-ttu-id="1f1aa-146">Establezca las siguientes propiedades de contexto en el mensaje recibido:</span><span class="sxs-lookup"><span data-stu-id="1f1aa-146">Set the following context properties on the received message:</span></span>  
  
    -   <span data-ttu-id="1f1aa-147">`IsAS2PayloadMessage == True` (debido a que es un mensaje de carga)</span><span class="sxs-lookup"><span data-stu-id="1f1aa-147">`IsAS2PayloadMessage == True` (because it is a payload message)</span></span>  
  
    -   <span data-ttu-id="1f1aa-148">`IsEmptyMDNResponse == False` (debido a que no es un MDN vacío)</span><span class="sxs-lookup"><span data-stu-id="1f1aa-148">`IsEmptyMDNResponse == False` (because it is not an empty MDN)</span></span>  
  
-   <span data-ttu-id="1f1aa-149">Si el mensaje es decodificación EDI, desensamble el archivo EDI, genere los archivos XML y colóquelos en el cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="1f1aa-149">If the message is EDI-encoded, disassemble the EDI file, generate XML files, and drop them into the MessageBox.</span></span> <span data-ttu-id="1f1aa-150">Establezca la propiedad de contexto de `BTS.MessageType` para cada archivo XML en el nombre de esquema con un espacio de nombres.</span><span class="sxs-lookup"><span data-stu-id="1f1aa-150">Set the context property of `BTS.MessageType` for each XML file to the schema name with namespace.</span></span>  
  
-   <span data-ttu-id="1f1aa-151">Si el mensaje no es de codificación EDI, coloque el mensaje en su formato original en el cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="1f1aa-151">If the message is not EDI-encoded, drop the message in its native format into the MessageBox.</span></span>  
  
-   <span data-ttu-id="1f1aa-152">Genere el archivo MDN, si está habilitado, mediante la canalización de recepción AS2EdiReceive.</span><span class="sxs-lookup"><span data-stu-id="1f1aa-152">Generate the MDN file, if enabled, using the AS2EdiReceive receive pipeline.</span></span> <span data-ttu-id="1f1aa-153">Para obtener más información acerca de este proceso, consulte [generar un MDN saliente](../core/generating-an-outgoing-mdn.md).</span><span class="sxs-lookup"><span data-stu-id="1f1aa-153">For more information on this process, see [Generating an Outgoing MDN](../core/generating-an-outgoing-mdn.md).</span></span> <span data-ttu-id="1f1aa-154">Establezca las siguientes propiedades de contexto en el mensaje:</span><span class="sxs-lookup"><span data-stu-id="1f1aa-154">Set the following context properties on the message:</span></span>  
  
    -   <span data-ttu-id="1f1aa-155">`EdiIntAS.IsAS2AsynchronousMdn == False` (si está en modo sincrónico)</span><span class="sxs-lookup"><span data-stu-id="1f1aa-155">`EdiIntAS.IsAS2AsynchronousMdn == False` (if in synchronous mode)</span></span>  
  
    -   <span data-ttu-id="1f1aa-156">`EdiIntAS.IsAS2AsynchronousMdn== True` (si está en modo asincrónico)</span><span class="sxs-lookup"><span data-stu-id="1f1aa-156">`EdiIntAS.IsAS2AsynchronousMdn== True` (if in asynchronous mode)</span></span>  
  
-   <span data-ttu-id="1f1aa-157">Si se encuentra en el modo sincrónico, envíe el archivo MDN, si está habilitado, mediante la canalización de envío AS2Send.</span><span class="sxs-lookup"><span data-stu-id="1f1aa-157">If in synchronous mode, send the MDN file, if enabled, using the AS2Send send pipeline.</span></span> <span data-ttu-id="1f1aa-158">Para obtener más información acerca de este proceso, consulte [enviar un MDN saliente](../core/sending-an-outgoing-mdn.md).</span><span class="sxs-lookup"><span data-stu-id="1f1aa-158">For more information on this process, see [Sending an Outgoing MDN](../core/sending-an-outgoing-mdn.md).</span></span>  
  
-   <span data-ttu-id="1f1aa-159">Si se encuentra en el modo asíncrono, enrute el archivo MDN, si está habilitado, en el cuadro de mensajes (para un puerto de envío dinámico distinto para recogerlo y enviarlo).</span><span class="sxs-lookup"><span data-stu-id="1f1aa-159">If in asynchronous mode, route the MDN file, if enabled, to the MessageBox (for a separate dynamic send port to pick it up and send it).</span></span>  
  
-   <span data-ttu-id="1f1aa-160">Si se encuentra en un modo asíncrono, genere un MDN vacío junto con el MDN completo que éste devuelve de forma asíncrona.</span><span class="sxs-lookup"><span data-stu-id="1f1aa-160">If in asynchronous mode, generate an empty MDN in addition to the complete MDN that it returns asynchronously.</span></span> <span data-ttu-id="1f1aa-161">Establezca las siguientes propiedades de contexto en el mensaje:</span><span class="sxs-lookup"><span data-stu-id="1f1aa-161">Set the following context properties on the message:</span></span>  
  
    -   `IsAS2PayloadMessage == False`  
  
    -   `IsEmptyMDNResponse == True`  
  
-   <span data-ttu-id="1f1aa-162">Si se encuentra en modo asíncrono, devuelva la respuesta HTTP al remitente original a través de la conexión HTTP entre el puerto de recepción y la entidad remitente, que cierra la conexión.</span><span class="sxs-lookup"><span data-stu-id="1f1aa-162">If in asynchronous mode, return the HTTP response to the original sender over the HTTP connection between the receive port and the sending party, which closes that connection.</span></span> <span data-ttu-id="1f1aa-163">Esto es necesario ya que el MDN completo no cierra la conexión sincrónica.</span><span class="sxs-lookup"><span data-stu-id="1f1aa-163">This is necessary because the synchronous connection is not closed by the complete MDN.</span></span>  
  
-   <span data-ttu-id="1f1aa-164">Genere un mensaje de confirmación, si está habilitado, y colóquelo en el cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="1f1aa-164">Generate an acknowledgment message, if enabled, and drop it into the MessageBox.</span></span> <span data-ttu-id="1f1aa-165">Establezca la propiedad de contexto de `BTS.MessageType` en el esquema de control de confirmación.</span><span class="sxs-lookup"><span data-stu-id="1f1aa-165">Set the context property of `BTS.MessageType` to the acknowledgment control schema.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1f1aa-166">Vea también</span><span class="sxs-lookup"><span data-stu-id="1f1aa-166">See Also</span></span>  
 <span data-ttu-id="1f1aa-167">[Configurar puertos para una solución AS2](../core/configuring-ports-for-an-as2-solution.md) </span><span class="sxs-lookup"><span data-stu-id="1f1aa-167">[Configuring Ports for an AS2 Solution](../core/configuring-ports-for-an-as2-solution.md) </span></span>  
 <span data-ttu-id="1f1aa-168">[Procesar un mensaje AS2 entrante](../core/processing-an-incoming-as2-message.md) </span><span class="sxs-lookup"><span data-stu-id="1f1aa-168">[Processing an Incoming AS2 Message](../core/processing-an-incoming-as2-message.md) </span></span>  
 <span data-ttu-id="1f1aa-169">[Generar un MDN saliente](../core/generating-an-outgoing-mdn.md) </span><span class="sxs-lookup"><span data-stu-id="1f1aa-169">[Generating an Outgoing MDN](../core/generating-an-outgoing-mdn.md) </span></span>  
 [<span data-ttu-id="1f1aa-170">Enviar un MDN saliente</span><span class="sxs-lookup"><span data-stu-id="1f1aa-170">Sending an Outgoing MDN</span></span>](../core/sending-an-outgoing-mdn.md)
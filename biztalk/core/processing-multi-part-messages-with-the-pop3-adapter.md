---
title: Mensajes de procesamiento de varias partes con el adaptador de POP3 | Documentos de Microsoft
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 56ad041f-f155-4c1c-ab87-1405c80d9b68
caps.latest.revision: 6
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 26aff4569414103ad8c4f37a9e4699a85874e481
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
ms.locfileid: "22266444"
---
# <a name="processing-multi-part-messages-with-the-pop3-adapter"></a><span data-ttu-id="93480-102">Procesar mensajes de varias partes con el adaptador de POP3</span><span class="sxs-lookup"><span data-stu-id="93480-102">Processing Multi Part Messages with the POP3 Adapter</span></span>
<span data-ttu-id="93480-103">El adaptador de POP3 puede procesar mensajes codificado con MIME que cumplen con los estándares IETF documentados en [RFC 2045](http://go.microsoft.com/fwlink/?LinkId=58810), [RFC 2046](http://go.microsoft.com/fwlink/?LinkId=58811), y [RFC 2047](http://go.microsoft.com/fwlink/?LinkId=58812).</span><span class="sxs-lookup"><span data-stu-id="93480-103">The POP3 Adapter can process MIME-encoded messages that conform to the IETF standards documented in [RFC 2045](http://go.microsoft.com/fwlink/?LinkId=58810), [RFC 2046](http://go.microsoft.com/fwlink/?LinkId=58811), and [RFC 2047](http://go.microsoft.com/fwlink/?LinkId=58812).</span></span> <span data-ttu-id="93480-104">Los mensajes codificados con MIME pueden tener una o varias partes con distintos tipos de contenido.</span><span class="sxs-lookup"><span data-stu-id="93480-104">MIME encoded messages can have from one to many parts with different content types.</span></span> <span data-ttu-id="93480-105">En este tema se trata el modo en que el adaptador de POP3 procesa mensajes de varias partes codificados con MIME.</span><span class="sxs-lookup"><span data-stu-id="93480-105">This topic discusses the how the POP3 adapter processes multi part MIME encoded messages.</span></span>  
  
## <a name="receiving-multi-part-messages-with-the-pop3-adapter"></a><span data-ttu-id="93480-106">Recibir mensajes de varias partes con el adaptador de POP3</span><span class="sxs-lookup"><span data-stu-id="93480-106">Receiving Multi part Messages with the POP3 Adapter</span></span>  
 <span data-ttu-id="93480-107">Si tiene una ubicación de recepción que usa el adaptador de POP3 el **aplicar descodificación MIME** opción establecida en **True** , a continuación, el adaptador de POP3 lleva a cabo las siguientes acciones al recibir un mensaje codificado con MIME:</span><span class="sxs-lookup"><span data-stu-id="93480-107">If a receive location that uses the POP3 adapter has the **Apply MIME Decoding** option set to **True** then the POP3 adapter performs the following actions when receiving a MIME-encoded message:</span></span>  
  
1.  <span data-ttu-id="93480-108">Crea un mensaje de BizTalk de varias partes a partir de las partes del mensaje codificado con MIME que recibe.</span><span class="sxs-lookup"><span data-stu-id="93480-108">Creates a multi part BizTalk message from the parts of the MIME encoded message that it receives.</span></span> <span data-ttu-id="93480-109">Este mensaje de varias partes puede contener 1 o varias partes y tendrá el mismo número de partes que el mensaje codificado con MIME recibido.</span><span class="sxs-lookup"><span data-stu-id="93480-109">This multi part message can contain from 1 to many parts and will contain the same number of parts as the MIME encoded message that is received.</span></span>  
  
2.  <span data-ttu-id="93480-110">Detecta los encabezados del mensaje codificado con MIME.</span><span class="sxs-lookup"><span data-stu-id="93480-110">Scans the headers of the MIME encoded message.</span></span> <span data-ttu-id="93480-111">Si los encabezados coinciden con la lista de propiedades que se documentan en el tema [propiedades y esquema de propiedades de adaptador de POP3](../core/pop3-adapter-property-schema-and-properties.md) , a continuación, estos encabezados se promocionan al mensaje de BizTalk de varias partes como propiedades de contexto.</span><span class="sxs-lookup"><span data-stu-id="93480-111">If any headers match the list of properties documented in the topic [POP3 Adapter Property Schema and Properties](../core/pop3-adapter-property-schema-and-properties.md) then these headers are promoted to the multi part BizTalk message as context properties.</span></span>  
  
3.  <span data-ttu-id="93480-112">Usa un algoritmo configurable para designar una de las partes del mensaje codificado con MIME como parte del cuerpo del mensaje de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="93480-112">Uses a configurable algorithm to designate one of the parts of the MIME encoded message as the BizTalk message body part.</span></span> <span data-ttu-id="93480-113">El algoritmo utilizado para determinar qué parte del mensaje será la parte del cuerpo de mensaje de BizTalk se describe a continuación en la sección **cuerpo parte selección algoritmo utilizado por el adaptador de POP3**.</span><span class="sxs-lookup"><span data-stu-id="93480-113">The algorithm used to determine which message part will be the BizTalk message body part is described below in the section **Body Part Selection Algorithm Used by the POP3 Adapter**.</span></span>  
  
4.  <span data-ttu-id="93480-114">Publica el mensaje de BizTalk de varias partes en el cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="93480-114">Publishes the multi part BizTalk message to the MessageBox.</span></span>  
  
## <a name="body-part-selection-algorithm-used-by-the-pop3-adapter"></a><span data-ttu-id="93480-115">Algoritmo de selección de parte del cuerpo usado por el adaptador de POP3</span><span class="sxs-lookup"><span data-stu-id="93480-115">Body Part Selection Algorithm Used by the POP3 Adapter</span></span>  
 <span data-ttu-id="93480-116">Cuando el adaptador de POP3 crea un mensaje de BizTalk de varias partes a partir de las partes del mensaje codificado con MIME recibido, se selecciona una de las partes del mensaje como parte del cuerpo del mensaje de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="93480-116">When the POP3 adapter creates a multipart BizTalk message from the parts of the MIME-encoded message that it receives, it selects one of the message parts as the BizTalk message body part.</span></span> <span data-ttu-id="93480-117">La parte del cuerpo del mensaje de BizTalk la usa BizTalk Server para la validación del mensaje, asignación, promoción de propiedades, ensamblado de archivo sin formato y otras operaciones.</span><span class="sxs-lookup"><span data-stu-id="93480-117">The BizTalk message body part is used by BizTalk Server for things such as message validation, mapping, property promotion, flat file assembly and other operations.</span></span> <span data-ttu-id="93480-118">Los suscriptores a un mensaje de BizTalk de varias partes reciben todas las partes del mensaje pero sólo consumirán la parte designada del cuerpo del mensaje de BizTalk a menos que utilicen una orquestación, una canalización personalizada o un adaptador que pueda comprender mensajes de varias partes.</span><span class="sxs-lookup"><span data-stu-id="93480-118">Subscribers to a multi part BizTalk message receive all of the message parts but will only consume the designated BizTalk message body part unless using an orchestration, a custom pipeline, or an adapter that can understand multi part messages.</span></span> <span data-ttu-id="93480-119">Por ejemplo, puede configurar una orquestación para leer todas las partes de un mensaje de varias partes; el adaptador de SMTP puede leer todas las partes de un mensaje de varias partes y se puede configurar una canalización personalizada para usar el componente de canalización de codificador de MIME/SMIME.</span><span class="sxs-lookup"><span data-stu-id="93480-119">For example, you can configure an orchestration to read all parts of multi part message; the SMTP adapter can read all of the parts of a multi part message, and a custom pipeline can be configured to use the MIME/SMIME encoder pipeline component.</span></span> <span data-ttu-id="93480-120">Para obtener más información sobre el uso de una orquestación para consumir un mensaje de varias partes, vea la sección siguiente, **de procesamiento de mensajes de varias partes en orquestaciones**.</span><span class="sxs-lookup"><span data-stu-id="93480-120">For more information about using an orchestration to consume a multi part message see the section below, **Processing Multi Part Messages in Orchestrations**.</span></span>  
  
 <span data-ttu-id="93480-121">El adaptador de POP3 selecciona la parte del cuerpo de mensaje de BizTalk de las partes del cuerpo disponibles en función de los valores suministrados para la **índice de parte del cuerpo** y **tipo de contenido de parte de cuerpo**.</span><span class="sxs-lookup"><span data-stu-id="93480-121">The POP3 adapter selects the BizTalk message body part from the available body parts based upon the values supplied for the **Body Part Index** and the **Body Part Content Type**.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="93480-122">El adaptador de POP3 está diseñado para reconocer los tipos de contenido de parte de cuerpo que se definen en [RFC 2046](http://go.microsoft.com/fwlink/?LinkId=119569).</span><span class="sxs-lookup"><span data-stu-id="93480-122">The POP3 adapter is designed to recognize the Body Part Content Types that are defined in [RFC 2046](http://go.microsoft.com/fwlink/?LinkId=119569).</span></span>  
  
 <span data-ttu-id="93480-123">El algoritmo que se usa para seleccionar la parte del cuerpo del mensaje de BizTalk de un correo electrónico se describe a continuación:</span><span class="sxs-lookup"><span data-stu-id="93480-123">The algorithm that is used to select the BizTalk message body part of an e-mail is described below:</span></span>  
  
1.  <span data-ttu-id="93480-124">Si el **índice de parte del cuerpo** se establece en 0 y el **tipo de contenido de parte de cuerpo** está en blanco, a continuación, se utiliza el siguiente algoritmo para seleccionar la parte del cuerpo de mensaje de BizTalk:</span><span class="sxs-lookup"><span data-stu-id="93480-124">If the **Body Part Index** is set to 0 and the **Body Part Content Type** is blank then the following algorithm is used to select the BizTalk message body part:</span></span>  
  
    -   <span data-ttu-id="93480-125">Use la primera parte MIME con el encabezado de descripción de contenido establecido como "cuerpo".</span><span class="sxs-lookup"><span data-stu-id="93480-125">Use the first MIME part with the Content-Description header set to "body".</span></span>  
  
    -   <span data-ttu-id="93480-126">De lo contrario, use la primera parte MIME con el encabezado de tipo de contenido establecido como "texto/xml".</span><span class="sxs-lookup"><span data-stu-id="93480-126">Otherwise use the first MIME part with the Content-Type header set to "text/xml".</span></span>  
  
    -   <span data-ttu-id="93480-127">De lo contrario, use la primera parte MIME con el encabezado de tipo de contenido establecido como "texto/sin formato".</span><span class="sxs-lookup"><span data-stu-id="93480-127">Otherwise use the first MIME part with the Content-Type header set to "text/plain".</span></span>  
  
    -   <span data-ttu-id="93480-128">En caso contrario, utilice la primera parte MIME con el encabezado Content-Type establecido en "texto /".</span><span class="sxs-lookup"><span data-stu-id="93480-128">Otherwise use the first MIME part with the Content-Type header set to "text/".</span></span>  
  
    -   <span data-ttu-id="93480-129">O bien, utilice la primera parte MIME.</span><span class="sxs-lookup"><span data-stu-id="93480-129">Otherwise use the first MIME part.</span></span>  
  
2.  <span data-ttu-id="93480-130">En caso contrario si el **índice de parte del cuerpo** se establece en 0 y el **tipo de contenido de parte de cuerpo** , entonces la primera parte del cuerpo del mensaje entrante que coincida con lo especificado **tipo de contenido de parte de cuerpo** se selecciona como parte del cuerpo del mensaje de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="93480-130">Otherwise if the **Body Part Index** is set to 0 and the **Body Part Content Type** is set, then the first body part of the incoming message that matches the specified **Body Part Content Type** is selected as the BizTalk message body part.</span></span> <span data-ttu-id="93480-131">Si no hay partes con un tipo de contenido coincidente, el mensaje se suspende.</span><span class="sxs-lookup"><span data-stu-id="93480-131">If there are no parts with a matching content type then the message is suspended.</span></span>  
  
3.  <span data-ttu-id="93480-132">En caso contrario si el **índice de parte del cuerpo** se establece en un valor mayor que 0 y el **tipo de contenido de parte de cuerpo** está en blanco, a continuación, se selecciona la parte del cuerpo con el índice especificado como parte del cuerpo del mensaje de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="93480-132">Otherwise if the **Body Part Index** is set to a value greater than 0 and the **Body Part Content Type** is blank, then the body part with the specified index is selected as the BizTalk message body part.</span></span> <span data-ttu-id="93480-133">Si el índice especificado es mayor que el número de partes del cuerpo, el mensaje se suspende.</span><span class="sxs-lookup"><span data-stu-id="93480-133">If the specified index is greater than the number of body parts then the message is suspended.</span></span>  
  
4.  <span data-ttu-id="93480-134">Lo contrario si el **índice de parte del cuerpo** se establece en un valor mayor que 0 y el **tipo de contenido de parte de cuerpo** está establecida, la **índice de parte del cuerpo** solo se aplica cuerpo a las partes que coinciden con la cadena **tipo de contenido de parte de cuerpo** y la parte del cuerpo correspondiente se selecciona como parte del cuerpo del mensaje de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="93480-134">Otherwise if the **Body Part Index** is set to a value greater than 0 and the **Body Part Content Type** is set, then the **Body Part Index** is only applied to those body parts that match the specified **Body Part Content Type** and the corresponding body part is selected as the BizTalk message body part.</span></span> <span data-ttu-id="93480-135">Si el índice especificado es mayor que el número de partes con un tipo de contenido coincidente, el mensaje se suspende.</span><span class="sxs-lookup"><span data-stu-id="93480-135">If the specified index is greater than the number of parts with a matching content type then the message is suspended.</span></span> <span data-ttu-id="93480-136">Si no hay partes con un tipo de contenido coincidente, el mensaje se suspende.</span><span class="sxs-lookup"><span data-stu-id="93480-136">If there are no parts with a matching content type then the message is suspended.</span></span>  
  
5.  <span data-ttu-id="93480-137">La parte que se selecciona como parte del cuerpo del mensaje de BizTalk se convierte en la primera parte del mensaje de BizTalk de varias partes que se publica en el cuadro de mensajes, las partes restantes del mensaje conservan el orden que tenían en el mensaje original codificado con MIME.</span><span class="sxs-lookup"><span data-stu-id="93480-137">The part that is selected as the BizTalk message body part becomes the first part of the multi part BizTalk message that is published to the MessageBox, the remaining parts of the message maintain the order that they had in the original MIME encoded message.</span></span>  
  
## <a name="processing-multi-part-messages-in-orchestrations"></a><span data-ttu-id="93480-138">Procesar mensajes de varias partes en orquestaciones</span><span class="sxs-lookup"><span data-stu-id="93480-138">Processing Multi Part Messages in Orchestrations</span></span>  
 <span data-ttu-id="93480-139">Si el adaptador de POP3 crea un mensaje de BizTalk de varias partes a partir del mensaje codificado con MIME recibido, todas las partes se publican en la base de datos de cuadro de mensajes aunque sólo se designe una de las partes como parte del cuerpo del mensaje de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="93480-139">When the POP3 adapter creates a multi part BizTalk message from a MIME encoded message that it receives, all of the parts are published to the MessageBox database even though only one of the parts is designated as the BizTalk message body part.</span></span> <span data-ttu-id="93480-140">Por consiguiente, una orquestación suscrita al mensaje de varias partes consume una orquestación.</span><span class="sxs-lookup"><span data-stu-id="93480-140">These parts can be subsequently consumed by an orchestration that subscribes to the multi part message.</span></span> <span data-ttu-id="93480-141">En esta sección se documentan algunas consideraciones al procesar mensajes de varias partes en una orquestación.</span><span class="sxs-lookup"><span data-stu-id="93480-141">This section documents some considerations when processing multi part messages in an orchestration.</span></span>  
  
### <a name="processing-multi-part-messages-with-a-known-number-of-parts-and-known-part-types"></a><span data-ttu-id="93480-142">Procesar mensajes de varias partes con un número de partes y tipos de partes conocidos</span><span class="sxs-lookup"><span data-stu-id="93480-142">Processing multi part messages with a known number of parts and known part types</span></span>  
 <span data-ttu-id="93480-143">Si la orquestación recibe un mensaje de varias partes con un número de partes y tipos de partes conocidos, puede declarar un mensaje de varias partes en la orquestación y establecer el número de partes y tipos de partes en tiempo de diseño.</span><span class="sxs-lookup"><span data-stu-id="93480-143">If your orchestration is receiving a multi part message with a known number of parts and known part types then you can declare a multi part message in the orchestration and set the number of parts and part types at design time.</span></span>  
  
### <a name="processing-multi-part-messages-with-unknown-part-types"></a><span data-ttu-id="93480-144">Procesar mensajes de varias partes con tipos de partes desconocidos</span><span class="sxs-lookup"><span data-stu-id="93480-144">Processing multi part messages with unknown part types</span></span>  
 <span data-ttu-id="93480-145">Si la orquestación recibe un mensaje de varias partes con tipos de partes desconocidos, a continuación, puede declarar un mensaje de varias partes en la orquestación y utilizar el **XmlDocument** tipo para cada uno de los elementos para los que el tipo es desconocido.</span><span class="sxs-lookup"><span data-stu-id="93480-145">If your orchestration is receiving a multi part message with unknown part types then you can declare a multi part message in the orchestration and use the **XmlDocument** type for each of the parts for which the type is unknown.</span></span>  
  
### <a name="processing-multi-part-messages-with-an-unknown-number-of-parts-and-all-of-the-part-types-are-unknown"></a><span data-ttu-id="93480-146">Procesar mensajes de varias partes con un número y todos los tipos de partes desconocidos</span><span class="sxs-lookup"><span data-stu-id="93480-146">Processing multi part messages with an unknown number of parts and all of the part types are unknown</span></span>  
 <span data-ttu-id="93480-147">Si la orquestación recibe un mensaje de varias partes con un número desconocido de partes, a continuación, puede declarar un mensaje de varias partes con una única parte de la **XmlDocument** tipo en la orquestación para recibir el mensaje.</span><span class="sxs-lookup"><span data-stu-id="93480-147">If your orchestration is receiving a multi part message with an unknown number of parts then you can declare a multi part message with a single part of the **XmlDocument** type in the orchestration to receive the message.</span></span> <span data-ttu-id="93480-148">Si se recibe un mensaje de varias partes que contiene mayor que el número de partes declarados, las lecturas de motor de orquestación están cuántos elementos hay en el mensaje, a continuación, crea los tipos de partes apropiados para los elementos que coinciden con el número de partes del mensaje declarado tipo y, a continuación, las construcciones **XmlDocument** partes de las partes restantes.</span><span class="sxs-lookup"><span data-stu-id="93480-148">If a multi part message that contains greater than the number of declared parts is received, the orchestration engine reads how many parts there are in the message, then constructs the proper part types for the parts that match the number of parts in the declared message type and then constructs **XmlDocument** parts for the remaining parts.</span></span>
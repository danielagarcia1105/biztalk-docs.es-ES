---
title: Medir el rendimiento de seguimiento sostenible máximo | Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 35605427-0217-4bdd-8b4a-3e68b3f5f452
caps.latest.revision: 20
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: d68d1661a86858b8d2bca1bb067c8fa17ea421e3
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/27/2018
ms.locfileid: "37017065"
---
# <a name="measuring-maximum-sustainable-tracking-throughput"></a><span data-ttu-id="642ad-102">Medir el rendimiento de seguimiento sostenible máximo</span><span class="sxs-lookup"><span data-stu-id="642ad-102">Measuring Maximum Sustainable Tracking Throughput</span></span>
<span data-ttu-id="642ad-103">Después de implementar una solución de línea empresarial en la plataforma de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], debe realizar un seguimiento y supervisar el sistema para comprender lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="642ad-103">After you deploy a line of business solution onto the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] platform, you should track and monitor the system to understand the following:</span></span>  
  
- <span data-ttu-id="642ad-104">Cómo funciona el sistema</span><span class="sxs-lookup"><span data-stu-id="642ad-104">How the system is performing</span></span>  
  
- <span data-ttu-id="642ad-105">Qué excepciones y errores pueden ocurrir y sus causas</span><span class="sxs-lookup"><span data-stu-id="642ad-105">What exceptions and errors may be occurring and why</span></span>  
  
- <span data-ttu-id="642ad-106">El estado actual de los procesos empresariales implementados como soluciones de BizTalk</span><span class="sxs-lookup"><span data-stu-id="642ad-106">The current state of the business processes implemented as BizTalk solutions</span></span>  
  
  <span data-ttu-id="642ad-107">Para muchas organizaciones, también es importante registrar los mensajes sin procesar reales que fluyen a través del sistema para fines sin repudio.</span><span class="sxs-lookup"><span data-stu-id="642ad-107">For many organizations, it is also important to record the actual raw messages flowing through the system for non-repudiation purposes.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="642ad-108"> proporciona dos tipos de funcionalidad de seguimiento que cubren estos requisitos:</span><span class="sxs-lookup"><span data-stu-id="642ad-108"> provides two types of tracking functionality that address these requirements:</span></span>  
  
- <span data-ttu-id="642ad-109">**Seguimiento Data Tracking and Activity (DTA) de seguimiento**.</span><span class="sxs-lookup"><span data-stu-id="642ad-109">**Data Tracking and Activity (DTA) tracking**.</span></span> <span data-ttu-id="642ad-110">DTA realiza un seguimiento de una serie de propiedades de mensajes definidos por el usuario, eventos de depuración de orquestación, eventos de flujo de mensajes y estado de instancia de servicio.</span><span class="sxs-lookup"><span data-stu-id="642ad-110">DTA tracks a variety of user-defined message properties, orchestration debug events, message flow events, and service instance status.</span></span> <span data-ttu-id="642ad-111">El seguimiento se usa para consultar los datos almacenados en la base de datos de seguimiento de BizTalk DTA (BizTalkDTADb).</span><span class="sxs-lookup"><span data-stu-id="642ad-111">You use tracking to query the data stored in the BizTalk DTA Tracking database (BizTalkDTADb).</span></span> <span data-ttu-id="642ad-112">El seguimiento DTA también incluye el seguimiento de mensajes sin procesar, denominados cuerpos de mensaje, para evitar el rechazo y solucionar problemas.</span><span class="sxs-lookup"><span data-stu-id="642ad-112">DTA tracking also includes the tracking of raw messages, known as message bodies, for non-repudiation and problem resolution purposes.</span></span>  
  
- <span data-ttu-id="642ad-113">**Seguimiento de Business Activity Monitoring (BAM)**.</span><span class="sxs-lookup"><span data-stu-id="642ad-113">**Business Activity Monitoring (BAM) tracking**.</span></span> <span data-ttu-id="642ad-114">BAM utiliza un perfil de seguimiento definido por el usuario para realizar el seguimiento del estado de un proceso empresarial registrándolo en un conjunto especial de bases de datos de BAM.</span><span class="sxs-lookup"><span data-stu-id="642ad-114">BAM uses a user-defined tracking profile to track the state of a business process into a special set of BAM databases.</span></span>  
  
  <span data-ttu-id="642ad-115">En este tema, se describe la arquitectura DTA y un enfoque sistemático para determinar el rendimiento sostenible máximo que puede mantener indefinidamente un sistema que emplee DTA.</span><span class="sxs-lookup"><span data-stu-id="642ad-115">In this topic, we describe the DTA architecture and a systematic approach to determine the maximum sustainable throughput that a system employing DTA can sustain indefinitely.</span></span> <span data-ttu-id="642ad-116">Aunque DTA y BAM comparten algunos componentes de arquitectura, este tema sólo se ocupa del comportamiento de DTA.</span><span class="sxs-lookup"><span data-stu-id="642ad-116">Although DTA and BAM share some architectural components, this topic covers the behavior of DTA only.</span></span> <span data-ttu-id="642ad-117">Para obtener información acerca de la arquitectura BAM, consulte [supervisión de la actividad económica (BAM)](../core/business-activity-monitoring-bam.md).</span><span class="sxs-lookup"><span data-stu-id="642ad-117">For information about BAM architecture, see [Business Activity Monitoring (BAM)](../core/business-activity-monitoring-bam.md).</span></span>  
  
## <a name="overview-of-dta-tracking-architecture"></a><span data-ttu-id="642ad-118">Información general sobre la arquitectura de seguimiento de DTA</span><span class="sxs-lookup"><span data-stu-id="642ad-118">Overview of DTA Tracking Architecture</span></span>  
 <span data-ttu-id="642ad-119">A medida que se transmiten mensajes por el sistema, varios elementos a los que se está realizando un seguimiento como cuerpos de mensaje, propiedades y eventos, pasan por una serie procesos y bases de datos hasta que finalmente se escriben en la base de datos BizTalkDTADb.</span><span class="sxs-lookup"><span data-stu-id="642ad-119">As messages flow through the system, various tracked elements such as message bodies, properties, and events, pass through a series of processes and databases that ultimately result in writing them to the BizTalkDTADb database.</span></span> <span data-ttu-id="642ad-120">Después de escribir los elementos en la base de datos BizTalkDTADb, puede usar el seguimiento para consultar la información obtenida.</span><span class="sxs-lookup"><span data-stu-id="642ad-120">After the elements are written to the BizTalkDTADb database, you can use tracking to query the tracked information.</span></span> <span data-ttu-id="642ad-121">Para obtener información acerca de cómo configurar y usar BizTalkDTADb de base de datos y seguimiento, vea [ver históricos y datos de seguimiento](../core/viewing-historical-and-tracked-data.md).</span><span class="sxs-lookup"><span data-stu-id="642ad-121">For information about setting up and using the BizTalkDTADb database and tracking, see [Viewing Historical and Tracked Data](../core/viewing-historical-and-tracked-data.md).</span></span>  
  
 <span data-ttu-id="642ad-122">Para asegurarse de que el sistema es sostenible y de que se ejecutará indefinidamente con un determinado flujo de mensajes, la ruta que realizó el seguimiento de los elementos hacia la base de datos BizTalkDTADb y la base de datos en sí, deben permanecer en buen estado.</span><span class="sxs-lookup"><span data-stu-id="642ad-122">To ensure that the system is sustainable and will run indefinitely at a given message flow rate, the pathway that tracked elements pass through on their way to the BizTalkDTADb database, and the database itself, need to remain healthy.</span></span> <span data-ttu-id="642ad-123">Por ejemplo, los mensajes que se crean en las tablas de las bases de datos durante el proceso, o en DTA, pueden ocasionar un crecimiento de archivos de bases de datos sin enlazar que no es sostenible si no se administra correctamente.</span><span class="sxs-lookup"><span data-stu-id="642ad-123">For example, messages building up in database tables along the way, or in the DTA, can cause unbounded database file growth that would not be sustainable if not properly managed.</span></span>  
  
 <span data-ttu-id="642ad-124">Por ello, empecemos por comprender la arquitectura y las rutas que realizaron el seguimiento de los flujos de información.</span><span class="sxs-lookup"><span data-stu-id="642ad-124">So, let's start by understanding the architecture and pathways that tracked information flows through.</span></span> <span data-ttu-id="642ad-125">Esto expondrá los recursos clave y los indicadores de rendimiento que debe supervisar para determinar si el sistema de seguimiento controla correctamente el tráfico de mensajes que pasan por el motor de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="642ad-125">This will expose the key resources and performance indicators that you must monitor to determine how well the tracking system is keeping up with the message traffic flowing through the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] engine.</span></span>  
  
 <span data-ttu-id="642ad-126">La siguiente ilustración muestra información general de la arquitectura de seguimiento de DTA y las rutas.</span><span class="sxs-lookup"><span data-stu-id="642ad-126">The following figure shows an overview of the DTA tracking architecture and pathways.</span></span>  
  
 <span data-ttu-id="642ad-127">![Información general sobre el seguimiento de DTA](../core/media/dtatrackingoverview.gif "DTATrackingOverview")</span><span class="sxs-lookup"><span data-stu-id="642ad-127">![DTA tracking overview](../core/media/dtatrackingoverview.gif "DTATrackingOverview")</span></span>  
  
 <span data-ttu-id="642ad-128">Siguiendo el orden de los procesos numerados de la ilustración, todos los datos a los que se realizó un seguimiento de DTA entran y salen de la base de datos BizTalkDTADb de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="642ad-128">Taking the numbered processes from the figure in order, all DTA tracked data flows into and out of the BizTalkDTADb database as follows:</span></span>  
  
1. <span data-ttu-id="642ad-129">El proceso en tiempo de ejecución del servidor BizTalk Server incluye un componente denominado el interceptor.</span><span class="sxs-lookup"><span data-stu-id="642ad-129">The BizTalk Server runtime process includes a component called the interceptor.</span></span> <span data-ttu-id="642ad-130">El trabajo del interceptor es almacenar en caché los elementos a los que se ha realizado un seguimiento en tiempo de ejecución y la siguiente vez que pasen por la base de datos de cuadro de mensajes, (por ejemplo, poniendo en cola un mensaje en la base de datos de cuadro de mensajes), envía los elementos almacenados en caché a esta base de datos.</span><span class="sxs-lookup"><span data-stu-id="642ad-130">The interceptor’s job is to cache the tracked elements at runtime and, upon the next MessageBox database roundtrip (for example, en-queuing a message to the MessageBox database), forwards the cached elements to the MessageBox database.</span></span> <span data-ttu-id="642ad-131">El interceptor determina a qué elementos se les debe realizar un seguimiento fijándose en la configuración de seguimiento (denominado también perfil de seguimiento) que se obtiene de la base de datos de administración y que se almacena en caché en cada instancia de host en tiempo de ejecución para que la utilice el interceptor.</span><span class="sxs-lookup"><span data-stu-id="642ad-131">The interceptor determines what elements to track by looking at the tracking configuration (also known as a tracking profile) which is obtained from the management database and cached in each host runtime instance for use by the interceptor.</span></span>  
  
    <span data-ttu-id="642ad-132">Como se muestra en la ilustración anterior, existen dos secuencias de datos insertadas en la base de datos de cuadro de mensajes:</span><span class="sxs-lookup"><span data-stu-id="642ad-132">As shown in the above figure, there are two data streams inserted into the MessageBox database:</span></span>  
  
   - <span data-ttu-id="642ad-133">Una representada por la tabla Cola de impresión</span><span class="sxs-lookup"><span data-stu-id="642ad-133">One represented by the Spool table</span></span>  
  
   - <span data-ttu-id="642ad-134">Otra por la tabla TrackingData</span><span class="sxs-lookup"><span data-stu-id="642ad-134">One by the TrackingData table</span></span>  
  
     <span data-ttu-id="642ad-135">Los cuerpos de mensaje a los que se ha realizado el seguimiento utilizan ambas secuencias.</span><span class="sxs-lookup"><span data-stu-id="642ad-135">Tracked message bodies use both streams.</span></span> <span data-ttu-id="642ad-136">Es decir, los cuerpos de mensaje en sí (son como blob de datos) se controlan mediante un conjunto de tablas representadas por la tabla de cola de impresión.</span><span class="sxs-lookup"><span data-stu-id="642ad-136">That is, the message bodies themselves (think of them as blobs of data) are handled via a set of tables represented by the spool table.</span></span> <span data-ttu-id="642ad-137">Los eventos de mensaje asociados con los cuerpos de los mensajes (por ejemplo, los identificadores de mensaje, cuándo se realizó un seguimiento a los cuerpos de los mensajes, con qué instancias están asociados los cuerpos de mensaje) se controlan mediante la tabla TrackingData.</span><span class="sxs-lookup"><span data-stu-id="642ad-137">The message events associated with the message bodies (for example, message identifiers, when the message bodies were tracked, what instances the message bodies are associated with) are handled via the TrackingData table.</span></span> <span data-ttu-id="642ad-138">Todos los elementos a los que se ha realizado un seguimiento que no estén asociados con seguimiento de cuerpo de mensajes sólo se controlan mediante la tabla TrackingData.</span><span class="sxs-lookup"><span data-stu-id="642ad-138">All tracked elements not associated with message body tracking are handled via the TrackingData table only.</span></span>  
  
2. <span data-ttu-id="642ad-139">La base de datos de cuadro de mensajes no es más que el primer paso para los datos a los que se ha realizado un seguimiento y se utiliza para almacenar en caché estos datos de modo que el tiempo de ejecución pueda continuar procesando sin verse bloqueado directamente por más procesamiento de datos de seguimiento. </span><span class="sxs-lookup"><span data-stu-id="642ad-139">The MessageBox database is just the first stop for tracked data and is used to cache the tracked data so that the runtime can continue processing without being directly blocked by further tracking data processing.</span></span>  
  
    <span data-ttu-id="642ad-140">Para transferir los cuerpos de los mensajes controlados (blob) a la base de datos BizTalkDTADb en la que puede verlos y archivarlos de una forma más permanente, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] emplea un trabajo del Agente SQL denominado TrackedMessages_Copy_BizTalkMsgBoxDb, que se ejecuta en cada servidor de base de datos de cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="642ad-140">To get the tracked message bodies (blobs) transferred to the BizTalkDTADb database where you can view and archive them to more permanent storage, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] employs a SQL Agent job called TrackedMessages_Copy_BizTalkMsgBoxDb which runs on each MessageBox database server.</span></span> <span data-ttu-id="642ad-141">Es responsabilidad de este trabajo copiar los cuerpos de los mensajes marcados para recibir un seguimiento en la base de datos BizTalkDTADb.</span><span class="sxs-lookup"><span data-stu-id="642ad-141">It is the responsibility of this job to copy the message bodies marked for tracking to the BizTalkDTADb database.</span></span>  
  
3. <span data-ttu-id="642ad-142">Un servicio denominado TDDS que se ejecuta en uno o más de los hosts de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] mueve todos los datos controlados, excepto los cuerpos de los mensajes, desde la base de datos de cuadro de mensajes hacia la base de datos BizTalkDTADb.</span><span class="sxs-lookup"><span data-stu-id="642ad-142">All of the tracked data other than message bodies are moved from the MessageBox database to the BizTalkDTADb database by a service called TDDS which runs in one or more of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] hosts.</span></span> <span data-ttu-id="642ad-143">Siempre que un host está configurado como Seguimiento de host mediante las páginas de propiedades de host en la consola de administración de BizTalk Server, el subservicio TDDS se ejecutará en cada instancia de ese host.</span><span class="sxs-lookup"><span data-stu-id="642ad-143">Whenever a host is configured as Hosts Tracking via the host property pages in the BizTalk Server administration console, the TDDS sub-service will run in every instance of that host.</span></span>  
  
4. <span data-ttu-id="642ad-144">A menos que la base de datos BizTalkDTADb se purgue periódicamente, crecerá sin enlazar de modo que puede llegar a tener problemas operativos.</span><span class="sxs-lookup"><span data-stu-id="642ad-144">Unless the BizTalkDTADb database is purged periodically, it will grow unbounded which will eventually lead to operational problems.</span></span> <span data-ttu-id="642ad-145">Existe un solo trabajo del Agente SQL denominado DTA Purge and Archive (BizTalkDTADb) que realiza la tarea de purgar la base de datos de BizTalkDTADb.</span><span class="sxs-lookup"><span data-stu-id="642ad-145">There is a single SQL Agent job called DTA Purge and Archive (BizTalkDTADb) that performs the task of purging the BizTalkDTADb database.</span></span> <span data-ttu-id="642ad-146">Este trabajo se ejecuta cada minuto de forma predeterminada y purga todas las instancias completas anteriores a un tiempo determinado que configure el usuario (por ejemplo, 24 horas).</span><span class="sxs-lookup"><span data-stu-id="642ad-146">By default, this job runs every minute and purges all completed instances older than some user configured time (for example, 24hours).</span></span>  
  
    <span data-ttu-id="642ad-147">Para obtener más información sobre el trabajo DTA Purge and Archive, consulte [cómo configurar el trabajo DTA Purge and Archive](../core/how-to-configure-the-dta-purge-and-archive-job.md).</span><span class="sxs-lookup"><span data-stu-id="642ad-147">For more information abut the DTA Purge and Archive job, see [How to Configure the DTA Purge and Archive Job](../core/how-to-configure-the-dta-purge-and-archive-job.md).</span></span>  
  
5. <span data-ttu-id="642ad-148">Asimismo, el trabajo DTA Purge and Archive puede archivar los datos de BizTalkDTADb como una copia de seguridad de SQL para almacenarlos a largo plazo o ver los datos sin conexión.</span><span class="sxs-lookup"><span data-stu-id="642ad-148">Optionally, the DTA Purge and Archive job can also archive the BizTalkDTADb data as a SQL Backup for longer term storage and/or off-line viewing of the data.</span></span> <span data-ttu-id="642ad-149">Si se necesita consultar los datos archivados en BizTalkDTADb, primero se deben restaurar como una base de datos nueva en el servidor SQL Server y después se puede usar el seguimiento o el Analizador de consultas SQL para consultarlos.</span><span class="sxs-lookup"><span data-stu-id="642ad-149">If the archived BizTalkDTADb data needs to be queried, it must first be restored as a new database in SQL Server and then you can use tracking or the SQL Query Analyzer to query it.</span></span>  
  
## <a name="in-this-section"></a><span data-ttu-id="642ad-150">En esta sección</span><span class="sxs-lookup"><span data-stu-id="642ad-150">In This Section</span></span>  
  
-   [<span data-ttu-id="642ad-151">Comprender el comportamiento del rendimiento de seguimiento de DTA</span><span class="sxs-lookup"><span data-stu-id="642ad-151">Understanding DTA Tracking Performance Behavior</span></span>](../core/understanding-dta-tracking-performance-behavior.md)  
  
-   [<span data-ttu-id="642ad-152">Escenarios de prueba para medir MST de seguimiento de DTA</span><span class="sxs-lookup"><span data-stu-id="642ad-152">Test Scenarios for Measuring MST of DTA Tracking</span></span>](../core/test-scenarios-for-measuring-mst-of-dta-tracking.md)  
  
-   [<span data-ttu-id="642ad-153">Sugerencias y trucos para buscar MST de seguimiento de DTA</span><span class="sxs-lookup"><span data-stu-id="642ad-153">Tips and Tricks for Finding MST of DTA Tracking</span></span>](../core/tips-and-tricks-for-finding-mst-of-dta-tracking.md)  
  
## <a name="see-also"></a><span data-ttu-id="642ad-154">Vea también</span><span class="sxs-lookup"><span data-stu-id="642ad-154">See Also</span></span>  
 [<span data-ttu-id="642ad-155">Instrucciones para ajustar el tamaño de la base de datos de seguimiento</span><span class="sxs-lookup"><span data-stu-id="642ad-155">Tracking Database Sizing Guidelines</span></span>](../core/tracking-database-sizing-guidelines.md)
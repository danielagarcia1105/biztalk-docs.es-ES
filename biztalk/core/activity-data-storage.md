---
title: Almacenamiento de datos de actividad | Documentos de Microsoft
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- performance, BAM
- databases [BAM], performance
- activities [BAM], peformance
- databases [BAM], partitioning
- BAM, performance
ms.assetid: 1f736599-3d16-496e-a459-8b0507d57fcb
caps.latest.revision: "6"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 0139e76512eb9ca60089cb3c5f1e71b4f5524690
ms.sourcegitcommit: 5abd0ed3f9e4858ffaaec5481bfa8878595e95f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/28/2017
---
# <a name="activity-data-storage"></a><span data-ttu-id="3426f-102">Almacenamiento de datos de actividad</span><span class="sxs-lookup"><span data-stu-id="3426f-102">Activity Data Storage</span></span>
<span data-ttu-id="3426f-103">Este tema describe el almacenamiento de datos de actividad, los problemas de rendimiento provocados con el tiempo por el crecimiento de las tablas de actividad y cómo BAM soluciona estos problemas de rendimiento con tablas diferentes de las actividades en ejecución y las completadas.</span><span class="sxs-lookup"><span data-stu-id="3426f-103">This topic describes activity data storage, the performance problems caused by the growth of activity tables over time, and how BAM solves these performance problems with separate tables for activities in progress and completed activities.</span></span> <span data-ttu-id="3426f-104">Este tema también describe la ventana en línea para la realización de consultas de datos y la forma en la que puede realizar particiones en BAM para obtener una mejora del rendimiento.</span><span class="sxs-lookup"><span data-stu-id="3426f-104">This topic also describes the online window for querying data, and how you can use partitioning in BAM for higher performance.</span></span>  
  
 <span data-ttu-id="3426f-105">La idea básica del almacenamiento de datos de actividad es tener tablas diferentes de cada tipo de actividad, en las que cada registro representa un instancia de actividad diferente (por ejemplo, en ejecución o completadas).</span><span class="sxs-lookup"><span data-stu-id="3426f-105">The basic idea of activity data storage is to have a separate table for each activity type, in which each record represents a different activity instance (for example, in-progress or completed).</span></span>  
  
 <span data-ttu-id="3426f-106">En este ejemplo, si la actividad fuera Pedidos, la tabla tendría la siguiente apariencia:</span><span class="sxs-lookup"><span data-stu-id="3426f-106">In this example, if the activity were Purchase Order the table would look as follows:</span></span>  
  
|<span data-ttu-id="3426f-107">PO#</span><span class="sxs-lookup"><span data-stu-id="3426f-107">PO#</span></span>|<span data-ttu-id="3426f-108">RecvTime</span><span class="sxs-lookup"><span data-stu-id="3426f-108">RecvTime</span></span>|<span data-ttu-id="3426f-109">City</span><span class="sxs-lookup"><span data-stu-id="3426f-109">City</span></span>|<span data-ttu-id="3426f-110">Cantidad</span><span class="sxs-lookup"><span data-stu-id="3426f-110">Quantity</span></span>|<span data-ttu-id="3426f-111">ShipTime</span><span class="sxs-lookup"><span data-stu-id="3426f-111">ShipTime</span></span>|<span data-ttu-id="3426f-112">DeliveryTime</span><span class="sxs-lookup"><span data-stu-id="3426f-112">DeliveryTime</span></span>|  
|----------|--------------|----------|--------------|--------------|------------------|  
|<span data-ttu-id="3426f-113">123</span><span class="sxs-lookup"><span data-stu-id="3426f-113">123</span></span>|<span data-ttu-id="3426f-114">8:00 a.m.</span><span class="sxs-lookup"><span data-stu-id="3426f-114">8:00am</span></span>|<span data-ttu-id="3426f-115">Seattle</span><span class="sxs-lookup"><span data-stu-id="3426f-115">Seattle</span></span>|<span data-ttu-id="3426f-116">150</span><span class="sxs-lookup"><span data-stu-id="3426f-116">150</span></span>|<span data-ttu-id="3426f-117">8:24 am</span><span class="sxs-lookup"><span data-stu-id="3426f-117">8:24am</span></span>|<span data-ttu-id="3426f-118">12:45pm</span><span class="sxs-lookup"><span data-stu-id="3426f-118">12:45pm</span></span>|  
|<span data-ttu-id="3426f-119">124</span><span class="sxs-lookup"><span data-stu-id="3426f-119">124</span></span>|<span data-ttu-id="3426f-120">8:30 a.m.</span><span class="sxs-lookup"><span data-stu-id="3426f-120">8:30am</span></span>|<span data-ttu-id="3426f-121">Seattle</span><span class="sxs-lookup"><span data-stu-id="3426f-121">Seattle</span></span>|<span data-ttu-id="3426f-122">234</span><span class="sxs-lookup"><span data-stu-id="3426f-122">234</span></span>|<span data-ttu-id="3426f-123">8:45 a.m.</span><span class="sxs-lookup"><span data-stu-id="3426f-123">8:45am</span></span>|<span data-ttu-id="3426f-124">1:20 p.m.</span><span class="sxs-lookup"><span data-stu-id="3426f-124">1:20pm</span></span>|  
|<span data-ttu-id="3426f-125">125</span><span class="sxs-lookup"><span data-stu-id="3426f-125">125</span></span>|<span data-ttu-id="3426f-126">8:35 am</span><span class="sxs-lookup"><span data-stu-id="3426f-126">8:35am</span></span>|<span data-ttu-id="3426f-127">Redmond</span><span class="sxs-lookup"><span data-stu-id="3426f-127">Redmond</span></span>|<span data-ttu-id="3426f-128">87</span><span class="sxs-lookup"><span data-stu-id="3426f-128">87</span></span>|<span data-ttu-id="3426f-129">9:05 a.m.</span><span class="sxs-lookup"><span data-stu-id="3426f-129">9:05am</span></span>|<span data-ttu-id="3426f-130">2:30 p.m.</span><span class="sxs-lookup"><span data-stu-id="3426f-130">2:30pm</span></span>|  
|<span data-ttu-id="3426f-131">126</span><span class="sxs-lookup"><span data-stu-id="3426f-131">126</span></span>|<span data-ttu-id="3426f-132">8:45 a.m.</span><span class="sxs-lookup"><span data-stu-id="3426f-132">8:45am</span></span>|<span data-ttu-id="3426f-133">Seattle</span><span class="sxs-lookup"><span data-stu-id="3426f-133">Seattle</span></span>|<span data-ttu-id="3426f-134">450</span><span class="sxs-lookup"><span data-stu-id="3426f-134">450</span></span>|<span data-ttu-id="3426f-135">9:20 a.m.</span><span class="sxs-lookup"><span data-stu-id="3426f-135">9:20am</span></span>|<span data-ttu-id="3426f-136">3:10 p.m.</span><span class="sxs-lookup"><span data-stu-id="3426f-136">3:10pm</span></span>|  
|<span data-ttu-id="3426f-137">127</span><span class="sxs-lookup"><span data-stu-id="3426f-137">127</span></span>|<span data-ttu-id="3426f-138">8:55 a. m.</span><span class="sxs-lookup"><span data-stu-id="3426f-138">8:55am</span></span>|<span data-ttu-id="3426f-139">Redmond</span><span class="sxs-lookup"><span data-stu-id="3426f-139">Redmond</span></span>|<span data-ttu-id="3426f-140">200</span><span class="sxs-lookup"><span data-stu-id="3426f-140">200</span></span>|<span data-ttu-id="3426f-141">9:30 a.m.</span><span class="sxs-lookup"><span data-stu-id="3426f-141">9:30am</span></span>|<span data-ttu-id="3426f-142">\<NULL\></span><span class="sxs-lookup"><span data-stu-id="3426f-142">\<NULL\></span></span>|  
|<span data-ttu-id="3426f-143">128</span><span class="sxs-lookup"><span data-stu-id="3426f-143">128</span></span>|<span data-ttu-id="3426f-144">8:57 a.m.</span><span class="sxs-lookup"><span data-stu-id="3426f-144">8:57am</span></span>|<span data-ttu-id="3426f-145">Seattle</span><span class="sxs-lookup"><span data-stu-id="3426f-145">Seattle</span></span>|<span data-ttu-id="3426f-146">340</span><span class="sxs-lookup"><span data-stu-id="3426f-146">340</span></span>|<span data-ttu-id="3426f-147">9:20 a.m.</span><span class="sxs-lookup"><span data-stu-id="3426f-147">9:20am</span></span>|<span data-ttu-id="3426f-148">3:05 p.m.</span><span class="sxs-lookup"><span data-stu-id="3426f-148">3:05pm</span></span>|  
|<span data-ttu-id="3426f-149">129</span><span class="sxs-lookup"><span data-stu-id="3426f-149">129</span></span>|<span data-ttu-id="3426f-150">9:12 am</span><span class="sxs-lookup"><span data-stu-id="3426f-150">9:12am</span></span>|<span data-ttu-id="3426f-151">Seattle</span><span class="sxs-lookup"><span data-stu-id="3426f-151">Seattle</span></span>|<span data-ttu-id="3426f-152">120</span><span class="sxs-lookup"><span data-stu-id="3426f-152">120</span></span>|<span data-ttu-id="3426f-153">9:45 a.m.</span><span class="sxs-lookup"><span data-stu-id="3426f-153">9:45am</span></span>|<span data-ttu-id="3426f-154">\<NULL\></span><span class="sxs-lookup"><span data-stu-id="3426f-154">\<NULL\></span></span>|  
|<span data-ttu-id="3426f-155">130</span><span class="sxs-lookup"><span data-stu-id="3426f-155">130</span></span>|<span data-ttu-id="3426f-156">9:30 a.m.</span><span class="sxs-lookup"><span data-stu-id="3426f-156">9:30am</span></span>|<span data-ttu-id="3426f-157">Redmond</span><span class="sxs-lookup"><span data-stu-id="3426f-157">Redmond</span></span>|<span data-ttu-id="3426f-158">25</span><span class="sxs-lookup"><span data-stu-id="3426f-158">25</span></span>|<span data-ttu-id="3426f-159">10:15 a.m.</span><span class="sxs-lookup"><span data-stu-id="3426f-159">10:15am</span></span>|<span data-ttu-id="3426f-160">\<NULL\></span><span class="sxs-lookup"><span data-stu-id="3426f-160">\<NULL\></span></span>|  
|<span data-ttu-id="3426f-161">131</span><span class="sxs-lookup"><span data-stu-id="3426f-161">131</span></span>|<span data-ttu-id="3426f-162">9:45</span><span class="sxs-lookup"><span data-stu-id="3426f-162">9:45</span></span>|<span data-ttu-id="3426f-163">Seattle</span><span class="sxs-lookup"><span data-stu-id="3426f-163">Seattle</span></span>|<span data-ttu-id="3426f-164">250</span><span class="sxs-lookup"><span data-stu-id="3426f-164">250</span></span>|<span data-ttu-id="3426f-165">10:35 am</span><span class="sxs-lookup"><span data-stu-id="3426f-165">10:35am</span></span>|<span data-ttu-id="3426f-166">\<NULL\></span><span class="sxs-lookup"><span data-stu-id="3426f-166">\<NULL\></span></span>|  
|<span data-ttu-id="3426f-167">132</span><span class="sxs-lookup"><span data-stu-id="3426f-167">132</span></span>|<span data-ttu-id="3426f-168">10:00 a.m.</span><span class="sxs-lookup"><span data-stu-id="3426f-168">10:00am</span></span>|<span data-ttu-id="3426f-169">Redmond</span><span class="sxs-lookup"><span data-stu-id="3426f-169">Redmond</span></span>|<span data-ttu-id="3426f-170">100</span><span class="sxs-lookup"><span data-stu-id="3426f-170">100</span></span>|<span data-ttu-id="3426f-171">\<NULL\></span><span class="sxs-lookup"><span data-stu-id="3426f-171">\<NULL\></span></span>|<span data-ttu-id="3426f-172">\<NULL\></span><span class="sxs-lookup"><span data-stu-id="3426f-172">\<NULL\></span></span>|  
|<span data-ttu-id="3426f-173">133</span><span class="sxs-lookup"><span data-stu-id="3426f-173">133</span></span>|<span data-ttu-id="3426f-174">10:15 a.m.</span><span class="sxs-lookup"><span data-stu-id="3426f-174">10:15am</span></span>|<span data-ttu-id="3426f-175">Seattle</span><span class="sxs-lookup"><span data-stu-id="3426f-175">Seattle</span></span>|<span data-ttu-id="3426f-176">230</span><span class="sxs-lookup"><span data-stu-id="3426f-176">230</span></span>|<span data-ttu-id="3426f-177">\<NULL\></span><span class="sxs-lookup"><span data-stu-id="3426f-177">\<NULL\></span></span>|<span data-ttu-id="3426f-178">\<NULL\></span><span class="sxs-lookup"><span data-stu-id="3426f-178">\<NULL\></span></span>|  
|<span data-ttu-id="3426f-179">134</span><span class="sxs-lookup"><span data-stu-id="3426f-179">134</span></span>|<span data-ttu-id="3426f-180">10:25 a. m.</span><span class="sxs-lookup"><span data-stu-id="3426f-180">10:25am</span></span>|<span data-ttu-id="3426f-181">Redmond</span><span class="sxs-lookup"><span data-stu-id="3426f-181">Redmond</span></span>|<span data-ttu-id="3426f-182">45</span><span class="sxs-lookup"><span data-stu-id="3426f-182">45</span></span>|<span data-ttu-id="3426f-183">\<NULL\></span><span class="sxs-lookup"><span data-stu-id="3426f-183">\<NULL\></span></span>|<span data-ttu-id="3426f-184">\<NULL\></span><span class="sxs-lookup"><span data-stu-id="3426f-184">\<NULL\></span></span>|  
  
 <span data-ttu-id="3426f-185">En esta tabla, cuando BAM recibe un pedido nuevo, se inserta una fila nueva y algunos conjuntos de algunas columnas con valores que no son nulos (RecvTime, City, Quantity, etc.).</span><span class="sxs-lookup"><span data-stu-id="3426f-185">In this table, when BAM receives a new purchase order, it inserts a new row and some sets some of the columns to non-null values (RecvTime, City, Quantity, and so on).</span></span> <span data-ttu-id="3426f-186">Más adelante, cuando apruebe y envíe este pedido, BAM establece el ShipTime para valores que no son nulos</span><span class="sxs-lookup"><span data-stu-id="3426f-186">Later, when you approve and ship this purchase order, BAM sets ShipTime to a non-null value.</span></span> <span data-ttu-id="3426f-187">Finalmente, cuando recibe y confirma el envío, BAM establece DeliveryTime para valores que no son nulos.</span><span class="sxs-lookup"><span data-stu-id="3426f-187">Finally, when you receive and confirm the shipment, BAM sets DeliveryTime to a non-null value.</span></span>  
  
 <span data-ttu-id="3426f-188">El rendimiento de esta implementación simplista empeora rápidamente con el tiempo.</span><span class="sxs-lookup"><span data-stu-id="3426f-188">The performance of this simplistic implementation quickly degrades over time.</span></span> <span data-ttu-id="3426f-189">Al principio, el rendimiento está limitado al número de transacciones que el servidor SQL Server puede realizar (básicamente, enlazadas a la CPU), pero con el tiempo, disminuye drásticamente.</span><span class="sxs-lookup"><span data-stu-id="3426f-189">In the beginning, the performance is limited by the number of the transactions the SQL server can perform (essentially CPU bound), but after some time, it drops drastically.</span></span> <span data-ttu-id="3426f-190">A la misma vez, la longitud promedio de la cola para E/S de disco aumenta más allá de los límites aceptables:</span><span class="sxs-lookup"><span data-stu-id="3426f-190">At the same time, the average queue length for disk IO increases beyond the acceptable limits:</span></span>  
  
 <span data-ttu-id="3426f-191">![](../core/media/ebiz-prog-bam-data-maint-fig4.gif "ebiz_prog_bam_data_maint_fig4")</span><span class="sxs-lookup"><span data-stu-id="3426f-191">![](../core/media/ebiz-prog-bam-data-maint-fig4.gif "ebiz_prog_bam_data_maint_fig4")</span></span>  
<span data-ttu-id="3426f-192">Rendimiento de escritura de BAM frente a la longitud de la cola de disco</span><span class="sxs-lookup"><span data-stu-id="3426f-192">BAM Write Performance versus Disk Queue Length</span></span>  
  
 <span data-ttu-id="3426f-193">El motivo de que suceda esto es que el tamaño de la tabla crece a medida que se completan más instancias del proceso empresarial.</span><span class="sxs-lookup"><span data-stu-id="3426f-193">The reason for this is that the size of the table grows as more instances of the business process complete.</span></span> <span data-ttu-id="3426f-194">Por ejemplo, la primera vez, la instrucción ACTUALIZAR del procedimiento almacenado produce una búsqueda del índice agrupado del número de pedidos y lee algunas páginas en memoria.</span><span class="sxs-lookup"><span data-stu-id="3426f-194">For example, the first time, the UPDATE statement of the stored procedure causes a search on the clustered index for purchase order number and reads some pages in memory.</span></span> <span data-ttu-id="3426f-195">Ya que las instancias del proceso de pedido son independientes (algunas tardan tiempo pero otras son rápidas), puede que la siguiente llamada al procedimiento almacenado sea para cualquier otra instancia de pedido y, por lo tanto, necesite que se lean páginas de datos diferentes en la memoria.</span><span class="sxs-lookup"><span data-stu-id="3426f-195">Since the instances of the purchase order process are independent (some take a long time, but some are short), the next call to the stored procedure may be for some other purchase order instance and therefore will require reading of different data pages in memory.</span></span> <span data-ttu-id="3426f-196">Siempre que el número total de registros de pedidos sea bajo, el servidor SQL Server guardará en caché todas las páginas de datos en la memoria.</span><span class="sxs-lookup"><span data-stu-id="3426f-196">As long as the total number of purchase order records is small, SQL Server will cache all data pages in memory.</span></span> <span data-ttu-id="3426f-197">Cuando el número de registros aumenta suficientemente, la frecuencia de aciertos de caché disminuye y cada operación requiere que se lea el disco físicamente.</span><span class="sxs-lookup"><span data-stu-id="3426f-197">When the number of the records grows large enough, the cache-hit ratio decreases and each operation requires a physical disk read.</span></span> <span data-ttu-id="3426f-198">Aparentemente, en esta situación no es posible ninguna actividad de consulta en la tabla.</span><span class="sxs-lookup"><span data-stu-id="3426f-198">Apparently, in this situation no query activity against the table is possible.</span></span>  
  
## <a name="bam-tables"></a><span data-ttu-id="3426f-199">Tablas de BAM</span><span class="sxs-lookup"><span data-stu-id="3426f-199">BAM tables</span></span>  
 <span data-ttu-id="3426f-200">Para evitar este problema, BAM utiliza dos tablas diferentes: una para las actividades en ejecución, y otra para las completadas en la figura siguiente:</span><span class="sxs-lookup"><span data-stu-id="3426f-200">To avoid this problem BAM uses two separate tables – one for the activities still in progress, and another for the completed ones in the following figure:</span></span>  
  
 <span data-ttu-id="3426f-201">![](../core/media/ebiz-prog-bam-data-maint-fig5.gif "ebiz_prog_bam_data_maint_fig5")</span><span class="sxs-lookup"><span data-stu-id="3426f-201">![](../core/media/ebiz-prog-bam-data-maint-fig5.gif "ebiz_prog_bam_data_maint_fig5")</span></span>  
<span data-ttu-id="3426f-202">Tablas de BAM</span><span class="sxs-lookup"><span data-stu-id="3426f-202">BAM Tables</span></span>  
  
 <span data-ttu-id="3426f-203">En esta figura, la idea es conservar una tabla relativamente pequeña donde se produzcan las actualizaciones, y otra que se agrande pero a la que se tenga acceso de forma incremental.</span><span class="sxs-lookup"><span data-stu-id="3426f-203">In this figure, the idea is to keep a relatively small table that updates occur in and another that grows large, but is incrementally accessed (INSERTs only).</span></span> <span data-ttu-id="3426f-204">En este ejemplo, solo estarán en la tabla activa los pedidos que se hayan procesado en ese momento, mientras que los pedidos que ya se han entregado irán a la tabla completada.</span><span class="sxs-lookup"><span data-stu-id="3426f-204">In the example, only the orders being processed at the moment will be in the active table, while all orders that were already delivered will go to the completed table.</span></span>  
  
 <span data-ttu-id="3426f-205">Debido al desencadenador, esta estructura de tablas es más lenta que una estructura INSERTAR/ACTUALIZAR de una tabla única del principio, pero conserva un rendimiento de escritura estable en el tiempo.</span><span class="sxs-lookup"><span data-stu-id="3426f-205">Because of the trigger, this structure of tables is slower than an INSERT/UPDATE of a single table at the beginning, but maintains stable write performance over time.</span></span>  
  
## <a name="online-window-for-activity-data"></a><span data-ttu-id="3426f-206">Ventana en línea para datos de actividad</span><span class="sxs-lookup"><span data-stu-id="3426f-206">Online Window for activity data</span></span>  
 <span data-ttu-id="3426f-207">El almacenamiento de la actividad controla principalmente consultas de actividades en ejecución o recién completadas.</span><span class="sxs-lookup"><span data-stu-id="3426f-207">Activity storage primarily handles queries for current or recently completed activities.</span></span> <span data-ttu-id="3426f-208">BAM archiva y luego purga las actividades completadas y antiguas desde la base de datos de importación principal de BAM.</span><span class="sxs-lookup"><span data-stu-id="3426f-208">BAM archives and then purges very old, completed activities from the BAM Primary Import database.</span></span> <span data-ttu-id="3426f-209">Por lo tanto, los datos de actividad pasan a través de BAM y están disponibles para las consultas mediante una ventana en línea configurable.</span><span class="sxs-lookup"><span data-stu-id="3426f-209">Thus the activity data flows through BAM and is available for queries during a configurable Online Window.</span></span>  
  
## <a name="bam-partitioning"></a><span data-ttu-id="3426f-210">Particiones de BAM</span><span class="sxs-lookup"><span data-stu-id="3426f-210">BAM partitioning</span></span>  
 <span data-ttu-id="3426f-211">Para obtener un mayor rendimiento y evitar tiempo de inactividad, el almacenamiento de actividad utiliza particiones según la marca de tiempo cuando la actividad se haya completado.</span><span class="sxs-lookup"><span data-stu-id="3426f-211">To allow for higher performance and avoid downtime, activity storage uses partitioning based on the time stamp when the activity was completed.</span></span> <span data-ttu-id="3426f-212">BAM consigue esto intercambiando con regularidad la tabla completada con otra tabla vacía de idéntico formato.</span><span class="sxs-lookup"><span data-stu-id="3426f-212">BAM achieves this by regular swapping of the completed table with another empty table of exactly the same format.</span></span> <span data-ttu-id="3426f-213">Una vez que BAM hace esto, las demás actividades completadas pasan a la nueva tabla mientras que BAM mantiene la partición antigua para consultas, como se muestra en la figura siguiente:</span><span class="sxs-lookup"><span data-stu-id="3426f-213">Once BAM does this, the further completed activities go into the new table, while BAM keeps the old one only for queries, as in the following figure:</span></span>  
  
 <span data-ttu-id="3426f-214">![](../core/media/ebiz-prog-bam-data-maint-fig8.gif "ebiz_prog_bam_data_maint_fig8")</span><span class="sxs-lookup"><span data-stu-id="3426f-214">![](../core/media/ebiz-prog-bam-data-maint-fig8.gif "ebiz_prog_bam_data_maint_fig8")</span></span>  
<span data-ttu-id="3426f-215">Intercambio de particiones de BAM</span><span class="sxs-lookup"><span data-stu-id="3426f-215">BAM Partition Swapping</span></span>  
  
 <span data-ttu-id="3426f-216">Una vez que una partición esté completamente fuera de la ventana en línea, BAM la archiva y luego la quita.</span><span class="sxs-lookup"><span data-stu-id="3426f-216">Once a partition is completely outside the online window, BAM archives and then drops it.</span></span> <span data-ttu-id="3426f-217">Para minimizarle esta complejidad al usuario, BAM también conserva una vista con particiones de la forma:</span><span class="sxs-lookup"><span data-stu-id="3426f-217">To minimize this complexity from the user, BAM also maintains a partitioned view of the form:</span></span>  
  
```  
SELECT * FROM Active   
UNION ALL   
SELECT * FROM Completed   
UNION ALL  
  
```  
  
 <span data-ttu-id="3426f-218">BAM vuelve a crear automáticamente esta vista cada vez que crea o quita una partición.</span><span class="sxs-lookup"><span data-stu-id="3426f-218">BAM automatically re-creates this view each time it creates or drops a partition.</span></span>  
  
 <span data-ttu-id="3426f-219">Tenga en cuenta lo siguiente sobre la creación de particiones de BAM:</span><span class="sxs-lookup"><span data-stu-id="3426f-219">Note the following about BAM partitioning:</span></span>  
  
-   <span data-ttu-id="3426f-220">El nombre de la vista con particiones es **bam_\<ActivityName\>_AllInstances**.</span><span class="sxs-lookup"><span data-stu-id="3426f-220">The name of the partitioned view is **bam_\<ActivityName\>_AllInstances**.</span></span> <span data-ttu-id="3426f-221">Esta vista no es para consultas directas, pero puede ser útil para solucionar problemas de la instrumentación de BAM.</span><span class="sxs-lookup"><span data-stu-id="3426f-221">This view is not meant for direct queries, but may be useful when troubleshooting the BAM instrumentation.</span></span> <span data-ttu-id="3426f-222">Debería consultar los datos de vistas determinadas para cada categoría de usuarios empresariales que crea en la parte superior de esta vista.</span><span class="sxs-lookup"><span data-stu-id="3426f-222">You should query the data from the specific views for each category of business users that you create on top of this view.</span></span> <span data-ttu-id="3426f-223">Para obtener más información, consulte [consultar datos de instancia](../core/querying-instance-data.md).</span><span class="sxs-lookup"><span data-stu-id="3426f-223">For more information, see [Querying Instance Data](../core/querying-instance-data.md).</span></span>  
  
-   <span data-ttu-id="3426f-224">Establecer la ventana en línea mediante la modificación de los valores de **OnlineWindowTimeUnit** y **OnlineWindowLength** en el registro para la actividad actual en la tabla **bam_Metadata_Activities** en la base de datos de importación principal.</span><span class="sxs-lookup"><span data-stu-id="3426f-224">You set the online window by modifying the values for **OnlineWindowTimeUnit** and **OnlineWindowLength** in the record for the current activity in the table **bam_Metadata_Activities** in the Primary Import database.</span></span>  
  
-   <span data-ttu-id="3426f-225">El paquete DTS, **BAM_DM_\<ActivityName\>**, lleva a cabo la creación de particiones y el archivo y la purga.</span><span class="sxs-lookup"><span data-stu-id="3426f-225">The DTS package, **BAM_DM_\<ActivityName\>**, performs the partitioning and archiving/purging.</span></span> <span data-ttu-id="3426f-226">Cada vez que se ejecuta este paquete, trunca otra partición y archiva y quita todas las particiones que están fuera de la ventana en línea.</span><span class="sxs-lookup"><span data-stu-id="3426f-226">Each time this package runs, it truncates another partition and archives/drops all partitions that are outside the online window.</span></span>  
  
-   <span data-ttu-id="3426f-227">Si no está configurada la base de datos de archivo, BAM quita la actividad antigua sin archivar.</span><span class="sxs-lookup"><span data-stu-id="3426f-227">If you do not have Archiving Database configured, then BAM drops the aged activity data without archiving.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="3426f-228">Vea también</span><span class="sxs-lookup"><span data-stu-id="3426f-228">See Also</span></span>  
 [<span data-ttu-id="3426f-229">Infraestructura dinámica de BAM</span><span class="sxs-lookup"><span data-stu-id="3426f-229">BAM Dynamic Infrastructure</span></span>](../core/bam-dynamic-infrastructure.md)
---
title: 'Paso 4: Configurar la solución de BizTalk Server | Microsoft Docs'
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: d60e6a82-51af-41e5-a755-5f337492ba2f
caps.latest.revision: 4
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 4e65c3cf64045378b0f69b6980b98cdec88f175d
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/27/2018
ms.locfileid: "37013885"
---
# <a name="step-4-configure-the-biztalk-server-solution"></a><span data-ttu-id="763e6-102">Paso 4: Configurar la solución de BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="763e6-102">Step 4: Configure the BizTalk Server Solution</span></span>
<span data-ttu-id="763e6-103">En el paso anterior, creó e implementó una aplicación de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] para recibir notificaciones de Salesforce en [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] e insertar los detalles en una base de datos de SQL Server local.</span><span class="sxs-lookup"><span data-stu-id="763e6-103">In the previous step, you created and deployed a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application to receive Salesforce notification into [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and insert the details into an on-premise SQL Server database.</span></span> <span data-ttu-id="763e6-104">En este paso, configuraremos la aplicación en la consola de administración de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="763e6-104">In this step, we’ll configure the application in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="763e6-105">La configuración de la aplicación supone principalmente crear puertos físicos correspondientes a los puertos lógicos que creamos en la orquestación.</span><span class="sxs-lookup"><span data-stu-id="763e6-105">Configuring the application primarily involves creating physical ports corresponding to the logical ports we created in the orchestration.</span></span> <span data-ttu-id="763e6-106">También implica enlazar el puerto físico a los puertos lógicos.</span><span class="sxs-lookup"><span data-stu-id="763e6-106">It also involves binding the physical port to the logical ports.</span></span> <span data-ttu-id="763e6-107">Llevaremos a cabo los siguientes pasos para configurar la aplicación de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="763e6-107">We’ll perform the following steps to configure the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application:</span></span>  
  
- <span data-ttu-id="763e6-108">Configurar una ubicación de recepción WCF-BasicHttpRelay de tipo solicitud-respuesta para recibir las notificaciones de oportunidades de Salesforce.</span><span class="sxs-lookup"><span data-stu-id="763e6-108">Configure a request-response WCF-BasicHttpRelay receive location to receive opportunity notifications from Salesforce.</span></span>  
  
- <span data-ttu-id="763e6-109">Configurar un puerto de envío WCF-WebHttp de tipo petición-respuesta para enviar una consulta a Salesforce para recuperar los detalles de producto relacionados con la notificación de oportunidad recibida.</span><span class="sxs-lookup"><span data-stu-id="763e6-109">Configure a request-response WCF-WebHttp send port to send query to Salesforce for retrieving product details related to the received opportunity notification.</span></span> <span data-ttu-id="763e6-110">Este puerto de envío recibe también la respuesta de la consulta de Salesforce.</span><span class="sxs-lookup"><span data-stu-id="763e6-110">This send port also receives the query response from Salesforce.</span></span>  
  
- <span data-ttu-id="763e6-111">Configurar un puerto de envío WCF-SQL unidireccional para insertar la respuesta de la consulta de Salesforce en una base de datos de SQL Server local.</span><span class="sxs-lookup"><span data-stu-id="763e6-111">Configure a one-way WCF-SQL send port to insert the query response from Salesforce into an on-premise SQL Server database.</span></span>  
  
- <span data-ttu-id="763e6-112">Configurar la aplicación de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] asociando el puerto lógico de la orquestación con los puertos físicos creados en la consola de administración de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="763e6-112">Configure the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application by associating the logical port in the orchestration with the physical ports created in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span>  
  
### <a name="to-configure-the-wcf-basichttprelay-receive-location"></a><span data-ttu-id="763e6-113">Para configurar la ubicación de recepción WCF-BasicHttpRelay</span><span class="sxs-lookup"><span data-stu-id="763e6-113">To configure the WCF-BasicHttpRelay receive location</span></span>  
  
1. <span data-ttu-id="763e6-114">Abra el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] consola de administración.</span><span class="sxs-lookup"><span data-stu-id="763e6-114">Open the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="763e6-115">Expanda el nodo Applications y busque el **SalesforceIntegration** aplicación.</span><span class="sxs-lookup"><span data-stu-id="763e6-115">Expand the Applications node and look for the **SalesforceIntegration** application.</span></span> <span data-ttu-id="763e6-116">Esta aplicación se creó cuando implementó el proyecto de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] desde Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="763e6-116">This application is created when you deployed the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] project from Visual Studio.</span></span>  
  
2. <span data-ttu-id="763e6-117">Expanda el **SalesforceIntegration** aplicación, haga clic en **puertos de recepción**, apunte a **New**y, a continuación, haga clic en **puerto de recepción de solicitud-respuesta**.</span><span class="sxs-lookup"><span data-stu-id="763e6-117">Expand the **SalesforceIntegration** application, right-click **Receive Ports**, point to **New**, and then click **Request-Response Receive Port**.</span></span> <span data-ttu-id="763e6-118">Especifique el nombre de puerto `ReceiveOppNotification` y en el panel izquierdo, haga clic en **ubicaciones de recepción**.</span><span class="sxs-lookup"><span data-stu-id="763e6-118">Specify the port name as `ReceiveOppNotification` and from the left-pane, click **Receive Locations**.</span></span>  
  
3. <span data-ttu-id="763e6-119">En el cuadro de diálogo Propiedades de la ubicación de recepción, especifique los siguientes valores.</span><span class="sxs-lookup"><span data-stu-id="763e6-119">In the Receive Location Properties dialog box, specify the following values:</span></span>  
  
   |||  
   |-|-|  
   |<span data-ttu-id="763e6-120">Nombre</span><span class="sxs-lookup"><span data-stu-id="763e6-120">Name</span></span>|<span data-ttu-id="763e6-121">Escriba `ReceiveOppNotification`.</span><span class="sxs-lookup"><span data-stu-id="763e6-121">Enter `ReceiveOppNotification`.</span></span>|  
   |<span data-ttu-id="763e6-122">Tipo</span><span class="sxs-lookup"><span data-stu-id="763e6-122">Type</span></span>|<span data-ttu-id="763e6-123">Seleccione **WCF-BasicHttpRelay**</span><span class="sxs-lookup"><span data-stu-id="763e6-123">Select **WCF-BasicHttpRelay**</span></span>|  
   |<span data-ttu-id="763e6-124">Controlador de recepción</span><span class="sxs-lookup"><span data-stu-id="763e6-124">Receive Handler</span></span>|<span data-ttu-id="763e6-125">Seleccione **BizTalkServerApplication**</span><span class="sxs-lookup"><span data-stu-id="763e6-125">Select **BizTalkServerApplication**</span></span>|  
   |<span data-ttu-id="763e6-126">Canalización de recepción</span><span class="sxs-lookup"><span data-stu-id="763e6-126">Receive Pipeline</span></span>|<span data-ttu-id="763e6-127">Seleccione **XMLReceive**</span><span class="sxs-lookup"><span data-stu-id="763e6-127">Select **XMLReceive**</span></span>|  
   |<span data-ttu-id="763e6-128">Canalización de envío</span><span class="sxs-lookup"><span data-stu-id="763e6-128">Send Pipeline</span></span>|<span data-ttu-id="763e6-129">Seleccione **PassThruTransmit**</span><span class="sxs-lookup"><span data-stu-id="763e6-129">Select **PassThruTransmit**</span></span>|  
  
    <span data-ttu-id="763e6-130">Haga clic en **configurar** para el tipo de puerto.</span><span class="sxs-lookup"><span data-stu-id="763e6-130">Click **Configure** against the port type.</span></span>  
  
4. <span data-ttu-id="763e6-131">En el cuadro de diálogo "Propiedades de transporte WCF-BasicHttpRelay", especifique los siguientes valores:</span><span class="sxs-lookup"><span data-stu-id="763e6-131">In the WCF-BasicHttpRelay Transport Properties dialog box, specify the following values:</span></span>  
  
   1. <span data-ttu-id="763e6-132">En el **General** ficha, para **dirección (URI)**, escriba `https://btssalesforce.servicebus.windows.net/notifications/opportunity`.</span><span class="sxs-lookup"><span data-stu-id="763e6-132">On the **General** tab, for **Address (URI)**, enter `https://btssalesforce.servicebus.windows.net/notifications/opportunity`.</span></span> <span data-ttu-id="763e6-133">En este caso, **btssalesforce** es que creó en el espacio de nombres [paso 1: crear un Namespace de Bus de servicio](../core/step-1-create-a-service-bus-namespace.md).</span><span class="sxs-lookup"><span data-stu-id="763e6-133">Here, **btssalesforce** is namespace you created in [Step 1: Create a Service Bus Namespace](../core/step-1-create-a-service-bus-namespace.md).</span></span> <span data-ttu-id="763e6-134">La dirección URL que especifique aquí es la misma dirección URL que especificó al crear un flujo de trabajo en Salesforce en [paso 2: configurar el sistema Salesforce](../core/step-2-set-up-the-salesforce-system.md).</span><span class="sxs-lookup"><span data-stu-id="763e6-134">The URL you specify here is the same URL you specified while creating a workflow in Salesforce in [Step 2: Set up the Salesforce System](../core/step-2-set-up-the-salesforce-system.md).</span></span> <span data-ttu-id="763e6-135">Configurar un flujo de trabajo en el que cada vez que se establece la etapa de oportunidad en Closed Won, Salesforce envía una notificación a la dirección URL *<https://btssalesforce.servicebus.windows.net/notifications/opportunity>*.</span><span class="sxs-lookup"><span data-stu-id="763e6-135">You set up a workflow in which every time the stage of an opportunity is set to Closed Won, Salesforce sends a notification to the URL *<https://btssalesforce.servicebus.windows.net/notifications/opportunity>*.</span></span> <span data-ttu-id="763e6-136">Especificamos la misma dirección URL aquí como parte de la configuración de esta ubicación de recepción.</span><span class="sxs-lookup"><span data-stu-id="763e6-136">We specify the same URL here as part of this receive location configuration.</span></span> <span data-ttu-id="763e6-137">Cuando se habilita la ubicación de recepción, se crea en [!INCLUDE[winazure](../includes/winazure-md.md)] el extremo de transmisión especificado por la dirección URL.</span><span class="sxs-lookup"><span data-stu-id="763e6-137">When the receive location is enabled, the relay endpoint specified by the URL is created in [!INCLUDE[winazure](../includes/winazure-md.md)].</span></span>  
  
   2. <span data-ttu-id="763e6-138">En el **seguridad** ficha, especifique lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="763e6-138">On the **Security** tab, specify the following:</span></span>  
  
      -   <span data-ttu-id="763e6-139">Para **modo de seguridad**, seleccione **transporte** y **tipo de autenticación de cliente de retransmisión**, seleccione **ninguno**.</span><span class="sxs-lookup"><span data-stu-id="763e6-139">For **Security mode**, select **Transport** and for **Relay client authentication type**, select **None**.</span></span>  
  
      -   <span data-ttu-id="763e6-140">Seleccione el **habilitar la detección de servicio** casilla de verificación para publicar el comportamiento del servicio en la [registro del servicio](http://msdn.microsoft.com/library/windowsazure/dd582704.aspx).</span><span class="sxs-lookup"><span data-stu-id="763e6-140">Select the **Enable service discovery** check box to publish the service behavior in the [Service Registry](http://msdn.microsoft.com/library/windowsazure/dd582704.aspx).</span></span> <span data-ttu-id="763e6-141">Especifique el **nombre para mostrar** que denota el nombre con el que el servicio se publica en el registro.</span><span class="sxs-lookup"><span data-stu-id="763e6-141">Specify the **Display name** which denotes the name with which the service is published to the registry.</span></span> <span data-ttu-id="763e6-142">Puede establecer el **modo de detección** en público o privado.</span><span class="sxs-lookup"><span data-stu-id="763e6-142">You can set the **Discovery mode** to public or private.</span></span> <span data-ttu-id="763e6-143">Para este tutorial, establezca **nombre para mostrar** a `SF Outbound Notification` y **modo de detección** a **pública**.</span><span class="sxs-lookup"><span data-stu-id="763e6-143">For this tutorial, set **Display name** to `SF Outbound Notification` and **Discovery mode** to **Public**.</span></span>  
  
      -   <span data-ttu-id="763e6-144">En el cuadro de servicio de control de acceso, haga clic en **editar**.</span><span class="sxs-lookup"><span data-stu-id="763e6-144">Under Access control service box, click **Edit**.</span></span> <span data-ttu-id="763e6-145">Para **Uri de STS de Access Control Service**, escriba `https://btssalesforce-sb.accesscontrol.windows.net/`.</span><span class="sxs-lookup"><span data-stu-id="763e6-145">For **Access Control Service STS Uri**, enter `https://btssalesforce-sb.accesscontrol.windows.net/`.</span></span> <span data-ttu-id="763e6-146">Para **nombre del emisor** y **clave del emisor**, escriba los valores que guardó en [paso 1: crear un Namespace de Bus de servicio](../core/step-1-create-a-service-bus-namespace.md) para **Default User** y **Clave predeterminada** campos.</span><span class="sxs-lookup"><span data-stu-id="763e6-146">For **Issuer Name** and **Issuer Key**, enter the values that you saved in [Step 1: Create a Service Bus Namespace](../core/step-1-create-a-service-bus-namespace.md) for **Default User** and **Default Key** fields.</span></span>  
  
   3. <span data-ttu-id="763e6-147">Haga clic en **Aceptar** hasta que salga de todos los cuadros de diálogo abiertos.</span><span class="sxs-lookup"><span data-stu-id="763e6-147">Click **OK** until you exit all open dialog boxes.</span></span>  
  
### <a name="to-configure-the-wcf-webhttp-send-port"></a><span data-ttu-id="763e6-148">Para configurar el puerto de envío WCF-WebHttp</span><span class="sxs-lookup"><span data-stu-id="763e6-148">To configure the WCF-WebHttp send port</span></span>  
  
1. <span data-ttu-id="763e6-149">Expanda el **SalesforceIntegration** aplicación, haga clic en **puertos de envío**, apunte a **New**y, a continuación, haga clic en **puerto de envío de petición-respuesta estático**.</span><span class="sxs-lookup"><span data-stu-id="763e6-149">Expand the **SalesforceIntegration** application, right-click **Send Ports**, point to **New**, and then click **Static Solicit-Response Send Port**.</span></span>  
  
2. <span data-ttu-id="763e6-150">En el cuadro de diálogo Propiedades de puerto de envío, especifique los siguientes valores:</span><span class="sxs-lookup"><span data-stu-id="763e6-150">In the Send Port Properties dialog box, specify the following values:</span></span>  
  
   |||  
   |-|-|  
   |<span data-ttu-id="763e6-151">Nombre</span><span class="sxs-lookup"><span data-stu-id="763e6-151">Name</span></span>|<span data-ttu-id="763e6-152">Escriba `SalesforceREST`.</span><span class="sxs-lookup"><span data-stu-id="763e6-152">Enter `SalesforceREST`.</span></span>|  
   |<span data-ttu-id="763e6-153">Tipo</span><span class="sxs-lookup"><span data-stu-id="763e6-153">Type</span></span>|<span data-ttu-id="763e6-154">Seleccione **WCF-WebHttp**</span><span class="sxs-lookup"><span data-stu-id="763e6-154">Select **WCF-WebHttp**</span></span>|  
   |<span data-ttu-id="763e6-155">Controlador de envío</span><span class="sxs-lookup"><span data-stu-id="763e6-155">Send Handler</span></span>|<span data-ttu-id="763e6-156">Seleccione **BizTalkServerApplication**</span><span class="sxs-lookup"><span data-stu-id="763e6-156">Select **BizTalkServerApplication**</span></span>|  
   |<span data-ttu-id="763e6-157">Canalización de envío</span><span class="sxs-lookup"><span data-stu-id="763e6-157">Send Pipeline</span></span>|<span data-ttu-id="763e6-158">Seleccione **PassThruTransmit**</span><span class="sxs-lookup"><span data-stu-id="763e6-158">Select **PassThruTransmit**</span></span>|  
   |<span data-ttu-id="763e6-159">Canalización de recepción</span><span class="sxs-lookup"><span data-stu-id="763e6-159">Receive Pipeline</span></span>|<span data-ttu-id="763e6-160">Seleccione **AddNamespace** y haga clic en el botón de puntos suspensivos en la canalización para configurar la canalización.</span><span class="sxs-lookup"><span data-stu-id="763e6-160">Select **AddNamespace** and click the ellipsis button against the pipeline to configure the pipeline.</span></span><br /><br /> <span data-ttu-id="763e6-161">-En **fase 1: descodificar**, para **NamespaceBase**, escriba `http://BtsSalesforceIntegration.QueryResult`.</span><span class="sxs-lookup"><span data-stu-id="763e6-161">-   Under **Stage 1: Decode**, for **NamespaceBase**, enter `http://BtsSalesforceIntegration.QueryResult`.</span></span> <span data-ttu-id="763e6-162">Este es el espacio de nombres del esquema QueryResult.xsd que creó en [paso 3b: recuperar detalles de oportunidades de Salesforce con el adaptador WCF-WebHttp](../core/step-3b-retrieve-opportunities-from-salesforce-using-the-wcf-webhttp-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="763e6-162">This is the namespace of the QueryResult.xsd schema that you created in [Step 3b: Retrieve Opportunity Details from Salesforce using the WCF-WebHttp Adapter](../core/step-3b-retrieve-opportunities-from-salesforce-using-the-wcf-webhttp-adapter.md).</span></span> <span data-ttu-id="763e6-163">Cuando el **AddNamespace** recibir canalización recibe la respuesta de Salesforce, agrega este espacio de nombres al mensaje de respuesta.</span><span class="sxs-lookup"><span data-stu-id="763e6-163">When the **AddNamespace** receive pipeline receives the response from Salesforce, it adds this namespace to the response message.</span></span> <span data-ttu-id="763e6-164">De manera predeterminada, el mensaje de respuesta de Salesforce no incluye ningún espacio de nombres.</span><span class="sxs-lookup"><span data-stu-id="763e6-164">By default, the response message from Salesforce does not include any namespace.</span></span><br />     <span data-ttu-id="763e6-165">Para **NamespacePrefix**, escriba `sf`.</span><span class="sxs-lookup"><span data-stu-id="763e6-165">For **NamespacePrefix**, enter `sf`.</span></span><br /><span data-ttu-id="763e6-166">-En **fase 2: desensamblar**, acepte los valores predeterminados y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="763e6-166">-   Under **Stage 2: Disassemble**, accept the default values and then click **OK**.</span></span>|  
  
    <span data-ttu-id="763e6-167">En el cuadro de diálogo Propiedades de puerto de envío, haga clic en **configurar** para el tipo de puerto.</span><span class="sxs-lookup"><span data-stu-id="763e6-167">On the Send Port Properties dialog box, click **Configure** against the port type.</span></span>  
  
3. <span data-ttu-id="763e6-168">En el cuadro de diálogo Propiedades de transporte WCF-WebHttp, especifique los siguientes valores:</span><span class="sxs-lookup"><span data-stu-id="763e6-168">In the WCF-WebHttp Transport Properties dialog box, specify the following values:</span></span>  
  
   1. <span data-ttu-id="763e6-169">En la pestaña **General** , haga lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="763e6-169">On the **General** tab, do the following:</span></span>  
  
      - <span data-ttu-id="763e6-170">para **dirección (URI)**, escriba `https://<Salesforce_instance_name>.salesforce.com/services/data/v24.0`.</span><span class="sxs-lookup"><span data-stu-id="763e6-170">for **Address (URI)**, enter `https://<Salesforce_instance_name>.salesforce.com/services/data/v24.0`.</span></span> <span data-ttu-id="763e6-171">Puede recuperar el nombre de instancia de Salesforce copiando el texto que aparece entre https:// y Salesforce.com en la barra de dirección donde tiene abierto el portal Salesforce.com.</span><span class="sxs-lookup"><span data-stu-id="763e6-171">You can retrieve the Salesforce instance name by copying the text between https:// and Salesforce.com in the address bar where you have the Salesforce.com portal open.</span></span> <span data-ttu-id="763e6-172">Por ejemplo, si la dirección URL del portal de Salesforce es *https://*<em>na15</em>*.salesforce.com/home/home.jsp*, el nombre de instancia de Salesforce es **na15**.</span><span class="sxs-lookup"><span data-stu-id="763e6-172">For example, if the URL in the Salesforce portal is *https://*<em>na15</em>*.salesforce.com/home/home.jsp*, the Salesforce instance name is **na15**.</span></span>  
  
      - <span data-ttu-id="763e6-173">En **método HTTP y asignación de URL** cuadro, especifique lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="763e6-173">Under **HTTP Method and URL Mapping** box, specify the following:</span></span>  
  
        ```  
        <BtsHttpUrlMapping>  
        <Operation Method="GET" Url="/query?q={VAR}" />  
        </BtsHttpUrlMapping>  
        ```  
  
         <span data-ttu-id="763e6-174">Aquí es cómo se usa esta configuración, para consultar a Salesforce para recuperar más información acerca de la notificación de oportunidad, debemos realizar una operación GET en el punto de conexión de REST de Salesforce (especificado en el **dirección** campo) y anexe el consulta para recuperar los detalles de oportunidades.</span><span class="sxs-lookup"><span data-stu-id="763e6-174">Here’s how this setting is used— To query Salesforce for retrieving more information about the opportunity notification, we must perform a GET operation on the Salesforce REST endpoint (specified in the **Address** field) and append the query to retrieve the opportunity details.</span></span> <span data-ttu-id="763e6-175">Por tanto, la dirección URL debe tener el siguiente aspecto:</span><span class="sxs-lookup"><span data-stu-id="763e6-175">So, the URL should look like:</span></span>  
  
        ```  
        https://na15.salesforce.com/services/data/v24.0/query?q=<query_string>  
        ```  
  
         <span data-ttu-id="763e6-176">Ya tenemos el punto de conexión de REST de Salesforce como parte de la **dirección (URI)** campo.</span><span class="sxs-lookup"><span data-stu-id="763e6-176">We already have the Salesforce REST endpoint as part of the **Address (URI)** field.</span></span> <span data-ttu-id="763e6-177">Por lo tanto, como parte de **método HTTP y asignación de URL** propiedad, se especifican mediante el método GET y anexe la **{VAR}** como una variable.</span><span class="sxs-lookup"><span data-stu-id="763e6-177">So, as part of **HTTP Method and URL Mapping** property, we specify using the GET method and appending the **{VAR}** as a variable.</span></span>  
  
      - <span data-ttu-id="763e6-178">En el **asignaciones de variables** cuadro, haga clic en **editar**.</span><span class="sxs-lookup"><span data-stu-id="763e6-178">In the **Variable Mapping** box, click **Edit**.</span></span> <span data-ttu-id="763e6-179">En este cuadro Especifique cómo el valor de la **{VAR}** variable se deduce en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="763e6-179">In this box you specify how the value for the **{VAR}** variable is deduced at runtime.</span></span>  
  
         <span data-ttu-id="763e6-180">En [paso 3b: recuperar detalles de oportunidades de Salesforce con el adaptador WCF-WebHttp](../core/step-3b-retrieve-opportunities-from-salesforce-using-the-wcf-webhttp-adapter.md), habíamos promovido la propiedad de consulta, lo que resultó de crear un **PropertySchema.xsd**.</span><span class="sxs-lookup"><span data-stu-id="763e6-180">In [Step 3b: Retrieve Opportunity Details from Salesforce using the WCF-WebHttp Adapter](../core/step-3b-retrieve-opportunities-from-salesforce-using-the-wcf-webhttp-adapter.md), we had promoted the Query property, which resulted in creating a **PropertySchema.xsd**.</span></span> <span data-ttu-id="763e6-181">Vamos a usar el **consulta** elemento de ese esquema para pasar la cadena de consulta asignando ese elemento a la variable {VAR} en la dirección URL.</span><span class="sxs-lookup"><span data-stu-id="763e6-181">We’ll use the **Query** element in that schema to pass the query string by mapping that element to the {VAR} variable in the URL.</span></span>  
  
         <span data-ttu-id="763e6-182">En el cuadro de diálogo asignaciones de variables, la **Variable** columna muestra el nombre de la variable que especificó anteriormente, por ejemplo, **VAR**.</span><span class="sxs-lookup"><span data-stu-id="763e6-182">In the Variable Mapping dialog box, the **Variable** column lists the name of the variable you specified earlier, for example, **VAR**.</span></span> <span data-ttu-id="763e6-183">En el **nombre de la propiedad** columna, especifique el nombre de la propiedad promovida que tiene la cadena de consulta que se pasará a la variable.</span><span class="sxs-lookup"><span data-stu-id="763e6-183">In the **Property Name** column, specify the name of the promoted property that has the query string to be passed to the variable.</span></span> <span data-ttu-id="763e6-184">En este tutorial, es el nombre de la propiedad **consulta**.</span><span class="sxs-lookup"><span data-stu-id="763e6-184">In this tutorial, that property name is **Query**.</span></span> <span data-ttu-id="763e6-185">Por último, para **propiedad Namespace**, especifique el espacio de nombres para el **PropertySchema.xsd**, que es `https://BtsSalesforceIntegration.PropertySchema`.</span><span class="sxs-lookup"><span data-stu-id="763e6-185">Finally, for **Property Namespace**, specify the namespace for the **PropertySchema.xsd**, which is `https://BtsSalesforceIntegration.PropertySchema`.</span></span> <span data-ttu-id="763e6-186">Haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="763e6-186">Click **OK**.</span></span>  
  
         <span data-ttu-id="763e6-187">![Ficha general de WCF&#45;adaptador WebHttp](../core/media/bts-sf-webhttp-general.jpg "BTS_SF_WebHttp_General")</span><span class="sxs-lookup"><span data-stu-id="763e6-187">![General tab of WCF&#45;WebHttp Adapter](../core/media/bts-sf-webhttp-general.jpg "BTS_SF_WebHttp_General")</span></span>  
  
   2. <span data-ttu-id="763e6-188">En el **seguridad** ficha, para **modo de seguridad**, seleccione **transporte**.</span><span class="sxs-lookup"><span data-stu-id="763e6-188">On the **Security** tab, for **Security mode**, select **Transport**.</span></span>  
  
   3. <span data-ttu-id="763e6-189">En el **comportamiento** , utilice el comportamiento personalizado que creó en [paso 3d: habilitar BizTalk Server para enviar y recibir mensajes desde Salesforce](../core/step-3d-enabling-biztalk-server-to-send-and-receive-messages-from-salesforce.md) se autentiquen en Salesforce.</span><span class="sxs-lookup"><span data-stu-id="763e6-189">On the **Behavior** tab, use the custom behavior that you created in [Step 3d: Enabling BizTalk Server to Send and Receive Messages from Salesforce](../core/step-3d-enabling-biztalk-server-to-send-and-receive-messages-from-salesforce.md) to authenticate with Salesforce.</span></span> <span data-ttu-id="763e6-190">Para usar el comportamiento, proceda como se indica a continuación:</span><span class="sxs-lookup"><span data-stu-id="763e6-190">To use the behavior, do the following:</span></span>  
  
      -   <span data-ttu-id="763e6-191">Haga clic en **EndpointBehavior** y, a continuación, seleccione **Agregar extensión**.</span><span class="sxs-lookup"><span data-stu-id="763e6-191">Right-click **EndpointBehavior** and then select **Add extension**.</span></span>  
  
      -   <span data-ttu-id="763e6-192">En el **Seleccionar extensión de comportamiento** cuadro de diálogo, seleccione **Microsoft.BizTalk.Adapter.Behaviors.Demo.Salesforce**.</span><span class="sxs-lookup"><span data-stu-id="763e6-192">In the **Select Behavior Extension** dialog box, select **Microsoft.BizTalk.Adapter.Behaviors.Demo.Salesforce**.</span></span> <span data-ttu-id="763e6-193">Habíamos usado este nombre de comportamiento cuando agregamos el comportamiento a machine.config.</span><span class="sxs-lookup"><span data-stu-id="763e6-193">We had used this behavior name while adding the behavior to the machine.config.</span></span>  
  
      -   <span data-ttu-id="763e6-194">Seleccione el comportamiento recién agregado y especifique los siguientes valores:</span><span class="sxs-lookup"><span data-stu-id="763e6-194">Select the newly added behavior and then specify the following values:</span></span>  
  
          |||  
          |-|-|  
          |<span data-ttu-id="763e6-195">consumerKey (obligatorio)</span><span class="sxs-lookup"><span data-stu-id="763e6-195">consumerKey (Required)</span></span>|<span data-ttu-id="763e6-196">Especifique la clave de consumidor para su cuenta de Salesforce.</span><span class="sxs-lookup"><span data-stu-id="763e6-196">Specify the consumer key for your Salesforce account.</span></span> <span data-ttu-id="763e6-197">Puede recuperar la clave de consumidor para ello, vaya a la aplicación conectada a Salesforce que creó en [paso 2: configurar el sistema Salesforce](../core/step-2-set-up-the-salesforce-system.md).</span><span class="sxs-lookup"><span data-stu-id="763e6-197">You can retrieve the consumer key by going to the Salesforce connected application you created in [Step 2: Set up the Salesforce System](../core/step-2-set-up-the-salesforce-system.md).</span></span>|  
          |<span data-ttu-id="763e6-198">consumerSecret (obligatorio)</span><span class="sxs-lookup"><span data-stu-id="763e6-198">consumerSecret (Required)</span></span>|<span data-ttu-id="763e6-199">Recuperar el secreto del consumidor de la fuerza de ventas conectado de aplicación que creó en [paso 2: configurar el sistema Salesforce](../core/step-2-set-up-the-salesforce-system.md).</span><span class="sxs-lookup"><span data-stu-id="763e6-199">Retrieve the consumer secret from the Salesforce connected application you created in [Step 2: Set up the Salesforce System](../core/step-2-set-up-the-salesforce-system.md).</span></span>|  
          |<span data-ttu-id="763e6-200">Password (obligatorio)</span><span class="sxs-lookup"><span data-stu-id="763e6-200">Password (Required)</span></span>|<span data-ttu-id="763e6-201">Especifique la contraseña para la cuenta de Salesforce.</span><span class="sxs-lookup"><span data-stu-id="763e6-201">Specify the password for the Salesforce account.</span></span> <span data-ttu-id="763e6-202">Para conectarse a Salesforce desde una aplicación de terceros, debe especificar la contraseña con el formato que permite el token de seguridad.</span><span class="sxs-lookup"><span data-stu-id="763e6-202">To connect to Salesforce from a third party application, you must specify the password in the format password followed by the security token.</span></span> <span data-ttu-id="763e6-203">Por ejemplo, si la contraseña es **contraseña** y el token es **XXXXXX**, debe escribir `passwordXXXXXX`.</span><span class="sxs-lookup"><span data-stu-id="763e6-203">For example, if the password is **password** and the token is **XXXXXX**, you must enter `passwordXXXXXX`.</span></span>|  
          |<span data-ttu-id="763e6-204">sessionTimeout</span><span class="sxs-lookup"><span data-stu-id="763e6-204">sessionTimeout</span></span>|<span data-ttu-id="763e6-205">Tiene un valor predeterminado de 300.</span><span class="sxs-lookup"><span data-stu-id="763e6-205">This has a default value of 300.</span></span>|  
          |<span data-ttu-id="763e6-206">Username (obligatorio)</span><span class="sxs-lookup"><span data-stu-id="763e6-206">Username (Required)</span></span>|<span data-ttu-id="763e6-207">Especifique la cuenta de inicio de sesión de desarrollador de Salesforce.</span><span class="sxs-lookup"><span data-stu-id="763e6-207">Specify the Salesforce developer login account.</span></span>|  
  
           <span data-ttu-id="763e6-208">![La ficha comportamiento de WCF&#45;adaptador WebHttp](../core/media/bts-sf-webhttp-behavior.jpg "BTS_SF_WebHttp_Behavior")</span><span class="sxs-lookup"><span data-stu-id="763e6-208">![Behavior tab for WCF&#45;WebHttp adapter](../core/media/bts-sf-webhttp-behavior.jpg "BTS_SF_WebHttp_Behavior")</span></span>  
  
   4. <span data-ttu-id="763e6-209">En el **mensajes** ficha **mensaje saliente** cuadro, para **suprimir el cuerpo para verbos**, escriba `GET`.</span><span class="sxs-lookup"><span data-stu-id="763e6-209">On the **Messages** tab, under **Outbound Message** box, for **Suppress Body for Verbs**, enter `GET`.</span></span> <span data-ttu-id="763e6-210">Esto garantiza que, para el método GET, no haya carga de mensajes en la solicitud que se envía a Salesforce.</span><span class="sxs-lookup"><span data-stu-id="763e6-210">This ensures for the GET method, there is no message payload in the request being sent to Salesforce.</span></span>  
  
   5. <span data-ttu-id="763e6-211">Haga clic en **Aceptar** hasta que salga de todos los cuadros de diálogo abiertos.</span><span class="sxs-lookup"><span data-stu-id="763e6-211">Click **OK** until you exit all open dialog boxes.</span></span>  
  
### <a name="to-configure-the-wcf-sql-send-port"></a><span data-ttu-id="763e6-212">Para configurar el puerto de envío WCF-SQL</span><span class="sxs-lookup"><span data-stu-id="763e6-212">To configure the WCF-SQL send port</span></span>  
  
1.  <span data-ttu-id="763e6-213">Expanda el **SalesforceIntegration** aplicación, haga clic en **puertos de envío**, apunte a **New**y, a continuación, haga clic en **unidireccional puerto de envío**.</span><span class="sxs-lookup"><span data-stu-id="763e6-213">Expand the **SalesforceIntegration** application, right-click **Send Ports**, point to **New**, and then click **Static One-way Send Port**.</span></span>  
  
2.  <span data-ttu-id="763e6-214">En el cuadro de diálogo Propiedades de puerto de envío, especifique los siguientes valores:</span><span class="sxs-lookup"><span data-stu-id="763e6-214">In the Send Port Properties dialog box, specify the following values:</span></span>  
  
    |||  
    |-|-|  
    |<span data-ttu-id="763e6-215">Nombre</span><span class="sxs-lookup"><span data-stu-id="763e6-215">Name</span></span>|<span data-ttu-id="763e6-216">Escriba `SendToSQL`.</span><span class="sxs-lookup"><span data-stu-id="763e6-216">Enter `SendToSQL`.</span></span>|  
    |<span data-ttu-id="763e6-217">Tipo</span><span class="sxs-lookup"><span data-stu-id="763e6-217">Type</span></span>|<span data-ttu-id="763e6-218">Seleccione **WCF-SQL**</span><span class="sxs-lookup"><span data-stu-id="763e6-218">Select **WCF-SQL**</span></span>|  
    |<span data-ttu-id="763e6-219">Controlador de envío</span><span class="sxs-lookup"><span data-stu-id="763e6-219">Send Handler</span></span>|<span data-ttu-id="763e6-220">Seleccione **BizTalkServerApplication**</span><span class="sxs-lookup"><span data-stu-id="763e6-220">Select **BizTalkServerApplication**</span></span>|  
    |<span data-ttu-id="763e6-221">Canalización de envío</span><span class="sxs-lookup"><span data-stu-id="763e6-221">Send Pipeline</span></span>|<span data-ttu-id="763e6-222">Seleccione **XMLTransmit**</span><span class="sxs-lookup"><span data-stu-id="763e6-222">Select **XMLTransmit**</span></span>|  
  
     <span data-ttu-id="763e6-223">En el cuadro de diálogo Propiedades de puerto de envío, haga clic en **configurar** para el tipo de puerto.</span><span class="sxs-lookup"><span data-stu-id="763e6-223">On the Send Port Properties dialog box, click **Configure** against the port type.</span></span>  
  
3.  <span data-ttu-id="763e6-224">En el cuadro de diálogo Propiedades de transporte WCF-SQL, especifique los siguientes valores:</span><span class="sxs-lookup"><span data-stu-id="763e6-224">In the WCF-SQL Transport Properties dialog box, specify the following values:</span></span>  
  
    1.  <span data-ttu-id="763e6-225">En la pestaña **General** , haga lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="763e6-225">On the **General** tab, do the following:</span></span>  
  
        -   <span data-ttu-id="763e6-226">En `Endpoint Address`, haga clic en **configurar**.</span><span class="sxs-lookup"><span data-stu-id="763e6-226">Under `Endpoint Address`, click **Configure**.</span></span> <span data-ttu-id="763e6-227">Para el **InitialCatalog** propiedad, especifique el nombre de base de datos que contiene la tabla donde se deben especificar los datos de respuesta de Salesforce.</span><span class="sxs-lookup"><span data-stu-id="763e6-227">For the **InitialCatalog** property, specify the database name that contains the table where the data from Salesforce response must be entered.</span></span> <span data-ttu-id="763e6-228">En este tutorial, especifique este valor como `Orders`.</span><span class="sxs-lookup"><span data-stu-id="763e6-228">For this tutorial enter this value as `Orders`.</span></span> <span data-ttu-id="763e6-229">Para **Server** propiedad, escriba el nombre del servidor donde está instalada la base de datos de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="763e6-229">For **Server** property, enter the server name where SQL Server database is installed.</span></span>  
  
        -   <span data-ttu-id="763e6-230">En **encabezado Action de SOAP**, especifique la acción que se usará para insertar en el **OrderDetails** tabla.</span><span class="sxs-lookup"><span data-stu-id="763e6-230">Under **SOAP Action header**, specify the action to be used for inserting into the **OrderDetails** table.</span></span> <span data-ttu-id="763e6-231">Debe escribir `TableOp/Insert/dbo/OrderDetails`.</span><span class="sxs-lookup"><span data-stu-id="763e6-231">You must enter `TableOp/Insert/dbo/OrderDetails`.</span></span>  
  
    2.  <span data-ttu-id="763e6-232">En la pestaña Credenciales, si deja todo en blanco, el adaptador usará autenticación de Windows para conectarse a la base de datos de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="763e6-232">On the Credentials tab, if you leave everything blank the adapter uses Windows Authentication to connect to the SQL Server database.</span></span> <span data-ttu-id="763e6-233">Si desea usar alguna otra forma de autenticación, puede especificar los valores relevantes.</span><span class="sxs-lookup"><span data-stu-id="763e6-233">If you want to use any other form of authentication, you can specify the relevant values.</span></span>  
  
    3.  <span data-ttu-id="763e6-234">Haga clic en **Aceptar** hasta que salga de todos los cuadros de diálogo abiertos.</span><span class="sxs-lookup"><span data-stu-id="763e6-234">Click **OK** until you exit all open dialog boxes.</span></span>  
  
### <a name="to-configure-the-biztalk-server-application"></a><span data-ttu-id="763e6-235">Para configurar la aplicación de BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="763e6-235">To configure the BizTalk Server application</span></span>  
  
1. <span data-ttu-id="763e6-236">En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] consola de administración, haga clic en el **SalesforceIntegration** aplicación y, a continuación, haga clic en **configurar**.</span><span class="sxs-lookup"><span data-stu-id="763e6-236">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, right-click the **SalesforceIntegration** application, and then click **Configure**.</span></span>  
  
2. <span data-ttu-id="763e6-237">En el cuadro de diálogo Configurar aplicación, seleccione la **NotificationServiceClient** orquestación, y en el panel derecho, haga lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="763e6-237">In the Configure Application dialog box, select the **NotificationServiceClient** orchestration, and from the right pane do the following:</span></span>  
  
   1. <span data-ttu-id="763e6-238">Para Host, seleccione **BizTalkServerApplication**.</span><span class="sxs-lookup"><span data-stu-id="763e6-238">For Host, select **BizTalkServerApplication**.</span></span>  
  
   2. <span data-ttu-id="763e6-239">La lógica de asignación de puerto de recepción **SalesforceNotificationPort** , puerto de recepción físico **ReceiveOppNotification**.</span><span class="sxs-lookup"><span data-stu-id="763e6-239">Map the logical receive port **SalesforceNotificationPort** to the physical receive port, **ReceiveOppNotification**.</span></span>  
  
   3. <span data-ttu-id="763e6-240">Asigne el puerto de envío lógico **SalesforceRESTInterface** el físico de envío, **SalesforceREST**.</span><span class="sxs-lookup"><span data-stu-id="763e6-240">Map the logical send port **SalesforceRESTInterface** to the physical send port, **SalesforceREST**.</span></span>  
  
   4. <span data-ttu-id="763e6-241">Asigne el puerto de envío lógico **SendToSQL** el físico de envío, **SendToSQL**.</span><span class="sxs-lookup"><span data-stu-id="763e6-241">Map the logical send port **SendToSQL** to the physical send port, **SendToSQL**.</span></span>  
  
      <span data-ttu-id="763e6-242">Haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="763e6-242">Click **OK**.</span></span>  
  
3. <span data-ttu-id="763e6-243">Haga clic en el **SalesforceIntegration** aplicación y, a continuación, haga clic en **iniciar**.</span><span class="sxs-lookup"><span data-stu-id="763e6-243">Right-click the **SalesforceIntegration** application and then click **Start**.</span></span> <span data-ttu-id="763e6-244">Esto inicia el **NotificationServiceClient** orquestación, habilita la ubicación de recepción e inicia el puerto de envío.</span><span class="sxs-lookup"><span data-stu-id="763e6-244">This starts the **NotificationServiceClient** orchestration, enables the receive location, and starts the send port.</span></span>  
  
   <span data-ttu-id="763e6-245">En este tema, terminamos configurando la solución en la consola de administración de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] asociando los puertos lógicos de la orquestación con los puertos físicos.</span><span class="sxs-lookup"><span data-stu-id="763e6-245">In this topic, we finished configuring the solution in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console by associating the logical ports in the orchestration with the physical ports.</span></span>
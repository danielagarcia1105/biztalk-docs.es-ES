---
title: Seguridad para enviar y recibir mensajes | Documentos de Microsoft
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- messages, receiving
- messages, sending
- messages, processing
- security, messages
- security, message processing
- messages, security
ms.assetid: 9bcd01e4-245a-4f4c-b65c-89d7cd3d1b68
caps.latest.revision: 10
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: e1328eb98cbf94b85cda16eda431da197c6d0126
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
ms.locfileid: "22270604"
---
# <a name="security-for-sending-and-receiving-messages"></a><span data-ttu-id="462ea-102">Seguridad de envío y recepción de mensajes</span><span class="sxs-lookup"><span data-stu-id="462ea-102">Security for Sending and Receiving Messages</span></span>
<span data-ttu-id="462ea-103">La siguiente ilustración muestra lo que le sucede a un mensaje cuando BizTalk Server lo recibe, lo procesa y lo envía a otra aplicación o a otro socio.</span><span class="sxs-lookup"><span data-stu-id="462ea-103">The following figure shows what happens to a message as BizTalk Server receives it, processes it, and sends it to another application or partner.</span></span>  
  
 <span data-ttu-id="462ea-104">![Características de seguridad para proteger los mensajes](../core/media/ebiz-plan-secoverview.gif "ebiz_plan_secoverview")</span><span class="sxs-lookup"><span data-stu-id="462ea-104">![Security features for secure messages](../core/media/ebiz-plan-secoverview.gif "ebiz_plan_secoverview")</span></span>  
<span data-ttu-id="462ea-105">Características de seguridad utilizadas durante el período de vida de un mensaje</span><span class="sxs-lookup"><span data-stu-id="462ea-105">Security features used throughout the lifetime of a message</span></span>  
  
1.  <span data-ttu-id="462ea-106">La ubicación de recepción del adaptador recibe el mensaje.</span><span class="sxs-lookup"><span data-stu-id="462ea-106">The receive location for the adapter receives the message.</span></span> <span data-ttu-id="462ea-107">Dependiendo del protocolo, el adaptador realiza una autenticación de nivel de protocolo del remitente para identificar una cuenta de usuario de Windows que represente al remitente del mensaje.</span><span class="sxs-lookup"><span data-stu-id="462ea-107">Depending on the protocol, the adapter does protocol-level authentication of the sender to identify a Windows user account that represents the sender of the message.</span></span>  
  
2.  <span data-ttu-id="462ea-108">A continuación el adaptador pasa el mensaje a la canalización, en la que se realiza la autenticación de nivel de mensaje si ésta no se había realizado ya en el adaptador.</span><span class="sxs-lookup"><span data-stu-id="462ea-108">The adapter then passes the message to the pipeline, where message-level authentication takes place if it has not already happened in the adapter.</span></span>  
  
    1.  <span data-ttu-id="462ea-109">En la fase de descodificación, la canalización descifra el mensaje y comprueba la validez de la firma con el certificado adjunto al mensaje o con el configurado en el almacén de certificados Otras personas del equipo local.</span><span class="sxs-lookup"><span data-stu-id="462ea-109">In the Decode stage, the pipeline decrypts the message and verifies the validity of the signature with the certificate attached to the message, or the one configured in the Other People certificate store of the local computer.</span></span> <span data-ttu-id="462ea-110">Una vez que la canalización valida la firma, el componente de descodificación valida la cadena de certificados hasta una entidad emisora de certificados raíz de confianza.</span><span class="sxs-lookup"><span data-stu-id="462ea-110">After the pipeline validates the signature, the decoding component validates the certificate chain up to a trusted root Certificate Authority (CA).</span></span> <span data-ttu-id="462ea-111">Si el usuario configura la canalización para descodificar mensajes S/MIME y el remitente cifró el mensaje con S/MIME, el descodificador de MIME/SMIME comprueba la firma del mensaje y utiliza el certificado para identificar al remitente.</span><span class="sxs-lookup"><span data-stu-id="462ea-111">If you configure the pipeline to decode S/MIME messages, and the sender encrypted the message using S/MIME, the MIME/SMIME decoder verifies the signature of the message, and uses the certificate to identify the sender.</span></span> <span data-ttu-id="462ea-112">Para obtener más información sobre cómo usar los componentes de canalización de descodificador MIME/SMIME, vea [implementar seguridad de los mensajes](../core/implementing-message-security.md).</span><span class="sxs-lookup"><span data-stu-id="462ea-112">For more information about how to use MIME/SMIME decoder pipeline components, see [Implementing Message Security](../core/implementing-message-security.md).</span></span>  
  
    2.  <span data-ttu-id="462ea-113">En la fase de resolución de entidades, BizTalk Server utiliza la información del certificado y el Id. de seguridad del remitente (SSID) obtenido de la autenticación de nivel de protocolo para determinar si el remitente del mensaje es una entidad reconocida del sistema.</span><span class="sxs-lookup"><span data-stu-id="462ea-113">In the Party Resolution stage, BizTalk Server uses the certificate information and the Sender Security ID (SSID) obtained from protocol-level authentication to determine whether the sender of the message is a recognized party in the system.</span></span> <span data-ttu-id="462ea-114">El SSID del remitente es el nombre completo del usuario autenticado por el adaptador.</span><span class="sxs-lookup"><span data-stu-id="462ea-114">The Sender SSID is the qualified name of the user authenticated by the adapter.</span></span> <span data-ttu-id="462ea-115">Por ejemplo.</span><span class="sxs-lookup"><span data-stu-id="462ea-115">For example.</span></span> <span data-ttu-id="462ea-116">si BizTalk Server recibe el mensaje mediante el adaptador de HTTP que utiliza autenticación de Windows, el SSID del remitente es dominio\nombre de usuario.</span><span class="sxs-lookup"><span data-stu-id="462ea-116">If BizTalk Server receives the message by way of the HTTP adapter using Windows authentication, then the sender SSID is domain\username.</span></span> <span data-ttu-id="462ea-117">BizTalk Server asigna un Id. de entidad (PID) al mensaje, que es el identificador de entidad de una entidad reconocida o un Id. de invitado.</span><span class="sxs-lookup"><span data-stu-id="462ea-117">BizTalk Server assigns a Party ID (PID) to the message, which is either the party ID of a recognized party, or a guest ID.</span></span> <span data-ttu-id="462ea-118">Para obtener más información sobre cómo usar el componente de resolución de entidades, vea [con certificados para la resolución de entidades](../core/using-certificates-for-party-resolution.md).</span><span class="sxs-lookup"><span data-stu-id="462ea-118">For more information about how to use party resolution component, see [Using Certificates for Party Resolution](../core/using-certificates-for-party-resolution.md).</span></span>  
  
    3.  <span data-ttu-id="462ea-119">Si configuró el puerto de recepción para exigir que el remitente se autentique como una entidad conocida del sistema y BizTalk Server no encuentra ningún PID para dicho remitente, BizTalk Server descarta o suspende el mensaje, en función de la configuración del puerto de recepción.</span><span class="sxs-lookup"><span data-stu-id="462ea-119">If you configured the receiving port to require the sender to be authenticated to a known party in the system, and BizTalk Server is not able to find a PID for the sender of the message, then BizTalk Server drops or suspends the message depending on the configuration of the receive port.</span></span> <span data-ttu-id="462ea-120">BizTalk Server proporciona esta característica para reducir la posibilidad de ataques de denegación de servicio.</span><span class="sxs-lookup"><span data-stu-id="462ea-120">BizTalk Server provides this feature to mitigate Denial of Service attacks.</span></span> <span data-ttu-id="462ea-121">Para obtener más información acerca de las opciones de autenticación para puertos de recepción, consulte [cómo configurar opciones de autenticación para un puerto de recepción](../core/how-to-configure-authentication-options-for-a-receive-port.md).</span><span class="sxs-lookup"><span data-stu-id="462ea-121">For more information about the authentication options for receive ports, see [How to Configure Authentication Options for a Receive Port](../core/how-to-configure-authentication-options-for-a-receive-port.md).</span></span>  
  
3.  <span data-ttu-id="462ea-122">Una vez que ha autenticado el mensaje, la canalización lo envía a la base de datos de cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="462ea-122">After the pipeline authenticates the message, it sends the message to the MessageBox database.</span></span>  
  
    1.  <span data-ttu-id="462ea-123">Si no ha identificado el host de cola (en el que se está ejecutando la canalización) como un host con autenticación de confianza, la base de datos de cuadro de mensajes sobrescribe el PID con el Id. de invitado y el SSID con la cuenta de servicio en la que se ejecuta la instancia de host.</span><span class="sxs-lookup"><span data-stu-id="462ea-123">If you did not identify the enqueuing host (on which the pipeline is running) as an authentication trusted host, the MessageBox database overwrites the PID with the guest ID, and the SSID with the service account that the enqueuing host instance is running as.</span></span> <span data-ttu-id="462ea-124">Para obtener más información acerca de host de confianza de autenticación, vea [de mensajes entre los procesos de autenticación](../core/authentication-of-messages-between-processes.md).</span><span class="sxs-lookup"><span data-stu-id="462ea-124">For more information about authentication trusted host, see [Authentication of Messages Between Processes](../core/authentication-of-messages-between-processes.md).</span></span> <span data-ttu-id="462ea-125">Para obtener más información sobre cómo configurar el host de confianza de autenticación, vea [cómo modificar propiedades de Host](../core/how-to-modify-host-properties.md).</span><span class="sxs-lookup"><span data-stu-id="462ea-125">For more information about how to configure authentication trusted host, see [How to Modify Host Properties](../core/how-to-modify-host-properties.md).</span></span>  
  
    2.  <span data-ttu-id="462ea-126">Si el host en que se está ejecutando la canalización está marcado como con autenticación de confianza, la base de datos de cuadro de mensajes confía en el PID y el SSID, y deja esa información en el contexto del mensaje para que los procesos inferiores puedan utilizarla a fin de autenticar o autorizar al remitente original del mensaje.</span><span class="sxs-lookup"><span data-stu-id="462ea-126">If the host on which the pipeline is running is marked as authentication trusted, the MessageBox database trusts the PID and SSID, and leaves this information in the context of the message so that downstream processes can use this information to authenticate and/or authorize the original sender of the message.</span></span>  
  
    3.  <span data-ttu-id="462ea-127">Si BizTalk Server exige autorización de recepción, la base de datos de cuadro de mensajes comprueba que los hosts suscritos al mensaje tienen autorización para recibirlo.</span><span class="sxs-lookup"><span data-stu-id="462ea-127">If BizTalk Server requires receive authorization, the MessageBox database verifies that the hosts subscribed to the message have authorization to receive it.</span></span> <span data-ttu-id="462ea-128">Para obtener más información acerca de la autorización de recepción, consulte [autorización del receptor de un mensaje](../core/authorizing-the-receiver-of-a-message.md).</span><span class="sxs-lookup"><span data-stu-id="462ea-128">For more information about receive authorization, see [Authorizing the Receiver of a Message](../core/authorizing-the-receiver-of-a-message.md).</span></span>  
  
4.  <span data-ttu-id="462ea-129">Una vez que BizTalk Server procesa el mensaje, la canalización de salida lo cifra o firma digitalmente en la fase de codificación.</span><span class="sxs-lookup"><span data-stu-id="462ea-129">After BizTalk Server processes the message, the outbound pipeline encrypts and/or digitally signs the message in the encode stage.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="462ea-130">Vea también</span><span class="sxs-lookup"><span data-stu-id="462ea-130">See Also</span></span>  
 <span data-ttu-id="462ea-131">[Implementación de la seguridad de mensaje](../core/implementing-message-security.md) </span><span class="sxs-lookup"><span data-stu-id="462ea-131">[Implementing Message Security](../core/implementing-message-security.md) </span></span>  
 [<span data-ttu-id="462ea-132">Planear la seguridad de mensaje</span><span class="sxs-lookup"><span data-stu-id="462ea-132">Planning Message Security</span></span>](../core/planning-message-security.md)
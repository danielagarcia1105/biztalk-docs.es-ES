---
title: Controlador de propiedad XPath arbitrario (ejemplo de BizTalk Server) | Documentos de Microsoft
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- pipeline components [custom], examples
- examples, pipeline components [custom]
ms.assetid: 4eb26c38-5ece-42b0-a28e-73214df1dc41
caps.latest.revision: "14"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: a3ce40931caaf8f247afeacdae48721f31a7d99b
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
---
# <a name="arbitrary-xpath-property-handler-biztalk-server-sample"></a><span data-ttu-id="10a00-102">Controlador de propiedad XPath arbitrario (ejemplo de BizTalk Server)</span><span class="sxs-lookup"><span data-stu-id="10a00-102">Arbitrary XPath Property Handler (BizTalk Server Sample)</span></span>
<span data-ttu-id="10a00-103">El controlador de propiedad XPath arbitrario (ejemplo de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]) muestra cómo escribir un componente de canalización personalizado para promover propiedades específicas en un documento XML que se envía a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="10a00-103">The Arbitrary XPath Property Handler ([!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Sample) demonstrates how to write a custom pipeline component to promote specific properties on an XML document that is submitted to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="10a00-104">Puede utilizar la funcionalidad contenida en el ejemplo para crear componentes de ensamblador y desensamblador normales personalizados para evaluar las expresiones XPath.</span><span class="sxs-lookup"><span data-stu-id="10a00-104">You can use functionality contained in the sample to create custom regular, assembler, and disassembler components to evaluate XPath expressions.</span></span>  
  
## <a name="what-this-sample-does"></a><span data-ttu-id="10a00-105">Descripción del ejemplo</span><span class="sxs-lookup"><span data-stu-id="10a00-105">What This Sample Does</span></span>  
 <span data-ttu-id="10a00-106">El ejemplo incluye un documento XML de pedido de compra (PO) que se debe procesar, DocInstance.xml.</span><span class="sxs-lookup"><span data-stu-id="10a00-106">The sample includes a purchase order (PO) XML document to process, DocInstance.xml.</span></span> <span data-ttu-id="10a00-107">El ejemplo realiza los siguientes pasos para procesar DocInstance.xml:</span><span class="sxs-lookup"><span data-stu-id="10a00-107">The sample uses the following steps to process DocInstance.xml:</span></span>  
  
1.  <span data-ttu-id="10a00-108">Un puerto de recepción de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] recupera DocInstance.xml y un componente de canalización personalizado denominado controlador de propiedad XPath arbitrario lo procesa.</span><span class="sxs-lookup"><span data-stu-id="10a00-108">DocInstance.xml is retrieved by a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] receive port and processed by a custom pipeline component called Arbitrary XPath Property Handler.</span></span>  
  
2.  <span data-ttu-id="10a00-109">El componente de controlador de propiedad XPath arbitrario promueve todos \<precio > y \<Quantity > elementos con una expresión XPath arbitraria como se definen en el esquema de pedido de compra.</span><span class="sxs-lookup"><span data-stu-id="10a00-109">The arbitrary XPath property handler component promotes all \<Price> and \<Quantity> elements with an arbitrary XPath expression as defined in the PO schema.</span></span> <span data-ttu-id="10a00-110">Además, la expresión XPath contiene la construcción de la posición que se va a usar con elementos secundarios ambiguos del elemento raíz del documento de pedido de compra.</span><span class="sxs-lookup"><span data-stu-id="10a00-110">The XPath expression also contains the position construct for use with ambiguous child elements of the PO document root element.</span></span>  
  
3.  <span data-ttu-id="10a00-111">El componente de controlador de propiedad XPath arbitrario determina el tipo de mensaje y lo promueve en el contexto del mensaje.</span><span class="sxs-lookup"><span data-stu-id="10a00-111">The arbitrary XPath property handler component determines the message type and promotes it into the message context.</span></span>  
  
4.  <span data-ttu-id="10a00-112">A continuación, el componente envía el documento XML con los elementos promocionados a una orquestación para su posterior procesamiento.</span><span class="sxs-lookup"><span data-stu-id="10a00-112">The component then sends the XML document with the promoted elements to an orchestration for further processing.</span></span>  
  
5.  <span data-ttu-id="10a00-113">La orquestación obtiene acceso a los elementos promocionados del documento de pedido de compra y calcula el número total de elementos del pedido de compra.</span><span class="sxs-lookup"><span data-stu-id="10a00-113">The orchestration accesses the promoted elements in the PO document and calculates the total number of items in the PO.</span></span>  
  
6.  <span data-ttu-id="10a00-114">La orquestación crea un nuevo documento de pedido de compra que contiene la información del pedido de compra original, así como el total actualizado.</span><span class="sxs-lookup"><span data-stu-id="10a00-114">The orchestration creates a new PO document that contains the information from the original PO as well as the updated total.</span></span>  
  
7.  <span data-ttu-id="10a00-115">El nuevo documento de pedido de compra se escribe en un archivo del directorio \Output.</span><span class="sxs-lookup"><span data-stu-id="10a00-115">The new PO document is written to a file in the \Output directory.</span></span>  
  
## <a name="where-to-find-this-sample"></a><span data-ttu-id="10a00-116">Ubicación del ejemplo</span><span class="sxs-lookup"><span data-stu-id="10a00-116">Where to Find This Sample</span></span>  
 <span data-ttu-id="10a00-117">*\<Ejemplos de ruta de acceso >*\Pipelines\ArbitraryXPathPropertyHandler</span><span class="sxs-lookup"><span data-stu-id="10a00-117">*\<Samples Path>*\Pipelines\ArbitraryXPathPropertyHandler</span></span>  
  
 <span data-ttu-id="10a00-118">En la tabla siguiente se enumeran los archivos del ejemplo y se describe su propósito.</span><span class="sxs-lookup"><span data-stu-id="10a00-118">The following table shows the files in this sample and describes their purpose.</span></span>  
  
|<span data-ttu-id="10a00-119">Archivos</span><span class="sxs-lookup"><span data-stu-id="10a00-119">File(s)</span></span>|<span data-ttu-id="10a00-120">Description</span><span class="sxs-lookup"><span data-stu-id="10a00-120">Description</span></span>|  
|---------------|-----------------|  
|<span data-ttu-id="10a00-121">ArbitraryXPathPropertyHandler.sln</span><span class="sxs-lookup"><span data-stu-id="10a00-121">ArbitraryXPathPropertyHandler.sln</span></span>|<span data-ttu-id="10a00-122">Archivo de solución del componente de canalización personalizado.</span><span class="sxs-lookup"><span data-stu-id="10a00-122">Custom pipeline component solution file.</span></span>|  
|<span data-ttu-id="10a00-123">ArbitraryXPathPropertyHandler.resX</span><span class="sxs-lookup"><span data-stu-id="10a00-123">ArbitraryXPathPropertyHandler.resX</span></span>|<span data-ttu-id="10a00-124">Archivo de recursos.</span><span class="sxs-lookup"><span data-stu-id="10a00-124">Resource file.</span></span>|  
|<span data-ttu-id="10a00-125">ArbitraryXPathPropertyHandlerComp.cs</span><span class="sxs-lookup"><span data-stu-id="10a00-125">ArbitraryXPathPropertyHandlerComp.cs</span></span>|<span data-ttu-id="10a00-126">Implementación del componente principal.</span><span class="sxs-lookup"><span data-stu-id="10a00-126">Main component implementation.</span></span>|  
|<span data-ttu-id="10a00-127">AssemblyInfo.cs</span><span class="sxs-lookup"><span data-stu-id="10a00-127">AssemblyInfo.cs</span></span>|<span data-ttu-id="10a00-128">Información sobre el ensamblado.</span><span class="sxs-lookup"><span data-stu-id="10a00-128">Assembly information.</span></span>|  
|<span data-ttu-id="10a00-129">Cleanup.bat</span><span class="sxs-lookup"><span data-stu-id="10a00-129">Cleanup.bat</span></span>|<span data-ttu-id="10a00-130">Archivo de limpieza de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="10a00-130">Sample cleanup file.</span></span>|  
|<span data-ttu-id="10a00-131">PromotingMap.cs</span><span class="sxs-lookup"><span data-stu-id="10a00-131">PromotingMap.cs</span></span>|<span data-ttu-id="10a00-132">Promoción de propiedades como implementación de asignación de tipos CLR nativos.</span><span class="sxs-lookup"><span data-stu-id="10a00-132">Property promotion as native CLR types map implementation.</span></span>|  
|<span data-ttu-id="10a00-133">PropertyAttributes.cs</span><span class="sxs-lookup"><span data-stu-id="10a00-133">PropertyAttributes.cs</span></span>|<span data-ttu-id="10a00-134">Atributos personalizados, descriptor de propiedades e implementación de ICustomTypePropertyDescriptor.</span><span class="sxs-lookup"><span data-stu-id="10a00-134">Custom attributes, property descriptor, and ICustomTypePropertyDescriptor implementation.</span></span>|  
|<span data-ttu-id="10a00-135">SchemaMap.cs</span><span class="sxs-lookup"><span data-stu-id="10a00-135">SchemaMap.cs</span></span>|<span data-ttu-id="10a00-136">Asignación de esquemas del tipo de mensaje a IDocumentSpec para resolver la ambigüedad del esquema.</span><span class="sxs-lookup"><span data-stu-id="10a00-136">Schema mapping from message type to IDocumentSpec to resolve schema ambiguity.</span></span>|  
|<span data-ttu-id="10a00-137">Setup.bat</span><span class="sxs-lookup"><span data-stu-id="10a00-137">Setup.bat</span></span>|<span data-ttu-id="10a00-138">Componente de canalización de ejemplo de configuración y de versión de compilación.</span><span class="sxs-lookup"><span data-stu-id="10a00-138">Build and setup sample pipeline component.</span></span>|  
|<span data-ttu-id="10a00-139">VirtualStream.cs</span><span class="sxs-lookup"><span data-stu-id="10a00-139">VirtualStream.cs</span></span>|<span data-ttu-id="10a00-140">Implementación de secuencia virtual.</span><span class="sxs-lookup"><span data-stu-id="10a00-140">Virtual stream implementation.</span></span>|  
|<span data-ttu-id="10a00-141">SeekableReadOnlyStream.cs</span><span class="sxs-lookup"><span data-stu-id="10a00-141">SeekableReadOnlyStream.cs</span></span>|<span data-ttu-id="10a00-142">Implementación de secuencia de sólo lectura en la que se pueden efectuar búsquedas.</span><span class="sxs-lookup"><span data-stu-id="10a00-142">Seekable read-only stream implementation.</span></span>|  
|<span data-ttu-id="10a00-143">ArbitraryXPathSample.sln</span><span class="sxs-lookup"><span data-stu-id="10a00-143">ArbitraryXPathSample.sln</span></span>|<span data-ttu-id="10a00-144">Archivo de solución de orquestación de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="10a00-144">Sample orchestration solution file.</span></span>|  
|<span data-ttu-id="10a00-145">CalculateTotalAmount.odx</span><span class="sxs-lookup"><span data-stu-id="10a00-145">CalculateTotalAmount.odx</span></span>|<span data-ttu-id="10a00-146">Orquestación de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="10a00-146">Sample orchestration.</span></span>|  
|<span data-ttu-id="10a00-147">PODocument.xsd</span><span class="sxs-lookup"><span data-stu-id="10a00-147">PODocument.xsd</span></span>|<span data-ttu-id="10a00-148">Esquema del pedido de compra.</span><span class="sxs-lookup"><span data-stu-id="10a00-148">Purchase order schema.</span></span>|  
|<span data-ttu-id="10a00-149">DocInstance.xml</span><span class="sxs-lookup"><span data-stu-id="10a00-149">DocInstance.xml</span></span>|<span data-ttu-id="10a00-150">Instancia del pedido de compra de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="10a00-150">Sample purchase order instance.</span></span>|  
  
## <a name="building-and-initializing-this-sample"></a><span data-ttu-id="10a00-151">Crear e inicializar este ejemplo</span><span class="sxs-lookup"><span data-stu-id="10a00-151">Building and Initializing This Sample</span></span>  
 <span data-ttu-id="10a00-152">Este ejemplo está diseñado para ejecutarse en un entorno [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] con [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] en ejecución en el mismo equipo.</span><span class="sxs-lookup"><span data-stu-id="10a00-152">This sample is designed to run in a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment with [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] running on the same machine.</span></span> <span data-ttu-id="10a00-153">Si el entorno no coincide con esta configuración, debe modificar el controlador de propiedad XPath arbitrario (ejemplo de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]) para elegir el equipo de servidor SQL Server correcto.</span><span class="sxs-lookup"><span data-stu-id="10a00-153">If your environment does not match this configuration, you must modify the Arbitrary XPath Property Handler ([!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Sample) to point to the correct SQL Server computer.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="10a00-154">Setup.bat supone que el directorio de instalación de Microsoft Windows es C:\Windows.</span><span class="sxs-lookup"><span data-stu-id="10a00-154">Setup.bat assumes your Microsoft Windows installation directory is C:\Windows.</span></span> <span data-ttu-id="10a00-155">Si la instalación de Windows se encuentra en otro directorio, debe modificar el archivo ArbitraryXPathPropertyHandler.csproj para reflejar la ubicación del ensamblado Microsoft.BizTalk.Component.Utilities en la caché de ensamblados global.</span><span class="sxs-lookup"><span data-stu-id="10a00-155">If your Windows installation is in another directory, you must modify the ArbitraryXPathPropertyHandler.csproj file to reflect the location of the Microsoft.BizTalk.Component.Utilities assembly in the global assembly cache.</span></span> <span data-ttu-id="10a00-156">En el elemento de referencia, cambie \<SYSTEMROOT > a la ubicación donde está instalado Windows (por ejemplo, C:\WINNT\\).</span><span class="sxs-lookup"><span data-stu-id="10a00-156">In the Reference element, change \<SYSTEMROOT> to the location where Windows is installed (for example, C:\WINNT\\).</span></span>  
  
```  
<Reference  
  Name = "Microsoft.BizTalk.Component.Utilities"  
  AssemblyName = "Microsoft.BizTalk.Component.Utilities"  
  HintPath = "<SYSTEMROOT>\assembly\GAC\Microsoft.BizTalk.Component.Utilities\3.0.1.0__31bf3856ad364e35\Microsoft.BizTalk.Component.Utilities.dll"  
/>  
```  
  
 <span data-ttu-id="10a00-157">Utilice el siguiente procedimiento para generar e inicializar el controlador de propiedad XPath arbitrario (ejemplo de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]).</span><span class="sxs-lookup"><span data-stu-id="10a00-157">Use the following procedure to build and initialize the Arbitrary XPath Property Handler ([!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Sample).</span></span>  
  
#### <a name="to-build-and-initialize-this-sample"></a><span data-ttu-id="10a00-158">Para generar e inicializar el ejemplo</span><span class="sxs-lookup"><span data-stu-id="10a00-158">To build and initialize this sample</span></span>  
  
1.  <span data-ttu-id="10a00-159">En una ventana de comandos, cambie los directorios (**cd**) a la siguiente carpeta:</span><span class="sxs-lookup"><span data-stu-id="10a00-159">In a command window, change directories (**cd**) to the following folder:</span></span>  
  
     <span data-ttu-id="10a00-160">*\<Ejemplos de ruta de acceso >*\Pipelines\ArbitraryXPathPropertyHandler</span><span class="sxs-lookup"><span data-stu-id="10a00-160">*\<Samples Path>*\Pipelines\ArbitraryXPathPropertyHandler</span></span>  
  
2.  <span data-ttu-id="10a00-161">Ejecute el archivo Setup.bat que realiza las acciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="10a00-161">Run the file Setup.bat, which performs the following actions:</span></span>  
  
    -   <span data-ttu-id="10a00-162">Genera el componente de canalización del controlador de propiedad XPath arbitrario.</span><span class="sxs-lookup"><span data-stu-id="10a00-162">Builds the Arbitrary XPath Property Handler pipeline component.</span></span>  
  
    -   <span data-ttu-id="10a00-163">Componente de canalización de copias generados para el  *\<ruta de acceso de instalación >*directorio \Pipeline Components.</span><span class="sxs-lookup"><span data-stu-id="10a00-163">Copies built pipeline component to the *\<Installation Path>*\Pipeline Components directory.</span></span>  
  
    -   <span data-ttu-id="10a00-164">Crea los puertos de envío y recepción.</span><span class="sxs-lookup"><span data-stu-id="10a00-164">Creates the send and receive ports.</span></span>  
  
    -   <span data-ttu-id="10a00-165">Crea los directorios de entrada y salida utilizados en el ejemplo.</span><span class="sxs-lookup"><span data-stu-id="10a00-165">Creates the input and output directories used in the sample.</span></span>  
  
    -   <span data-ttu-id="10a00-166">Instala la orquestación de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] de ejemplo ArbitraryXPathSample.</span><span class="sxs-lookup"><span data-stu-id="10a00-166">Installs the sample [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] orchestration ArbitraryXPathSample.</span></span>  
  
    -   <span data-ttu-id="10a00-167">Enlaza los puertos en la orquestación de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="10a00-167">Binds the ports to the sample orchestration.</span></span>  
  
    -   <span data-ttu-id="10a00-168">Inicia la orquestación.</span><span class="sxs-lookup"><span data-stu-id="10a00-168">Starts the orchestration.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="10a00-169">No se deben generar informes de errores durante la generación y la inicialización.</span><span class="sxs-lookup"><span data-stu-id="10a00-169">No errors should be reported during the build and initialization.</span></span> <span data-ttu-id="10a00-170">En caso de que se produzca algún error, asegúrese de que tiene instalado todo el software necesario y que las herramientas de generación de Microsoft se encuentran disponibles en la ruta.</span><span class="sxs-lookup"><span data-stu-id="10a00-170">If any errors occur, make sure that you have all necessary software installed and that Microsoft build tools are available on the path.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="10a00-171">Para deshacer los cambios realizados por Setup.bat, debe detener y reiniciar, en primer lugar, la instancia de host de la consola de administración de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="10a00-171">To undo changes made by Setup.bat, you must first stop and restart the host instance from the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="10a00-172">A continuación, ejecute Cleanup.bat.</span><span class="sxs-lookup"><span data-stu-id="10a00-172">Next, run Cleanup.bat.</span></span> <span data-ttu-id="10a00-173">Debe ejecutar Cleanup.bat antes de ejecutar Setup.bat por segunda vez.</span><span class="sxs-lookup"><span data-stu-id="10a00-173">You must run Cleanup.bat before running Setup.bat a second time.</span></span>  
  
## <a name="running-this-sample"></a><span data-ttu-id="10a00-174">Ejecución del ejemplo</span><span class="sxs-lookup"><span data-stu-id="10a00-174">Running This Sample</span></span>  
 <span data-ttu-id="10a00-175">Use el siguiente procedimiento para ejecutar el controlador de propiedad XPath arbitrario (ejemplo de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]).</span><span class="sxs-lookup"><span data-stu-id="10a00-175">Use the following procedure to run the Arbitrary XPath Property Handler ([!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Sample).</span></span>  
  
#### <a name="to-run-this-sample"></a><span data-ttu-id="10a00-176">Para ejecutar el ejemplo</span><span class="sxs-lookup"><span data-stu-id="10a00-176">To run this sample</span></span>  
  
1.  <span data-ttu-id="10a00-177">Copie el archivo de pedido de compra (PO) DocInstance.xml en el directorio \Input.</span><span class="sxs-lookup"><span data-stu-id="10a00-177">Copy the purchase order (PO) file DocInstance.xml to the \Input directory.</span></span> <span data-ttu-id="10a00-178">Un puerto de recepción recoge el archivo de pedido de compra y envía los datos XML al componente de canalización del controlador de propiedad Xpath arbitrario.</span><span class="sxs-lookup"><span data-stu-id="10a00-178">The PO file is picked up by a receive port, which sends the XML data to the Arbitrary XPath Property Handler pipeline component.</span></span>  
  
2.  <span data-ttu-id="10a00-179">Vea el contenido del directorio \Output.</span><span class="sxs-lookup"><span data-stu-id="10a00-179">View the contents in the \Output directory.</span></span> <span data-ttu-id="10a00-180">Tenga en cuenta que se crea un archivo nuevo que contiene toda la información del archivo DocInstance.xml que ha copiado en el directorio \Input.</span><span class="sxs-lookup"><span data-stu-id="10a00-180">Notice that a new file is created that contains all the information from the DocInstance.xml file that you copied to the \Input directory.</span></span> <span data-ttu-id="10a00-181">La diferencia en el archivo es que ahora el \<TotalAmount > se ha rellenado el elemento con la cantidad total del pedido de compra.</span><span class="sxs-lookup"><span data-stu-id="10a00-181">The difference in the file is that now the \<TotalAmount> element has been populated with the total amount for the PO.</span></span>  
  
## <a name="comments"></a><span data-ttu-id="10a00-182">Comentarios</span><span class="sxs-lookup"><span data-stu-id="10a00-182">Comments</span></span>  
 <span data-ttu-id="10a00-183">Las expresiones XPath canónicas son expresiones simples como "/ * [local-name () = 'element-name' and namespaceURI() = 'http://MyUri.org'] /\*[local-name () = 'element-name'] / @\*[local-name = 'attribute-name']".</span><span class="sxs-lookup"><span data-stu-id="10a00-183">Canonical XPath expressions are simple expressions such as "/*[local-name()='element-name' and namespaceURI()='http://MyUri.org']/\*[local-name()='element-name']/@\*[local-name='attribute-name']".</span></span>  
  
 <span data-ttu-id="10a00-184">Una expresión XPath arbitraria puede ser tan compleja como "//element-name//*[local-name()='element-name' and position()=2]".</span><span class="sxs-lookup"><span data-stu-id="10a00-184">An arbitrary XPath expression can be as complex as "//element-name//*[local-name()='element-name' and position()=2]".</span></span> <span data-ttu-id="10a00-185">Dado el caso, recibirá un error de tiempo de ejecución que indica que las expresiones XPath no canónicas no son compatibles con [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] si el esquema tiene un XPath no canónico utilizado en el cuerpo de XPath o en una propiedad de XPath.</span><span class="sxs-lookup"><span data-stu-id="10a00-185">If fact, you will receive a run-time error stating that non-canonical XPath expressions are not supported by [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] if your schema has a non-canonical XPath used in the XPath body or an XPath property.</span></span> <span data-ttu-id="10a00-186">Una solución para admitir expresiones XPath arbitrarias es crear componentes de desensamblador y de ensamblador personalizados que admiten un cuerpo de XPath arbitrario, así como expresiones de propiedad de XPath arbitrarias.</span><span class="sxs-lookup"><span data-stu-id="10a00-186">A solution to support arbitrary XPath expressions is to create custom disassembler and assembler components that support an arbitrary XPath body as well as arbitrary XPath property expressions.</span></span>  
  
 <span data-ttu-id="10a00-187">Este ejemplo utiliza la siguiente secuencia de pasos en el componente de canalización personalizado cuando **IComponent.Execute** se implementa:</span><span class="sxs-lookup"><span data-stu-id="10a00-187">This sample uses the following sequence of steps in the custom pipeline component when **IComponent.Execute** is implemented:</span></span>  
  
1.  <span data-ttu-id="10a00-188">Crea una secuencia virtual que permite efectuar búsquedas en la secuencia de parte del cuerpo del mensaje de entrada.</span><span class="sxs-lookup"><span data-stu-id="10a00-188">Creates a virtual seekable stream over the input message body part stream.</span></span> <span data-ttu-id="10a00-189">(Puesto que es posible que el mensaje de entrada sea grande y la secuencia no permita efectuar búsquedas, debe tener un pequeño volumen de memoria y poder cambiar las posiciones de la secuencia).</span><span class="sxs-lookup"><span data-stu-id="10a00-189">(Because the input message can be large and the stream can be non-seekable, it should have a small memory footprint and be able to change stream positions.)</span></span>  
  
2.  <span data-ttu-id="10a00-190">Crea un nuevo mensaje saliente y una nueva parte del cuerpo para ello, asigna una secuencia virtual a la nueva parte del cuerpo y clona las propiedades de la parte del cuerpo y el contexto del mensaje.</span><span class="sxs-lookup"><span data-stu-id="10a00-190">Creates a new outgoing message and a new body part for it, assigns a virtual stream to the new body part, clones body part properties, and clones message context.</span></span>  
  
3.  <span data-ttu-id="10a00-191">Obtiene un esquema para el mensaje de entrada o se basa en los esquemas especificados durante el tiempo de diseño.</span><span class="sxs-lookup"><span data-stu-id="10a00-191">Gets a schema for the input message or based on schemas specified during design time.</span></span>  
  
4.  <span data-ttu-id="10a00-192">Carga la secuencia en una instancia de **System.Xml.XmlDocument**.</span><span class="sxs-lookup"><span data-stu-id="10a00-192">Loads the stream into an instance of **System.Xml.XmlDocument**.</span></span>  
  
5.  <span data-ttu-id="10a00-193">Inspecciona las propiedades promocionadas y los campos distinguidos, además de promoverlos o escribirlos en el contexto del mensaje saliente.</span><span class="sxs-lookup"><span data-stu-id="10a00-193">Walks through promoted properties and distinguished fields and promotes or writes them to the message context of the outgoing message.</span></span>  
  
6.  <span data-ttu-id="10a00-194">Devuelve el mensaje saliente.</span><span class="sxs-lookup"><span data-stu-id="10a00-194">Returns the outgoing message.</span></span>  
  
7.  <span data-ttu-id="10a00-195">Escribe el mensaje saliente en un archivo.</span><span class="sxs-lookup"><span data-stu-id="10a00-195">Writes the outgoing message to a file.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="10a00-196">Vea también</span><span class="sxs-lookup"><span data-stu-id="10a00-196">See Also</span></span>  
 [<span data-ttu-id="10a00-197">Canalizaciones (carpeta de ejemplos de BizTalk Server)</span><span class="sxs-lookup"><span data-stu-id="10a00-197">Pipelines (BizTalk Server Samples Folder)</span></span>](../core/pipelines-biztalk-server-samples-folder.md)
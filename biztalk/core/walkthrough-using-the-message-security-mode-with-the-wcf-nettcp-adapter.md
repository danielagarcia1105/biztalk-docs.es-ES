---
title: 'Tutorial: Usar el modo de seguridad de mensajes con el adaptador WCF-NetTcp | Documentos de Microsoft'
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: c7f6e892-34ce-4132-8867-54cc3bbfe507
caps.latest.revision: "47"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 68fc5e0a90fdfcaa6c3b6e5f6ae280d320be5647
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
---
# <a name="walkthrough-using-the-message-security-mode-with-the-wcf-nettcp-adapter"></a><span data-ttu-id="65c29-102">Tutorial: Usar el modo de seguridad de mensajes con el adaptador WCF-NetTcp</span><span class="sxs-lookup"><span data-stu-id="65c29-102">Walkthrough: Using the Message Security Mode with the WCF-NetTcp Adapter</span></span>
  
> [!NOTE]
>  <span data-ttu-id="65c29-103">Para obtener más información acerca de los adaptadores, vea [adaptadores de BizTalk Server](../core/adapters-in-biztalk-server.md).</span><span class="sxs-lookup"><span data-stu-id="65c29-103">For more information about adapters, see [Adapters in BizTalk Server](../core/adapters-in-biztalk-server.md).</span></span>  
  
## <a name="introduction"></a><span data-ttu-id="65c29-104">Introducción</span><span class="sxs-lookup"><span data-stu-id="65c29-104">Introduction</span></span>
  
 <span data-ttu-id="65c29-105">En este tutorial se muestra cómo configurar el adaptador de WCF-NetTcp para que use el modo de seguridad de mensaje [!INCLUDE[firstref_btsWinCommFoundation](../includes/firstref-btswincommfoundation-md.md)], que usa la especificación WS-Security como ayuda para proteger los mensajes que el adaptador transmite.</span><span class="sxs-lookup"><span data-stu-id="65c29-105">This walkthrough shows how to configure the WCF-NetTcp adapter to use the [!INCLUDE[firstref_btsWinCommFoundation](../includes/firstref-btswincommfoundation-md.md)] Message security mode, which uses the WS-Security specification to help secure messages that the adapter transmits.</span></span> <span data-ttu-id="65c29-106">Esta especificación describe las mejoras en el protocolo de mensajería SOAP para conseguir confidencialidad, integridad y autenticación en el nivel de mensaje SOAP.</span><span class="sxs-lookup"><span data-stu-id="65c29-106">This specification describes enhancements to the SOAP messaging protocol to accomplish confidentiality, integrity, and authentication at the SOAP message level.</span></span> <span data-ttu-id="65c29-107">En el modo de seguridad de mensaje, es necesario especificar el certificado de servicio para operaciones como, por ejemplo, el cifrado y descifrado y la firma y verificación según las combinaciones del modo de seguridad.</span><span class="sxs-lookup"><span data-stu-id="65c29-107">Message security mode requires the service certificate to be specified for operations such as encryption/decryption and signing/verification purposes depending on the security mode combinations.</span></span>  
  
 <span data-ttu-id="65c29-108">El adaptador de WCF-NetTcp usa el enlace NetTcpBinding para la comunicación entre los clientes [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] y los servicios remotos de [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)].</span><span class="sxs-lookup"><span data-stu-id="65c29-108">The WCF-NetTcp adapter uses the NetTcpBinding binding to communicate between [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] clients and [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] remote services.</span></span> <span data-ttu-id="65c29-109">Proporciona acceso completo a características de confiabilidad, seguridad y transacciones de SOAP.</span><span class="sxs-lookup"><span data-stu-id="65c29-109">It provides full access to SOAP security, reliability, and transaction features.</span></span> <span data-ttu-id="65c29-110">Permite publicar las orquestaciones y los esquemas como servicios de [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] y también proporciona la capacidad de que una orquestación consuma servicios WCF externos.</span><span class="sxs-lookup"><span data-stu-id="65c29-110">It allows orchestrations and schemas to be published as [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] services, and also provides the ability for an orchestration to consume external WCF services.</span></span> <span data-ttu-id="65c29-111">Este adaptador usa el transporte TCP y los mensajes tienen una codificación binaria.</span><span class="sxs-lookup"><span data-stu-id="65c29-111">This adapter uses the TCP transport, and messages have binary encoding.</span></span> <span data-ttu-id="65c29-112">El adaptador de WCF-NetTcp consta de un adaptador de envío y un adaptador de recepción.</span><span class="sxs-lookup"><span data-stu-id="65c29-112">The WCF-NetTcp adapter consists of both a send adapter and a receive adapter.</span></span>  
  
 <span data-ttu-id="65c29-113">En este tutorial se muestra cómo crear certificados para el modo de seguridad de mensaje con el Servicio de certificados de Active Directory.</span><span class="sxs-lookup"><span data-stu-id="65c29-113">This walkthrough shows how to create certificates for Message security mode by using the Active Directory Certificate Service.</span></span> <span data-ttu-id="65c29-114">Creará certificados para el servidor y el cliente y, luego, configurará una ubicación de recepción de WCF-NetTcp para usar los certificados en modo de seguridad de mensaje.</span><span class="sxs-lookup"><span data-stu-id="65c29-114">You will create certificates for the server and the client, and then configure a WCF-NetTcp receive location to use the certificates in Message security mode.</span></span> <span data-ttu-id="65c29-115">Mediante el uso de un cliente [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)], enviará mensajes a dicha ubicación de recepción en estado cifrado según la sintaxis y el procesamiento de cifrado de XML.</span><span class="sxs-lookup"><span data-stu-id="65c29-115">By using a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] client, you will send messages to that receive location in an encrypted state according to XML Encryption Syntax and Processing.</span></span>  
  
 <span data-ttu-id="65c29-116">Cuando concluya el tutorial, comprenderá cómo se realizan las tareas siguientes:</span><span class="sxs-lookup"><span data-stu-id="65c29-116">After completing this walkthrough, you will understand how to perform the following tasks:</span></span>  
  
-   <span data-ttu-id="65c29-117">Use el Servicio de certificados de Active Directory para crear una solicitud de certificado y completar el proceso mediante la emisión del certificado.</span><span class="sxs-lookup"><span data-stu-id="65c29-117">Use the Active Directory Certificate Service to create a certificate request and complete the process by issuing the certificate.</span></span>  
  
-   <span data-ttu-id="65c29-118">En la consola de administración de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], configure el adaptador de WCF-NetTcp para que use el modo de seguridad de mensaje.</span><span class="sxs-lookup"><span data-stu-id="65c29-118">From the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, configure the WCF-NetTcp adapter to use the Message security mode.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="65c29-119">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="65c29-119">Prerequisites</span></span>  
 <span data-ttu-id="65c29-120">Para llevar a cabo los pasos de este ejemplo Asegúrese de que su entorno instala los siguientes requisitos previos;</span><span class="sxs-lookup"><span data-stu-id="65c29-120">To perform the steps in this sample ensure that your environment installs the following prerequisites;</span></span>  
  
-   <span data-ttu-id="65c29-121">El equipo que genera los ensamblados y ejecuta el proceso de implementación tanto el equipo que ejecuta el ejemplo requieren Microsoft [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)], Microsoft [!INCLUDE[netfx40_short](../includes/netfx40-short-md.md)]y Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)].</span><span class="sxs-lookup"><span data-stu-id="65c29-121">Both the computer that builds the assemblies and runs the deployment process, and the computer that runs the sample, require Microsoft [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)], Microsoft [!INCLUDE[netfx40_short](../includes/netfx40-short-md.md)], and Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)].</span></span>  
  
-   <span data-ttu-id="65c29-122">El equipo que se usa para generar los ensamblados y ejecutar el proceso de implementación requiere Microsoft [!INCLUDE[vs2010](../includes/vs2010-md.md)].</span><span class="sxs-lookup"><span data-stu-id="65c29-122">The computer used to build the assemblies and run the deployment process requires Microsoft [!INCLUDE[vs2010](../includes/vs2010-md.md)].</span></span>  
  
-   <span data-ttu-id="65c29-123">El equipo que ejecuta el ejemplo requiere los adaptadores de [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] y las herramientas de administración de [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)].</span><span class="sxs-lookup"><span data-stu-id="65c29-123">The computer that runs the sample requires the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Adapters and the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Administration Tools.</span></span> <span data-ttu-id="65c29-124">Se trata de opciones de instalación durante la instalación de Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)].</span><span class="sxs-lookup"><span data-stu-id="65c29-124">These are options to install during setup of Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)].</span></span>  
  
-   <span data-ttu-id="65c29-125">En los equipos que use para realizar las tareas administrativas, debe ejecutar una cuenta de usuario que sea miembro del grupo de administradores de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] para configurar los parámetros de aplicación de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] en la consola de administración de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="65c29-125">On the computers that you use to perform administrative tasks, you must run as a user account that is a member of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators group to configure the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application settings within the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="65c29-126">Esta cuenta de usuario también debe ser miembro del grupo de administradores local para la implementación de la aplicación, la administración de las instancias de host y otras tareas que puedan ser necesarias.</span><span class="sxs-lookup"><span data-stu-id="65c29-126">This user account must also be a member of the local Administrators group for application deployment, managing host instances, and other tasks that may be required.</span></span>  
  
-   <span data-ttu-id="65c29-127">En cualquier equipo que requiera [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] capacidad, complete el procedimiento de instalación única para la [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] ejemplos en [http://go.microsoft.com/fwlink/?LinkId=135510](http://go.microsoft.com/fwlink/?LinkId=135510).</span><span class="sxs-lookup"><span data-stu-id="65c29-127">On any computer that requires [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] capability, complete the one-time setup procedure for the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] samples at [http://go.microsoft.com/fwlink/?LinkId=135510](http://go.microsoft.com/fwlink/?LinkId=135510).</span></span>  
  
-   <span data-ttu-id="65c29-128">En el equipo que ejecuta el ejemplo e importa un enlace o un archivo .msi en [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], asegúrese de que el host no es un host de confianza. De lo contrario, se producirá un error en la importación.</span><span class="sxs-lookup"><span data-stu-id="65c29-128">On the computer that runs the sample and imports a binding or an .msi file into [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], ensure the host is not a trusted host or the import will fail.</span></span>  
  
-   <span data-ttu-id="65c29-129">En el equipo donde se ejecuta en el ejemplo, asegúrese de que están instalados los Servicios de certificados de Active Directory.</span><span class="sxs-lookup"><span data-stu-id="65c29-129">On the computer that runs the sample ensure that Active Directory Certificate Services is installed.</span></span>  
  
-   <span data-ttu-id="65c29-130">Debe descargar el código del tutorial y extraerlo en el equipo.</span><span class="sxs-lookup"><span data-stu-id="65c29-130">You must download the walkthrough code and extract it to your computer.</span></span>  <span data-ttu-id="65c29-131">Este tutorial es una parte de todo el [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] paquete de tutoriales del adaptador.</span><span class="sxs-lookup"><span data-stu-id="65c29-131">This walkthrough is a part of the entire [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Adapter Walkthrough package.</span></span> <span data-ttu-id="65c29-132">Puede descargar el archivo **WCFAdapterWalkthroughs.exe** desde el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Developer Center en [http://go.microsoft.com/fwlink/?LinkId=194140](http://go.microsoft.com/fwlink/?LinkId=194140).</span><span class="sxs-lookup"><span data-stu-id="65c29-132">You can download the file **WCFAdapterWalkthroughs.exe** from the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Developer Center at [http://go.microsoft.com/fwlink/?LinkId=194140](http://go.microsoft.com/fwlink/?LinkId=194140).</span></span>  
  
## <a name="create-the-certificates-for-this-walkthrough"></a><span data-ttu-id="65c29-133">Crear los certificados para este tutorial</span><span class="sxs-lookup"><span data-stu-id="65c29-133">Create the certificates for this walkthrough</span></span>  
  
1.  <span data-ttu-id="65c29-134">En esta sección solicitará certificados de servicio y cliente, emitirá los certificados y los instalará en los almacenes adecuados.</span><span class="sxs-lookup"><span data-stu-id="65c29-134">In this section you will request service and client certificates, issue the certificates, and install them into the appropriate stores.</span></span> <span data-ttu-id="65c29-135">Los Servicios de certificados de Active Directory se usan para crear un certificado con una cadena de certificados de confianza.</span><span class="sxs-lookup"><span data-stu-id="65c29-135">Active Directory Certificate Services is used to create a certificate with a trusted certificate chain.</span></span> <span data-ttu-id="65c29-136">Si no ha instalado los servicios de certificados de Active Directory como parte de los requisitos previos, instale los servicios de certificados de Active Directory en el equipo.</span><span class="sxs-lookup"><span data-stu-id="65c29-136">If you did not install Active Directory Certificate Services as part of the Prerequisites, then install Active Directory Certificate Services on your computer.</span></span> <span data-ttu-id="65c29-137">Si ya están instalados, vaya al paso 2.</span><span class="sxs-lookup"><span data-stu-id="65c29-137">If it is already installed, go to step 2.</span></span>  
  
    1.  <span data-ttu-id="65c29-138">Haga clic en **iniciar**, seleccione **herramientas administrativas**y, a continuación, haga clic en **el administrador del servidor**.</span><span class="sxs-lookup"><span data-stu-id="65c29-138">Click **Start**, point to **Administrative Tools**, and then click **Server Manager**.</span></span>  
  
    2.  <span data-ttu-id="65c29-139">En el **el administrador del servidor** nodo, haga clic en **agregar**y, a continuación, haga clic en **Roles**.</span><span class="sxs-lookup"><span data-stu-id="65c29-139">Under the **Server Manager** node, click **Add**, and then click **Roles**.</span></span>  
  
    3.  <span data-ttu-id="65c29-140">Se abrirá la **antes de comenzar** cuadro de diálogo para la **Asistente para agregar funciones**.</span><span class="sxs-lookup"><span data-stu-id="65c29-140">This brings up the **Before you begin** dialog for the **Add Roles Wizard**.</span></span> <span data-ttu-id="65c29-141">Haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="65c29-141">Click **Next**.</span></span>  
  
    4.  <span data-ttu-id="65c29-142">En el **seleccionar Roles de servidor** , seleccione **servicios de certificados de Active Directory**, haga clic en **siguiente**y, a continuación, siga las que aparecen en pantalla instrucciones para completar la instalación.</span><span class="sxs-lookup"><span data-stu-id="65c29-142">On the **Select Server Roles** page, select **Active Directory Certificate Services**, click **Next**, and then follow the on-screen instructions to complete the installation.</span></span>  
  
2.  <span data-ttu-id="65c29-143">Cree una solicitud de certificado para la autenticación del servicio. Para ello:</span><span class="sxs-lookup"><span data-stu-id="65c29-143">Create a certificate request for the service authentication as follows:</span></span>  
  
    1.  <span data-ttu-id="65c29-144">En Internet Explorer, visite el sitio Web `http://localhost/certsrv`.</span><span class="sxs-lookup"><span data-stu-id="65c29-144">In Internet Explorer, visit the Web site `http://localhost/certsrv`.</span></span> <span data-ttu-id="65c29-145">En el **bienvenida** página, haga clic en **solicitar un certificado**y, a continuación, haga clic en **solicitud de certificado avanzada** en el **solicitar un certificado** página.</span><span class="sxs-lookup"><span data-stu-id="65c29-145">On the **Welcome** page, click **Request a Certificate**, and then click **Advanced certificate request** on the **Request a Certificate** page.</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="65c29-146">Cuando se usa [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] como la entidad de certificación y solicitar un certificado desde un [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] equipo, puede obtener el error **"para completar la inscripción de certificados, el sitio Web de la entidad emisora debe configurarse para usar HTTPS autenticación"**.</span><span class="sxs-lookup"><span data-stu-id="65c29-146">When using [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] as the certificate authority and requesting a certificate request from a [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] computer, you may get the error **“In order to complete certificate enrollment, the Web site for the CA must be configured to use HTTPS authentication”**.</span></span> <span data-ttu-id="65c29-147">Si se produce este error, el sitio Web de inscripción debe configurarse con un certificado de Web (SSL).</span><span class="sxs-lookup"><span data-stu-id="65c29-147">If this error occurs, the enrollment website needs to be configured with a Web Certificate (SSL).</span></span> <span data-ttu-id="65c29-148">Consulte estos vínculos para obtener más información sobre cómo llevar a cabo esta tarea:</span><span class="sxs-lookup"><span data-stu-id="65c29-148">Refer to these links for details in accomplishing this task:</span></span>  
        >   
        >  [<span data-ttu-id="65c29-149">AD CS: Inscripción Web</span><span class="sxs-lookup"><span data-stu-id="65c29-149">AD CS: Web Enrollment</span></span>](http://technet.microsoft.com/library/cc732517.aspx)  
        >   
        >  [<span data-ttu-id="65c29-150">Instrucciones de instalación de certificado de servidor IIS</span><span class="sxs-lookup"><span data-stu-id="65c29-150">IIS Server Certificate Installation Instructions</span></span>](http://msdn.microsoft.com/library/ms751408.aspx)  
  
    2.  <span data-ttu-id="65c29-151">En el **solicitud de certificado avanzada** página, haga clic en **crear y enviar una solicitud a esta CA**.</span><span class="sxs-lookup"><span data-stu-id="65c29-151">On the **Advanced Certificate Request** page, click **Create and submit a request to this CA**.</span></span>  
  
    3.  <span data-ttu-id="65c29-152">En el **solicitud de certificado avanzada** página, escriba `localhost` en el **nombre** cuadro de texto, seleccione **certificado de autenticación de servidor** desde el  **Tipo de certificado necesario** lista desplegable y, a continuación, haga clic en **enviar**.</span><span class="sxs-lookup"><span data-stu-id="65c29-152">On the **Advanced Certificate Request** page, type `localhost` in the **Name** text box, select **Server Authentication Certificate** from the **Type of Certificate Needed** drop-down list, and then click **Submit**.</span></span>  
  
3.  <span data-ttu-id="65c29-153">Cree una solicitud de certificado para la autenticación del cliente. Para ello:</span><span class="sxs-lookup"><span data-stu-id="65c29-153">Create a certificate request for client authentication as follows:</span></span>  
  
    1.  <span data-ttu-id="65c29-154">En Internet Explorer, visite el sitio Web `http://localhost/certsrv`.</span><span class="sxs-lookup"><span data-stu-id="65c29-154">In Internet Explorer, visit the Web site `http://localhost/certsrv`.</span></span> <span data-ttu-id="65c29-155">En el **bienvenida** página, haga clic en **solicitar un certificado**y, a continuación, haga clic en **solicitud de certificado avanzada** en el **solicitar un certificado** página.</span><span class="sxs-lookup"><span data-stu-id="65c29-155">On the **Welcome** page, click **Request a Certificate**, and then click **Advanced certificate request** on the **Request a Certificate** page.</span></span>  
  
    2.  <span data-ttu-id="65c29-156">En el **solicitud de certificado avanzada** página, haga clic en **crear y enviar una solicitud a esta CA**.</span><span class="sxs-lookup"><span data-stu-id="65c29-156">On the **Advanced Certificate Request** page, click **Create and submit a request to this CA**.</span></span>  
  
    3.  <span data-ttu-id="65c29-157">En el **solicitud de certificado avanzada** página, escriba `contoso` en el **nombre** cuadro de texto, seleccione **certificado de autenticación de cliente** desde el  **Tipo de certificado necesario** lista desplegable y, a continuación, haga clic en **enviar**.</span><span class="sxs-lookup"><span data-stu-id="65c29-157">On the **Advanced Certificate Request** page, type `contoso` in the **Name** text box, select **Client Authentication Certificate** from the **Type of Certificate Needed** drop-down list, and then click **Submit**.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="65c29-158">El certificado de autenticación de cliente se utiliza si está ejecutando [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] en el equipo que no sea el controlador de dominio.</span><span class="sxs-lookup"><span data-stu-id="65c29-158">The client authentication certificate is used if you are running [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] on machine other than the Domain Controller.</span></span> <span data-ttu-id="65c29-159">Esto se configurará en el cuadro de diálogo de propiedades del adaptador.</span><span class="sxs-lookup"><span data-stu-id="65c29-159">This will be configured in the adapter’s property dialog.</span></span>  
  
4.  <span data-ttu-id="65c29-160">Emita los certificados utilizando la consola de administración de la entidad emisora de certificados como se indica a continuación:</span><span class="sxs-lookup"><span data-stu-id="65c29-160">Issue the certificates by using the Certification Authority management console as follows:</span></span>  
  
    1.  <span data-ttu-id="65c29-161">Haga clic en **iniciar**, seleccione **herramientas administrativas**y, a continuación, haga clic en **entidad de certificación**.</span><span class="sxs-lookup"><span data-stu-id="65c29-161">Click **Start**, point to **Administrative Tools**, and then click **Certification Authority**.</span></span>  
  
    2.  <span data-ttu-id="65c29-162">En el **entidad de certificación** management console, expanda el nombre de la entidad de certificación y, a continuación, haga doble clic en **peticiones pendientes**.</span><span class="sxs-lookup"><span data-stu-id="65c29-162">In the **Certification Authority** management console, expand your certification authority's name, and then double-click **Pending Request**.</span></span>  
  
    3.  <span data-ttu-id="65c29-163">En el panel derecho de la **entidad de certificación** consola de administración, haga clic en la solicitud para el certificado de autenticación de servicio, seleccione **todas las tareas**y, a continuación, haga clic en **problema** .</span><span class="sxs-lookup"><span data-stu-id="65c29-163">In the right pane of the **Certification Authority** management console, right-click the request for the service authentication certificate, point to **All Tasks**, and then click **Issue**.</span></span>  
  
    4.  <span data-ttu-id="65c29-164">En el panel derecho de la **entidad de certificación** consola de administración, haga clic en la solicitud para el certificado de autenticación de cliente, seleccione **todas las tareas**y, a continuación, haga clic en **problema** .</span><span class="sxs-lookup"><span data-stu-id="65c29-164">In the right pane of the **Certification Authority** management console, right-click the request for the client authentication certificate, point to **All Tasks**, and then click **Issue**.</span></span>  
  
    5.  <span data-ttu-id="65c29-165">Cerrar la **entidad de certificación** consola de administración.</span><span class="sxs-lookup"><span data-stu-id="65c29-165">Close the **Certification Authority** management console.</span></span>  
  
5.  <span data-ttu-id="65c29-166">Instale los certificados emitidos en el equipo. Para ello:</span><span class="sxs-lookup"><span data-stu-id="65c29-166">Install the issued certificates on your computer as follows:</span></span>  
  
    1.  <span data-ttu-id="65c29-167">En Internet Explorer, visite el sitio Web `http://localhost/certsrv`.</span><span class="sxs-lookup"><span data-stu-id="65c29-167">In Internet Explorer, visit the Web site `http://localhost/certsrv`.</span></span>  
  
    2.  <span data-ttu-id="65c29-168">En el **bienvenida** página, haga clic en **ver el estado de una solicitud de certificado pendiente**.</span><span class="sxs-lookup"><span data-stu-id="65c29-168">On the **Welcome** page, click **View the status of a pending certificate request**.</span></span>  
  
    3.  <span data-ttu-id="65c29-169">En el **ver el estado de una solicitud de certificado pendiente** página, haga clic en el certificado de autenticación de servidor.</span><span class="sxs-lookup"><span data-stu-id="65c29-169">On the **View the Status of a Pending Certificate Request** page, click the server authentication certificate.</span></span>  
  
    4.  <span data-ttu-id="65c29-170">En el **certificado emitido** página, haga clic en **instalar este certificado**.</span><span class="sxs-lookup"><span data-stu-id="65c29-170">On the **Certificate Issued** page, click **Install this Certificate**.</span></span>  
  
    5.  <span data-ttu-id="65c29-171">En Internet Explorer, visite el sitio Web `http://localhost/certsrv`.</span><span class="sxs-lookup"><span data-stu-id="65c29-171">In Internet Explorer, visit the Web site `http://localhost/certsrv`.</span></span>  
  
    6.  <span data-ttu-id="65c29-172">En el **bienvenida** página, haga clic en **ver el estado de una solicitud de certificado pendiente**.</span><span class="sxs-lookup"><span data-stu-id="65c29-172">On the **Welcome** page, click **View the status of a pending certificate request**.</span></span>  
  
    7.  <span data-ttu-id="65c29-173">En el **ver el estado de una solicitud de certificado pendiente** página, haga clic en el certificado de autenticación de cliente.</span><span class="sxs-lookup"><span data-stu-id="65c29-173">On the **View the Status of a Pending Certificate Request** page, click the client authentication certificate.</span></span>  
  
    8.  <span data-ttu-id="65c29-174">En el **certificado emitido** página, haga clic en **instalar este certificado**.</span><span class="sxs-lookup"><span data-stu-id="65c29-174">On the **Certificate Issued** page, click **Install this Certificate**.</span></span>  
  
6.  <span data-ttu-id="65c29-175">Asegúrese de que los certificados emitidos están instalados correctamente. Para ello:</span><span class="sxs-lookup"><span data-stu-id="65c29-175">Make sure that the issued certificates are installed properly as follows:</span></span>  
  
    1.  <span data-ttu-id="65c29-176">Abra Microsoft Management Console (MMC).</span><span class="sxs-lookup"><span data-stu-id="65c29-176">Open Microsoft Management Console (MMC).</span></span> <span data-ttu-id="65c29-177">Para ello, haga clic en **iniciar**, haga clic en **ejecutar**, tipo `mmc`y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="65c29-177">To do so, click **Start**, click **Run**, type `mmc`, and then click **OK**.</span></span>  
  
    2.  <span data-ttu-id="65c29-178">En MMC, en el **archivo** menú, haga clic en **agregar o quitar complemento**.</span><span class="sxs-lookup"><span data-stu-id="65c29-178">In the MMC, on the **File** menu, click **Add/Remove Snap-in**.</span></span>  
  
    3.  <span data-ttu-id="65c29-179">En el cuadro de diálogo **Agregar o quitar complemento** , haga clic en **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="65c29-179">In the **Add/Remove Snap-in** dialog box, click **Add**.</span></span>  
  
    4.  <span data-ttu-id="65c29-180">En el **Add Standalone Snap-in** cuadro de diálogo, seleccione **certificados** desde el **un complemento independiente disponible** lista y, a continuación, haga clic en **agregar**.</span><span class="sxs-lookup"><span data-stu-id="65c29-180">In the **Add Standalone Snap-in** dialog box, select **Certificates** from the **Available standalone snap-in** list, and then click **Add**.</span></span>  
  
    5.  <span data-ttu-id="65c29-181">En el **complemento certificado** cuadro de diálogo, seleccione la **mi cuenta de usuario** opción y, a continuación, haga clic en **finalizar**.</span><span class="sxs-lookup"><span data-stu-id="65c29-181">In the **Certificate snap-in** dialog box, select the **My user account** option, and then click **Finish**.</span></span>  
  
    6.  <span data-ttu-id="65c29-182">Cierre todos los cuadros de diálogo abiertos.</span><span class="sxs-lookup"><span data-stu-id="65c29-182">Close all of the open dialog boxes.</span></span>  
  
    7.  <span data-ttu-id="65c29-183">En la consola de MMC, en la ventana raíz de consola, expanda **certificados - usuario actual**, expanda **Personal**, expanda **certificados**y, a continuación, asegúrese de que los certificados que usted instalado en el paso anterior se muestran.</span><span class="sxs-lookup"><span data-stu-id="65c29-183">In the MMC, in the Console Root window, expand **Certificates - Current User**, expand **Personal**, expand **Certificates**, and then make sure that the certificates that you installed in the previous step are displayed.</span></span>  
  
## <a name="create-the-biztalk-application-for-this-walkthrough"></a><span data-ttu-id="65c29-184">Crear la aplicación de BizTalk para este tutorial</span><span class="sxs-lookup"><span data-stu-id="65c29-184">Create the BizTalk application for this walkthrough</span></span>  
  
1.  <span data-ttu-id="65c29-185">Haga clic en **iniciar**, seleccione **todos los programas**, seleccione [!INCLUDE[btsBizTalkServerStartMenuItemui](../includes/btsbiztalkserverstartmenuitemui-md.md)]y, a continuación, haga clic en **administración de BizTalk Server**.</span><span class="sxs-lookup"><span data-stu-id="65c29-185">Click **Start**, point to **All Programs**, point to [!INCLUDE[btsBizTalkServerStartMenuItemui](../includes/btsbiztalkserverstartmenuitemui-md.md)], and then click **BizTalk Server Administration**.</span></span>  
  
2.  <span data-ttu-id="65c29-186">En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] administración de la consola, expanda **grupo de BizTalk**, haga clic en **aplicaciones**, seleccione **New**y, a continuación, haga clic en **aplicación** .</span><span class="sxs-lookup"><span data-stu-id="65c29-186">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **BizTalk Group**, right-click **Applications**, point to **New**, and then click **Application**.</span></span>  
  
3.  <span data-ttu-id="65c29-187">En el **propiedades de la aplicación** cuadro de diálogo, en la **General** , escriba `WcfMessageSecurity`y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="65c29-187">In the **Application Properties** dialog box, on the **General** tab, type `WcfMessageSecurity`, and then click **OK**.</span></span>  
  
4.  <span data-ttu-id="65c29-188">Cree una ubicación de recepción mediante el adaptador de WCF-NetTcp para la aplicación de BizTalk de la manera siguiente:</span><span class="sxs-lookup"><span data-stu-id="65c29-188">Create a receive location using the WCF-NetTcp adapter for the BizTalk application as follows:</span></span>  
  
    1.  <span data-ttu-id="65c29-189">En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] administración de la consola, expanda **WcfMessageSecurity**, haga clic en **puertos de recepción**, seleccione **New**y, a continuación, haga clic en  **Unidireccional puerto de recepción.**</span><span class="sxs-lookup"><span data-stu-id="65c29-189">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **WcfMessageSecurity**, right-click **Receive Ports**, point to **New**, and then click **One-way Receive Port.**</span></span>  
  
    2.  <span data-ttu-id="65c29-190">En el **propiedades de puerto de recepción** cuadro de diálogo, en la **nombre** cuadro de texto, escriba `WcfMessageSecurity.OrderRequest.Receive`y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="65c29-190">In the **Receive Port Properties** dialog box, in the **Name** text box, type `WcfMessageSecurity.OrderRequest.Receive`, and then click **OK**.</span></span> <span data-ttu-id="65c29-191">El nombre de este puerto de recepción es totalmente arbitrario pero tiene sentido lógico.</span><span class="sxs-lookup"><span data-stu-id="65c29-191">The name of this receive port is strictly arbitrary but this name makes logical sense.</span></span>  
  
    3.  <span data-ttu-id="65c29-192">En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] consola de administración, haga clic en **ubicaciones de recepción**, haga clic en **New**y, a continuación, haga clic en **ubicación de recepción unidireccional**.</span><span class="sxs-lookup"><span data-stu-id="65c29-192">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, right-click **Receive Locations**, click **New**, and then click **One-way Receive Location**.</span></span> <span data-ttu-id="65c29-193">El cliente [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] enviará un mensaje de [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] a esta ubicación de recepción.</span><span class="sxs-lookup"><span data-stu-id="65c29-193">The [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] client will send a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] message to this receive location.</span></span> <span data-ttu-id="65c29-194">Seleccione el **WcfMessageSecurity.OrderRequest.Receive** puerto de recepción y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="65c29-194">Select the **WcfMessageSecurity.OrderRequest.Receive** recive port, and then click **OK**.</span></span>  
  
    4.  <span data-ttu-id="65c29-195">En el **propiedades de la ubicación de recepción** cuadro de diálogo, en la **nombre** cuadro de texto, escriba `WcfMessageSecurity.OrderRequest.Receive.NetTcp`.</span><span class="sxs-lookup"><span data-stu-id="65c29-195">In the **Receive Location Properties** dialog box, in the **Name** text box, type `WcfMessageSecurity.OrderRequest.Receive.NetTcp`.</span></span> <span data-ttu-id="65c29-196">El nombre de esta ubicación de recepción es totalmente arbitrario pero tiene sentido lógico.</span><span class="sxs-lookup"><span data-stu-id="65c29-196">The name of this receive location is strictly arbitrary but this name makes logical sense.</span></span>  
  
    5.  <span data-ttu-id="65c29-197">En el **propiedades de la ubicación de recepción** cuadro de diálogo, en la **transporte** junto a la sección **tipo**, seleccione **WCF-NetTcp** en la lista desplegable lista y, a continuación, haga clic en **configurar**.</span><span class="sxs-lookup"><span data-stu-id="65c29-197">In the **Receive Location Properties** dialog box, in the **Transport** section next to **Type**, select **WCF-NetTcp** from the drop-down list, and then click **Configure**.</span></span>  
  
    6.  <span data-ttu-id="65c29-198">En el **propiedades de transporte de WCF-NetTcp** cuadro de diálogo, en la **General** ficha la **dirección (URI)** cuadro de texto, escriba `net.tcp://localhost/WcfMessageSecurity`.</span><span class="sxs-lookup"><span data-stu-id="65c29-198">In the **WCF-NetTcp Transport Properties** dialog box, on the **General** tab, in the **Address (URI)** text box, type `net.tcp://localhost/WcfMessageSecurity`.</span></span>  
  
    7.  <span data-ttu-id="65c29-199">En el **propiedades de transporte de WCF-NetTcp** cuadro de diálogo la **seguridad** ficha, seleccione **mensaje** desde el **modo de seguridad** desplegable enumerar y, a continuación, seleccione **certificado** desde el **tipo de credencial de cliente de mensaje** lista desplegable.</span><span class="sxs-lookup"><span data-stu-id="65c29-199">In the **WCF-NetTcp Transport Properties** dialog box, on the **Security** tab, select **Message** from the **Security mode** drop-down list, and then select **Certificate** from the **Message client credential type** drop-down list.</span></span> <span data-ttu-id="65c29-200">Esto configura el adaptador de WCF-NetTcp para que use el modo de seguridad de mensaje.</span><span class="sxs-lookup"><span data-stu-id="65c29-200">This configures the WCF-NetTcp adapter to use the Message security mode.</span></span>  
  
    8.  <span data-ttu-id="65c29-201">Configure el certificado del servicio para usarlo con el modo de seguridad de mensaje.</span><span class="sxs-lookup"><span data-stu-id="65c29-201">Configure the service certificate to use with Message security mode.</span></span> <span data-ttu-id="65c29-202">En el **propiedades de transporte de WCF-NetTcp** cuadro de diálogo, en la **certificado de servicio** sección, haga clic en **examinar**.</span><span class="sxs-lookup"><span data-stu-id="65c29-202">In the **WCF-NetTcp Transport Properties** dialog box, in the **Service certification** section, click **Browse**.</span></span> <span data-ttu-id="65c29-203">En el **certificado de servicio seleccione** cuadro de diálogo, seleccione el certificado de autenticación de servidor instalado en el procedimiento anterior y, a continuación, haga clic en **Aceptar** para cerrar el cuadro de diálogo y guardar los cambios.</span><span class="sxs-lookup"><span data-stu-id="65c29-203">In the **Select service certificate** dialog box, select the server authentication certificate you installed in the previous procedure, and then click **OK** to close the dialog box and save the changes.</span></span>  
  
    9. <span data-ttu-id="65c29-204">Cierre todos los cuadros de diálogo abiertos.</span><span class="sxs-lookup"><span data-stu-id="65c29-204">Close all of the open dialog boxes.</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="65c29-205">Para autenticar los certificados de cliente con los adaptadores de recepción de [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)], la cadena de certificados de CA para certificados de cliente debe instalarse en el almacén de certificados de las entidades emisoras raíz de confianza del equipo en el que se ejecutan las instancias de host para los adaptadores de [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)].</span><span class="sxs-lookup"><span data-stu-id="65c29-205">To authenticate the client certificates with the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] receive adapters, the CA certificate chain for the client certificates must be installed in the Trusted Root Certification Authorities certificate store of the computer running the host instances for the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] adapters.</span></span> <span data-ttu-id="65c29-206">Dado que este tutorial presupone que el servicio de certificados se encuentra instalado en el mismo equipo que el cliente [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] y los adaptadores de [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)], no es necesario instalar la cadena de certificados de CA en el equipo.</span><span class="sxs-lookup"><span data-stu-id="65c29-206">Because this walkthrough assumes that the certificate service is installed on the same computer as the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] client and the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] adapters, you do not have to install the CA certificate chain on your computer.</span></span>  
  
5.  <span data-ttu-id="65c29-207">Cree un puerto de envío de archivos para la aplicación de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="65c29-207">Create a FILE send port for the BizTalk application.</span></span> <span data-ttu-id="65c29-208">Se trata de la ubicación donde la orquestación que representa el Servicio [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] enviará el mensaje de salida de la solicitud de pedido.</span><span class="sxs-lookup"><span data-stu-id="65c29-208">This is the location where the order request output message will be sent by the orchestration representing the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  
  
    1.  <span data-ttu-id="65c29-209">En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] administración de la consola, expanda **WcfMessageSecurity**, haga clic en **puertos de envío**, seleccione **New**y, a continuación, haga clic en **estático Puerto de envío unidireccional.**</span><span class="sxs-lookup"><span data-stu-id="65c29-209">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **WcfMessageSecurity**, right-click **Send Ports**, point to **New**, and then click **Static One-way Send Port.**</span></span>  
  
    2.  <span data-ttu-id="65c29-210">En el **propiedades de puerto de envío** cuadro de diálogo, en la **General** ficha la **nombre** cuadro de texto, escriba `WcfMessageSecurity.OrderRequest.Send.FILE`.</span><span class="sxs-lookup"><span data-stu-id="65c29-210">In the **Send Port Properties** dialog box, on the **General**  tab, in the **Name** text box, type `WcfMessageSecurity.OrderRequest.Send.FILE`.</span></span>  
  
    3.  <span data-ttu-id="65c29-211">En el **propiedades de puerto de envío** cuadro de diálogo, en la **transporte** junto a la sección **tipo**, seleccione **archivo** en la lista desplegable y, a continuación, Haga clic en **configurar**.</span><span class="sxs-lookup"><span data-stu-id="65c29-211">In the **Send Port Properties** dialog box, in the **Transport** section next to **Type**, select **FILE** from the drop-down list, and then click **Configure**.</span></span>  
  
    4.  <span data-ttu-id="65c29-212">En el **propiedades de transporte de archivo** cuadro de diálogo la **General** , escriba `C:\WCFMessageSecurity\OrderRequestOut` en el **carpeta de destino** cuadro de texto y, a continuación, haga clic en **Aceptar** .</span><span class="sxs-lookup"><span data-stu-id="65c29-212">In the **FILE Transport Properties** dialog box, on the **General**  tab, type `C:\WCFMessageSecurity\OrderRequestOut` in the **Destination folder** text box, and then click **OK**.</span></span>  
  
    5.  <span data-ttu-id="65c29-213">En el **propiedades de puerto de envío** cuadro de diálogo, en la **filtros** ficha, seleccione **BTS. ReceivePortName** para el **propiedad** , escriba `WcfMessageSecurity.OrderRequest.Receive` para el **valor** campo y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="65c29-213">In the **Send Port Properties** dialog box, on the **Filters** tab, select **BTS.ReceivePortName** for the **Property** field, enter `WcfMessageSecurity.OrderRequest.Receive` for the **Value** field, and then click **OK**.</span></span> <span data-ttu-id="65c29-214">Esta expresión de filtro enruta entrante [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] mensajes desde el cliente en el **WcfMessageSecurity.OrderRequest.Receive** puerto de recepción para este puerto de envío.</span><span class="sxs-lookup"><span data-stu-id="65c29-214">This filter expression routes the incoming [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] messages from the client into the **WcfMessageSecurity.OrderRequest.Receive** receive port to this send port.</span></span>  
  
## <a name="test-the-wcf-client-against-the-biztalk-application"></a><span data-ttu-id="65c29-215">Probar al cliente WCF en la aplicación de BizTalk</span><span class="sxs-lookup"><span data-stu-id="65c29-215">Test the WCF client against the BizTalk application</span></span>  
  
1.  <span data-ttu-id="65c29-216">En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] consola de administración, haga clic en **WcfMessageSecurity**y, a continuación, haga clic en **iniciar**.</span><span class="sxs-lookup"><span data-stu-id="65c29-216">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, right-click **WcfMessageSecurity**, and then click **Start**.</span></span> <span data-ttu-id="65c29-217">En el **iniciar** cuadro de diálogo, haga clic en **iniciar**.</span><span class="sxs-lookup"><span data-stu-id="65c29-217">In the **Start** dialog box, click **Start**.</span></span>  
  
2.  <span data-ttu-id="65c29-218">En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] administración de la consola, expanda **configuración de plataforma**, expanda **instancias de Host**, haga clic en **BizTalkServerApplication** u otro procede de la instancia de host y, a continuación, haga clic en **reiniciar**.</span><span class="sxs-lookup"><span data-stu-id="65c29-218">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **Platform Settings**, expand **Host Instances**, right-click **BizTalkServerApplication** or another appropriate host instance, and then click **Restart**.</span></span>  
  
3.  <span data-ttu-id="65c29-219">Cree una carpeta denominada **C:\WCFMessageSecurity** para la carpeta de trabajo para este tutorial.</span><span class="sxs-lookup"><span data-stu-id="65c29-219">Create a folder named **C:\WCFMessageSecurity** for the working folder for this walkthrough.</span></span> <span data-ttu-id="65c29-220">Extraiga los archivos del tutorial en esta carpeta.</span><span class="sxs-lookup"><span data-stu-id="65c29-220">Extract the walkthrough files to this folder.</span></span>  
  
4.  <span data-ttu-id="65c29-221">En [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], abra el **WcfMessageSecurity.sln** un archivo en el **C:\WCFMessageSecurity** carpeta.</span><span class="sxs-lookup"><span data-stu-id="65c29-221">In [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], open the **WcfMessageSecurity.sln** file in the **C:\WCFMessageSecurity** folder.</span></span>  
  
5.  <span data-ttu-id="65c29-222">En [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], en el Explorador de soluciones, expanda **WcfClient**y, a continuación, abra **Program.cs** para revisar.</span><span class="sxs-lookup"><span data-stu-id="65c29-222">In [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], in Solution Explorer, expand **WcfClient**, and then open **Program.cs** to review.</span></span>  
  
    -   <span data-ttu-id="65c29-223">El cliente envía un mensaje a la ubicación de recepción WCF-NetTcp que creó en el procedimiento anterior.</span><span class="sxs-lookup"><span data-stu-id="65c29-223">The client sends a message to the WCF-NetTcp receive location that you created in the previous procedure.</span></span>  
  
    -   <span data-ttu-id="65c29-224">El cliente crea un canal con el **NetTcpBinding**y, a continuación, configura el enlace para usar certificados para el tipo de credencial de cliente.</span><span class="sxs-lookup"><span data-stu-id="65c29-224">The client creates a channel with the **NetTcpBinding**, and then configures the binding to use certificates for the client credential type.</span></span>  
  
    -   <span data-ttu-id="65c29-225">El cliente configura el comportamiento del extremo para que use el certificado de autenticación del cliente que instaló en el procedimiento anterior para la autenticación del cliente.</span><span class="sxs-lookup"><span data-stu-id="65c29-225">The client configures the endpoint behavior to use the client authentication certificate that you installed in the previous procedure for the client authentication.</span></span>  
  
    -   <span data-ttu-id="65c29-226">La clase **programa**, implementa el **IClientMessageInspector** y **IEndpointBehavior** interfaces para mostrar la salida [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] mensajes desde este cliente en un símbolo del sistema.</span><span class="sxs-lookup"><span data-stu-id="65c29-226">The class, **Program**, implements the **IClientMessageInspector** and **IEndpointBehavior** interfaces to display outgoing [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] messages from this client at a command prompt.</span></span>  
  
6.  <span data-ttu-id="65c29-227">En [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], en el Explorador de soluciones, haga clic en el **WcfMessageSecurity** solución y, a continuación, haga clic en **volver a generar**.</span><span class="sxs-lookup"><span data-stu-id="65c29-227">In [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], in Solution Explorer, right-click the **WcfMessageSecurity** solution, and then click **Rebuild**.</span></span>  
  
7.  <span data-ttu-id="65c29-228">En [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], en la **depurar** menú, haga clic en **iniciar sin depurar** para ejecutar WcfClient para enviar un mensaje de WCF-NetTcp ubicaciones de recepción.</span><span class="sxs-lookup"><span data-stu-id="65c29-228">In [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], on the **Debug** menu, click **Start Without Debugging** to run the WcfClient to send a message to the WCF-NetTcp receive locations.</span></span> <span data-ttu-id="65c29-229">Se abrirá un símbolo del sistema para mostrar el resultado de la ejecución.</span><span class="sxs-lookup"><span data-stu-id="65c29-229">A command prompt appears to show the execution result.</span></span>  
  
    1.  <span data-ttu-id="65c29-230">En el símbolo del sistema, revise el mensaje de solicitud de pedido.</span><span class="sxs-lookup"><span data-stu-id="65c29-230">At the command prompt, review the order request message.</span></span> <span data-ttu-id="65c29-231">Preste atención a la **OrderId** campo y la estructura del mensaje.</span><span class="sxs-lookup"><span data-stu-id="65c29-231">Pay attention to the **OrderId** field and the structure of the message.</span></span>  
  
    2.  <span data-ttu-id="65c29-232">En el símbolo del sistema, vaya a la `C:\WCFMessageSecurity\OrderRequestOut` carpeta y, a continuación, asegúrese de que el mensaje de solicitud de pedido enviado por el [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] aparece de cliente.</span><span class="sxs-lookup"><span data-stu-id="65c29-232">At the command prompt, go to the `C:\WCFMessageSecurity\OrderRequestOut` folder, and then make sure the order request message sent by the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] client appears.</span></span>  
  
    3.  <span data-ttu-id="65c29-233">Cierre el símbolo del sistema.</span><span class="sxs-lookup"><span data-stu-id="65c29-233">Close the command prompt.</span></span>
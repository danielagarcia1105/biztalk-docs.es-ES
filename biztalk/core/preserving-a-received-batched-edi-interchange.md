---
title: Conservar un recibido el intercambio EDI por lotes | Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 10d21b9b-9684-422a-8948-8bd71a4d5a10
caps.latest.revision: 20
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 4883f6c6df9042d40b82138a4d3a871797a5fa1f
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/27/2018
ms.locfileid: "36985781"
---
# <a name="preserving-a-received-batched-edi-interchange"></a><span data-ttu-id="4b5c5-102">Conservar un intercambio EDI por lotes recibido</span><span class="sxs-lookup"><span data-stu-id="4b5c5-102">Preserving a Received Batched EDI Interchange</span></span>
> [!NOTE]
>  <span data-ttu-id="4b5c5-103">Todas las opciones de interfaz de usuario mencionadas en este tema están disponibles en el **configuración de Host Local** página (**configuración del receptor** sección) de las pestañas del acuerdo bidireccional en el  **Las propiedades del acuerdo** cuadro de diálogo.</span><span class="sxs-lookup"><span data-stu-id="4b5c5-103">All the user interface options mentioned in this topic are available in the **Local Host Settings** page (**Receiver’s Settings** section) of the bi-directional agreement tabs in the **Agreement Properties** dialog box.</span></span>  

 <span data-ttu-id="4b5c5-104">Cuando la canalización de recepción EDI conserva un intercambio EDI por lotes de entrada, no se realiza el análisis normal de cada conjunto de transacciones/mensaje en archivos XML intermedios separados.</span><span class="sxs-lookup"><span data-stu-id="4b5c5-104">When the EDI receive pipeline preserves an inbound batched EDI interchange, the normal parsing of each transaction set/message into separate intermediate XML files is not performed.</span></span> <span data-ttu-id="4b5c5-105">La canalización de recepción EDI procesa el intercambio como un documento sin dividir los conjuntos de transacciones/mensajes.</span><span class="sxs-lookup"><span data-stu-id="4b5c5-105">The EDI receive pipeline processes the interchange as one document without splitting the transaction sets/messages.</span></span> <span data-ttu-id="4b5c5-106">Esto se produce cuando el **opción de procesamiento por lotes de entrada** propiedad está establecida en **conservar intercambio: suspender intercambio en caso de un Error** o **conservar intercambio: suspender conjuntos de transacciones en Error**.</span><span class="sxs-lookup"><span data-stu-id="4b5c5-106">This occurs when the **Inbound batch processing option** property is set to **Preserve Interchange - suspend Interchange on Error** or **Preserve Interchange - suspend Transaction Sets on Error**.</span></span>  

 <span data-ttu-id="4b5c5-107">**Validación de esquemas**</span><span class="sxs-lookup"><span data-stu-id="4b5c5-107">**Schema Validation**</span></span>  

 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="4b5c5-108"> valida el sobre de un lote conservado mediante los esquemas por lotes y los esquemas de servicio.</span><span class="sxs-lookup"><span data-stu-id="4b5c5-108"> validates the envelope of a preserved batch using the batch schemas and the service schemas.</span></span> <span data-ttu-id="4b5c5-109">El esquema por lotes se utiliza para validar el nodo raíz del mensaje conservado; los esquemas de servicio se utilizan para validar los finalizadores y los encabezados de conjuntos de transacciones, grupos e intercambios.</span><span class="sxs-lookup"><span data-stu-id="4b5c5-109">The batch schema is used to validate the root node of the preserved message; the service schemas are used to validate the interchange, group, and transaction set headers and trailers.</span></span> <span data-ttu-id="4b5c5-110">Para obtener más información acerca de los esquemas por lotes, vea [esquemas por lotes de EDI](../core/edi-batch-schemas.md).</span><span class="sxs-lookup"><span data-stu-id="4b5c5-110">For more information about the batch schemas, see [EDI Batch Schemas](../core/edi-batch-schemas.md).</span></span> <span data-ttu-id="4b5c5-111">Para obtener más información sobre los esquemas de servicio, consulte [esquemas de Control y servicio EDI](../core/edi-service-and-control-schemas.md).</span><span class="sxs-lookup"><span data-stu-id="4b5c5-111">For more information on the service schemas, see [EDI Service and Control Schemas](../core/edi-service-and-control-schemas.md).</span></span>  

 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="4b5c5-112"> valida los documentos de un intercambio por lotes mediante los esquemas de documentos del proyecto.</span><span class="sxs-lookup"><span data-stu-id="4b5c5-112"> validates the documents in a batched interchange using the document schemas in your project.</span></span>  

 <span data-ttu-id="4b5c5-113">**Procesamiento de recepción**</span><span class="sxs-lookup"><span data-stu-id="4b5c5-113">**Receive-Side Processing**</span></span>  

 <span data-ttu-id="4b5c5-114">El desensamblador EDI procesa lotes conservados de la siguiente forma:</span><span class="sxs-lookup"><span data-stu-id="4b5c5-114">The EDI Disassembler processes preserved batches as follows:</span></span>  

- <span data-ttu-id="4b5c5-115">Cuando el desensamblador EDI procesa un lote para que se conserve, convierte formato de archivo sin formato en XML y agrega X12InterchangeXML y EdifactInterchangeXML como el nodo raíz XML.</span><span class="sxs-lookup"><span data-stu-id="4b5c5-115">When the EDI Disassembler processes a batch to be preserved, it converts the flat file format to XML and adds the X12InterchangeXML or EdifactInterchangeXML as the XML root node.</span></span> <span data-ttu-id="4b5c5-116">Esto indica a la canalización de envío que el intercambio por lotes debe conservarse y que los esquemas Edifact_BatchSchema schema o X12_BatchSchema deben usarse para validar el nodo raíz.</span><span class="sxs-lookup"><span data-stu-id="4b5c5-116">This indicates to the send pipeline that the batched interchange should be preserved, and indicates that the Edifact_BatchSchema schema or X12_BatchSchema schema should be used to validate the root node.</span></span>  

- <span data-ttu-id="4b5c5-117">El desensamblador agrega el atributo DelimiterSetSerializedData al nodo raíz de un mensaje XML por lotes para indicar los separadores que la canalización de envío va a utilizar cuando se genere un intercambio EDI por lotes a partir del mensaje XML.</span><span class="sxs-lookup"><span data-stu-id="4b5c5-117">The Disassembler adds the DelimiterSetSerializedData attribute to the root node of a batched XML message to indicate the separators to be used by the send pipeline when generating a batched EDI interchange from the XML message.</span></span> <span data-ttu-id="4b5c5-118">Cuando el XML es un lote conservado, el atributo se rellena mediante la canalización de recepción de los separadores que se utilizaron en el mensaje entrante.</span><span class="sxs-lookup"><span data-stu-id="4b5c5-118">When the XML message is a preserved batch, the attribute is populated by the receive pipeline from the separators used in the incoming message.</span></span> <span data-ttu-id="4b5c5-119">Cuando la orquestación por lotes genera el XML por lotes, el atributo se rellena a partir del valor especificado en las propiedades del acuerdo.</span><span class="sxs-lookup"><span data-stu-id="4b5c5-119">When the batched XML is produced by the batching orchestration, the attribute is populated from the value specified in agreement properties.</span></span>  

- <span data-ttu-id="4b5c5-120">El desensamblador usa uno de los siguientes espacios de nombres cuando crea un intercambio conservado de codificación XML: `http://schemas.microsoft.com/BizTalk/EDI/EDIFACT/2006/InterchangeXML` o `http://schemas.microsoft.com/BizTalk/EDI/X12/2006/InterchangeXML`.</span><span class="sxs-lookup"><span data-stu-id="4b5c5-120">The Disassembler uses one of the following namespaces when it creates an XML-encoded preserved interchange: `http://schemas.microsoft.com/BizTalk/EDI/EDIFACT/2006/InterchangeXML` or `http://schemas.microsoft.com/BizTalk/EDI/X12/2006/InterchangeXML`.</span></span>  

- <span data-ttu-id="4b5c5-121">El desensamblador promociona propiedad de contexto `EDI.ReuseEnvelope == True` para identificar el intercambio como conservado.</span><span class="sxs-lookup"><span data-stu-id="4b5c5-121">The Disassembler promotes the context property `EDI.ReuseEnvelope == True` to identify the interchange as preserved.</span></span> <span data-ttu-id="4b5c5-122">Esto le permite crear un puerto de envío suscrito a todos los intercambios por lotes que se conservan.</span><span class="sxs-lookup"><span data-stu-id="4b5c5-122">This enables you to create a send port that subscribes to all batched interchanges that are preserved.</span></span>  

  > [!NOTE]
  >  <span data-ttu-id="4b5c5-123">Un documento HIPAA no se dividirá en subdocumentos si la **opción de procesamiento por lotes de entrada** está establecido en **conservar intercambio**.</span><span class="sxs-lookup"><span data-stu-id="4b5c5-123">A HIPAA document will not be split into subdocuments if the **Inbound batch processing option** is set to **Preserve Interchange**.</span></span> <span data-ttu-id="4b5c5-124">Esto sucederá incluso si la anotación de interrupción de creación de subdocumento dentro del esquema HIPAA se establece en “Sí”.</span><span class="sxs-lookup"><span data-stu-id="4b5c5-124">This will be the case even if the subdocument creation break annotation within the HIPAA schema is set to "Yes".</span></span>  

  <span data-ttu-id="4b5c5-125">**Error al procesar**</span><span class="sxs-lookup"><span data-stu-id="4b5c5-125">**Error Processing**</span></span>  

  <span data-ttu-id="4b5c5-126">Si ha seleccionado **conservar intercambio: suspender intercambio en caso de un Error** para el **opción de procesamiento por lotes de entrada**, se suspenderá todo el intercambio como resultado de cualquier error.</span><span class="sxs-lookup"><span data-stu-id="4b5c5-126">If you have selected **Preserve Interchange - suspend Interchange on Error** for the **Inbound batch processing option**, the entire interchange will be suspended as a result of any error.</span></span> <span data-ttu-id="4b5c5-127">Si [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] suspende el todo el intercambio conservado, la estructura de intercambio y se conservará  el orden de los conjuntos de transacciones dentro del intercambio.</span><span class="sxs-lookup"><span data-stu-id="4b5c5-127">If [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] suspends the entire preserved interchange, the interchange structure and the ordering of the transaction sets within the interchange will be preserved.</span></span> <span data-ttu-id="4b5c5-128">En caso de error, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] registra una entrada de error consolidada en el registro de eventos.</span><span class="sxs-lookup"><span data-stu-id="4b5c5-128">In the event of an error, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will post one consolidated error entry in the event log.</span></span> <span data-ttu-id="4b5c5-129">Esta entrada incluirá cualquier error en los niveles de conjunto de transacciones, grupo funcionar e intercambio.</span><span class="sxs-lookup"><span data-stu-id="4b5c5-129">This entry will include any errors in the interchange, functional group, and transaction set levels.</span></span>  

  <span data-ttu-id="4b5c5-130">Si ha seleccionado **conservar intercambio: suspender conjuntos de transacciones de un Error** para la opción de procesamiento por lotes entrantes, la recepción EDI colocará cualquier conjunto de transacciones no válido del intercambio y continúe con la creación canalización del intercambio XML.</span><span class="sxs-lookup"><span data-stu-id="4b5c5-130">If you have selected **Preserve Interchange - suspend Transaction Sets on Error** for the inbound batch processing option, the EDI receive pipeline will drop any invalid transaction set from the interchange and proceed with the creation of the interchange XML.</span></span> <span data-ttu-id="4b5c5-131">Es necesario que el intercambio XML que se genera vuelva a utilizar los sobres de segmentos de control existentes (ISA, GS, GE e IEA para intercambios con codificación X12 o UNA, UNB, UNG, UNE y UNZ para intercambios con codificación EDIFACT).</span><span class="sxs-lookup"><span data-stu-id="4b5c5-131">The resulting interchange XML is required to reuse the existing control segment envelopes (ISA, GS, GE, and IEA for X12-encoded interchanges or UNA, UNB, UNG, UNE, and UNZ for EDIFACT-encoded interchanges).</span></span> <span data-ttu-id="4b5c5-132">El intercambio se considerará un documento procesado correctamente, sin embargo, el error se notificará en el visor de eventos y si se genera una confirmación funcional, notificará el error.</span><span class="sxs-lookup"><span data-stu-id="4b5c5-132">The interchange will be considered a successfully processed document; however, the error will be reported in the event viewer and if a functional acknowledgment is generated, it will report the error.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="4b5c5-133"> creará una entrada independiente en el registro de eventos para cada conjunto de transacciones que se muestra un error.</span><span class="sxs-lookup"><span data-stu-id="4b5c5-133"> will create a separate entry in the event log for each transaction set that is in error.</span></span> <span data-ttu-id="4b5c5-134">Si [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] quita una transacción errónea del conjunto del intercambio, la estructura de intercambio y el orden no puede conservarse.</span><span class="sxs-lookup"><span data-stu-id="4b5c5-134">If [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] drops an erroneous transaction set from the interchange, the interchange structure and ordering may not be preserved.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="4b5c5-135"> se actualizará el número de conjuntos de transacciones del intercambio.</span><span class="sxs-lookup"><span data-stu-id="4b5c5-135"> will update the number of transaction sets in the interchange.</span></span>  

  <span data-ttu-id="4b5c5-136">Las siguientes casos especiales se aplican los conjuntos de transacción suspendidos en caso de error:</span><span class="sxs-lookup"><span data-stu-id="4b5c5-136">The following special cases apply to suspending transaction sets on error:</span></span>  

- <span data-ttu-id="4b5c5-137">Si los conjuntos de transacciones en un grupo no son válidos, se suspende cada conjunto de transacciones de forma individual. Sin embargo, los segmentos de control de grupo (sin conjuntos de transacciones, ya que éstos se han colocado) se incluirán en el XML de intercambio generado.</span><span class="sxs-lookup"><span data-stu-id="4b5c5-137">If all transaction sets in a group are invalid, then each transaction set is suspended individually; however, the group control segments (with no transaction sets, because they have been dropped) will be included in the generated interchange XML.</span></span>  

- <span data-ttu-id="4b5c5-138">Si los conjuntos de transacciones en un intercambio no son válidos, cada conjunto de transacciones se suspende de forma individual. Sin embargo, los segmentos de control de intercambio (sin conjuntos de transacciones ya que éstos se han colocado) se incluirán en el XM L de intercambio generado.</span><span class="sxs-lookup"><span data-stu-id="4b5c5-138">If all transaction sets in an interchange are invalid, then each transaction set is suspended individually; however, the interchange control segments (with no transaction sets, because they have been dropped) will be included in the generated interchange XML.</span></span>  

- <span data-ttu-id="4b5c5-139">Si los segmentos de control de grupo no son válidos, todos los conjuntos de transacciones en el grupo se suspenderán individualmente.</span><span class="sxs-lookup"><span data-stu-id="4b5c5-139">If the group control segments are invalid, all transaction sets in the group will be suspended individually.</span></span>  

- <span data-ttu-id="4b5c5-140">Si los segmentos de control de intercambio no son válidos, todos los conjuntos de transacciones en el intercambio se suspenderán individualmente y el XML de intercambio no se generará.</span><span class="sxs-lookup"><span data-stu-id="4b5c5-140">If the interchange control segments are invalid, all transaction sets in the interchange will be suspended individually, and the interchange XML will not be generated.</span></span> <span data-ttu-id="4b5c5-141">Se creará un registro en el visor de eventos para el intercambio rechazado.</span><span class="sxs-lookup"><span data-stu-id="4b5c5-141">A log in the event viewer will be created for the rejected interchange.</span></span>

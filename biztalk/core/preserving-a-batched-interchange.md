---
title: Conservar un intercambio por lotes | Documentos de Microsoft
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 907e07f3-1f3e-485e-a82d-b28eb7658e0a
caps.latest.revision: "14"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 9e7ea2bdef1fe2b2c3db92421d610b0b889e0460
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
---
# <a name="preserving-a-batched-interchange"></a><span data-ttu-id="ef1ab-102">Conservar un intercambio por lotes</span><span class="sxs-lookup"><span data-stu-id="ef1ab-102">Preserving a Batched Interchange</span></span>
<span data-ttu-id="ef1ab-103">En este tema se describe cómo se configura un acuerdo para procesar un intercambio EDI por lotes como un solo documento sin dividir los conjuntos de transacciones que componen el intercambio.</span><span class="sxs-lookup"><span data-stu-id="ef1ab-103">This topic describes how to configure an agreement for processing a batched EDI interchange as a single document without splitting the transaction sets from the interchange.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="ef1ab-104">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="ef1ab-104">Prerequisites</span></span>  
 <span data-ttu-id="ef1ab-105">Debe iniciar sesión como miembro del grupo de administradores de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] o de operadores B2B de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ef1ab-105">You must be logged on as a member of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators or [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] B2B Operators group.</span></span>  
  
### <a name="to-configure-the-receiving-and-sending-of-a-preserved-batch"></a><span data-ttu-id="ef1ab-106">Para configurar los elementos de recepción y de envío de un lote conservado</span><span class="sxs-lookup"><span data-stu-id="ef1ab-106">To configure the receiving and sending of a preserved batch</span></span>  
  
1.  <span data-ttu-id="ef1ab-107">En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] consola de administración, haga clic en el **partes** nodo.</span><span class="sxs-lookup"><span data-stu-id="ef1ab-107">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration Console, click the **Parties** node.</span></span> <span data-ttu-id="ef1ab-108">En el **entidades y perfiles empresariales** página, haga clic en la entidad que tenga el acuerdo que resolverá el intercambio por lotes entrante.</span><span class="sxs-lookup"><span data-stu-id="ef1ab-108">In the **Parties and Business Profiles** page, click the party that has the agreement that will resolve to the incoming batched interchange.</span></span> <span data-ttu-id="ef1ab-109">En el **acuerdo** sección de la página, haga clic en el acuerdo y haga clic en **propiedades**.</span><span class="sxs-lookup"><span data-stu-id="ef1ab-109">In the **Agreement** section of the page, right-click the agreement and click **Properties**.</span></span> <span data-ttu-id="ef1ab-110">En el **propiedades del acuerdo de** cuadro de diálogo, en la ficha de acuerdo unidireccional (a la que se resolverá el intercambio por lotes entrante), haga lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="ef1ab-110">In the **Agreement Properties** dialog box, in the one-way agreement tab (to which the inbound batched interchange will resolve), do the following:</span></span>  
  
    1.  <span data-ttu-id="ef1ab-111">En el **identificadores** página, escriba los valores de escriba valores para ISA5, ISA6, ISA7 e ISA8.</span><span class="sxs-lookup"><span data-stu-id="ef1ab-111">In the **Identifiers** page, enter the values for enter values for ISA5, ISA6, ISA7, and ISA8.</span></span> <span data-ttu-id="ef1ab-112">Asegúrese de escribir los valores correctos, para que el intercambio por lotes entrante resuelva este acuerdo.</span><span class="sxs-lookup"><span data-stu-id="ef1ab-112">Make sure you enter the correct values so that the incoming batched interchange resolves to this agreement.</span></span>  
  
    2.  <span data-ttu-id="ef1ab-113">En el **configuración de Host Local** página (en **configuración de intercambio**), en **configuración del receptor** sección, para el **opción de procesamiento por lotes de entrada** , seleccione una de las siguientes opciones:</span><span class="sxs-lookup"><span data-stu-id="ef1ab-113">In the **Local Host Settings** page (under **Interchange Settings**), under **Receiver’s Settings** section, for the **Inbound batch processing option**, select one the following options:</span></span>  
  
        -   <span data-ttu-id="ef1ab-114">**Conservar intercambio: suspender intercambio en caso de Error** : seleccione esta opción para especificar que BizTalk Server debe dejar el intercambio intacto y crear un documento XML para todo el intercambio por lotes.</span><span class="sxs-lookup"><span data-stu-id="ef1ab-114">**Preserve Interchange - suspend Interchange on Error** – Select this option to specify that BizTalk Server should leave the interchange intact, creating an XML document for the entire batched interchange.</span></span> <span data-ttu-id="ef1ab-115">Con esta opción, si uno o varios conjuntos de transacciones en el intercambio no superan la validación, BizTalk Server suspenderá el intercambio completo.</span><span class="sxs-lookup"><span data-stu-id="ef1ab-115">With this option, if one or more transaction sets in the interchange fail validation, BizTalk Server will suspend the entire interchange.</span></span>  
  
        -   <span data-ttu-id="ef1ab-116">**Conservar intercambio: suspender conjuntos de transacciones en caso de Error** : seleccione esta opción para especificar que BizTalk Server debe dejar el intercambio intacto y crear un documento XML para todo el intercambio por lotes.</span><span class="sxs-lookup"><span data-stu-id="ef1ab-116">**Preserve Interchange - suspend Transaction Sets on Error** – Select this option to specify that BizTalk Server should leave the interchange intact, creating an XML document for the entire batched interchange.</span></span> <span data-ttu-id="ef1ab-117">Con esta opción, si uno o más conjuntos de transacciones del intercambio no superan la validación, BizTalk Server suspenderá solo esos conjuntos de transacciones, continuando procesar todos los demás conjuntos de transacciones.</span><span class="sxs-lookup"><span data-stu-id="ef1ab-117">With this option, if one or more transaction sets in the interchange fail validation, BizTalk Server will suspend only those transaction sets, while continuing to process all other transaction sets.</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="ef1ab-118">Si selecciona cualquiera de las dos opciones mencionadas arriba, no se aplican las propiedades de intercambio, grupo y transacción (que determinan cómo BizTalk Server creará los encabezados de ISA, GS y ST de un intercambio saliente).</span><span class="sxs-lookup"><span data-stu-id="ef1ab-118">If you select either of the two options mentioned above, the interchange, group, and transaction set segment properties (which determine how BizTalk Server will create the ISA, GS, and ST headers of an outgoing interchange) do not apply.</span></span> <span data-ttu-id="ef1ab-119">Los encabezados de intercambios, grupos y conjuntos de transacciones que existen en el intercambio que se conserva quedan retenidos cuando la canalización de envío lo procesa para su envío.</span><span class="sxs-lookup"><span data-stu-id="ef1ab-119">The interchange, group, and transaction-set headers that exist in the interchange that is being preserved are retained when the send pipeline processes it for sending.</span></span> <span data-ttu-id="ef1ab-120">Sin embargo, si no desea usar los valores especificados para el intercambio en el acuerdo, establezca la propiedad de contexto `EDI.PopulateInterchangeValues` en true.</span><span class="sxs-lookup"><span data-stu-id="ef1ab-120">However, if you do want to use the values specified for the interchange in the agreement, set the `EDI.PopulateInterchangeValues` context property to true.</span></span>  
  
2.  <span data-ttu-id="ef1ab-121">Cree un proyecto de Visual Studio para el lote conservado, como se indica a continuación:</span><span class="sxs-lookup"><span data-stu-id="ef1ab-121">Create a Visual Studio project for the preserved batch as follows:</span></span>  
  
    1.  <span data-ttu-id="ef1ab-122">En [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], cree un proyecto de BizTalk y agregue los esquemas de todos los mensajes del lote.</span><span class="sxs-lookup"><span data-stu-id="ef1ab-122">In [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], create a BizTalk project and add the schemas for all the messages within the batch.</span></span>  
  
    2.  <span data-ttu-id="ef1ab-123">Compile e implemente el proyecto.</span><span class="sxs-lookup"><span data-stu-id="ef1ab-123">Build and deploy the project.</span></span>  
  
3.  <span data-ttu-id="ef1ab-124">En la consola de administración de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], cree un puerto de envío para enviar los lotes conservados de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="ef1ab-124">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration Console, create a send port to send preserved batches as follows:</span></span>  
  
    1.  <span data-ttu-id="ef1ab-125">Establecer la canalización de envío **EdiSend** o **AS2EdiSend**.</span><span class="sxs-lookup"><span data-stu-id="ef1ab-125">Set the send pipeline to **EdiSend** or **AS2EdiSend**.</span></span>  
  
    2.  <span data-ttu-id="ef1ab-126">Establezca el filtro del puerto de envío en la propiedad de contexto `EDI.ReuseEnvelope == True`.</span><span class="sxs-lookup"><span data-stu-id="ef1ab-126">Set the filter of the send port to the context property `EDI.ReuseEnvelope == True`.</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="ef1ab-127">Al definir este filtro se asegura de que el puerto de envío se suscribirá a todos los intercambios de procesamiento por lotes que se hayan conservado.</span><span class="sxs-lookup"><span data-stu-id="ef1ab-127">Setting this filter ensures that the send port will subscribe to all batched interchanges that are preserved.</span></span> <span data-ttu-id="ef1ab-128">La canalización de recepción EdiReceive promociona la propiedad de contexto `EDI.ReuseEnvelope` para identificar que el intercambio se conserva.</span><span class="sxs-lookup"><span data-stu-id="ef1ab-128">The EdiReceive receive pipeline promotes the context property `EDI.ReuseEnvelope` to identify the interchange as preserved.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ef1ab-129">Vea también</span><span class="sxs-lookup"><span data-stu-id="ef1ab-129">See Also</span></span>  
 <span data-ttu-id="ef1ab-130">[Configuración de lotes de EDI](../core/configuring-edi-batches.md) </span><span class="sxs-lookup"><span data-stu-id="ef1ab-130">[Configuring EDI Batches](../core/configuring-edi-batches.md) </span></span>  
 [<span data-ttu-id="ef1ab-131">Cómo crear un puerto de envío</span><span class="sxs-lookup"><span data-stu-id="ef1ab-131">How to Create a Send Port</span></span>](../core/how-to-create-a-send-port2.md)
---
title: Usar el adaptador Ops | Documentos de Microsoft
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- IOpsAIC interface
- Ops adapters, configuring
- Ops adapters, IOpsAIC interface
- process management solution tutorial, Ops adapters
- Ops adapters, processing
ms.assetid: 331f3614-e00b-4587-b82b-3c7bc394f361
caps.latest.revision: "13"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: d93436e727265c4b381cdff72c42b3a677d0a4dc
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
---
# <a name="using-the-ops-adapter"></a><span data-ttu-id="1a69e-102">Usar el adaptador Ops</span><span class="sxs-lookup"><span data-stu-id="1a69e-102">Using the Ops Adapter</span></span>
<span data-ttu-id="1a69e-103">La solución de administración de procesos empresariales utiliza el adaptador Ops para controlar informes de errores desde la nueva característica de informes de errores.</span><span class="sxs-lookup"><span data-stu-id="1a69e-103">The business process management solution uses the Ops adapter to handle error reports from the new error reporting feature.</span></span> <span data-ttu-id="1a69e-104">La solución incluye un controlador de muestras para procesar mensajes desde el adaptador aunque puede escribir fácilmente las suyas propias y utilizar el adaptador en otras soluciones.</span><span class="sxs-lookup"><span data-stu-id="1a69e-104">The solution includes a sample handler to process messages from the adapter, although you can easily write your own and use the adapter in other solutions.</span></span> <span data-ttu-id="1a69e-105">Para obtener información acerca de la característica informes de errores, vea [enrutamiento de mensajes de error utilizando](../core/using-failed-message-routing.md).</span><span class="sxs-lookup"><span data-stu-id="1a69e-105">For information about the error reporting feature, see [Using Failed Message Routing](../core/using-failed-message-routing.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="1a69e-106">Aunque la solución utiliza el adaptador para el informe de errores, su uso no se limita al control de errores.</span><span class="sxs-lookup"><span data-stu-id="1a69e-106">Although the solution uses the adapter for error reporting, its use is not limited to error handling.</span></span> <span data-ttu-id="1a69e-107">Puede utilizar el adaptador en diversas circunstancias siempre que desee ejecutar un método de objeto específico en respuesta a un mensaje.</span><span class="sxs-lookup"><span data-stu-id="1a69e-107">You can use the adapter in a variety of circumstances whenever you want to execute a specific object method in response to a message.</span></span>  
  
## <a name="how-the-ops-adapter-processes-error-reports"></a><span data-ttu-id="1a69e-108">Cómo procesa el adaptador OPS informes de errores</span><span class="sxs-lookup"><span data-stu-id="1a69e-108">How the Ops Adapter Processes Error Reports</span></span>  
 <span data-ttu-id="1a69e-109">Puertos de la solución que usan informes de errores envían finalmente los mensajes de error para la **BizTalkErrors-SP** puerto.</span><span class="sxs-lookup"><span data-stu-id="1a69e-109">Ports in the solution that use error reporting ultimately send the error messages to the **BizTalkErrors-SP** port.</span></span> <span data-ttu-id="1a69e-110">El filtro en el puerto comprueba la existencia de la **ErrorReport.ErrorType** propiedad de contexto.</span><span class="sxs-lookup"><span data-stu-id="1a69e-110">The filter on the port tests for the existence of the **ErrorReport.ErrorType** context property.</span></span> <span data-ttu-id="1a69e-111">Sólo los mensajes de informes de errores tienen esta propiedad de contexto.</span><span class="sxs-lookup"><span data-stu-id="1a69e-111">Only error report messages have this context property.</span></span>  
  
 <span data-ttu-id="1a69e-112">El **BizTalkErrors-SP** enviar puerto ejecuta el mensaje de error a través de una canalización que utiliza un componente de ensamblador XML para poner el mensaje en un sobre.</span><span class="sxs-lookup"><span data-stu-id="1a69e-112">The **BizTalkErrors-SP** send port runs the error message through a pipeline that uses an XML assembler component to put the message in an envelope.</span></span> <span data-ttu-id="1a69e-113">A continuación, el mensaje va al adaptador Ops.</span><span class="sxs-lookup"><span data-stu-id="1a69e-113">The message then goes to the Ops adapter.</span></span>  
  
 <span data-ttu-id="1a69e-114">El sobre definido por el esquema ErrorEnvelope se marca para que acepte cualquier tipo de mensaje.</span><span class="sxs-lookup"><span data-stu-id="1a69e-114">The envelope, defined by the ErrorEnvelope schema, is marked to accept any type of message.</span></span> <span data-ttu-id="1a69e-115">Sin embargo, "cualquier" significa cualquier tipo de mensaje definido en el grupo de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="1a69e-115">However, "any" means any message type defined in the BizTalk group.</span></span> <span data-ttu-id="1a69e-116">Esto puede producir mensajes suspendidos si la solución recibe un mensaje de un tipo desconocido.</span><span class="sxs-lookup"><span data-stu-id="1a69e-116">This can produce suspended messages if the solution receives a message of an unknown type.</span></span> <span data-ttu-id="1a69e-117">Este tipo de mensaje generaría un error y se enrutaría a la **BizTalkErrors-SP** puerto.</span><span class="sxs-lookup"><span data-stu-id="1a69e-117">Such a message would produce an error and would be routed to the **BizTalkErrors-SP** port.</span></span> <span data-ttu-id="1a69e-118">A su vez, el mensaje generaría un error en el componente de ensamblador XML de la canalización porque no sería un tipo de mensaje conocido.</span><span class="sxs-lookup"><span data-stu-id="1a69e-118">In turn, the message would generate an error in the XML assembler component of the pipeline because it would not be a known message type.</span></span> <span data-ttu-id="1a69e-119">El error de canalización suspende el mensaje.</span><span class="sxs-lookup"><span data-stu-id="1a69e-119">The pipeline error suspends the message.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="1a69e-120">Para controlar los errores de enrutamiento debido a tipos de mensaje desconocidos, debe escribir un componente de canalización personalizado y utilizar el componente en una canalización personalizada para la **BizTalkErrors-SP** puerto.</span><span class="sxs-lookup"><span data-stu-id="1a69e-120">To handle routing errors due to unknown message types, you must write a custom pipeline component and use the component in a custom pipeline for the **BizTalkErrors-SP** port.</span></span> <span data-ttu-id="1a69e-121">El componente personalizado reemplaza al componente del ensamblador XML.</span><span class="sxs-lookup"><span data-stu-id="1a69e-121">The custom component replaces the XML assembler component.</span></span> <span data-ttu-id="1a69e-122">El componente personalizado debe colocar el **ErrorReport** propiedades en el encabezado sobre y agregar el mensaje en el cuerpo de la envoltura.</span><span class="sxs-lookup"><span data-stu-id="1a69e-122">Your custom component must put the **ErrorReport** properties in the envelope header and add the message to the body of the envelope.</span></span>  
  
 <span data-ttu-id="1a69e-123">El adaptador Ops es un adaptador de envío transaccional y unidireccional.</span><span class="sxs-lookup"><span data-stu-id="1a69e-123">The Ops adapter is a transactional, one-way send adapter.</span></span> <span data-ttu-id="1a69e-124">Cuando el adaptador procesa un mensaje, primero carga el ensamblado especificado, de ser necesario.</span><span class="sxs-lookup"><span data-stu-id="1a69e-124">When the adapter processes a message, it first loads the specified assembly, if necessary.</span></span> <span data-ttu-id="1a69e-125">El adaptador almacena ensamblados en memoria caché para evitar la sobrecarga de tener que cargar el ensamblado para cada llamada.</span><span class="sxs-lookup"><span data-stu-id="1a69e-125">The adapter caches assemblies in memory to avoid the overhead of loading the assembly for each call.</span></span> <span data-ttu-id="1a69e-126">A continuación, crea una instancia de la clase especificada y, a continuación, usa la reflexión para obtener el objeto en el ensamblado que implementa el **IOpsAIC** interfaz.</span><span class="sxs-lookup"><span data-stu-id="1a69e-126">It then creates an instance of the specified class, and then uses reflection to get the object in the assembly implementing the **IOpsAIC** interface.</span></span> <span data-ttu-id="1a69e-127">Si todo esto se realiza correctamente, el adaptador llama a la **inicializar** método y, a continuación, llama el **Execute** método, pasando el mensaje de informe de error.</span><span class="sxs-lookup"><span data-stu-id="1a69e-127">If all of this is successful, the adapter calls the **Initialize** method and then calls the **Execute** method, passing the error report message.</span></span>  
  
 <span data-ttu-id="1a69e-128">Si se produce un error al llamar a **Execute**, el adaptador vuelve a enviar el mensaje.</span><span class="sxs-lookup"><span data-stu-id="1a69e-128">If there is an error calling **Execute**, the adapter resubmits the message.</span></span> <span data-ttu-id="1a69e-129">Si la clase especificada no implementa la **IOpsAIC** no se puede encontrar la interfaz, o la clase o un ensamblado, el adaptador suspende el mensaje.</span><span class="sxs-lookup"><span data-stu-id="1a69e-129">If the specified class does not implement the **IOpsAIC** interface, or the class or assembly can't be found, the adapter suspends the message.</span></span>  
  
> [!TIP]
>  <span data-ttu-id="1a69e-130">Como el adaptador utiliza la reflexión, el ensamblado que contiene la clase debe estar en la caché de ensamblados global (GAC).</span><span class="sxs-lookup"><span data-stu-id="1a69e-130">Because the adapter uses reflection, the assembly containing the class must be in the Global Assembly Cache (GAC).</span></span>  
  
## <a name="the-iopsaic-interface"></a><span data-ttu-id="1a69e-131">La interfaz IOpsAIC</span><span class="sxs-lookup"><span data-stu-id="1a69e-131">The IOpsAIC Interface</span></span>  
 <span data-ttu-id="1a69e-132">El adaptador requiere un objeto que implementa el **IOpsAIC** interfaz.</span><span class="sxs-lookup"><span data-stu-id="1a69e-132">The adapter requires an object that implements the **IOpsAIC** interface.</span></span> <span data-ttu-id="1a69e-133">La interfaz aparece de la siguiente forma:</span><span class="sxs-lookup"><span data-stu-id="1a69e-133">The interface appears as follows:</span></span>  
  
```  
interface IOpsAIC  
{  
    void Initialize(string config);  
    void Execute(byte[] message);  
}  
```  
  
 <span data-ttu-id="1a69e-134">El adaptador pasa el mensaje original como una matriz de bytes a la **Execute** método.</span><span class="sxs-lookup"><span data-stu-id="1a69e-134">The adapter passes the original message as a byte array to the **Execute** method.</span></span>  
  
## <a name="configuring-the-adapter"></a><span data-ttu-id="1a69e-135">Configurar el adaptador</span><span class="sxs-lookup"><span data-stu-id="1a69e-135">Configuring the Adapter</span></span>  
 <span data-ttu-id="1a69e-136">El adaptador se configura del mismo modo que cualquier otro adaptador.</span><span class="sxs-lookup"><span data-stu-id="1a69e-136">You configure the adapter just as you would any other adapter.</span></span> <span data-ttu-id="1a69e-137">En la siguiente tabla se describen las propiedades de configuración del adaptador:</span><span class="sxs-lookup"><span data-stu-id="1a69e-137">The following table describes the adapter's configuration properties:</span></span>  
  
|<span data-ttu-id="1a69e-138">Nombre para mostrar</span><span class="sxs-lookup"><span data-stu-id="1a69e-138">Display Name</span></span>|<span data-ttu-id="1a69e-139">Description</span><span class="sxs-lookup"><span data-stu-id="1a69e-139">Description</span></span>|  
|------------------|-----------------|  
|<span data-ttu-id="1a69e-140">**Nombre seguro del ensamblado de .NET**</span><span class="sxs-lookup"><span data-stu-id="1a69e-140">**.NET Assembly Strong Name**</span></span>|<span data-ttu-id="1a69e-141">El nombre completo del ensamblado.</span><span class="sxs-lookup"><span data-stu-id="1a69e-141">The fully qualified name of the assembly.</span></span>|  
|<span data-ttu-id="1a69e-142">**Clase OpsAIC**</span><span class="sxs-lookup"><span data-stu-id="1a69e-142">**OpsAIC Class Name**</span></span>|<span data-ttu-id="1a69e-143">El nombre de la clase en el ensamblado que implementa el **IOpsAIC** interfaz.</span><span class="sxs-lookup"><span data-stu-id="1a69e-143">The name of the class within the assembly that implements the **IOpsAIC** interface.</span></span>|  
|<span data-ttu-id="1a69e-144">**Datos de inicialización**</span><span class="sxs-lookup"><span data-stu-id="1a69e-144">**Initialization Data**</span></span>|<span data-ttu-id="1a69e-145">Una cadena que se pasa como argumento a la **inicializar** método de la clase.</span><span class="sxs-lookup"><span data-stu-id="1a69e-145">A string passed as an argument to the **Initialize** method of the class.</span></span>|  
  
 <span data-ttu-id="1a69e-146">Observe que el adaptador requiere el nombre completo del ensamblado.</span><span class="sxs-lookup"><span data-stu-id="1a69e-146">Notice that the adapter requires the fully qualified name of the assembly.</span></span> <span data-ttu-id="1a69e-147">El nombre completo es el nombre que se da a un ensamblado cuando lo agrega al GAC.</span><span class="sxs-lookup"><span data-stu-id="1a69e-147">The fully qualified name is the name given to an assembly when you add it to the GAC.</span></span> <span data-ttu-id="1a69e-148">El nombre completo es una cadena que contiene el nombre, la versión, la referencia cultural y el token de clave pública del ensamblado.</span><span class="sxs-lookup"><span data-stu-id="1a69e-148">The fully qualified name is a string containing the assembly's name, version, culture, and public key token.</span></span> <span data-ttu-id="1a69e-149">Puede ver los nombres completos de los ensamblados utilizando la herramienta Caché de ensamblados global (gacutil.exe).</span><span class="sxs-lookup"><span data-stu-id="1a69e-149">You can see the fully qualified names of assemblies by using the Global Assembly Cache Tool, gacutil.exe.</span></span>  
  
 <span data-ttu-id="1a69e-150">Para obtener más información sobre los nombres de ensamblados completos, vea "Nombres de ensamblado" en la Guía del programador de .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="1a69e-150">For more information about fully qualified assembly names, see "Assembly Names" in the .NET Framework Developer's Guide.</span></span> <span data-ttu-id="1a69e-151">Para obtener más información sobre el archivo gacutil.exe, consulte "Herramienta Caché de ensamblados global (Gacutil.exe)” en la Guía del programador de [!INCLUDE[btsDotNetFramework](../includes/btsdotnetframework-md.md)].</span><span class="sxs-lookup"><span data-stu-id="1a69e-151">For more information about gacutil.exe, see "Global Assembly Cache Tool (Gacutil.exe)" in the [!INCLUDE[btsDotNetFramework](../includes/btsdotnetframework-md.md)] Developer's Guide.</span></span>  
  
 <span data-ttu-id="1a69e-152">Debe proporcionar el espacio de nombres con el nombre de clase.</span><span class="sxs-lookup"><span data-stu-id="1a69e-152">You must provide the namespace with the class name.</span></span> <span data-ttu-id="1a69e-153">Por ejemplo, si la clase es **OpsHandler** en el **OperationsHandler** espacio de nombres, debe dar el nombre de clase como **OperationsHandler.OpsHandler**.</span><span class="sxs-lookup"><span data-stu-id="1a69e-153">For example, if the class is **OpsHandler** in the **OperationsHandler** namespace, you would give the class name as **OperationsHandler.OpsHandler**.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1a69e-154">Vea también</span><span class="sxs-lookup"><span data-stu-id="1a69e-154">See Also</span></span>  
 [<span data-ttu-id="1a69e-155">El adaptador Ops</span><span class="sxs-lookup"><span data-stu-id="1a69e-155">The Ops Adapter</span></span>](../core/the-ops-adapter.md)
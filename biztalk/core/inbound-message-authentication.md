---
title: "Autenticación de mensajes entrantes | Documentos de Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- messages, authenticating
- processing, inbound messages
- messages, inbound
- processing, security
- security, messages
- inbound messages
ms.assetid: 34c06283-667d-4498-8544-dea6e87f276f
caps.latest.revision: "12"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 49ada514c771f4e6dbf0abad3f23cab54721299d
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
---
# <a name="inbound-message-authentication"></a><span data-ttu-id="1de17-102">Autenticación de mensajes entrantes</span><span class="sxs-lookup"><span data-stu-id="1de17-102">Inbound Message Authentication</span></span>
<span data-ttu-id="1de17-103">BizTalk Server puede autenticar el remitente de un mensaje (mediante la información de certificado o la seguridad integrada de Windows) para validar su identidad.</span><span class="sxs-lookup"><span data-stu-id="1de17-103">BizTalk Server can authenticate the sender of a message (either by using the certificate information or Windows integrated security) in order to validate the identity of the sender of the message.</span></span> <span data-ttu-id="1de17-104">La siguiente ilustración muestra las características de seguridad de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] que puede utilizar para autenticar mensajes entrantes.</span><span class="sxs-lookup"><span data-stu-id="1de17-104">The following figure shows the security features in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that you can use to authenticate inbound messages.</span></span>  
  
 <span data-ttu-id="1de17-105">![Características de seguridad que autentican los mensajes entrantes](../core/media/ebiz-plan-secoverview-auth-inbound.gif "ebiz_plan_secoverview_auth_inbound")</span><span class="sxs-lookup"><span data-stu-id="1de17-105">![Security features authenticating inbound messages](../core/media/ebiz-plan-secoverview-auth-inbound.gif "ebiz_plan_secoverview_auth_inbound")</span></span>  
<span data-ttu-id="1de17-106">Características de seguridad usadas por BizTalk Server para autenticar mensajes entrantes.</span><span class="sxs-lookup"><span data-stu-id="1de17-106">Security features BizTalk Server uses to authenticate inbound messages.</span></span>  
  
 <span data-ttu-id="1de17-107">Al recibir un mensaje cifrado y firmado, BizTalk Server realiza los pasos siguientes para asegurarse de que la entidad remitente es reconocida.</span><span class="sxs-lookup"><span data-stu-id="1de17-107">When BizTalk Server receives an encrypted and signed message, it takes the following steps to ensure that the sending party is recognized.</span></span>  
  
1.  <span data-ttu-id="1de17-108">Cuando un mensaje llega a una ubicación de recepción de BizTalk Server, el controlador de recepción intenta obtener el identificador de seguridad de Windows (SSID) de remitente del proceso remitente.</span><span class="sxs-lookup"><span data-stu-id="1de17-108">When a message arrives at a BizTalk Server receive location, the receive handler attempts to obtain the sender's Windows security ID (SSID) from the sending process.</span></span> <span data-ttu-id="1de17-109">La ubicación de recepción pasa el SSID a niveles inferiores para admitir casos en los que el agente de escucha ya haya autenticado un mensaje firmado.</span><span class="sxs-lookup"><span data-stu-id="1de17-109">The receive location passes the SSID downstream to support cases where the listener has already authenticated a signed message.</span></span> <span data-ttu-id="1de17-110">Si la información de certificado de cliente puede ser obtenida (por ejemplo por el adaptador de BizTalk para Message Queue o de HTTP), la ubicación de recepción de BizTalk Server puede obtenerla y pasarla para la resolución de su entidad más adelante en la canalización de recepción.</span><span class="sxs-lookup"><span data-stu-id="1de17-110">If client-side certificate information can be obtained (for example by the BizTalk Message Queuing or HTTP adapter), the BizTalk Server receive location can obtain that certificate information and pass it along for party resolution later on in the receive pipeline.</span></span> <span data-ttu-id="1de17-111">Si el controlador de recepción no puede obtener el SSID, se deja este campo en blanco.</span><span class="sxs-lookup"><span data-stu-id="1de17-111">If the receive handler cannot obtain the SSID, this field is left blank.</span></span>  
  
     <span data-ttu-id="1de17-112">El controlador de recepción envía el mensaje a la canalización de recepción, donde éste se descifra, se comprueba la firma digital y se realiza la resolución de entidad si la canalización tiene un componente de resolución de entidad.</span><span class="sxs-lookup"><span data-stu-id="1de17-112">The receive handler sends the message to the receive pipeline, where the message is decrypted, the digital signature is verified, and the party resolution takes place if the pipeline has a party resolution component.</span></span> <span data-ttu-id="1de17-113">Si el remitente utilizó un certificado de firma en el mensaje entrante, a continuación el componente descodificador de MIME/SMIME sobrescribe cualquier información de certificado obtenida del adaptador.</span><span class="sxs-lookup"><span data-stu-id="1de17-113">If the sender used a signing certificate on the incoming message, then the MIME/SMIME decoder component overwrites any certificate information obtained from the adapter.</span></span>  
  
2.  <span data-ttu-id="1de17-114">Si el remitente cifró el mensaje, el descodificador de MIME/SMIME recupera el certificado de descifrado del almacén de certificados personales para la cuenta de servicio de la instancia de host y utiliza la clave privada para descifrar el mensaje.</span><span class="sxs-lookup"><span data-stu-id="1de17-114">If the sender encrypted the message, the MIME/SMIME decoder retrieves the decryption certificate from the personal certificate store for the host instance service account and uses the private key to decrypt the message.</span></span>  
  
     <span data-ttu-id="1de17-115">Si el remitente firmó el mensaje, el descodificador de MIME/SMIME autentica la firma digital comprobando si hay signos de manipulación en el hash de carga y, a continuación, recuperando el certificado del almacén de certificados para comprobar la firma.</span><span class="sxs-lookup"><span data-stu-id="1de17-115">If the sender signed the message, the MIME/SMIME decoder authenticates the digital signature by verifying the payload hash for signs of tampering, and then retrieving the certificate from the certificate store to verify the signature.</span></span> <span data-ttu-id="1de17-116">Si la clave pública del firmante está en el mensaje, el descodificador de MIME/SMIME no recupera el certificado del almacén de certificados; en su lugar, utiliza la clave pública incluida con el mensaje.</span><span class="sxs-lookup"><span data-stu-id="1de17-116">If the public key of the signer is on the message itself, the MIME/SMIME decoder does not retrieve the certificate from the certificate store, but uses the public key that came with the message.</span></span>  
  
3.  <span data-ttu-id="1de17-117">El paso de procesamiento final de la canalización suele ser la resolución de entidades.</span><span class="sxs-lookup"><span data-stu-id="1de17-117">Usually, the final processing step in the pipeline is party resolution.</span></span> <span data-ttu-id="1de17-118">Puede usar el Explorador de BizTalk o la consola de administración de BizTalk Server para crear entidades, asignarles un certificado de firma o crear alias de entidad.</span><span class="sxs-lookup"><span data-stu-id="1de17-118">Using BizTalk Explorer or BizTalk Server Administration console, you can create parties, map the party to a signing certificate, or create party aliases.</span></span> <span data-ttu-id="1de17-119">Todas las partes que defina en el Explorador de BizTalk tienen un identificador único de entidad (PID).</span><span class="sxs-lookup"><span data-stu-id="1de17-119">All parties you define in BizTalk Explorer have a unique party identifier (PID).</span></span> <span data-ttu-id="1de17-120">BizTalk Server obtiene el PID y lo pone en el contexto del mensaje.</span><span class="sxs-lookup"><span data-stu-id="1de17-120">BizTalk Server obtains the PID and places it in the message context.</span></span> <span data-ttu-id="1de17-121">BizTalk obtiene el PID mediante uno de estos métodos:</span><span class="sxs-lookup"><span data-stu-id="1de17-121">BizTalk obtains the PID by one of the following methods:</span></span>  
  
    1.  <span data-ttu-id="1de17-122">Si el remitente firmó el mensaje, si el controlador de recepción pudo obtener un certificado de cliente o si se seleccionó la opción de resolver la entidad con el certificado, BizTalk utiliza la firma o el certificado de cliente correspondientes para buscar el PID.</span><span class="sxs-lookup"><span data-stu-id="1de17-122">If the sender signed the message or if the receive handler was able to obtain a client-side certificate, and you selected the option to resolve the party by using the certificate, then BizTalk uses the corresponding signature or client-side certificate to lookup the PID.</span></span> <span data-ttu-id="1de17-123">Debe configurar la entidad con el certificado como una propiedad antes de comenzar a recibir sus mensajes.</span><span class="sxs-lookup"><span data-stu-id="1de17-123">You must configure the party with the certificate as a property before you start receiving its messages.</span></span> <span data-ttu-id="1de17-124">Para obtener más información acerca de cómo configurar la entidad, consulte [con certificados para la resolución de entidades](../core/using-certificates-for-party-resolution.md).</span><span class="sxs-lookup"><span data-stu-id="1de17-124">For more information how to configure the party, see [Using Certificates for Party Resolution](../core/using-certificates-for-party-resolution.md).</span></span>  
  
    2.  <span data-ttu-id="1de17-125">Si el remitente no utilizó un certificado de firma en el mensaje y se ha seleccionado la opción de resolver la entidad utilizando el Id. de seguridad del remitente (SSID), el componente de resolución de entidades utiliza el SSID para buscar el PID.</span><span class="sxs-lookup"><span data-stu-id="1de17-125">If the sender did not use a signing certificate on the message, and you have selected the option to resolve the party by using the Sender's Security ID (SSID), the party resolution component uses the SSID to look up the PID.</span></span> <span data-ttu-id="1de17-126">Debe configurar la entidad para que use el SSID como alias antes de comenzar a recibir sus mensajes.</span><span class="sxs-lookup"><span data-stu-id="1de17-126">You must configure the party to use the SSID as an alias before you start receiving its messages.</span></span> <span data-ttu-id="1de17-127">Para obtener más información sobre el componente de resolución de entidades, vea [componente de canalización de resolución de entidad](../core/party-resolution-pipeline-component.md).</span><span class="sxs-lookup"><span data-stu-id="1de17-127">For more information about the party resolution component, see [Party Resolution Pipeline Component](../core/party-resolution-pipeline-component.md).</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="1de17-128">BizTalk Server usa el nombre de cuenta en lugar del SID de Windows real cuando define alias para entidades.</span><span class="sxs-lookup"><span data-stu-id="1de17-128">BizTalk Server uses the account name rather than the actual Windows SID when defining aliases for parties.</span></span>  
  
    3.  <span data-ttu-id="1de17-129">Si no se puede resolver la entidad, la canalización establece el PID en Invitado.</span><span class="sxs-lookup"><span data-stu-id="1de17-129">If the party cannot be resolved, the pipeline sets the PID to Guest.</span></span>  
  
4.  <span data-ttu-id="1de17-130">Si se marcó el puerto de recepción como de autenticación necesaria y BizTalk Server obtuvo un PID válido y lo resolvió como una entidad conocida, el mensaje se agrega a la cola de la base de datos de cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="1de17-130">If you marked the receive port as Authentication Required, and BizTalk Server obtained a valid PID and resolved it to a known party, the message is then queued to the MessageBox database.</span></span> <span data-ttu-id="1de17-131">Si el SSID está en blanco o el PID es un Id. de invitado, BizTalk Server descarta el mensaje o lo envía a la cola de suspensión (según la configuración de la propiedad de autenticación necesaria).</span><span class="sxs-lookup"><span data-stu-id="1de17-131">If the SSID is blank or the PID is a guest ID, BizTalk Server either discards the message or sends it to the suspended queue (depending on your configuration of the Authentication Required property).</span></span> <span data-ttu-id="1de17-132">Puede utilizar la propiedad de autenticación necesaria para minimizar el efecto negativo de recibir una gran cantidad de mensajes de una entidad desconocida.</span><span class="sxs-lookup"><span data-stu-id="1de17-132">You can use the Authentication Required property as a way of minimizing the negative effect of receiving a large quantity of messages from an unknown party.</span></span> <span data-ttu-id="1de17-133">Para obtener más información acerca de las opciones de autenticación para puertos de recepción, consulte [cómo configurar opciones de autenticación para un puerto de recepción](../core/how-to-configure-authentication-options-for-a-receive-port.md).</span><span class="sxs-lookup"><span data-stu-id="1de17-133">For more information about the authentication options for receive ports, see [How to Configure Authentication Options for a Receive Port](../core/how-to-configure-authentication-options-for-a-receive-port.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1de17-134">Vea también</span><span class="sxs-lookup"><span data-stu-id="1de17-134">See Also</span></span>  
 <span data-ttu-id="1de17-135">[Autenticación de mensajes entre procesos](../core/authentication-of-messages-between-processes.md) </span><span class="sxs-lookup"><span data-stu-id="1de17-135">[Authentication of Messages Between Processes](../core/authentication-of-messages-between-processes.md) </span></span>  
 <span data-ttu-id="1de17-136">[Protección de mensajes salientes](../core/outbound-message-protection.md) </span><span class="sxs-lookup"><span data-stu-id="1de17-136">[Outbound Message Protection](../core/outbound-message-protection.md) </span></span>  
 <span data-ttu-id="1de17-137">[Autenticación del remitente de un mensaje](../core/authenticating-the-sender-of-a-message.md) </span><span class="sxs-lookup"><span data-stu-id="1de17-137">[Authenticating the Sender of a Message](../core/authenticating-the-sender-of-a-message.md) </span></span>  
 <span data-ttu-id="1de17-138">[Autorización del receptor de un mensaje](../core/authorizing-the-receiver-of-a-message.md) </span><span class="sxs-lookup"><span data-stu-id="1de17-138">[Authorizing the Receiver of a Message](../core/authorizing-the-receiver-of-a-message.md) </span></span>  
 <span data-ttu-id="1de17-139">[Cómo configurar el servidor BizTalk Server para recibir mensajes firmados](../core/how-to-configure-biztalk-server-for-receiving-signed-messages.md) </span><span class="sxs-lookup"><span data-stu-id="1de17-139">[How to Configure BizTalk Server for Receiving Signed Messages](../core/how-to-configure-biztalk-server-for-receiving-signed-messages.md) </span></span>  
 [<span data-ttu-id="1de17-140">Certificados que utiliza BizTalk Server para mensajes firmados</span><span class="sxs-lookup"><span data-stu-id="1de17-140">Certificates that BizTalk Server Uses for Signed Messages</span></span>](../core/certificates-that-biztalk-server-uses-for-signed-messages.md)
---
title: Problemas conocidos de los adaptadores de WCF | Documentos de Microsoft
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 423c6021-5fb7-48c9-9319-11e7a18c775c
caps.latest.revision: "54"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 26c296dfb2ca1f05a2f403aa31a73b67934fb23a
ms.sourcegitcommit: 3fc338e52d5dbca2c3ea1685a2faafc7582fe23a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 12/01/2017
---
# <a name="known-issues-for-the-wcf-adapters"></a><span data-ttu-id="5038f-102">Problemas conocidos de los adaptadores de WCF</span><span class="sxs-lookup"><span data-stu-id="5038f-102">Known Issues for the WCF Adapters</span></span>
<span data-ttu-id="5038f-103">En este tema se describe los problemas conocidos de los adaptadores WCF incluidos con BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="5038f-103">This topic describes the known issues for the WCF adapters included with BizTalk Server.</span></span>  
  
## <a name="a-message-that-fails-in-the-inbound-soap-marshaling-processing-is-not-suspended-in-wcf-receive-adapters"></a><span data-ttu-id="5038f-104">Un mensaje que produce error en el procesamiento del cálculo de referencia de SOAP entrante no se suspende en los adaptadores de recepción WCF.</span><span class="sxs-lookup"><span data-stu-id="5038f-104">A message that fails in the inbound SOAP marshaling processing is not suspended in WCF receive adapters</span></span>  
 <span data-ttu-id="5038f-105">Cuando un mensaje llega a un adaptador de recepción WCF, el adaptador de WCF crea un mensaje de BizTalk desde el mensaje SOAP entrante y, a continuación, pasa el mensaje de BizTalk al proxy de transporte, administrado por el Gestor extremo.</span><span class="sxs-lookup"><span data-stu-id="5038f-105">When a message arrives at a WCF receive adapter, the WCF adapter creates a BizTalk message from the incoming SOAP message, and then passes the BizTalk message to the transport proxy, which is managed by the Endpoint Manager.</span></span> <span data-ttu-id="5038f-106">Si se produce un error en el adaptador al leer el sobre y el cuerpo SOAP durante la creación del mensaje de BizTalk, el mensaje no se suspende debido a que el adaptador usa el lector rápido, no almacenado en caché y progresivo para obtener acceso al mensaje SOAP.</span><span class="sxs-lookup"><span data-stu-id="5038f-106">If the adapter fails to read the SOAP envelope and body while creating the BizTalk message, the message is not suspended because the adapter uses the fast, non-cached, and forward-only reader to access the SOAP message.</span></span>  
  
 <span data-ttu-id="5038f-107">Debe comprobar el mensaje con errores en el registro de eventos.</span><span class="sxs-lookup"><span data-stu-id="5038f-107">You should check the event log for the failed message.</span></span> <span data-ttu-id="5038f-108">Por ejemplo, puede usar una expresión de ruta de cuerpo en el **mensajes** ficha en el cuadro de diálogo de propiedades WCF adaptador transporte para especificar cómo crear el cuerpo del mensaje de BizTalk entrante de un mensaje SOAP entrante a través del adaptador WCF.</span><span class="sxs-lookup"><span data-stu-id="5038f-108">For example, you can use a body path expression on the **Messages** tab in the WCF adapter transport properties dialog box to specify how to create the inbound BizTalk message body from a SOAP message incoming through the WCF adapter.</span></span> <span data-ttu-id="5038f-109">Cuando se suministra una expresión de ruta de cuerpo no válido para el mensaje SOAP entrante en el **mensajes** pestaña, el adaptador no se puede crear el mensaje de BizTalk y no se puede suspender el mensaje entrante.</span><span class="sxs-lookup"><span data-stu-id="5038f-109">When an invalid body path expression for the incoming SOAP message is supplied on the **Messages** tab, the adapter fails to create the BizTalk message and cannot suspend the incoming message.</span></span> <span data-ttu-id="5038f-110">Para obtener más información acerca de cómo utilizar la expresión de ruta de acceso de cuerpo en el **mensajes** pestaña, vea [especificar el cuerpo del mensaje para los adaptadores de WCF](../core/specifying-the-message-body-for-the-wcf-adapters.md).</span><span class="sxs-lookup"><span data-stu-id="5038f-110">For more information about how to use the body path expression on the **Messages** tab, see [Specifying the Message Body for the WCF Adapters](../core/specifying-the-message-body-for-the-wcf-adapters.md).</span></span>  
  
 <span data-ttu-id="5038f-111">La siguiente ilustración muestra la **mensajes** ficha en el que puede especificar cómo crear mensajes de BizTalk entrantes desde los mensajes SOAP entrantes.</span><span class="sxs-lookup"><span data-stu-id="5038f-111">The following figure shows the **Messages** tab on which you can specify how to create inbound BizTalk messages from the incoming SOAP messages.</span></span>  
  
## <a name="a-message-that-fails-in-the-inbound-soap-marshaling-processing-is-not-suspended-in-wcf-send-adapters"></a><span data-ttu-id="5038f-112">Un mensaje que produce error en el procesamiento del cálculo de referencia de SOAP entrante no se suspende en los adaptadores de envío WCF.</span><span class="sxs-lookup"><span data-stu-id="5038f-112">A message that fails in the inbound SOAP marshaling processing is not suspended in WCF send adapters</span></span>  
 <span data-ttu-id="5038f-113">Un puerto de petición-respuesta de WCF puede recibir un mensaje WCF como mensaje de respuesta.</span><span class="sxs-lookup"><span data-stu-id="5038f-113">The solicit-response WCF send port can receive a WCF message as a response message.</span></span> <span data-ttu-id="5038f-114">Cuando el mensaje llega al adaptador de envío WCF, el adaptador de WCF crea el mensaje de BizTalk desde el mensaje SOAP entrante y, a continuación, pasa el mensaje de BizTalk al proxy de transporte, que es administrado por el Gestor extremo.</span><span class="sxs-lookup"><span data-stu-id="5038f-114">When the message arrives at the WCF send adapter, the WCF adapter creates the BizTalk message from the incoming SOAP message, and then passes the BizTalk message to the transport proxy, which is managed by the Endpoint Manager.</span></span> <span data-ttu-id="5038f-115">Si se produce un error en el adaptador al leer el sobre y el cuerpo SOAP durante la creación del mensaje de BizTalk, el mensaje no se suspende debido a que el adaptador usa el lector rápido, no almacenado en caché y progresivo para obtener acceso al mensaje SOAP.</span><span class="sxs-lookup"><span data-stu-id="5038f-115">If the adapter fails to read the SOAP envelope and body while creating the BizTalk message, the message is not suspended because the adapter uses the fast, non-cached, and forward-only reader to access the SOAP message.</span></span>  
  
 <span data-ttu-id="5038f-116">Debe comprobar el mensaje con errores en el registro de eventos.</span><span class="sxs-lookup"><span data-stu-id="5038f-116">You should check the event log for the failed message.</span></span> <span data-ttu-id="5038f-117">Por ejemplo, puede usar una expresión XPath en el **mensajes** ficha en el cuadro de diálogo de propiedades WCF adaptador transporte para especificar cómo crear el cuerpo del mensaje de BizTalk entrante de un mensaje SOAP entrante a través del adaptador WCF.</span><span class="sxs-lookup"><span data-stu-id="5038f-117">For example, you can use an XPath expression on the **Messages** tab in the WCF adapter transport properties dialog box to specify how to create the inbound BizTalk message body from a SOAP message incoming through the WCF adapter.</span></span> <span data-ttu-id="5038f-118">Cuando se suministra una expresión XPath no válida para el mensaje SOAP entrante en el **mensajes** pestaña, el adaptador no se puede crear el mensaje de BizTalk y no se puede suspender el mensaje entrante.</span><span class="sxs-lookup"><span data-stu-id="5038f-118">When an invalid XPath expression for the incoming SOAP message is supplied on the **Messages** tab, the adapter fails to create the BizTalk message and cannot suspend the incoming message.</span></span> <span data-ttu-id="5038f-119">Para obtener más información acerca de cómo utilizar la expresión XPath en el **mensajes** pestaña, vea [especificar el cuerpo del mensaje para los adaptadores de WCF](../core/specifying-the-message-body-for-the-wcf-adapters.md).</span><span class="sxs-lookup"><span data-stu-id="5038f-119">For more information about how to use the XPath expression on the **Messages** tab, see [Specifying the Message Body for the WCF Adapters](../core/specifying-the-message-body-for-the-wcf-adapters.md).</span></span>  
  
 <span data-ttu-id="5038f-120">La siguiente ilustración muestra la **mensajes** pestaña del adaptador de envío WCF-NetNamedPipe como un ejemplo.</span><span class="sxs-lookup"><span data-stu-id="5038f-120">The following figure shows the **Messages** tab of the WCF-NetNamedPipe send adapter as an example.</span></span>  
  
 <span data-ttu-id="5038f-121">![Adaptadores de envío de la pestaña mensajes en WCF](../core/media/54623ccf-49a9-4b6a-9487-da0d94bab64d.gif "54623ccf-49a9-4b6a-9487-da0d94bab64d")</span><span class="sxs-lookup"><span data-stu-id="5038f-121">![The Messages tab in the WCF send adapters](../core/media/54623ccf-49a9-4b6a-9487-da0d94bab64d.gif "54623ccf-49a9-4b6a-9487-da0d94bab64d")</span></span>  
  
## <a name="messages-can-be-lost-when-using-onewaybindingelement-in-a-two-way-transport-with-custom-binding-in-non-transactional-wcf-receive-locations"></a><span data-ttu-id="5038f-122">Los mensajes se pueden perder al usar OneWayBindingElement en un transporte bidireccional con enlace personalizado en ubicaciones de recepción no transaccionales WCF.</span><span class="sxs-lookup"><span data-stu-id="5038f-122">Messages can be lost when using OneWayBindingElement in a two-way transport with custom binding in non-transactional WCF receive locations</span></span>  
 <span data-ttu-id="5038f-123">En una comunicación bidireccional, los adaptadores de WCF seguirán devolviendo la respuesta hasta que los mensajes no se hayan guardado en la base de datos de cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="5038f-123">In a two-way communication, WCF adapters will send the response back until the messages have been persisted in the MessageBox database.</span></span> <span data-ttu-id="5038f-124">No obstante, el uso **OneWayBindingElement** genera una respuesta ficticia inmediatamente antes de enviar el mensaje recibido al adaptador de WCF.</span><span class="sxs-lookup"><span data-stu-id="5038f-124">However, using **OneWayBindingElement** generates a dummy response immediately before dispatching the received message to the WCF adapter.</span></span> <span data-ttu-id="5038f-125">Por lo tanto, si configura un enlace personalizado con un **OneWayBindingElement** en la pila de canales para el transporte bidireccional en no transaccionales, ubicaciones de recepción, se pueden perder mensajes porque los adaptadores de WCF procesan los datos recibidos mensajes de forma unidireccional.</span><span class="sxs-lookup"><span data-stu-id="5038f-125">Therefore, if you configure a custom binding with a **OneWayBindingElement** in the channel stack for two-way transport in non-transactional receive locations, messages can be lost because the WCF adapters process the received messages in the one-way fashion.</span></span>  
  
## <a name="default-values-of-the-readerquotas-attributes-in-the-wcf-custom-and-wcf-customisolated-transport-properties-dialog-boxes-are-used-when-constructing-the-bindings"></a><span data-ttu-id="5038f-126">Al construir los enlaces, se usan los valores predeterminados de los atributos de ReaderQuotas del cuadro de diálogo Propiedades de transporte de los adaptadores de WCF-Custom y WCF-CustomIsolated.</span><span class="sxs-lookup"><span data-stu-id="5038f-126">Default values of the ReaderQuotas attributes in the WCF-Custom and WCF-CustomIsolated transport properties dialog boxes are used when constructing the bindings</span></span>  
 <span data-ttu-id="5038f-127">Cuadros de diálogo de propiedades de transporte de WCF-Custom y WCF-CustomIsolated la **ReaderQuotas** valores de atributo se muestran como cero.</span><span class="sxs-lookup"><span data-stu-id="5038f-127">In the WCF-Custom and WCF-CustomIsolated transport properties dialog boxes, the **ReaderQuotas** attribute values are shown as zero.</span></span> <span data-ttu-id="5038f-128">No obstante, al construir los enlaces, se usan los siguientes valores:</span><span class="sxs-lookup"><span data-stu-id="5038f-128">However, when constructing the bindings, the following values are used:</span></span>  
  
|<span data-ttu-id="5038f-129">Attribute</span><span class="sxs-lookup"><span data-stu-id="5038f-129">Attribute</span></span>|<span data-ttu-id="5038f-130">Description</span><span class="sxs-lookup"><span data-stu-id="5038f-130">Description</span></span>|<span data-ttu-id="5038f-131">Valor</span><span class="sxs-lookup"><span data-stu-id="5038f-131">Value</span></span>|  
|---------------|-----------------|-----------|  
|<span data-ttu-id="5038f-132">maxArrayLength</span><span class="sxs-lookup"><span data-stu-id="5038f-132">maxArrayLength</span></span>|<span data-ttu-id="5038f-133">Un entero positivo que especifica la longitud máxima permitida de matriz.</span><span class="sxs-lookup"><span data-stu-id="5038f-133">A positive integer that specifies the maximum allowed array length.</span></span>|<span data-ttu-id="5038f-134">16384</span><span class="sxs-lookup"><span data-stu-id="5038f-134">16384</span></span>|  
|<span data-ttu-id="5038f-135">maxBytesPerRead</span><span class="sxs-lookup"><span data-stu-id="5038f-135">maxBytesPerRead</span></span>|<span data-ttu-id="5038f-136">Un entero positivo que especifica el número máximo permitido de bytes devueltos por lectura.</span><span class="sxs-lookup"><span data-stu-id="5038f-136">A positive integer that specifies the maximum allowed bytes returned per read.</span></span>|<span data-ttu-id="5038f-137">4096</span><span class="sxs-lookup"><span data-stu-id="5038f-137">4096</span></span>|  
|<span data-ttu-id="5038f-138">maxDepth</span><span class="sxs-lookup"><span data-stu-id="5038f-138">maxDepth</span></span>|<span data-ttu-id="5038f-139">Un entero positivo que especifica la profundidad máxima de anidación de nodos por lectura.</span><span class="sxs-lookup"><span data-stu-id="5038f-139">A positive integer that specifies the maximum nested node depth per read.</span></span>|<span data-ttu-id="5038f-140">32</span><span class="sxs-lookup"><span data-stu-id="5038f-140">32</span></span>|  
|<span data-ttu-id="5038f-141">maxNameTableCharCount</span><span class="sxs-lookup"><span data-stu-id="5038f-141">maxNameTableCharCount</span></span>|<span data-ttu-id="5038f-142">Un entero positivo que especifica el número máximo permitido de caracteres en un nombre de tabla.</span><span class="sxs-lookup"><span data-stu-id="5038f-142">A positive integer that specifies the maximum characters allowed in a table name.</span></span>|<span data-ttu-id="5038f-143">16384</span><span class="sxs-lookup"><span data-stu-id="5038f-143">16384</span></span>|  
|<span data-ttu-id="5038f-144">maxStringContentLength</span><span class="sxs-lookup"><span data-stu-id="5038f-144">maxStringContentLength</span></span>|<span data-ttu-id="5038f-145">Un entero positivo que especifica el número máximo permitido de caracteres en el contenido de un elemento XML.</span><span class="sxs-lookup"><span data-stu-id="5038f-145">A positive integer that specifies the maximum characters allowed in XML element content.</span></span>|<span data-ttu-id="5038f-146">8192</span><span class="sxs-lookup"><span data-stu-id="5038f-146">8192</span></span>|  
  
## <a name="the-wcf-receive-locations-may-be-disabled-if-you-change-the-wcf-adapter-type-and-keep-the-same-address"></a><span data-ttu-id="5038f-147">Las ubicaciones de recepción WCF pueden deshabilitarse si se cambia el tipo de adaptador de WCF y se mantiene la misma dirección.</span><span class="sxs-lookup"><span data-stu-id="5038f-147">The WCF receive locations may be disabled if you change the WCF adapter type and keep the same address</span></span>  
 <span data-ttu-id="5038f-148">Si cambia el tipo de adaptador, por ejemplo, cambiar el tipo de adaptador WCF de WCF-NetTcp a WCF-Custom con el enlace NetTcp y mantener la misma dirección, la ubicación de recepción puede deshabilitarse debido al problema de almacenamiento en caché en el Administrador de punto de conexión.</span><span class="sxs-lookup"><span data-stu-id="5038f-148">If you change the adapter type—for example, change the WCF adapter type from WCF-NetTcp to WCF-Custom with NetTcp Binding—and keep the same address, the receive location may be disabled because of the caching problem in the Endpoint Manager.</span></span> <span data-ttu-id="5038f-149">Para solucionar este problema, puede llevar a cabo uno de los siguientes procedimientos:</span><span class="sxs-lookup"><span data-stu-id="5038f-149">To work around this, you can do either of the following:</span></span>  
  
-   <span data-ttu-id="5038f-150">Reiniciar el servicio BTSNTSvc.</span><span class="sxs-lookup"><span data-stu-id="5038f-150">Restart the BTSNTSvc service.</span></span>  
  
-   <span data-ttu-id="5038f-151">Cambiar el URI a una dirección diferente y guardarlo y, a continuación, volver a cambiar el URI a la dirección original y volver a guardarlo.</span><span class="sxs-lookup"><span data-stu-id="5038f-151">Change the URI to a different address and save it, and then change the URI back to the original address and save it again.</span></span>  
  
## <a name="the-wcf-action-set-in-the-orchestration-does-not-override-the-action-setting-in-the-static-send-port"></a><span data-ttu-id="5038f-152">La acción WCF establecida en la orquestación no sobrescribe la configuración de la acción del puerto de envío estático.</span><span class="sxs-lookup"><span data-stu-id="5038f-152">The WCF action set in the orchestration does not override the action setting in the static send port</span></span>  
 <span data-ttu-id="5038f-153">Si establece la **WCF. Acción** propiedad de contexto en la orquestación, debe dejar el **acción** campo en blanco en el cuadro de diálogo de propiedades de transporte WCF adaptador.</span><span class="sxs-lookup"><span data-stu-id="5038f-153">If you set the **WCF.Action** context property in the orchestration, you need to leave the **Action** field blank in the WCF adapter transport properties dialog box.</span></span> <span data-ttu-id="5038f-154">Si también especifica una acción en el puerto de envío estático, el **WCF. Acción** propiedad de contexto se establece en la orquestación se reemplazará por el valor establecido en el puerto de envío estático.</span><span class="sxs-lookup"><span data-stu-id="5038f-154">If you also specify an action in the static send port, the **WCF.Action** context property you set in the orchestration will be overridden by the value you set in the static send port.</span></span>  
  
## <a name="propagating-a-fault-message-is-not-supported-in-the-transactional-send"></a><span data-ttu-id="5038f-155">La propagación de un mensaje de error no es compatible en el envío transaccional.</span><span class="sxs-lookup"><span data-stu-id="5038f-155">Propagating a fault message is not supported in the transactional send</span></span>  
 <span data-ttu-id="5038f-156">El **propagar mensaje de error** opción en los puertos de envío de petición-respuesta le permite enrutar los mensajes que se producirá un error en el procesamiento de salida a una aplicación de suscripción.</span><span class="sxs-lookup"><span data-stu-id="5038f-156">The **Propagate fault message** option in the solicit-response send ports allows you to route the messages that fail the outbound processing to a subscribing application.</span></span> <span data-ttu-id="5038f-157">Sin embargo, si la **Habilitar transacciones** también se selecciona la casilla de verificación en el cuadro de diálogo de propiedades de transporte y la transacción se anula o no se puede usar cuando la respuesta de error llega al adaptador, no podrá propagar el mensajes de error en cualquier aplicación de suscripción.</span><span class="sxs-lookup"><span data-stu-id="5038f-157">However, if the **Enable transactions** check box is also selected in the transport properties dialog box and the transaction is aborted or not usable when the fault response arrives to the adapter, you will not be able to propagate the fault messages to any subscribing applications</span></span>  
  
## <a name="the-msmq-cluster-resource-group-needs-to-be-restarted-before-restarting-the-biztalk-host-cluster-resource-group-during-the-cluster-failover"></a><span data-ttu-id="5038f-158">El grupo de recursos de clúster MSMQ debe reiniciarse antes de que se reinicie el grupo de recursos de clúster Host de BizTalk durante la conmutación por error del clúster.</span><span class="sxs-lookup"><span data-stu-id="5038f-158">The MSMQ cluster resource group needs to be restarted before restarting the BizTalk Host cluster resource group during the cluster failover</span></span>  
 <span data-ttu-id="5038f-159">En un escenario de conmutación por error del clúster, cuando tiene lugar una conmutación por error, el grupo de recursos de clúster MSMQ debe reiniciarse antes de que se reinicie el grupo de recursos de clúster Host de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="5038f-159">In a failover cluster scenario, when a failover is taking place, the MSMQ cluster resource group needs to be restarted before restarting the BizTalk Host cluster resource group.</span></span> <span data-ttu-id="5038f-160">Si se produce un error al hacerlo, puede que se deshabiliten las ubicaciones de recepción de MSMQ.</span><span class="sxs-lookup"><span data-stu-id="5038f-160">If you fail to do so, the MSMQ receive locations may be disabled.</span></span> <span data-ttu-id="5038f-161">Para solucionar este problema, puede hacer que el grupo de recursos de clúster BizTalk Host dependa del grupo de recursos de clúster de MSMQ para asegurarse de que el grupo de recursos de clúster MSMQ se inicie antes que el grupo de recursos de clúster BizTalk Host.</span><span class="sxs-lookup"><span data-stu-id="5038f-161">To work around this issue, you can make the BizTalk Host cluster resource group dependent on the MSMQ cluster resource group to ensure that the MSMQ cluster resource group starts before the BizTalk Host cluster resource group.</span></span> <span data-ttu-id="5038f-162">De forma alternativa, puede reiniciar el grupo de recursos de clúster BizTalk Host para solucionar este problema.</span><span class="sxs-lookup"><span data-stu-id="5038f-162">Alternatively, you can restart the BizTalk Host cluster resource group to work around this issue.</span></span>  
  
## <a name="you-receive-an-error-when-sending-messages-to-a-wcf-service-that-uses-wsfederationhttpbinding-in-the-endpoint"></a><span data-ttu-id="5038f-163">Recibe un error al enviar mensajes a un Servicio WCF que use wsFederationHttpBinding en el extremo.</span><span class="sxs-lookup"><span data-stu-id="5038f-163">You receive an error when sending messages to a WCF service that uses wsFederationHttpBinding in the endpoint</span></span>  
 <span data-ttu-id="5038f-164">Recibe un error parecido al siguiente:</span><span class="sxs-lookup"><span data-stu-id="5038f-164">You receive an error similar to the following:</span></span>  
  
```  
The adapter failed to transmit message going to send port "MySendPort" with URL "http://localohost/MywsFedHttp". It will be retransmitted after the retry interval specified for this Send Port. Details:"The channel is configured to use interactive initializer 'System.ServiceModel.Security.InfocardInteractiveChannelInitializer', but the channel was Opened without calling DisplayInitializationUI.  Call DisplayInitializationUI before calling Open or other methods on this channel.".  
```  
  
 <span data-ttu-id="5038f-165">Este comportamiento es así por diseño.</span><span class="sxs-lookup"><span data-stu-id="5038f-165">This behavior is by design.</span></span> <span data-ttu-id="5038f-166">Adaptadores de WCF no pueden enviar mensajes a los servicios WCF que usan **wsFederationHttpBinding** en sus extremos.</span><span class="sxs-lookup"><span data-stu-id="5038f-166">WCF adapters cannot send messages to the WCF services that are using **wsFederationHttpBinding** in their endpoints.</span></span>  
  
## <a name="the-biztalk-wcf-service-consuming-wizard-does-not-enable-you-to-select-message-types-or-port-types-from-the-wsdl"></a><span data-ttu-id="5038f-167">El Asistente para consumición del Servicio WCF de BizTalk no permite seleccionar tipos de mensajes o tipos de puertos desde WSDL.</span><span class="sxs-lookup"><span data-stu-id="5038f-167">The BizTalk WCF Service Consuming Wizard does not enable you to select message types or port types from the WSDL</span></span>  
 <span data-ttu-id="5038f-168">El Asistente para consumición del Servicio WCF de BizTalk no permite seleccionar tipos de mensajes o tipos de puertos desde WSDL al importar los servicios WCF.</span><span class="sxs-lookup"><span data-stu-id="5038f-168">The BizTalk WCF Service Consuming Wizard does not enable you to select message types or port types from the WSDL when importing the WCF services.</span></span> <span data-ttu-id="5038f-169">Para solucionar esta limitación, puede usar el siguiente código para obtener los esquemas y, a continuación, agregar los esquemas deseados a sus proyectos de BizTalk:</span><span class="sxs-lookup"><span data-stu-id="5038f-169">To work around this limitation, you can use the following code to obtain the schemas and then add the desired schemas to your BizTalk projects:</span></span>  
  
```  
svcutil.exe /t:metadata http://service/metadataendpoint  
```  
  
## <a name="the-biztalk-wcf-service-consuming-wizard-does-not-allow-the-combination-of-one-way-and-request-response-operations"></a><span data-ttu-id="5038f-170">El Asistente para consumición del Servicio WCF de BizTalk no permite la combinación de operaciones de petición-respuesta y unidireccionales.</span><span class="sxs-lookup"><span data-stu-id="5038f-170">The BizTalk WCF Service Consuming Wizard does not allow the combination of one-way and request-response operations</span></span>  
 <span data-ttu-id="5038f-171">El Asistente para consumición del Servicio WCF de BizTalk no permite importar los tipos de puerto que tengan una combinación de operaciones de petición-respuesta y unidireccionales.</span><span class="sxs-lookup"><span data-stu-id="5038f-171">The BizTalk WCF Service Consuming Wizard does not allow you to import the port types that have a combination of one-way and request-response operations.</span></span> <span data-ttu-id="5038f-172">Para solucionar esto, puede usar la herramienta de utilidad de metadatos del modelo de servicio para generar los tipos de puerto.</span><span class="sxs-lookup"><span data-stu-id="5038f-172">To work around this, you can use the ServiceModel Metadata Utility Tool to generate the port types.</span></span>  
  
## <a name="the-biztalk-wcf-service-consuming-wizard-does-not-allow-you-to-set-certificate-credentials-when-retrieving-the-wsdl"></a><span data-ttu-id="5038f-173">El Asistente para consumición del Servicio WCF de BizTalk no permite establecer credenciales al recuperar el WSDL.</span><span class="sxs-lookup"><span data-stu-id="5038f-173">The BizTalk WCF Service Consuming Wizard does not allow you to set certificate credentials when retrieving the WSDL</span></span>  
 <span data-ttu-id="5038f-174">El Asistente para consumición del Servicio WCF de BizTalk no permite establecer credenciales de certificado al recuperar el WSDL.</span><span class="sxs-lookup"><span data-stu-id="5038f-174">The BizTalk WCF Service Consuming Wizard does not allow you to set certificate credentials when retrieving the WSDL.</span></span> <span data-ttu-id="5038f-175">Para resolver este problema, puede usar la herramienta de utilidad de metadatos de ServiceModel para generar el WSDL y XSD archivos desde los servicios WCF que se va a utilizar con las credenciales de certificado configurado en el archivo svcutil.exe.config y, a continuación, importación en el servicio de WCF de BizTalk Asistente para consumición eligiendo **archivos de metadatos (WSDL y XSD)** opción en el **origen de metadatos** página.</span><span class="sxs-lookup"><span data-stu-id="5038f-175">To work around this, you can use the ServiceModel Metadata Utility Tool to generate the WSDL and XSD files from the WCF services you wish to consume with the certificate credentials set in the svcutil.exe.config file, and then import them into the BizTalk WCF Service Consuming Wizard by choosing **Metadata Files (WSDL and XSD)** option in the **Metadata source** page.</span></span>  
  
## <a name="wcf-adapters-do-not-support-one-way-operations"></a><span data-ttu-id="5038f-176">Los adaptadores de WCF no admiten operaciones unidireccionales.</span><span class="sxs-lookup"><span data-stu-id="5038f-176">WCF adapters do not support one-way operations</span></span>  
 <span data-ttu-id="5038f-177">Recibirá un mensaje de error similar al siguiente al consumir servicios WCF publicados con los adaptadores de WCF (excepto el adaptador de recepción WCF-netmsmq) si la **IsOneWay** propiedad está establecida en **true**en el cliente.</span><span class="sxs-lookup"><span data-stu-id="5038f-177">You will receive an error message similar to the following when consuming WCF services published with the WCF adapters (except for the WCF-NetMsmq receive adapter) if the **IsOneWay** property is set to **true** at client side.</span></span> <span data-ttu-id="5038f-178">Esto es porque el **System.ServiceModel.OperationContractAttribute.IsOneWay** propiedad de los servicios WCF publicados con los adaptadores de WCF (excepto el adaptador de recepción de los servicios publicados con WCF-NetMsmq) está establecida en **false** incluso para ubicaciones de recepción la unidireccionales.</span><span class="sxs-lookup"><span data-stu-id="5038f-178">This is because the **System.ServiceModel.OperationContractAttribute.IsOneWay** property of WCF services published with the WCF adapters (except for services published with the WCF-NetMsmq receive adapter) is set to **false** even for the one-way receive locations.</span></span>  
  
```  
The channel received an unexpected input message while closing. Your Channel.Close() calls are not synchronized.  
```  
  
 <span data-ttu-id="5038f-179">Recibirá un mensaje de error similar al siguiente al consumir los servicios WCF especificados con la **IsOneWay** propiedad establecida en **true**.</span><span class="sxs-lookup"><span data-stu-id="5038f-179">You will receive an error message similar to the following when consuming the WCF services specified with the **IsOneWay** property set to **true**.</span></span> <span data-ttu-id="5038f-180">Los mensajes que envíe desde [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] se suspenderán como reanudables.</span><span class="sxs-lookup"><span data-stu-id="5038f-180">The messages you sent from [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will be suspended and resumable.</span></span>  
  
```  
The request operation at net.tcp://localhost:8088/MyService/tcp did not receive a reply within timeout 00:01:00.  
```  
  
## <a name="a-memory-leak-may-occur-when-sending-messages-to-non-transactional-msmq-queues-using-wcf-netmsmq-binding"></a><span data-ttu-id="5038f-181">Al enviar mensajes a colas MSMQ no transaccionales con el enlace WCF-NetMsmq, puede producirse una pérdida de memoria.</span><span class="sxs-lookup"><span data-stu-id="5038f-181">A memory leak may occur when sending messages to non-transactional MSMQ queues using WCF-NetMsmq binding</span></span>  
 <span data-ttu-id="5038f-182">Al enviar mensajes a colas MSMQ no transaccionales con el enlace WCF-NetMsmq, puede producirse una pérdida de memoria en el servicio BizTalk NT.</span><span class="sxs-lookup"><span data-stu-id="5038f-182">A memory leak may occur in the BizTalk NT service when sending messages to non-transactional MSMQ queues using WCF-NetMsmq binding.</span></span> <span data-ttu-id="5038f-183">Esto puede producirse al enviar mensajes a una cola MSMQ no transaccional con el transporte WCF-NetMsmq o al enviar mensajes a una cola MSMQ no transaccional mediante el uso de netMsmqBinding con el transporte WCF-Custom.</span><span class="sxs-lookup"><span data-stu-id="5038f-183">This may occur when you send messages to a non-transactional MSMQ queue using WCF-NetMsmq transport or when you send messages to a non-transactional MSMQ queue using netMsmqBinding with WCF-Custom transport.</span></span>  
  
 <span data-ttu-id="5038f-184">Para resolver el problema, debe instalar la revisión de .NET Framework 3.0 descrita en el artículo de Knowledge Base 936512 en [http://go.microsoft.com/fwlink/?LinkId=92962](http://go.microsoft.com/fwlink/?LinkId=92962).</span><span class="sxs-lookup"><span data-stu-id="5038f-184">To resolve the issue, you must install .NET Framework 3.0 hotfix described in the KB article 936512 at [http://go.microsoft.com/fwlink/?LinkId=92962](http://go.microsoft.com/fwlink/?LinkId=92962).</span></span> <span data-ttu-id="5038f-185">La revisión no requiere un reinicio del sistema, pero es necesario reiniciar el servicio BizTalk NT que aloja los puertos de envío que usan el enlace WCF-NetMsmq.</span><span class="sxs-lookup"><span data-stu-id="5038f-185">The hotfix does not require a system reboot but it is necessary to restart the BizTalk NT service which hosts the send ports that using WCF-NetMsmq binding.</span></span>  
  
## <a name="you-may-receive-exception-when-communicating-with-apache-web-servers-using-wcf-basichttp-adapter"></a><span data-ttu-id="5038f-186">Puede que reciba una excepción al comunicarse con servidores Web Apache con el adaptador de WCF-BasicHttp.</span><span class="sxs-lookup"><span data-stu-id="5038f-186">You may receive exception when communicating with Apache Web servers using WCF-BasicHttp adapter</span></span>  
 <span data-ttu-id="5038f-187">Al usar el adaptador de WCF-BasicHttp con la seguridad de transporte para comunicarse con un servidor Web Apache, puede que reciba excepciones similares a las siguientes:</span><span class="sxs-lookup"><span data-stu-id="5038f-187">When you use WCF-BasicHttp adapter with transport security to communicate with an Apache Web server, you may receive the exception similar to the followings:</span></span>  
  
```  
System.Net.WebException: The underlying connection was closed: An unexpected error occurred on a send.  
System.IO.IOException: Unable to write data to the transport connection: An established connection was aborted by the software in your host machine. System.Net.Sockets.SocketException: An established connection was aborted by the software in your host machine  
```  
  
 <span data-ttu-id="5038f-188">Para solucionar este problema, debe usar el adaptador de WCF-Custom en lugar del adaptador de WCF-BasicHttp para comunicarse con los servidores Web Apache de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="5038f-188">To work around this, you need to use WCF-Custom adapter instead of WCF-BasicHttp adapter to communicate with the Apache Web servers as following:</span></span>  
  
1.  <span data-ttu-id="5038f-189">Cree un puerto de envío y establezca el tipo de transporte en **WCF-Custom**.</span><span class="sxs-lookup"><span data-stu-id="5038f-189">Create a send port and set the transport type to **WCF-Custom**.</span></span>  
  
2.  <span data-ttu-id="5038f-190">En el **propiedades de transporte de WCF-Custom** cuadro de diálogo la **enlace** ficha, seleccione **customBinding** desde el **BindingType** lista desplegable.</span><span class="sxs-lookup"><span data-stu-id="5038f-190">In the **WCF-Custom Transport Properties** dialog box, on the **Binding** tab, select **customBinding** from the **Binding Type** drop-down list.</span></span>  
  
3.  <span data-ttu-id="5038f-191">En **CustomeBindingElement**, haga clic en **httpTransport**y, a continuación, haga clic en **quitar extensión**.</span><span class="sxs-lookup"><span data-stu-id="5038f-191">Under **CustomeBindingElement**, right-click **httpTransport**, and then click **Remove extension**.</span></span>  
  
4.  <span data-ttu-id="5038f-192">Haga clic en **CustomeBindingElement**y, a continuación, haga clic en **Agregar extensión**.</span><span class="sxs-lookup"><span data-stu-id="5038f-192">Right-click **CustomeBindingElement**, and then click **Add extension**.</span></span>  
  
5.  <span data-ttu-id="5038f-193">En el **Seleccionar extensión de elemento de enlace** cuadro de diálogo, seleccione **httpTransport** y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="5038f-193">In the **Select Binding Element Extension** dialog box, select **httpTransport** and then click **OK**.</span></span>  
  
6.  <span data-ttu-id="5038f-194">Haga clic en **httpTransport**y, a continuación, en la **configuración** panel, establezca el valor de **keepAliveEnabled** a **False**.</span><span class="sxs-lookup"><span data-stu-id="5038f-194">Click **httpTransport**, and then in the **Configuration** pane, set the value of **keepAliveEnabled** to **False**.</span></span>  
  
7.  <span data-ttu-id="5038f-195">Haga clic en **textMessageEncoding**y, a continuación, en la **configuración** panel, establezca el valor de **messageVersion** a `Soap11WSAddressing10`.</span><span class="sxs-lookup"><span data-stu-id="5038f-195">Click **textMessageEncoding**, and then in the **Configuration** pane, set the value of **messageVersion** to `Soap11WSAddressing10`.</span></span>  
  
8.  <span data-ttu-id="5038f-196">Puede que tenga que configurar propiedades adicionales según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="5038f-196">You may need to configure additional properties as needed.</span></span>  
  
## <a name="biztalk-server-does-not-work-with-wcf-clients-that-using-clientviabehavior-for-multiple-hop-conversations"></a><span data-ttu-id="5038f-197">BizTalk Server no funciona con clientes de WCF que usen ClientViaBehavior para conversaciones de varios saltos.</span><span class="sxs-lookup"><span data-stu-id="5038f-197">BizTalk Server does not work with WCF clients that using ClientViaBehavior for multiple-hop conversations</span></span>  
 <span data-ttu-id="5038f-198">Los clientes de WCF usan ClientViaBehavior cuando el destino de red inmediato no sea el procesador intencionado del mensaje para habilitar conversaciones de varios saltos cuando la aplicación que realiza la llamada no tiene por qué saber el destino final.</span><span class="sxs-lookup"><span data-stu-id="5038f-198">WCF clients use ClientViaBehavior when the immediate network destination is not the intended processor of the message to enable multiple-hop conversations when the calling application does not necessarily know the ultimate destination.</span></span> <span data-ttu-id="5038f-199">Si especifica ClientViaBehavior y establece la dirección de destino en un servicio remoto en el que [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] actuará como intermediario, recibirá un mensaje de error parecido al siguiente:</span><span class="sxs-lookup"><span data-stu-id="5038f-199">If you specify the ClientViaBehavior and set the To address to a remote service where [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will be acting as an intermediary, you will receive the error message similar to the following:</span></span>  
  
```  
The message with To 'net.tcp://localhost:5555/test.svc' cannot be processed at the receiver, due to an AddressFilter mismatch at the EndpointDispatcher. Check that the sender and receiver's EndpointAddresses agree  
```
---
title: La actividad económica (BAM) de supervisión | Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- BAM, tools
- utilities, Tracking Profile Deployment Utility
- BAM, deployment process
- BAM
- BAM, presentation layers
- BAM, Tracking Profile Deployment utility
- BAM, about BAM
- BAM, data storage
- BAM Management utility
- Tracking Profile Deployment utility
- BAM, runtime process
- BAM, design time
- BAM, data insertion
- BAM, data consumption
- BAM, BAM Management utility
- BAM, processing
ms.assetid: a8ad48b1-6891-4bbb-b125-27d224e49293
caps.latest.revision: 17
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 258294a8a51e6f8e80e360668123e522acf6ff15
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/27/2018
ms.locfileid: "36972309"
---
# <a name="business-activity-monitoring-bam"></a><span data-ttu-id="dc4d8-102">Supervisión de la actividad económica (SAE)</span><span class="sxs-lookup"><span data-stu-id="dc4d8-102">Business Activity Monitoring (BAM)</span></span>
<span data-ttu-id="dc4d8-103">El diagrama siguiente muestra la arquitectura de la característica Supervisión de la actividad económica (BAM).</span><span class="sxs-lookup"><span data-stu-id="dc4d8-103">The following diagram illustrates the architecture for the Business Activity Monitoring (BAM) feature.</span></span>  
  
 <span data-ttu-id="dc4d8-104">![](../core/media/architecture-bam-01.gif "architecture_bam_01")</span><span class="sxs-lookup"><span data-stu-id="dc4d8-104">![](../core/media/architecture-bam-01.gif "architecture_bam_01")</span></span>  
  
## <a name="tools"></a><span data-ttu-id="dc4d8-105">Herramientas</span><span class="sxs-lookup"><span data-stu-id="dc4d8-105">Tools</span></span>  
 <span data-ttu-id="dc4d8-106">Puede usar las siguientes herramientas para diseñar, desarrollar e implementar soluciones de BizTalk que se integren con BAM.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-106">You can use the following tools to design, develop, and deploy BizTalk solutions that integrate with BAM.</span></span>  
  
-   <span data-ttu-id="dc4d8-107">**Microsoft Excel**.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-107">**Microsoft Excel**.</span></span> <span data-ttu-id="dc4d8-108">El complemento BAM para Excel proporciona una interfaz de usuario que guía a los analistas de negocios durante la creación de actividades y vistas.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-108">The BAM Add-In for Excel provides a user interface that guides business analysts during the creation of Activities and Views.</span></span> <span data-ttu-id="dc4d8-109">Excel sirve como herramienta de diseño para los analistas de negocios y como herramienta de consumo de datos para los usuarios empresariales.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-109">Excel serves as both a design tool for business analysts and a data consumption tool for business users.</span></span> <span data-ttu-id="dc4d8-110">Para obtener más información sobre el complemento BAM para Excel, vea [requisitos para usar el complemento BAM para Excel](../core/requirements-for-using-the-bam-add-in-for-excel.md).</span><span class="sxs-lookup"><span data-stu-id="dc4d8-110">For more information about the BAM Add-In for Excel, see [Requirements for Using the BAM Add-In for Excel](../core/requirements-for-using-the-bam-add-in-for-excel.md).</span></span>  
  
-   <span data-ttu-id="dc4d8-111">**Utilidad de administración de BAM**.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-111">**BAM Management Utility**.</span></span> <span data-ttu-id="dc4d8-112">La utilidad de administración de BAM es una herramienta de implementación que permite implementar en la empresa las definiciones de BAM creadas en Excel.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-112">The BAM Management Utility is a deployment tool that allows BAM definitions created in Excel to be deployed into the enterprise.</span></span> <span data-ttu-id="dc4d8-113">Esta utilidad crea las bases de datos de SQL Server, los cubos de Analysis Services, las bases de datos de Servicios de notificación de SQL y las tareas DTS o SSIS necesarias (según la versión de SQL Server instalada).</span><span class="sxs-lookup"><span data-stu-id="dc4d8-113">The BAM Management Utility creates the necessary SQL Server databases, Analysis Services cubes, SQL Notification Services databases, and DTS or SSIS tasks (depending on which version of SQL Server is installed).</span></span> <span data-ttu-id="dc4d8-114">Para obtener más información acerca del Administrador de BAM, consulte [utilidad de administración de BAM](../core/bam-management-utility.md).</span><span class="sxs-lookup"><span data-stu-id="dc4d8-114">For more information about the BAM Manager, see [BAM Management Utility](../core/bam-management-utility.md).</span></span>  
  
-   <span data-ttu-id="dc4d8-115">**Editor de perfiles de seguimiento**.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-115">**Tracking Profile Editor**.</span></span> <span data-ttu-id="dc4d8-116">El Editor de perfiles de seguimiento permite a los programadores de BizTalk asignar los elementos de datos definidos por los analistas de negocios en la implementación de BizTalk, incluidas las orquestaciones y la mensajería.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-116">The Tracking Profile Editor enables BizTalk developers to map the data elements defined by business analysts into the BizTalk implementation including Orchestrations and Messaging.</span></span> <span data-ttu-id="dc4d8-117">Para obtener más información sobre el Editor de perfiles de seguimiento, vea [Editor de perfiles de seguimiento](../core/tracking-profile-editor.md).</span><span class="sxs-lookup"><span data-stu-id="dc4d8-117">For more information about the Tracking Profile Editor, see [Tracking Profile Editor](../core/tracking-profile-editor.md).</span></span>  
  
-   <span data-ttu-id="dc4d8-118">**Utilidad de implementación de perfil de seguimiento**.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-118">**Tracking Profile Deployment Utility**.</span></span> <span data-ttu-id="dc4d8-119">La utilidad de implementación de perfiles de seguimiento permite a los profesionales de TI implementar perfiles de seguimiento nuevos y actualizados en la infraestructura de BAM.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-119">The Tracking Profile Deployment Utility allows IT professionals to deploy new and updated tracking profiles to the BAM infrastructure.</span></span> <span data-ttu-id="dc4d8-120">Para obtener más información acerca de la herramienta de implementación de perfiles de seguimiento, vea [utilidad de implementación de perfil de seguimiento](../core/tracking-profile-deployment-utility.md).</span><span class="sxs-lookup"><span data-stu-id="dc4d8-120">For more information about the Tracking Profile Deploy tool, see [Tracking Profile Deployment Utility](../core/tracking-profile-deployment-utility.md).</span></span>  
  
## <a name="presentation"></a><span data-ttu-id="dc4d8-121">Presentación</span><span class="sxs-lookup"><span data-stu-id="dc4d8-121">Presentation</span></span>  
 <span data-ttu-id="dc4d8-122">La capa de presentación consta de lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="dc4d8-122">The presentation layer consists of the following:</span></span>  
  
- <span data-ttu-id="dc4d8-123">**Portal de BAM**.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-123">**BAM Portal**.</span></span> <span data-ttu-id="dc4d8-124">El portal de BAM en Microsoft [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] proporciona visibilidad en tiempo real, to-end a un proceso empresarial.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-124">The BAM portal in Microsoft [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] provides real-time, end-to-end visibility into a business process.</span></span> <span data-ttu-id="dc4d8-125">Es una característica basada en web que consta de una colección de páginas ASP .NET.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-125">It is a Web-based feature that consists of a collection of ASP.NET  pages.</span></span> <span data-ttu-id="dc4d8-126">Puede personalizar BAM para mejorar el rendimiento y la experiencia de los usuarios.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-126">You can customize BAM to enhance the performance and experience for your users.</span></span> <span data-ttu-id="dc4d8-127">Para obtener más información sobre el Portal de BAM, consulte [Portal de BAM](../core/bam-portal.md).</span><span class="sxs-lookup"><span data-stu-id="dc4d8-127">For more information about the BAM Portal, see [BAM Portal](../core/bam-portal.md).</span></span>  
  
- <span data-ttu-id="dc4d8-128">**Microsoft Excel**.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-128">**Microsoft Excel**.</span></span> <span data-ttu-id="dc4d8-129">El complemento BAM para Excel proporciona una interfaz de usuario que guía a los analistas de negocios durante la creación de actividades y vistas.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-129">The BAM Add-In for Excel provides a user interface that guides business analysts during the creation of Activities and Views.</span></span> <span data-ttu-id="dc4d8-130">Excel sirve como herramienta de diseño para los analistas de negocios y como herramienta de consumo de datos para los usuarios empresariales.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-130">Excel serves as both a design tool for business analysts and a data consumption tool for business users.</span></span> <span data-ttu-id="dc4d8-131">Para obtener más información sobre el complemento BAM para Excel, vea [requisitos para usar el complemento BAM para Excel](../core/requirements-for-using-the-bam-add-in-for-excel.md).</span><span class="sxs-lookup"><span data-stu-id="dc4d8-131">For more information about the BAM Add-In for Excel, see [Requirements for Using the BAM Add-In for Excel](../core/requirements-for-using-the-bam-add-in-for-excel.md).</span></span>  
  
- <span data-ttu-id="dc4d8-132">**Interfaz de usuario personalizada**.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-132">**Custom User Interface**.</span></span> <span data-ttu-id="dc4d8-133">Los ISV y programadores pueden crear aplicaciones personalizadas que muestren los datos de BAM.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-133">ISV’s and developers can create custom applications that display BAM data</span></span>  
  
## <a name="processing"></a><span data-ttu-id="dc4d8-134">Procesamiento</span><span class="sxs-lookup"><span data-stu-id="dc4d8-134">Processing</span></span>  
 <span data-ttu-id="dc4d8-135">La capa de procesamiento consta de lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="dc4d8-135">The processing layer consists of the following:</span></span>  
  
- <span data-ttu-id="dc4d8-136">**Servicio Web de administración de BAM**.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-136">**BAM Management Web Service**.</span></span> <span data-ttu-id="dc4d8-137">La aplicación del portal de BAM usa este servicio web para comunicarse con las tablas de importación principal (PIT) de BAM.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-137">This Web service is used by the BAM Portal application to communicate with the BAM Primary Import Tables (PIT).</span></span> <span data-ttu-id="dc4d8-138">La comunicación con la base de datos se realiza a través de credenciales suplantadas almacenadas en el Registro que se crean durante la configuración.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-138">The communication with the database is done using impersonated credentials stored in the registry which is created during configuration.</span></span> <span data-ttu-id="dc4d8-139">Los clientes personalizados pueden usar los métodos expuestos por este servicio web para obtener vistas y los detalles correspondientes, además de actividades relacionadas y diseños de tabla dinámica para cualquier usuario.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-139">Methods exposed by this Web service can be used by custom clients to get views and their details, related activities, and pivot table layouts for any user.</span></span> <span data-ttu-id="dc4d8-140">Los métodos también se pueden usar para administrar alertas en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-140">They can also be used to manage alerts in the database.</span></span>  
  
- <span data-ttu-id="dc4d8-141">**Bus de eventos** .</span><span class="sxs-lookup"><span data-stu-id="dc4d8-141">**Event Bus** .</span></span> <span data-ttu-id="dc4d8-142">El servicio de bus de eventos BAM procesa los datos de seguimiento (secuencias) almacenados en una base de datos de origen y los guarda con formato de tabla de consulta en la base de datos de destino.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-142">The BAM Event Bus Service processes tracking data (streams) stored in a source database and persists that data in a query table format in the destination database.</span></span>  
  
- <span data-ttu-id="dc4d8-143">**Servicios de notificación SQL**.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-143">**SQL Notification Services**.</span></span> <span data-ttu-id="dc4d8-144">Los servicios de notificación SQL evalúan las alertas de instancias y agregados de BAM que define el usuario empresarial.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-144">SQL Notification Services evaluates the Instance and Aggregate BAM alerts that are defined by the business user.</span></span>  
  
  <span data-ttu-id="dc4d8-145">El diagrama siguiente muestra los procesos físicos subyacentes de la arquitectura de BAM.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-145">The following diagram illustrates the underlying physical processes for the BAM architecture.</span></span>  
  
  <span data-ttu-id="dc4d8-146">![](../core/media/architecture-bam-02.gif "architecture_bam_02")</span><span class="sxs-lookup"><span data-stu-id="dc4d8-146">![](../core/media/architecture-bam-02.gif "architecture_bam_02")</span></span>  
  
## <a name="design-time-experience"></a><span data-ttu-id="dc4d8-147">Experiencia en tiempo de diseño</span><span class="sxs-lookup"><span data-stu-id="dc4d8-147">Design time experience</span></span>  
 <span data-ttu-id="dc4d8-148">El diagrama siguiente muestra la experiencia en tiempo de diseño.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-148">The following diagram illustrates the design time experience.</span></span>  
  
 <span data-ttu-id="dc4d8-149">![](../core/media/architecture-bam-03.gif "architecture_bam_03")</span><span class="sxs-lookup"><span data-stu-id="dc4d8-149">![](../core/media/architecture-bam-03.gif "architecture_bam_03")</span></span>  
  
 <span data-ttu-id="dc4d8-150">Los pasos siguientes describen la secuencia que se muestra en la ilustración de arriba.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-150">The following steps describe the sequence depicted in the illustration above.</span></span>  
  
1.  <span data-ttu-id="dc4d8-151">El Editor de perfiles de seguimiento considera que BizTalk Server se ha configurado, que ya se ha implementado al menos una definición de BAM (con BM.exe) y que se ha creado la infraestructura, incluida la base de datos de importación principal.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-151">The Tracking Profile Editor assumes that BizTalk Server has been configured, that at least one BAM definition has already been deployed (using BM.exe), and that the infrastructure, including the Primary Import Database has been created.</span></span> <span data-ttu-id="dc4d8-152">El Editor de perfiles de seguimiento utiliza una clave del Registro establecida durante la configuración de BizTalk para determinar la ubicación en la que se encuentra la base de datos de administración.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-152">The Tracking Profile Editor uses a registry key that is set during BizTalk configuration to determine where the Management database is located.</span></span>  
  
    1.  <span data-ttu-id="dc4d8-153">BAM enumera las actividades de la base de datos de importación principal cuando se detecta.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-153">BAM enumerates the activities within the Primary Import Database once it is discovered.</span></span> <span data-ttu-id="dc4d8-154">Los programadores de BizTalk seleccionan las actividades implementadas que se extraen de la base de datos de importación principal de BAM.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-154">BizTalk developers select the deployed activities which get pulled from the BAM Primary Import database.</span></span>  
  
    2.  <span data-ttu-id="dc4d8-155">El programador de BizTalk asigna éstas a una implementación física. Para ello, examina los ensamblados implementados que se recuperan de la base de datos de administración de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-155">The BizTalk developer maps this to a physical implementation by browsing the deployed assemblies retrieved from the BizTalk Management database.</span></span>  
  
    3.  <span data-ttu-id="dc4d8-156">Una vez que el programador las ha asignado visualmente a los artefactos de BizTalk, se envían metadatos al tiempo de ejecución de BizTalk Server para recopilar y almacenar los datos.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-156">Once the developer has visually mapped this to the BizTalk artifacts, metadata is submitted to the BizTalk Server runtime to collect and store the data.</span></span> <span data-ttu-id="dc4d8-157">Esto se realiza mediante anotaciones (para la información de mensajería usada para descodificar los datos recopilados) y el perfil de seguimiento (utilizado para recuperar los datos de tiempo de ejecución).</span><span class="sxs-lookup"><span data-stu-id="dc4d8-157">This is done via annotations (for messaging information used to decode the collected data) and the tracking profile (used to retrieve the runtime data).</span></span>  
  
2.  <span data-ttu-id="dc4d8-158">Microsoft Excel se usa como herramienta en tiempo de diseño y como herramienta de consumo de datos o de presentación.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-158">Microsoft Excel is used as both a design time tool and a data consumption or presentation tool.</span></span> <span data-ttu-id="dc4d8-159">La experiencia de Excel en tiempo de diseño permite a los usuarios crear una definición de BAM mediante la creación de actividades y vistas de BAM.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-159">The design time Excel experience allows users to construct a BAM definition by creating BAM Activities and Views.</span></span> <span data-ttu-id="dc4d8-160">También permite crear los controles y gráficos dinámicos que se muestran posteriormente en el portal de BAM.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-160">It also allows for the creation of the pivot controls and graphs that are ultimately displayed in the BAM portal.</span></span>  
  
## <a name="deployment"></a><span data-ttu-id="dc4d8-161">Implementación</span><span class="sxs-lookup"><span data-stu-id="dc4d8-161">Deployment</span></span>  
 <span data-ttu-id="dc4d8-162">Hay dos categorías de implementación:</span><span class="sxs-lookup"><span data-stu-id="dc4d8-162">There are two categories of deployment</span></span>  
  
- <span data-ttu-id="dc4d8-163">Crear la infraestructura dinámica</span><span class="sxs-lookup"><span data-stu-id="dc4d8-163">Building out the dynamic infrastructure</span></span>  
  
- <span data-ttu-id="dc4d8-164">Instrumentar el tiempo de ejecución para recopilar datos</span><span class="sxs-lookup"><span data-stu-id="dc4d8-164">Instrumenting the runtime to collect data.</span></span>  
  
  <span data-ttu-id="dc4d8-165">El siguiente diagrama ilustra la implementación de BAM.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-165">The following diagram illustrates BAM deployment.</span></span>  
  
  <span data-ttu-id="dc4d8-166">![](../core/media/architecture-bam-04.gif "architecture_bam_04")</span><span class="sxs-lookup"><span data-stu-id="dc4d8-166">![](../core/media/architecture-bam-04.gif "architecture_bam_04")</span></span>  
  
  <span data-ttu-id="dc4d8-167">Los pasos siguientes describen la secuencia que se muestra en la ilustración de arriba.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-167">The following steps describe the sequence depicted in the illustration above.</span></span>  
  
1.  <span data-ttu-id="dc4d8-168">Se utiliza la utilidad de administración de BAM para crear la infraestructura dinámica.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-168">The BAM Management Utility is used to build out the dynamic infrastructure.</span></span> <span data-ttu-id="dc4d8-169">Mediante la definición de BAM o un libro Excel en tiempo de diseño, más el archivo XML de configuración de BAM, la utilidad de administración de BAM crea todas las bases de datos necesarias y las tareas DTS o SSIS correspondientes que el sistema necesita para el funcionamiento.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-169">Using the BAM definition or a design time Excel workbook plus the BAM Configuration XML file, the BAM Management Utility builds all the necessary databases and the corresponding DTS or SSIS tasks necessary for the system to operate.</span></span>  
  
    1.  <span data-ttu-id="dc4d8-170">Se crean la base de datos de importación principal de BAM y todos los procedimientos almacenados, desencadenadores y tareas DTS o SSIS complementarios.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-170">The BAM Primary Import database and all the supporting stored procedures, triggers, and DTS or SSIS tasks are constructed.</span></span>  
  
    2.  <span data-ttu-id="dc4d8-171">Se define la base de datos de archivo de BAM, pero no se crea hasta que se ejecuta la tarea DTS o SSI de archivo.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-171">The BAM Archive database is defined, but not created, until the Archiving DTS or SSIS task is executed.</span></span>  
  
    3.  <span data-ttu-id="dc4d8-172">Se establece la base de datos de esquema de estrella de BAM si se definieron agregaciones OLAP de BAM.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-172">The BAM Star Schema database if BAM OLAP Aggregations were defined.</span></span> <span data-ttu-id="dc4d8-173">Puede determinar si se han definido agregaciones si el **agregación en tiempo Real** botón en la hoja de cálculo de Excel está deshabilitado o **si CreateOlapCube** está establecido en **true** en la definición de BAM y el archivo de configuración XML tiene una unidad de implementación para **AnalysisDatabase**.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-173">You can determine if aggregations have been defined if the **Real Time Aggregation** button in the Excel spreadsheet is disabled or the **CreateOlapCube** is set to **true** in the BAM Definition and the Configuration XML file has a Deployment Unit for **AnalysisDatabase**.</span></span>  
  
    4.  <span data-ttu-id="dc4d8-174">La definición de BAM y el archivo XML de configuración tienen que tener definida una agregación que no sea en tiempo real (ATR) para que se cree un cubo OLAP de BAM.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-174">The BAM Definition and Configuration XML have to have an Aggregation defined that is not an RTA in order for a BAM OLAP cube to be created.</span></span>  
  
    5.  <span data-ttu-id="dc4d8-175">La vista seccionada del proceso del administrador de BAM muestra que se llama al proceso Servicios de notificación (nsontrol.exe) para crear las bases de datos de NS de SQL.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-175">Exploded view of the BAM Manager process shows that the Notification Services process (nscontrol.exe) is called to create the SQL NS databases.</span></span>  
  
2.  <span data-ttu-id="dc4d8-176">La interfaz de usuario del Editor de perfiles de seguimiento tiene un comando de implementación que instrumenta el tiempo de ejecución para hacer un seguimiento y descodificar los datos de los sistemas en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-176">The Tracking Profile Editor UI has a deployment command which instruments the runtime to track and decode data from the runtime systems.</span></span> <span data-ttu-id="dc4d8-177">En este caso, inserta **anotaciones** en la base de datos de importación principal de BAM (si se extraen datos del sistema de mensajería).</span><span class="sxs-lookup"><span data-stu-id="dc4d8-177">In this case it pushes **annotations** into the BAM Primary Import database (if data is pulled from the messaging system).</span></span> <span data-ttu-id="dc4d8-178">Se inserta un perfil de seguimiento en la base de datos de administración de BizTalk que utiliza el tiempo de ejecución de BizTalk para determinar los datos que se van a publicar en el sistema de BAM.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-178">A tracking profile is inserted into the BizTalk Management database which is used by the BizTalk Runtime to determine what data to publish to the BAM system.</span></span>  
  
3.  <span data-ttu-id="dc4d8-179">La herramienta de línea de comandos de implementación de seguimiento de BizTalk permite publicar perfiles de seguimiento en la base de datos de importación principal y en la base de datos de administración de BAM, que es similar a lo que hace el Editor de perfiles de seguimiento; sin embargo, esta herramienta de línea de comandos no es compatible con funciones de asignación.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-179">The BizTalk Tracking Deployment command line tool allows Tracking Profiles to be published to the BAM Primary Import database and Management database, which is similar to what the Tracking Profile Editor does; however the command line tool does not allow mapping capabilities.</span></span>  
  
## <a name="data-consumption"></a><span data-ttu-id="dc4d8-180">Consumo de datos</span><span class="sxs-lookup"><span data-stu-id="dc4d8-180">Data Consumption</span></span>  
 <span data-ttu-id="dc4d8-181">Por consumo de datos se entiende el proceso en el que un usuario empresarial consume la información recopilada por la infraestructura de BAM.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-181">Data consumption refers to the process in which a business user consumes the information that the BAM infrastructure has collected.</span></span> <span data-ttu-id="dc4d8-182">En ese momento se considera que: 1) la definición de BAM se ha creado (define los datos que se van a recopilar y cómo verlos), 2) la definición de BAM se ha implementado (crea dinámicamente la infraestructura) y 3) la definición de BAM se ha asignado a la implementación física (define la ubicación en la que se recopilan los datos y, en algunos casos, escribe código para la inserción en el sistema).</span><span class="sxs-lookup"><span data-stu-id="dc4d8-182">It is assumed at this point, that the BAM definition has been created (defining what data to collect and how to view it), that the BAM definition has been deployed (dynamically creating the infrastructure), and that the BAM definition has been mapped to the physical implementation (defining where to collect the data, and in some cases writing code to push into the system).</span></span>  
  
 <span data-ttu-id="dc4d8-183">El diagrama siguiente ilustra el proceso de consumo de datos.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-183">The following diagram illustrates the process of data consumption.</span></span>  
  
 <span data-ttu-id="dc4d8-184">![](../core/media/architecture-bam-05.gif "architecture_bam_05")</span><span class="sxs-lookup"><span data-stu-id="dc4d8-184">![](../core/media/architecture-bam-05.gif "architecture_bam_05")</span></span>  
  
 <span data-ttu-id="dc4d8-185">Los pasos siguientes describen la secuencia que se muestra en la ilustración de arriba.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-185">The following steps describe the sequence depicted in the illustration above.</span></span>  
  
1.  <span data-ttu-id="dc4d8-186">El portal de BAM se divide en dos procesos: el proceso de Internet Explorer y el proceso del portal Web de BAM alojado en los Servicios de Internet Information Server.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-186">The BAM portal is split out into two processes, Internet Explorer and the BAM Web portal process hosted in Internet Information Services.</span></span>  
  
    1.  <span data-ttu-id="dc4d8-187">Internet Explorer usa el contexto de seguridad del usuario de negocio que se conecta al sitio web del Portal de BAM.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-187">Internet Explorer uses the security context of the business user connecting to the BAM Portal Web site.</span></span> <span data-ttu-id="dc4d8-188">El sitio web del Portal de BAM es una aplicación ASPX que usa el Servicio web de administración de BAM para recopilar información.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-188">The BAM Portal Web site is an ASPX application that uses the BAM Management Web Service to collect information.</span></span>  
  
    2.  <span data-ttu-id="dc4d8-189">El Portal de BAM llama al servicio Web de administración de BAM para recuperar información; por ejemplo, las actividades o vistas de BAM que el usuario empresarial concreto puede ver.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-189">The BAM Portal calls the BAM Management Web Service to retrieve information such as what BAM Activities/Views the particular business user can see.</span></span> <span data-ttu-id="dc4d8-190">Es importante que el Servicio web de administración de BAM pueda hacerse pasar por el usuario de negocio, por lo tanto, la implementación típica es que el Portal de BAM y el Servicio web se alojen en el mismo equipo.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-190">It is critical that the BAM Management Web Service is able to impersonate the business user, therefore, the typical deployment is the BAM Portal and the Web Service are hosted on the same machine</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="dc4d8-191">Si en la empresa se admite el uso de Kerberos y se configura Active Directory para utilizar las características de delegación, el portal y el servicio Web de BAM pueden estar en equipos diferentes.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-191">If your enterprise supports Kerberos and Active Directory is set up to support delegation, it is possible that the Portal and Web Service can be located on different machines.</span></span>  
  
    3.  <span data-ttu-id="dc4d8-192">El servicio Web llama a procedimientos almacenados en la base de datos de importación principal de BAM para realizar comprobaciones de seguridad y recuperar metadatos e información acerca de agregaciones en tiempo real de BAM.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-192">The Web Service calls stored procedures in the BAM Primary Import to perform security checks, retrieve metadata, and retrieve information about BAM Real Time Aggregations.</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="dc4d8-193">Actualmente, el Portal de BAM utiliza un servicio Web no documentado denominado el **servicio Web de consulta**.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-193">Currently the BAM Portal uses an undocumented Web Service called the **Query Web Service**.</span></span> <span data-ttu-id="dc4d8-194">Este servicio no es compatible y probablemente se deje de utilizar en la próxima versión.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-194">This is not supported and will most likely be deprecated in the next release.</span></span>  
  
    4.  <span data-ttu-id="dc4d8-195">Internet Explorer aloja Office Web Controls (OWC), que permite realizar conexiones directas a los cubos de Analysis Services de BAM.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-195">Internet Explorer hosts the Office Web Controls (OWC) which makes direct connections to the BAM Analysis Services cubes.</span></span>  
  
2.  <span data-ttu-id="dc4d8-196">Excel</span><span class="sxs-lookup"><span data-stu-id="dc4d8-196">Excel</span></span>  
  
## <a name="runtime"></a><span data-ttu-id="dc4d8-197">Tiempo de ejecución</span><span class="sxs-lookup"><span data-stu-id="dc4d8-197">Runtime</span></span>  
 <span data-ttu-id="dc4d8-198">Después de que la definición de BAM se haya definido, la infraestructura se haya creado y el programador haya instrumentado los sistemas necesarios para habilitar la visibilidad, los datos pueden empezar a circular por el sistema.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-198">After the BAM Definition has been defined, the infrastructure has been built out, and the developer has instrumented the necessary systems to enable visibility, data can begin flowing through the system.</span></span>  
  
### <a name="data-insertion"></a><span data-ttu-id="dc4d8-199">Inserción de datos</span><span class="sxs-lookup"><span data-stu-id="dc4d8-199">Data Insertion</span></span>  
 <span data-ttu-id="dc4d8-200">Una de las formas principales de permitir el flujo de datos en los sistemas de BAM es a través del Servicio de BizTalk (BTSNTSvc.exe).</span><span class="sxs-lookup"><span data-stu-id="dc4d8-200">One of the primary ways data flows into the BAM system is via the BizTalk Service (BTSNTSvc.exe).</span></span> <span data-ttu-id="dc4d8-201">La arquitectura del Servicio de BizTalk está diseñada de modo que puede contener subsistemas lógicos.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-201">The BizTalk Service is architected such that it can contain logical subsystems.</span></span>  
  
 <span data-ttu-id="dc4d8-202">En el diagrama siguiente se muestra este proceso.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-202">The following diagram illustrates this process.</span></span>  
  
 <span data-ttu-id="dc4d8-203">![](../core/media/architecture-bam-06.gif "architecture_bam_06")</span><span class="sxs-lookup"><span data-stu-id="dc4d8-203">![](../core/media/architecture-bam-06.gif "architecture_bam_06")</span></span>  
  
 <span data-ttu-id="dc4d8-204">Los pasos siguientes describen la secuencia que se muestra en la ilustración de arriba.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-204">The following steps describe the sequence depicted in the illustration above.</span></span>  
  
1.  <span data-ttu-id="dc4d8-205">Un subsistema aloja el propio motor de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-205">One subsystem hosts the BizTalk Server engine itself.</span></span> <span data-ttu-id="dc4d8-206">El motor es responsable de ejecutar las orquestaciones y la mensajería.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-206">The engine is responsible for executing orchestrations and messaging.</span></span>  
  
2.  <span data-ttu-id="dc4d8-207">Otro subsistema es el servicio de bus de eventos.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-207">Another subsystem is the Event Bus Service.</span></span> <span data-ttu-id="dc4d8-208">Este servicio se encarga de escribir datos de secuencias de eventos almacenados en búfer en la base de datos de importación principal de BAM.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-208">The Event Bus Service is responsible for writing Buffered Event Stream data into the BAM Primary Import database.</span></span>  
  
### <a name="booting-the-runtime"></a><span data-ttu-id="dc4d8-209">Iniciar el tiempo de ejecución</span><span class="sxs-lookup"><span data-stu-id="dc4d8-209">Booting the runtime</span></span>  
 <span data-ttu-id="dc4d8-210">Cuando se inicia el Servicio de BizTalk, cada subsistema carga los metadatos necesarios para el funcionamiento del sistema.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-210">When the BizTalk Service starts, each subsystem loads metadata that is necessary for the subsystems to operate.</span></span>  
  
 <span data-ttu-id="dc4d8-211">En el diagrama siguiente se muestra este proceso.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-211">The following diagram illustrates this process.</span></span>  
  
 <span data-ttu-id="dc4d8-212">![](../core/media/architecture-bam-07.gif "architecture_bam_07")</span><span class="sxs-lookup"><span data-stu-id="dc4d8-212">![](../core/media/architecture-bam-07.gif "architecture_bam_07")</span></span>  
  
 <span data-ttu-id="dc4d8-213">Los pasos siguientes describen la secuencia que se muestra en la ilustración de arriba.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-213">The following steps describe the sequence depicted in the illustration above.</span></span>  
  
1.  <span data-ttu-id="dc4d8-214">Cuando el motor de BizTalk está en ejecución (bien con orquestaciones o mensajería), llama a interceptores que regulan el flujo de datos desde el motor a BAM.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-214">When the BizTalk Engine is executing (either orchestrations or messaging), it calls into interceptors which regulate the data flow from the engine into BAM.</span></span> <span data-ttu-id="dc4d8-215">Cuando el motor llama al interceptor, el interceptor analiza la ubicación en la que se encuentra el motor con relación al orden de ejecución de la orquestación o los artefactos de mensajería.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-215">When the engine calls the interceptor, the interceptor analyzes where the engine is at in relation to the order of execution for the orchestration or messaging artifacts.</span></span> <span data-ttu-id="dc4d8-216">Si hay datos que es necesario recuperar de la ubicación en la que se está ejecutando actualmente el motor, el interceptor recopila los datos apropiados.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-216">If there is data that needs to be retrieved from the location where the engine is currently executing, the interceptor gathers the appropriate data.</span></span> <span data-ttu-id="dc4d8-217">Los metadatos que determinan dónde es necesario capturar los datos y qué datos es necesario capturar se encuentran en el perfil de seguimiento.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-217">The metadata that determines where the data needs to be captured and what data needs to be captured is housed in the Tracking Profile.</span></span> <span data-ttu-id="dc4d8-218">Durante el inicio del Servicio de BizTalk, los interceptores del motor se pondrán en contacto con la base de datos de administración de BizTalk para extraer el perfil de seguimiento adecuado para los artefactos que se estén ejecutando.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-218">During booting of the BizTalk Service, the engine’s interceptors will contact the BizTalk Management database to pull the appropriate Tracking Profile for the artifacts being executed.</span></span>  
  
2.  <span data-ttu-id="dc4d8-219">La función principal del servicio de bus de eventos es convertir los BLOB de datos (escritos por el motor de BizTalk) en elementos de datos utilizables e insertar los datos en la base de datos de importación principal de BAM.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-219">The Event Bus Service's primary function is to convert data blobs (written by the BizTalk Engine) into usable data items and insert the data into the BAM Primary Import database.</span></span> <span data-ttu-id="dc4d8-220">El interceptor de mensajería escribe los datos sin procesar en un formato comprimido.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-220">The messaging interceptor writes the raw data in a compressed form.</span></span> <span data-ttu-id="dc4d8-221">Para ello, se evita utilizar un espacio de trabajo de memoria grande.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-221">This is done to avoid a large memory working set.</span></span> <span data-ttu-id="dc4d8-222">Para que el servicio de bus de eventos convierta los datos de mensajería en elementos de datos utilizables, primero debe cargar metadatos que puedan interpretar los datos sin procesar.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-222">In order for the Event Bus Service to convert messaging data into usable data items, it must first load metadata that can interpret the raw data.</span></span> <span data-ttu-id="dc4d8-223">Estos metadatos se conocen como **anotaciones**.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-223">This metadata is known as **annotations**.</span></span> <span data-ttu-id="dc4d8-224">Los metadatos de anotaciones se colocan ahí mediante el Editor de perfiles de seguimiento o la herramienta de línea de comandos de implementación de perfiles de seguimiento.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-224">The annotation metadata was put there via the Tracking Profile Editor or the command line Tracking Profile Deploy tool.</span></span> <span data-ttu-id="dc4d8-225">Si la solución implementada no recupera datos de mensajería, no habrá ninguna anotación.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-225">If the solution deployed does not retrieve data from messaging there will not be any annotations.</span></span> <span data-ttu-id="dc4d8-226">Los interceptores de orquestación codifican suficiente información en formato sin procesar para el servicio de bus de eventos con el fin de realizar correctamente la descodificación sin anotaciones adicionales.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-226">Orchestration interceptors encode enough information in the raw form for the Event Bus Service to properly decode without having additional annotations.</span></span>  
  
### <a name="storing-data"></a><span data-ttu-id="dc4d8-227">Almacenar datos</span><span class="sxs-lookup"><span data-stu-id="dc4d8-227">Storing data</span></span>  
 <span data-ttu-id="dc4d8-228">En esta sección se describe cómo se capturan datos del Servicio de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-228">This section discusses how data is captured from the BizTalk Service.</span></span>  
  
 <span data-ttu-id="dc4d8-229">En el diagrama siguiente se muestra este proceso.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-229">The following diagram illustrates this process.</span></span>  
  
 <span data-ttu-id="dc4d8-230">![](../core/media/architecture-bam-08.gif "architecture_bam_08")</span><span class="sxs-lookup"><span data-stu-id="dc4d8-230">![](../core/media/architecture-bam-08.gif "architecture_bam_08")</span></span>  
  
 <span data-ttu-id="dc4d8-231">Los pasos siguientes describen la secuencia que se muestra en la ilustración de arriba.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-231">The following steps describe the sequence depicted in the illustration above.</span></span>  
  
1.  <span data-ttu-id="dc4d8-232">El motor de BizTalk, como se ha descrito anteriormente, tiene interceptores a los que se llama durante la ejecución soluciones de mensajería y orquestaciones.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-232">The BizTalk engine, as described earlier, has interceptors that are called during runtime execution of orchestrations and messaging solutions.</span></span> <span data-ttu-id="dc4d8-233">En función de la información de perfiles de seguimiento existente, los interceptores determinan los datos que se capturarán y que se enviarán posteriormente al cuadro de mensajes de BizTalk en formato binario.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-233">Based on the Tracking Profile information, the interceptors will determine what data to capture and then send it to the BizTalk MessageBox in a binary form.</span></span> <span data-ttu-id="dc4d8-234">Hay una tabla denominada TrackingData que almacena los datos BLOB serializados que se han capturado en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-234">There is a TrackingData table which holds serialized blob data captured during runtime.</span></span> <span data-ttu-id="dc4d8-235">Durante el procesamiento, hay ocasiones en las que el motor debe almacenar los datos que contiene en memoria.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-235">During the processing, there are times when the engine needs to store data that it holds in memory during execution.</span></span> <span data-ttu-id="dc4d8-236">A esto se les denomina puntos de persistencia y el motor decide el momento en el que se ejecutan dichos puntos.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-236">These are known as persistence points, and the engine decides when these points occur.</span></span> <span data-ttu-id="dc4d8-237">Cuando se produce un punto de persistencia, los datos capturados de los interceptores también se vacían y se guardan dentro de la misma transacción.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-237">When a persistence point happens, the data that was captured from the interceptors is also flushed and persisted within the same transaction.</span></span> <span data-ttu-id="dc4d8-238">Esto garantiza la coherencia de los datos en el motor y, en última instancia, lo que BAM puede ver.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-238">This ensures the consistency of the data in the engine and ultimately what BAM can see.</span></span> <span data-ttu-id="dc4d8-239">Si se produce un error y si se revierte la transacción, también se revertirán los datos de BAM asociados.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-239">If a failure occurs and the transaction is rolled back, the associated BAM data will also be rolled back.</span></span>  
  
2.  <span data-ttu-id="dc4d8-240">El servicio de bus de eventos se aloja en el mismo proceso ejecutable que el motor.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-240">The Event Bus service is housed in the same executable process as the engine.</span></span> <span data-ttu-id="dc4d8-241">El servicio toma datos de la tabla TrackingData almacenada por el motor de BTS (o cualquier origen de datos BufferedEventStream).</span><span class="sxs-lookup"><span data-stu-id="dc4d8-241">The service feeds off of data in the TrackingData table stored by the BTS Engine (or any BufferedEventStream data source).</span></span> <span data-ttu-id="dc4d8-242">La imagen muestra un ensamblado: Microsoft.BizTalk.Bam.EventObservation.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-242">The picture depicts an assembly – Microsoft.BizTalk.Bam.EventObservation.</span></span> <span data-ttu-id="dc4d8-243">Este ensamblado no expone un método de recuperación de los datos desde BufferedEventStream.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-243">This assembly does not expose a method of retrieving the data from the BufferedEventStream.</span></span> <span data-ttu-id="dc4d8-244">Este código se aloja en el propio servicio de bus de eventos.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-244">This code is housed in the Event Bus Service itself.</span></span> <span data-ttu-id="dc4d8-245">Los datos se recuperan y, a continuación, se preparan para almacenarse en la base de datos de importación principal.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-245">The data is retrieved and then prepared to be stored in the Primary Import database.</span></span> <span data-ttu-id="dc4d8-246">La mayoría de los datos binarios son objetos .NET serializados que se rehidratan, después de lo cual se mueven las propiedades desde el objeto a instrucciones SQL con formato.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-246">For the most part, the binary data are serialized .NET objects which are rehydrated after which properties are moved from the object to formatted SQL statements.</span></span>  
  
3.  <span data-ttu-id="dc4d8-247">Cuando tiene lugar el almacenamiento de los datos, el servicio de bus de eventos intenta usar un lote grande.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-247">When storage of the data occurs, the Event Bus service attempts a large batch.</span></span> <span data-ttu-id="dc4d8-248">El lote contiene llamadas a procedimientos almacenados generados por la herramienta de implementación del administrador de BAM.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-248">The batch contains calls to stored procedures that were generated by the Bam Manager deployment tool.</span></span> <span data-ttu-id="dc4d8-249">Debido a la elevada actividad de la base de datos o a otras circunstancias de bloqueo de la tabla, es posible que el almacenamiento por lotes tenga errores.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-249">Due to high database activity or other table locking circumstances, the batch storage could fail.</span></span> <span data-ttu-id="dc4d8-250">En caso de un error, se intenta crear el lote un par de veces más.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-250">In the event of a failure, the batch is tried a couple more times.</span></span> <span data-ttu-id="dc4d8-251">Si los reintentos no son satisfactorios, el lote se divide en lotes más pequeños y se vuelve a intentar.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-251">If the retries fail, the batch is broken up into smaller batches and retried.</span></span> <span data-ttu-id="dc4d8-252">Si tampoco funciona así, el lote se mueve a la tabla FailedTracking.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-252">If this fails, the batch is moved to the FailedTracking table.</span></span>  
  
### <a name="custom-data-insertion"></a><span data-ttu-id="dc4d8-253">Inserción de datos personalizados</span><span class="sxs-lookup"><span data-stu-id="dc4d8-253">Custom data insertion</span></span>  
 <span data-ttu-id="dc4d8-254">En la sección anterior se han proporcionado detalles acerca de cómo BAM recupera datos del host de BizTalk Server mediante varios métodos:</span><span class="sxs-lookup"><span data-stu-id="dc4d8-254">The previous section demonstrated the details of how BAM retrieves data from the BizTalk Server host using a variety of different methods.</span></span> <span data-ttu-id="dc4d8-255">de forma indirecta, mediante el Editor de perfiles de seguimiento para crear un perfil, y de forma más directa, con métodos de secuencia de eventos directamente dentro del código.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-255">Indirectly using the Tracking Profile Editor to create a profile, and more directly using the Event Stream methods directly within code.</span></span> <span data-ttu-id="dc4d8-256">Sin embargo, no todos los datos relevantes de BAM están necesariamente disponibles en BizTalk.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-256">However, not all data relevant to BAM is necessarily available in BizTalk.</span></span> <span data-ttu-id="dc4d8-257">Por lo tanto, hay un ensamblado disponible para aplicaciones personalizadas.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-257">Therefore there is an assembly available to custom written applications.</span></span>  
  
 <span data-ttu-id="dc4d8-258">En el diagrama siguiente se muestra este proceso.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-258">The following diagram illustrates this process.</span></span>  
  
 <span data-ttu-id="dc4d8-259">![](../core/media/architecture-bam-09.gif "architecture_bam_09")</span><span class="sxs-lookup"><span data-stu-id="dc4d8-259">![](../core/media/architecture-bam-09.gif "architecture_bam_09")</span></span>  
  
 <span data-ttu-id="dc4d8-260">Los pasos siguientes describen la secuencia que se muestra en la ilustración de arriba.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-260">The following steps describe the sequence depicted in the illustration above.</span></span>  
  
1.  <span data-ttu-id="dc4d8-261">La aplicación personalizada debe ser capaz de cargar el [Microsoft.BizTalk.Bam.EventObservation](http://msdn.microsoft.com/library/microsoft.biztalk.bam.eventobservation.aspx) ensamblado para tener acceso a los métodos BAM de insertar datos en una actividad de BAM.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-261">The custom application must be able to load the [Microsoft.BizTalk.Bam.EventObservation](http://msdn.microsoft.com/library/microsoft.biztalk.bam.eventobservation.aspx) assembly to access the BAM methods of inserting data into a BAM Activity.</span></span> <span data-ttu-id="dc4d8-262">Hay dos clases principales que se exponen: DirectEventStream y BufferedEventStream.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-262">There are two primary classes that are exposed, DirectEventStream and BufferedEventStream.</span></span> <span data-ttu-id="dc4d8-263">En la ilustración anterior, aparece resaltada la clase DirectEventStream.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-263">In the illustration above, the DirectEventStream class is highlighted.</span></span> <span data-ttu-id="dc4d8-264">Esta clase se escribe directamente en la base de datos de importación principal.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-264">This class writes directly to the Primary Import database.</span></span> <span data-ttu-id="dc4d8-265">Es el método más común de escribir datos en una actividad de BAM.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-265">This is the most common method of writing data into a BAM activity.</span></span>  
  
2.  <span data-ttu-id="dc4d8-266">De forma similar al método de almacenamiento de datos de BizTalk, la clase BufferedEventStream escribe objetos BLOB binarios en una base de datos indirecta.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-266">Similar to the method in which BizTalk stores data, the BufferedEventStream class writes binary blobs into an indirect database.</span></span> <span data-ttu-id="dc4d8-267">En este caso, se utiliza el cuadro de mensajes de BizTalk con almacén intermedio.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-267">In this case, the BizTalk MessageBox is used as the intermediate store.</span></span> <span data-ttu-id="dc4d8-268">La clase elegida depende de varios factores; sin embargo, el factor que más interesa es el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-268">Which class you choose depends on several things; however performance is a primary concern.</span></span> <span data-ttu-id="dc4d8-269">La clase BufferedEventStream procesará los datos por lotes y mantendrá el máximo rendimiento posible.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-269">The BufferedEventStream class will batch data and sustain higher throughput.</span></span> <span data-ttu-id="dc4d8-270">El inconveniente es que los datos no se escriben inmediatamente.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-270">The drawback is that the data is not written immediately.</span></span>  
  
3.  <span data-ttu-id="dc4d8-271">Al igual que con el método de inserción de datos de BizTalk, el servicio de bus de eventos procesará los datos binarios, los descodificará y, por último, los almacenará en la base de datos de importación principal de BAM.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-271">As with the BizTalk method of inserting data, the Event Bus Service will process the binary data, decode it, and ultimately store it within the BAM Primary Import database.</span></span> <span data-ttu-id="dc4d8-272">Esto solamente es necesario para los datos escritos mediante la clase BufferedEventStream.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-272">This is only required for data written via the BufferedEventStream class.</span></span>  
  
## <a name="distributed-navigation"></a><span data-ttu-id="dc4d8-273">Exploración distribuida</span><span class="sxs-lookup"><span data-stu-id="dc4d8-273">Distributed Navigation</span></span>  
 <span data-ttu-id="dc4d8-274">La característica de exploración distribuida del portal de BAM permite a los usuarios ver las relaciones de actividad a través de límites remotos.</span><span class="sxs-lookup"><span data-stu-id="dc4d8-274">The BAM portal distributed navigation feature allows users to see activity relationships across remote boundaries.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="dc4d8-275">Vea también</span><span class="sxs-lookup"><span data-stu-id="dc4d8-275">See Also</span></span>  
 [<span data-ttu-id="dc4d8-276">Arquitectura de administración y seguimiento</span><span class="sxs-lookup"><span data-stu-id="dc4d8-276">Management and Tracking Architecture</span></span>](../core/management-and-tracking-architecture.md)
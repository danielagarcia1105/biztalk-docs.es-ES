---
title: "Alta disponibilidad para el inicio de sesión único empresarial | Documentos de Microsoft"
ms.custom: 
ms.date: 2016-02-29
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- Master Secret server, availability
- high availability, SSO
- Master Secret server, high availability
- SSO, high availability
ms.assetid: 6c631b5c-7147-4cc0-b58a-6749e83df9d3
caps.latest.revision: "27"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 023eaa82b11353347040dea13fc126f6044db3bc
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
---
# <a name="high-availability-for-enterprise-single-sign-on"></a><span data-ttu-id="95c7d-102">Alta disponibilidad del inicio de sesión único (SSO) empresarial</span><span class="sxs-lookup"><span data-stu-id="95c7d-102">High Availability for Enterprise Single Sign-On</span></span>
<span data-ttu-id="95c7d-103">Aunque no utilice la funcionalidad de inicio de sesión único (SSO) empresarial para asignar credenciales e inicios de sesión únicos, SSO es una parte fundamental de la infraestructura global de Microsoft [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], ya que BizTalk Server utiliza SSO para proteger la información de las ubicaciones de recepción.</span><span class="sxs-lookup"><span data-stu-id="95c7d-103">Even if you do not use the Enterprise Single-Sign-On (SSO) functionality for mapping credentials and single sign-on, SSO is a critical part of the overall Microsoft [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] infrastructure, because BizTalk Server uses SSO to help secure information for the receive locations.</span></span>  
  
 <span data-ttu-id="95c7d-104">Debe configurar el primer equipo en el que instale el servicio SSO como servidor secreto principal.</span><span class="sxs-lookup"><span data-stu-id="95c7d-104">You must configure the first computer where you install the SSO service as the master secret server.</span></span> <span data-ttu-id="95c7d-105">El servidor secreto principal es el servidor SSO que almacena el secreto (clave de cifrado) principal.</span><span class="sxs-lookup"><span data-stu-id="95c7d-105">The master secret server is the SSO server that stores the master secret (encryption key).</span></span> <span data-ttu-id="95c7d-106">El secreto principal es la clave de cifrado que utiliza el sistema SSO para cifrar y descifrar los datos que almacena en la base de datos de SSO.</span><span class="sxs-lookup"><span data-stu-id="95c7d-106">The master secret is the encryption key that the SSO system uses to encrypt and decrypt the data it stores in the SSO database.</span></span>  
  
 <span data-ttu-id="95c7d-107">Si un servidor SSO deja de funcionar y hay otros equipos BizTalk Server (y, por consiguiente, servidores SSO) que están ejecutando la misma instancia de host, los demás servidores SSO siguen funcionando.</span><span class="sxs-lookup"><span data-stu-id="95c7d-107">If an SSO server fails, and if you have other BizTalk Server computers (and therefore SSO servers) running the same host instance, the other SSO servers continue doing their work.</span></span> <span data-ttu-id="95c7d-108">Esto significa que el servidor secreto principal sigue funcionando correctamente y, por tanto, el procesamiento de BizTalk Server continúa.</span><span class="sxs-lookup"><span data-stu-id="95c7d-108">This means that the master secret server still functions correctly, and therefore the BizTalk Server processing continues.</span></span>  
  
 <span data-ttu-id="95c7d-109">Si se produce un error en el servidor secreto principal, todas las operaciones en tiempo de ejecución que se estaban ejecutando antes de que se produjese el error, incluido el descifrado de credenciales, continuarán con normalidad.</span><span class="sxs-lookup"><span data-stu-id="95c7d-109">If the master secret server fails, all run-time operations that were running before it failed, including decryption of credentials, continue successfully.</span></span> <span data-ttu-id="95c7d-110">No obstante, no se pueden cifrar nuevas credenciales.</span><span class="sxs-lookup"><span data-stu-id="95c7d-110">However, you cannot encrypt new credentials.</span></span> <span data-ttu-id="95c7d-111">Por tanto, el entorno de BizTalk Server depende de la disponibilidad del servidor secreto principal, como se muestra en la ilustración siguiente.</span><span class="sxs-lookup"><span data-stu-id="95c7d-111">Therefore, the BizTalk Server environment has a dependency on the availability of the master secret server, as shown in the following figure.</span></span>  
  
 <span data-ttu-id="95c7d-112">![Puntos de error](../core/media/tdi-highava-pointsfailure-mss.gif "TDI_HighAva_PointsFailure_MSS")</span><span class="sxs-lookup"><span data-stu-id="95c7d-112">![Points of Failure](../core/media/tdi-highava-pointsfailure-mss.gif "TDI_HighAva_PointsFailure_MSS")</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="95c7d-113">Si deja de estar disponible el servidor secreto principal, las instancias de host de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] seguirán realizando operaciones en tiempo de ejecución usando la copia almacenada en caché de memoria del secreto maestro hasta que:</span><span class="sxs-lookup"><span data-stu-id="95c7d-113">If the master secret server becomes unavailable, then [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] host instances can still perform run-time operations by using the in-memory cached copy of the master secret until:</span></span>  
>   
>  -   <span data-ttu-id="95c7d-114">Se reinician las instancias de host.</span><span class="sxs-lookup"><span data-stu-id="95c7d-114">The host instances are restarted.</span></span>  
> -   <span data-ttu-id="95c7d-115">Se reinicia el servicio SSO en el equipo que ejecuta instancias de host de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="95c7d-115">The SSO service on the computer running the BizTalk host instances is restarted.</span></span>  
> -   <span data-ttu-id="95c7d-116">Cambia el secreto principal de SSO.</span><span class="sxs-lookup"><span data-stu-id="95c7d-116">The SSO master secret is changed.</span></span>  
>   
>  <span data-ttu-id="95c7d-117">Si se reinicia el servicio SSO en los equipos [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] o cambia el secreto principal SSO, la copia en caché del secreto maestro se libera de la memoria y [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] debe poder contactar con el servidor de secreto principal con el fin de obtener otra copia del secreto principal.</span><span class="sxs-lookup"><span data-stu-id="95c7d-117">If the SSO service is restarted on the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computers or if the SSO master secret is changed, then the cached copy of the master secret is released from memory and the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] must be able to contact the master secret server to obtain another copy of the master secret.</span></span> <span data-ttu-id="95c7d-118">Si el servidor secreto principal no está disponible entonces, fallará cualquier operación administrativa que requiera obtener acceso al servidor secreto principal con fines de cifrado.</span><span class="sxs-lookup"><span data-stu-id="95c7d-118">If the master secret server is unavailable then any administrative operations that require access to the master secret server for purposes of encryption will fail.</span></span>  
  
## <a name="making-the-master-secret-server-available"></a><span data-ttu-id="95c7d-119">Hacer que el servidor secreto principal esté disponible</span><span class="sxs-lookup"><span data-stu-id="95c7d-119">Making the Master Secret Server Available</span></span>  
 <span data-ttu-id="95c7d-120">Para la disponibilidad del sistema SSO y, por tanto, del entorno de BizTalk Server, es fundamental crear una copia de seguridad del secreto principal inmediatamente después de generarlo.</span><span class="sxs-lookup"><span data-stu-id="95c7d-120">For availability of the SSO system, and therefore of the BizTalk Server environment, it is critical that you back up the master secret as soon as it is generated.</span></span> <span data-ttu-id="95c7d-121">Si se pierde, se perderán también los datos que cifró el sistema SSO utilizando ese secreto principal.</span><span class="sxs-lookup"><span data-stu-id="95c7d-121">If you lose it, you lose the data that the SSO system encrypted by using that master secret.</span></span> <span data-ttu-id="95c7d-122">Para obtener más información sobre la copia de seguridad del secreto principal, consulte [cómo volver la seguridad del secreto principal](../core/how-to-back-up-the-master-secret.md).</span><span class="sxs-lookup"><span data-stu-id="95c7d-122">For more information about backing up the master secret, see [How to Back Up the Master Secret](../core/how-to-back-up-the-master-secret.md).</span></span>  
  
 <span data-ttu-id="95c7d-123">Puede hacer que el servidor secreto principal esté disponible de dos maneras:</span><span class="sxs-lookup"><span data-stu-id="95c7d-123">You can make the master secret server available in two ways:</span></span>  
  
-   <span data-ttu-id="95c7d-124">**Disponible, pero no una alta disponibilidad.**</span><span class="sxs-lookup"><span data-stu-id="95c7d-124">**Available, but not highly available.**</span></span> <span data-ttu-id="95c7d-125">todos los servidores SSO tienen el secreto principal almacenado en la memoria caché y las operaciones en tiempo de ejecución continuarán incluso si se produce un error en el servidor secreto principal.</span><span class="sxs-lookup"><span data-stu-id="95c7d-125">All the SSO servers have the master secret cached in memory, and run-time operations will continue even if the master secret server fails.</span></span> <span data-ttu-id="95c7d-126">Sin embargo, no podrá cambiar la configuración de los puertos ni la configuración de SSO.</span><span class="sxs-lookup"><span data-stu-id="95c7d-126">However, you will not be able to change the configuration of ports or the SSO configuration.</span></span> <span data-ttu-id="95c7d-127">El motor de tiempo de ejecución de BizTalk Server seguirá funcionando sin problemas, pero no podrá realizar ningún cambio de diseño.</span><span class="sxs-lookup"><span data-stu-id="95c7d-127">The BizTalk Server runtime will continue working without problems, but you cannot make any design changes.</span></span>  
  
     <span data-ttu-id="95c7d-128">Aunque esta configuración no ofrezca una alta disponibilidad, puede ser satisfactoria para la mayoría de los escenarios y es coherente con la escala de las operaciones de recepción, envío y procesamiento de host.</span><span class="sxs-lookup"><span data-stu-id="95c7d-128">Even if this configuration is not highly available, it can be satisfactory for most scenarios and it is consistent with scaling out the receiving, sending, and processing hosts.</span></span>  
  
-   <span data-ttu-id="95c7d-129">**Alta disponibilidad.**</span><span class="sxs-lookup"><span data-stu-id="95c7d-129">**Highly available.**</span></span> <span data-ttu-id="95c7d-130">para proporcionar redundancia al servidor secreto principal, utilice la Organización por clústeres de Windows en un clúster de servidores secretos principales diferente o configure el servidor secreto principal en un clúster de base de datos existente.</span><span class="sxs-lookup"><span data-stu-id="95c7d-130">To provide redundancy for the master secret server, use Windows Clustering on a separate master secret server cluster, or configure the master secret server on an existing database cluster.</span></span> <span data-ttu-id="95c7d-131">Los servicios que proporciona el servidor secreto principal no consumen muchos recursos y, normalmente, no afectan a la funcionalidad de la base de datos ni al rendimiento si se instalan en un clúster de base de datos.</span><span class="sxs-lookup"><span data-stu-id="95c7d-131">The services provided by the master secret server do not consume many resources, and typically do not affect database functionality or performance when installed on a database cluster.</span></span> <span data-ttu-id="95c7d-132">La siguiente ilustración muestra cómo aportar alta disponibilidad al servidor secreto principal.</span><span class="sxs-lookup"><span data-stu-id="95c7d-132">The following figure shows how you can make the master secret server highly available.</span></span>  
  
     <span data-ttu-id="95c7d-133">![Servidor secreto principal de alta disponibilidad](../core/media/tdi-highava-msscluster.gif "TDI_HighAva_MSSCluster")</span><span class="sxs-lookup"><span data-stu-id="95c7d-133">![Highly Available Master Secret Server](../core/media/tdi-highava-msscluster.gif "TDI_HighAva_MSSCluster")</span></span>  
  
     <span data-ttu-id="95c7d-134">Aunque esta configuración tenga una alta disponibilidad, requiere recursos de hardware adicionales.</span><span class="sxs-lookup"><span data-stu-id="95c7d-134">While this configuration is highly available, it requires additional hardware resources.</span></span> <span data-ttu-id="95c7d-135">Para obtener más información acerca de las opciones de instalación de alta disponibilidad para SSO, vea [opciones de instalación de SSO de alta disponibilidad](../core/high-availability-sso-installation-options.md).</span><span class="sxs-lookup"><span data-stu-id="95c7d-135">For more information about high availability installation options for SSO, see [High-Availability SSO Installation Options](../core/high-availability-sso-installation-options.md).</span></span> <span data-ttu-id="95c7d-136">Esta sección incluye información detallada acerca de la configuración del servicio secreto principal de SSO como recurso de clúster de alta disponibilidad en un clúster de Windows Server.</span><span class="sxs-lookup"><span data-stu-id="95c7d-136">This section includes detailed information about configuring the SSO master secret server as a highly available cluster resource on a Windows Server cluster.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="95c7d-137">Para reducir los recursos de hardware en una solución de alta disponibilidad, puede agregar el servidor secreto principal como recurso de clúster al clúster de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="95c7d-137">To reduce the hardware resources for a highly available solution, you can add the master secret server as a cluster resource in your SQL Server cluster.</span></span> <span data-ttu-id="95c7d-138">No es necesario adquirir más licencias de servidor BizTalk Server para instalar el servicio SSO en otro equipo.</span><span class="sxs-lookup"><span data-stu-id="95c7d-138">You do not need to purchase additional BizTalk Server licenses to install the SSO service on another computer.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="95c7d-139">Vea también</span><span class="sxs-lookup"><span data-stu-id="95c7d-139">See Also</span></span>  
 <span data-ttu-id="95c7d-140">[Agrupación en clústeres las bases de datos de servidor BizTalk Server](../core/clustering-the-biztalk-server-databases1.md) </span><span class="sxs-lookup"><span data-stu-id="95c7d-140">[Clustering the BizTalk Server Databases](../core/clustering-the-biztalk-server-databases1.md) </span></span>  
 <span data-ttu-id="95c7d-141">[Crear un entorno de alta disponibilidad de servidor de BizTalk Server](../core/creating-a-highly-available-biztalk-server-environment.md) </span><span class="sxs-lookup"><span data-stu-id="95c7d-141">[Creating a Highly Available BizTalk Server Environment](../core/creating-a-highly-available-biztalk-server-environment.md) </span></span>  
 [<span data-ttu-id="95c7d-142">Cómo agrupar el servidor secreto principal</span><span class="sxs-lookup"><span data-stu-id="95c7d-142">How to Cluster the Master Secret Server</span></span>](../core/how-to-cluster-the-master-secret-server1.md)
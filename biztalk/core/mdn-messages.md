---
title: Mensajes MDN | Documentos de Microsoft
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 16ac6253-0be5-4636-b102-bf5af8956261
caps.latest.revision: "20"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 5a6600237961b59e440a460263a8f4315b2c4773
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
---
# <a name="mdn-messages"></a><span data-ttu-id="887cb-102">Mensajes MDN</span><span class="sxs-lookup"><span data-stu-id="887cb-102">MDN Messages</span></span>
<span data-ttu-id="887cb-103">La notificación de disposición de mensaje (MDN) es la confirmación enviada en respuesta a un mensaje AS2.</span><span class="sxs-lookup"><span data-stu-id="887cb-103">The Message Disposition Notification (MDN) is the acknowledgment sent in response to an AS2 message.</span></span> <span data-ttu-id="887cb-104">Si se habilita un MDN, la transmisión AS2 no se completa hasta que se comprueba y recibe el MDN.</span><span class="sxs-lookup"><span data-stu-id="887cb-104">If an MDN is enabled, the AS2 transmission is not complete until the MDN has been received and verified.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="887cb-105">siempre intentará devolver un MDN para indicar el estado de procesamiento de mensajes, incluso si se produjo un error en el procesamiento del mensaje AS2.</span><span class="sxs-lookup"><span data-stu-id="887cb-105"> will always attempt to return an MDN to indicate the status of message processing, even if an error occurred in processing the AS2 message.</span></span>  
  
 <span data-ttu-id="887cb-106">El MDN proporciona comprobación de que:</span><span class="sxs-lookup"><span data-stu-id="887cb-106">The MDN provides verification of the following:</span></span>  
  
-   <span data-ttu-id="887cb-107">**Que el mensaje original ha recibido correctamente por la parte receptora**.</span><span class="sxs-lookup"><span data-stu-id="887cb-107">**That the original message was successfully received by the receiving party**.</span></span> <span data-ttu-id="887cb-108">El remitente del mensaje original lo comprueba comparando el identificador de mensaje del mensaje original enviado con el campo original-message-id que el receptor ha incluido en el MDN.</span><span class="sxs-lookup"><span data-stu-id="887cb-108">The sender of the original message verifies this by comparing the MessageID of the original sent message with the original-message-id field that the receiver included in the MDN.</span></span>  
  
-   <span data-ttu-id="887cb-109">**Que el socio receptor ha comprobado la integridad de los datos intercambiados**.</span><span class="sxs-lookup"><span data-stu-id="887cb-109">**That the integrity of the data exchanged was verified by the receiving partner**.</span></span> <span data-ttu-id="887cb-110">El remitente del mensaje original lo comprueba mediante la comparación de la MIC que se calcula a partir de la carga del mensaje original enviado, con la MIC que el receptor ha calculado en la carga del mensaje recibido e incluido en el campo Received-content-MIC del MDN (si está firmado).</span><span class="sxs-lookup"><span data-stu-id="887cb-110">The sender of the original message verifies this by comparing the MIC that was calculated from the original sent message payload, with the MIC that the receiver calculated on the received message payload and included in the Received-content-MIC field of the MDN (if signed).</span></span>  
  
-   <span data-ttu-id="887cb-111">**Que no hay repudio de recepción**.</span><span class="sxs-lookup"><span data-stu-id="887cb-111">**That there is a non-repudiation of receipt**.</span></span> <span data-ttu-id="887cb-112">El remitente lo realiza mediante la comprobación del MDN firmado con la clave pública del socio receptor y la comprobación de que el valor MIC devuelto en el MDN es el mismo que la MIC para la carga del mensaje original almacenada en una base de datos sin repudio.</span><span class="sxs-lookup"><span data-stu-id="887cb-112">The sender does this by verifying the signed MDN with the receiving partner's public key, and by verifying that the returned MIC value in the MDN is the same as the MIC for the original message payload stored in the non-repudiation database.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="887cb-113">Un MDN sincrónico que sirve como una respuesta HTTP, por ejemplo, 200 OK.</span><span class="sxs-lookup"><span data-stu-id="887cb-113">A synchronous MDN serves as an HTTP Response, e.g., 200 OK.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="887cb-114">Para obtener más información sobre el procesamiento de recepción de los MDN, vea [procesamiento de MDN entrante](../core/processing-an-incoming-mdn.md).</span><span class="sxs-lookup"><span data-stu-id="887cb-114">For more information about receive-side processing of MDNs, see [Processing an Incoming MDN](../core/processing-an-incoming-mdn.md).</span></span> <span data-ttu-id="887cb-115">Para obtener más información sobre el procesamiento de envío de MDN, vea [enviar un MDN saliente](../core/sending-an-outgoing-mdn.md).</span><span class="sxs-lookup"><span data-stu-id="887cb-115">For more information about send-side processing of MDNs, see [Sending an Outgoing MDN](../core/sending-an-outgoing-mdn.md).</span></span>  
  
## <a name="properties-used-to-generate-the-mdn"></a><span data-ttu-id="887cb-116">Propiedades usadas para generar el MDN</span><span class="sxs-lookup"><span data-stu-id="887cb-116">Properties Used to Generate the MDN</span></span>  
 <span data-ttu-id="887cb-117">Recibir el AS2Receive canalización generará un MDN mediante las propiedades de acuerdo de AS2 de la entidad si la **usar la configuración de acuerdo para validación y MDN en lugar del encabezado de mensaje** propiedad está seleccionada en la ficha de acuerdo unidireccional en el  **Propiedades del acuerdo de** cuadro de diálogo.</span><span class="sxs-lookup"><span data-stu-id="887cb-117">The AS2Receive receive pipeline will generate an MDN using a party's AS2 agreement properties if the **Use agreement settings for validation and MDN instead of message header** property is selected on the one-way agreement tab in the **Agreement Properties** dialog box.</span></span> <span data-ttu-id="887cb-118">En esta instancia, la propiedad AS2-From en el encabezado de mensaje se usará en la generación del MDN pero se tomarán otras propiedades de la configuración de acuerdo AS2 de la entidad.</span><span class="sxs-lookup"><span data-stu-id="887cb-118">In this instance, the AS2-From property in the message header will be used in generating the MDN, but other properties will be taken from the party's AS2 agreement settings.</span></span>  
  
 <span data-ttu-id="887cb-119">Si la opción para invalidad la propiedad de AS2 no se selecciona o el acuerdo de AS2 de la entidad no está disponible, la canalización de recepción generará el MDN mediante las etiquetas de encabezados de AS2 en el mensaje entrante.</span><span class="sxs-lookup"><span data-stu-id="887cb-119">If the option to override AS2 property is not selected, or the party’s AS2 agreement is available, the receive pipeline will generate the MDN using the AS2 header tags in the incoming message.</span></span>  
  
 <span data-ttu-id="887cb-120">Puede firmarse un MDN pero no puede cifrarse o comprimirse.</span><span class="sxs-lookup"><span data-stu-id="887cb-120">An MDN can be signed, but it cannot be encrypted or compressed.</span></span>  
  
## <a name="mdn-context-properties"></a><span data-ttu-id="887cb-121">Propiedades de contexto de MDN</span><span class="sxs-lookup"><span data-stu-id="887cb-121">MDN Context Properties</span></span>  
 <span data-ttu-id="887cb-122">Las propiedades de contexto utilizadas en el procesamiento de mensajes MDN incluyen propiedades que se pueden ser promocionadas así como propiedades que no se exponen públicamente pero pueden verse un mensajes de seguimiento o suspendidos.</span><span class="sxs-lookup"><span data-stu-id="887cb-122">Context properties used in processing MDN messages include properties that can be promoted as well as properties that are not publicly exposed, but can be viewed in suspended and tracked messages.</span></span> <span data-ttu-id="887cb-123">Para obtener una lista de estas propiedades de contexto, vea [propiedades de contexto AS2](../core/as2-context-properties.md).</span><span class="sxs-lookup"><span data-stu-id="887cb-123">For a list of these context properties, see [AS2 Context Properties](../core/as2-context-properties.md).</span></span>  
  
 <span data-ttu-id="887cb-124">Las propiedades de contexto de DispositionMode y DispositionType deben promocionarse en orden para que se genere un MDN.</span><span class="sxs-lookup"><span data-stu-id="887cb-124">Both the DispositionMode and DispositionType context properties must be promoted in order for an MDN to be generated.</span></span> <span data-ttu-id="887cb-125">Si se produce un error en la carga EDI o AS2, la propiedad DispositionType indicará el error.</span><span class="sxs-lookup"><span data-stu-id="887cb-125">If an error occurs in the AS2 or EDI payload, the DispositionType property will indicate the error.</span></span> <span data-ttu-id="887cb-126">Puede ver esta propiedad en el **detalles del mensaje** cuadro de diálogo que se muestra (a través del cuadro de diálogo Detalles de servicio) en instancias de servicio suspendidas en la **concentrador de grupo** página de la [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Consola de administración.</span><span class="sxs-lookup"><span data-stu-id="887cb-126">You can see this property in the **Message Details** dialog box that is displayed (via the Service Details dialog box) from the Suspended service instances in the **Group Hub** page of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration Console.</span></span> <span data-ttu-id="887cb-127">Si se produce un error en el encabezado, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] indicará el error en la propiedad DispositionType e intentará enviar el MDN pero, dependiendo del error, puede que no pueda hacerlo.</span><span class="sxs-lookup"><span data-stu-id="887cb-127">If an error occurs in the header, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will indicate the error in the DispositionType property, and will attempt to send the MDN, but depending on the error, may not be able to do so.</span></span>  
  
## <a name="mdn-headers"></a><span data-ttu-id="887cb-128">Encabezados MDN</span><span class="sxs-lookup"><span data-stu-id="887cb-128">MDN Headers</span></span>  
 <span data-ttu-id="887cb-129">El MDN contiene los encabezados siguientes:</span><span class="sxs-lookup"><span data-stu-id="887cb-129">The MDN contains the following headers:</span></span>  
  
-   <span data-ttu-id="887cb-130">**Encabezados HTTP/AS2**.</span><span class="sxs-lookup"><span data-stu-id="887cb-130">**HTTP/AS2 headers**.</span></span> <span data-ttu-id="887cb-131">Para obtener más información, consulte [mensajes AS2](../core/as2-messages.md).</span><span class="sxs-lookup"><span data-stu-id="887cb-131">For more information, see [AS2 Messages](../core/as2-messages.md).</span></span>  
  
-   <span data-ttu-id="887cb-132">**Capa de transferencia**.</span><span class="sxs-lookup"><span data-stu-id="887cb-132">**Transfer Layer**.</span></span> <span data-ttu-id="887cb-133">esto incluye el encabezado Content-Type que incluye el mensaje con varias partes firmado, el algoritmo para la MIC, el protocolo de formato de firma y encabezados secundarios de límites de varias partes más externos.</span><span class="sxs-lookup"><span data-stu-id="887cb-133">This includes the Content-Type header that includes the signed multipart message, the algorithm for the MIC, the signature formatting protocol, and the outermost multipart boundary sub-headers.</span></span>  
  
-   <span data-ttu-id="887cb-134">**Primera parte**.</span><span class="sxs-lookup"><span data-stu-id="887cb-134">**First Part**.</span></span> <span data-ttu-id="887cb-135">la primera parte del mensaje firmado con varias partes es el MDN integrado.</span><span class="sxs-lookup"><span data-stu-id="887cb-135">The first part of the multipart signed message is the embedded MDN.</span></span> <span data-ttu-id="887cb-136">Es legible por el usuario.</span><span class="sxs-lookup"><span data-stu-id="887cb-136">It is human readable.</span></span>  
  
-   <span data-ttu-id="887cb-137">**Segunda parte**.</span><span class="sxs-lookup"><span data-stu-id="887cb-137">**Second Part**.</span></span> <span data-ttu-id="887cb-138">la segunda parte del mensaje firmado con varias partes contiene la firma digital, una referencia al mensaje original, el estado y tipo de disposición y el valor MIC.</span><span class="sxs-lookup"><span data-stu-id="887cb-138">The second part of the multipart signed message contains the digital signature, a reference to the original message, the disposition type and status, and the MIC value.</span></span> <span data-ttu-id="887cb-139">Es legible por el equipo.</span><span class="sxs-lookup"><span data-stu-id="887cb-139">It is machine readable.</span></span>  
  
 <span data-ttu-id="887cb-140">La propiedad de contexto MessageID, el encabezado AS2-From y el encabezado AS2-To se usan para correlacionar un MDN a un mensaje AS2 al que se está respondiendo.</span><span class="sxs-lookup"><span data-stu-id="887cb-140">The AS2-From header, AS2-To header, and MessageID context property are used to correlate an MDN to the AS2 message that it is responding to.</span></span> <span data-ttu-id="887cb-141">El encabezado Original-Message-ID en un MDN viene del encabezado Message-ID del mensaje AS2 al que el MDN está respondiendo.</span><span class="sxs-lookup"><span data-stu-id="887cb-141">The Original-Message-ID header in an MDN comes from the Message-ID header of the AS2 message that the MDN is responding to.</span></span>  
  
## <a name="mic"></a><span data-ttu-id="887cb-142">MIC</span><span class="sxs-lookup"><span data-stu-id="887cb-142">MIC</span></span>  
 <span data-ttu-id="887cb-143">La comprobación de integridad del mensaje (MIC) se usa para comprobar si un MDN correlaciona con la carga del mensaje original enviado.</span><span class="sxs-lookup"><span data-stu-id="887cb-143">The Message Integrity Check (MIC) is used to verify that an MDN correlates to the original sent message payload.</span></span> <span data-ttu-id="887cb-144">La síntesis de MIC se incluye en el campo de extensión Received-Content-MIC en la segunda parte del mensaje MDN firmado con varias partes.</span><span class="sxs-lookup"><span data-stu-id="887cb-144">The MIC digest is included in the Received-Content-MIC extension field in the second part of the multipart signed MDN message.</span></span>  
  
 <span data-ttu-id="887cb-145">Si se habilita un MDN, cuando la canalización de envío AS2 procesa un mensaje saliente, se calcula MICHashValue a partir de la carga del mensaje.</span><span class="sxs-lookup"><span data-stu-id="887cb-145">If an MDN is enabled, when the AS2 send pipeline processes an outbound message, it computes a MICHashValue from the message payload.</span></span> <span data-ttu-id="887cb-146">La canalización de envío guarda el valor hash en la tabla EdiInt_Mic de la base de datos BizTalkMsgBoxDb.</span><span class="sxs-lookup"><span data-stu-id="887cb-146">The send pipeline saves the hash value in the EdiInt_Mic table of the BizTalkMsgBoxDb database.</span></span> <span data-ttu-id="887cb-147">En esta tabla se realiza el seguimiento de los mensajes AS2, se identifican de forma única mediante los valores S2From, AS2To y MessageID, junto con la columna MICHashValue.</span><span class="sxs-lookup"><span data-stu-id="887cb-147">AS2 messages are tracked in this table, identified uniquely by the AS2From, AS2To, and MessageID values, with an accompanying MICHashValue column.</span></span> <span data-ttu-id="887cb-148">El receptor del mensaje calcula el valor hash de MIC cuando procesa la carga del mensaje e incluye el valor hash en el MDN que devuelve.</span><span class="sxs-lookup"><span data-stu-id="887cb-148">The receiver of the message calculates the MIC hash value when it processes the message payload, and includes the hash value in the MDN that it returns.</span></span> <span data-ttu-id="887cb-149">El remitente del mensaje original comparará el valor hash de MIC en el MDN que recibe con el valor hash que almacena.</span><span class="sxs-lookup"><span data-stu-id="887cb-149">The sender of the original message will compare the MIC hash value in the MDN that it receives with the hash value that it saved.</span></span> <span data-ttu-id="887cb-150">Si coinciden, elimina el MDN y la entrada en la tabla EdiInt_Mic y se completa la transmisión.</span><span class="sxs-lookup"><span data-stu-id="887cb-150">If they match, it disposes of the MDN, deletes the entry in the EdiInt_Mic table, and the transmission is complete.</span></span>  
  
 <span data-ttu-id="887cb-151">La MIC es de codificación base64.</span><span class="sxs-lookup"><span data-stu-id="887cb-151">The MIC is base64 encoded.</span></span> <span data-ttu-id="887cb-152">El algoritmo que se va a aplicar a la MIC puede ser SHA1 o MD5.</span><span class="sxs-lookup"><span data-stu-id="887cb-152">The algorithm to be applied for the MIC can be SHA1 or MD5.</span></span> <span data-ttu-id="887cb-153">Se determina a partir del **algoritmo de firma** desplegable (habilitado si **solicitar MDN firmado** propiedad está activada) en el **configuración de MDN de remitente** página del acuerdo unidireccional pestaña en el **propiedades del acuerdo de** cuadro de diálogo.</span><span class="sxs-lookup"><span data-stu-id="887cb-153">It is determined from the **Signing Algorithm** drop-down (enabled if **Request Signed MDN** property is checked) in the **Sender MDN Settings** page of the one-way agreement tab in the **Agreement Properties** dialog box.</span></span> <span data-ttu-id="887cb-154">También se determina a partir del encabezado Signed-Receipt-MICalg AS2 del mensaje original.</span><span class="sxs-lookup"><span data-stu-id="887cb-154">It is also determined from the Signed-Receipt-MICalg AS2 header of the original message.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="887cb-155">Vea también</span><span class="sxs-lookup"><span data-stu-id="887cb-155">See Also</span></span>  
 <span data-ttu-id="887cb-156">[Mensajes de AS2](../core/as2-messages.md) </span><span class="sxs-lookup"><span data-stu-id="887cb-156">[AS2 Messages](../core/as2-messages.md) </span></span>  
 <span data-ttu-id="887cb-157">[Procesamiento de MDN entrante](../core/processing-an-incoming-mdn.md) </span><span class="sxs-lookup"><span data-stu-id="887cb-157">[Processing an Incoming MDN](../core/processing-an-incoming-mdn.md) </span></span>  
 [<span data-ttu-id="887cb-158">Enviar un MDN saliente</span><span class="sxs-lookup"><span data-stu-id="887cb-158">Sending an Outgoing MDN</span></span>](../core/sending-an-outgoing-mdn.md)
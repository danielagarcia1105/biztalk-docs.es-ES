---
title: Procesar el mensaje | Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- processing
- messages, pipelines
- routing, about routing
- adapters, about adapters
- routing, message types
- processing, messages
- messages, processing
- routing
- messages, routing
- pipelines, about pipelines
- message types
- messages, message types
- messages, adapters
ms.assetid: e6d1f969-20c9-41f6-85cb-46cf92656348
caps.latest.revision: 13
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 49329e23127f051a593596955f808cc879dd76f6
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/27/2018
ms.locfileid: "36987789"
---
# <a name="processing-the-message"></a><span data-ttu-id="29e19-102">Procesar el mensaje</span><span class="sxs-lookup"><span data-stu-id="29e19-102">Processing the Message</span></span>
<span data-ttu-id="29e19-103">Todos los componentes descritos hasta el momento desempeñan una función en el procesamiento de mensajes, pues se transmiten a través de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="29e19-103">All of the components described so far play a part in the processing of messages as they flow through BizTalk Server.</span></span> <span data-ttu-id="29e19-104">En esta sección se ofrece una descripción más detallada de la forma en la que interactúan estos componentes desde el punto de vista de sus funciones desde que se recibe un mensaje.</span><span class="sxs-lookup"><span data-stu-id="29e19-104">This section provides more detail about how these components interact functionally, beginning with receiving a message.</span></span> <span data-ttu-id="29e19-105">La siguiente ilustración muestra las partes de un puerto de recepción, así como la forma en la que se transmite un mensaje a través del proceso de recepción.</span><span class="sxs-lookup"><span data-stu-id="29e19-105">The following figure shows the make-up of a receive port and the flow of a message through the receive process.</span></span>  
  
 <span data-ttu-id="29e19-106">Un *puerto de recepción* está formado por una o varias ubicaciones de recepción, y puede contener, o no, asignaciones.</span><span class="sxs-lookup"><span data-stu-id="29e19-106">A *receive port* consists of one or more receive locations and zero or more maps.</span></span> <span data-ttu-id="29e19-107">Las asignaciones son hojas de estilo de Transformación de lenguaje de hojas de estilo extensible (XSLT) que se utilizan para transformar mensajes XML con una estructura o formato específico a otra, y, en el proceso de recepción, para ajustar mensajes a un formato interno.</span><span class="sxs-lookup"><span data-stu-id="29e19-107">Maps are Extensible Stylesheet Language Transformations (XSLT) style sheets used to transform XML messages from one structure or format to another and are often used in the receive process to normalize messages into an internal format.</span></span> <span data-ttu-id="29e19-108">Las ubicaciones de recepción controlan los extremos en los que se reciben los mensajes.</span><span class="sxs-lookup"><span data-stu-id="29e19-108">Receive locations control the endpoints that receive the messages.</span></span> <span data-ttu-id="29e19-109">Una ubicación de recepción consiste en la configuración de un extremo de un adaptador de recepción y de una canalización de recepción.</span><span class="sxs-lookup"><span data-stu-id="29e19-109">A receive location consists of the configuration of an endpoint for a receive adapter, and a receive pipeline.</span></span>  
  
 <span data-ttu-id="29e19-110">![Procesamiento y estructura de puerto de recepción](../core/media/arch-message-processing.gif "arch_message_processing")</span><span class="sxs-lookup"><span data-stu-id="29e19-110">![Receive port structure and processing](../core/media/arch-message-processing.gif "arch_message_processing")</span></span>  
  
## <a name="the-role-of-the-adapter"></a><span data-ttu-id="29e19-111">El rol del adaptador</span><span class="sxs-lookup"><span data-stu-id="29e19-111">The Role of the Adapter</span></span>  
 <span data-ttu-id="29e19-112">El adaptador de recepción inicia el proceso de recepción de mensajes mediante la lectura de una secuencia de datos y la creación de un mensaje.</span><span class="sxs-lookup"><span data-stu-id="29e19-112">The receive adapter initiates the process of receiving messages by reading a stream of data and creating a message.</span></span> <span data-ttu-id="29e19-113">Por ejemplo, el adaptador de archivo observa que se ha colocado un archivo en su ubicación configurada y lo lee en una secuencia.</span><span class="sxs-lookup"><span data-stu-id="29e19-113">For example, the file adapter sees that a file has been placed in its configured location and reads that file in a stream.</span></span> <span data-ttu-id="29e19-114">El adaptador crea un mensaje (una implementación de la interfaz Microsoft.BizTalk.Message.Interop.IBaseMessage), le agrega una parte (una implementación de la interfaz Microsoft.BizTalk.Message.Interop.IBasePart) y proporciona la secuencia de datos como el contenido de esa parte.</span><span class="sxs-lookup"><span data-stu-id="29e19-114">The adapter creates a message (an implementation of the Microsoft.BizTalk.Message.Interop.IBaseMessage interface), adds a part to it (an implementation of the Microsoft.BizTalk.Message.Interop.IBasePart interface), and provides the stream of data as the part content.</span></span>  
  
 <span data-ttu-id="29e19-115">Asimismo, el adaptador escribe y promociona en el mensaje propiedades de contexto relacionadas con la ubicación, el tipo de adaptador y otros elementos relacionados con él.</span><span class="sxs-lookup"><span data-stu-id="29e19-115">In addition, the adapter writes and promotes into the message context properties related to the location, adapter type, and others related to the adapter.</span></span> <span data-ttu-id="29e19-116">Después de haber creado el mensaje y su contexto, el adaptador transmite el mensaje al Gestor extremo.</span><span class="sxs-lookup"><span data-stu-id="29e19-116">After the message and its context have been created, the adapter passes the message to the Endpoint Manager.</span></span> <span data-ttu-id="29e19-117">El mensaje se procesa a través de la canalización de recepción, configurada para la ubicación de recepción.</span><span class="sxs-lookup"><span data-stu-id="29e19-117">The message is then processed through the receive pipeline, which has been configured for the receive location.</span></span> <span data-ttu-id="29e19-118">Después de que la canalización ha procesado el mensaje, se puede utilizar una asignación para transformar el mensaje en el formato deseado antes de que el Gestor extremo lo publique con el Agente de mensaje.</span><span class="sxs-lookup"><span data-stu-id="29e19-118">After the message has been processed by the pipeline, a map may be used to transform the message into the format desired before the Endpoint Manager publishes the message with the Message Agent.</span></span>  
  
## <a name="the-role-of-the-pipeline"></a><span data-ttu-id="29e19-119">El rol de la canalización</span><span class="sxs-lookup"><span data-stu-id="29e19-119">The Role of the Pipeline</span></span>  
 <span data-ttu-id="29e19-120">Mientras que el adaptador es el encargado de crear el mensaje inicial, la mayor parte del procesamiento que se realiza sobre un mensaje recibido ocurre en la canalización de recepción.</span><span class="sxs-lookup"><span data-stu-id="29e19-120">While it is the adapter that creates the initial message, most of the processing that occurs on a received message happens in the receive pipeline.</span></span> <span data-ttu-id="29e19-121">El procesamiento de la canalización se ocupa del contenido del mensaje y de su contexto.</span><span class="sxs-lookup"><span data-stu-id="29e19-121">Pipeline processing deals with message content as well as message context.</span></span> <span data-ttu-id="29e19-122">El contenido del mensaje se realiza por regla general en las fases de validación, desensamblado y descodificación, mientras que el contexto del mensaje se lleva a cabo en todas las fases.</span><span class="sxs-lookup"><span data-stu-id="29e19-122">Message content is generally handled in the decoding, disassembling, and validating stages, while message context can be handled in all stages.</span></span> <span data-ttu-id="29e19-123">No obstante, una canalización no tiene que actuar necesariamente en el contenido o en el contexto.</span><span class="sxs-lookup"><span data-stu-id="29e19-123">A pipeline, however, does not necessarily act on either the content or the context.</span></span> <span data-ttu-id="29e19-124">Por ejemplo, la canalización de paso predeterminada no posee componentes configurados y no procesa el contenido ni el contexto del mensaje.</span><span class="sxs-lookup"><span data-stu-id="29e19-124">For example, the default pass-through pipeline has no components configured and performs no processing on the message content or context.</span></span> <span data-ttu-id="29e19-125">Para facilitar la tarea, este documento se centra en los componentes de desensamblado, pues éstos son los que tienen mayor influencia en el enrutamiento de mensajes.</span><span class="sxs-lookup"><span data-stu-id="29e19-125">For simplicity, this document focuses on the disassembling components as they generally have the greatest impact on message routing.</span></span>  
  
 <span data-ttu-id="29e19-126">La tarea del *desensamblador* consiste en procesar un mensaje entrante de un adaptador, desensamblarlo en varios mensajes y analizar sus datos.</span><span class="sxs-lookup"><span data-stu-id="29e19-126">The job of the *disassembler* is to process an incoming message from an adapter and to disassemble it into many messages, and parse the message data.</span></span> <span data-ttu-id="29e19-127">Cuando un mensaje entrante tiene muchos mensajes más pequeños, esto se conoce como un *intercambio*.</span><span class="sxs-lookup"><span data-stu-id="29e19-127">When an incoming message has many smaller messages, this is known as an *interchange*.</span></span> <span data-ttu-id="29e19-128">El desensamblador de archivos sin formato y el desensamblador XML controlan los intercambios habilitando a los programadores para configurar el contenido que rodea al núcleo del mensaje (el encabezado y el esquema de delimitación en el desensamblador de archivos sin formato, y el esquema de sobres en el desensamblador XML) y el contenido del cuerpo del mensaje, que será repetitivo con toda probabilidad.</span><span class="sxs-lookup"><span data-stu-id="29e19-128">Both the flat file disassembler and the XML disassembler handle interchanges by enabling a developer to configure information about the wrapping content (that is, a header and trailing schema for the flat file disassembler and an envelope schema for the XML disassembler) and the (potentially repeating) body content.</span></span> <span data-ttu-id="29e19-129">Además, los dos desensambladores analizan el mensaje original en contenido XML.</span><span class="sxs-lookup"><span data-stu-id="29e19-129">In addition, both of these disassemblers parse the original message into XML content.</span></span> <span data-ttu-id="29e19-130">Un desensamblador personalizado no tiene que analizar necesariamente el contenido en XML si no es necesario continuar el procesamiento de XML en BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="29e19-130">A custom disassembler does not necessarily parse the content into XML if further XML processing in BizTalk Server is not required.</span></span> <span data-ttu-id="29e19-131">Un escenario de ejemplo puede incluir una situación de enrutamiento sencillo en la que los mensajes que entran al sistema por una ubicación de recepción determinada se envían a un puerto de envío específico sin que se produzcan asignaciones ni procesamientos basados en XML.</span><span class="sxs-lookup"><span data-stu-id="29e19-131">An example scenario might include a simple routing situation in which messages entering the system at a particular receive location are sent to a specific send port with no mapping or other XML-based processing.</span></span>  
  
## <a name="routing-with-the-message-type"></a><span data-ttu-id="29e19-132">Enrutar con el tipo de mensaje</span><span class="sxs-lookup"><span data-stu-id="29e19-132">Routing with the Message Type</span></span>  
 <span data-ttu-id="29e19-133">Una de las propiedades de mensaje más utilizadas en el enrutamiento es el tipo de mensaje.</span><span class="sxs-lookup"><span data-stu-id="29e19-133">One of the most common message properties used in routing is the message type.</span></span> <span data-ttu-id="29e19-134">Cuando un programador crea un esquema para definir la estructura de los mensajes, este esquema define el tipo de mensaje para esos mensajes.</span><span class="sxs-lookup"><span data-stu-id="29e19-134">When a developer creates a schema to define the structure of messages, this schema defines the message type for that message.</span></span> <span data-ttu-id="29e19-135">El tipo está determinado por el nodo raíz y el espacio de nombres de la definición del esquema.</span><span class="sxs-lookup"><span data-stu-id="29e19-135">The type is determined by the root node and namespace in the schema definition.</span></span> <span data-ttu-id="29e19-136">Por ejemplo, un documento XML con el siguiente aspecto tendría un tipo de mensaje http://tempuri.org/samples/MessageType#Message</span><span class="sxs-lookup"><span data-stu-id="29e19-136">For example, an XML document that looks like the following would have a message type of http://tempuri.org/samples/MessageType#Message</span></span>  
  
```  
<Message xmlns=http://tempuri.org/samples/MessageType>  
<SomeOtherElement type="sample"/>  
</Message>  
```  
  
 <span data-ttu-id="29e19-137">Para utilizar el tipo de mensaje en el enrutamiento, debe estar promocionado en el contexto.</span><span class="sxs-lookup"><span data-stu-id="29e19-137">To use message type in routing, it must be promoted into the context.</span></span> <span data-ttu-id="29e19-138">Los desensambladores se utilizan para promocionar este valor en el contexto del mensaje y en los componentes de canalización con el conocimiento más específico de la estructura del mensaje.</span><span class="sxs-lookup"><span data-stu-id="29e19-138">Disassemblers are used to promote this value into the message context as well as the pipeline components with the most specific knowledge of message structure.</span></span> <span data-ttu-id="29e19-139">Los desensambladores XML y de archivos sin formato promocionan el tipo de mensaje a medida que procesan los mensajes. Ningún desensamblador personalizado debe promocionar esta propiedad para garantizar el enrutamiento adecuado.</span><span class="sxs-lookup"><span data-stu-id="29e19-139">The XML and Flat File disassemblers promote the message type as they are processing messages, and any custom disassembler should also promote this property to ensure proper routing.</span></span>  
  
 <span data-ttu-id="29e19-140">Es importante tener en cuenta que el tipo de mensaje no es una propiedad obligatoria en los mensajes.</span><span class="sxs-lookup"><span data-stu-id="29e19-140">It is important to note that a message is not required to have a type.</span></span> <span data-ttu-id="29e19-141">Como se ha mencionado anteriormente, las partes de un mensaje pueden ser datos binarios, y no tienen que disponer de un esquema que defina su estructura.</span><span class="sxs-lookup"><span data-stu-id="29e19-141">As mentioned previously, the parts of a message can be any binary data and need not have a schema that defines their structure.</span></span> <span data-ttu-id="29e19-142">Por regla general, este tipo de parte de mensaje se transmite a través de BizTalk Server sin necesidad de procesamiento adicional, pese a que los componentes de canalización personalizados, los adaptadores o el código de las orquestaciones puedan interactuar con estas partes.</span><span class="sxs-lookup"><span data-stu-id="29e19-142">This type of message part is generally passed through BizTalk Server without much, if any, processing done on it by BizTalk Server itself, though custom pipeline components, adapters, or code called from orchestrations may interact with these parts.</span></span>  
  
 <span data-ttu-id="29e19-143">Los componentes de canalización, como los adaptadores, también escriben y promocionan propiedades en el contexto del mensaje.</span><span class="sxs-lookup"><span data-stu-id="29e19-143">Pipeline components, like adapters, also write and promote properties into the message context.</span></span> <span data-ttu-id="29e19-144">De hecho, los componentes de canalización constituyen el mecanismo más utilizado por los programadores para obtener propiedades en el contexto del mensaje.</span><span class="sxs-lookup"><span data-stu-id="29e19-144">In fact, pipeline components are the most common mechanism most developers use to get properties into the message context.</span></span> <span data-ttu-id="29e19-145">Los programadores crean esquemas y pueden promocionar propiedades en el esquema.</span><span class="sxs-lookup"><span data-stu-id="29e19-145">Developers create schemas and can promote properties in the schema.</span></span> <span data-ttu-id="29e19-146">Esta información se almacena en el esquema en forma de anotaciones y los componentes de canalización pueden hacer uso de ellas.</span><span class="sxs-lookup"><span data-stu-id="29e19-146">This information is stored in the schema as annotations which can then be used by pipeline components.</span></span> <span data-ttu-id="29e19-147">Todos los componentes de ensamblado y desensamblado integrados (archivos sin formato, XML y BizTalk Framework) utilizan el esquema de documento para recuperar información sobre las propiedades que se van a promocionar.</span><span class="sxs-lookup"><span data-stu-id="29e19-147">All of the built-in disassembler and assembler components - FlatFile, XML, and BizTalk Framework - use the document schema to retrieve information about the properties that are to be promoted.</span></span> <span data-ttu-id="29e19-148">Gracias al empleo de la instrucción del lenguaje de rutas XML (XPath) de las anotaciones, el desensamblador conoce la ubicación de los elementos del documento que se van a promocionar.</span><span class="sxs-lookup"><span data-stu-id="29e19-148">Using the XML Path Language (XPath) statement from the annotations, the disassembler knows the location in the document of elements to be promoted.</span></span> <span data-ttu-id="29e19-149">Durante el proceso de transmisión a través del documento, el desensamblador encuentra aquellos elementos que coinciden con una de las instrucciones XPath, y promociona o escribe el valor en el contexto como proceda.</span><span class="sxs-lookup"><span data-stu-id="29e19-149">During the process of streaming through the document, the disassembler finds those elements that match one of the XPath statements and promotes or writes the value into the context as appropriate.</span></span>  
  
 <span data-ttu-id="29e19-150">También es posible escribir los componentes de canalización personalizados para controlar las propiedades que se obtienen en el contexto de los datos arbitrarios de un mensaje enviado o recibido.</span><span class="sxs-lookup"><span data-stu-id="29e19-150">Custom pipeline components can also be written to handle getting properties into the context for arbitrary data in a received or sent message.</span></span> <span data-ttu-id="29e19-151">Con el fin de promocionar una propiedad en el contexto y utilizarla en el enrutamiento, que es lo que supuestamente se persigue con la promoción de valores, es posible crear un esquema de propiedades con una definición para la propiedad e implementarlo en BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="29e19-151">In order to promote a property into the context and have it be useful for routing, which is presumably why the value is being promoted, a property schema with a definition for the property should be created and deployed to BizTalk Server.</span></span> <span data-ttu-id="29e19-152">Antes de definir un esquema de propiedades para que lo utilicen los componentes personalizados, debe conocer los distintos tipos de propiedades promocionadas.</span><span class="sxs-lookup"><span data-stu-id="29e19-152">Before you define a property schema to be used by custom components, you should understand the different types of promoted properties.</span></span> <span data-ttu-id="29e19-153">Las propiedades promocionadas definidas en un esquema de propiedades pueden ser de dos tipos de base:</span><span class="sxs-lookup"><span data-stu-id="29e19-153">Promoted properties defined in a property schema can have one of two base types:</span></span>  
  
- <span data-ttu-id="29e19-154">[Microsoft.XLANGs.BaseTypes.MessageContextPropertyBase](http://msdn.microsoft.com/library/microsoft.xlangs.basetypes.messagecontextpropertybase.aspx) o</span><span class="sxs-lookup"><span data-stu-id="29e19-154">[Microsoft.XLANGs.BaseTypes.MessageContextPropertyBase](http://msdn.microsoft.com/library/microsoft.xlangs.basetypes.messagecontextpropertybase.aspx) or</span></span>  
  
- [<span data-ttu-id="29e19-155">Microsoft.XLANGs.BaseTypes.MessageDataPropertyBase</span><span class="sxs-lookup"><span data-stu-id="29e19-155">Microsoft.XLANGs.BaseTypes.MessageDataPropertyBase</span></span>](http://msdn.microsoft.com/library/microsoft.xlangs.basetypes.messagedatapropertybase.messagedatapropertybase.aspx)  
  
  <span data-ttu-id="29e19-156">Un propiedad con el tipo de base MessageDataPropertyBase indica que su valor procede del contenido del mensaje.</span><span class="sxs-lookup"><span data-stu-id="29e19-156">A property with a base type of MessageDataPropertyBase indicates that the value for this property comes from the content of the message.</span></span> <span data-ttu-id="29e19-157">Éste es el valor predeterminado en las propiedades definidas en esquemas de propiedades y representa el empleo más habitual.</span><span class="sxs-lookup"><span data-stu-id="29e19-157">This is the default value for properties defined in a property schema and is the most common usage.</span></span> <span data-ttu-id="29e19-158">MessageContextPropertyBase indica una propiedad diseñada para formar parte del contexto del mensaje, pero no tiene que proceder directamente de los datos del mensaje.</span><span class="sxs-lookup"><span data-stu-id="29e19-158">MessageContextPropertyBase indicates a property that is intended to be part of the message context but does not necessarily come from the message data directly.</span></span> <span data-ttu-id="29e19-159">Con frecuencia, las propiedades con el tipo de base MessageContextPropertyBase se promocionan mediante adaptadores y desensambladores, e incluyen propiedades comunes como, por ejemplo, tipo de mensaje y tipo de adaptador.</span><span class="sxs-lookup"><span data-stu-id="29e19-159">Properties with MessageContextPropertyBase as their base type are often promoted by adapters and disassemblers and include common properties such as message type and adapter type.</span></span>  
  
  <span data-ttu-id="29e19-160">Es importante comprender los distintos tipos de base y utilizarlos correctamente al definir propiedades.</span><span class="sxs-lookup"><span data-stu-id="29e19-160">It is important to understand the different types and use them appropriately when defining properties.</span></span> <span data-ttu-id="29e19-161">Una de las repercusiones más significativas se produce al obtener acceso a las propiedades de contexto de un mensaje en una orquestación.</span><span class="sxs-lookup"><span data-stu-id="29e19-161">One of the most significant implications occurs when accessing context properties for a message in an orchestration.</span></span> <span data-ttu-id="29e19-162">Si una propiedad se identifica como MessageDataPropertyBase, el Diseñador de orquestaciones analiza el esquema del mensaje que se recibe y se asegura de que define una propiedad promocionada coincidente.</span><span class="sxs-lookup"><span data-stu-id="29e19-162">If a property is identified as a MessageDataPropertyBase, the Orchestration Designer examines the schema of the message being received and ensures that it defines a matching promoted property.</span></span> <span data-ttu-id="29e19-163">Si no existe ninguna propiedad en el esquema que se vincula a la propiedad promocionada en cuestión, el Diseñador no le permite obtener acceso a ella.</span><span class="sxs-lookup"><span data-stu-id="29e19-163">If no property is found in the schema tied to the promoted property being accessed, then the Designer does not allow you to access it.</span></span> <span data-ttu-id="29e19-164">Por otro lado, si la propiedad está definida como MessageContextPropertyBase, el tipo de mensaje no tiene importancia y es posible obtener acceso a la propiedad.</span><span class="sxs-lookup"><span data-stu-id="29e19-164">On the other hand, if the property is defined as being a MessageContextPropertyBase, the message type does not matter and the property can be accessed.</span></span>  
  
  <span data-ttu-id="29e19-165">En las canalizaciones personalizadas, el mecanismo encargado de promocionar o escribir propiedades en el contexto actúa de una forma similar.</span><span class="sxs-lookup"><span data-stu-id="29e19-165">In custom pipelines, the mechanism for promoting or writing properties to the context is very similar.</span></span> <span data-ttu-id="29e19-166">Para escribir propiedades, se utiliza una llamada al método IBaseMessageContext.Write para situar el valor en el contexto.</span><span class="sxs-lookup"><span data-stu-id="29e19-166">For writing properties, you use a call to the IBaseMessageContext Write method to place the value in the context.</span></span> <span data-ttu-id="29e19-167">Por el contrario, en las propiedades promocionadas únicamente se utiliza el método IBaseMessageContext.Promote.</span><span class="sxs-lookup"><span data-stu-id="29e19-167">For promoted properties, you simply use the IBaseMessageContext Promote method instead.</span></span> <span data-ttu-id="29e19-168">Todos estos métodos adoptan un nombre de propiedad, un espacio de nombres y un valor.</span><span class="sxs-lookup"><span data-stu-id="29e19-168">Each of these methods takes a property name, a namespace, and value.</span></span> <span data-ttu-id="29e19-169">En las propiedades promocionadas, el nombre y el espacio de nombres equivalen al de la propiedad definida en el esquema de propiedades. Además, el acceso a ellos resulta mucho más sencillo, pues puede llevarse a cabo haciendo referencia al ensamblado del esquema de propiedades y utilizando las propiedades de la clase que se ha creado para la propiedad.</span><span class="sxs-lookup"><span data-stu-id="29e19-169">For the promoted properties, the name and namespace are those of the property defined in the property schema and are most easily accessed by referencing the property schema assembly and using the properties on the class created for the property.</span></span> <span data-ttu-id="29e19-170">Los campos distintivos utilizan un espacio de nombres común, http://schemas.microsoft.com/BizTalk/2003/btsDistinguishedFields, y la expresión XPath que se usa para recuperar el valor se utiliza normalmente como el nombre.</span><span class="sxs-lookup"><span data-stu-id="29e19-170">Distinguished fields use a common namespace, http://schemas.microsoft.com/BizTalk/2003/btsDistinguishedFields, and the XPath expression used to retrieve the value is usually used as the name.</span></span>  
  
  <span data-ttu-id="29e19-171">El código siguiente muestra un ejemplo de la escritura y la promoción de propiedades en el contexto.</span><span class="sxs-lookup"><span data-stu-id="29e19-171">The code below shows an example of both promoting and writing properties into the context.</span></span> <span data-ttu-id="29e19-172">Tenga en cuenta que, en este ejemplo, un campo distintivo se está escribiendo en el contexto.</span><span class="sxs-lookup"><span data-stu-id="29e19-172">Note that in this example, a distinguished field is being written into the context.</span></span> <span data-ttu-id="29e19-173">Esto solo resulta de utilidad en aquellas orquestaciones en las que el esquema de mensaje identifica los campos distintivos para que el Diseñador de orquestaciones conozca el campo.</span><span class="sxs-lookup"><span data-stu-id="29e19-173">This is only useful for orchestrations in which the message schema identifies the distinguished field so that the Orchestration Designer knows about the field.</span></span> <span data-ttu-id="29e19-174">Puede servir para escribir propiedades en el contexto a fin de que las utilicen otros componentes de canalización de envío o recepción.</span><span class="sxs-lookup"><span data-stu-id="29e19-174">It may be useful to write properties into the context for use by other pipeline components on the receiving or sending side.</span></span>  
  
```  
//create an instance of the property to be promoted  
SOAP.MethodName methodName = new SOAP.MethodName();  
  
//call the promote method on the context using the property class for name   
//and namespace  
pInMsg.Context.Promote(methodName.Name.Name, methodName.Name.Namespace,   
"theSOAPMethodName");  
  
//write a distinguished field to the context  
pInMsg.Context.Write("theDistinguishedProperty",   
"http://schemas.microsoft.com/BizTalk/2003/btsDistinguishedFields",   
"theDistinguishedValue");  
```  
  
 <span data-ttu-id="29e19-175">Tenga en cuenta las recomendaciones siguientes a la hora de escribir o promocionar valores en el contexto:</span><span class="sxs-lookup"><span data-stu-id="29e19-175">Keep the following facts in mind when writing or promoting values into the context:</span></span>  
  
- <span data-ttu-id="29e19-176">Si escribe un valor en el contexto con el mismo nombre y espacio de nombres que los que se utilizaron con anterioridad para promocionar la propiedad, no se podrá promocionar de nuevo la propiedad.</span><span class="sxs-lookup"><span data-stu-id="29e19-176">Writing a value into the context with the same name and namespace that were used previously to promote the property causes that property to no longer be promoted.</span></span> <span data-ttu-id="29e19-177">Básicamente, la escritura sobrescribe la promoción.</span><span class="sxs-lookup"><span data-stu-id="29e19-177">The write essentially overwrites the promotion.</span></span>  
  
- <span data-ttu-id="29e19-178">Si escribe un valor nulo en el contexto, el valor se elimina, pues no están permitidas las propiedades con valor nulo.</span><span class="sxs-lookup"><span data-stu-id="29e19-178">Writing a value of null into the context deletes the value, because null-valued properties are not permitted.</span></span>  
  
- <span data-ttu-id="29e19-179">Las propiedades promocionadas no pueden poseer más de 256 caracteres de longitud, mientras que en las propiedades escritas no existe limitación.</span><span class="sxs-lookup"><span data-stu-id="29e19-179">Promoted properties are limited to 256 characters in length while written properties have no length limitation.</span></span>  
  
  <span data-ttu-id="29e19-180">Las propiedades promocionadas se utilizan en el enrutamiento de mensajes y poseen un tamaño limitado por motivos de eficacia en su comparación y almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="29e19-180">Promoted properties are used in message routing and are limited in size for reasons of efficiency in comparison and storage.</span></span> <span data-ttu-id="29e19-181">Aunque las propiedades escritas no poseen limitaciones en el tamaño, el empleo de valores excesivamente grandes en el contexto puede afectar al rendimiento, ya que pueden procesarse y transmitirse con el mensaje.</span><span class="sxs-lookup"><span data-stu-id="29e19-181">While written properties have no hard limits on size, using excessively large values in the context will have an impact on performance, because those values must still be processed and passed with the message.</span></span>  
  
  <span data-ttu-id="29e19-182">Cuando un mensaje está listo para enviarse desde BizTalk Server, realiza un procesamiento complementario en el puerto de envío.</span><span class="sxs-lookup"><span data-stu-id="29e19-182">When a message is ready to be sent from BizTalk Server, it undergoes a complementary process in the send port.</span></span> <span data-ttu-id="29e19-183">Las asignaciones se aplican a los mensajes antes de que se ejecute la canalización de envío, lo que hace posible la transformación del mensaje en un formato específico del cliente o la aplicación. Esto último se lleva a cabo antes de que la canalización lo procese y el adaptador lo envíe.</span><span class="sxs-lookup"><span data-stu-id="29e19-183">Maps are applied to messages before the send pipeline is executed, allowing a message to be transformed to a customer or application-specific format before being processed by the pipeline and sent through the adapter.</span></span> <span data-ttu-id="29e19-184">En la canalización de envío, las propiedades se degradan en el mensaje desde el contexto, en lugar de promocionarse en el contexto del mensaje.</span><span class="sxs-lookup"><span data-stu-id="29e19-184">In the send pipeline, instead of promoting properties into the message context, properties are demoted from the context into the message.</span></span>  
  
  <span data-ttu-id="29e19-185">![Puerto de envío y proceso de canalización de envío](../core/media/arch-message-processing-2.gif "arch_message_processing-2")</span><span class="sxs-lookup"><span data-stu-id="29e19-185">![Send port, and send pipeline process](../core/media/arch-message-processing-2.gif "arch_message_processing-2")</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="29e19-186">Vea también</span><span class="sxs-lookup"><span data-stu-id="29e19-186">See Also</span></span>  
 <span data-ttu-id="29e19-187">[Arquitectura en tiempo de ejecución](../core/runtime-architecture.md) </span><span class="sxs-lookup"><span data-stu-id="29e19-187">[Runtime Architecture](../core/runtime-architecture.md) </span></span>  
 [<span data-ttu-id="29e19-188">Cómo procesa BizTalk Server los mensajes de gran tamaño</span><span class="sxs-lookup"><span data-stu-id="29e19-188">How BizTalk Server Processes Large Messages</span></span>](../core/how-biztalk-server-processes-large-messages.md)
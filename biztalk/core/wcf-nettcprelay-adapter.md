---
title: Adaptador WCF-NetTcpRelay | Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 7f6c6afc-6aa9-4962-91e6-1fcd92744534
caps.latest.revision: 6
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: b0363ad5f36e5a39d7135b222fe20a0383a73ec9
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/27/2018
ms.locfileid: "36999701"
---
# <a name="wcf-nettcprelay-adapter"></a>Adaptador WCF-NetTcpRelay
Microsoft [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] usa el **WCF-NetTcpRelay** adaptador para recibir y enviar solicitudes de servicio WCF a través de la [clase NetTcpRelayBinding](https://msdn.microsoft.com/library/azure/microsoft.servicebus.nettcprelaybinding.aspx).  

En este tema se enumera los pasos para configurar un **WCF-NetTcpRelay** ubicación de recepción y envío de puerto mediante el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] consola de administración.  

## <a name="before-you-begin"></a>Antes de comenzar

A partir de [!INCLUDE[bts2016_md](../includes/bts2016-md.md)], este adaptador puede usar Access Control Service (ACS) o la firma de acceso compartido (SAS) para athenticate con Service Bus. Se recomienda usar la firma de acceso compartido (SAS) para autenticar con Service Bus. 

Cuando se crea un espacio de nombres de Service Bus, no se crea automáticamente el espacio de nombres de Access Control (ACS). Si usar ACS para autenticar, es posible que deba crear un nuevo espacio de nombres de ACS. Consulte [adaptador SB-Messaging](../core/sb-messaging-adapter.md) para obtener más información, incluidos los pasos para recuperar los valores de clave de ACS.

## <a name="create-the-receive-location"></a>Crear la ubicación de recepción

> [!NOTE]
>  Antes de completar el procedimiento siguiente, debe haber agregado un unidireccional puerto de recepción. Consulte [cómo crear un puerto de recepción](../core/how-to-create-a-receive-port.md).  

1. En la consola de administración de BizTalk, expanda **administración de BizTalk Server**, expanda **grupo de BizTalk**, expanda **aplicaciones**y, a continuación, expanda la aplicación, ¿desea crear una ubicación de recepción.  

2. En la consola de administración de BizTalk, en el panel izquierdo, haga clic en el nodo **Puerto de recepción** . A continuación, en el panel de la derecha, haga clic con el botón secundario en el puerto de recepción asociado con una ubicación de recepción existente o que desee asociar con una nueva ubicación de recepción. A continuación, haga clic en **Propiedades**.  

3. En el cuadro de diálogo **Propiedades de puerto de recepción** , en el panel de la izquierda, seleccione **Ubicaciones de recepción**y, a continuación, en el panel de la derecha, haga doble clic en una ubicación de recepción existente o haga clic en **Nuevo** para crear una nueva ubicación de recepción.  

4. En la sección **Transporte** del cuadro de diálogo **Propiedades de ubicación de recepción** , seleccione **WCF-NetTcpRelay** de la lista desplegable **Tipo** y, a continuación, haga clic en **Configurar** para configurar las propiedades de transporte para la ubicación de recepción.  

5. En la pestaña **General** del cuadro de diálogo **Propiedades de transporte WCF-NetTcpRelay** , configure la dirección del extremo y la identidad del extremo para la ubicación de recepción WCF-NetTcpRelay.  


   |       Use        |                                                                                                                                                                                                                     Para                                                                                                                                                                                                                     |
   |-----------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   |   **Dirección (URI)**   |                                                                                                                                    Requerido. Especificar el URI completo de la ubicación de recepción. Normalmente, tendrá el siguiente formato:<br /><br /> `sb://<Namespace>.servicebus.windows.net/`                                                                                                                                     |
   | **Identidad de extremo** | Opcional. Especifique la identidad del extremo. Esta configuración habilita al extremo para autenticar la ubicación de recepción. En el proceso de negociación entre el extremo y la ubicación de recepción, la infraestructura de Windows Communication Foundation (WCF) asegurará que la identidad del extremo coincide con los valores de este elemento.<br /><br /> Longitud mínima: 0<br /><br /> Longitud máxima: 32767<br /><br /> El valor predeterminado es una cadena vacía. |


6. En la pestaña **Enlace** del cuadro de diálogo **Propiedades de transporte WCF-NetTcpRelay** , configure las propiedades de tiempo de espera y de transacción.  


   |                 Use                  |                                                                                                                                                                                                                                                                                                                                                                                                                 Para                                                                                                                                                                                                                                                                                                                                                                                                                 |
   |-------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   |        **Abra el tiempo de espera (hh:mmss)**         |                                                                                                                                                                                                                                                                                     Especificar un valor de marco temporal que indica el intervalo de tiempo proporcionado para que se complete una operación de apertura del canal. Este valor debe ser mayor o igual que **System.TimeSpan.Zero**.<br /><br /> Valor predeterminado: 00:01:00<br /><br /> Valor máximo:  23:59:59                                                                                                                                                                                                                                                                                      |
   |        **Enviar el tiempo de espera (hh:mmss)**         |                                                                                                                                                                                                         Especificar un valor de marco temporal que indica el intervalo de tiempo proporcionado para que se complete una operación de envío. Este valor debe ser mayor o igual que **System.TimeSpan.Zero**. Si usa un puerto de recepción solicitud-respuesta, este valor especifica un marco temporal para que se complete la interacción, incluso cuando el cliente devuelva un mensaje grande.<br /><br /> Valor predeterminado: 00:01:00<br /><br /> Valor máximo:  23:59:59                                                                                                                                                                                                          |
   |        **Tiempo de espera de cierre (hh:mmss)**        |                                                                                                                                                                                                                                                                                     Especificar un valor de marco temporal que indica el intervalo de tiempo proporcionado para que se complete una operación de cierre del canal. Este valor debe ser mayor o igual que **System.TimeSpan.Zero**.<br /><br /> Valor predeterminado: 00:01:00<br /><br /> Valor máximo:  23:59:59                                                                                                                                                                                                                                                                                     |
   | **Tamaño máximo de mensaje recibido (bytes)** | Especificar el tamaño máximo, en bytes, para mensajes, con encabezados incluidos, que se pueden recibir a través de la red. El tamaño de los mensajes se limita mediante la cantidad de memoria asignada a cada mensaje. Puede usar esta propiedad para limitar la exposición a ataques por denegación de servicio (DoS).<br /><br /> El adaptador de WCF-NetTcpRelay aprovecha la [NetTcpRelayBinding](https://msdn.microsoft.com/library/azure/microsoft.servicebus.nettcprelaybinding.aspx) clase en el modo de transferencia almacenado en búfer para comunicarse con un punto de conexión. El modo de transporte almacenado en búfer el [NetTcpRelayBindingBase.MaxBufferSize](https://msdn.microsoft.com/library/azure/microsoft.servicebus.nettcprelaybindingbase.maxbuffersize.aspx) propiedad siempre es igual al valor de esta propiedad.<br /><br /> Valor predeterminado: 65536<br /><br /> Valor máximo: 2147483647 |
   |       **Número máximo de llamadas simultáneo**        |                                                                                                                                                                                                                                                                                                          Especificar el número de llamadas concurrentes en una instancia de servicio única. Las llamadas que superan el límite se ponen en cola. Establecer este valor como 0 es equivalente a establecerlo como **Int32.MaxValue**.<br /><br /> Valor predeterminado: 200                                                                                                                                                                                                                                                                                                           |


7. En la pestaña **Seguridad** del cuadro de diálogo **Propiedades de transporte WCF-NetTcpRelay** , defina las capacidades de seguridad de la ubicación de recepción WCF-NetTcpRelay.  


   |                Use                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               Para                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
   |----------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   |           **Modo de seguridad**            |                                                                                                                                                                                                                                                                                                Especificar el tipo de seguridad que se usa. Los valores válidos incluyen los siguientes:<br /><br /> -                          **Ninguno**: los mensajes no están protegidos durante la transferencia.<br /><br /> - **Transporte**: seguridad de transporte se proporciona mediante **TLS sobre TCP** o **SPNego**. Con este modo es posible controlar el nivel de protección. Si selecciona **Ninguno** o **Certificado** para la propiedad **Tipo de credenciales de cliente de transporte** en este modo de seguridad, debe proporcionar el certificado de servicio para esta ubicación de recepción mediante la propiedad **Huella digital de certificado de servicio** .<br /><br /> - **Mensaje**: se proporciona seguridad mediante la seguridad del mensaje SOAP. De forma predeterminada, el **Cuerpo** de SOAP está cifrado y firmado. Este modo ofrece varias características, por ejemplo, si están disponibles las credenciales de servicio en el cliente fuera de banda y el conjunto de algoritmos que se va a usar. Si selecciona **Ninguno**, **Nombre de usuario**o **Certificado** para la propiedad **Tipo de credenciales de cliente de mensajes** en este modo de seguridad, debe proporcionar el certificado de servicio para esta ubicación de recepción mediante la propiedad **Huella digital de certificado de servicio** .<br /><br /> -                          **TransportWithMessageCredential**: seguridad de transporte se combina con la seguridad de mensaje. La seguridad de transporte se proporciona mediante **TLS a través de TCP** o **SPNego** , y asegura la integridad, la confidencialidad y la autenticación de servidor. Si selecciona **Windows**, **Nombre de usuario**o **Certificado** para la propiedad **Tipo de credenciales de cliente de mensajes** en este modo de seguridad, debe proporcionar el certificado de servicio para esta ubicación de recepción mediante la propiedad **Huella digital de certificado de servicio** .<br /><br /> **Nota:** no se puede usar este modo de seguridad con el **tipo de credencial de cliente de transporte** propiedad **ninguno**.<br /><br /> El valor predeterminado es **Transporte**.                                                                                                                                                                                                                                                                                                 |
   |     **Nivel de protección de transporte**     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  Definir la seguridad en el nivel de transporte TCP. Si se firman los mensajes, se reduce el riesgo de que manipulen el mensaje terceros mientras éste se transfiere. El cifrado proporciona privacidad de nivel de datos durante el transporte. Los valores válidos incluyen los siguientes:<br /><br /> -                          **Ninguno**: sin protección.<br /><br /> - **Inicio de sesión**: los mensajes se firman.<br /><br /> - **EncryptAndSign**: los mensajes se cifran y firman.<br /><br /> El valor predeterminado es **EncryptAndSign**.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
   |   **Tipo de credencial de cliente de mensajes**   |                                                                                                                                                                                                                                 Especificar el tipo de credenciales que se va a usar a la hora de realizar la autenticación de cliente mediante la seguridad basada en mensajes. Esto es necesario solo si el **modo Seguridad** está establecido en **Mensaje** o **TransportWithMessageCredential**. Los valores válidos incluyen los siguientes:<br /><br /> -                          **Ninguno**: Esto permite al servicio interactuar con clientes anónimos. Indica que este cliente no proporciona credenciales de cliente.<br /><br /> - **Windows**: permitir que los intercambios de SOAP estar bajo el contexto autenticado de una credencial de Windows. La credencial de usuario pasa a través del elemento **Encabezado** de SOAP mediante el protocolo **WSS SOAP Message Security Kerberos Token Profile 1.0** . Debe crear las cuentas de dominio o de usuario local correspondientes a las credenciales del cliente. Además, el elemento **userPrincipalName** del cliente debe estar configurado con el nombre de cuenta del usuario que ejecuta este control de recepción.<br /><br /> - **Nombre de usuario**: los clientes se autentican en esta ubicación de recepción con un **UserName** credencial. La credencial pasa a través del elemento **Encabezado** de SOAP mediante el protocolo **WSS SOAP Message Security UsernameToken Profile 1.0** . Debe crear las cuentas de dominio o de usuario local correspondientes a las credenciales del cliente.<br /><br /> -**Certificado**: los clientes se autentican en esta ubicación de recepción mediante el certificado de cliente especificado mediante el **huella digital de certificado de servicio** propiedad. La credencial pasa a través del elemento **Encabezado** de SOAP mediante el protocolo **WSS SOAP Message Security X509 Token Profile 1.0** . Para autenticar los certificados de cliente, la cadena de certificados de CA para certificados de cliente debe estar instalada en el almacén de certificados Entidades emisoras de certificados raíz de confianza del equipo. Además, debe proporcionar el certificado de servicio correspondiente a esta ubicación mediante la propiedad **Huella digital de certificado de servicio** .<br /><br /> El valor predeterminado es **Windows**.                                                                                                                                                                                                                                  |
   |          **Conjunto de algoritmos**           | Especificar el cifrado de mensajes y los algoritmos de encapsulado de claves. Estos algoritmos se asignan a los que se indican en la especificación Security Policy Language (WS-SecurityPolicy). Los valores posibles son:<br /><br /> -                          **Basic128**: Use el cifrado Aes128, Sha1 para la síntesis del mensaje y Rsa-oaep-mgf1p para el encapsulado de claves.<br /><br /> -                          **Basic128Rsa15**: Use Aes128 para el cifrado de mensajes, Sha1 para la síntesis del mensaje y Rsa15 para el encapsulado de claves.<br /><br /> -                          **Basic128Sha256**: Use Aes256 para el cifrado de mensajes, Sha256 para la síntesis del mensaje y Rsa-oaep-mgf1p para el encapsulado de claves.<br /><br /> -                          **Basic128Sha256Rsa15**: Use Aes128 para el cifrado de mensajes, Sha256 para la síntesis del mensaje y Rsa15 para el encapsulado de claves.<br /><br /> - **Basic192**: Use el cifrado Aes192, Sha1 para la síntesis del mensaje y Rsa-oaep-mgf1p para el encapsulado de claves.<br /><br /> - **Basic192Rsa15**: Use Aes192 para el cifrado de mensajes, Sha1 para la síntesis del mensaje y Rsa15 para el encapsulado de claves.<br /><br /> -                          **Basic192Sha256**: Use Aes192 para el cifrado de mensajes, Sha256 para la síntesis del mensaje y Rsa-oaep-mgf1p para el encapsulado de claves.<br /><br /> -                          **Basic192Sha256Rsa15**: Use Aes192 para el cifrado de mensajes, Sha256 para la síntesis del mensaje y Rsa15 para el encapsulado de claves.<br /><br /> - **Basic256**: Use el cifrado Aes256, Sha1 para la síntesis del mensaje y Rsa-oaep-mgf1p para el encapsulado de claves.<br /><br /> -                          **Basic256Rsa15**: Use Aes256 para el cifrado de mensajes, Sha1 para la síntesis del mensaje y Rsa15 para el encapsulado de claves.<br /><br /> - **Basic256Sha256**: Use Aes256 para el cifrado de mensajes, Sha256 para la síntesis del mensaje y Rsa-oaep-mgf1p para el encapsulado de claves.<br /><br /> - **Basic256Sha256Rsa15**: Use Aes256 para el cifrado de mensajes, Sha256 para la síntesis del mensaje y Rsa15 para el encapsulado de claves.<br /><br /> - **TripleDes**: Use el cifrado TripleDes, Sha1 para la síntesis del mensaje y Rsa-oaep-mgf1p para el encapsulado de claves.<br /><br /> -                          **TripleDesRsa15**: Use el cifrado TripleDes, Sha1 para la síntesis del mensaje y Rsa15 para el encapsulado de claves.<br /><br /> - **TripleDesSha256**: Use TripleDes para el cifrado de mensajes, Sha256 para la síntesis del mensaje y Rsa-oaep-mgf1p para el encapsulado de claves.<br /><br /> -                          **TripleDesSha256Rsa15**: Use TripleDes para el cifrado de mensajes, Sha256 para la síntesis del mensaje y Rsa15 para el encapsulado de claves.<br /><br /> El valor predeterminado es **Basic256**. |
   |  **Servicio - huella digital del certificado**   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              Especificar la huella digital del certificado X.509 para esta ubicación de recepción que los clientes utilizan para autenticar el servicio. La huella digital puede seleccionarse desplazándose por **Mi** almacén, dentro de **Usuario actual** , con el botón **Examinar** .<br /><br /> **Nota:** debe instalar el certificado de servicio en la **usuario actual** ubicación de la cuenta de usuario para el controlador de recepción que aloja esta ubicación de recepción.<br /><br /> Longitud mínima: 0<br /><br /> Longitud máxima: 40<br /><br /> El valor predeterminado es una cadena vacía.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
   |  **Tipo de autenticación de cliente de retransmisión**  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Especifique la opción para autenticar con el extremo de retransmisión del Service Bus desde donde se recibe el mensaje. Los valores válidos incluyen los siguientes:<br /><br /> -                          **Ninguno**: No se requiere autenticación.<br /><br /> -                          **RelayAccessToken**: especifique este valor para usar un token de seguridad para autorizar con el extremo de retransmisión de Bus de servicio.<br /><br /> El valor predeterminado es **RelayAccessToken**.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
   |      **Habilitar la detección de servicios**      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              Seleccione esta casilla para especificar si el comportamiento del servicio se publica en el Registro de Servicio.<br /><br /> -                          **Nombre para mostrar** : especifique el nombre con el que el servicio se publica en el registro del servicio.<br /><br /> - **Modo de detección** : establecer el modo de detección del servicio publicado en el registro del servicio. Para obtener más información acerca de los modos de detección, consulte [ https://msdn.microsoft.com/library/microsoft.servicebus.discoverytype.aspx ](https://msdn.microsoft.com/library/microsoft.servicebus.discoverytype.aspx).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
   |       **Servicio de control de acceso**       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         Se aplica a [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)] y [!INCLUDE[btsBizTalkServerNoVersion_md](../includes/btsbiztalkservernoversion-md.md)] 2013.<br/><br/>Si establece el **Tipo de autenticación de cliente de retransmisión** en **RelayAccessToken**, haga clic en el botón **Editar** e indique los siguientes detalles:<br /><br /> - **Uri de STS de servicio de Control de acceso** : establezca esta opción en `https://<Namespace>-sb.accesscontrol.windows.net/`, donde \<espacio de nombres\> es el espacio de nombres de Service Bus.<br /><br /> - **Nombre del emisor** : especifique el nombre del emisor. Normalmente, este valor está establecido en el propietario.<br /><br /> - **Clave de emisor** : especifique la clave del emisor.<br /><br />                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   | **Información de conexión de Service Bus** |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         Nuevo a partir de [!INCLUDE[bts2016_md](../includes/bts2016-md.md)].<br/><br/>Elija esta opción utilizar la firma de acceso compartido (SAS) o de Access Control Service (ACS) del espacio de nombres de Service Bus. <br/><br/>Seleccione una opción y, a continuación, seleccione **editar** para escribir la información de clave:<br/><br/> - **Firma de acceso compartido** : escriba el nombre de clave de acceso y la clave de acceso. Ambos valores se muestran en el [portal Azure](https://portal.azure.com).<br/> - **Access Control Service** : escriba el URI de STS (`https://<yourNamespace>-sb.accesscontrol.windows.net/`), nombre de emisor y clave del emisor. Usar Windows PowerShell para recuperar estos valores, como se describe en [adaptador SB-Messaging](../core/sb-messaging-adapter.md).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |


8. En la pestaña **Mensajes** del cuadro de diálogo **Propiedades de transporte WCF-NetTcpRelay** , especifique la selección de datos para el elemento **Cuerpo** de SOAP.  


   |                   Use                    |                                                                                                                                                                                                                                                                                                                                                                Para                                                                                                                                                                                                                                                                                                                                                                |
   |-----------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   |   **Envoltura--toda \<soap: Envelope\>**    |                                                                                                                                                                                                                                                                                                 Cree la parte del cuerpo del mensaje de BizTalk a partir del **Sobre** de SOAP completo de un mensaje entrante.<br /><br /> Esta opción está desactivada de forma predeterminada.                                                                                                                                                                                                                                                                                                 |
   | **Cuerpo--contenido \<soap: Body\> elemento** |                                                                                                                                                                                                                               Usar el contenido del elemento **Cuerpo** de SOAP de un mensaje entrante para crear la parte del cuerpo del mensaje de BizTalk. Si el elemento **Body** tiene varios elementos secundarios, sólo el primero de ellos será la parte del cuerpo del mensaje de BizTalk.<br /><br /> Esta es la configuración predeterminada.                                                                                                                                                                                                                               |
   |   **Ruta – contenido ubicado por la ruta de cuerpo**    |                                                                                                                                                                                                                         Usar la expresión de ruta de cuerpo mostrada en el cuadro de texto **Expresión de ruta de cuerpo** para crear la parte del cuerpo del mensaje de BizTalk. Esta expresión se evalúa con respecto al elemento secundario inmediato del elemento **Cuerpo** de SOAP de un mensaje entrante.<br /><br /> Esta opción está desactivada de forma predeterminada.                                                                                                                                                                                                                          |
   |           **Expresión de ruta de cuerpo**            |                                                       Escribir la expresión de ruta de cuerpo para identificar una parte específica de un mensaje entrante utilizada para crear la parte del cuerpo del mensaje de BizTalk. Esta expresión de ruta de cuerpo se evalúa con respecto al elemento secundario inmediato del elemento **Cuerpo** de SOAP de un mensaje entrante. Si esta expresión de ruta de cuerpo devuelve varios nodos, solo se elegirá el primero de ellos para la parte del cuerpo del mensaje de BizTalk. Esta propiedad es necesaria si la opción **Ruta -- contenido ubicado por la ruta de cuerpo** aparece seleccionada.<br /><br /> Tipo: cadena<br /><br /> Longitud mínima: 0<br /><br /> Longitud máxima: 32767<br /><br /> El valor predeterminado es una cadena vacía.                                                        |
   |               **Codificación de nodo**               | Especifique el tipo de codificación que el adaptador de recepción WCF-NetTcpRelay usa para la descodificación correspondiente al nodo que la expresión de ruta de cuerpo identifica en el cuadro de texto **Expresión de ruta de cuerpo** . Esta propiedad es necesaria si la opción **Ruta -- contenido ubicado por la ruta de cuerpo** aparece seleccionada. Los valores válidos incluyen los siguientes:<br /><br /> - **Base64**: codificación Base64.<br /><br /> - **Hex**: codificación Hexadecimal.<br /><br /> -                          **Cadena**: codificación de texto - UTF-8<br /><br /> -                          **XML**: los adaptadores WCF crean el cuerpo del mensaje de BizTalk con el XML externo del nodo seleccionado por la expresión de ruta de cuerpo en el **expresión de ruta de cuerpo** cuadro de texto.<br /><br /> El valor predeterminado es **XML**. |
   |   **Cuerpo--Cuerpo de mensaje de respuesta de BizTalk**   |                                                                                                                                                                                                                                                    Use la parte del cuerpo del mensaje de BizTalk para crear el contenido del elemento **Cuerpo** de SOAP de un mensaje de respuesta saliente. Esta propiedad sólo es válida para las ubicaciones de recepción de solicitud-respuesta.<br /><br /> Esta es la configuración predeterminada.                                                                                                                                                                                                                                                    |
   | **Plantilla: contenido especificado por plantilla** |                                                                                                                                                                                                                                               Use la plantilla proporcionada en el cuadro de texto **XML** para crear el contenido del elemento **Cuerpo** de SOAP de un mensaje saliente. Esta propiedad sólo es válida para las ubicaciones de recepción de solicitud-respuesta.<br /><br /> Esta opción está desactivada de forma predeterminada.                                                                                                                                                                                                                                                |
   |                    **XML**                    |                                                                                                                         Escriba la plantilla con formato XML para el contenido del elemento **Cuerpo** de SOAP de un mensaje saliente. Esta propiedad es necesaria si la opción **Cuerpo – cuerpo de mensaje de respuesta de BizTalk** aparece seleccionada. Esta propiedad sólo es válida para las ubicaciones de recepción de solicitud-respuesta.<br /><br /> Tipo: cadena<br /><br /> Longitud mínima: 0<br /><br /> Longitud máxima: 32767<br /><br /> El valor predeterminado es  **\<bts-msg-body xmlns = "<http://www.microsoft.com/schemas/bts2007>" encoding = "xml"\>**.                                                                                                                          |
   |    **Suspender el mensaje de solicitud en caso de error**     |                                                                                                                                                                                                                                                                              Especificar si se va a suspender el mensaje de solicitud cuyo procesamiento de entrada no se puede realizar correctamente debido a un error de canalización de recepción o de enrutamiento.<br /><br /> Esta opción está desactivada de forma predeterminada.                                                                                                                                                                                                                                                                              |
   |    **Incluir detalle de excepción en errores**     |                                                                                                                                                                                                                                                                                                         Especificar si se van a devolver errores de SOAP cuando se produce un error para una depuración sencilla.<br /><br /> Esta opción está desactivada de forma predeterminada.                                                                                                                                                                                                                                                                                                          |


9. Haga clic en **Aceptar**.  

10. Especifique los valores apropiados en el cuadro de diálogo **Propiedades de la ubicación de recepción** para completar la configuración de la ubicación de recepción y haga clic en **Aceptar** para guardar la configuración. Para obtener información sobre la **propiedades de las ubicaciones de recepción** cuadro de diálogo, vea [cómo crear una ubicación de recepción](../core/how-to-create-a-receive-location.md). 

## <a name="create-the-send-port"></a>Crear el puerto de envío

1. En la consola de administración de BizTalk, cree un nuevo puerto de envío o haga doble clic en un puerto de envío existente para modificarlo. Para obtener más información, consulte [cómo crear un puerto de envío](../core/how-to-create-a-send-port2.md). Configure todas las opciones de puerto de envío y especifique **WCF-NetTcpRelay** para el **tipo** opción el **transporte** sección de la **General**ficha.  

2. En el **General** ficha la **transporte** sección, haga clic en el **configurar** botón.  

3. En el **propiedades de transporte WCF-NetTcpRelay** cuadro de diálogo el **General** ficha, especifique lo siguiente:  


   |       Use        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Para                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   |-----------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   |   **Dirección (URI)**   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     Requerido. Especifique el URI completo para el puerto de envío. Normalmente, tendrá el siguiente formato:<br /><br /> `sb://<Namespace>.servicebus.windows.net/`<br /><br /> Longitud máxima: 255<br /><br /> Valor predeterminado: NET. TCP://localhost /                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   | **Identidad de extremo** |                                                                                                                                                                                                                                                                                                                                                                                                                                                                            Opcional. Especifique la identidad del extremo al que el puerto de envío envía el mensaje. Esta configuración permite al puerto de envío autenticar el extremo. En el proceso de negociación entre el punto de conexión y puerto de envío, la infraestructura de Windows Communication Foundation (WCF) asegurará que la identidad del extremo coincide con los valores de este elemento. Los valores que se pueden especificar para el **identidad de extremo** propiedad difieren según la configuración de seguridad.<br /><br /> Esta opción está desactivada de forma predeterminada.                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |      **Acción**       | Especifique el **SOAPAction** campo de encabezado para los mensajes salientes. Esta propiedad también se puede establecer a través de la propiedad de contexto de mensaje **WCF. Acción** en una canalización u orquestación. Puede especificar este valor de dos maneras diferentes: el formato de acción única y el formato de asignación de acciones. Si establece esta propiedad en el formato de acción única: por ejemplo, <http://contoso.com/Svc/Op1-> el **SOAPAction** encabezado mensajes salientes siempre se establece en el valor especificado en esta propiedad.<br /><br /> Si establece esta propiedad en el formato de asignación de acción, la salida **SOAPAction** encabezado viene determinada por la **BTS. Operación** propiedad de contexto. Por ejemplo, si esta propiedad se establece en el siguiente formato XML y el **BTS. Operación** propiedad está establecida en Op1, el adaptador de envío WCF `uses http://contoso.com/Svc/Op1` para salida **SOAPAction** encabezado.<br /><br /> `<BtsActionMapping> <Operation Name="Op1" Action="http://contoso.com/Svc/Op1" /> <Operation Name="Op2" Action="http://contoso.com/Svc/Op2" /> </BtsActionMapping>`<br /><br /> Si los mensajes salientes proceden de un puerto de orquestación, las instancias de orquestación establecen dinámicamente el **BTS. Operación** propiedad con el nombre de la operación del puerto. Si los mensajes salientes se enrutan con enrutamiento por contenidos, puede establecer el **BTS. Operación** propiedad en componentes de canalización.<br /><br /> Longitud mínima: 0<br /><br /> Longitud máxima: 32767<br /><br /> El valor predeterminado es una cadena vacía. |


4. En la pestaña **Enlace** del cuadro de diálogo **Propiedades de transporte WCF-NetTcpRelay** , configure las propiedades de tiempo de espera y de transacción.  


   |                 Use                  |                                                                                                                                                                                                                                                                                                                                                                                                                 Para                                                                                                                                                                                                                                                                                                                                                                                                                 |
   |-------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   |        **Abra el tiempo de espera (hh:mmss)**         |                                                                                                                                                                                                                                                                                     Especificar un valor de marco temporal que indica el intervalo de tiempo proporcionado para que se complete una operación de apertura del canal. Este valor debe ser mayor o igual que **System.TimeSpan.Zero**.<br /><br /> Valor predeterminado: 00:01:00<br /><br /> Valor máximo:  23:59:59                                                                                                                                                                                                                                                                                      |
   |        **Enviar el tiempo de espera (hh:mmss)**         |                                                                                                                                                                                                          Especificar un valor de marco temporal que indica el intervalo de tiempo proporcionado para que se complete una operación de envío. Este valor debe ser mayor o igual que **System.TimeSpan.Zero**. Si usa un puerto de envío de petición-respuesta, este valor especifica un marco temporal para que se complete la interacción, incluso cuando el servicio devuelva un mensaje grande.<br /><br /> Valor predeterminado: 00:01:00<br /><br /> Valor máximo:  23:59:59                                                                                                                                                                                                           |
   |        **Tiempo de espera de cierre (hh:mmss)**        |                                                                                                                                                                                                                                                                                     Especificar un valor de marco temporal que indica el intervalo de tiempo proporcionado para que se complete una operación de cierre del canal. Este valor debe ser mayor o igual que **System.TimeSpan.Zero**.<br /><br /> Valor predeterminado: 00:01:00<br /><br /> Valor máximo:  23:59:59                                                                                                                                                                                                                                                                                     |
   | **Tamaño máximo de mensaje recibido (bytes)** | Especificar el tamaño máximo, en bytes, para mensajes, con encabezados incluidos, que se pueden recibir a través de la red. El tamaño de los mensajes se limita mediante la cantidad de memoria asignada a cada mensaje. Puede usar esta propiedad para limitar la exposición a ataques por denegación de servicio (DoS).<br /><br /> El adaptador de WCF-NetTcpRelay aprovecha la [NetTcpRelayBinding](https://msdn.microsoft.com/library/azure/microsoft.servicebus.nettcprelaybinding.aspx) clase en el modo de transferencia almacenado en búfer para comunicarse con un punto de conexión. El modo de transporte almacenado en búfer el [NetTcpRelayBindingBase.MaxBufferSize](https://msdn.microsoft.com/library/azure/microsoft.servicebus.nettcprelaybindingbase.maxbuffersize.aspx) propiedad siempre es igual al valor de esta propiedad.<br /><br /> Valor predeterminado: 65536<br /><br /> Valor máximo: 2147483647 |


5. En el **propiedades de transporte WCF-NetTcpRelay** cuadro de diálogo el **seguridad** pestaña, defina las capacidades de seguridad del puerto de envío WCF-NetTcpRelay.  


   |                Use                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      Para                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
   |----------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   |           **Modo de seguridad**            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              Especificar el tipo de seguridad que se usa. Los valores válidos incluyen los siguientes:<br /><br /> - **Ninguno**: los mensajes no están protegidos durante la transferencia.<br /><br /> - **Transporte**: seguridad de transporte se proporciona mediante **TLS sobre TCP** o **SPNego**. Con este modo es posible controlar el nivel de protección.<br /><br /> -                          **Mensaje**: se proporciona seguridad mediante la seguridad del mensaje SOAP. De forma predeterminada, el **Cuerpo** de SOAP está cifrado y firmado. Este modo ofrece varias características, por ejemplo, si están disponibles las credenciales de servicio en el cliente fuera de banda y el conjunto de algoritmos que se va a usar.<br /><br /> - **TransportWithMessageCredential**: seguridad de transporte se combina con la seguridad de mensaje. Seguridad de transporte se proporciona mediante **TLS sobre TCP**, o **SPNego**y garantiza la integridad, confidencialidad y autenticación de servidor. La seguridad de mensajes de SOAP proporciona autenticación de cliente. Para usar este modo, la cadena de certificados de CA del certificado X.509 del servicio debe estar instalada en el almacén de certificados Entidades emisoras de certificados raíz de confianza del equipo de modo que se pueda autenticar el servicio en el puerto de envío.<br /><br /> **Nota:** no se puede usar este modo de seguridad con el **tipo de credencial de cliente de transporte** propiedad **ninguno**.<br /><br /> El valor predeterminado es **Transporte**.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
   |     **Nivel de protección de transporte**     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            Definir la seguridad en el nivel de transporte TCP. Si se firman los mensajes, se reduce el riesgo de que manipulen el mensaje terceros mientras éste se transfiere. El cifrado proporciona privacidad de nivel de datos durante el transporte. Los valores válidos incluyen los siguientes:<br /><br /> -                          **Ninguno**: sin protección.<br /><br /> - **Inicio de sesión**: los mensajes se firman.<br /><br /> -                          **EncryptAndSign**: los mensajes se cifran y firman.<br /><br /> El valor predeterminado es **EncryptAndSign**.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |   **Tipo de credencial de cliente de mensajes**   |                               Especificar el tipo de credenciales que se va a usar a la hora de realizar la autenticación de cliente mediante la seguridad basada en mensajes. Esto es necesario solo si el **modo Seguridad** está establecido en **Mensaje** o **TransportWithMessageCredential**. Los valores válidos incluyen los siguientes:<br /><br /> - **Ninguno**: Esto permite al servicio interactuar con clientes anónimos. Indica que este puerto de envío no proporciona credenciales de cliente. La cadena de certificados de entidad emisora de certificados para el certificado X.509 del servicio debe instalarse en el almacén de certificados entidades emisoras raíz de confianza de este equipo para que se pueda autenticar el servicio en el puerto de envío.<br /><br /> -                          **Windows**: permitir que los intercambios de SOAP estar bajo el contexto autenticado de una credencial de Windows. La cuenta de usuario en la que se ejecuta este puerto de envío se usa para que los servicios autentiquen este puerto de envío. La credencial de usuario pasa a través del elemento **Encabezado** de SOAP mediante el protocolo **WSS SOAP Message Security Kerberos Token Profile 1.0** . Debe configurar el **nombre principal de usuario** propiedad al nombre de cuenta de usuario que ejecuta el servicio de destino mediante el uso de la **Editor de identidad** cuadro de diálogo.<br /><br /> - **Nombre de usuario**: este puerto de envío se autentica en servicios con un **UserName** credencial. La credencial pasa a través del elemento **Encabezado** de SOAP mediante el protocolo **WSS SOAP Message Security UsernameToken Profile 1.0** . Esta opción requiere configurar la **las credenciales del cliente** propiedad. La cadena de certificados de entidad emisora de certificados para el certificado X.509 del servicio debe instalarse en el almacén de certificados entidades emisoras raíz de confianza de este equipo para que se pueda autenticar el servicio en el puerto de envío.<br /><br /> - **Certificado**: este puerto de envío se autentica a los servicios mediante el certificado de cliente especificado mediante el **huella digital de certificado de cliente** propiedad. La credencial pasa a través del elemento **Encabezado** de SOAP mediante el protocolo **WSS SOAP Message Security X509 Token Profile 1.0** . La cadena de certificados de entidad emisora de certificados para el certificado X.509 del servicio debe instalarse en el almacén de certificados entidades emisoras raíz de confianza de este equipo para que se pueda autenticar el servicio en el puerto de envío.<br /><br /> El valor predeterminado es **Windows**.                               |
   |          **Conjunto de algoritmos**           | Especificar el cifrado de mensajes y los algoritmos de encapsulado de claves. Estos algoritmos se asignan a los que se indican en la especificación Security Policy Language (WS-SecurityPolicy). Los valores posibles son:<br /><br /> - **Basic128**: Use el cifrado Aes128, Sha1 para la síntesis del mensaje y Rsa-oaep-mgf1p para el encapsulado de claves.<br /><br /> - **Basic128Rsa15**: Use Aes128 para el cifrado de mensajes, Sha1 para la síntesis del mensaje y Rsa15 para el encapsulado de claves.<br /><br /> -                          **Basic128Sha256**: Use Aes256 para el cifrado de mensajes, Sha256 para la síntesis del mensaje y Rsa-oaep-mgf1p para el encapsulado de claves.<br /><br /> -                          **Basic128Sha256Rsa15**: Use Aes128 para el cifrado de mensajes, Sha256 para la síntesis del mensaje y Rsa15 para el encapsulado de claves.<br /><br /> - **Basic192**: Use el cifrado Aes192, Sha1 para la síntesis del mensaje y Rsa-oaep-mgf1p para el encapsulado de claves.<br /><br /> -                          **Basic192Rsa15**: Use Aes192 para el cifrado de mensajes, Sha1 para la síntesis del mensaje y Rsa15 para el encapsulado de claves.<br /><br /> - **Basic192Sha256**: Use Aes192 para el cifrado de mensajes, Sha256 para la síntesis del mensaje y Rsa-oaep-mgf1p para el encapsulado de claves.<br /><br /> -                          **Basic192Sha256Rsa15**: Use Aes192 para el cifrado de mensajes, Sha256 para la síntesis del mensaje y Rsa15 para el encapsulado de claves.<br /><br /> -                          **Basic256**: Use el cifrado Aes256, Sha1 para la síntesis del mensaje y Rsa-oaep-mgf1p para el encapsulado de claves.<br /><br /> - **Basic256Rsa15**: Use Aes256 para el cifrado de mensajes, Sha1 para la síntesis del mensaje y Rsa15 para el encapsulado de claves.<br /><br /> - **Basic256Sha256**: Use Aes256 para el cifrado de mensajes, Sha256 para la síntesis del mensaje y Rsa-oaep-mgf1p para el encapsulado de claves.<br /><br /> - **Basic256Sha256Rsa15**: Use Aes256 para el cifrado de mensajes, Sha256 para la síntesis del mensaje y Rsa15 para el encapsulado de claves.<br /><br /> -                          **TripleDes**: Use el cifrado TripleDes, Sha1 para la síntesis del mensaje y Rsa-oaep-mgf1p para el encapsulado de claves.<br /><br /> - **TripleDesRsa15**: Use el cifrado TripleDes, Sha1 para la síntesis del mensaje y Rsa15 para el encapsulado de claves.<br /><br /> - **TripleDesSha256**: Use TripleDes para el cifrado de mensajes, Sha256 para la síntesis del mensaje y Rsa-oaep-mgf1p para el encapsulado de claves.<br /><br /> -                          **TripleDesSha256Rsa15**: Use TripleDes para el cifrado de mensajes, Sha256 para la síntesis del mensaje y Rsa15 para el encapsulado de claves.<br /><br /> El valor predeterminado es **Basic256**. |
   |   **Cliente - huella digital del certificado**   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         Especificar la huella digital del certificado X.509 para la autenticación de este puerto de envío en un servicio. La huella digital puede seleccionarse desplazándose por **Mi** almacén, dentro de **Usuario actual** , con el botón **Examinar** .<br /><br /> **Nota:** debe instalar el certificado de cliente en el **usuario actual** ubicación de la cuenta de usuario para el controlador de envío que aloja este puerto de envío.<br /><br /> Longitud mínima: 0<br /><br /> Longitud máxima: 40<br /><br /> El valor predeterminado es una cadena vacía.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
   |       **Credenciales de nombre de usuario**        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Especifique las credenciales para enviar mensajes al utilizar **UserName** para el **tipo de credencial de cliente de mensajes** propiedad. Puede especificar la propiedad haciendo clic en el **editar credenciales** botón.<br /><br /> El valor predeterminado es **no use Single Sign-On**.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   |      **Usar identidad de servicio de ACS**      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    Se aplica a [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)] y [!INCLUDE[btsBizTalkServerNoVersion_md](../includes/btsbiztalkservernoversion-md.md)] 2013.<br/><br/>Active esta casilla y haga clic en **editar** y proporcione los valores siguientes para autenticar con Service Bus.<br /><br /> - **Uri de STS de servicio de Control de acceso** : establezca esta opción en `https://<Namespace>-sb.accesscontrol.windows.net/`, donde \<espacio de nombres\> es el espacio de nombres de Service Bus.<br /><br /> - **Nombre del emisor** : especifique el nombre del emisor. Normalmente, este valor está establecido en el propietario.<br /><br /> - **Clave de emisor** : especifique la clave del emisor.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   | **Información de conexión de Service Bus** |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Nuevo a partir de [!INCLUDE[bts2016_md](../includes/bts2016-md.md)].<br/><br/>Elija esta opción utilizar la firma de acceso compartido (SAS) o de Access Control Service (ACS) del espacio de nombres de Service Bus. <br/><br/>Seleccione una opción y, a continuación, seleccione **editar** para escribir la información de clave:<br/><br/> - **Firma de acceso compartido** : escriba el nombre de clave de acceso y la clave de acceso. Ambos valores se muestran en el [portal Azure](https://portal.azure.com).<br/> - **Access Control Service** : escriba el URI de STS (`https://<yourNamespace>-sb.accesscontrol.windows.net/`), nombre de emisor y clave del emisor. Usar Windows PowerShell para recuperar estos valores, como se describe en [adaptador SB-Messaging](../core/sb-messaging-adapter.md).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |


6. En la pestaña **Mensajes** del cuadro de diálogo **Propiedades de transporte WCF-NetTcpRelay** , especifique la selección de datos para el elemento **Cuerpo** de SOAP.  


   |                   Use                    |                                                                                                                                                                                                                                                                                                                                                                                          Para                                                                                                                                                                                                                                                                                                                                                                                           |
   |-----------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   |   **Cuerpo--Cuerpo de mensaje de solicitud de BizTalk**    |                                                                                                                                                                                                                                                                                                                    Usar la parte del cuerpo de mensaje de BizTalk para crear el contenido del mensaje SOAP **cuerpo** (elemento) para un mensaje saliente.<br /><br /> Esta es la configuración predeterminada.                                                                                                                                                                                                                                                                                                                     |
   | **Plantilla: contenido especificado por plantilla** |                                                                                                                                                                                                                                                                                                            Use la plantilla proporcionada en el cuadro de texto **XML** para crear el contenido del elemento **Cuerpo** de SOAP de un mensaje saliente.<br /><br /> Esta opción está desactivada de forma predeterminada.                                                                                                                                                                                                                                                                                                            |
   |                    **XML**                    |                                                                                                                                                                                   Escriba la plantilla con formato XML para el contenido del elemento **Cuerpo** de SOAP de un mensaje saliente. Esta propiedad es necesaria si la opción **Cuerpo – cuerpo de mensaje de respuesta de BizTalk** aparece seleccionada.<br /><br /> Tipo: cadena<br /><br /> Longitud mínima: 0<br /><br /> Longitud máxima: 32767<br /><br /> El valor predeterminado es < bts-msg-body<br /><br /> xmlns = "<http://www.microsoft.com/schemas/bts2007>" encoding = "xml" / >                                                                                                                                                                                   |
   |   **Envoltura--toda \<soap: Envelope\>**    |                                                                                                                                                                                                                                                                                                   Crear la parte del cuerpo de mensaje de BizTalk de SOAP completo **sobres** de un entrante. Esta propiedad sólo es válida para puertos de petición-respuesta.<br /><br /> Esta opción está desactivada de forma predeterminada.                                                                                                                                                                                                                                                                                                    |
   | **Cuerpo--contenido \<soap: Body\> elemento** |                                                                                                                                                                                                                             Usar el contenido del elemento **Cuerpo** de SOAP de un mensaje entrante para crear la parte del cuerpo del mensaje de BizTalk. Si el elemento **Body** tiene varios elementos secundarios, sólo el primero de ellos será la parte del cuerpo del mensaje de BizTalk. Esta propiedad sólo es válida para puertos de petición-respuesta.<br /><br /> Esta es la configuración predeterminada.                                                                                                                                                                                                                              |
   |   **Ruta – contenido ubicado por la ruta de cuerpo**    |                                                                                                                                                                                                                        Usar la expresión de ruta de cuerpo mostrada en el cuadro de texto **Expresión de ruta de cuerpo** para crear la parte del cuerpo del mensaje de BizTalk. Esta expresión se evalúa con respecto al elemento secundario inmediato del elemento **Cuerpo** de SOAP de un mensaje entrante. Esta propiedad sólo es válida para puertos de petición-respuesta.<br /><br /> Esta opción está desactivada de forma predeterminada.                                                                                                                                                                                                                        |
   |           **Expresión de ruta de cuerpo**            |                                                       Escribir la expresión de ruta de cuerpo para identificar una parte específica de un mensaje entrante utilizada para crear la parte del cuerpo del mensaje de BizTalk. Esta expresión se evalúa con respecto al elemento secundario inmediato del SOAP **cuerpo** nodo de un mensaje entrante. Si esta expresión de ruta de cuerpo devuelve varios nodos, solo se elegirá el primero de ellos para la parte del cuerpo del mensaje de BizTalk. Esta propiedad es necesaria si la opción **Ruta -- contenido ubicado por la ruta de cuerpo** aparece seleccionada. Esta propiedad sólo es válida para puertos de petición-respuesta.<br /><br /> Tipo: cadena<br /><br /> Longitud mínima: 0<br /><br /> Longitud máxima: 32767<br /><br /> El valor predeterminado es una cadena vacía.                                                        |
   |               **Codificación de nodo**               | Especifique el tipo de codificación que el adaptador de envío WCF-NetTcpRelay usa para descodificar el nodo identificado por la expresión de ruta de cuerpo en el **expresión de ruta de cuerpo** cuadro de texto. Esta propiedad es necesaria si la opción **Ruta -- contenido ubicado por la ruta de cuerpo** aparece seleccionada. Esta propiedad sólo es válida para puertos de petición-respuesta. Los valores válidos incluyen los siguientes:<br /><br /> -                          **Base64**: codificación Base64.<br /><br /> - **Hex**: codificación Hexadecimal.<br /><br /> - **Cadena**: codificación de texto - UTF-8<br /><br /> -                          **XML**: los adaptadores WCF crean el cuerpo del mensaje de BizTalk con el XML externo del nodo seleccionado por la expresión de ruta de cuerpo en el **expresión de ruta de cuerpo** cuadro de texto.<br /><br /> El valor predeterminado es **XML**. |
   |          **Propagar mensaje de error**          |                                                                                                                                                                                                               Active esta casilla para enrutar el mensaje que genere un error de procesamiento de salida a una aplicación de suscripción (por ejemplo, otro puerto de recepción o programación de orquestación). Desactive la casilla para suspender los mensajes con error y generar una confirmación negativa (NACK). Esta propiedad sólo es válida para puertos de petición-respuesta.<br /><br /> El valor predeterminado es activada.                                                                                                                                                                                                               |


7. Haga clic en **Aceptar** y **Aceptar** nuevo para guardar la configuración.  

## <a name="set-maxconnections-in-the-handler"></a>Conjunto MaxConnections en el controlador

1. En el [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] consola de administración, expanda [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] administración, expanda **grupo de BizTalk**, expanda **configuración de plataforma**y, a continuación, expanda **adaptadores**.  

2. En la lista de adaptadores, seleccione **WCF-NetTcpRelay**y, a continuación, seleccione el envío o el controlador de recepción.  

3. En **propiedades de controlador de adaptador**, en el **General** ficha, seleccione **propiedades**.  

4. En el **controlador** pestaña:   


   |        Use         |                                                                                                                                                                                                                                                                                                    Para                                                                                                                                                                                                                                                                                                     |
   |-------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   | **Número máximo de conexiones** | Especifique el número máximo de conexiones entrantes (controlador de recepción) y las conexiones salientes (controlador de envío) para cada punto de conexión que se almacena en caché en el grupo de conexiones. Esto limita el número de conexiones que se almacena en la caché para cada extremo remoto único. Es conveniente establecer un valor que sea mayor que el número máximo de conexiones que espera que se almacene en la caché de cualquier extremo remoto único. Si el número de conexiones activas supera el valor máximo, puede parecer que el servicio no responde a los puertos de envío WCF-NetTcpRelay que se ejecutan en este controlador de envío.<br /><br /> El valor predeterminado es 10. |


5. Seleccione **Aceptar** para guardar los cambios.  

## <a name="see-also"></a>Vea también
[Adaptador SB-Messaging](../core/sb-messaging-adapter.md)

[Uso de adaptadores](../core/using-adapters.md)
---
title: Seguimiento de eventos empresariales asíncronos | Documentos de Microsoft
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- performance, BAM
- events, tracking [BAM]
- BAM, event tracking
- BAM, performance
ms.assetid: 6d51fadf-b329-4536-9618-d982d9c17882
caps.latest.revision: 7
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: f7191d9b0be94b4b089a91e78dd526867171c68a
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
ms.locfileid: "22230476"
---
# <a name="asynchronous-business-event-tracking"></a><span data-ttu-id="8f7bb-102">Seguimiento asíncrono de eventos empresariales</span><span class="sxs-lookup"><span data-stu-id="8f7bb-102">Asynchronous Business Event Tracking</span></span>
<span data-ttu-id="8f7bb-103">Asincrónica (con `BufferedEventStream`)-este modelo ofrece importantes mejoras de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="8f7bb-103">Asynchronous (using `BufferedEventStream`) - This model offers significant performance improvements.</span></span> <span data-ttu-id="8f7bb-104">Utiliza una API parecida a la del modelo sincrónico, que utiliza solo un constructor diferente.</span><span class="sxs-lookup"><span data-stu-id="8f7bb-104">This uses a similar API to the synchronous model, using only a different constructor.</span></span> <span data-ttu-id="8f7bb-105">En lugar de insertar los datos en la base de datos de importación principal, BufferedEventStream acumula los datos de eventos en la memoria en forma binaria y luego los inserta como un registro de tabla único en la base de datos temporal (cuadro de mensajes).</span><span class="sxs-lookup"><span data-stu-id="8f7bb-105">Instead of pushing the data into the primary import database, BufferedEventStream accumulates the event data in memory in binary form, and then inserts it as a single table record into an interim database (MessageBox).</span></span> <span data-ttu-id="8f7bb-106">El servicio de bus de eventos BAM lee los datos que BizTalk tiene en cola en la base de datos de cuadro de mensajes y los importa a la base de datos de importación principal.</span><span class="sxs-lookup"><span data-stu-id="8f7bb-106">The Event Bus service reads the data queued in the MessageBox database by BizTalk and imports it into the primary import database.</span></span>  
  
 <span data-ttu-id="8f7bb-107">Para configurar BAM para operaciones asíncronas, el servicio de bus de eventos y la aplicación que realiza la llamada (p.ej. host de orquestación) se deben ejecutar en equipos diferentes.</span><span class="sxs-lookup"><span data-stu-id="8f7bb-107">To configure BAM for asynchronous operation, the Event Bus Service and the calling application (e.g. Orchestration Host) should run on different computers.</span></span> <span data-ttu-id="8f7bb-108">De esta manera, la aplicación que realiza la llamada puede deshacerse inmediatamente de los datos de eventos que se van a procesar con la CPU en un equipo diferente.</span><span class="sxs-lookup"><span data-stu-id="8f7bb-108">This allows the calling application to get rid of the event data immediately to be processed using the CPU on a different computer.</span></span>  
  
 <span data-ttu-id="8f7bb-109">Esta topología de BAM también es coherente con las transacciones.</span><span class="sxs-lookup"><span data-stu-id="8f7bb-109">This BAM topology is also transaction-consistent.</span></span> <span data-ttu-id="8f7bb-110">No se podrán obtener datos de BAM para transacciones que se deshacen en la aplicación que realiza la llamada, ya que el servicio de bus de eventos solo lee los datos confirmados de la base de datos de cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="8f7bb-110">You will never get BAM data for transactions that rolled back in the calling application, because the Event Bus Service only reads the committed data from the MessageBox database.</span></span> <span data-ttu-id="8f7bb-111">Se mostrarán los datos de BAM para las transacciones que se confirmaron para consultas y agregaciones con poca latencia.</span><span class="sxs-lookup"><span data-stu-id="8f7bb-111">The BAM data for the transactions that were committed will show up for query and aggregation with small latency.</span></span>  
  
 <span data-ttu-id="8f7bb-112">Si se produce un error, el servicio de bus de eventos volverá a intentarlo varias veces, utilizará tiempos de espera, bloqueará la lógica de recuperación, etc.</span><span class="sxs-lookup"><span data-stu-id="8f7bb-112">If errors occur, the Event Bus Service will retry a few times, use timeouts, crash recovery logic, and so on.</span></span> <span data-ttu-id="8f7bb-113">Sin embargo, si los datos están en un formato no válido, acabarán en tablas especiales.</span><span class="sxs-lookup"><span data-stu-id="8f7bb-113">If however the data is in an invalid format, it ends up in special tables.</span></span> <span data-ttu-id="8f7bb-114">Se produce un evento en el registro de eventos para indicar esta condición.</span><span class="sxs-lookup"><span data-stu-id="8f7bb-114">An event occurs in the event log to indicate this condition.</span></span> <span data-ttu-id="8f7bb-115">Este posible punto de error dificulta más la administración del sistema.</span><span class="sxs-lookup"><span data-stu-id="8f7bb-115">This additional failure point increases the difficulty of managing the system.</span></span>  
  
 <span data-ttu-id="8f7bb-116">Utilizar el enfoque asíncrono desde el código es normalmente tan fácil como sustituir DirectEventStream por BufferedEventStream, y pasar la cadena de conexión a la base de datos de cuadro de mensajes del constructor, en lugar de a la base de datos de importación principal de BAM.</span><span class="sxs-lookup"><span data-stu-id="8f7bb-116">Using the asynchronous approach from code is usually as simple as replacing the DirectEventStream with BufferedEventStream, and passing the connection string to the Message Box in the constructor, instead of the one for BAM Primary Import.</span></span>  
  
 <span data-ttu-id="8f7bb-117">Tenga en cuenta las siguientes directrices en relación al seguimiento de eventos empresariales asíncronos en su código:</span><span class="sxs-lookup"><span data-stu-id="8f7bb-117">Use the following guidelines regarding asynchronous business event tracking in your code:</span></span>  
  
-   <span data-ttu-id="8f7bb-118">Utilice siempre una continuación cuando la actividad abarque varias aplicaciones y envíe los datos de forma asíncrona a BAM, incluso si propaga ActivityID a todos los componentes.</span><span class="sxs-lookup"><span data-stu-id="8f7bb-118">Always use continuation when the Activity spans multiple applications and you send the data asynchronously to BAM, even if you propagate the ActivityID to all components.</span></span> <span data-ttu-id="8f7bb-119">En este caso, utilice un ActivityID diferente en cada aplicación, anexándole un prefijo de cadena única (p.ej. Nombre de aplicación).</span><span class="sxs-lookup"><span data-stu-id="8f7bb-119">In this case, use a different ActivityID in each application by prefixing it with a unique string (e.g. Application Name).</span></span> <span data-ttu-id="8f7bb-120">Este proceso resulta necesario porque puede que los datos de las distintas aplicaciones lleguen a BAM de forma aleatoria, y que BAM tenga que administrar los eventos desordenados para garantizar resultados correctos de la consulta y de la agregación.</span><span class="sxs-lookup"><span data-stu-id="8f7bb-120">This is necessary because the data from different applications might arrive to BAM in random order, and BAM has to manage the out-of-order events to ensure correct Query and Aggregation results.</span></span>  
  
-   <span data-ttu-id="8f7bb-121">Los métodos habituales de supervisión de eventos (p.ej. eventos con correspondencia imprecisa COM+ o eventos de WMI) no se pueden aplicar a BAM porque los datos de eventos son independientes de la transacción.</span><span class="sxs-lookup"><span data-stu-id="8f7bb-121">The usual methods of event monitoring (e.g. COM+ Loosely Coupled Events or WMI Events) are not applicable for BAM because the event data is independent of the transaction.</span></span> <span data-ttu-id="8f7bb-122">Por ejemplo, puede que parezca que recibió 10 pedidos por un total de 10.000 $ mientras que solo había un pedido de compra entrante de 1.000 $, pero se produjo un error 10 veces al intentar guardarlo en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="8f7bb-122">For example, it may look like you received 10 purchase orders for a total of $10,000 while there was only one incoming purchase order for $1000, but the attempt to save it to the database failed 10 times.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8f7bb-123">Vea también</span><span class="sxs-lookup"><span data-stu-id="8f7bb-123">See Also</span></span>  

 [<span data-ttu-id="8f7bb-124">Seguimiento de eventos empresariales sincrónico</span><span class="sxs-lookup"><span data-stu-id="8f7bb-124">Synchronous Business Event Tracking</span></span>](../core/synchronous-business-event-tracking.md)
---
title: Enviar un intercambio por lotes conservado | Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: d9bc2207-e34d-4d06-a224-bd7f8e498c27
caps.latest.revision: 14
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 1fe98e5547501717c952e54f9be5a4d2f82a23bb
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/27/2018
ms.locfileid: "37015765"
---
# <a name="sending-a-preserved-batch-interchange"></a><span data-ttu-id="8610b-102">Enviar intercambios por lotes conservados</span><span class="sxs-lookup"><span data-stu-id="8610b-102">Sending a Preserved Batch Interchange</span></span>
<span data-ttu-id="8610b-103">Cuando la canalización de envío EDI procesa un intercambio por lotes conservado, toma el intercambio como una unidad entera.</span><span class="sxs-lookup"><span data-stu-id="8610b-103">When the EDI send pipeline processes an outbound preserved batch interchange, it processes the batched interchange as a whole.</span></span> <span data-ttu-id="8610b-104">Normalmente, vuelve a utilizar los segmentos de sobre (control) existentes para la creación del intercambio de EDI, en vez de aplicar un sobre basado en el acuerdo.</span><span class="sxs-lookup"><span data-stu-id="8610b-104">It normally reuses the existing envelope (control) segments in creating the EDI interchange, rather than applying an envelope based upon the agreement.</span></span> <span data-ttu-id="8610b-105">Esto se produce cuando el **opción de procesamiento por lotes de entrada** propiedad está establecida en **conservar intercambio: suspender intercambio en caso de un Error** o **conservar intercambio: suspender conjuntos de transacciones en Error**.</span><span class="sxs-lookup"><span data-stu-id="8610b-105">This occurs when the **Inbound batch processing option** property is set to **Preserve Interchange - suspend Interchange on Error** or **Preserve Interchange - suspend Transaction Sets on Error**.</span></span>  
  
## <a name="schema-validation"></a><span data-ttu-id="8610b-106">Validación de esquemas</span><span class="sxs-lookup"><span data-stu-id="8610b-106">Schema Validation</span></span>  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="8610b-107"> valida el sobre de un lote conservado mediante los esquemas por lotes y los esquemas de servicio.</span><span class="sxs-lookup"><span data-stu-id="8610b-107"> validates the envelope of a preserved batch using the batch schemas and the service schemas.</span></span> <span data-ttu-id="8610b-108">El esquema por lotes se utiliza para validar el nodo raíz del mensaje conservado; los esquemas de servicio se utilizan para validar los finalizadores y los encabezados de conjuntos de transacciones, grupos e intercambios.</span><span class="sxs-lookup"><span data-stu-id="8610b-108">The batch schema is used to validate the root node of the preserved message; the service schemas are used to validate the interchange, group, and transaction set headers and trailers.</span></span> <span data-ttu-id="8610b-109">Para obtener más información acerca de los esquemas por lotes, vea [esquemas por lotes de EDI](../core/edi-batch-schemas.md).</span><span class="sxs-lookup"><span data-stu-id="8610b-109">For more information about the batch schemas, see [EDI Batch Schemas](../core/edi-batch-schemas.md).</span></span> <span data-ttu-id="8610b-110">Para obtener más información sobre los esquemas de servicio, consulte [esquemas de Control y servicio EDI](../core/edi-service-and-control-schemas.md).</span><span class="sxs-lookup"><span data-stu-id="8610b-110">For more information on the service schemas, see [EDI Service and Control Schemas](../core/edi-service-and-control-schemas.md).</span></span>  
  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="8610b-111"> valida los documentos de un intercambio por lotes mediante los esquemas de documentos del proyecto.</span><span class="sxs-lookup"><span data-stu-id="8610b-111"> validates the documents in a batched interchange using the document schemas in your project.</span></span>  
  
## <a name="send-side-processing"></a><span data-ttu-id="8610b-112">Procesamiento de envío</span><span class="sxs-lookup"><span data-stu-id="8610b-112">Send-Side Processing</span></span>  
 <span data-ttu-id="8610b-113">Cuando el Ensamblador EDI procesa un intercambio conservado, normalmente utiliza los mismos encabezados de intercambio, grupo y conjunto de transacciones que ya existían en el intercambio por lotes cuando se recibió.</span><span class="sxs-lookup"><span data-stu-id="8610b-113">When the EDI Assembler processes a preserved interchange, it normally uses the same interchange, group, and transaction-set headers that existed in the batched interchange when it was received.</span></span>  
  
- <span data-ttu-id="8610b-114">Para los intercambios X12, los valores de propiedad en varias páginas en la pestaña del acuerdo unidireccional en el **las propiedades del acuerdo** cuadro de diálogo (que determinan cómo [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] creará los encabezados ISA, GS y ST de salida intercambio) normalmente no se aplican.</span><span class="sxs-lookup"><span data-stu-id="8610b-114">For X12 interchanges, the property settings on different pages in the one-way agreement tab in the **Agreement Properties** dialog box (which determine how [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will create the ISA, GS, and ST headers of an outgoing interchange) do not normally apply.</span></span>  
  
- <span data-ttu-id="8610b-115">Para los intercambios EDIFACT, normalmente se utilizan los valores UNA de las propiedades del acuerdo.</span><span class="sxs-lookup"><span data-stu-id="8610b-115">For EDIFACT interchanges, the UNA settings in the agreement properties are normally used.</span></span> <span data-ttu-id="8610b-116">El segmento UNA es opcional en un mensaje codificado en EDIFACT aunque es necesario para serializar un intercambio por lotes conservado.</span><span class="sxs-lookup"><span data-stu-id="8610b-116">The UNA segment is optional in an EDIFACT-encoded message, but it is required for serializing a preserved batch interchange.</span></span> <span data-ttu-id="8610b-117">Si no hay ningún valor para el segmento UNA en la instancia XML, se utilizarán los valores predeterminados de la propiedad para el componente de canalización de envío.</span><span class="sxs-lookup"><span data-stu-id="8610b-117">If there is no value for the UNA segment in the XML instance, the default property values for the send pipeline component will be used.</span></span> <span data-ttu-id="8610b-118">Si las propiedades del componente de canalización de envío no tienen valor, se suspenderá el mensaje XML intermediario del lote conservado.</span><span class="sxs-lookup"><span data-stu-id="8610b-118">If the send pipeline component properties are not valued, then the preserved batch intermediate XML message will be suspended.</span></span>  
  
- <span data-ttu-id="8610b-119">Si promociona la propiedad de contexto `EDI.PopulateInterchangeValues` a "True" en el intercambio que se va a conservar (en un componente personalizado), el Ensamblador EDI del puerto de envío rellenará todos los encabezados de intercambio, grupo y conjunto de transacciones con los valores establecidos en las propiedades del acuerdo.</span><span class="sxs-lookup"><span data-stu-id="8610b-119">If you promote the `EDI.PopulateInterchangeValues` context property to "True" on the interchange being preserved (in a custom component), the EdiAssembler in the send port will populate all of the interchange, group, and transaction-set headers to the values set in the agreement properties.</span></span>  
  
- <span data-ttu-id="8610b-120">Si promociona la propiedad de contexto `EDIOverride.OverrideEdiHeader` a "True" en el intercambio antes de que sea procesado por la canalización de envío, puede invalidar los valores de sobre para el documento de salida estableciendo los valores de propiedad de contexto de `EDIOverride` adecuados.</span><span class="sxs-lookup"><span data-stu-id="8610b-120">If you promote the `EDIOverride.OverrideEdiHeader` context property to “True” on the interchange before it is processed by the send pipeline, you can override the envelope values for the outbound document by setting the appropriate `EDIOverride` context property values.</span></span> <span data-ttu-id="8610b-121">Para obtener más información, consulte [invalidar los encabezados de EDI](../core/overriding-edi-headers.md).</span><span class="sxs-lookup"><span data-stu-id="8610b-121">For more information, see [Overriding EDI Headers](../core/overriding-edi-headers.md).</span></span>  
  
  <span data-ttu-id="8610b-122">Para un intercambio conservado sin errores, el Ensamblador conservará la secuencia de conjuntos de transacciones en un grupo del intercambio y la secuencia de grupos en el intercambio.</span><span class="sxs-lookup"><span data-stu-id="8610b-122">For a preserved interchange that has no errors, the Assembler will preserve the sequence of transaction sets in a group of the interchange and the sequence of groups in the interchange.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8610b-123">Puede enviar un lote conservado con una canalización de envío XML.</span><span class="sxs-lookup"><span data-stu-id="8610b-123">You can send a preserved batch with an XML send pipeline.</span></span> <span data-ttu-id="8610b-124">Sin embargo, para ello es necesario que cambie el espacio de nombre del esquema por lotes.</span><span class="sxs-lookup"><span data-stu-id="8610b-124">However, to do so requires that you change the namespace for the batch schema.</span></span> <span data-ttu-id="8610b-125">Para obtener más información, consulte [enviando un lote conservado con una canalización de envío XML](../core/sending-a-preserved-batch-with-an-xml-send-pipeline.md).</span><span class="sxs-lookup"><span data-stu-id="8610b-125">For more information, see [Sending a Preserved Batch with an XML Send Pipeline](../core/sending-a-preserved-batch-with-an-xml-send-pipeline.md).</span></span>  
  
## <a name="error-processing"></a><span data-ttu-id="8610b-126">Procesamiento de errores</span><span class="sxs-lookup"><span data-stu-id="8610b-126">Error Processing</span></span>  
 <span data-ttu-id="8610b-127">La canalización de envío EDI reconoce un intercambio de EDI por lotes como un lote conservado debido a una etiqueta reservada en el XML.</span><span class="sxs-lookup"><span data-stu-id="8610b-127">The EDI send pipeline recognizes a batched EDI interchange as a preserved batch because of a reserved tag in the XML.</span></span> <span data-ttu-id="8610b-128">Esta etiqueta, ya sea \<X12InterchangeXml\> o \<EdifactInterchangeXml\>, se aplica al XML EDI canalización de recepción.</span><span class="sxs-lookup"><span data-stu-id="8610b-128">This tag, either \<X12InterchangeXml\> or \<EdifactInterchangeXml\>, is applied to the XML by the EDI receive pipeline.</span></span>  
  
 <span data-ttu-id="8610b-129">Las siguientes casos especiales se aplican los conjuntos de transacción suspendidos en caso de error:</span><span class="sxs-lookup"><span data-stu-id="8610b-129">The following special cases apply to suspending transaction sets on error:</span></span>  
  
-   <span data-ttu-id="8610b-130">Si todos los conjuntos de transacciones en un grupo son no válidos, la canalización de envío EDI incluirá segmentos de control de grupo en el EDI generado, aunque el grupo no contendrá conjuntos de transacciones (porque se habrán quitado).</span><span class="sxs-lookup"><span data-stu-id="8610b-130">If all transaction sets in a group are invalid, then the EDI send pipeline will include group control segments in the generated EDI, but the group will not contain any transaction sets (because they will have been dropped).</span></span> <span data-ttu-id="8610b-131">Los totales de pie de página del grupo se actualizan en cero.</span><span class="sxs-lookup"><span data-stu-id="8610b-131">The group footer totals are updated to zero.</span></span> <span data-ttu-id="8610b-132">Los segmentos de control de intercambio no cambian.</span><span class="sxs-lookup"><span data-stu-id="8610b-132">The interchange control segments remain unchanged.</span></span>  
  
-   <span data-ttu-id="8610b-133">Si todos los conjuntos de transacciones en un intercambio son no válidos, los segmentos de control de intercambio se seguirán incluyendo en el intercambio de EDI generado, aunque este intercambio no contendrá conjuntos de transacciones (porque se habrán quitado).</span><span class="sxs-lookup"><span data-stu-id="8610b-133">If all transaction sets in an interchange are invalid, then the interchange control segments will still be included in the generated EDI interchange, but the interchange will not contain any transaction sets (because they will have been dropped).</span></span> <span data-ttu-id="8610b-134">Esto sería un intercambio vacío.</span><span class="sxs-lookup"><span data-stu-id="8610b-134">This would constitute an empty interchange.</span></span>  
  
-   <span data-ttu-id="8610b-135">Si los segmentos de control de grupo o de control de intercambio son no válidos, no se generará un intercambio codificado en EDI.</span><span class="sxs-lookup"><span data-stu-id="8610b-135">If the group control segments or the interchange control segments are invalid, an EDI-encoded interchange will not be generated.</span></span> <span data-ttu-id="8610b-136">Se creará un registro en el visor de eventos para indicar que se rechazó el intercambio.</span><span class="sxs-lookup"><span data-stu-id="8610b-136">A log will be created in the event viewer indicating that the interchange was rejected.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8610b-137">Vea también</span><span class="sxs-lookup"><span data-stu-id="8610b-137">See Also</span></span>  
 [<span data-ttu-id="8610b-138">Procesamiento por lotes mensajes EDI salientes</span><span class="sxs-lookup"><span data-stu-id="8610b-138">Batching Outgoing EDI Messages</span></span>](../core/batching-outgoing-edi-messages.md)
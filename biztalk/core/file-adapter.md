---
title: Adaptador de archivo | Documentos de Microsoft
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords: File adapters
ms.assetid: e4f6e94b-89b8-42ba-a4c2-a629f1107bb1
caps.latest.revision: "16"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: ceb4f0728eb6fac66fb0fc5f84b117b37ba84121
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
---
# <a name="file-adapter"></a><span data-ttu-id="58ebb-102">adaptador de archivo</span><span class="sxs-lookup"><span data-stu-id="58ebb-102">File Adapter</span></span>
<span data-ttu-id="58ebb-103">El adaptador de archivo transfiere archivos dentro y fuera de Microsoft BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="58ebb-103">The File adapter transfers files into and out of Microsoft BizTalk Server.</span></span> <span data-ttu-id="58ebb-104">El adaptador de archivo consta de dos adaptadores: un adaptador de recepción y un adaptador de envío.</span><span class="sxs-lookup"><span data-stu-id="58ebb-104">The File adapter consists of two adapters — a receive adapter and a send adapter.</span></span>  
  
 <span data-ttu-id="58ebb-105">En esta sección se explica la compatibilidad con el procesamiento por lotes y el flujo de trabajo de los adaptadores de envío y recepción de archivo.</span><span class="sxs-lookup"><span data-stu-id="58ebb-105">This section discusses the workflow and batching support for both the File receive adapter and the File send adapter.</span></span>  
 
## <a name="file-receive-adapter"></a><span data-ttu-id="58ebb-106">Adaptador de recepción de archivo</span><span class="sxs-lookup"><span data-stu-id="58ebb-106">File receive adapter</span></span>  
  
<span data-ttu-id="58ebb-107">Use el archivo de adaptador de recepción para leer los mensajes de archivos y enviarlos al servidor.</span><span class="sxs-lookup"><span data-stu-id="58ebb-107">Use the File receive adapter to read messages from files, and submit them to the server.</span></span> <span data-ttu-id="58ebb-108">El adaptador de recepción lee el archivo y crea un objeto de mensaje de BizTalk, por lo que BizTalk Server pueda procesar el mensaje.</span><span class="sxs-lookup"><span data-stu-id="58ebb-108">The receive adapter reads the file, and creates a BizTalk Message object, so that BizTalk Server can process the message.</span></span> <span data-ttu-id="58ebb-109">Durante la lectura del archivo, el adaptador bloquea el archivo para garantizar que no se puedan realizar modificaciones en su contenido.</span><span class="sxs-lookup"><span data-stu-id="58ebb-109">While reading from the file, the adapter locks the file to ensure that no modifications can be made to the file content.</span></span>  
  
> [!NOTE] 
> <span data-ttu-id="58ebb-110">El adaptador de recepción de archivo no recoge archivos de solo lectura ni archivos del sistema.</span><span class="sxs-lookup"><span data-stu-id="58ebb-110">The File receive adapter does not pick up read-only files or system files.</span></span>  
  
 <span data-ttu-id="58ebb-111">El adaptador de recepción de archivo lee los mensajes de archivos procedentes de sistemas de archivos locales o recursos compartidos de red.</span><span class="sxs-lookup"><span data-stu-id="58ebb-111">The File receive adapter reads the messages from files on local file systems or on network shares.</span></span> <span data-ttu-id="58ebb-112">Cuando la ubicación especificada en un recurso compartido de red no está disponible debido a problemas en la red, el adaptador de recepción reintenta la operación de lectura (el número de reintentos puede configurarse en la consola de administración de BizTalk Server).</span><span class="sxs-lookup"><span data-stu-id="58ebb-112">When the specified location on a network share is unavailable due to network problems, the receive adapter retries the read operation (the number of retries is configurable in the BizTalk Server Administration console).</span></span> <span data-ttu-id="58ebb-113">Una vez que el mensaje se ha leído y que el motor de mensajería de BizTalk lo ha aceptado, el adaptador de recepción elimina el archivo del sistema de archivos o recurso compartido de red.</span><span class="sxs-lookup"><span data-stu-id="58ebb-113">After the message has been read and successfully accepted by the BizTalk Messaging Engine, the receive adapter deletes the file from the file system or network share.</span></span> <span data-ttu-id="58ebb-114">Si el mensaje se ha leído pero la canalización no ha podido procesarlo con éxito, el adaptador coloca el mensaje en la cola de mensajes suspendidos y, a continuación, elimina el archivo del sistema de archivos o recurso compartido de red.</span><span class="sxs-lookup"><span data-stu-id="58ebb-114">If the message was read but the pipeline did not successfully process the message, the adapter puts the message in the suspended queue and then deletes the file from the file system or network share.</span></span> <span data-ttu-id="58ebb-115">Si el adaptador de recepción de archivo no puede enviar o suspender el mensaje en la base de datos de cuadro de mensajes, tampoco eliminará el archivo original del sistema de archivos o recurso compartido de red.</span><span class="sxs-lookup"><span data-stu-id="58ebb-115">If the File receive adapter cannot submit or suspend the message to the MessageBox database, it does not delete the original file from the file system or network share.</span></span>  
  
 <span data-ttu-id="58ebb-116">También puede configurar el adaptador de recepción de archivo para que cambie los nombres de los archivos al procesarlos.</span><span class="sxs-lookup"><span data-stu-id="58ebb-116">You can also configure the File receive adapter to rename files when processing them.</span></span> <span data-ttu-id="58ebb-117">Es conveniente cambiar el nombre de los archivos para asegurarse de que el adaptador de recepción no genera mensajes duplicados al apagar y reiniciar la ubicación de recepción.</span><span class="sxs-lookup"><span data-stu-id="58ebb-117">You should rename files to ensure that the receive adapter does not generate duplicate messages if the receive location is shut down and restarted.</span></span> <span data-ttu-id="58ebb-118">Esta opción puede configurarse en las ubicaciones de recepción de archivo.</span><span class="sxs-lookup"><span data-stu-id="58ebb-118">This is a configurable option for File receive locations.</span></span> <span data-ttu-id="58ebb-119">De forma predeterminada, el cambio de nombres esta deshabilitado.</span><span class="sxs-lookup"><span data-stu-id="58ebb-119">By default, renaming is disabled.</span></span> <span data-ttu-id="58ebb-120">Cuando se habilita el cambio de nombres, el adaptador de recepción de archivo anexa la extensión .BTS-WIP al nombre de archivo.</span><span class="sxs-lookup"><span data-stu-id="58ebb-120">When renaming is enabled, the File receive adapter appends the extension .BTS-WIP to the file.</span></span> <span data-ttu-id="58ebb-121">El adaptador de recepción lee entonces los mensajes del archivo renombrado en la ubicación de recepción y, finalmente, lo envía al servidor.</span><span class="sxs-lookup"><span data-stu-id="58ebb-121">The receive adapter then reads the messages from the renamed file in the receive location and submits it to the server.</span></span> <span data-ttu-id="58ebb-122">Una vez que el adaptador de archivo ha enviado correctamente un archivo, procede a eliminar el archivo renombrado del sistema de archivos o recurso compartido de red.</span><span class="sxs-lookup"><span data-stu-id="58ebb-122">After the receive adapter has successfully submitted a file, the receive adapter deletes the renamed file from the file system or network share.</span></span> <span data-ttu-id="58ebb-123">Si el mensaje se ha leído pero, al procesarlo, se produce un error en la canalización, el adaptador de recepción colocará el archivo en la cola de mensajes suspendidos de la base de datos de cuadro de mensajes, y eliminará del recurso compartido de red el archivo renombrado.</span><span class="sxs-lookup"><span data-stu-id="58ebb-123">If a message has been read but failed processing in the pipeline, the receive adapter places the message in the MessageBox database suspended queue, and deletes the renamed file from the network share.</span></span>  
  
> [!NOTE] 
> <span data-ttu-id="58ebb-124">Cambiar el nombre de los archivos no afecta al rendimiento.</span><span class="sxs-lookup"><span data-stu-id="58ebb-124">Renaming files has no impact on performance.</span></span>  
  
 <span data-ttu-id="58ebb-125">Si el adaptador de recepción de archivo lee correctamente el mensaje pero no puede almacenarlo en la base de datos de cuadro de mensajes, el archivo renombrado recupera su nombre original, y pierde la extensión .BTS-WIP.</span><span class="sxs-lookup"><span data-stu-id="58ebb-125">If the File receive adapter successfully reads the message but did not successfully store the message in the MessageBox database, the renamed file reverts to its original name, without the .BTS-WIP extension.</span></span> <span data-ttu-id="58ebb-126">Recuerde que el adaptador de recepción no leerá archivos con la extensión .BTS-WIP cuando la opción de cambio de nombre esté habilitada.</span><span class="sxs-lookup"><span data-stu-id="58ebb-126">Note that the receive adapter does not read files with the extension .BTS-WIP if the renaming option is turned on.</span></span>  
  
#### <a name="using-file-change-notifications-and-polling"></a><span data-ttu-id="58ebb-127">Usar notificaciones de cambio de archivo y sondeo</span><span class="sxs-lookup"><span data-stu-id="58ebb-127">Using file change notifications and polling</span></span>
  
 <span data-ttu-id="58ebb-128">El adaptador de recepción de archivo se fundamenta en las notificaciones de cambio de archivo de Windows para determinar cuándo recoger un archivo del directorio o recurso compartido especificado.</span><span class="sxs-lookup"><span data-stu-id="58ebb-128">The File receive adapter relies on Windows File Change Notifications to determine when to pick up a file from the specified directory or share.</span></span> <span data-ttu-id="58ebb-129">Si el adaptador de recepción de archivo recibe una notificación de cambio de archivo de Windows antes de que el archivo se haya escrito por completo en el directorio o recurso compartido especificado, el archivo se bloqueará y el adaptador de recepción de archivo no recuperará el archivo.</span><span class="sxs-lookup"><span data-stu-id="58ebb-129">If the File receive adapter receives a Windows File Change Notification before the file has been completely written to the specified directory or share then the file will be locked and the File receive adapter will not retrieve the file.</span></span> <span data-ttu-id="58ebb-130">En este escenario, la recepción de archivos adaptador activamente se sondean el directorio especificado o compartir en el **intervalo de sondeo (ms)** especificado en el **configuración avanzada** cuadro de diálogo disponible al configurar un Ubicación de recepción de archivo.</span><span class="sxs-lookup"><span data-stu-id="58ebb-130">In this scenario, the File receive adapter will actively poll the specified directory or share at the **Polling interval (ms)** specified on the **Advanced settings** dialog box available when configuring a File receive location.</span></span> <span data-ttu-id="58ebb-131">Cuando el adaptador de recepción de archivo realiza un sondeo de un directorio o un recurso compartido, recupera archivos desbloqueados del recurso compartido y envía los archivos a la base de datos de cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="58ebb-131">When the File receive adapter polls a directory or share it retrieves unlocked files from the share and submits the files to the MessageBox database.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="58ebb-132">El adaptador de archivo de [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] sólo se ha probado en el sistema de archivos NTFS, y sólo es compatible en éste.</span><span class="sxs-lookup"><span data-stu-id="58ebb-132">The [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] File adapter has only been tested on, and is supported on, the NTFS file system.</span></span>  
  
 <span data-ttu-id="58ebb-133">Las siguientes notificaciones de cambio de archivo de Windows provocarán que el adaptador de recepción de archivo recoja un archivo de la ubicación especificada:</span><span class="sxs-lookup"><span data-stu-id="58ebb-133">The following Windows File Change Notifications will cause the File receive adapter to pick up a file from the specified location:</span></span>  
  
 `FILE_NOTIFY_CHANGE_ATTRIBUTES`
  
 <span data-ttu-id="58ebb-134">Cualquier cambio de atributo en el directorio o subárbol inspeccionados provoca la devolución de una operación de espera de la notificación del cambio.</span><span class="sxs-lookup"><span data-stu-id="58ebb-134">Any attribute change in the watched directory or subtree causes a change notification wait operation to return.</span></span>  
  
 `FILE_NOTIFY_CHANGE_FILE_NAME`  
  
 <span data-ttu-id="58ebb-135">Cualquier cambio de nombre de archivo en el directorio o subárbol inspeccionados provoca la devolución de una operación de espera de la notificación del cambio.</span><span class="sxs-lookup"><span data-stu-id="58ebb-135">Any file name change in the watched directory or subtree causes a change notification wait operation to return.</span></span> <span data-ttu-id="58ebb-136">Entre los cambios se incluyen la creación, eliminación o cambio del nombre de un archivo.</span><span class="sxs-lookup"><span data-stu-id="58ebb-136">Changes include renaming, creating, or deleting a file name.</span></span>  
  
 `FILE_NOTIFY_CHANGE_SIZE`  
  
 <span data-ttu-id="58ebb-137">Cualquier cambio de tamaño de archivo en el directorio o subárbol inspeccionados provoca la devolución de una operación de espera de la notificación del cambio.</span><span class="sxs-lookup"><span data-stu-id="58ebb-137">Any file-size change in the watched directory or subtree causes a change notification wait operation to return.</span></span> <span data-ttu-id="58ebb-138">El sistema operativo detecta un cambio en el tamaño del archivo solo cuando el archivo está escrito en el disco.</span><span class="sxs-lookup"><span data-stu-id="58ebb-138">The operating system detects a change in file size only when the file is written to the disk.</span></span> <span data-ttu-id="58ebb-139">Para los sistemas operativos que usan un almacenamiento en caché más amplio, la detección se produce cuando la caché está lo suficientemente vacía.</span><span class="sxs-lookup"><span data-stu-id="58ebb-139">For operating systems that use extensive caching, detection occurs only when the cache is sufficiently flushed.</span></span>  
  
 `FILE_NOTIFY_CHANGE_LAST_WRITE`  
  
 <span data-ttu-id="58ebb-140">Cualquier cambio de la última escritura de los archivos en el directorio o subárbol inspeccionados provoca la devolución de una operación de espera de la notificación del cambio.</span><span class="sxs-lookup"><span data-stu-id="58ebb-140">Any change to the last write-time of files in the watched directory or subtree causes a change notification wait operation to return.</span></span> <span data-ttu-id="58ebb-141">El sistema operativo detecta un cambio en la última escritura solo cuando el archivo está escrito en el disco.</span><span class="sxs-lookup"><span data-stu-id="58ebb-141">The operating system detects a change to the last write-time only when the file is written to the disk.</span></span> <span data-ttu-id="58ebb-142">Para los sistemas operativos que usan un almacenamiento en caché más amplio, la detección se produce cuando la caché está lo suficientemente vacía.</span><span class="sxs-lookup"><span data-stu-id="58ebb-142">For operating systems that use extensive caching, detection occurs only when the cache is sufficiently flushed.</span></span>  
  
 <span data-ttu-id="58ebb-143">Para obtener más información sobre la **FindFirstChangeNotification** Vea función [https://msdn.microsoft.com/library/windows/desktop/aa364417(v=vs.85).aspx](https://msdn.microsoft.com/library/windows/desktop/aa364417(v=vs.85).aspx).</span><span class="sxs-lookup"><span data-stu-id="58ebb-143">For more information about the **FindFirstChangeNotification** function see [https://msdn.microsoft.com/library/windows/desktop/aa364417(v=vs.85).aspx](https://msdn.microsoft.com/library/windows/desktop/aa364417(v=vs.85).aspx).</span></span>  
  
### <a name="file-receive-adapter-batching-support"></a><span data-ttu-id="58ebb-144">Compatibilidad del adaptador de recepción de archivo con el procesamiento por lotes</span><span class="sxs-lookup"><span data-stu-id="58ebb-144">File Receive Adapter Batching Support</span></span>
  
 <span data-ttu-id="58ebb-145">El adaptador de envío de archivo envía mensajes por lotes al servidor.</span><span class="sxs-lookup"><span data-stu-id="58ebb-145">The File receive adapter submits messages to the server in batches.</span></span> <span data-ttu-id="58ebb-146">El adaptador de recepción empieza creando un solo lote por ubicación de recepción, recopilando los archivos de lectura disponibles en cada ubicación de recepción.</span><span class="sxs-lookup"><span data-stu-id="58ebb-146">The File receive adapter starts by building a single batch per receive location by collecting all the readable files available in the receive location.</span></span> <span data-ttu-id="58ebb-147">El adaptador de recepción enviará los lotes a la base de datos de cuadro de mensajes cuando se hayan recopilado todos los archivos disponibles, o cuando la cantidad de archivos recopilados exceda el tamaño máximo del lote.</span><span class="sxs-lookup"><span data-stu-id="58ebb-147">Batches are submitted to the MessageBox database by the receive adapter when all the available files have been collected or when the amount of files collected exceeds the maximum batch size.</span></span>  
  
 <span data-ttu-id="58ebb-148">Cuando todos los mensajes del lote se hayan leído y enviado correctamente a la base de datos de cuadro de mensajes, el adaptador de recepción de archivo eliminará los archivos correspondientes de la ubicación de recepción.</span><span class="sxs-lookup"><span data-stu-id="58ebb-148">After all the messages within the batch have been successfully read and submitted into the MessageBox database, the File receive adapter deletes the corresponding files from the receive location.</span></span> <span data-ttu-id="58ebb-149">Si se producen errores en el procesamiento de algunos mensajes, el adaptador de recepción de archivo los suspenderá y eliminará los archivos correspondientes de la ubicación de recepción.</span><span class="sxs-lookup"><span data-stu-id="58ebb-149">If some of the messages within the batch failed processing, the File receive adapter suspends them and deletes the corresponding files from the receive location.</span></span> <span data-ttu-id="58ebb-150">Si se producen errores al almacenar algunos o todos los mensajes en la base de datos de cuadro de mensajes, la operación por lotes se invertirá, y los archivos en cuestión se dejarán, tal como estaban, en la ubicación de recepción.</span><span class="sxs-lookup"><span data-stu-id="58ebb-150">If some or all of the messages fail to be stored in the MessageBox database, the entire batch operation is rolled back and all corresponding files are left unchanged in the receive location.</span></span>  
  
## <a name="file-send-adapter"></a><span data-ttu-id="58ebb-151">Adaptador de envío de archivo</span><span class="sxs-lookup"><span data-stu-id="58ebb-151">File Send Adapter</span></span>
  
 <span data-ttu-id="58ebb-152">El adaptador de envío de archivo transmite mensajes de la base de datos de cuadro de mensajes a una dirección de destino (URL) especificada.</span><span class="sxs-lookup"><span data-stu-id="58ebb-152">The File send adapter transmits messages from the MessageBox database to a specified destination address (URL).</span></span> <span data-ttu-id="58ebb-153">La URL (que consta de una ruta y un nombre de archivo) se define con los caracteres comodín asociados a las propiedades de contexto de mensaje.</span><span class="sxs-lookup"><span data-stu-id="58ebb-153">You define the URL, which is a file path and file name, by using wildcard characters related to the message context properties.</span></span> <span data-ttu-id="58ebb-154">Antes de escribir el mensaje en el archivo, el adaptador de envío de archivo sustituye los caracteres comodín por el nombre de archivo real.</span><span class="sxs-lookup"><span data-stu-id="58ebb-154">The File send adapter resolves the wildcard characters to the actual file name before writing the message to the file.</span></span>  
  
 <span data-ttu-id="58ebb-155">Al escribir un mensaje en un archivo, el adaptador de envío de archivo obtiene el contenido del mensaje del cuerpo del objeto de mensaje de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="58ebb-155">When writing a message to a file, the File send adapter gets the message content from the body part of the BizTalk Message object.</span></span> <span data-ttu-id="58ebb-156">El adaptador de envío de archivo no tiene en cuenta el resto de partes de mensaje del objeto de mensaje de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="58ebb-156">The File send adapter ignores other message parts in the BizTalk Message object.</span></span> <span data-ttu-id="58ebb-157">Cuando el adaptador de archivo ha escrito el mensaje en un archivo, procede a eliminar dicho mensaje de la base de datos de cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="58ebb-157">After the File adapter writes the message to a file, it deletes the message from the MessageBox database.</span></span> <span data-ttu-id="58ebb-158">El adaptador de archivo escribe los archivos en el sistema de archivos de dos formas: directamente o utilizando la memoria caché del sistema (esta última podría mejorar el rendimiento, especialmente en el caso de archivos de gran tamaño).</span><span class="sxs-lookup"><span data-stu-id="58ebb-158">The File adapter writes files to the file system either directly or by using the file system cache, which can improve performance, particularly for large files.</span></span>  
  
### <a name="file-send-adapter-batching-support"></a><span data-ttu-id="58ebb-159">Compatibilidad del adaptador de envío de archivo con el procesamiento por lotes</span><span class="sxs-lookup"><span data-stu-id="58ebb-159">File Send Adapter Batching Support</span></span>
  
 <span data-ttu-id="58ebb-160">El adaptador de envío de archivo obtiene lotes de mensajes de la base de datos de cuadro de mensajes y los escribe en archivos de ubicaciones de destino (sistema de archivos o recursos compartidos de red).</span><span class="sxs-lookup"><span data-stu-id="58ebb-160">The File send adapter gets batches of messages from the MessageBox database and writes them to files in destination locations on the file system or the network share.</span></span> <span data-ttu-id="58ebb-161">El tamaño de los lotes del adaptador de envío de archivo no puede configurarse, y su valor predeterminado es 20.</span><span class="sxs-lookup"><span data-stu-id="58ebb-161">The size of File send adapter batches is not configurable and is preset to 20.</span></span> <span data-ttu-id="58ebb-162">Si BizTalk Server no puede escribir en archivos algunos de los mensajes de un lote, el sistema procederá a reenviarlos a la base de datos de cuadro de mensajes a fin de reintentar su procesamiento.</span><span class="sxs-lookup"><span data-stu-id="58ebb-162">If BizTalk Server fails to write some of the messages within a batch to files, the system resubmits those messages to the MessageBox database for retry processing.</span></span> <span data-ttu-id="58ebb-163">El intervalo de reintento y el tiempo de espera de reintento pueden configurarse en la consola de administración de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="58ebb-163">You can configure the retry interval and retry count by using the BizTalk Server Administration console.</span></span>  
  
 
## <a name="in-this-section"></a><span data-ttu-id="58ebb-164">En esta sección</span><span class="sxs-lookup"><span data-stu-id="58ebb-164">In this section</span></span>  
  
-   [<span data-ttu-id="58ebb-165">Configurar el adaptador de archivo</span><span class="sxs-lookup"><span data-stu-id="58ebb-165">Configure the File adapter</span></span>](../core/configure-the-file-adapter.md) 
  
-   [<span data-ttu-id="58ebb-166">Restricciones al configurar el adaptador de archivo</span><span class="sxs-lookup"><span data-stu-id="58ebb-166">Restrictions when configuring the File adapter</span></span>](../core/restrictions-when-configuring-the-file-adapter.md)  

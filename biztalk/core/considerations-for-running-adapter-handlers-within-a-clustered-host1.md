---
title: Consideraciones para la ejecución de controladores de adaptador dentro de un clúster Host1 | Documentos de Microsoft
ms.custom: ''
ms.date: 2016-03-17
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- high availability
- receive adapters, clustering
- clustering, POP3 adapters
- FTP adapters, clustering
- clustering, receive adapters
- NLB system
- MSMQ send handler
- MSMQ receive handler
- clustering, FTP adapters
- handlers [adapters], best practices
- hosts, clustering
- MSMQ adapters
- clustering, MSMQ adapters
- adapters, best practices
- adapters, handlers
- POP3 adapters, clustering
- MSMQ adapters, clustering
- clustering
ms.assetid: ee66663c-4f4d-4515-9df1-aacf4fc72be4
caps.latest.revision: 27
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: d1fc93db61cddae43023f5c25eec62ecebd46e69
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
ms.locfileid: "22238484"
---
# <a name="considerations-for-running-adapter-handlers-within-a-clustered-host"></a><span data-ttu-id="7473c-102">Consideraciones para ejecutar controladores de adaptador en un host agrupado</span><span class="sxs-lookup"><span data-stu-id="7473c-102">Considerations for Running Adapter Handlers within a Clustered Host</span></span>
<span data-ttu-id="7473c-103">Compatibilidad con clústeres de host de BizTalk está disponible para proporcionar alta disponibilidad para el siguiente integrado adaptadores de BizTalk: adaptador de FTP, el adaptador SFTP, el adaptador de MSMQ y el adaptador de POP3.</span><span class="sxs-lookup"><span data-stu-id="7473c-103">BizTalk host cluster support is available to provide high availability for the following integrated BizTalk adapters: the FTP adapter, the SFTP adapter, the MSMQ adapter, and the POP3 adapter.</span></span> <span data-ttu-id="7473c-104">También se proporciona esta funcionalidad, de modo que hay una alta disponibilidad a la hora de ejecutar una sola instancia de un adaptador para una entrega ordenada.</span><span class="sxs-lookup"><span data-stu-id="7473c-104">Host cluster support is also provided so that there is high availability for running a single instance of an adapter for purposes of ordered delivery.</span></span>  
  
 <span data-ttu-id="7473c-105">Todos los controladores de adaptador de BizTalk pueden ejecutarse en un host agrupado. No obstante, con independencia de lo que se describe a continuación, la ejecución de controladores de adaptador en un host agrupado no supone ninguna ventaja.</span><span class="sxs-lookup"><span data-stu-id="7473c-105">All of the BizTalk adapter handlers  can be run in a clustered host but there is no benefit derived for running adapter handlers in a clustered host except as described below.</span></span> <span data-ttu-id="7473c-106">Si los requisitos de procesamiento no incluyen ninguno de los escenarios descritos a continuación, no deben ejecutar controladores de adaptador en un host del clúster.</span><span class="sxs-lookup"><span data-stu-id="7473c-106">If your processing requirements do not include any of the scenarios described below, then you should not run adapter handlers in a clustered host.</span></span>  
  
## <a name="running-the-ftp-or-sftp-adapter-receive-handler-within-a-clustered-biztalk-host"></a><span data-ttu-id="7473c-107">Ejecutar el controlador de recepción del adaptador de FTP o SFTP en un host de BizTalk agrupado</span><span class="sxs-lookup"><span data-stu-id="7473c-107">Running the FTP or SFTP adapter receive handler within a clustered BizTalk host</span></span>  
 <span data-ttu-id="7473c-108">En la mayoría de los adaptadores integrados de BizTalk, se puede conseguir una alta disponibilidad creando varios controladores de adaptador para ejecutarlos en instancias de host de BizTalk en diferentes servidores [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] de un grupo de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="7473c-108">For most of the BizTalk Server integrated adapters, high availability can be achieved by creating multiple adapter handlers to run on BizTalk host instances on different [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] servers within a BizTalk group.</span></span> <span data-ttu-id="7473c-109">Sin embargo, los controladores de recepción del adaptador de FTP o SFTP no se deben configurar para ejecutarse en varias instancias de host de BizTalk simultáneamente.</span><span class="sxs-lookup"><span data-stu-id="7473c-109">FTP or SFTP adapter receive handlers should not, however, be configured to run in multiple BizTalk host instances simultaneously.</span></span> <span data-ttu-id="7473c-110">Esta recomendación se hace porque el adaptador de recepción FTP o SFTP utiliza el protocolo FTP o SFTP para recuperar archivos del sistema de destino.</span><span class="sxs-lookup"><span data-stu-id="7473c-110">This recommendation is made because the FTP or SFTP receive adapter uses the FTP or SFTP protocol to retrieve files from the target system.</span></span> <span data-ttu-id="7473c-111">El protocolo FTP o SFTP no bloquea los archivos para asegurarse de que no se recuperan varias copias del mismo archivo simultáneamente cuando se ejecutan varias instancias del adaptador de recepción FTP o SFTP.</span><span class="sxs-lookup"><span data-stu-id="7473c-111">The FTP or SFTP protocol does not lock files to ensure that multiple copies of the same file are not retrieved simultaneously when running multiple instances of the FTP or SFTP receive adapter.</span></span>  
  
 <span data-ttu-id="7473c-112">Para proporcionar una alta disponibilidad al adaptador de recepción FTP o SFTP, debe configurar el adaptador de recepción FTP o SFTP para ejecutarse en una instancia de host de BizTalk que se ha agrupado.</span><span class="sxs-lookup"><span data-stu-id="7473c-112">To provide high availability for the FTP or SFTP receive adapter, you should configure the FTP or SFTP receive adapter to run in a BizTalk host instance that has been clustered.</span></span>  
  
## <a name="running-msmq-adapter-handlers-within-a-clustered-biztalk-host"></a><span data-ttu-id="7473c-113">Ejecutar controladores del adaptador de MSMQ en un host de BizTalk agrupado</span><span class="sxs-lookup"><span data-stu-id="7473c-113">Running MSMQ adapter handlers within a clustered BizTalk host</span></span>  
 <span data-ttu-id="7473c-114">Para garantizar la alta disponibilidad del adaptador de MSMQ y la coherencia transaccional de los mensajes enviados o recibidos por el adaptador de MSMQ, debe realizar lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="7473c-114">To ensure high availability for the MSMQ adapter and to ensure transactional consistency for messages sent or received by the MSMQ adapter, you should do the following:</span></span>  
  
1.  <span data-ttu-id="7473c-115">Configurar Message Queue Server (MSMQ) como un recurso agrupado en un grupo de clústeres de Windows en su [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] equipos.</span><span class="sxs-lookup"><span data-stu-id="7473c-115">Configure Message Queuing (MSMQ) as a clustered resource in a Windows cluster group on your [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computers.</span></span>  
  
2.  <span data-ttu-id="7473c-116">Agregue el servicio MSMQ agrupado a la lista de dependencias de recurso del host de BizTalk agrupado.</span><span class="sxs-lookup"><span data-stu-id="7473c-116">Add the clustered MSMQ service to the list of Resource dependencies for the clustered BizTalk host.</span></span> <span data-ttu-id="7473c-117">Esto garantiza que el host de BizTalk en clúster siempre se inicia después del servicio MSMQ agrupado en escenarios de conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="7473c-117">This ensures that the clustered BizTalk host always starts after the clustered MSMQ service in failover scenarios.</span></span>  
  
3.  <span data-ttu-id="7473c-118">Configure los controladores de envío y recepción del adaptador de MSMQ en una instancia de host de BizTalk que se haya configurado como un recurso de clúster en el mismo grupo de clúster que el recurso de MSMQ agrupado.</span><span class="sxs-lookup"><span data-stu-id="7473c-118">Configure the MSMQ adapter send and receive handlers in a BizTalk host instance that has been configured as a cluster resource in the same cluster group as the clustered MSMQ resource.</span></span>  
  
 <span data-ttu-id="7473c-119">Estos pasos se recomiendan por los siguientes motivos:</span><span class="sxs-lookup"><span data-stu-id="7473c-119">These steps are recommended for the following reasons:</span></span>  
  
 <span data-ttu-id="7473c-120">**Controlador de recepción del adaptador de MSMQ** : las versiones MSMQ anteriores a MSMQ 4.0 (Windows Server 2008) no admite lecturas transaccionales remotas; lecturas transaccionales locales solo se admiten.</span><span class="sxs-lookup"><span data-stu-id="7473c-120">**MSMQ adapter receive handler** – MSMQ versions prior to MSMQ 4.0 (Windows Server 2008) do not support remote transactional reads; only local transactional reads are supported.</span></span> <span data-ttu-id="7473c-121">En este caso, el adaptador de MSMQ recepción controlador debe ejecutarse en una instancia de host que es local para el servicio de Message Queue Server en clúster para realizar lecturas transaccionales locales con el adaptador de MSMQ.</span><span class="sxs-lookup"><span data-stu-id="7473c-121">In this case, the MSMQ adapter receive handler must run in a host instance that is local to the clustered Message Queuing service to complete local transactional reads with the MSMQ adapter.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="7473c-122">El controlador de recepción del adaptador de MSMQ requiere que haya una instancia local no agrupada del servicio Message Queue Server en ejecución, en el mismo equipo en el que se ejecuta la instancia de host del controlador de recepción.</span><span class="sxs-lookup"><span data-stu-id="7473c-122">The MSMQ adapter receive handler requires that a local non-clustered instance of the Message Queuing service is running on the same computer that the receive handler host instance is running on.</span></span>  
  
 <span data-ttu-id="7473c-123">**Controlador de envío del adaptador de MSMQ** : para asegurar la coherencia de envíos transaccionales realizados por el adaptador de MSMQ, la cola saliente utilizada por el controlador de envío del adaptador MSMQ debe tener alta disponibilidad para que si se produce un error en cola el servicio MSMQ para la salida puede ser reanudar.</span><span class="sxs-lookup"><span data-stu-id="7473c-123">**MSMQ adapter send handler** - To ensure the consistency of transactional sends made by the MSMQ adapter, the outgoing queue used by the MSMQ adapter send handler should be highly available so that if the MSMQ service for the outgoing queue fails it can be resumed.</span></span> <span data-ttu-id="7473c-124">Configurar un clúster Queuingresource de mensaje y los controladores de adaptador MSMQ en un grupo de clúster asegurará que la cola saliente utilizada por el controlador de envío del adaptador MSMQ será alta disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="7473c-124">Configuring a clustered Message Queuingresource and the MSMQ adapter handlers in a cluster group will ensure that the outgoing queue used by the MSMQ adapter send handler will be highly available.</span></span> <span data-ttu-id="7473c-125">Esto mitigará la posibilidad de pérdida de mensajes en el caso de que deje de funcionar el servicio Message Queue Server.</span><span class="sxs-lookup"><span data-stu-id="7473c-125">This will mitigate the possibility of message loss in the event that the Message Queuing service fails.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="7473c-126">Si la ubicación de recepción de MSMQ es **sólo** recibir desde las colas MSMQ de un MSMQ server remoto, a continuación, se puede conseguir alta disponibilidad mediante la ejecución de MSMQ de recepción host en varios equipos de BizTalk del grupo de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="7473c-126">If the MSMQ receive location is **only** receiving from MSMQ queues on a remote MSMQ server, then high availability can be achieved by running the MSMQ receive host on multiple BizTalk computers in the BizTalk group.</span></span>  <span data-ttu-id="7473c-127">Para proporcionar alta disponibilidad para MSMQ, debe asegurarse que el servidor MSMQ remoto está usando la conmutación por error de Windows.</span><span class="sxs-lookup"><span data-stu-id="7473c-127">To provide high availability for MSMQ, you must ensure the remote MSMQ server is using failover clustering in Windows.</span></span>  <span data-ttu-id="7473c-128">Si usa las colas transaccionales, el servidor MSMQ remoto debe ejecutar MSMQ 4.0 (Windows Server 2008) o superior.</span><span class="sxs-lookup"><span data-stu-id="7473c-128">If using transactional queues, the remote MSMQ server must be running MSMQ 4.0 (Windows Server 2008) or above.</span></span>  
  
## <a name="running-the-pop3-adapter-receive-handler-within-a-clustered-biztalk-host"></a><span data-ttu-id="7473c-129">Ejecutar el controlador de recepción del adaptador de POP3 en un host de BizTalk agrupado</span><span class="sxs-lookup"><span data-stu-id="7473c-129">Running the POP3 adapter receive handler within a clustered BizTalk host</span></span>  
 <span data-ttu-id="7473c-130">No es necesario configurar el controlador de recepción del adaptador de POP3 para ejecutarse en un host de BizTalk a menos que el servidor POP3 del que lee el adaptador permita varias conexiones concurrentes al mismo buzón.</span><span class="sxs-lookup"><span data-stu-id="7473c-130">The POP3 adapter receive handler does not need to be configured to run in a clustered BizTalk host unless the POP3 server that the adapter is reading from allows multiple concurrent connections to be made to the same mailbox.</span></span> <span data-ttu-id="7473c-131">Si el servidor POP3 al que está conectado el adaptador de POP3 permite varias conexiones concurrentes a los buzones, se recomienda asegurar la alta disponibilidad del adaptador de POP3 configurando un solo controlador de recepción del adaptador de POP3 para ejecutarlos en una instancia de host de BizTalk que se haya agrupado.</span><span class="sxs-lookup"><span data-stu-id="7473c-131">If the POP3 server that the POP3 adapter is connected to permits multiple concurrent connections to its mailboxes, then we recommend that you ensure high availability for the POP3 adapter by configuring a single POP3 adapter receive handler to run in a BizTalk host instance that has been clustered.</span></span> <span data-ttu-id="7473c-132">Se recomienda esta actuación para garantizar que no se recuperan varias copias del mismo mensaje de correo electrónico de forma simultánea cuando se ejecutan varias instancias del adaptador de recepción POP3.</span><span class="sxs-lookup"><span data-stu-id="7473c-132">This recommendation is made to ensure that multiple copies of the same e-mail message are not retrieved simultaneously when running multiple instances of the POP3 receive adapter.</span></span>  
  
## <a name="running-a-receive-adapter-that-supports-ordered-delivery-with-a-clustered-biztalk-host"></a><span data-ttu-id="7473c-133">Ejecutar un adaptador de recepción que admita entrega ordenada con un host de BizTalk agrupado</span><span class="sxs-lookup"><span data-stu-id="7473c-133">Running a receive adapter that supports ordered delivery with a clustered BizTalk host</span></span>  
 <span data-ttu-id="7473c-134">Los adaptadores de MSMQ y MQSeries integrados proporcionan la capacidad de enviar documentos a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] en el orden en el que se recibieron.</span><span class="sxs-lookup"><span data-stu-id="7473c-134">The MSMQ and MQSeries integrated adapters provide the ability to submit documents to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] in the order that they were received.</span></span> <span data-ttu-id="7473c-135">La correcta implementación de esta funcionalidad requiere que se esté ejecutando solo una instancia de estos adaptadores de recepción en un momento dado.</span><span class="sxs-lookup"><span data-stu-id="7473c-135">Correct implementation of this functionality requires that only a single instance of these receive adapters be running at any given time.</span></span> <span data-ttu-id="7473c-136">Para proporcionar una alta disponibilidad a una sola instancia de estos adaptadores, se deben configurar para ejecutarse en una instancia de host de BizTalk agrupada.</span><span class="sxs-lookup"><span data-stu-id="7473c-136">To provide high availability for a single instance of these adapters, they should be configured to run in a clustered BizTalk host instance.</span></span>
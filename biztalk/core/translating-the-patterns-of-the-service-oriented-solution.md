---
title: Traducir los patrones del servicio en la solución orientada a servicios | Documentos de Microsoft
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- patterns [service solutions], translating patterns to orchestration shapes
- artifacts, patterns
- orchestrations, patterns
- patterns [process management solutions], connections
- patterns [service solutions], orchestration boundaries
- patterns [process management solutions], translating patterns to orchestrations
- orchestrations, boundaries
- patterns [service solutions], translating patterns to artifacts
ms.assetid: ff17cc41-2a7b-4304-b5bd-96b1174cea7f
caps.latest.revision: 19
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 95285c93bdb290adbee988305dbcd365e4e729a6
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
ms.locfileid: "22280004"
---
# <a name="translating-the-patterns-of-the-service-oriented-solution"></a><span data-ttu-id="4650f-102">Traducir los patrones del servicio en la solución orientada a servicios</span><span class="sxs-lookup"><span data-stu-id="4650f-102">Translating the Patterns of the Service Oriented Solution</span></span>
<span data-ttu-id="4650f-103">En esta sección se describe cómo traduce la solución el diagrama de patrones en artefactos de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="4650f-103">This section describes how the solution translates the pattern diagram into BizTalk Server artifacts.</span></span>  
  
 <span data-ttu-id="4650f-104">![Servicio &#45; patrones de la solución orientada a](../core/media/service-oriented-solution-patterns.gif "Service_Oriented_Solution_Patterns")</span><span class="sxs-lookup"><span data-stu-id="4650f-104">![Service&#45;Oriented Solution Patterns](../core/media/service-oriented-solution-patterns.gif "Service_Oriented_Solution_Patterns")</span></span>  
  
## <a name="connections-and-completeness-conditions"></a><span data-ttu-id="4650f-105">Conexiones y condiciones de finalización</span><span class="sxs-lookup"><span data-stu-id="4650f-105">Connections and Completeness Conditions</span></span>  
 <span data-ttu-id="4650f-106">Sería posible comenzar este apartado traduciendo los patrones en componentes de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="4650f-106">We can pretty much start anywhere with translating the patterns into BizTalk Server components.</span></span> <span data-ttu-id="4650f-107">No obstante, dado que las conexiones entre los componentes constituyen en realidad su infraestructura, aquéllas se convierten también en un punto de partida adecuado.</span><span class="sxs-lookup"><span data-stu-id="4650f-107">However, the connections among the components are, in effect, the infrastructure for the components so that it seems a good place to start.</span></span> <span data-ttu-id="4650f-108">Además, en lo que respecta al patrón de agregación, también se debe considerar cómo indicarle que posee en sí mismo toda la información que necesita.</span><span class="sxs-lookup"><span data-stu-id="4650f-108">Also, in the case of the aggregator pattern, we need to think about what will tell it that it has all of the information it needs.</span></span> <span data-ttu-id="4650f-109">Esto afecta tanto a sus conexiones con otros componentes como a su diseño.</span><span class="sxs-lookup"><span data-stu-id="4650f-109">This affects both its connections to other components as well as its design.</span></span>  
  
 <span data-ttu-id="4650f-110">La solución debe proporcionar un modo de uso adecuado y uniforme.</span><span class="sxs-lookup"><span data-stu-id="4650f-110">The solution needs to provide a convenient and consistent way of being used.</span></span> <span data-ttu-id="4650f-111">La interfaz de servicios especifica cómo pueden utilizarla otras aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="4650f-111">The service interface specifies how other applications can use it.</span></span> <span data-ttu-id="4650f-112">Dado que la solución debe establecer comunicación con una aplicación antigua mediante IBM WebSphere MQ, IBM WebSphere MQ debe formar parte de la interfaz de servicios.</span><span class="sxs-lookup"><span data-stu-id="4650f-112">Because the solution needs to communicate with a legacy application using IBM WebSphere MQ, IBM WebSphere MQ needs to be part of the service interface.</span></span> <span data-ttu-id="4650f-113">Sin embargo, en aplicaciones más nuevas, un interfaz de servicio Web parece una opción obvia.</span><span class="sxs-lookup"><span data-stu-id="4650f-113">However, for newer applications, a Web service interface seems an obvious choice.</span></span> <span data-ttu-id="4650f-114">Una interfaz de servicio Web proporciona flexibilidad máxima para el resto de aplicaciones que utilicen el servicio.</span><span class="sxs-lookup"><span data-stu-id="4650f-114">A Web service interface provides maximum flexibility for other applications using the service.</span></span> <span data-ttu-id="4650f-115">En este caso, es posible utilizar la flexibilidad de BizTalk Server para disponer de una interfaz de servicios doble.</span><span class="sxs-lookup"><span data-stu-id="4650f-115">Here, we can use the flexibility of BizTalk Server to have a dual service interface.</span></span> <span data-ttu-id="4650f-116">Para obtener información acerca de cómo exponer orquestaciones como servicios Web, consulte [cómo orquestaciones de mapa a los servicios Web](../core/how-to-map-orchestrations-to-web-services.md).</span><span class="sxs-lookup"><span data-stu-id="4650f-116">For information about exposing orchestrations as Web services, see [How to Map Orchestrations to Web Services](../core/how-to-map-orchestrations-to-web-services.md).</span></span>  
  
 <span data-ttu-id="4650f-117">Las conexiones restantes son aquellas que se producen entre la interfaz de servicios y la lista de destinatarios, entre la lista de destinatarios y las aplicaciones de servidor y entre las aplicaciones de servicios, el patrón de agregación y la interfaz de servicios.</span><span class="sxs-lookup"><span data-stu-id="4650f-117">The other connections are those between the service interface and the recipient list, between the recipient list and the back-end applications, and among the back-end applications, aggregator, and the service interface.</span></span>  
  
 <span data-ttu-id="4650f-118">Si la conexión con la lista de destinatarios es sincrónica, la solución no tiene que utilizar las correlaciones para garantizar que todos los mensajes dirigidos a la lista de destinatarios se envían y se reciben.</span><span class="sxs-lookup"><span data-stu-id="4650f-118">If the connection to the recipient list is synchronous, the solution does not need to use correlations to ensure all messages to the recipient list are sent and received.</span></span> <span data-ttu-id="4650f-119">Por la misma razón, las conexiones entre las aplicaciones de servidor y el patrón de agregación pueden ser sincrónicas.</span><span class="sxs-lookup"><span data-stu-id="4650f-119">The connections between the back-end applications and the aggregator can be synchronous for the same reasons.</span></span> <span data-ttu-id="4650f-120">El patrón de agregación necesita las respuestas de las tres aplicaciones de servidor para completar la respuesta de las consultas.</span><span class="sxs-lookup"><span data-stu-id="4650f-120">The aggregator needs the responses from all three of the back-end applications to complete the query response.</span></span> <span data-ttu-id="4650f-121">Entonces, los tiempos de respuesta deben ser breves para que las conexiones sincrónicas sean adecuadas y simplifiquen la solución.</span><span class="sxs-lookup"><span data-stu-id="4650f-121">Response times should be short so that synchronous connections are appropriate and simplify the solution.</span></span>  
  
 <span data-ttu-id="4650f-122">Por regla general, en el patrón de agregación existe una condición de finalización.</span><span class="sxs-lookup"><span data-stu-id="4650f-122">In the aggregator pattern, there is usually a completeness condition.</span></span> <span data-ttu-id="4650f-123">Por ejemplo, en los casos en los que existan varios servidores y los tiempos de respuesta sean lentos, la condición de finalización podría darse al recibir al menos una respuesta en un período de tiempo determinado.</span><span class="sxs-lookup"><span data-stu-id="4650f-123">In cases where there are multiple back-end servers and response times are slow, the completeness condition might be, for example, receiving at least one response in a given time period.</span></span> <span data-ttu-id="4650f-124">Esta solución orientada a servicios requiere las tres respuestas para construir el mensaje final.</span><span class="sxs-lookup"><span data-stu-id="4650f-124">This service-oriented solution requires all three responses in order to construct the final message.</span></span> <span data-ttu-id="4650f-125">En este caso, la condición de finalización consistiría en recibir las tres respuestas.</span><span class="sxs-lookup"><span data-stu-id="4650f-125">Thus, here, the completeness condition is receiving all three responses.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="4650f-126">Al recibir las solicitudes a través de IBM WebSphere MQ, la solución agrega un identificador de correlación copiando el **MQMD_MsgId** valor para el **MQMD_CorrelId** del mensaje de respuesta.</span><span class="sxs-lookup"><span data-stu-id="4650f-126">When receiving requests through IBM WebSphere MQ, the solution adds a correlation identifier by copying the **MQMD_MsgId** value to the **MQMD_CorrelId** of the response message.</span></span> <span data-ttu-id="4650f-127">Esto forma parte del empleo estándar del adaptador de MQSeries en los procedimientos de solicitud-respuesta para evitar posibles condiciones de anticipación.</span><span class="sxs-lookup"><span data-stu-id="4650f-127">This is part of the standard way of using the MQSeries adapter in request-reply to avoid a possible race condition.</span></span> <span data-ttu-id="4650f-128">Para obtener más información, consulte [correlación de solicitud y respuesta utilizando mensajes](../core/correlating-messages-using-request-reply.md).</span><span class="sxs-lookup"><span data-stu-id="4650f-128">For more information, see [Correlating Messages Using Request-Reply](../core/correlating-messages-using-request-reply.md).</span></span>  
  
## <a name="determining-orchestration-boundaries"></a><span data-ttu-id="4650f-129">Determinar los límites de la orquestación</span><span class="sxs-lookup"><span data-stu-id="4650f-129">Determining Orchestration Boundaries</span></span>  
 <span data-ttu-id="4650f-130">La solución debe permitir las solicitudes procedentes de la cola de IBM WebSphere MQ y de la interfaz de servicios Web.</span><span class="sxs-lookup"><span data-stu-id="4650f-130">The solution must allow for requests from an IBM WebSphere MQ queue as well as through the Web service interface.</span></span> <span data-ttu-id="4650f-131">Al colocar la interfaz de servicios en una orquestación, la entrada IBM WebSphere MQ en otra y el total del procesamiento en una tercera, se logra mantener la comunicación externa aislada del procesamiento.</span><span class="sxs-lookup"><span data-stu-id="4650f-131">Putting the service interface into one orchestration, the IBM WebSphere MQ input into another, and the bulk of the processing into a third keeps the external communication separated from the processing.</span></span>  
  
## <a name="translating-the-components-into-orchestration-shapes"></a><span data-ttu-id="4650f-132">Traducir los componentes en formas de orquestación</span><span class="sxs-lookup"><span data-stu-id="4650f-132">Translating the Components into Orchestration Shapes</span></span>  
 <span data-ttu-id="4650f-133">En la solución definitiva, los patrones para traducir a formas se encontrarán en una única orquestación.</span><span class="sxs-lookup"><span data-stu-id="4650f-133">The patterns to translate into shapes will, in the final solution, be in a single orchestration.</span></span> <span data-ttu-id="4650f-134">Existen muchas formas de crear en BizTalk Server un enrutador basado en el contenido que incluya la creación de suscripciones de cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="4650f-134">There are numerous ways to create a content-based router in BizTalk Server, including creating MessageBox subscriptions.</span></span> <span data-ttu-id="4650f-135">En la solución, el enrutamiento emplea suscripciones de cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="4650f-135">In the solution, the routing uses MessageBox subscriptions.</span></span> <span data-ttu-id="4650f-136">Una forma de expresión evalúa si el mensaje incluye o no los valores de los campos obligatorios.</span><span class="sxs-lookup"><span data-stu-id="4650f-136">An expression shape evaluates whether or not the message includes values for the required fields.</span></span> <span data-ttu-id="4650f-137">Una forma de decisión evalúa el conjunto de variables de la forma de expresión y selecciona la ruta a través de la orquestación.</span><span class="sxs-lookup"><span data-stu-id="4650f-137">A decision shape evaluates the variable set in the expression shape and selects the path through the orchestration.</span></span>  
  
 <span data-ttu-id="4650f-138">El **CustomerService** orquestación usa la forma paralela para enviar mensajes a las aplicaciones de servidor y recibir respuestas al mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="4650f-138">The **CustomerService** orchestration uses the parallel shape to send messages to the backend applications and receive responses simultaneously.</span></span> <span data-ttu-id="4650f-139">No tiene que esperar a que una aplicación termine antes de realizar la siguiente solicitud.</span><span class="sxs-lookup"><span data-stu-id="4650f-139">It does not have to wait on one application finishing before making the next request.</span></span> <span data-ttu-id="4650f-140">Si el número de aplicaciones cambiara con frecuencia o las conexiones con las aplicaciones no fueran de confianza, la orquestación tendría que traducir el patrón de otra forma.</span><span class="sxs-lookup"><span data-stu-id="4650f-140">If the number of applications were to change frequently, or if the connections to the applications were unreliable, then the orchestration would need to translate the pattern differently.</span></span>  
  
 <span data-ttu-id="4650f-141">En la solución, el patrón de agregación debe combinar los elementos de los tres mensajes de respuesta.</span><span class="sxs-lookup"><span data-stu-id="4650f-141">In the solution the aggregator must combine elements from three response messages.</span></span> <span data-ttu-id="4650f-142">Mediante el empleo de la forma paralela se garantiza que la comunicación con los sistemas de servidor es paralela.</span><span class="sxs-lookup"><span data-stu-id="4650f-142">Using the parallel shape ensures that the communication with the back-end systems is parallel.</span></span> <span data-ttu-id="4650f-143">Además, dado que la forma no finaliza hasta que se reciben todas las respuestas o un tiempo de espera, el patrón de agregación sabrá siempre cuándo puede continuar.</span><span class="sxs-lookup"><span data-stu-id="4650f-143">And, because the shape does not terminate until it receives all responses or a timeout, the aggregator will always know when it can proceed.</span></span> <span data-ttu-id="4650f-144">La orquestación utiliza una forma de transformación que asigna elementos de los mensajes de respuesta de servidor y del mensaje de solicitud original a los elementos del mensaje de respuesta.</span><span class="sxs-lookup"><span data-stu-id="4650f-144">The orchestration uses a transform shape that maps elements from the three backend response messages and the original request message to elements in the response message.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="4650f-145">Las comunicaciones con los sistemas de servidor también pueden agotar el tiempo de espera. Puede establecer el período de tiempo de espera, incluya el **recepción** forma un **ámbito** forma y estableciendo el **tiempo de espera** propiedad del ámbito.</span><span class="sxs-lookup"><span data-stu-id="4650f-145">The communications with the back-end systems may also time out. You can set the time-out period by enclosing the **Receive** shape in a **Scope** shape and setting the **Timeout** property of the scope.</span></span>  
  
 <span data-ttu-id="4650f-146">Para obtener una lista completa de las formas de orquestación, consulte [formas de orquestación](../core/orchestration-shapes.md).</span><span class="sxs-lookup"><span data-stu-id="4650f-146">For a complete list of orchestration shapes, see [Orchestration Shapes](../core/orchestration-shapes.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4650f-147">Vea también</span><span class="sxs-lookup"><span data-stu-id="4650f-147">See Also</span></span>  
 <span data-ttu-id="4650f-148">[Patrones en la solución orientada a servicios](../core/patterns-in-the-service-oriented-solution.md) </span><span class="sxs-lookup"><span data-stu-id="4650f-148">[Patterns in the Service Oriented Solution](../core/patterns-in-the-service-oriented-solution.md) </span></span>  
 [<span data-ttu-id="4650f-149">Solución orientada a servicios de componentes del servicio</span><span class="sxs-lookup"><span data-stu-id="4650f-149">Components of the Service Oriented Solution</span></span>](../core/components-of-the-service-oriented-solution.md)
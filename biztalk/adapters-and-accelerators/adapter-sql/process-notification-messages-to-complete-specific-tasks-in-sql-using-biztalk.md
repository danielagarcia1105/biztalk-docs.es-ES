---
title: Procesar mensajes de notificación para completar tareas específicas en SQL BizTalk Server, con | Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 8538cb89-1cca-45ad-b6f4-041e117963ff
caps.latest.revision: 13
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 34e8cf9c1453b7a40f749e091d7ecdcef843d4e2
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/27/2018
ms.locfileid: "37000533"
---
# <a name="process-notification-messages-to-complete-specific-tasks-in-sql-using-biztalk-server"></a><span data-ttu-id="d6b3b-102">Procesar los mensajes de notificación para completar tareas específicas en SQL con BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="d6b3b-102">Process notification messages to complete specific tasks in SQL using BizTalk Server</span></span>
<span data-ttu-id="d6b3b-103">Puede usar el [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] para recibir notificaciones de los cambios en tablas de base de datos de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-103">You can use the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] to receive notifications for changes to SQL Server database tables.</span></span> <span data-ttu-id="d6b3b-104">Sin embargo, el adaptador sólo le envía una notificación que algunos registros se inserta, actualiza o elimina en una tabla de base de datos determinados.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-104">However, the adapter only sends you a notification that some records were inserted, updated, or deleted in a certain database table.</span></span> <span data-ttu-id="d6b3b-105">Cualquier procesamiento posterior en esos registros debe controlarse las propias aplicaciones cliente.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-105">Any post-processing on those records must be handled by the client applications themselves.</span></span> <span data-ttu-id="d6b3b-106">Este tema presenta una descripción basada en escenario sobre cómo procesar los registros en la tabla según el tipo de notificación recibida de la base de datos de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-106">This topic presents a scenario-based description on how to process the records in the table based on the kind of notification received from the SQL Server database.</span></span>  
  
## <a name="scenarios-for-performing-subsequent-actions-after-receiving-notification"></a><span data-ttu-id="d6b3b-107">Escenarios para llevar a cabo las acciones posteriores tras recibir la notificación</span><span class="sxs-lookup"><span data-stu-id="d6b3b-107">Scenarios for Performing Subsequent Actions After Receiving Notification</span></span>  
 <span data-ttu-id="d6b3b-108">Estos son algunos escenarios en los que los clientes del adaptador deben realizar determinadas tareas posteriores a la notificación.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-108">Following are a couple of scenarios in which the adapter clients must perform certain post-notification tasks.</span></span>  
  
-   <span data-ttu-id="d6b3b-109">**Escenario 1**.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-109">**Scenario 1**.</span></span> <span data-ttu-id="d6b3b-110">Considere un escenario donde el cliente del adaptador debe realizar determinadas tareas según el tipo de notificación que se recibe desde SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-110">Consider a scenario where the adapter client must perform certain tasks based on the kind of notification you receive from SQL Server.</span></span> <span data-ttu-id="d6b3b-111">Por ejemplo, la aplicación cliente debe actualizar los registros de la tabla "A" si se insertan registros en la tabla "B".</span><span class="sxs-lookup"><span data-stu-id="d6b3b-111">For example, the client application must update the records in table “A” if records are inserted in table “B”.</span></span> <span data-ttu-id="d6b3b-112">De forma similar, la aplicación cliente debe eliminar los registros de la tabla "A" si se eliminan registros de la tabla "B".</span><span class="sxs-lookup"><span data-stu-id="d6b3b-112">Similarly, the client application must delete records from table “A” if records are deleted from table “B”.</span></span>  
  
     <span data-ttu-id="d6b3b-113">En este escenario, desde el mensaje de notificación que recibe, los clientes del adaptador deben extraer el tipo de notificación para decidir si la notificación era durante una operación de inserción o una operación de eliminación.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-113">In this scenario, from the notification message received, the adapter clients must extract the type of notification to decide whether the notification was for an insert operation or a delete operation.</span></span> <span data-ttu-id="d6b3b-114">Una vez que se determina el tipo de notificación, los clientes del adaptador deben realizar las acciones posteriores para insertar o actualizar las tablas pertinentes.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-114">Once the notification type is ascertained, the adapter clients must perform subsequent actions to insert or update the relevant tables.</span></span>  
  
-   <span data-ttu-id="d6b3b-115">**Escenario 2**.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-115">**Scenario 2**.</span></span> <span data-ttu-id="d6b3b-116">Considere un escenario donde la ubicación de recepción que recibe los mensajes de notificación de cambios en una tabla deja de funcionar.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-116">Consider a scenario where the receive location that receives notification messages for changes to a table goes down.</span></span> <span data-ttu-id="d6b3b-117">Mientras que la ubicación de recepción está inactivo, algunos registros se agregan a la tabla.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-117">While the receive location is down, some records are added to the table.</span></span> <span data-ttu-id="d6b3b-118">Sin embargo, para estos registros del cliente del adaptador no recibirá ninguna notificación.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-118">However, for these records the adapter client does not receive any notification.</span></span> <span data-ttu-id="d6b3b-119">Cuando la ubicación de recepción es copia de seguridad, el adaptador notifica al cliente mediante el envío de un mensaje concreto y, a continuación, la aplicación cliente debe buscar todos los registros que se insertaron en la tabla de base de datos, mientras que la ubicación de recepción estaba inactivo.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-119">When the receive location is back up, the adapter notifies the client by sending a specific message and then the client application must look for all the records that were inserted in the database table while the receive location was down.</span></span>  
  
     <span data-ttu-id="d6b3b-120">En este escenario, desde el mensaje de notificación que recibe, los clientes del adaptador deben extraer la información relativa a si la notificación es para un cambio en una tabla de base de datos o para el inicio de la ubicación de recepción.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-120">In this scenario, from the notification message received, the adapter clients must extract the information regarding whether the notification is for a change to a database table or for the receive location starting.</span></span> <span data-ttu-id="d6b3b-121">Si la notificación es para el inicio de la ubicación de recepción, los clientes del adaptador deben implementar la lógica para procesar los registros que es posible que se han insertado, actualizados o puede eliminar mientras la ubicación de recepción estaba inactivo.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-121">If the notification is for the receive location starting, the adapter clients must implement the logic to process the records that might have been inserted, updated, or deleted while the receive location was down.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="d6b3b-122">Estos son solo algunos escenarios de ejemplo que se enumeran para una mejor comprensión de cómo usar la característica de notificación en el [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d6b3b-122">These are just some example scenarios that are listed for a better understanding of how to use the notification feature in the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)].</span></span> <span data-ttu-id="d6b3b-123">Sin embargo, el conjunto básico de las tareas necesarias para extraer el tipo de notificación recibida será similar para todos los escenarios.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-123">However, the basic set of tasks required to extract the type of notification received will be similar for all scenarios.</span></span> <span data-ttu-id="d6b3b-124">Este tema proporciona instrucciones sobre cómo extraer el tipo de notificación de un mensaje de notificación.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-124">This topic provides instructions on how to extract the type of notification from a notification message.</span></span>  
  
## <a name="how-this-topic-demonstrates-receiving-notification-messages-and-extracting-notification-type"></a><span data-ttu-id="d6b3b-125">Cómo en este tema se muestra cómo recibir mensajes de notificación y extraer el tipo de notificación</span><span class="sxs-lookup"><span data-stu-id="d6b3b-125">How This Topic Demonstrates Receiving Notification Messages and Extracting Notification Type</span></span>  
 <span data-ttu-id="d6b3b-126">En este tema, para demostrar cómo procesar mensajes de notificación para realizar las tareas siguientes, se considere un escenario básico donde un cliente de adaptador utiliza la aplicación de BizTalk para recibir mensajes de notificación de cambios en la tabla Employee.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-126">In this topic, to demonstrate how to process notification messages to perform subsequent tasks, we consider a basic scenario where an adapter client uses BizTalk application to receive notification messages for changes to the Employee table.</span></span> <span data-ttu-id="d6b3b-127">Después de recibe la notificación, el cliente filtra el tipo de notificación recibida y realiza la acción posterior.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-127">After the notification is received, the client filters the type of notification received and performs subsequent action.</span></span> <span data-ttu-id="d6b3b-128">Para demostrar un escenario muy básico, centrémonos en la que el cliente de adaptador copia los mensajes de notificación en carpetas diferentes en función del tipo de notificación recibida.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-128">To demonstrate a very basic scenario, let us consider that the adapter client copies the notification messages to different folders based on the kind of notification received.</span></span> <span data-ttu-id="d6b3b-129">Por lo que:</span><span class="sxs-lookup"><span data-stu-id="d6b3b-129">So:</span></span>  
  
- <span data-ttu-id="d6b3b-130">Si el mensaje de notificación es para una operación Insert o Update, el cliente de adaptador copia el mensaje en la carpeta C:\TestLocation\UpsertNotification.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-130">If the notification message is for an Insert or Update operation, the adapter client copies the message to C:\TestLocation\UpsertNotification folder.</span></span>  
  
- <span data-ttu-id="d6b3b-131">Si el mensaje de notificación es para cualquier otra operación, por ejemplo eliminar, el cliente de adaptador copia el mensaje en la carpeta C:\TestLocation\OtherNotificaiton.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-131">If the notification message is for any other operation, for example Delete, the adapter client copies the message to C:\TestLocation\OtherNotificaiton folder.</span></span>  
  
  <span data-ttu-id="d6b3b-132">Para lograr esto como parte de una aplicación de BizTalk, la orquestación debe contener lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="d6b3b-132">To achieve this as part of a BizTalk application, the orchestration must contain the following:</span></span>  
  
- <span data-ttu-id="d6b3b-133">Puerto para recibir mensajes de notificación de recepción unidireccional.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-133">A one-way receive port to receive notification messages.</span></span>  
  
- <span data-ttu-id="d6b3b-134">Una forma de expresión que contiene una consulta xpath para extraer la información sobre el tipo de mensaje de notificación recibido.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-134">An Expression shape that contains an xpath query to extract the information about the kind of notification message received.</span></span>  
  
- <span data-ttu-id="d6b3b-135">Una forma decidir debe incluir un bloque de decisiones en la orquestación.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-135">A Decide shape to include a decision block in the orchestration.</span></span> <span data-ttu-id="d6b3b-136">En este bloque de decisiones, decide qué para realizar las operaciones posteriores según el mensaje de notificación que recibe la aplicación.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-136">In this decision block, the application decides on what subsequent operations to perform based on the notification message received.</span></span>  
  
- <span data-ttu-id="d6b3b-137">Unidireccional dos puertos de envío que, por último, reciben los mensajes de notificación.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-137">Two one-way send ports that finally receive the notification messages.</span></span>  
  
## <a name="configuring-notifications-with-the-sql-adapter-binding-properties"></a><span data-ttu-id="d6b3b-138">Configuración de notificaciones con el adaptador SQL, las propiedades de enlace</span><span class="sxs-lookup"><span data-stu-id="d6b3b-138">Configuring Notifications with the SQL Adapter Binding Properties</span></span>  
 <span data-ttu-id="d6b3b-139">La siguiente tabla resume el [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] propiedades de enlace que se utiliza para configurar la recepción de notificaciones de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-139">The following table summarizes the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] binding properties that you use to configure receiving notifications from SQL Server.</span></span> <span data-ttu-id="d6b3b-140">Debe especificar estas propiedades de enlace al configurar el puerto de recepción en el [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] consola de administración.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-140">You must specify these binding properties while configuring the receive port in the [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="d6b3b-141">Puede especificar estas propiedades de enlace al generar el esquema para el **notificación** operación, incluso aunque no es obligatorio.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-141">You may choose to specify these binding properties when generating the schema for the **Notification** operation, even though it is not mandatory.</span></span> <span data-ttu-id="d6b3b-142">Si lo hace, el enlace de puerto de archivos que el [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)] genera como parte de la generación de metadatos también contiene los valores especificados para las propiedades de enlace.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-142">If you do so, the port binding file that the [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)] generates as part of the metadata generation also contains the values you specify for the binding properties.</span></span> <span data-ttu-id="d6b3b-143">Más adelante puede importar este archivo de enlace en el [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] puerto de recepción de la consola de administración para crear el WCF-custom o WCF-SQL con el enlace de propiedades ya establecidas.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-143">You can later import this binding file in the [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console to create the WCF-custom or WCF-SQL receive port with the binding properties already set.</span></span> <span data-ttu-id="d6b3b-144">Para obtener más información acerca de cómo crear un puerto mediante el archivo de enlace, consulte [configurar un enlace de puerto físico mediante un archivo de enlace de puerto para usar el adaptador SQL](../../adapters-and-accelerators/adapter-sql/configure-a-physical-port-binding-using-a-port-binding-file-to-sql-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="d6b3b-144">For more information about creating a port using the binding file, see [Configure a physical port binding using a port binding file to use the SQL adapter](../../adapters-and-accelerators/adapter-sql/configure-a-physical-port-binding-using-a-port-binding-file-to-sql-adapter.md).</span></span>  
  
|<span data-ttu-id="d6b3b-145">Propiedad de enlace</span><span class="sxs-lookup"><span data-stu-id="d6b3b-145">Binding Property</span></span>|<span data-ttu-id="d6b3b-146">Descripción</span><span class="sxs-lookup"><span data-stu-id="d6b3b-146">Description</span></span>|  
|----------------------|-----------------|  
|<span data-ttu-id="d6b3b-147">**InboundOperationType**</span><span class="sxs-lookup"><span data-stu-id="d6b3b-147">**InboundOperationType**</span></span>|<span data-ttu-id="d6b3b-148">Especifica la operación de entrada que desea realizar.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-148">Specifies the inbound operation that you want to perform.</span></span> <span data-ttu-id="d6b3b-149">Para recibir mensajes de notificación, establezca esta opción en **notificación**.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-149">To receive notification messages, set this to **Notification**.</span></span>|  
|<span data-ttu-id="d6b3b-150">**NotificationStatement**</span><span class="sxs-lookup"><span data-stu-id="d6b3b-150">**NotificationStatement**</span></span>|<span data-ttu-id="d6b3b-151">Especifica la instrucción SQL (SELECT o EXEC \<procedimiento almacenado\>) usa para registrar las notificaciones de consulta.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-151">Specifies the SQL statement (SELECT or EXEC \<stored procedure\>) used to register for query notifications.</span></span> <span data-ttu-id="d6b3b-152">El adaptador obtiene un mensaje de notificación de SQL Server solo cuando el conjunto de resultados para que los cambios de instrucción SQL especificados.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-152">The adapter gets a notification message from SQL Server only when the result set for the specified SQL statement changes.</span></span>|  
|<span data-ttu-id="d6b3b-153">**NotifyOnListenerStart**</span><span class="sxs-lookup"><span data-stu-id="d6b3b-153">**NotifyOnListenerStart**</span></span>|<span data-ttu-id="d6b3b-154">Especifica si en el adaptador envía una notificación a los clientes del adaptador cuando se inicia el agente de escucha.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-154">Specifies whether adapter sends a notification to the adapter clients when the listener is started.</span></span>|  
  
 <span data-ttu-id="d6b3b-155">Para obtener una descripción más completa de estas propiedades, vea [Obtenga información sobre el adaptador de BizTalk para propiedades de enlace del adaptador de SQL Server](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md).</span><span class="sxs-lookup"><span data-stu-id="d6b3b-155">For a more complete description of these properties, see [Read about the BizTalk Adapter for SQL Server adapter Binding Properties](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md).</span></span> <span data-ttu-id="d6b3b-156">Para obtener una descripción completa de cómo usar el [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] para recibir notificaciones de SQL Server, siga leyendo.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-156">For a complete description of how to use the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] to receive notifications from SQL Server, read further.</span></span>  
  
## <a name="how-to-receive-notification-messages-from-the-sql-server-database"></a><span data-ttu-id="d6b3b-157">Cómo recibir mensajes de notificación de la base de datos SQL Server</span><span class="sxs-lookup"><span data-stu-id="d6b3b-157">How to Receive Notification Messages from the SQL Server Database</span></span>  
 <span data-ttu-id="d6b3b-158">Realizar una operación en la base de datos de SQL Server mediante [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] con [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] conlleva las tareas de procedimientos se describe en [bloques de creación para desarrollar aplicaciones de BizTalk con el adaptador de SQL](../../adapters-and-accelerators/adapter-sql/building-blocks-to-develop-biztalk-applications-with-the-sql-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="d6b3b-158">Performing an operation on the SQL Server database using [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] with [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] involves the procedural tasks described in [Building blocks to develop BizTalk applications with the SQL adapter](../../adapters-and-accelerators/adapter-sql/building-blocks-to-develop-biztalk-applications-with-the-sql-adapter.md).</span></span> <span data-ttu-id="d6b3b-159">Para configurar el adaptador para recibir mensajes de notificación, estas tareas son:</span><span class="sxs-lookup"><span data-stu-id="d6b3b-159">To configure the adapter to receive notification messages, these tasks are:</span></span>  
  
1. <span data-ttu-id="d6b3b-160">Crear un proyecto de BizTalk y, a continuación, genere el esquema para el **notificación** operación entrante.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-160">Create a BizTalk project, and then generate schema for the **Notification** inbound operation.</span></span> <span data-ttu-id="d6b3b-161">Si lo desea, puede especificar valores para el **InboundOperationType** y **NotificationStatement** propiedades de enlace.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-161">Optionally, you can specify values for the **InboundOperationType** and **NotificationStatement** binding properties.</span></span>  
  
2. <span data-ttu-id="d6b3b-162">Cree un mensaje en el proyecto de BizTalk para recibir notificaciones de la base de datos de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-162">Create a message in the BizTalk project for receiving notification from the SQL Server database.</span></span>  
  
3. <span data-ttu-id="d6b3b-163">Crear una orquestación como se describe en la sección anterior.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-163">Create an orchestration as described in the preceding section.</span></span>  
  
4. <span data-ttu-id="d6b3b-164">Compile e implemente el proyecto de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-164">Build and deploy the BizTalk project.</span></span>  
  
5. <span data-ttu-id="d6b3b-165">Configurar la aplicación mediante la creación física de envío y puertos de recepción de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-165">Configure the BizTalk application by creating physical send and receive ports.</span></span>  
  
   > [!NOTE]
   >  <span data-ttu-id="d6b3b-166">Para las operaciones de entrada, como recibir mensajes de notificación, sólo debe configurar un unidireccional WCF-Custom o puerto de recepción WCF-SQL.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-166">For inbound operations, like receiving notification messages, you must only configure a one-way WCF-Custom or WCF-SQL receive port.</span></span> <span data-ttu-id="d6b3b-167">Puertos de recepción bidireccional WCF-Custom o WCF-SQL no se admiten operaciones de entrada.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-167">Two-way WCF-Custom or WCF-SQL receive ports are not supported for inbound operations.</span></span>  
  
6. <span data-ttu-id="d6b3b-168">Inicie la aplicación de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-168">Start the BizTalk application.</span></span>  
  
   <span data-ttu-id="d6b3b-169">Este tema proporciona instrucciones para realizar estas tareas.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-169">This topic provides instructions to perform these tasks.</span></span>  
  
## <a name="generating-schema"></a><span data-ttu-id="d6b3b-170">Generar el esquema</span><span class="sxs-lookup"><span data-stu-id="d6b3b-170">Generating Schema</span></span>  
 <span data-ttu-id="d6b3b-171">Debe generar el esquema para el **notificación** operación entrante.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-171">You must generate the schema for the **Notification** inbound operation.</span></span> <span data-ttu-id="d6b3b-172">Consulte [recuperación de metadatos para operaciones de SQL Server en Visual Studio mediante el adaptador de SQL](../../adapters-and-accelerators/adapter-sql/get-metadata-for-sql-server-operations-in-visual-studio-using-the-sql-adapter.md) para obtener más información acerca de cómo generar el esquema.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-172">See [Retrieving Metadata for SQL Server Operations in Visual Studio using the SQL adapter](../../adapters-and-accelerators/adapter-sql/get-metadata-for-sql-server-operations-in-visual-studio-using-the-sql-adapter.md) for more information about how to generate the schema.</span></span> <span data-ttu-id="d6b3b-173">Realice las tareas siguientes al generar el esquema.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-173">Perform the following tasks when generating the schema.</span></span> <span data-ttu-id="d6b3b-174">Omitir el primer paso si no desea especificar las propiedades de enlace en tiempo de diseño.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-174">Skip the first step if you do not want to specify the binding properties at design-time.</span></span>  
  
1.  <span data-ttu-id="d6b3b-175">Especifique un valor para **InboundOperationType** y **NotificationStatement** al generar el esquema de propiedades de enlace.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-175">Specify a value for **InboundOperationType** and **NotificationStatement** binding properties while generating the schema.</span></span> <span data-ttu-id="d6b3b-176">Para obtener más información acerca de esta propiedad de enlace, consulte [Obtenga información sobre el adaptador de BizTalk para propiedades de enlace del adaptador de SQL Server](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md).</span><span class="sxs-lookup"><span data-stu-id="d6b3b-176">For more information about this binding property, see [Read about the BizTalk Adapter for SQL Server adapter Binding Properties](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md).</span></span> <span data-ttu-id="d6b3b-177">Para obtener instrucciones sobre cómo especificar las propiedades de enlace, consulte [configurar las propiedades de enlace del adaptador de SQL](../../adapters-and-accelerators/adapter-sql/configure-the-binding-properties-for-the-sql-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="d6b3b-177">For instructions on how to specify binding properties, see [Configure the binding properties for the SQL adapter](../../adapters-and-accelerators/adapter-sql/configure-the-binding-properties-for-the-sql-adapter.md).</span></span>  
  
2.  <span data-ttu-id="d6b3b-178">Seleccione el tipo de contrato **(operaciones de entrada) de servicio**.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-178">Select the contract type as **Service (Inbound operations)**.</span></span>  
  
3.  <span data-ttu-id="d6b3b-179">Genere el esquema para el **notificación** operación.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-179">Generate schema for the **Notification** operation.</span></span>  
  
## <a name="defining-messages-and-message-types"></a><span data-ttu-id="d6b3b-180">Definición de los mensajes y tipos de mensaje</span><span class="sxs-lookup"><span data-stu-id="d6b3b-180">Defining Messages and Message Types</span></span>  
 <span data-ttu-id="d6b3b-181">El esquema que ha generado anteriormente describe los "tipos" necesarios para los mensajes en la orquestación.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-181">The schema that you generated earlier describes the "types" required for the messages in the orchestration.</span></span> <span data-ttu-id="d6b3b-182">Un mensaje suele ser una variable, el tipo para el que está definido por el esquema correspondiente.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-182">A message is typically a variable, the type for which is defined by the corresponding schema.</span></span> <span data-ttu-id="d6b3b-183">Una vez que se genera el esquema, debe vincularlo a los mensajes desde la vista de orquestación de BizTalk del proyecto.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-183">Once the schema is generated, you must link it to the messages from the Orchestration view of the BizTalk project.</span></span>  
  
 <span data-ttu-id="d6b3b-184">Este tema, debe crear un mensaje para recibir notificaciones de la base de datos de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-184">For this topic, you must create one message to receive notifications from the SQL Server database.</span></span>  
  
 <span data-ttu-id="d6b3b-185">Realice los pasos siguientes para crear mensajes y vincularlos a esquema.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-185">Perform the following steps to create messages and link them to schema.</span></span>  
  
#### <a name="to-create-messages-and-link-to-schema"></a><span data-ttu-id="d6b3b-186">Para crear mensajes y vínculo a esquema</span><span class="sxs-lookup"><span data-stu-id="d6b3b-186">To create messages and link to schema</span></span>  
  
1.  <span data-ttu-id="d6b3b-187">Agregar una orquestación al proyecto de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-187">Add an orchestration to the BizTalk project.</span></span> <span data-ttu-id="d6b3b-188">En el Explorador de soluciones, haga clic en el nombre del proyecto de BizTalk, seleccione **agregar**y, a continuación, haga clic en **nuevo elemento**.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-188">From the Solution Explorer, right-click the BizTalk project name, point to **Add**, and then click **New Item**.</span></span> <span data-ttu-id="d6b3b-189">Escriba un nombre para la orquestación de BizTalk y, a continuación, haga clic en **agregar**.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-189">Type a name for the BizTalk orchestration and then click **Add**.</span></span>  
  
2.  <span data-ttu-id="d6b3b-190">Abra la ventana Vista orquestación del proyecto de BizTalk, si aún no está abierto.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-190">Open the orchestration view window of the BizTalk project, if it is not already open.</span></span> <span data-ttu-id="d6b3b-191">Haga clic en **vista**, apunte a **Other Windows**y, a continuación, haga clic en **Vista orquestación**.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-191">Click **View**, point to **Other Windows**, and then click **Orchestration View**.</span></span>  
  
3.  <span data-ttu-id="d6b3b-192">En el **Vista orquestación**, haga clic en **mensajes**y, a continuación, haga clic en **nuevo mensaje**.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-192">In the **Orchestration View**, right-click **Messages**, and then click **New Message**.</span></span>  
  
4.  <span data-ttu-id="d6b3b-193">Haga clic en el mensaje recién creado y, a continuación, seleccione **ventana propiedades**.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-193">Right-click the newly created message, and then select **Properties Window**.</span></span>  
  
5.  <span data-ttu-id="d6b3b-194">En el **propiedades** panel **Message_1**, realice lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="d6b3b-194">In the **Properties** pane for **Message_1**, do the following:</span></span>  
  
    |<span data-ttu-id="d6b3b-195">Use</span><span class="sxs-lookup"><span data-stu-id="d6b3b-195">Use this</span></span>|<span data-ttu-id="d6b3b-196">Para</span><span class="sxs-lookup"><span data-stu-id="d6b3b-196">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="d6b3b-197">Identificador</span><span class="sxs-lookup"><span data-stu-id="d6b3b-197">Identifier</span></span>|<span data-ttu-id="d6b3b-198">Tipo `NotifyReceive`.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-198">Type `NotifyReceive`.</span></span>|  
    |<span data-ttu-id="d6b3b-199">Tipo de mensaje</span><span class="sxs-lookup"><span data-stu-id="d6b3b-199">Message Type</span></span>|<span data-ttu-id="d6b3b-200">En la lista desplegable, expanda **esquemas**y seleccione *Process_Notification.Notification*, donde *Process_Notification* es el nombre de su proyecto de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-200">From the drop-down list, expand **Schemas**, and select *Process_Notification.Notification*, where *Process_Notification* is the name of your BizTalk project.</span></span> <span data-ttu-id="d6b3b-201">*Notificación* es el esquema generado para el **notificación** operación.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-201">*Notification* is the schema generated for the **Notification** operation.</span></span>|  
  
## <a name="setting-up-the-orchestration"></a><span data-ttu-id="d6b3b-202">Configuración de la orquestación</span><span class="sxs-lookup"><span data-stu-id="d6b3b-202">Setting up the Orchestration</span></span>  
 <span data-ttu-id="d6b3b-203">Debe crear una orquestación de BizTalk para utilizar [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] para recibir mensajes de notificación de la base de datos de SQL Server y, a continuación, realizar tareas en función del tipo de notificación recibida.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-203">You must create a BizTalk orchestration to use [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] for receiving notification messages from the SQL Server database and then performing tasks based on the type of notification received.</span></span> <span data-ttu-id="d6b3b-204">En esta orquestación, el adaptador recibe el mensaje de notificación basado en la instrucción SELECT especificada para el **NotificationStatement** enlaza la propiedad.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-204">In this orchestration, the adapter receives the notification message based on the SELECT statement specified for the **NotificationStatement** binding property.</span></span> <span data-ttu-id="d6b3b-205">La consulta xpath especificada dentro de la forma de expresión extrae el tipo de notificación en una variable, por ejemplo **NotificationType**.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-205">The xpath query specified within the Expression shape extracts the type of notification into a variable, say **NotificationType**.</span></span> <span data-ttu-id="d6b3b-206">La forma decidir utiliza el valor de esta variable para decidir cuál es el tipo de notificación recibida y toma la "ruta de acceso adecuada" para realizar las operaciones posteriores.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-206">The Decide shape uses the value in this variable to decide on the kind of notification received and takes the appropriate “path” to perform subsequent operations.</span></span> <span data-ttu-id="d6b3b-207">Como se mencionó en la sección anterior, llevará a cabo las siguientes operaciones según el tipo de mensaje de notificación que recibe la orquestación.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-207">As mentioned in the preceding section, the orchestration will perform the following operations based on the kind of notification message received.</span></span>  
  
- <span data-ttu-id="d6b3b-208">Si el mensaje de notificación es para una operación Insert o Update, el cliente de adaptador copia el mensaje en la carpeta C:\TestLocation\UpsertNotification.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-208">If the notification message is for an Insert or Update operation, the adapter client copies the message to C:\TestLocation\UpsertNotification folder.</span></span>  
  
- <span data-ttu-id="d6b3b-209">Si el mensaje de notificación es para cualquier otra operación, por ejemplo eliminar, el cliente de adaptador copia el mensaje en la carpeta C:\TestLocation\OtherNotificaiton.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-209">If the notification message is for any other operation, for example Delete, the adapter client copies the message to C:\TestLocation\OtherNotificaiton folder.</span></span>  
  
  <span data-ttu-id="d6b3b-210">Por lo tanto, la orquestación debe contener lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="d6b3b-210">So, your orchestration must contain the following:</span></span>  
  
- <span data-ttu-id="d6b3b-211">Puerto para recibir mensajes de notificación de recepción unidireccional.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-211">A one-way receive port to receive notification messages.</span></span>  
  
- <span data-ttu-id="d6b3b-212">Una forma de expresión que contiene una consulta xpath para extraer el tipo de notificación recibida.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-212">An Expression shape that contains an xpath query to extract the kind of notification received.</span></span>  
  
- <span data-ttu-id="d6b3b-213">Una forma decidir debe incluir un bloque de decisiones en la orquestación.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-213">A Decide shape to include a decision block in the orchestration.</span></span> <span data-ttu-id="d6b3b-214">En este bloque de decisiones, decide qué para realizar las operaciones posteriores según el mensaje de notificación que recibe la aplicación.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-214">In this decision block, the application decides on what subsequent operations to perform based on the notification message received.</span></span>  
  
- <span data-ttu-id="d6b3b-215">Unidireccional dos puertos de envío que, por último, reciben los mensajes de notificación.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-215">Two one-way send ports that finally receive the notification messages.</span></span>  
  
- <span data-ttu-id="d6b3b-216">Forma recepción.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-216">Receive shape.</span></span>  
  
  <span data-ttu-id="d6b3b-217">Una orquestación de ejemplo es similar al siguiente.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-217">A sample orchestration resembles the following.</span></span>  
  
  <span data-ttu-id="d6b3b-218">![Orquestación para realizar la publicación&#45;tareas de notificación](../../adapters-and-accelerators/adapter-sql/media/20f62716-603d-4293-84f7-8c8f6d82ccd0.gif "20f62716-603d-4293-84f7-8c8f6d82ccd0")</span><span class="sxs-lookup"><span data-stu-id="d6b3b-218">![Orchestration to perform post&#45;notification tasks](../../adapters-and-accelerators/adapter-sql/media/20f62716-603d-4293-84f7-8c8f6d82ccd0.gif "20f62716-603d-4293-84f7-8c8f6d82ccd0")</span></span>  
  
### <a name="adding-message-shapes"></a><span data-ttu-id="d6b3b-219">Agregar formas de mensaje</span><span class="sxs-lookup"><span data-stu-id="d6b3b-219">Adding Message Shapes</span></span>  
 <span data-ttu-id="d6b3b-220">Asegúrese de que especificar las siguientes propiedades para cada una de las formas de mensaje.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-220">Make sure you specify the following properties for each of the message shapes.</span></span> <span data-ttu-id="d6b3b-221">Los nombres que aparecen en la columna de forma son los nombres de las formas de mensaje como se muestra en la orquestación simplemente mencionadas.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-221">The names listed in the Shape column are the names of the message shapes as displayed in the just-mentioned orchestration.</span></span>  
  
|<span data-ttu-id="d6b3b-222">Forma</span><span class="sxs-lookup"><span data-stu-id="d6b3b-222">Shape</span></span>|<span data-ttu-id="d6b3b-223">Tipo de forma</span><span class="sxs-lookup"><span data-stu-id="d6b3b-223">Shape Type</span></span>|<span data-ttu-id="d6b3b-224">Propiedades</span><span class="sxs-lookup"><span data-stu-id="d6b3b-224">Properties</span></span>|  
|-----------|----------------|----------------|  
|<span data-ttu-id="d6b3b-225">ReceiveNotification</span><span class="sxs-lookup"><span data-stu-id="d6b3b-225">ReceiveNotification</span></span>|<span data-ttu-id="d6b3b-226">Receive</span><span class="sxs-lookup"><span data-stu-id="d6b3b-226">Receive</span></span>|<span data-ttu-id="d6b3b-227">-Establecer **nombre** a *ReceiveNotification*</span><span class="sxs-lookup"><span data-stu-id="d6b3b-227">- Set **Name** to *ReceiveNotification*</span></span><br /><br /> <span data-ttu-id="d6b3b-228">-Establecer **activar** a *True*</span><span class="sxs-lookup"><span data-stu-id="d6b3b-228">- Set **Activate** to *True*</span></span>|  
  
### <a name="adding-an-expression-shape"></a><span data-ttu-id="d6b3b-229">Agregar una forma de expresión</span><span class="sxs-lookup"><span data-stu-id="d6b3b-229">Adding an Expression Shape</span></span>  
 <span data-ttu-id="d6b3b-230">El propósito de inclusión de una forma expresión en la orquestación es que una consulta xpath para extraer el tipo de mensaje de notificación recibido.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-230">The purpose of including an Expression shape in the orchestration is to have an xpath query to extract the kind of notification message received.</span></span> <span data-ttu-id="d6b3b-231">Antes de crear una consulta xpath, examinemos el formato de un mensaje de notificación.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-231">Before creating an xpath query, let us look at the format of a notification message.</span></span> <span data-ttu-id="d6b3b-232">Un mensaje de notificación típica se parece a lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="d6b3b-232">A typical notification message resembles the following:</span></span>  
  
```  
<Notification xmlns="http://schemas.microsoft.com/Sql/2008/05/Notification/">  
  <Info>Insert</Info>   
  <Source>Data</Source>   
  <Type>Change</Type>   
</Notification>  
```  
  
 <span data-ttu-id="d6b3b-233">Como ve, la información sobre el tipo de la notificación está disponible dentro de la `<info>` etiqueta dentro del elemento primario `<Notification>` etiqueta.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-233">As you see, the information about the type of the notification is available within the `<info>` tag, within the parent `<Notification>` tag.</span></span> <span data-ttu-id="d6b3b-234">Por lo tanto, como parte de esta forma de expresión, debe:</span><span class="sxs-lookup"><span data-stu-id="d6b3b-234">So, as part of this expression shape you must:</span></span>  
  
-   <span data-ttu-id="d6b3b-235">Cree una variable que contiene el valor dentro de la `<Info>` etiqueta y establezca su tipo en el objeto System.String.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-235">Create a variable that contains the value within the `<Info>` tag and set its type to System.String.</span></span> <span data-ttu-id="d6b3b-236">Para obtener más información acerca de cómo crear variables, consulte [utilizar Variables en orquestaciones](../../core/using-variables-in-orchestrations.md).</span><span class="sxs-lookup"><span data-stu-id="d6b3b-236">For more information about creating variables, see [Using Variables in Orchestrations](../../core/using-variables-in-orchestrations.md).</span></span>
  
     <span data-ttu-id="d6b3b-237">Este tema, denomine a la variable **NotificationType**.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-237">For this topic, name the variable as **NotificationType**.</span></span>  
  
-   <span data-ttu-id="d6b3b-238">Crear una consulta xpath para extraer el valor de la \<información\> etiqueta.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-238">Create an xpath query to extract the value from the \<Info\> tag.</span></span> <span data-ttu-id="d6b3b-239">La consulta xpath será similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="d6b3b-239">The xpath query will resemble the following:</span></span>  
  
    ```  
    NotificationType = xpath(NotifyReceive,"string(/*[local-name()='Notification']/*[local-name()='Info']/text())");  
    ```  
  
     <span data-ttu-id="d6b3b-240">En esta consulta xpath, **NotifyReceive** es el mensaje que ha creado para recibir mensajes de notificación.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-240">In this xpath query, **NotifyReceive** is the message you created for receiving notification messages.</span></span> <span data-ttu-id="d6b3b-241">El extracto dentro de la `string` función indica que la consulta debe extraer el valor dentro de la `<Info>` etiqueta, que a su vez está dentro de la `<Notification>` etiqueta.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-241">The excerpt within the `string` function indicates that the query must extract the value within the `<Info>` tag, which in turn is within the `<Notification>` tag.</span></span> <span data-ttu-id="d6b3b-242">Por último, el valor extraído por la consulta se asigna a la **NotificaitonType** variable.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-242">Finally, the value extracted by the query is assigned to the **NotificaitonType** variable.</span></span>  
  
### <a name="adding-a-decide-shape"></a><span data-ttu-id="d6b3b-243">Agregar una forma decidir</span><span class="sxs-lookup"><span data-stu-id="d6b3b-243">Adding a Decide Shape</span></span>  
 <span data-ttu-id="d6b3b-244">Es el fin de agregar una forma decidir debe incluir un bloque de decisiones en la orquestación para decidir qué para realizar las operaciones siguientes en función del tipo de mensaje de notificación recibido.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-244">The purpose of adding a Decide shape is to include a decision block in the orchestration to decide what subsequent operations to perform based on the kind of notification message received.</span></span> <span data-ttu-id="d6b3b-245">La Decisión se toma en función del valor de la **NotificationType** variable.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-245">The decision is made on the basis of the value of the **NotificationType** variable.</span></span> <span data-ttu-id="d6b3b-246">En este tema, la orquestación toma una decisión en función del tipo de mensaje de notificación recibido.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-246">In this topic, the orchestration makes a decision based on the kind of notification message received.</span></span> <span data-ttu-id="d6b3b-247">Por lo tanto, la condición en la forma de regla se especifica como sigue:</span><span class="sxs-lookup"><span data-stu-id="d6b3b-247">So, the condition in the Rule shape is specified as follows:</span></span>  
  
```  
NotificationType.Equals("Insert") | NotificationType.Equals("Update")  
```  
  
 <span data-ttu-id="d6b3b-248">Esta condición sugiere que if el valor de **NotificaitonType** variable es Insert o Update, la orquestación llevará a cabo un conjunto de tareas.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-248">This condition suggests that if the value for **NotificaitonType** variable is Insert or Update, the orchestration will perform one set of tasks.</span></span> <span data-ttu-id="d6b3b-249">Si el valor de **NotificationType** variable es algo más, la orquestación llevará a cabo otro conjunto de tareas.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-249">If the value of **NotificationType** variable is anything else, the orchestration will perform other set of tasks.</span></span>  
  
 <span data-ttu-id="d6b3b-250">Como se mencionó en las secciones anteriores, para demostrar un enfoque simple, la orquestación copiará los mensajes en carpetas diferentes en función del tipo de mensaje de notificación.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-250">As mentioned in the preceding sections, to demonstrate a simple approach, the orchestration will copy messages to different folders based on the notification message type.</span></span> <span data-ttu-id="d6b3b-251">Es así, dentro de la regla y bloques de lo contrario, deberá agregar formas de envío para enviar los mensajes a distintos puertos.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-251">So, within the Rule and Else blocks, you must add Send shapes to send the messages to different ports.</span></span> <span data-ttu-id="d6b3b-252">Este tema, asigne el nombre de la forma de envío en el bloque de regla como **SendUpsertNotification** y la forma de envío en el bloque Else como **SendOtherNotification**.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-252">For this topic, name the Send shape in the Rule block as **SendUpsertNotification** and the Send shape in the Else block as **SendOtherNotification**.</span></span>  
  
### <a name="adding-ports"></a><span data-ttu-id="d6b3b-253">Agregar puertos</span><span class="sxs-lookup"><span data-stu-id="d6b3b-253">Adding Ports</span></span>  
 <span data-ttu-id="d6b3b-254">Ahora debe agregar los siguientes puertos lógicos a la orquestación:</span><span class="sxs-lookup"><span data-stu-id="d6b3b-254">You must now add the following logical ports to the orchestration:</span></span>  
  
- <span data-ttu-id="d6b3b-255">Unidireccional puerto de recepción para recibir mensajes de notificación de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-255">One-way receive port to receive notification messages from SQL Server.</span></span>  
  
- <span data-ttu-id="d6b3b-256">Puerto de envío unidireccional para enviar mensajes de notificación para las operaciones Insert y Update en una carpeta específica.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-256">One-way send port to send notification messages for Insert and Update operations to a specific folder.</span></span>  
  
- <span data-ttu-id="d6b3b-257">Puerto de envío unidireccional para enviar mensajes de notificación para las demás operaciones en una carpeta específica.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-257">One-way send port to send notification messages for any other operations to a specific folder.</span></span>  
  
  <span data-ttu-id="d6b3b-258">Asegúrese de que especificar las siguientes propiedades para cada uno de los puertos lógicos.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-258">Make sure you specify the following properties for each of the logical ports.</span></span> <span data-ttu-id="d6b3b-259">Los nombres que aparecen en la columna puerto son los nombres de los puertos tal como se muestra en la orquestación.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-259">The names listed in the Port column are the names of the ports as displayed in the orchestration.</span></span>  
  
|<span data-ttu-id="d6b3b-260">Puerto</span><span class="sxs-lookup"><span data-stu-id="d6b3b-260">Port</span></span>|<span data-ttu-id="d6b3b-261">Propiedades</span><span class="sxs-lookup"><span data-stu-id="d6b3b-261">Properties</span></span>|  
|----------|----------------|  
|<span data-ttu-id="d6b3b-262">SQLNotifyPort</span><span class="sxs-lookup"><span data-stu-id="d6b3b-262">SQLNotifyPort</span></span>|<span data-ttu-id="d6b3b-263">-Establecer **identificador** a *SQLNotifyPort*</span><span class="sxs-lookup"><span data-stu-id="d6b3b-263">- Set **Identifier** to *SQLNotifyPort*</span></span><br /><br /> <span data-ttu-id="d6b3b-264">-Establecer **tipo** a *SQLNotifyPortType*</span><span class="sxs-lookup"><span data-stu-id="d6b3b-264">- Set **Type** to *SQLNotifyPortType*</span></span><br /><br /> <span data-ttu-id="d6b3b-265">-Establecer **patrón de comunicación** a *unidireccional*</span><span class="sxs-lookup"><span data-stu-id="d6b3b-265">- Set **Communication Pattern** to *One-Way*</span></span><br /><br /> <span data-ttu-id="d6b3b-266">-Establecer **dirección de comunicación** a *de recepción*</span><span class="sxs-lookup"><span data-stu-id="d6b3b-266">- Set **Communication Direction** to *Receive*</span></span>|  
|<span data-ttu-id="d6b3b-267">NotificationUpsertPort</span><span class="sxs-lookup"><span data-stu-id="d6b3b-267">NotificationUpsertPort</span></span>|<span data-ttu-id="d6b3b-268">-Establecer **identificador** a *NotificationUpsertPort*</span><span class="sxs-lookup"><span data-stu-id="d6b3b-268">- Set **Identifier** to *NotificationUpsertPort*</span></span><br /><br /> <span data-ttu-id="d6b3b-269">-Establecer **tipo** a *NotificationUpsertPortType*</span><span class="sxs-lookup"><span data-stu-id="d6b3b-269">- Set **Type** to *NotificationUpsertPortType*</span></span><br /><br /> <span data-ttu-id="d6b3b-270">-Establecer **patrón de comunicación** a *unidireccional*</span><span class="sxs-lookup"><span data-stu-id="d6b3b-270">- Set **Communication Pattern** to *One-Way*</span></span><br /><br /> <span data-ttu-id="d6b3b-271">-Establecer **dirección de comunicación** a *enviar*</span><span class="sxs-lookup"><span data-stu-id="d6b3b-271">- Set **Communication Direction** to *Send*</span></span>|  
|<span data-ttu-id="d6b3b-272">OtherNotificationPort</span><span class="sxs-lookup"><span data-stu-id="d6b3b-272">OtherNotificationPort</span></span>|<span data-ttu-id="d6b3b-273">-Establecer **identificador** a *OtherNotificationPort*</span><span class="sxs-lookup"><span data-stu-id="d6b3b-273">- Set **Identifier** to *OtherNotificationPort*</span></span><br /><br /> <span data-ttu-id="d6b3b-274">-Establecer **tipo** a *OtherNotificationPortType*</span><span class="sxs-lookup"><span data-stu-id="d6b3b-274">- Set **Type** to *OtherNotificationPortType*</span></span><br /><br /> <span data-ttu-id="d6b3b-275">-Establecer **patrón de comunicación** a *unidireccional*</span><span class="sxs-lookup"><span data-stu-id="d6b3b-275">- Set **Communication Pattern** to *One-Way*</span></span><br /><br /> <span data-ttu-id="d6b3b-276">-Establecer **dirección de comunicación** a *enviar*</span><span class="sxs-lookup"><span data-stu-id="d6b3b-276">- Set **Communication Direction** to *Send*</span></span>|  
  
### <a name="specify-messages-for-action-shapes-and-connect-to-ports"></a><span data-ttu-id="d6b3b-277">Especifique los mensajes para las formas Acción y conectar a los puertos</span><span class="sxs-lookup"><span data-stu-id="d6b3b-277">Specify Messages for Action Shapes and Connect to Ports</span></span>  
 <span data-ttu-id="d6b3b-278">En la tabla siguiente especifica las propiedades y sus valores que se deben establecer para especificar los mensajes para las formas Acción y vincular los mensajes a los puertos.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-278">The following table specifies the properties and their values that you should set to specify messages for action shapes and to link the messages to the ports.</span></span> <span data-ttu-id="d6b3b-279">Los nombres que aparecen en la columna de forma son los nombres de las formas de mensaje como se muestra en la orquestación que se ha mencionado anteriormente.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-279">The names listed in the Shape column are the names of the message shapes as displayed in the orchestration mentioned earlier.</span></span>  
  
|<span data-ttu-id="d6b3b-280">Forma</span><span class="sxs-lookup"><span data-stu-id="d6b3b-280">Shape</span></span>|<span data-ttu-id="d6b3b-281">Propiedades</span><span class="sxs-lookup"><span data-stu-id="d6b3b-281">Properties</span></span>|  
|-----------|----------------|  
|<span data-ttu-id="d6b3b-282">ReceiveNotification</span><span class="sxs-lookup"><span data-stu-id="d6b3b-282">ReceiveNotification</span></span>|<span data-ttu-id="d6b3b-283">-Establecer **mensaje** a *NotifyReceive*</span><span class="sxs-lookup"><span data-stu-id="d6b3b-283">- Set **Message** to *NotifyReceive*</span></span><br /><br /> <span data-ttu-id="d6b3b-284">-Establecer **operación** a *SQLNotifyPort.Notify.Request*</span><span class="sxs-lookup"><span data-stu-id="d6b3b-284">- Set **Operation** to *SQLNotifyPort.Notify.Request*</span></span>|  
|<span data-ttu-id="d6b3b-285">SendUpsertNotification</span><span class="sxs-lookup"><span data-stu-id="d6b3b-285">SendUpsertNotification</span></span>|<span data-ttu-id="d6b3b-286">-Establecer **mensaje** a *NotifyReceive*</span><span class="sxs-lookup"><span data-stu-id="d6b3b-286">- Set **Message** to *NotifyReceive*</span></span><br /><br /> <span data-ttu-id="d6b3b-287">-Establecer **operación** a *NotificationUpsertPort.Upsert.Request*</span><span class="sxs-lookup"><span data-stu-id="d6b3b-287">- Set **Operation** to *NotificationUpsertPort.Upsert.Request*</span></span>|  
|<span data-ttu-id="d6b3b-288">SendOtherNotification</span><span class="sxs-lookup"><span data-stu-id="d6b3b-288">SendOtherNotification</span></span>|<span data-ttu-id="d6b3b-289">-Establecer **mensaje** a *seleccione*</span><span class="sxs-lookup"><span data-stu-id="d6b3b-289">- Set **Message** to *Select*</span></span><br /><br /> <span data-ttu-id="d6b3b-290">-Establecer **operación** a *OtherNotificationPort.Other.Request*</span><span class="sxs-lookup"><span data-stu-id="d6b3b-290">- Set **Operation** to *OtherNotificationPort.Other.Request*</span></span>|  
  
 <span data-ttu-id="d6b3b-291">Después de especificar estas propiedades, están conectados a los puertos y formas de mensaje y se completa la orquestación.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-291">After you have specified these properties, the message shapes and ports are connected and your orchestration is complete.</span></span>  
  
 <span data-ttu-id="d6b3b-292">Ahora debe compilar la solución de BizTalk e implementarla en un [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d6b3b-292">You must now build the BizTalk solution and deploy it to a [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="d6b3b-293">Para obtener más información, consulte [compilar y ejecutar orquestaciones](../../core/building-and-running-orchestrations.md).</span><span class="sxs-lookup"><span data-stu-id="d6b3b-293">For more information, see [Building and Running Orchestrations](../../core/building-and-running-orchestrations.md).</span></span>
  
## <a name="configuring-the-biztalk-application"></a><span data-ttu-id="d6b3b-294">Configuración de la aplicación de BizTalk</span><span class="sxs-lookup"><span data-stu-id="d6b3b-294">Configuring the BizTalk Application</span></span>  
 <span data-ttu-id="d6b3b-295">Después de haber implementado el proyecto de BizTalk, aparece la orquestación que creó anteriormente en el **orquestaciones** panel en la consola de administración de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-295">After you have deployed the BizTalk project, the orchestration you created earlier is listed under the **Orchestrations** pane in the BizTalk Server Administration console.</span></span> <span data-ttu-id="d6b3b-296">Debe usar la consola de administración de BizTalk Server para configurar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-296">You must use the BizTalk Server Administration console to configure the application.</span></span> <span data-ttu-id="d6b3b-297">Para ver un tutorial, vea [Tutorial: implementar una aplicación básica de BizTalk](Walkthrough:%20Deploying%20a%20Basic%20BizTalk%20Application.md).</span><span class="sxs-lookup"><span data-stu-id="d6b3b-297">For a walkthrough, see [Walkthrough: Deploying a Basic BizTalk Application](Walkthrough:%20Deploying%20a%20Basic%20BizTalk%20Application.md).</span></span>  
  
 <span data-ttu-id="d6b3b-298">Configuración de una aplicación implica:</span><span class="sxs-lookup"><span data-stu-id="d6b3b-298">Configuring an application involves:</span></span>  
  
- <span data-ttu-id="d6b3b-299">Selección de un host de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-299">Selecting a host for the application.</span></span>  
  
- <span data-ttu-id="d6b3b-300">Asignación de los puertos que ha creado en la orquestación con puertos físicos en la consola de administración de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-300">Mapping the ports that you created in your orchestration to physical ports in the BizTalk Server Administration console.</span></span> <span data-ttu-id="d6b3b-301">Para esta orquestación, debe:</span><span class="sxs-lookup"><span data-stu-id="d6b3b-301">For this orchestration you must:</span></span>  
  
  - <span data-ttu-id="d6b3b-302">Definir un WCF-Custom físico o puerto de recepción unidireccionales de WCF-SQL.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-302">Define a physical WCF-Custom or WCF-SQL one-way receive port.</span></span> <span data-ttu-id="d6b3b-303">Este puerto de escucha de notificaciones que proceden de la base de datos de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-303">This port listens for notifications coming from the SQL Server database.</span></span> <span data-ttu-id="d6b3b-304">Para obtener información sobre cómo crear los puertos, consulte [configurar manualmente un enlace de puerto físico al adaptador de SQL](../../adapters-and-accelerators/adapter-sql/manually-configure-a-physical-port-binding-to-the-sql-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="d6b3b-304">For information about how to create ports, see [Manually configure a physical port binding to the SQL adapter](../../adapters-and-accelerators/adapter-sql/manually-configure-a-physical-port-binding-to-the-sql-adapter.md).</span></span> <span data-ttu-id="d6b3b-305">Asegúrese de que especificar las siguientes propiedades de enlace para el puerto de recepción.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-305">Make sure you specify the following binding properties for the receive port.</span></span>  
  
    > [!IMPORTANT]
    >  <span data-ttu-id="d6b3b-306">No es necesario realizar este paso si especifica las propiedades de enlace en tiempo de diseño.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-306">You do not need to perform this step if you specified the binding properties at design-time.</span></span> <span data-ttu-id="d6b3b-307">En tal caso, puede crear un WCF-custom o WCF-SQL puerto de recepción, con el conjunto de propiedades de enlace necesaria, importando el archivo de enlace creado por el [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d6b3b-307">In such a case, you can create a WCF-custom or WCF-SQL receive port, with the required binding properties set, by importing the binding file created by the [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span> <span data-ttu-id="d6b3b-308">Para obtener más información, consulte [configurar un enlace de puerto físico mediante un archivo de enlace de puerto para usar el adaptador SQL](../../adapters-and-accelerators/adapter-sql/configure-a-physical-port-binding-using-a-port-binding-file-to-sql-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="d6b3b-308">For more information see [Configure a physical port binding using a port binding file to use the SQL adapter](../../adapters-and-accelerators/adapter-sql/configure-a-physical-port-binding-using-a-port-binding-file-to-sql-adapter.md).</span></span>  
  
    |<span data-ttu-id="d6b3b-309">Propiedad de enlace</span><span class="sxs-lookup"><span data-stu-id="d6b3b-309">Binding Property</span></span>|<span data-ttu-id="d6b3b-310">Valor</span><span class="sxs-lookup"><span data-stu-id="d6b3b-310">Value</span></span>|  
    |----------------------|-----------|  
    |<span data-ttu-id="d6b3b-311">**InboundOperationType**</span><span class="sxs-lookup"><span data-stu-id="d6b3b-311">**InboundOperationType**</span></span>|<span data-ttu-id="d6b3b-312">Establezca esta opción en **notificación**.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-312">Set this to **Notification**.</span></span>|  
    |<span data-ttu-id="d6b3b-313">**NotificationStatement**</span><span class="sxs-lookup"><span data-stu-id="d6b3b-313">**NotificationStatement**</span></span>|<span data-ttu-id="d6b3b-314">Establezca esta opción en:</span><span class="sxs-lookup"><span data-stu-id="d6b3b-314">Set this to:</span></span><br /><br /> `SELECT Employee_ID, Name FROM dbo.Employee WHERE Status=0`<br /><br /> <span data-ttu-id="d6b3b-315">**Nota:** específicamente debe especificar los nombres de columna en la instrucción como se muestra en la siguiente instrucción SELECT.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-315">**Note:** You must specifically specify the column names in the statement as shown in this SELECT statement.</span></span> <span data-ttu-id="d6b3b-316">Además, siempre debe especificar el nombre de tabla, junto con el nombre del esquema.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-316">Also, you must always specify the table name along with the schema name.</span></span> <span data-ttu-id="d6b3b-317">Por ejemplo, `dbo.Employee`.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-317">For example, `dbo.Employee`.</span></span>|  
    |<span data-ttu-id="d6b3b-318">**NotifyOnListenerStart**</span><span class="sxs-lookup"><span data-stu-id="d6b3b-318">**NotifyOnListenerStart**</span></span>|<span data-ttu-id="d6b3b-319">Establezca esta opción en **True**.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-319">Set this to **True**.</span></span>|  
  
     <span data-ttu-id="d6b3b-320">Para obtener más información acerca de las propiedades de enlace diferente, consulte [Obtenga información sobre el adaptador de BizTalk para propiedades de enlace del adaptador de SQL Server](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md).</span><span class="sxs-lookup"><span data-stu-id="d6b3b-320">For more information about the different binding properties, see [Read about the BizTalk Adapter for SQL Server adapter Binding Properties](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md).</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="d6b3b-321">Se recomienda configurar el nivel de aislamiento de transacción y el tiempo de espera de transacción al realizar operaciones de entrada mediante el [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d6b3b-321">We recommend configuring the transaction isolation level and the transaction timeout while performing inbound operations using the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)].</span></span> <span data-ttu-id="d6b3b-322">Puede hacerlo agregando el servicio de puerto de recepción de comportamiento al configurar el WCF-Custom o WCF-SQL.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-322">You can do so by adding the service behavior while configuring the WCF-Custom or WCF-SQL receive port.</span></span> <span data-ttu-id="d6b3b-323">Para obtener instrucciones sobre cómo agregar el comportamiento del servicio, consulte [configurar el nivel de aislamiento de transacción y el tiempo de espera de transacción con SQL](../../adapters-and-accelerators/adapter-sql/configure-transaction-isolation-level-and-transaction-timeout-with-sql.md).</span><span class="sxs-lookup"><span data-stu-id="d6b3b-323">For instruction on how to add the service behavior, see [Configure Transaction Isolation Level and Transaction Timeout with SQL](../../adapters-and-accelerators/adapter-sql/configure-transaction-isolation-level-and-transaction-timeout-with-sql.md).</span></span>  
  
  - <span data-ttu-id="d6b3b-324">Definir una ubicación en el disco duro y un puerto de archivo correspondiente donde la orquestación de BizTalk quitará los mensajes de notificación de la base de datos de SQL Server para las operaciones Insert y Update.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-324">Define a location on the hard disk and a corresponding file port where the BizTalk orchestration will drop the notification messages from the SQL Server database for Insert and Update operations.</span></span> <span data-ttu-id="d6b3b-325">Configurar este puerto para quitar mensajes de notificación a la carpeta C:\TestLocation\UpsertNotification.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-325">Configure this port to drop notification messages to the folder C:\TestLocation\UpsertNotification.</span></span>  
  
  - <span data-ttu-id="d6b3b-326">Definir una ubicación en el disco duro y un puerto de archivo correspondiente donde la orquestación de BizTalk quitará los mensajes de notificación de la base de datos de SQL Server para todas las demás operaciones.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-326">Define a location on the hard disk and a corresponding file port where the BizTalk orchestration will drop the notification messages from the SQL Server database for all other operations.</span></span> <span data-ttu-id="d6b3b-327">Configurar este puerto para quitar mensajes de notificación a la carpeta C:\TestLocation\OtherNotification.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-327">Configure this port to drop notification messages to the folder C:\TestLocation\OtherNotification.</span></span>  
  
## <a name="starting-the-application"></a><span data-ttu-id="d6b3b-328">Iniciar la aplicación</span><span class="sxs-lookup"><span data-stu-id="d6b3b-328">Starting the Application</span></span>  
 <span data-ttu-id="d6b3b-329">Debe iniciar la aplicación de BizTalk para recibir mensajes de notificación de la base de datos de SQL Server y para realizar las operaciones subsiguientes de Select y Update.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-329">You must start the BizTalk application for receiving notification messages from the SQL Server database and for performing the subsequent Select and Update operations.</span></span> <span data-ttu-id="d6b3b-330">Para obtener instrucciones acerca de cómo iniciar una aplicación de BizTalk, consulte [cómo iniciar una orquestación](../../core/how-to-start-an-orchestration.md).</span><span class="sxs-lookup"><span data-stu-id="d6b3b-330">For instructions on starting a BizTalk application, see [How to Start an Orchestration](../../core/how-to-start-an-orchestration.md).</span></span>
  
 <span data-ttu-id="d6b3b-331">En esta etapa, asegúrese de que:</span><span class="sxs-lookup"><span data-stu-id="d6b3b-331">At this stage, make sure:</span></span>  
  
-   <span data-ttu-id="d6b3b-332">El WCF-Custom o WCF-SQL unidireccional puerto de recepción, que recibe los mensajes de notificación de SQL Server se está ejecutando la base de datos.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-332">The WCF-Custom or WCF-SQL one-way receive port, which receives the notification messages from the SQL Server database is running.</span></span>  
  
-   <span data-ttu-id="d6b3b-333">Los dos puertos de envío de archivo, que recepción los mensajes de SQL Server, se están ejecutando.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-333">The two FILE send ports, which receive messages from SQL Server, are running.</span></span>  
  
-   <span data-ttu-id="d6b3b-334">La orquestación de BizTalk para la operación se está ejecutando.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-334">The BizTalk orchestration for the operation is running.</span></span>  
  
## <a name="executing-the-operation"></a><span data-ttu-id="d6b3b-335">Ejecutar la operación</span><span class="sxs-lookup"><span data-stu-id="d6b3b-335">Executing the Operation</span></span>  
 <span data-ttu-id="d6b3b-336">Después de iniciar la orquestación de BizTalk, el siguiente conjunto de acciones tienen lugar:</span><span class="sxs-lookup"><span data-stu-id="d6b3b-336">After you start the BizTalk orchestration, the following set of actions take place:</span></span>  
  
-   <span data-ttu-id="d6b3b-337">Dado que el **NotifyOnListenerStart** enlaza la propiedad se establece en **True**, recibirá el mensaje siguiente:</span><span class="sxs-lookup"><span data-stu-id="d6b3b-337">Because the **NotifyOnListenerStart** binding property is set to **True**, you receive the following message:</span></span>  
  
    ```  
    <?xml version="1.0" encoding="utf-8" ?>  
    <Notification xmlns="http://schemas.microsoft.com/Sql/2008/05/Notification/">  
      <Info>ListenerStarted</Info>   
      <Source>SqlBinding</Source>   
      <Type>Startup</Type>   
    </Notification>  
    ```  
  
     <span data-ttu-id="d6b3b-338">Tenga en cuenta que el valor de la `<Info>` etiqueta es "ListnerStarted".</span><span class="sxs-lookup"><span data-stu-id="d6b3b-338">Note that the value in the `<Info>` tag is “ListnerStarted”.</span></span> <span data-ttu-id="d6b3b-339">Por lo tanto, este mensaje se recibe en la carpeta C:\TestLocation\OtherNotification.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-339">Hence, this message is received in C:\TestLocation\OtherNotification folder.</span></span>  
  
-   <span data-ttu-id="d6b3b-340">Insertar un registro en la tabla Employee.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-340">Insert a record in the Employee table.</span></span> <span data-ttu-id="d6b3b-341">Recibirá un mensaje de notificación similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="d6b3b-341">You will receive a notification message resembling the following:</span></span>  
  
    ```  
    <?xml version="1.0" encoding="utf-8" ?>   
    <Notification xmlns="http://schemas.microsoft.com/Sql/2008/05/Notification/">  
      <Info>Insert</Info>   
      <Source>Data</Source>   
      <Type>Change</Type>   
    </Notification>  
    ```  
  
     <span data-ttu-id="d6b3b-342">Tenga en cuenta que el valor de la `<Info>` etiqueta es "Insert".</span><span class="sxs-lookup"><span data-stu-id="d6b3b-342">Note that the value in the `<Info>` tag is “Insert”.</span></span> <span data-ttu-id="d6b3b-343">Por lo tanto, este mensaje se recibe en la carpeta C:\TestLocation\UpsertNotification.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-343">Hence, this message is received in C:\TestLocation\UpsertNotification folder.</span></span>  
  
-   <span data-ttu-id="d6b3b-344">Actualizar un registro en la tabla Employee.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-344">Update a record in the Employee table.</span></span> <span data-ttu-id="d6b3b-345">Recibirá un mensaje de notificación similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="d6b3b-345">You will receive a notification message resembling the following:</span></span>  
  
    ```  
    <?xml version="1.0" encoding="utf-8" ?>  
    <Notification xmlns="http://schemas.microsoft.com/Sql/2008/05/Notification/">  
      <Info>Update</Info>   
      <Source>Data</Source>   
      <Type>Change</Type>   
    </Notification>  
    ```  
  
     <span data-ttu-id="d6b3b-346">Tenga en cuenta que el valor de la `<Info>` etiqueta es "Update".</span><span class="sxs-lookup"><span data-stu-id="d6b3b-346">Note that the value in the `<Info>` tag is “Update”.</span></span> <span data-ttu-id="d6b3b-347">Por lo tanto, este mensaje se recibe en la carpeta C:\TestLocation\UpsertNotification.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-347">Hence, this message is received in C:\TestLocation\UpsertNotification folder.</span></span>  
  
-   <span data-ttu-id="d6b3b-348">Elimina un registro de la tabla Employee.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-348">Delete a record from the Employee table.</span></span> <span data-ttu-id="d6b3b-349">Recibirá un mensaje de notificación similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="d6b3b-349">You will receive a notification message resembling the following:</span></span>  
  
    ```  
    <?xml version="1.0" encoding="utf-8" ?>  
    <Notification xmlns="http://schemas.microsoft.com/Sql/2008/05/Notification/">  
      <Info>Delete</Info>   
      <Source>Data</Source>   
      <Type>Change</Type>   
    </Notification>  
    ```  
  
     <span data-ttu-id="d6b3b-350">Tenga en cuenta que el valor de la `<Info>` etiqueta es "Eliminar".</span><span class="sxs-lookup"><span data-stu-id="d6b3b-350">Note that the value in the `<Info>` tag is “Delete”.</span></span> <span data-ttu-id="d6b3b-351">Por lo tanto, este mensaje se recibe en la carpeta C:\TestLocation\OtherNotification.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-351">Hence, this message is received in C:\TestLocation\OtherNotification folder.</span></span>  
  
## <a name="best-practices"></a><span data-ttu-id="d6b3b-352">Procedimientos recomendados</span><span class="sxs-lookup"><span data-stu-id="d6b3b-352">Best Practices</span></span>  
 <span data-ttu-id="d6b3b-353">Una vez que haya implementado y configurado el proyecto de BizTalk, puede exportar opciones de configuración a un archivo XML llamado el archivo de enlace.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-353">After you have deployed and configured the BizTalk project, you can export configuration settings to an XML file called the binding file.</span></span> <span data-ttu-id="d6b3b-354">Cuando genere un archivo de enlace, puede importar los valores de configuración desde el archivo, por lo que no es necesario crear los puertos de envío y recepción para la misma orquestación.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-354">Once you generate a binding file, you can import the configuration settings from the file, so that you do not need to create the send ports and receive ports for the same orchestration.</span></span> <span data-ttu-id="d6b3b-355">Para obtener más información acerca de los archivos de enlace, consulte [reutilizar los enlaces del adaptador](../../adapters-and-accelerators/adapter-sql/reuse-sql-adapter-bindings.md).</span><span class="sxs-lookup"><span data-stu-id="d6b3b-355">For more information about binding files, see [Reuse adapter bindings](../../adapters-and-accelerators/adapter-sql/reuse-sql-adapter-bindings.md).</span></span>
  
## <a name="performing-complex-operations-after-receiving-notification-messages"></a><span data-ttu-id="d6b3b-356">Realizar operaciones complejas después de recibir mensajes de notificación</span><span class="sxs-lookup"><span data-stu-id="d6b3b-356">Performing Complex Operations After Receiving Notification Messages</span></span>  
 <span data-ttu-id="d6b3b-357">Por simplicidad y una mejor comprensión, la orquestación en este tema copia los mensajes en carpetas diferentes en función del tipo de notificación.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-357">For simplicity and better understanding, the orchestration in this topic copies messages to different folders based on the notification type.</span></span> <span data-ttu-id="d6b3b-358">Sin embargo, en situaciones del mundo real es posible que desee realizar operaciones más complejas.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-358">However, in real-world scenarios you might want to perform more complex operations.</span></span> <span data-ttu-id="d6b3b-359">Puede realizar procedimientos similares que se proporciona en este tema y la compilación en ellos para realizar las operaciones que desee.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-359">You can perform similar procedures as provided in this topic and build on them to perform the operations you wish.</span></span> <span data-ttu-id="d6b3b-360">Por ejemplo, puede cambiar la orquestación para insertar registros en otra tabla si recibe un mensaje de notificación para una operación de inserción en la tabla Employee.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-360">For example, you can change the orchestration to insert records in another table if you get a notification message for an Insert operation on the Employee table.</span></span> <span data-ttu-id="d6b3b-361">En tal caso, puede hacer los cambios correspondientes dentro de la forma decidir.</span><span class="sxs-lookup"><span data-stu-id="d6b3b-361">In such a case, you can make appropriate changes within the Decide shape.</span></span>  
  
 <span data-ttu-id="d6b3b-362">Uno de estos escenarios se explica con detalle en [Tutorial 2: empleado: proceso de pedido de compra mediante el adaptador de SQL](../../adapters-and-accelerators/adapter-sql/tutorial-2-employee-purchase-order-process-using-the-sql-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="d6b3b-362">One such scenario is explained in detail in [Tutorial 2: Employee - Purchase Order Process using the SQL adapter](../../adapters-and-accelerators/adapter-sql/tutorial-2-employee-purchase-order-process-using-the-sql-adapter.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d6b3b-363">Vea también</span><span class="sxs-lookup"><span data-stu-id="d6b3b-363">See Also</span></span>  
 [<span data-ttu-id="d6b3b-364">Recibir notificaciones de consulta SQL con BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="d6b3b-364">Receive SQL Query Notifications using BizTalk Server</span></span>](../../adapters-and-accelerators/adapter-sql/receive-sql-query-notifications-using-biztalk-server.md)
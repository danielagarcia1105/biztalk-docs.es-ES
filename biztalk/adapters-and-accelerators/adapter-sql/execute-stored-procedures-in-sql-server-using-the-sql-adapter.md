---
title: Ejecutar procedimientos almacenados en SQL Server mediante el adaptador de SQL | Documentos de Microsoft
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 245626a7-f546-4aca-90df-c0579139a872
caps.latest.revision: 16
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 65a475d8de1fc30df2e06923ad14bcba0897159e
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
ms.locfileid: "22224060"
---
# <a name="execute-stored-procedures-in-sql-server-using-the-sql-adapter"></a><span data-ttu-id="94d22-102">Ejecutar procedimientos almacenados en SQL Server mediante el adaptador de SQL</span><span class="sxs-lookup"><span data-stu-id="94d22-102">Execute Stored Procedures in SQL Server using the SQL adapter</span></span>
<span data-ttu-id="94d22-103">Aparecen los Transact-SQL y procedimientos almacenados de CLR en SQL Server como operaciones en [!INCLUDE[adaptersql](../../includes/adaptersql-md.md)] en el **procedimientos** nodo durante el uso de la [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)] o [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="94d22-103">The Transact-SQL and CLR stored procedures in SQL Server are surfaced as operations in [!INCLUDE[adaptersql](../../includes/adaptersql-md.md)] under the **Procedures** node while using the [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)] or [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)].</span></span> <span data-ttu-id="94d22-104">Los nombres de las operaciones exponen por la [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] son los mismos que el nombre del procedimiento almacenado en SQL Server.</span><span class="sxs-lookup"><span data-stu-id="94d22-104">The operation names exposed by the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] are the same as the name of the stored procedure in SQL Server.</span></span> <span data-ttu-id="94d22-105">Todos los parámetros del procedimiento almacenado se exponen en la operación correspondiente.</span><span class="sxs-lookup"><span data-stu-id="94d22-105">All the parameters in the stored procedure are exposed in the corresponding operation.</span></span> <span data-ttu-id="94d22-106">El parámetro de salida contiene el valor devuelto del procedimiento almacenado.</span><span class="sxs-lookup"><span data-stu-id="94d22-106">The OUT parameter contains the return value of the stored procedure.</span></span> <span data-ttu-id="94d22-107">El conjunto de resultados del procedimiento almacenado es una matriz de conjunto de datos.</span><span class="sxs-lookup"><span data-stu-id="94d22-107">The result set of the stored procedure is an array of DataSet.</span></span> <span data-ttu-id="94d22-108">Para obtener más información sobre el conjunto de datos, vea [http://go.microsoft.com/fwlink/?LinkId=196853](http://go.microsoft.com/fwlink/?LinkId=196853).</span><span class="sxs-lookup"><span data-stu-id="94d22-108">For more information about DataSet, see [http://go.microsoft.com/fwlink/?LinkId=196853](http://go.microsoft.com/fwlink/?LinkId=196853).</span></span> <span data-ttu-id="94d22-109">La información de esquema del objeto de destino se obtiene como parte del mensaje de respuesta en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="94d22-109">The schema information of the target object is obtained as part of the response message at run time.</span></span>  
  
 <span data-ttu-id="94d22-110">Sin embargo, si desea obtener la información de esquema del objeto de destino en tiempo de diseño, debe generar esquemas para los procedimientos en el **Strongly-Typed procedimientos** nodo en el [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)] o [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="94d22-110">However, if you want to obtain the schema information of the target object at design time, you must generate schemas for the procedures under the **Strongly-Typed Procedures** node in the [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)] or [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)].</span></span> <span data-ttu-id="94d22-111">Tenga en cuenta que se producen los mismos procedimientos almacenados en el **procedimientos** y **Strongly-Typed procedimientos** nodo.</span><span class="sxs-lookup"><span data-stu-id="94d22-111">Note that the same stored procedures are surfaced under the **Procedures** and the **Strongly-Typed Procedures** node.</span></span> <span data-ttu-id="94d22-112">El valor devuelto del procedimiento almacenado es fuertemente tipado y no solo una matriz de conjunto de datos.</span><span class="sxs-lookup"><span data-stu-id="94d22-112">The return value of the stored procedure is strongly typed, and not just an array of DataSet.</span></span> <span data-ttu-id="94d22-113">Como la información de esquema está disponible en el tiempo de diseño, puede usarlo para asignar el esquema del procedimiento almacenado a otro esquema para una operación distinta.</span><span class="sxs-lookup"><span data-stu-id="94d22-113">As the schema information is available at the design time, you can use it to map the schema of the stored procedure to another schema for a different operation.</span></span> <span data-ttu-id="94d22-114">Por ejemplo, puede asignar el esquema generado para un procedimiento fuertemente tipada para el esquema generado para la operación de inserción en una tabla de base de datos.</span><span class="sxs-lookup"><span data-stu-id="94d22-114">For example, you can map the schema generated for a strongly-typed procedure to the schema generated for the Insert operation on a database table.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="94d22-115">No podrá ver la información de esquema en tiempo de diseño para un procedimiento almacenado fuertemente tipados si:</span><span class="sxs-lookup"><span data-stu-id="94d22-115">You will not be able to view the schema information at design time for a strongly-typed stored procedure if:</span></span>  
>   
>  -   <span data-ttu-id="94d22-116">Está utilizando un cursor, que es un valor devuelto de otro procedimiento almacenado, como el parámetro de entrada para el procedimiento almacenado fuertemente tipada.</span><span class="sxs-lookup"><span data-stu-id="94d22-116">You are using a cursor, which is a return value of another stored procedure, as the input parameter for the strongly-typed stored procedure.</span></span>  
> -   <span data-ttu-id="94d22-117">Es un procedimiento almacenado CLR que realice algunas operaciones en una tabla.</span><span class="sxs-lookup"><span data-stu-id="94d22-117">It is a CLR stored procedure that performs some operations on a table.</span></span>  
  
## <a name="support-for-stored-procedures-with-for-xml-clause"></a><span data-ttu-id="94d22-118">Soporte técnico para los procedimientos almacenados con la cláusula FOR XML</span><span class="sxs-lookup"><span data-stu-id="94d22-118">Support for Stored Procedures with FOR XML Clause</span></span>  
 <span data-ttu-id="94d22-119">El [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] también le permite ejecutar procedimientos almacenados que tienen una instrucción SELECT con una cláusula FOR XML.</span><span class="sxs-lookup"><span data-stu-id="94d22-119">The [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] also enables you to execute stored procedures that have a SELECT statement with a FOR XML clause.</span></span> <span data-ttu-id="94d22-120">Se utiliza una cláusula FOR XML en una instrucción SELECT para devolver los resultados como XML en lugar de un conjunto de filas.</span><span class="sxs-lookup"><span data-stu-id="94d22-120">A FOR XML clause is used in a SELECT statement to return the results as XML instead of a rowset.</span></span> <span data-ttu-id="94d22-121">Para obtener más información acerca de la cláusula FOR XML, vea [http://go.microsoft.com/fwlink/?LinkId=131402](http://go.microsoft.com/fwlink/?LinkId=131402).</span><span class="sxs-lookup"><span data-stu-id="94d22-121">For more information about the FOR XML clause, see [http://go.microsoft.com/fwlink/?LinkId=131402](http://go.microsoft.com/fwlink/?LinkId=131402).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="94d22-122">"Nativo" [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] disponibles con [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] admite solo los procedimientos almacenan que devuelven XML, es decir, tiene la cláusula FOR XML en la instrucción SELECT.</span><span class="sxs-lookup"><span data-stu-id="94d22-122">The “native” [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] available with [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] supports only those stored procedures that return XML, that is, have the FOR XML clause in the SELECT statement.</span></span> <span data-ttu-id="94d22-123">Con la compatibilidad con los procedimientos almacenados con la cláusula FOR XML, puede ejecutar estos procedimientos almacenados mediante basadas en WCF [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] sin realizar ningún cambio en la definición del procedimiento almacenado.</span><span class="sxs-lookup"><span data-stu-id="94d22-123">With the support for stored procedures with FOR XML clause, you can execute these stored procedures using the WCF-based [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] without making any changes to the stored procedure definition.</span></span>  
  
## <a name="support-for-stored-procedures-with-temporary-tables"></a><span data-ttu-id="94d22-124">Compatibilidad con procedimientos almacenados con tablas temporales</span><span class="sxs-lookup"><span data-stu-id="94d22-124">Support for Stored Procedures with Temporary Tables</span></span>  
 <span data-ttu-id="94d22-125">El [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] permite generar metadatos para los procedimientos almacenados que contienen tablas temporales en sus definiciones.</span><span class="sxs-lookup"><span data-stu-id="94d22-125">The [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] enables you to generate metadata for stored procedures that contain temporary tables in their definitions.</span></span> <span data-ttu-id="94d22-126">Sin embargo, para estos procedimientos almacenados debe generar metadatos seleccionando los procedimientos almacenados solo desde el **procedimientos** nodo, al usar el [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] o [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="94d22-126">However, for such stored procedures you must generate metadata by selecting the stored procedures only from the **Procedures** node, while using the [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] or [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span> <span data-ttu-id="94d22-127">El adaptador no admite generar metadatos para dichos procedimientos almacenados desde el **Strongly-Typed procedimientos** nodo.</span><span class="sxs-lookup"><span data-stu-id="94d22-127">The adapter does not support generating metadata for such stored procedures from under the **Strongly-Typed Procedures** node.</span></span>  
  
## <a name="support-for-result-sets-containing-columns-without-names-or-with-same-names"></a><span data-ttu-id="94d22-128">Compatibilidad con conjuntos de resultados que contienen columnas sin nombre o con el mismo nombre</span><span class="sxs-lookup"><span data-stu-id="94d22-128">Support for Result Sets Containing Columns Without Names or With Same Names</span></span>  
 <span data-ttu-id="94d22-129">La siguiente tabla muestra cómo el [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] controla las columnas sin nombres y los mismos nombres en los conjuntos de resultados para los procedimientos almacenados y procedimientos almacenados fuertemente tipada.</span><span class="sxs-lookup"><span data-stu-id="94d22-129">The following table lists how the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] handles columns without names and same names in the result sets for stored procedures and strongly-typed stored procedures.</span></span>  
  
|<span data-ttu-id="94d22-130">Conjunto de resultados contiene...</span><span class="sxs-lookup"><span data-stu-id="94d22-130">Result set contains…</span></span>|<span data-ttu-id="94d22-131">Procedimiento almacenado</span><span class="sxs-lookup"><span data-stu-id="94d22-131">Stored Procedure</span></span>|<span data-ttu-id="94d22-132">Procedimiento almacenado fuertemente tipados</span><span class="sxs-lookup"><span data-stu-id="94d22-132">Strongly-Typed Stored Procedure</span></span>|  
|--------------------------|----------------------|--------------------------------------|  
|<span data-ttu-id="94d22-133">**Columnas sin nombre**</span><span class="sxs-lookup"><span data-stu-id="94d22-133">**Columns without names**</span></span>|<span data-ttu-id="94d22-134">El [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] genera un nombre para la columna de la siguiente manera: se genera un identificador único (GUID) para la columna sin "-" (guión), y, a continuación, la cadena de GUID viene precedida por un "C" porque el GUID generado puede comenzar por un dígito, pero no un nombre de etiqueta XML.</span><span class="sxs-lookup"><span data-stu-id="94d22-134">The [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] generates a name for the column in the following way: a unique ID (GUID) is generated for the column without "-" (hyphen), and then the GUID string is prefixed by "C" because the generated GUID might start with a digit but an XML tag name cannot.</span></span>|<span data-ttu-id="94d22-135">El [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] genera el siguiente nombre para la columna: "UnNamedColumn [column_index]", donde se inicia column_index entre '0'.</span><span class="sxs-lookup"><span data-stu-id="94d22-135">The [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] generates the following name for the column: “UnNamedColumn[column_index]”,  where column_index starts from ‘0’.</span></span>|  
|<span data-ttu-id="94d22-136">**Columnas con el mismo nombre**</span><span class="sxs-lookup"><span data-stu-id="94d22-136">**Columns with same names**</span></span>|<span data-ttu-id="94d22-137">Los nombres de las columnas que no sea la primera de ellas se anexan con "_" (subrayado) seguido de un GUID aleatorio sin "-" (guión).</span><span class="sxs-lookup"><span data-stu-id="94d22-137">The names of the columns other than the first one are appended with “_” (underscore) followed by a random GUID without "-" (hyphen).</span></span> <span data-ttu-id="94d22-138">Por ejemplo: "\_[GUID]".</span><span class="sxs-lookup"><span data-stu-id="94d22-138">For example: “\_[GUID]”.</span></span>|<span data-ttu-id="94d22-139">El [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] no admite las columnas con los mismos nombres en los conjuntos de resultados y produce una excepción.</span><span class="sxs-lookup"><span data-stu-id="94d22-139">The [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] does not support columns with same names in the result sets, and throws an exception.</span></span> <span data-ttu-id="94d22-140">**Importante:** debe asegurarse de que los nombres de columna en un conjunto de resultados tienen nombres únicos.</span><span class="sxs-lookup"><span data-stu-id="94d22-140">**Important:**  You must ensure that the column names in a result set have unique names.</span></span>|  
  
> [!NOTE]
>  <span data-ttu-id="94d22-141">En general, se recomienda que todas las columnas de un resultado establecen para los procedimientos almacenados y procedimientos almacenados fuertemente tipada deben denominarse y tienen nombres únicos.</span><span class="sxs-lookup"><span data-stu-id="94d22-141">In general, it is recommended that all the columns in a result set for stored procedures and strongly-typed stored procedures must be named, and have unique names.</span></span>  
  
 <span data-ttu-id="94d22-142">Para obtener más información acerca de:</span><span class="sxs-lookup"><span data-stu-id="94d22-142">For more information about:</span></span>  
  
-   <span data-ttu-id="94d22-143">Cómo ejecutar procedimientos almacenados, consulte [ejecutar procedimientos almacenados en SQL Server mediante BizTalk Server](../../adapters-and-accelerators/adapter-sql/execute-stored-procedures-in-sql-server-using-biztalk-server.md).</span><span class="sxs-lookup"><span data-stu-id="94d22-143">How to execute stored procedures, see [Execute stored procedures in SQL Server using BizTalk Server](../../adapters-and-accelerators/adapter-sql/execute-stored-procedures-in-sql-server-using-biztalk-server.md).</span></span>  
  
-   <span data-ttu-id="94d22-144">Cómo ejecutar procedimientos almacenados con una cláusula FOR XML, consulte [ejecutar procedimientos almacenados que tengan una cláusula FOR XML en SQL Server mediante BizTalk Server](../../adapters-and-accelerators/adapter-sql/execute-stored-procedures-having-a-for-xml-clause-in-sql-server-using-biztalk.md).</span><span class="sxs-lookup"><span data-stu-id="94d22-144">How to execute stored procedures having a FOR XML clause, see [Execute stored procedures having a FOR XML clause in SQL Server using BizTalk Server](../../adapters-and-accelerators/adapter-sql/execute-stored-procedures-having-a-for-xml-clause-in-sql-server-using-biztalk.md).</span></span>  
  
-   <span data-ttu-id="94d22-145">Esquemas para los procedimientos almacenados de mensajes, vea [esquemas de mensaje para los procedimientos y funciones](../../adapters-and-accelerators/adapter-sql/message-schemas-for-procedures-and-functions.md).</span><span class="sxs-lookup"><span data-stu-id="94d22-145">Message schemas for the stored procedures, see [Message Schemas for Procedures and Functions](../../adapters-and-accelerators/adapter-sql/message-schemas-for-procedures-and-functions.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="94d22-146">Vea también</span><span class="sxs-lookup"><span data-stu-id="94d22-146">See Also</span></span>  
 [<span data-ttu-id="94d22-147">Conectarse a un sistema SAP mediante el adaptador</span><span class="sxs-lookup"><span data-stu-id="94d22-147">Connect to an SAP system using the adapter</span></span>](../../adapters-and-accelerators/adapter-sap/connect-to-an-sap-system-using-the-adapter.md)
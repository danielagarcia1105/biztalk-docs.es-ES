---
title: Sondeo en SQL Server mediante el adaptador de SQL | Documentos de Microsoft
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: c31b3cda-c05e-46db-827b-6c47a53d1a3a
caps.latest.revision: "19"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 7d01bc3d004da60b98e0132aa3c8e04442a45426
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
---
# <a name="polling-in-sql-server-using-the-sql-adapter"></a><span data-ttu-id="3b01b-102">Sondeo en SQL Server mediante el adaptador de SQL</span><span class="sxs-lookup"><span data-stu-id="3b01b-102">Polling in SQL Server using the SQL adapter</span></span>
[!INCLUDE[adaptersql](../../includes/adaptersql-md.md)]<span data-ttu-id="3b01b-103">permite a los clientes de adaptador recibir mensajes de cambio de datos de la base de datos de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3b01b-103"> enables adapter clients to receive data-change messages from the SQL Server database.</span></span> <span data-ttu-id="3b01b-104">El [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] admite la recepción de mensajes "basada en sondeo" en el que el adaptador ejecuta una instrucción SQL especificada (instrucción SELECT o procedimiento almacenado), recupera o actualiza los datos y proporciona el resultado al cliente de adaptador a intervalos regulares de hora.</span><span class="sxs-lookup"><span data-stu-id="3b01b-104">The [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] supports receiving "polling-based" messages wherein the adapter executes a specified SQL statement (SELECT statement or stored procedure), retrieves or updates the data, and provides the result to the adapter client at regular intervals of time.</span></span>  
  
 <span data-ttu-id="3b01b-105">La [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] expone las siguientes operaciones para el sondeo:</span><span class="sxs-lookup"><span data-stu-id="3b01b-105">The [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] exposes the following operations for polling:</span></span>  
  
-   <span data-ttu-id="3b01b-106">**Sondeo**: le permite recibir mensajes de cambio de datos periódicos para SQL Server tablas o vistas.</span><span class="sxs-lookup"><span data-stu-id="3b01b-106">**Polling**: Enables you to receive periodic data-change messages for SQL Server tables or views.</span></span> <span data-ttu-id="3b01b-107">Los mensajes no son fuertemente tipada.</span><span class="sxs-lookup"><span data-stu-id="3b01b-107">The messages are not strongly-typed.</span></span>  
  
-   <span data-ttu-id="3b01b-108">**TypedPolling**: le permite recibir mensajes fuertemente tipada de la base de datos de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3b01b-108">**TypedPolling**: Enables you to receive strongly-typed messages from the SQL Server database.</span></span> <span data-ttu-id="3b01b-109">Debe usar esta operación si va a asignar los elementos en el mensaje de sondeo para cualquier otro esquema.</span><span class="sxs-lookup"><span data-stu-id="3b01b-109">You must use this operation if you intend to map the elements in the polling message to any other schema.</span></span>  
  
-   <span data-ttu-id="3b01b-110">**XmlPolling**.</span><span class="sxs-lookup"><span data-stu-id="3b01b-110">**XmlPolling**.</span></span> <span data-ttu-id="3b01b-111">Le permite utilizar las instrucciones SELECT o procedimientos almacenados que utilice una cláusula FOR XML y devuelvan los datos como mensajes XML.</span><span class="sxs-lookup"><span data-stu-id="3b01b-111">Enables you to use SELECT statements or stored procedures that use a FOR XML clause and return data as XML messages.</span></span> <span data-ttu-id="3b01b-112">Esta operación devuelve el mensaje de sondeo como un mensaje XML.</span><span class="sxs-lookup"><span data-stu-id="3b01b-112">This operation returns the polling message as an XML message.</span></span>  
  
     <span data-ttu-id="3b01b-113">Para obtener más información acerca de la cláusula FOR XML, vea [http://go.microsoft.com/fwlink/?LinkId=131402](http://go.microsoft.com/fwlink/?LinkId=131402).</span><span class="sxs-lookup"><span data-stu-id="3b01b-113">For more information about FOR XML clause, see [http://go.microsoft.com/fwlink/?LinkId=131402](http://go.microsoft.com/fwlink/?LinkId=131402).</span></span>  
  
 <span data-ttu-id="3b01b-114">Para obtener más información acerca del sondeo en el [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)], consulte [mensajes de datos cambiado basados en la recepción de sondeo de SQL Server mediante BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-polling-based-data-changed-messages-from-sql-server-using-biztalk.md).</span><span class="sxs-lookup"><span data-stu-id="3b01b-114">For more information about polling in the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)], see [Receive Polling-based Data-changed Messages from SQL Server by Using BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-polling-based-data-changed-messages-from-sql-server-using-biztalk.md).</span></span>  
  
## <a name="polling"></a><span data-ttu-id="3b01b-115">Sondeo</span><span class="sxs-lookup"><span data-stu-id="3b01b-115">Polling</span></span>  
 <span data-ttu-id="3b01b-116">Una operación de sondeo típica mediante el [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] implica lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="3b01b-116">A typical polling operation using the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] involves the following:</span></span>  
  
1.  <span data-ttu-id="3b01b-117">Deben especificar los clientes de adaptador `Polling` como la operación de entrada en el **InboundOperationType** propiedad de enlace.</span><span class="sxs-lookup"><span data-stu-id="3b01b-117">The adapter clients must specify `Polling` as the inbound operation in the **InboundOperationType** binding property.</span></span> <span data-ttu-id="3b01b-118">El valor predeterminado de esta propiedad de enlace es `Polling`.</span><span class="sxs-lookup"><span data-stu-id="3b01b-118">The default value for this binding property is `Polling`.</span></span>  
  
2.  <span data-ttu-id="3b01b-119">Los clientes de adaptador deben especificar una instrucción SQL para la **PolledDataAvailableStatement** propiedad que determina si hay datos disponibles para el sondeo de enlace.</span><span class="sxs-lookup"><span data-stu-id="3b01b-119">The adapter clients must specify a SQL statement for the **PolledDataAvailableStatement** binding property that determines whether there is data available for polling.</span></span> <span data-ttu-id="3b01b-120">La primera columna de la primera fila del primer conjunto de resultados devuelto al ejecutar esta instrucción contiene un valor entero.</span><span class="sxs-lookup"><span data-stu-id="3b01b-120">The first column of the first row of the first result set returned on executing this statement contains an integer value.</span></span> <span data-ttu-id="3b01b-121">Si no hay ningún dato disponible para el sondeo, el valor devuelto es 0 (cero).</span><span class="sxs-lookup"><span data-stu-id="3b01b-121">If there is no data available for polling, the return value is 0 (zero).</span></span> <span data-ttu-id="3b01b-122">Si hay datos disponibles, el valor devuelto es mayor que cero.</span><span class="sxs-lookup"><span data-stu-id="3b01b-122">If there is data available, the return value is greater than zero.</span></span>  
  
3.  <span data-ttu-id="3b01b-123">Los clientes de adaptador deben especificar un intervalo de sondeo para la **PollingIntervalInSeconds** enlace de propiedad para definir el intervalo en el que la instrucción en el **PolledDataAvailableStatement** enlace se ejecuta la propiedad.</span><span class="sxs-lookup"><span data-stu-id="3b01b-123">The adapter clients must specify a polling interval for the **PollingIntervalInSeconds** binding property to define the interval at which the statement in the **PolledDataAvailableStatement** binding property is executed.</span></span> <span data-ttu-id="3b01b-124">Al final de cada intervalo de sondeo, se ejecuta la instrucción disponibles datos extraídos y se devuelve el conjunto de resultados.</span><span class="sxs-lookup"><span data-stu-id="3b01b-124">At the end of every polling interval, the polled data available statement is executed, and the result set is returned.</span></span>  
  
4.  <span data-ttu-id="3b01b-125">Los clientes de adaptador deben especificar una instrucción SQL de sondeo (instrucción SELECT o un procedimiento almacenado) para la **PollingStatement** propiedad de enlace.</span><span class="sxs-lookup"><span data-stu-id="3b01b-125">The adapter clients must specify a polling SQL statement (SELECT statement or stored procedure) for the **PollingStatement** binding property.</span></span> <span data-ttu-id="3b01b-126">Si no hay datos disponibles para el sondeo (determinado por la **PolledDataAvailableStatement** propiedad de enlace), el adaptador ejecuta la instrucción de sondeo para obtener y actualizar (si procede) los datos en la base de datos de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3b01b-126">If there is data available for polling (determined by the **PolledDataAvailableStatement** binding property), the adapter executes the polling statement to obtain and update (if applicable) the data in the SQL Server database.</span></span> <span data-ttu-id="3b01b-127">Cuando el [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] se utiliza con [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)], también se utiliza la misma transacción para enviar el mensaje a [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3b01b-127">When the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] is used with [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)], the same transaction is also used to submit the message to [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)].</span></span>  
  
5.  <span data-ttu-id="3b01b-128">Pueden usar los clientes de adaptador el **PollWhileDataFound** enlace de propiedad para omitir el intervalo de sondeo y los datos, un sondeo continuo como y cuando esté disponible.</span><span class="sxs-lookup"><span data-stu-id="3b01b-128">The adapter clients can use the **PollWhileDataFound** binding property to ignore the polling interval, and continuously poll data, as and when available.</span></span>  
  
6.  <span data-ttu-id="3b01b-129">Los conjuntos de resultados que se devuelven como resultado de ejecutar la instrucción de sondeo se envían al cliente de adaptador como el mensaje entrante.</span><span class="sxs-lookup"><span data-stu-id="3b01b-129">The result sets that are returned as a result of executing the polling statement are sent to the adapter client as the inbound message.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="3b01b-130">Una operación XmlPolling implica los mismos pasos que la operación de sondeo.</span><span class="sxs-lookup"><span data-stu-id="3b01b-130">An XmlPolling operation involves the same steps as the Polling operation.</span></span>  
  
## <a name="strongly-typed-polling"></a><span data-ttu-id="3b01b-131">Sondeo fuertemente tipado</span><span class="sxs-lookup"><span data-stu-id="3b01b-131">Strongly-Typed Polling</span></span>  
 <span data-ttu-id="3b01b-132">Una operación típica sondeo fuertemente tipado mediante el [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] implica lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="3b01b-132">A typical strongly-typed polling operation using the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] involves the following:</span></span>  
  
1.  <span data-ttu-id="3b01b-133">Deben especificar los clientes de adaptador `TypedPolling` como la operación de entrada en el **InboundOperationType** propiedad de enlace.</span><span class="sxs-lookup"><span data-stu-id="3b01b-133">The adapter clients must specify `TypedPolling` as the inbound operation in the **InboundOperationType** binding property.</span></span> <span data-ttu-id="3b01b-134">El valor predeterminado de esta propiedad de enlace es `Polling`.</span><span class="sxs-lookup"><span data-stu-id="3b01b-134">The default value for this binding property is `Polling`.</span></span>  
  
2.  <span data-ttu-id="3b01b-135">Los clientes de adaptador deben especificar un Id. de entrada como parte del URI de conexión.</span><span class="sxs-lookup"><span data-stu-id="3b01b-135">The adapter clients must specify an inbound ID as part of the connection URI.</span></span> <span data-ttu-id="3b01b-136">El identificador de entrada puede ser cualquier cadena y se anexa al espacio de nombres estándar de la operación TypedPolling para evitar conflictos de espacio de nombres.</span><span class="sxs-lookup"><span data-stu-id="3b01b-136">The inbound ID could be any string and is appended to the standard namespace of the TypedPolling operation to prevent namespace collisions.</span></span>  
  
3.  <span data-ttu-id="3b01b-137">El resto de los pasos son los mismos que los pasos 2 a 6 aparece en la operación de sondeo se describe en la sección anterior.</span><span class="sxs-lookup"><span data-stu-id="3b01b-137">The rest of the steps are same as steps 2–6 listed in the Polling operation described in the preceding section.</span></span>  
  
 <span data-ttu-id="3b01b-138">Para obtener información detallada acerca de las propiedades de enlace relacionado con el sondeo y sondeo fuertemente tipado, consulte [obtener información sobre el adaptador de BizTalk para propiedades de enlace del adaptador de SQL Server](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md).</span><span class="sxs-lookup"><span data-stu-id="3b01b-138">For detailed information about the binding properties related to polling and strongly-typed polling, see [Read about BizTalk Adapter for SQL Server adapter  Binding Properties](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="3b01b-139">Como resultado de ejecutar la instrucción de sondeo se pueden devolver varios conjuntos de resultados.</span><span class="sxs-lookup"><span data-stu-id="3b01b-139">Multiple result sets can be returned as a result of executing the polling statement.</span></span> <span data-ttu-id="3b01b-140">Si los conjuntos de resultados no contiene ninguna fila, no hay mensajes se envían al cliente de adaptador.</span><span class="sxs-lookup"><span data-stu-id="3b01b-140">If the result sets do not contain any rows, no messages are sent to the adapter client.</span></span>  
  
 <span data-ttu-id="3b01b-141">La ilustración siguiente proporciona información sobre el flujo de trabajo de sondeo en [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3b01b-141">The illustration below provides information about the polling workflow in [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)].</span></span> <span data-ttu-id="3b01b-142">Se ilustran dos escenarios para el flujo de trabajo de sondeo:</span><span class="sxs-lookup"><span data-stu-id="3b01b-142">Two scenarios for the polling workflow are illustrated:</span></span>  
  
1.  <span data-ttu-id="3b01b-143">Cuando el valor de la **PollWhileDataFound** se establece en "False" (valor predeterminado).</span><span class="sxs-lookup"><span data-stu-id="3b01b-143">When the value of the **PollWhileDataFound** is set to “False” (default setting).</span></span>  
  
2.  <span data-ttu-id="3b01b-144">Cuando el valor de la **PollWhileDataFound** está establecido en "True".</span><span class="sxs-lookup"><span data-stu-id="3b01b-144">When the value of the **PollWhileDataFound** is set to “True.”</span></span>  
  
 <span data-ttu-id="3b01b-145">![Flujo de trabajo de sondeo &#40; PollWhileDataFound &#61; False &#41; ] (../../adapters-and-accelerators/adapter-sql/media/15598c14-3a62-4b8d-90bf-84e004a386db.gif "15598c14-3a62-4b8d-90bf-84e004a386db") ![sondeo de flujo de trabajo &#40; PollWhileDataFound &#61; True &#41; ] (../../adapters-and-accelerators/adapter-sql/media/c20535be-ea45-4456-8b62-4d4585cb1d8c.gif "c20535be-ea45-4456-8b62-4d4585cb1d8c")</span><span class="sxs-lookup"><span data-stu-id="3b01b-145">![Polling Workflow &#40;PollWhileDataFound &#61; False&#41;](../../adapters-and-accelerators/adapter-sql/media/15598c14-3a62-4b8d-90bf-84e004a386db.gif "15598c14-3a62-4b8d-90bf-84e004a386db") ![Polling Workflow &#40;PollWhileDataFound &#61; True&#41;](../../adapters-and-accelerators/adapter-sql/media/c20535be-ea45-4456-8b62-4d4585cb1d8c.gif "c20535be-ea45-4456-8b62-4d4585cb1d8c")</span></span>  
  
## <a name="differences-between-polling-and-query-notification"></a><span data-ttu-id="3b01b-146">Diferencias entre el sondeo y la notificación de consulta</span><span class="sxs-lookup"><span data-stu-id="3b01b-146">Differences between Polling and Query Notification</span></span>  
 <span data-ttu-id="3b01b-147">Aunque la notificación de sondeo y la consulta son ambas operaciones de entrada e informar a los clientes de adaptador acerca de los cambios de datos en la base de datos de SQL Server, la tabla siguiente enumeran algunas diferencias entre los dos.</span><span class="sxs-lookup"><span data-stu-id="3b01b-147">Though polling and query notification are both inbound operations, and inform the adapter clients about the data changes in the SQL Server database, the following table lists some differences between the two.</span></span> <span data-ttu-id="3b01b-148">Las siguientes diferencias le ayudará a decidir sobre una operación según sus requisitos:</span><span class="sxs-lookup"><span data-stu-id="3b01b-148">The following differences will help you decide on an operation depending on your requirements:</span></span>  
  
|<span data-ttu-id="3b01b-149">Sondeo</span><span class="sxs-lookup"><span data-stu-id="3b01b-149">Polling</span></span>|<span data-ttu-id="3b01b-150">Notificación de consulta</span><span class="sxs-lookup"><span data-stu-id="3b01b-150">Query Notification</span></span>|  
|-------------|------------------------|  
|<span data-ttu-id="3b01b-151">Sondeo se inicia el adaptador.</span><span class="sxs-lookup"><span data-stu-id="3b01b-151">Polling is initiated by the adapter.</span></span> <span data-ttu-id="3b01b-152">El adaptador ejecuta una instrucción para validar si los datos están disponibles para el sondeo y, a continuación, inicia el sondeo mediante la ejecución de la instrucción de sondeo si algunos datos están disponibles para el sondeo.</span><span class="sxs-lookup"><span data-stu-id="3b01b-152">The adapter executes a statement to validate whether data is available for polling, and then initiates polling by executing the polling statement if some data is available for polling.</span></span>|<span data-ttu-id="3b01b-153">Notificación de consulta se inicia SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3b01b-153">Query notification is initiated by SQL Server.</span></span> <span data-ttu-id="3b01b-154">La instrucción de notificación emitida por el adaptador simplemente indica a la base de datos para iniciar la notificación en caso de que hay un cambio en el conjunto de resultados de la instrucción.</span><span class="sxs-lookup"><span data-stu-id="3b01b-154">The notification statement issued by the adapter just instructs the database to initiate notification in case there is a change in the result set of the statement.</span></span>|  
|<span data-ttu-id="3b01b-155">Puede usar la instrucción de sondeo para leer o actualizar datos en una tabla de base de datos de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3b01b-155">You can use the polling statement to read or update data in a SQL Server database table.</span></span>|<span data-ttu-id="3b01b-156">Puede usar la instrucción de notificación de consulta sólo para leer datos de una tabla de base de datos de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3b01b-156">You can use the query notification statement to only read data in a SQL Server database table.</span></span>|  
|<span data-ttu-id="3b01b-157">Sondeo le informa sobre los datos reales que han cambiado.</span><span class="sxs-lookup"><span data-stu-id="3b01b-157">Polling informs you about the actual data that has changed.</span></span>|<span data-ttu-id="3b01b-158">Notificación de consulta solo le informa sobre el tipo de cambio en los datos, como Insert, Update y Delete.</span><span class="sxs-lookup"><span data-stu-id="3b01b-158">Query notification only informs about the type of change in the data such as Insert, Update, and Delete.</span></span>|  
|<span data-ttu-id="3b01b-159">Depende de la notificación de cambio de datos en el intervalo de sondeo y los clientes de adaptador están informados sobre los cambios de datos al final de cada intervalo de sondeo.</span><span class="sxs-lookup"><span data-stu-id="3b01b-159">The data-change notification depends on the polling interval, and the adapter clients are informed about the data changes at the end of every polling interval.</span></span> <span data-ttu-id="3b01b-160">**Sugerencia:** sondeo puede proporcionar un mejor rendimiento en escenarios donde los cambios de datos se producen de forma continua y no desea recibir una notificación de cada cambio como y cuando esto ocurre.</span><span class="sxs-lookup"><span data-stu-id="3b01b-160">**Tip:**  Polling can give you better throughput in scenarios where the data changes are happening continuously, and you do not want to be notified of each change as and when it happens.</span></span> <span data-ttu-id="3b01b-161">En su lugar, especifique un intervalo de sondeo después del cual desea recibir una notificación de todos los cambios que se han producido desde la última notificación de cambio de datos.</span><span class="sxs-lookup"><span data-stu-id="3b01b-161">Instead, you specify a polling interval after which you want to be notified of all the changes that have happened since the last data-change notification.</span></span>|<span data-ttu-id="3b01b-162">La notificación de cambio de datos es instantánea.</span><span class="sxs-lookup"><span data-stu-id="3b01b-162">The data-change notification is instantaneous.</span></span>|  
  
 <span data-ttu-id="3b01b-163">Para obtener más información acerca de las notificaciones de consulta en [!INCLUDE[adaptersql](../../includes/adaptersql-md.md)], consulte [recibir las notificaciones de consulta de SQL por mediante BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-sql-query-notifications-using-biztalk-server.md).</span><span class="sxs-lookup"><span data-stu-id="3b01b-163">For more information about query notification in [!INCLUDE[adaptersql](../../includes/adaptersql-md.md)], see [Receive SQL Query Notifications by Using BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-sql-query-notifications-using-biztalk-server.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="3b01b-164">Vea también</span><span class="sxs-lookup"><span data-stu-id="3b01b-164">See Also</span></span>  
 <span data-ttu-id="3b01b-165">[¿Qué operaciones pueden ser realizadas utilizando el adaptador?](https://msdn.microsoft.com/library/cc185435(v=bts.10).aspx)</span><span class="sxs-lookup"><span data-stu-id="3b01b-165">[What Operations Can be Performed Using the Adapter?](https://msdn.microsoft.com/library/cc185435(v=bts.10).aspx)</span></span>
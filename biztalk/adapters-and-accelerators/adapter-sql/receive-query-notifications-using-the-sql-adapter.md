---
title: Recibir notificaciones de consulta mediante el adaptador de SQL | Documentos de Microsoft
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 6b2ed0f0-d005-4eec-b1a6-97a0c94678dc
caps.latest.revision: "10"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 37d333a2248c943d1d404aa086565ae4b1662226
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
---
# <a name="receive-query-notifications-using-the-sql-adapter"></a><span data-ttu-id="40894-102">Recibir notificaciones de consulta mediante el adaptador de SQL</span><span class="sxs-lookup"><span data-stu-id="40894-102">Receive query notifications using the SQL adapter</span></span>
<span data-ttu-id="40894-103">Los clientes de adaptador pueden suscribirse para recibir notificaciones de consulta sobre los cambios de datos en la base de datos de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="40894-103">The adapter clients can subscribe to receive query notifications about the data changes in the SQL Server database.</span></span> <span data-ttu-id="40894-104">Una instrucción SELECT de SQL o un procedimiento almacenado especifica los criterios de cambio de datos en una tabla para la activación de las notificaciones de consulta y el servidor SQL Server envía notificaciones de consulta como y cuando el conjunto de resultados de la instrucción SELECT o el procedimiento almacenado cambia.</span><span class="sxs-lookup"><span data-stu-id="40894-104">A SQL SELECT statement or a stored procedure specifies the data-change criteria in a table for triggering of the query notifications, and the SQL Server sends query notifications as and when the result set for the SELECT statement or the stored procedure changes.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="40894-105">Para admitir las notificaciones de consulta, los clientes de adaptador y de la base de datos de SQL Server deben cumplir ciertos requisitos.</span><span class="sxs-lookup"><span data-stu-id="40894-105">To support query notifications, the adapter clients and the SQL Server database have to fulfill certain requirements.</span></span> <span data-ttu-id="40894-106">Para obtener información detallada acerca de estos requisitos, consulte "Habilitar las notificaciones de consulta" en [http://go.microsoft.com/fwlink/?LinkID=122323](http://go.microsoft.com/fwlink/?LinkID=122323).</span><span class="sxs-lookup"><span data-stu-id="40894-106">For detailed information about these requirements, see “Enabling Query Notifications” at [http://go.microsoft.com/fwlink/?LinkID=122323](http://go.microsoft.com/fwlink/?LinkID=122323).</span></span>  
  
 <span data-ttu-id="40894-107">Una notificación de consulta típica implica lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="40894-107">A typical query notification involves the following:</span></span>  
  
-   <span data-ttu-id="40894-108">Deben especificar los clientes de adaptador `Notification` como la operación de entrada en el **InboundOperationType** propiedad de enlace.</span><span class="sxs-lookup"><span data-stu-id="40894-108">The adapter clients must specify `Notification` as the inbound operation in the **InboundOperationType** binding property.</span></span> <span data-ttu-id="40894-109">El valor predeterminado de esta propiedad de enlace es `Polling`.</span><span class="sxs-lookup"><span data-stu-id="40894-109">The default value for this binding property is `Polling`.</span></span>  
  
-   <span data-ttu-id="40894-110">Los clientes de adaptador deben especificar una instrucción SQL para registrar las notificaciones de consulta en el **NotificationStatement** propiedad de enlace.</span><span class="sxs-lookup"><span data-stu-id="40894-110">The adapter clients must specify a SQL statement to register for query notifications in the **NotificationStatement** binding property.</span></span> <span data-ttu-id="40894-111">El cliente de adaptador recibe una notificación de SQL Server tan pronto como el conjunto de resultados para que los cambios de instrucción SQL especificados.</span><span class="sxs-lookup"><span data-stu-id="40894-111">The adapter client gets a notification from SQL Server as soon as the result set for the specified SQL statement changes.</span></span>  
  
    > [!IMPORTANT]
    >  <span data-ttu-id="40894-112">Para recibir notificaciones, la instrucción SQL para la suscripción de notificación *debe* cumplen determinados criterios.</span><span class="sxs-lookup"><span data-stu-id="40894-112">To receive notifications, the SQL statement for the notification subscription *must* meet certain criteria.</span></span> <span data-ttu-id="40894-113">Para obtener información acerca de las instrucciones SQL que se puede usar para las notificaciones de consulta, vea [http://go.microsoft.com/fwlink/?LinkId=122160](http://go.microsoft.com/fwlink/?LinkId=122160).</span><span class="sxs-lookup"><span data-stu-id="40894-113">For information about SQL statements that can be used for query notifications, see [http://go.microsoft.com/fwlink/?LinkId=122160](http://go.microsoft.com/fwlink/?LinkId=122160).</span></span>  
  
-   <span data-ttu-id="40894-114">Los clientes de adaptador deben especificar si el adaptador envía una notificación a los clientes de adaptador en cuanto se inicia el agente de escucha en el **NotifyOnListenerStart** propiedad de enlace.</span><span class="sxs-lookup"><span data-stu-id="40894-114">The adapter clients must specify whether the adapter sends a notification to the adapter clients as soon as the listener is started in the **NotifyOnListenerStart** binding property.</span></span>  
  
-   <span data-ttu-id="40894-115">La notificación se envía a los clientes de adaptador como y cuando el conjunto de resultados de la instrucción SQL especificada en el **NotificationStatement** se cambia la propiedad de enlace.</span><span class="sxs-lookup"><span data-stu-id="40894-115">The notification is sent to the adapter clients as and when the result set of the SQL statement specified in the **NotificationStatement** binding property is changed.</span></span>  
  
 <span data-ttu-id="40894-116">Para obtener más información acerca de estas propiedades de enlace, vea [obtener información sobre el adaptador de BizTalk para propiedades de enlace del adaptador de SQL Server](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md).</span><span class="sxs-lookup"><span data-stu-id="40894-116">For more information about these binding properties, see [Read about the BizTalk Adapter for SQL Server adapter binding properties](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="40894-117">La suscripción de notificación se confirma siempre, independientemente de si se confirma o revierte la transacción en el que se ejecutó la instrucción.</span><span class="sxs-lookup"><span data-stu-id="40894-117">The notification subscription is always committed, regardless of whether the transaction in which the statement ran was committed or rolled back.</span></span> <span data-ttu-id="40894-118">Por lo tanto, la operación de notificación no puede garantizar que se ha cambiado el resultado de la consulta que se ha suscrito para la notificación.</span><span class="sxs-lookup"><span data-stu-id="40894-118">Therefore, the notification operation might not guarantee that the result of the query subscribed for notification has changed.</span></span> <span data-ttu-id="40894-119">Por ejemplo, suponga que se insertan datos en una fila de tabla (suscrita para la notificación) en una transacción y se envía inmediatamente una notificación para el adaptador que informa sobre el cambio (inserción).</span><span class="sxs-lookup"><span data-stu-id="40894-119">For example, suppose data is inserted in a table row (subscribed for notification) in a transaction, and immediately a notification is sent to the adapter informing about the change (insert).</span></span> <span data-ttu-id="40894-120">Por algún motivo, la transacción se revierte y no se inserta realmente ningún dato en la fila de la tabla.</span><span class="sxs-lookup"><span data-stu-id="40894-120">Due to some reason, the transaction rolls back, and effectively no data is inserted into the table row.</span></span> <span data-ttu-id="40894-121">Sin embargo, el servidor SQL Server no envía una notificación al adaptador sobre el revertir las transacciones.</span><span class="sxs-lookup"><span data-stu-id="40894-121">However, the SQL Server does not send a notification to the adapter about the transaction roll back.</span></span> <span data-ttu-id="40894-122">Para obtener información acerca de las notificaciones de consulta en SQL Server, vea [http://go.microsoft.com/fwlink/?LinkId=145367](http://go.microsoft.com/fwlink/?LinkId=145367).</span><span class="sxs-lookup"><span data-stu-id="40894-122">For information about query notifications in SQL Server, see [http://go.microsoft.com/fwlink/?LinkId=145367](http://go.microsoft.com/fwlink/?LinkId=145367).</span></span>  
  
## <a name="differences-between-query-notification-and-polling"></a><span data-ttu-id="40894-123">Diferencias entre la notificación de consulta y sondeo</span><span class="sxs-lookup"><span data-stu-id="40894-123">Differences between Query Notification and Polling</span></span>  
 <span data-ttu-id="40894-124">Aunque el sondeo y la notificación de consulta son ambas operaciones de entrada e informar a los clientes de adaptador acerca de los cambios de datos en la base de datos de SQL Server, la tabla siguiente enumeran algunas diferencias entre los dos.</span><span class="sxs-lookup"><span data-stu-id="40894-124">Though query notification and polling are both inbound operations, and inform the adapter clients about the data changes in the SQL Server database, the following table lists some differences between the two.</span></span> <span data-ttu-id="40894-125">Las siguientes diferencias le ayudará a decidir sobre una operación según sus requisitos:</span><span class="sxs-lookup"><span data-stu-id="40894-125">The following differences will help you decide on an operation depending on your requirements:</span></span>  
  
|<span data-ttu-id="40894-126">Notificación de consulta</span><span class="sxs-lookup"><span data-stu-id="40894-126">Query Notification</span></span>|<span data-ttu-id="40894-127">Sondeo</span><span class="sxs-lookup"><span data-stu-id="40894-127">Polling</span></span>|  
|------------------------|-------------|  
|<span data-ttu-id="40894-128">Notificación de consulta se inicia SQL Server.</span><span class="sxs-lookup"><span data-stu-id="40894-128">Query notification is initiated by SQL Server.</span></span> <span data-ttu-id="40894-129">La instrucción de notificación emitida por el adaptador simplemente indica a la base de datos para iniciar la notificación en caso de que hay un cambio en el conjunto de resultados de la instrucción.</span><span class="sxs-lookup"><span data-stu-id="40894-129">The notification statement issued by the adapter just instructs the database to initiate notification in case there is a change in the result set of the statement.</span></span>|<span data-ttu-id="40894-130">Sondeo se inicia el adaptador.</span><span class="sxs-lookup"><span data-stu-id="40894-130">Polling is initiated by the adapter.</span></span> <span data-ttu-id="40894-131">El adaptador ejecuta una instrucción para validar si los datos están disponibles para el sondeo y, a continuación, inicia el sondeo mediante la ejecución de la instrucción de sondeo si algunos datos están disponibles para el sondeo.</span><span class="sxs-lookup"><span data-stu-id="40894-131">The adapter executes a statement to validate whether data is available for polling, and then initiates polling by executing the polling statement if some data is available for polling.</span></span>|  
|<span data-ttu-id="40894-132">Puede usar la instrucción de notificación de consulta sólo para leer datos de una tabla de base de datos de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="40894-132">You can use the query notification statement to only read data in a SQL Server database table.</span></span>|<span data-ttu-id="40894-133">Puede usar la instrucción de sondeo para leer o actualizar datos en una tabla de base de datos de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="40894-133">You can use the polling statement to read or update data in a SQL Server database table.</span></span>|  
|<span data-ttu-id="40894-134">Notificación de consulta informa solo sobre el tipo de cambio en los datos, como Insert, Update y Delete.</span><span class="sxs-lookup"><span data-stu-id="40894-134">Query notification informs only about the type of change in the data such as Insert, Update, and Delete.</span></span>|<span data-ttu-id="40894-135">Sondeo le informa sobre los datos reales que han cambiado.</span><span class="sxs-lookup"><span data-stu-id="40894-135">Polling informs you about the actual data that has changed.</span></span>|  
|<span data-ttu-id="40894-136">La notificación de cambio de datos es instantánea.</span><span class="sxs-lookup"><span data-stu-id="40894-136">The data-change notification is instantaneous.</span></span>|<span data-ttu-id="40894-137">Depende de la notificación de cambio de datos en el intervalo de sondeo y los clientes de adaptador están informados sobre los cambios de datos al final de cada intervalo de sondeo.</span><span class="sxs-lookup"><span data-stu-id="40894-137">The data-change notification depends on the polling interval, and the adapter clients are informed about the data changes at the end of every polling interval.</span></span> <span data-ttu-id="40894-138">**Sugerencia:** sondeo puede proporcionar un mejor rendimiento en escenarios donde los cambios de datos se producen de forma continua y no desea recibir una notificación de cada cambio como y cuando esto ocurre.</span><span class="sxs-lookup"><span data-stu-id="40894-138">**Tip:**  Polling can give you better throughput in scenarios where the data changes are happening continuously, and you do not want to be notified of each change as and when it happens.</span></span> <span data-ttu-id="40894-139">En su lugar, especifique un intervalo de sondeo después del cual desea recibir una notificación de todos los cambios que se han producido desde la última notificación de cambios.</span><span class="sxs-lookup"><span data-stu-id="40894-139">Instead, you specify a polling interval after which you want to be notified of all the changes that have happened since the last change notification.</span></span>|  
  
 <span data-ttu-id="40894-140">Para obtener más información acerca de las notificaciones de consulta en [!INCLUDE[adaptersql](../../includes/adaptersql-md.md)], consulte [recibir las notificaciones de consulta de SQL por mediante BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-sql-query-notifications-using-biztalk-server.md).</span><span class="sxs-lookup"><span data-stu-id="40894-140">For more information about query notification in [!INCLUDE[adaptersql](../../includes/adaptersql-md.md)], see [Receive SQL Query Notifications by Using BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-sql-query-notifications-using-biztalk-server.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="40894-141">Vea también</span><span class="sxs-lookup"><span data-stu-id="40894-141">See Also</span></span>  
 <span data-ttu-id="40894-142">[¿Qué operaciones pueden ser realizadas utilizando el adaptador?](https://msdn.microsoft.com/library/cc185435(v=bts.10).aspx)</span><span class="sxs-lookup"><span data-stu-id="40894-142">[What Operations Can be Performed Using the Adapter?](https://msdn.microsoft.com/library/cc185435(v=bts.10).aspx)</span></span>
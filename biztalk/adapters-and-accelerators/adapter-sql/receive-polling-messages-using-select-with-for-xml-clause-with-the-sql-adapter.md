---
title: Recibir mensajes de sondeo mediante las instrucciones SELECT con la cláusula FOR XML de SQL mediante BizTalk Server | Documentos de Microsoft
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 65c629c1-9ef7-4aa1-8ec1-f94a3cb41cb0
caps.latest.revision: 13
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 51cd634d7933f7e25de2e742711b1593bf6b6dc1
ms.sourcegitcommit: 5abd0ed3f9e4858ffaaec5481bfa8878595e95f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/28/2017
ms.locfileid: "25967706"
---
# <a name="receive-polling-messages-using-select-statements-with-for-xml-clause-from-sql-using-biztalk-server"></a><span data-ttu-id="bdd98-102">Recibir mensajes de sondeo mediante las instrucciones SELECT con la cláusula FOR XML de SQL con BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="bdd98-102">Receive polling messages using SELECT statements with FOR XML Clause from SQL using BizTalk Server</span></span>
<span data-ttu-id="bdd98-103">Puede configurar el [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] para recibir mensajes de cambio de datos periódicos para SQL Server tablas o vistas mediante las instrucciones SELECT o procedimientos almacenados que incluyan una cláusula FOR XML.</span><span class="sxs-lookup"><span data-stu-id="bdd98-103">You can configure the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] to receive periodic data-change messages for SQL Server tables or views by using SELECT statements or stored procedures that include a FOR XML clause.</span></span> <span data-ttu-id="bdd98-104">Puede especificar estas instrucciones como instrucción de sondeo que el adaptador se ejecuta para sondear la base de datos.</span><span class="sxs-lookup"><span data-stu-id="bdd98-104">You can specify these statements as polling statement that the adapter executes to poll the database.</span></span> <span data-ttu-id="bdd98-105">La instrucción de sondeo puede ser una instrucción SELECT o un procedimiento almacenado que devuelve un conjunto de resultados.</span><span class="sxs-lookup"><span data-stu-id="bdd98-105">The polling statement can be a SELECT statement or a stored procedure that returns a result set.</span></span>  
  
 <span data-ttu-id="bdd98-106">Para obtener más información sobre cómo el adaptador admite el sondeo, consulte [soporte técnico para el sondeo](https://msdn.microsoft.com/library/dd788416.aspx).</span><span class="sxs-lookup"><span data-stu-id="bdd98-106">For more information on how the adapter supports polling, see [Support for Polling](https://msdn.microsoft.com/library/dd788416.aspx).</span></span> <span data-ttu-id="bdd98-107">Para obtener información acerca de la estructura del mensaje SOAP para las operaciones de sondeo, consulte [esquemas de mensaje para el sondeo y las operaciones de TypedPolling](../../adapters-and-accelerators/adapter-sql/message-schemas-for-the-polling-and-typedpolling-operations.md).</span><span class="sxs-lookup"><span data-stu-id="bdd98-107">For information about the structure of the SOAP message for polling operations, see [Message Schemas for the Polling and TypedPolling Operations](../../adapters-and-accelerators/adapter-sql/message-schemas-for-the-polling-and-typedpolling-operations.md).</span></span> <span data-ttu-id="bdd98-108">La instrucción SQL [cláusula FOR XML](https://docs.microsoft.com/sql/relational-databases/xml/for-xml-sql-server) proporcionan más detalles.</span><span class="sxs-lookup"><span data-stu-id="bdd98-108">The SQL [FOR XML clause](https://docs.microsoft.com/sql/relational-databases/xml/for-xml-sql-server) provides more details.</span></span>
  
> [!NOTE]
>  <span data-ttu-id="bdd98-109">Este tema muestra cómo utilizar el **XmlPolling** operación para recibir mensajes de sondeo de entrada.</span><span class="sxs-lookup"><span data-stu-id="bdd98-109">This topic demonstrates how to use the **XmlPolling** inbound operation to receive polling messages.</span></span> <span data-ttu-id="bdd98-110">El **XmlPolling** operación se usa para sondear una base de datos de SQL Server mediante las instrucciones SELECT o procedimientos almacenados que incluyen una cláusula FOR XML.</span><span class="sxs-lookup"><span data-stu-id="bdd98-110">The **XmlPolling** operation is used to poll a SQL Server database using SELECT statements or stored procedures that include a FOR XML clause.</span></span> <span data-ttu-id="bdd98-111">El mensaje para la **XmlPolling** operación incluye el mensaje xml recibido mediante la ejecución de la instrucción SELECT o el procedimiento almacenado en SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="bdd98-111">The message for the **XmlPolling** operation includes the xml message received by executing the SELECT statement or the stored procedure in SQL Server Management Studio.</span></span>  
>   
>  <span data-ttu-id="bdd98-112">También puede usar el adaptador para recibir los distintos tipos de mensajes de sondeo.</span><span class="sxs-lookup"><span data-stu-id="bdd98-112">You can also use the adapter to receive different types of polling messages.</span></span>  
>   
>  -   <span data-ttu-id="bdd98-113">Si desea obtener un mensaje de sondeo débilmente tipada, debe utilizar la operación de sondeo.</span><span class="sxs-lookup"><span data-stu-id="bdd98-113">If you want to get a weakly-typed polling message, you must use the Polling Operation.</span></span> <span data-ttu-id="bdd98-114">Para obtener más información, consulte [mensajes de datos cambiado basados en la recepción de sondeo de SQL Server mediante BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-polling-based-data-changed-messages-from-sql-server-using-biztalk.md).</span><span class="sxs-lookup"><span data-stu-id="bdd98-114">For more information, see [Receive Polling-based Data-changed Messages from SQL Server by Using BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-polling-based-data-changed-messages-from-sql-server-using-biztalk.md).</span></span>  
> -   <span data-ttu-id="bdd98-115">Si desea obtener el mensaje de sondeo fuertemente tipado, debe utilizar el **TypedPolling** operación.</span><span class="sxs-lookup"><span data-stu-id="bdd98-115">If you want to get strongly-typed polling message, you must use the **TypedPolling** operation.</span></span> <span data-ttu-id="bdd98-116">También debe utilizar el **TypedPolling** operación tener varias operaciones de sondeo en una única aplicación de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="bdd98-116">You must also use the **TypedPolling** operation to have multiple polling operations in a single BizTalk application.</span></span> <span data-ttu-id="bdd98-117">Para obtener instrucciones sobre cómo realizar **TypedPolling** operación, vea [recibir fuertemente tipado basado en sondeo mensajes de datos cambiado desde SQL Server mediante BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-strongly-typed-polling-based-data-changed-messages-from-sql-in-biztalk.md).</span><span class="sxs-lookup"><span data-stu-id="bdd98-117">For instructions on how to perform **TypedPolling** operation, see [Receive Strongly-typed Polling-based Data-changed Messages from SQL Server using BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-strongly-typed-polling-based-data-changed-messages-from-sql-in-biztalk.md).</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="bdd98-118">Si desea tener más de un sondeo operación en una sola aplicación de BizTalk, debe especificar un **InboundID** propiedad de conexión como parte de la conexión de URI para que sea único.</span><span class="sxs-lookup"><span data-stu-id="bdd98-118">If you want to have more than one polling operation in a single BizTalk application, you must specify an **InboundID** connection property as part of the connection URI to make it unique.</span></span> <span data-ttu-id="bdd98-119">Con un URI de conexión único, puede crear varios puertos de recepción que sondean la misma base de datos, o incluso la misma tabla en una base de datos.</span><span class="sxs-lookup"><span data-stu-id="bdd98-119">With a unique connection URI, you can create multiple receive ports that poll the same database, or even the same table in a database.</span></span> <span data-ttu-id="bdd98-120">Para obtener más información, consulte [de recepción de sondeo mensajes a través de varios puertos de recepción de SQL con BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-polling-messages-across-multiple-receive-ports-from-sql-using-biztalk.md).</span><span class="sxs-lookup"><span data-stu-id="bdd98-120">For more information, see [Receive Polling Messages Across Multiple Receive Ports from SQL using BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-polling-messages-across-multiple-receive-ports-from-sql-using-biztalk.md).</span></span>  
  
## <a name="how-this-topic-demonstrates-polling"></a><span data-ttu-id="bdd98-121">Cómo este tema muestra el sondeo</span><span class="sxs-lookup"><span data-stu-id="bdd98-121">How This Topic Demonstrates Polling</span></span>  
 <span data-ttu-id="bdd98-122">En este tema, para demostrar cómo [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] admite la recepción de datos de los mensajes de cambio, utilizamos una instrucción SELECT con la cláusula FOR XML para sondear la base de datos de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bdd98-122">In this topic, to demonstrate how the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] supports receiving data change messages, we use a SELECT statement with the FOR XML clause to poll the SQL Server database.</span></span> <span data-ttu-id="bdd98-123">Cuando se invoca una instrucción en SQL Server Management Studio, el resultado es en forma de un mensaje xml.</span><span class="sxs-lookup"><span data-stu-id="bdd98-123">When you invoke such a statement in SQL Server Management Studio, the output is in the form of an xml message.</span></span> <span data-ttu-id="bdd98-124">Para usar estas instrucciones para sondear una base de datos de SQL Server, debe tener el esquema del mensaje de respuesta xml.</span><span class="sxs-lookup"><span data-stu-id="bdd98-124">To use such statements to poll a SQL Server database, you must have the schema of the response xml message.</span></span> <span data-ttu-id="bdd98-125">El [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] requiere este esquema para recibir un mensaje de sondeo después de ejecutar una instrucción SELECT con la cláusula FOR XML.</span><span class="sxs-lookup"><span data-stu-id="bdd98-125">The [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] requires this schema to receive a polling message after executing a SELECT statement with the FOR XML clause.</span></span> <span data-ttu-id="bdd98-126">Por lo tanto, para usar una instrucción SELECT con la cláusula FOR XML para sondear la base de datos de SQL Server, debe realizar el siguiente conjunto de tareas.</span><span class="sxs-lookup"><span data-stu-id="bdd98-126">So, to use a SELECT statement with FOR XML clause to poll the SQL Server database, you must perform the following set of tasks.</span></span>  
  
1.  <span data-ttu-id="bdd98-127">Generar el esquema para el mensaje de respuesta XML para la instrucción SELECT con la cláusula FOR XML.</span><span class="sxs-lookup"><span data-stu-id="bdd98-127">Generate the schema for the XML response message for the SELECT statement with FOR XML clause.</span></span>  
  
2.  <span data-ttu-id="bdd98-128">Cree un proyecto de BizTalk y agregue el esquema generado para el proyecto.</span><span class="sxs-lookup"><span data-stu-id="bdd98-128">Create a BizTalk project and add the generated schema to the project.</span></span>  
  
3.  <span data-ttu-id="bdd98-129">Cree un mensaje en el proyecto de BizTalk para recibir mensajes de respuesta XML de la base de datos de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bdd98-129">Create a message in the BizTalk project for receiving XML response messages from the SQL Server database.</span></span>  
  
4.  <span data-ttu-id="bdd98-130">Crear una orquestación para recibir mensajes de la base de datos de SQL Server y guardarlas en una carpeta.</span><span class="sxs-lookup"><span data-stu-id="bdd98-130">Create an orchestration to receive messages from the SQL Server database and to save them to a folder.</span></span>  
  
5.  <span data-ttu-id="bdd98-131">Compilar e implementar el proyecto de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="bdd98-131">Build and deploy the BizTalk project.</span></span>  
  
6.  <span data-ttu-id="bdd98-132">Configurar la aplicación mediante la creación física de envío y puertos de recepción de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="bdd98-132">Configure the BizTalk application by creating physical send and receive ports.</span></span>  
  
    > [!IMPORTANT]
    >  <span data-ttu-id="bdd98-133">Para escenarios de entrada de sondeo siempre debe configurar un unidireccional WCF-Custom o puerto de recepción de WCF-SQL.</span><span class="sxs-lookup"><span data-stu-id="bdd98-133">For inbound polling scenarios you must always configure a one-way WCF-Custom or WCF-SQL receive port.</span></span> <span data-ttu-id="bdd98-134">Puertos de recepción bidireccional WCF-Custom o WCF-SQL no se admiten operaciones de entrada.</span><span class="sxs-lookup"><span data-stu-id="bdd98-134">Two-way WCF-Custom or WCF-SQL receive ports are not supported for inbound operations.</span></span>  
  
7.  <span data-ttu-id="bdd98-135">Inicie la aplicación de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="bdd98-135">Start the BizTalk application.</span></span>  
  
##  <a name="BKMK_RespSchema"></a><span data-ttu-id="bdd98-136">Generar el esquema para el mensaje de respuesta para la instrucción SELECT</span><span class="sxs-lookup"><span data-stu-id="bdd98-136">Generating Schema for the Response Message for SELECT Statement</span></span>  
 <span data-ttu-id="bdd98-137">Puede generar el esquema para el mensaje de respuesta para la instrucción SELECT mediante la inclusión de la `xmlschema` cláusula con el `for xml` cláusula.</span><span class="sxs-lookup"><span data-stu-id="bdd98-137">You can generate the schema for the response message for the SELECT statement by including the `xmlschema` clause with the `for xml` clause.</span></span> <span data-ttu-id="bdd98-138">En este tema, se utiliza una instrucción SELECT para recuperar los detalles del empleado para un identificador de empleado especificado.</span><span class="sxs-lookup"><span data-stu-id="bdd98-138">In this topic, we use a SELECT statement to retrieve employee details for a given employee ID.</span></span> <span data-ttu-id="bdd98-139">Para recuperar el esquema mediante la ejecución de una instrucción SELECT, la instrucción SELECT debe escribirse de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="bdd98-139">To retrieve the schema by executing a SELECT statement, the SELECT statement must be written in the following manner:</span></span>  
  
```  
SELECT Employee_ID ,Name ,Designation FROM Employee for xml auto, xmlschema  
```  
  
 <span data-ttu-id="bdd98-140">Ejecute esta instrucción SELECT para obtener el esquema para el mensaje de respuesta.</span><span class="sxs-lookup"><span data-stu-id="bdd98-140">Execute this SELECT statement to get the schema for the response message.</span></span> <span data-ttu-id="bdd98-141">Guarde el esquema.</span><span class="sxs-lookup"><span data-stu-id="bdd98-141">Save the schema.</span></span> <span data-ttu-id="bdd98-142">Ahora debe crear un proyecto de BizTalk en [!INCLUDE[btsVStudioNoVersion](../../includes/btsvstudionoversion-md.md)] y agregue este esquema al proyecto.</span><span class="sxs-lookup"><span data-stu-id="bdd98-142">You must now create a BizTalk project in [!INCLUDE[btsVStudioNoVersion](../../includes/btsvstudionoversion-md.md)] and add this schema to the project.</span></span> <span data-ttu-id="bdd98-143">En este ejemplo, puede asignar este esquema como **PollingResponse.xsd**.</span><span class="sxs-lookup"><span data-stu-id="bdd98-143">For this example, you can name this schema as **PollingResponse.xsd**.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="bdd98-144">Asegúrese de que quite el `xmlschema` cláusula tras ejecutar la instrucción SELECT para generar el esquema.</span><span class="sxs-lookup"><span data-stu-id="bdd98-144">Make sure you remove the `xmlschema` clause after you have executed the SELECT statement to generate the schema.</span></span> <span data-ttu-id="bdd98-145">Si no puede hacer esto, al ejecutar la instrucción SELECT a través de BizTalk como parte de la operación XmlPolling por último, volver a generará el esquema del mensaje de respuesta.</span><span class="sxs-lookup"><span data-stu-id="bdd98-145">If you fail to do this, when you finally execute the SELECT statement through BizTalk as part of the XmlPolling operation, you will again generate the schema in the response message.</span></span> <span data-ttu-id="bdd98-146">Por lo tanto, para obtener el mensaje de respuesta como xml, debe quitar la `xmlschema` cláusula.</span><span class="sxs-lookup"><span data-stu-id="bdd98-146">So, to get the response message as xml you must remove the `xmlschema` clause.</span></span>  
  
#### <a name="to-add-the-schema-to-a-biztalk-project"></a><span data-ttu-id="bdd98-147">Para agregar el esquema a un proyecto de BizTalk</span><span class="sxs-lookup"><span data-stu-id="bdd98-147">To add the schema to a BizTalk project</span></span>  
  
1.  <span data-ttu-id="bdd98-148">Crear un proyecto de BizTalk en [!INCLUDE[btsVStudioNoVersion](../../includes/btsvstudionoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bdd98-148">Create a BizTalk project in [!INCLUDE[btsVStudioNoVersion](../../includes/btsvstudionoversion-md.md)].</span></span>  
  
2.  <span data-ttu-id="bdd98-149">Agregue el esquema de respuesta generados para el procedimiento almacenado al proyecto de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="bdd98-149">Add the response schema you generated for the stored procedure to the BizTalk project.</span></span> <span data-ttu-id="bdd98-150">Haga clic en el proyecto de BizTalk en el Explorador de soluciones, seleccione **agregar**y, a continuación, haga clic en **elemento existente**.</span><span class="sxs-lookup"><span data-stu-id="bdd98-150">Right-click the BizTalk project in the Solution Explorer, point to **Add**, and then click **Existing Item**.</span></span> <span data-ttu-id="bdd98-151">En el cuadro de diálogo Agregar elemento existente, navegue a la ubicación donde guardó el esquema y haga clic en **agregar**.</span><span class="sxs-lookup"><span data-stu-id="bdd98-151">In the Add Existing Item dialog box, navigate to the location where you saved the schema and click **Add**.</span></span>  
  
3.  <span data-ttu-id="bdd98-152">Abra el esquema en [!INCLUDE[btsVStudioNoVersion](../../includes/btsvstudionoversion-md.md)] y realice los cambios siguientes.</span><span class="sxs-lookup"><span data-stu-id="bdd98-152">Open the schema in [!INCLUDE[btsVStudioNoVersion](../../includes/btsvstudionoversion-md.md)] and make the following changes.</span></span>  
  
    1.  <span data-ttu-id="bdd98-153">Agregar un nodo en el esquema y mover el nodo raíz existente bajo este nodo recién agregado.</span><span class="sxs-lookup"><span data-stu-id="bdd98-153">Add a node to the schema and move the existing root node under this newly added node.</span></span> <span data-ttu-id="bdd98-154">Asigne un nombre al nodo raíz.</span><span class="sxs-lookup"><span data-stu-id="bdd98-154">Give a name to the root node.</span></span> <span data-ttu-id="bdd98-155">De este tema, cambie el nombre del nodo raíz a **raíz**.</span><span class="sxs-lookup"><span data-stu-id="bdd98-155">For this topic, rename the root node to **Root**.</span></span>  
  
    2.  <span data-ttu-id="bdd98-156">El esquema de respuesta generado para la instrucción SELECT hace referencia a un sqltypes.xsd.</span><span class="sxs-lookup"><span data-stu-id="bdd98-156">The response schema generated for the SELECT statement references a sqltypes.xsd.</span></span> <span data-ttu-id="bdd98-157">Puede obtener el esquema sqltypes.xsd de [http://go.microsoft.com/fwlink/p/?LinkId=131087](http://go.microsoft.com/fwlink/p/?LinkId=131087).</span><span class="sxs-lookup"><span data-stu-id="bdd98-157">You can get the sqltypes.xsd schema from [http://go.microsoft.com/fwlink/p/?LinkId=131087](http://go.microsoft.com/fwlink/p/?LinkId=131087).</span></span> <span data-ttu-id="bdd98-158">Agregue el esquema sqltypes.xsd al proyecto de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="bdd98-158">Add the sqltypes.xsd schema to the BizTalk project.</span></span>  
  
    3.  <span data-ttu-id="bdd98-159">En el esquema generado para la instrucción SELECT, cambie el valor de `import schemaLocation` al siguiente.</span><span class="sxs-lookup"><span data-stu-id="bdd98-159">In the schema generated for the SELECT statement, change the value of `import schemaLocation` to the following.</span></span>  
  
        ```  
        import schemaLocation=”sqltypes.xsd”  
        ```  
  
         <span data-ttu-id="bdd98-160">Esto es necesario porque el esquema sqltypes.xsd ya ha agregado al proyecto de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="bdd98-160">You do this because you have already added the sqltypes.xsd schema to your BizTalk project.</span></span>  
  
    4.  <span data-ttu-id="bdd98-161">Proporciona un espacio de nombres de destino para el esquema.</span><span class="sxs-lookup"><span data-stu-id="bdd98-161">Provide a target namespace for the schema.</span></span> <span data-ttu-id="bdd98-162">Haga clic en el  **\<esquema\>**  nodo y en el panel Propiedades, especifique un espacio de nombres en el **Target Namespace** propiedad.</span><span class="sxs-lookup"><span data-stu-id="bdd98-162">Click the **\<Schema\>** node, and in the properties pane, specify a namespace in the **Target Namespace** property.</span></span> <span data-ttu-id="bdd98-163">De este tema, asigne el espacio de nombres como `http://ForXmlPolling/namespace`.</span><span class="sxs-lookup"><span data-stu-id="bdd98-163">For this topic, give the namespace as `http://ForXmlPolling/namespace`.</span></span>  
  
## <a name="defining-messages-and-message-types"></a><span data-ttu-id="bdd98-164">Definición de mensajes y tipos de mensaje</span><span class="sxs-lookup"><span data-stu-id="bdd98-164">Defining Messages and Message Types</span></span>  
 <span data-ttu-id="bdd98-165">El esquema que ha generado anteriormente describe los "tipos" necesarios para los mensajes en la orquestación.</span><span class="sxs-lookup"><span data-stu-id="bdd98-165">The schema that you generated earlier describes the "types" required for the messages in the orchestration.</span></span> <span data-ttu-id="bdd98-166">Un mensaje suele ser una variable, el tipo para el que está definido por el esquema correspondiente.</span><span class="sxs-lookup"><span data-stu-id="bdd98-166">A message is typically a variable, the type for which is defined by the corresponding schema.</span></span> <span data-ttu-id="bdd98-167">Una vez que se genera el esquema, debe vincular a los mensajes desde la vista de orquestación de BizTalk del proyecto.</span><span class="sxs-lookup"><span data-stu-id="bdd98-167">Once the schema is generated, you must link it to the messages from the Orchestration view of the BizTalk project.</span></span>  
  
 <span data-ttu-id="bdd98-168">De este tema, debe crear un mensaje para recibir mensajes de la base de datos de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bdd98-168">For this topic, you must create one message to receive messages from the SQL Server database.</span></span>  
  
 <span data-ttu-id="bdd98-169">Realice los pasos siguientes para crear mensajes y vincularlas a esquema.</span><span class="sxs-lookup"><span data-stu-id="bdd98-169">Perform the following steps to create messages and link them to schema.</span></span>  
  
#### <a name="to-create-messages-and-link-to-schema"></a><span data-ttu-id="bdd98-170">Para crear mensajes y vincular al esquema</span><span class="sxs-lookup"><span data-stu-id="bdd98-170">To create messages and link to schema</span></span>  
  
1.  <span data-ttu-id="bdd98-171">Agregar una orquestación al proyecto de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="bdd98-171">Add an orchestration to the BizTalk project.</span></span> <span data-ttu-id="bdd98-172">En el Explorador de soluciones, haga clic en el nombre del proyecto de BizTalk, seleccione **agregar**y, a continuación, haga clic en **nuevo elemento**.</span><span class="sxs-lookup"><span data-stu-id="bdd98-172">From the Solution Explorer, right-click the BizTalk project name, point to **Add**, and then click **New Item**.</span></span> <span data-ttu-id="bdd98-173">Escriba un nombre para la orquestación de BizTalk y, a continuación, haga clic en **agregar**.</span><span class="sxs-lookup"><span data-stu-id="bdd98-173">Type a name for the BizTalk orchestration and then click **Add**.</span></span>  
  
2.  <span data-ttu-id="bdd98-174">Abra la ventana de vista de orquestación de BizTalk del proyecto, si no está ya abierto.</span><span class="sxs-lookup"><span data-stu-id="bdd98-174">Open the orchestration view window of the BizTalk project, if it is not already open.</span></span> <span data-ttu-id="bdd98-175">Haga clic en **vista**, seleccione **otras ventanas**y, a continuación, haga clic en **Vista orquestación**.</span><span class="sxs-lookup"><span data-stu-id="bdd98-175">Click **View**, point to **Other Windows**, and then click **Orchestration View**.</span></span>  
  
3.  <span data-ttu-id="bdd98-176">En el **Vista orquestación**, haga clic en **mensajes**y, a continuación, haga clic en **nuevo mensaje**.</span><span class="sxs-lookup"><span data-stu-id="bdd98-176">In the **Orchestration View**, right-click **Messages**, and then click **New Message**.</span></span>  
  
4.  <span data-ttu-id="bdd98-177">Haga clic en el mensaje recién creado y, a continuación, seleccione **ventana propiedades**.</span><span class="sxs-lookup"><span data-stu-id="bdd98-177">Right-click the newly created message, and then select **Properties Window**.</span></span>  
  
5.  <span data-ttu-id="bdd98-178">En el **propiedades** panel para **Message_1**, realice lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="bdd98-178">In the **Properties** pane for **Message_1**, do the following:</span></span>  
  
    |<span data-ttu-id="bdd98-179">Use</span><span class="sxs-lookup"><span data-stu-id="bdd98-179">Use this</span></span>|<span data-ttu-id="bdd98-180">Para</span><span class="sxs-lookup"><span data-stu-id="bdd98-180">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="bdd98-181">Identificador</span><span class="sxs-lookup"><span data-stu-id="bdd98-181">Identifier</span></span>|<span data-ttu-id="bdd98-182">Tipo de **PollingMessage**.</span><span class="sxs-lookup"><span data-stu-id="bdd98-182">Type **PollingMessage**.</span></span>|  
    |<span data-ttu-id="bdd98-183">Tipo de mensaje</span><span class="sxs-lookup"><span data-stu-id="bdd98-183">Message Type</span></span>|<span data-ttu-id="bdd98-184">En la lista desplegable, expanda **esquemas**y seleccione *ForXMLPolling.PollingResponse*, donde *ForXMLPolling* es el nombre de su proyecto de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="bdd98-184">From the drop-down list, expand **Schemas**, and select *ForXMLPolling.PollingResponse*, where *ForXMLPolling* is the name of your BizTalk project.</span></span> <span data-ttu-id="bdd98-185">*PollingResponse* es el nombre del esquema de respuesta generado mediante la ejecución de la instrucción SELECT como se describe en [recibir mensajes de sondeo mediante las instrucciones SELECT con la cláusula FOR XML de SQL mediante BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-polling-messages-using-select-with-for-xml-clause-with-the-sql-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="bdd98-185">*PollingResponse* is the name of the response schema generated by executing the SELECT statement as described under [Receive polling messages using SELECT statements with FOR XML Clause from SQL using BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-polling-messages-using-select-with-for-xml-clause-with-the-sql-adapter.md).</span></span>|  
  
## <a name="setting-up-the-orchestration"></a><span data-ttu-id="bdd98-186">Configuración de la orquestación</span><span class="sxs-lookup"><span data-stu-id="bdd98-186">Setting up the Orchestration</span></span>  
 <span data-ttu-id="bdd98-187">Debe crear una orquestación de BizTalk para usar [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] para recibir mensajes de cambio de datos basado en sondeo de la base de datos de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bdd98-187">You must create a BizTalk orchestration to use [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] for receiving polling-based data-change messages from the SQL Server database.</span></span> <span data-ttu-id="bdd98-188">En esta orquestación, el adaptador recibe la respuesta de la instrucción select especificada para la **PollingStatement** propiedad de enlace.</span><span class="sxs-lookup"><span data-stu-id="bdd98-188">In this orchestration, the adapter receives the response of the select statement specified for the **PollingStatement** binding property.</span></span> <span data-ttu-id="bdd98-189">La respuesta para la instrucción SELECT se guarda en una ubicación de archivo.</span><span class="sxs-lookup"><span data-stu-id="bdd98-189">The response for the SELECT statement is saved to a FILE location.</span></span> <span data-ttu-id="bdd98-190">Contendría una orquestación típica para sondear una base de datos de SQL Server:</span><span class="sxs-lookup"><span data-stu-id="bdd98-190">A typical orchestration for polling a SQL Server database would contain:</span></span>  
  
-   <span data-ttu-id="bdd98-191">Recepción y envío formas a fin de recibir mensajes de SQL Server y enviar a un puerto de archivo, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="bdd98-191">Receive and Send shapes to receive messages from SQL Server and send to a FILE port, respectively.</span></span>  
  
-   <span data-ttu-id="bdd98-192">Un unidireccional puerto de recepción para recibir mensajes de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bdd98-192">A one-way receive port to receive messages from SQL Server.</span></span>  
  
    > [!IMPORTANT]
    >  <span data-ttu-id="bdd98-193">Para escenarios de entrada de sondeo siempre debe configurar un puerto de recepción unidireccional.</span><span class="sxs-lookup"><span data-stu-id="bdd98-193">For inbound polling scenarios you must always configure a one-way receive port.</span></span> <span data-ttu-id="bdd98-194">Bidireccional de recepción no se admiten los puertos para las operaciones de entrada.</span><span class="sxs-lookup"><span data-stu-id="bdd98-194">Two-way receive ports are not supported for inbound operations.</span></span>  
  
-   <span data-ttu-id="bdd98-195">Un puerto de envío unidireccional para enviar las respuestas del sondeo de una base de datos de SQL Server a una carpeta.</span><span class="sxs-lookup"><span data-stu-id="bdd98-195">A one-way send port to send polling responses from a SQL Server database to a folder.</span></span>  
  
 <span data-ttu-id="bdd98-196">Una orquestación de ejemplo es similar al siguiente.</span><span class="sxs-lookup"><span data-stu-id="bdd98-196">A sample orchestration resembles the following.</span></span>  
  
 <span data-ttu-id="bdd98-197">![Orquestación para sondear una base de datos de SQL Server](../../adapters-and-accelerators/adapter-sql/media/5cf65d53-d70d-444d-82f7-2561efcd9ee4.gif "5cf65d53-d70d-444d-82f7-2561efcd9ee4")</span><span class="sxs-lookup"><span data-stu-id="bdd98-197">![Orchestration for polling a SQL Server database](../../adapters-and-accelerators/adapter-sql/media/5cf65d53-d70d-444d-82f7-2561efcd9ee4.gif "5cf65d53-d70d-444d-82f7-2561efcd9ee4")</span></span>  
  
### <a name="adding-message-shapes"></a><span data-ttu-id="bdd98-198">Agregar formas de mensaje</span><span class="sxs-lookup"><span data-stu-id="bdd98-198">Adding Message Shapes</span></span>  
 <span data-ttu-id="bdd98-199">Asegúrese de que especifique las siguientes propiedades para cada una de las formas de mensaje.</span><span class="sxs-lookup"><span data-stu-id="bdd98-199">Make sure you specify the following properties for each of the message shapes.</span></span> <span data-ttu-id="bdd98-200">Los nombres que aparecen en la columna de forma son los nombres de las formas de mensaje como se muestra en la orquestación just-mencionado.</span><span class="sxs-lookup"><span data-stu-id="bdd98-200">The names listed in the Shape column are the names of the message shapes as displayed in the just-mentioned orchestration.</span></span>  
  
|<span data-ttu-id="bdd98-201">Forma</span><span class="sxs-lookup"><span data-stu-id="bdd98-201">Shape</span></span>|<span data-ttu-id="bdd98-202">Tipo de forma</span><span class="sxs-lookup"><span data-stu-id="bdd98-202">Shape Type</span></span>|<span data-ttu-id="bdd98-203">Propiedades</span><span class="sxs-lookup"><span data-stu-id="bdd98-203">Properties</span></span>|  
|-----------|----------------|----------------|  
|<span data-ttu-id="bdd98-204">ReceiveMessage</span><span class="sxs-lookup"><span data-stu-id="bdd98-204">ReceiveMessage</span></span>|<span data-ttu-id="bdd98-205">Receive</span><span class="sxs-lookup"><span data-stu-id="bdd98-205">Receive</span></span>|<span data-ttu-id="bdd98-206">-Establecer **nombre** a *ReceiveMessage*</span><span class="sxs-lookup"><span data-stu-id="bdd98-206">- Set **Name** to *ReceiveMessage*</span></span><br /><br /> <span data-ttu-id="bdd98-207">-Establecer **activar** a *es True*</span><span class="sxs-lookup"><span data-stu-id="bdd98-207">- Set **Activate** to *True*</span></span>|  
|<span data-ttu-id="bdd98-208">SaveMessage</span><span class="sxs-lookup"><span data-stu-id="bdd98-208">SaveMessage</span></span>|<span data-ttu-id="bdd98-209">Send</span><span class="sxs-lookup"><span data-stu-id="bdd98-209">Send</span></span>|<span data-ttu-id="bdd98-210">-Establecer **nombre** a *SaveMessage*</span><span class="sxs-lookup"><span data-stu-id="bdd98-210">- Set **Name** to *SaveMessage*</span></span>|  
  
### <a name="adding-ports"></a><span data-ttu-id="bdd98-211">Agregar puertos</span><span class="sxs-lookup"><span data-stu-id="bdd98-211">Adding Ports</span></span>  
 <span data-ttu-id="bdd98-212">Asegúrese de que especifique las siguientes propiedades para cada uno de los puertos lógicos.</span><span class="sxs-lookup"><span data-stu-id="bdd98-212">Make sure you specify the following properties for each of the logical ports.</span></span> <span data-ttu-id="bdd98-213">Los nombres que aparecen en la columna de puerto son los nombres de los puertos, como se muestra en la orquestación.</span><span class="sxs-lookup"><span data-stu-id="bdd98-213">The names listed in the Port column are the names of the ports as displayed in the orchestration.</span></span>  
  
|<span data-ttu-id="bdd98-214">Puerto</span><span class="sxs-lookup"><span data-stu-id="bdd98-214">Port</span></span>|<span data-ttu-id="bdd98-215">Propiedades</span><span class="sxs-lookup"><span data-stu-id="bdd98-215">Properties</span></span>|  
|----------|----------------|  
|<span data-ttu-id="bdd98-216">SQLReceivePort</span><span class="sxs-lookup"><span data-stu-id="bdd98-216">SQLReceivePort</span></span>|<span data-ttu-id="bdd98-217">-Establecer **identificador** a *SQLReceivePort*</span><span class="sxs-lookup"><span data-stu-id="bdd98-217">- Set **Identifier** to *SQLReceivePort*</span></span><br /><br /> <span data-ttu-id="bdd98-218">-Establecer **tipo** a *SQLReceivePortType*</span><span class="sxs-lookup"><span data-stu-id="bdd98-218">- Set **Type** to *SQLReceivePortType*</span></span><br /><br /> <span data-ttu-id="bdd98-219">-Establecer **patrón de comunicación** a *unidireccional*</span><span class="sxs-lookup"><span data-stu-id="bdd98-219">- Set **Communication Pattern** to *One-Way*</span></span><br /><br /> <span data-ttu-id="bdd98-220">-Establecer **dirección de comunicación** a *de recepción*</span><span class="sxs-lookup"><span data-stu-id="bdd98-220">- Set **Communication Direction** to *Receive*</span></span>|  
|<span data-ttu-id="bdd98-221">SaveMessagePort</span><span class="sxs-lookup"><span data-stu-id="bdd98-221">SaveMessagePort</span></span>|<span data-ttu-id="bdd98-222">-Establecer **identificador** a *SaveMessagePort*</span><span class="sxs-lookup"><span data-stu-id="bdd98-222">- Set **Identifier** to *SaveMessagePort*</span></span><br /><br /> <span data-ttu-id="bdd98-223">-Establecer **tipo** a *SaveMessagePortType*</span><span class="sxs-lookup"><span data-stu-id="bdd98-223">- Set **Type** to *SaveMessagePortType*</span></span><br /><br /> <span data-ttu-id="bdd98-224">-Establecer **patrón de comunicación** a *unidireccional*</span><span class="sxs-lookup"><span data-stu-id="bdd98-224">- Set **Communication Pattern** to *One-Way*</span></span><br /><br /> <span data-ttu-id="bdd98-225">-Establecer **dirección de comunicación** a *enviar*</span><span class="sxs-lookup"><span data-stu-id="bdd98-225">- Set **Communication Direction** to *Send*</span></span>|  
  
### <a name="specify-messages-for-action-shapes-and-connect-to-ports"></a><span data-ttu-id="bdd98-226">Especificar mensajes de las formas Acción y conectar a los puertos</span><span class="sxs-lookup"><span data-stu-id="bdd98-226">Specify Messages for Action Shapes and Connect to Ports</span></span>  
 <span data-ttu-id="bdd98-227">En la tabla siguiente especifica las propiedades y sus valores que se deben establecer para especificar los mensajes para las formas de acción y vincular los mensajes a los puertos.</span><span class="sxs-lookup"><span data-stu-id="bdd98-227">The following table specifies the properties and their values that you should set to specify messages for action shapes and to link the messages to the ports.</span></span> <span data-ttu-id="bdd98-228">Los nombres que aparecen en la columna de forma son los nombres de las formas de mensaje como se muestra en la orquestación que se ha mencionado anteriormente.</span><span class="sxs-lookup"><span data-stu-id="bdd98-228">The names listed in the Shape column are the names of the message shapes as displayed in the orchestration mentioned earlier.</span></span>  
  
|<span data-ttu-id="bdd98-229">Forma</span><span class="sxs-lookup"><span data-stu-id="bdd98-229">Shape</span></span>|<span data-ttu-id="bdd98-230">Propiedades</span><span class="sxs-lookup"><span data-stu-id="bdd98-230">Properties</span></span>|  
|-----------|----------------|  
|<span data-ttu-id="bdd98-231">ReceiveMessage</span><span class="sxs-lookup"><span data-stu-id="bdd98-231">ReceiveMessage</span></span>|<span data-ttu-id="bdd98-232">-Establecer **mensaje** a *de recepción*</span><span class="sxs-lookup"><span data-stu-id="bdd98-232">- Set **Message** to *Receive*</span></span><br /><br /> <span data-ttu-id="bdd98-233">-Establecer **operación** a *SQLReceivePort.XmlPolling.Request*</span><span class="sxs-lookup"><span data-stu-id="bdd98-233">- Set **Operation** to *SQLReceivePort.XmlPolling.Request*</span></span>|  
|<span data-ttu-id="bdd98-234">SaveMessage</span><span class="sxs-lookup"><span data-stu-id="bdd98-234">SaveMessage</span></span>|<span data-ttu-id="bdd98-235">-Establecer **mensaje** a *de recepción*</span><span class="sxs-lookup"><span data-stu-id="bdd98-235">- Set **Message** to *Receive*</span></span><br /><br /> <span data-ttu-id="bdd98-236">-Establecer **operación** a *SaveMessagePort.XmlPolling.Request*</span><span class="sxs-lookup"><span data-stu-id="bdd98-236">- Set **Operation** to *SaveMessagePort.XmlPolling.Request*</span></span>|  
  
 <span data-ttu-id="bdd98-237">Después de especificar estas propiedades, las formas de mensaje y los puertos que están conectados y la orquestación se completa.</span><span class="sxs-lookup"><span data-stu-id="bdd98-237">After you have specified these properties, the message shapes and ports are connected and your orchestration is complete.</span></span>  
  
 <span data-ttu-id="bdd98-238">Ahora debe compilar la solución de BizTalk e implementarlo en un [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bdd98-238">You must now build the BizTalk solution and deploy it to a [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="bdd98-239">Para obtener más información, consulte [compilar y ejecutar orquestaciones](../../core/building-and-running-orchestrations.md).</span><span class="sxs-lookup"><span data-stu-id="bdd98-239">For more information, see [Building and Running Orchestrations](../../core/building-and-running-orchestrations.md).</span></span>
  
## <a name="configuring-the-biztalk-application"></a><span data-ttu-id="bdd98-240">Configuración de la aplicación de BizTalk</span><span class="sxs-lookup"><span data-stu-id="bdd98-240">Configuring the BizTalk Application</span></span>  
 <span data-ttu-id="bdd98-241">Después de haber implementado el proyecto de BizTalk, aparece la orquestación que creó anteriormente en el **orquestaciones** panel de la consola de administración de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="bdd98-241">After you have deployed the BizTalk project, the orchestration you created earlier is listed under the **Orchestrations** pane in the BizTalk Server Administration console.</span></span> <span data-ttu-id="bdd98-242">Debe utilizar el [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] consola de administración para configurar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="bdd98-242">You must use the [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console to configure the application.</span></span> <span data-ttu-id="bdd98-243">Para obtener un tutorial, vea [Tutorial: implementar una aplicación básica de BizTalk](Walkthrough:%20Deploying%20a%20Basic%20BizTalk%20Application.md).</span><span class="sxs-lookup"><span data-stu-id="bdd98-243">For a walkthrough, see [Walkthrough: Deploying a Basic BizTalk Application](Walkthrough:%20Deploying%20a%20Basic%20BizTalk%20Application.md).</span></span>
  
 <span data-ttu-id="bdd98-244">Configuración de una aplicación implica:</span><span class="sxs-lookup"><span data-stu-id="bdd98-244">Configuring an application involves:</span></span>  
  
-   <span data-ttu-id="bdd98-245">Selección de un host de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="bdd98-245">Selecting a host for the application.</span></span>  
  
-   <span data-ttu-id="bdd98-246">Asignación de los puertos que ha creado en la orquestación con puertos físicos en la consola de administración de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="bdd98-246">Mapping the ports that you created in your orchestration to physical ports in the BizTalk Server Administration console.</span></span> <span data-ttu-id="bdd98-247">Para que esta orquestación debe:</span><span class="sxs-lookup"><span data-stu-id="bdd98-247">For this orchestration you must:</span></span>  
  
    -   <span data-ttu-id="bdd98-248">Definir una ubicación en el disco duro y un puerto de archivo correspondiente donde la orquestación de BizTalk colocará los mensajes de la base de datos de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bdd98-248">Define a location on the hard disk and a corresponding file port where the BizTalk orchestration will drop the messages from the SQL Server database.</span></span> <span data-ttu-id="bdd98-249">Estos mensajes se encontrarán en respuesta a la instrucción de sondeo que especifique para el puerto de recepción.</span><span class="sxs-lookup"><span data-stu-id="bdd98-249">These messages will be in response to the polling statement that you specify for the receive port.</span></span>  
  
    -   <span data-ttu-id="bdd98-250">Definir un WCF-Custom físico o puerto de recepción unidireccionales de WCF-SQL.</span><span class="sxs-lookup"><span data-stu-id="bdd98-250">Define a physical WCF-Custom or WCF-SQL one-way receive port.</span></span> <span data-ttu-id="bdd98-251">Este puerto sondea la base de datos de SQL Server con la instrucción de sondeo que especifique para el puerto.</span><span class="sxs-lookup"><span data-stu-id="bdd98-251">This port polls the SQL Server database with the polling statement you specify for the port.</span></span> <span data-ttu-id="bdd98-252">Para obtener información sobre cómo crear puertos, consulte [configurar manualmente un enlace de puerto físico para el adaptador de SQL](../../adapters-and-accelerators/adapter-sql/manually-configure-a-physical-port-binding-to-the-sql-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="bdd98-252">For information about how to create ports, see [Manually configure a physical port binding to the SQL adapter](../../adapters-and-accelerators/adapter-sql/manually-configure-a-physical-port-binding-to-the-sql-adapter.md).</span></span> <span data-ttu-id="bdd98-253">Asegúrese de que especificar las siguientes propiedades de enlace para el puerto de recepción.</span><span class="sxs-lookup"><span data-stu-id="bdd98-253">Make sure you specify the following binding properties for the receive port.</span></span>  
  
        > [!IMPORTANT]
        >  <span data-ttu-id="bdd98-254">No es necesario realizar este paso si especifica las propiedades de enlace en tiempo de diseño.</span><span class="sxs-lookup"><span data-stu-id="bdd98-254">You do not need to perform this step if you specified the binding properties at design-time.</span></span> <span data-ttu-id="bdd98-255">En tal caso, puede crear un WCF-custom o WCF-SQL puerto de recepción, en el conjunto de propiedades de enlace necesaria, importando el archivo de enlace creado por la [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bdd98-255">In such a case, you can create a WCF-custom or WCF-SQL receive port, with the required binding properties set, by importing the binding file created by the [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span> <span data-ttu-id="bdd98-256">Para obtener más información, consulte [configurar un enlace de puerto físico mediante un archivo de enlace de puerto para utilizar el adaptador SQL](../../adapters-and-accelerators/adapter-sql/configure-a-physical-port-binding-using-a-port-binding-file-to-sql-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="bdd98-256">For more information see [Configure a physical port binding using a port binding file to use the SQL adapter](../../adapters-and-accelerators/adapter-sql/configure-a-physical-port-binding-using-a-port-binding-file-to-sql-adapter.md).</span></span>  
  
        |<span data-ttu-id="bdd98-257">Propiedad de enlace</span><span class="sxs-lookup"><span data-stu-id="bdd98-257">Binding Property</span></span>|<span data-ttu-id="bdd98-258">Valor</span><span class="sxs-lookup"><span data-stu-id="bdd98-258">Value</span></span>|  
        |----------------------|-----------|  
        |<span data-ttu-id="bdd98-259">**InboundOperationType**</span><span class="sxs-lookup"><span data-stu-id="bdd98-259">**InboundOperationType**</span></span>|<span data-ttu-id="bdd98-260">Asegúrese de que se establece en **XmlPolling**.</span><span class="sxs-lookup"><span data-stu-id="bdd98-260">Make sure you set this to **XmlPolling**.</span></span>|  
        |<span data-ttu-id="bdd98-261">**PolledDataAvailableStatement**</span><span class="sxs-lookup"><span data-stu-id="bdd98-261">**PolledDataAvailableStatement**</span></span>|<span data-ttu-id="bdd98-262">Asegúrese de que especificar una instrucción SQL.</span><span class="sxs-lookup"><span data-stu-id="bdd98-262">Make sure you specify a SQL statement.</span></span> <span data-ttu-id="bdd98-263">En este tema, especificar:</span><span class="sxs-lookup"><span data-stu-id="bdd98-263">For this topic, specify:</span></span><br /><br /> `SELECT COUNT(*) FROM Employee`|  
        |<span data-ttu-id="bdd98-264">**PollingStatement**</span><span class="sxs-lookup"><span data-stu-id="bdd98-264">**PollingStatement**</span></span>|<span data-ttu-id="bdd98-265">Asegúrese de proporcionar la misma instrucción sin el `xmlschema` cláusula, que especificó al generar el esquema, como se describe en [recibir mensajes de sondeo mediante las instrucciones SELECT con la cláusula FOR XML de SQL mediante BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-polling-messages-using-select-with-for-xml-clause-with-the-sql-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="bdd98-265">Make sure you provide the same statement, without the `xmlschema` clause, that you specified while generating the schema as described in [Receive polling messages using SELECT statements with FOR XML Clause from SQL using BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-polling-messages-using-select-with-for-xml-clause-with-the-sql-adapter.md).</span></span><br /><br /> `SELECT Employee_ID ,Name ,Designation FROM Employee for xml auto`<br /><br /> <span data-ttu-id="bdd98-266">**Nota:** tenga en cuenta que la instrucción SELECT no contiene el `xmlschema` cláusula.</span><span class="sxs-lookup"><span data-stu-id="bdd98-266">**Note:** Note that the SELECT statement does not contain the `xmlschema` clause.</span></span>|  
        |<span data-ttu-id="bdd98-267">**XmlStoredProcedureRootNodeName**</span><span class="sxs-lookup"><span data-stu-id="bdd98-267">**XmlStoredProcedureRootNodeName**</span></span>|<span data-ttu-id="bdd98-268">Especifique el nombre del nodo raíz que agrega al esquema de respuesta generado para la instrucción SELECT, tal y como se describe en la sección [generar esquema para el mensaje de respuesta para la instrucción SELECT](#BKMK_RespSchema).</span><span class="sxs-lookup"><span data-stu-id="bdd98-268">Specify the name of the root node that you added to the response schema you generated for the SELECT statement, as described under [Generating Schema for the Response Message for SELECT Statement](#BKMK_RespSchema).</span></span> <span data-ttu-id="bdd98-269">De este tema, establezca esta propiedad en **raíz**.</span><span class="sxs-lookup"><span data-stu-id="bdd98-269">For this topic, set this to **Root**.</span></span>|  
        |<span data-ttu-id="bdd98-270">**XmlStoredProcedureRootNodeNamespace**</span><span class="sxs-lookup"><span data-stu-id="bdd98-270">**XmlStoredProcedureRootNodeNamespace**</span></span>|<span data-ttu-id="bdd98-271">Especificar el espacio de nombres de destino para el esquema de respuesta generado para la instrucción SELECT, como se describe en [generar esquema para el mensaje de respuesta para la instrucción SELECT](#BKMK_RespSchema).</span><span class="sxs-lookup"><span data-stu-id="bdd98-271">Specify the target namespace for the response schema you generated for the SELECT statement, as described under [Generating Schema for the Response Message for SELECT Statement](#BKMK_RespSchema).</span></span> <span data-ttu-id="bdd98-272">De este tema, establezca esta propiedad en `http://ForXmlPolling/namespace`.</span><span class="sxs-lookup"><span data-stu-id="bdd98-272">For this topic, set this to `http://ForXmlPolling/namespace`.</span></span>|  
  
         <span data-ttu-id="bdd98-273">Para obtener más información acerca de las propiedades de enlace diferente, consulte [obtener información sobre el adaptador de BizTalk para propiedades de enlace del adaptador de SQL Server](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md).</span><span class="sxs-lookup"><span data-stu-id="bdd98-273">For more information about the different binding properties, see [Read about the BizTalk Adapter for SQL Server adapter Binding Properties](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md).</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="bdd98-274">Se recomienda configurar el nivel de aislamiento de transacción y el tiempo de espera de transacciones al realizar operaciones de entrada mediante el [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bdd98-274">We recommend configuring the transaction isolation level and the transaction timeout while performing inbound operations using the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)].</span></span> <span data-ttu-id="bdd98-275">Puede hacerlo agregando el servicio de puerto de recepción de comportamiento al configurar el WCF-Custom o WCF-SQL.</span><span class="sxs-lookup"><span data-stu-id="bdd98-275">You can do so by adding the service behavior while configuring the WCF-Custom or WCF-SQL receive port.</span></span> <span data-ttu-id="bdd98-276">Para obtener instrucciones sobre cómo agregar el comportamiento del servicio, consulte [configurar el nivel de aislamiento de transacción y el tiempo de espera de transacción con SQL](../../adapters-and-accelerators/adapter-sql/configure-transaction-isolation-level-and-transaction-timeout-with-sql.md).</span><span class="sxs-lookup"><span data-stu-id="bdd98-276">For instruction on how to add the service behavior, see [Configure Transaction Isolation Level and Transaction Timeout with SQL](../../adapters-and-accelerators/adapter-sql/configure-transaction-isolation-level-and-transaction-timeout-with-sql.md).</span></span>  
  
## <a name="starting-the-application"></a><span data-ttu-id="bdd98-277">A partir de la aplicación</span><span class="sxs-lookup"><span data-stu-id="bdd98-277">Starting the Application</span></span>  
 <span data-ttu-id="bdd98-278">Debe iniciar la aplicación de BizTalk para recibir mensajes de la base de datos de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bdd98-278">You must start the BizTalk application for receiving messages from the SQL Server database.</span></span> <span data-ttu-id="bdd98-279">Para obtener instrucciones acerca de cómo iniciar una aplicación de BizTalk, consulte [cómo iniciar una orquestación](../../core/how-to-start-an-orchestration.md).</span><span class="sxs-lookup"><span data-stu-id="bdd98-279">For instructions on starting a BizTalk application, see [How to Start an Orchestration](../../core/how-to-start-an-orchestration.md).</span></span>
  
 <span data-ttu-id="bdd98-280">En esta fase, asegúrese de que:</span><span class="sxs-lookup"><span data-stu-id="bdd98-280">At this stage, make sure:</span></span>  
  
-   <span data-ttu-id="bdd98-281">El WCF-Custom o WCF-SQL unidireccional puerto de recepción, que sondea la base de datos de SQL Server mediante las instrucciones especificadas para el **PollingStatement** enlaza la propiedad, se ejecuta.</span><span class="sxs-lookup"><span data-stu-id="bdd98-281">The WCF-Custom or WCF-SQL one-way receive port, which polls the SQL Server database using the statements specified for the **PollingStatement** binding property, is running.</span></span>  
  
-   <span data-ttu-id="bdd98-282">El puerto de envío de archivo que recibe los mensajes de SQL Server, se está ejecutando.</span><span class="sxs-lookup"><span data-stu-id="bdd98-282">The FILE send port, which receives messages from SQL Server, is running.</span></span>  
  
-   <span data-ttu-id="bdd98-283">La orquestación de BizTalk para la operación se está ejecutando.</span><span class="sxs-lookup"><span data-stu-id="bdd98-283">The BizTalk orchestration for the operation is running.</span></span>  
  
## <a name="executing-the-operation"></a><span data-ttu-id="bdd98-284">Ejecutar la operación</span><span class="sxs-lookup"><span data-stu-id="bdd98-284">Executing the Operation</span></span>  
 <span data-ttu-id="bdd98-285">Después de ejecutar la aplicación, el siguiente conjunto de acciones tienen lugar, en la misma secuencia:</span><span class="sxs-lookup"><span data-stu-id="bdd98-285">After you run the application, the following set of actions take place, in the same sequence:</span></span>  
  
-   <span data-ttu-id="bdd98-286">El adaptador se ejecuta el **PolledDataAvailableStatement** en el empleado de la tabla y determina que la tabla tiene registros de sondeo.</span><span class="sxs-lookup"><span data-stu-id="bdd98-286">The adapter executes the **PolledDataAvailableStatement** on the Employee table and determines that the table has records for polling.</span></span>  
  
-   <span data-ttu-id="bdd98-287">El adaptador ejecuta la instrucción de sondeo y recibe un mensaje de sondeo de la base de datos de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bdd98-287">The adapter executes the polling statement and receives a polling message from the SQL Server database.</span></span> <span data-ttu-id="bdd98-288">Dado que la instrucción de sondeo está formada por una instrucción SELECT con una cláusula FOR XML, el mensaje de sondeo recibido por el adaptador es similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="bdd98-288">Because the polling statement consists of a SELECT statement with a FOR XML clause, the polling message received by the adapter resembles the following:</span></span>  
  
    ```  
    <?xml version="1.0" encoding="utf-8" ?>   
    <Root xmlns="http://ForXmlPolling/namespace">  
      <Employee Employee_ID="10765" Name="John" Designation="Tester" xmlns="" />   
      <Employee Employee_ID="10766" Name="Sam" Designation="Manager" xmlns="" />   
      .....  
      .....  
    </Root>  
    ```  
  
     <span data-ttu-id="bdd98-289">Tenga en cuenta que se recibe el mensaje de sondeo en el mismo esquema, tal y como se generan al ejecutar la instrucción SELECT con la **xmlschema** cláusula.</span><span class="sxs-lookup"><span data-stu-id="bdd98-289">Notice that the polling message is received in the same schema as generated by executing the SELECT statement with the **xmlschema** clause.</span></span> <span data-ttu-id="bdd98-290">Tenga en cuenta también que el nodo raíz y el espacio de nombres es el mismo que especificó como valores para **XmlStoredProcedureRootNodeName** y **XmlStoredProcedureRootNodeNamespace** propiedades de enlace respectivamente.</span><span class="sxs-lookup"><span data-stu-id="bdd98-290">Also note that the root node and the namespace is the same you specified as values for **XmlStoredProcedureRootNodeName** and **XmlStoredProcedureRootNodeNamespace** binding properties respectively.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="bdd98-291">El [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] continuarán sondea hasta que se deshabilite explícitamente el puerto de recepción desde el [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] consola de administración.</span><span class="sxs-lookup"><span data-stu-id="bdd98-291">The [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] will continue to poll until you explicitly disable the receive port from the [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span>  
  
## <a name="best-practices"></a><span data-ttu-id="bdd98-292">Procedimientos recomendados</span><span class="sxs-lookup"><span data-stu-id="bdd98-292">Best Practices</span></span>  
 <span data-ttu-id="bdd98-293">Una vez haya implementado y configurado el proyecto de BizTalk, puede exportar la configuración en un archivo XML denominado archivo de enlace.</span><span class="sxs-lookup"><span data-stu-id="bdd98-293">After you have deployed and configured the BizTalk project, you can export configuration settings to an XML file called the binding file.</span></span> <span data-ttu-id="bdd98-294">Una vez que se genera un archivo de enlace, puede importar los valores de configuración desde el archivo, por lo que no es necesario crear los puertos de envío y puertos de recepción para la misma orquestación.</span><span class="sxs-lookup"><span data-stu-id="bdd98-294">Once you generate a binding file, you can import the configuration settings from the file, so that you do not need to create the send ports and receive ports for the same orchestration.</span></span> <span data-ttu-id="bdd98-295">Para obtener más información acerca de los archivos de enlace, vea [reutilizar enlaces del adaptador](../../adapters-and-accelerators/adapter-sql/reuse-sql-adapter-bindings.md).</span><span class="sxs-lookup"><span data-stu-id="bdd98-295">For more information about binding files, see [Reuse adapter bindings](../../adapters-and-accelerators/adapter-sql/reuse-sql-adapter-bindings.md).</span></span>
  
## <a name="see-also"></a><span data-ttu-id="bdd98-296">Vea también</span><span class="sxs-lookup"><span data-stu-id="bdd98-296">See Also</span></span>  
 [<span data-ttu-id="bdd98-297">Sondear el servidor SQL mediante el adaptador SQL con BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="bdd98-297">Poll SQL Server by Using the SQL Adapter with BizTalk Server</span></span>](../../adapters-and-accelerators/adapter-sql/poll-sql-server-using-the-sql-adapter-with-biztalk-server.md)
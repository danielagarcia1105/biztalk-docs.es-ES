---
title: "Ejecutar procedimientos almacenados con un solo parámetro XML en SQL Server mediante BizTalk Server | Documentos de Microsoft"
description: "Pasar un único parámetro de un procedimiento almacenado mediante el puerto de WCF-Custom y el adaptador de SQL en BizTalk"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: deb9333a-5e28-4e8d-8e0b-07b5a97a111b
caps.latest.revision: "16"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: e3d933b494e967184c8248d6f71ad9df113fb9b9
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
---
# <a name="execute-stored-procedures-with-a-single-xml-parameter-in-sql-server-using-biztalk-server"></a><span data-ttu-id="93e98-103">Ejecutar procedimientos almacenados con un solo parámetro XML en SQL Server con BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="93e98-103">Execute stored procedures with a single XML parameter in SQL Server using BizTalk Server</span></span>
<span data-ttu-id="93e98-104">Ejecutar un procedimiento almacenado que toma un parámetro único es similar a cualquier otro procedimiento almacenado que se ejecute como se describe en [ejecutar los procedimientos almacenados de SQL Server mediante BizTalk Server](execute-stored-procedures-in-sql-server-using-biztalk-server.md).</span><span class="sxs-lookup"><span data-stu-id="93e98-104">Executing a stored procedure that takes a single parameter is similar to executing any other stored procedure as described in [Execute Stored Procedures in SQL Server using BizTalk Server](execute-stored-procedures-in-sql-server-using-biztalk-server.md).</span></span> <span data-ttu-id="93e98-105">Sin embargo, para el enfoque descrito en el vínculo anterior, debe generar los metadatos para el procedimiento almacenado en tiempo de diseño y crear una orquestación para invocar el procedimiento en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="93e98-105">However, for the approach described in the preceding link, you need to generate metadata for the stored procedure at design time and create an orchestration to invoke the procedure at run time.</span></span>  
  
 <span data-ttu-id="93e98-106">Considere un escenario donde desea pasar un valor único a un procedimiento almacenado sin tener que realizar ningún procesamiento en ese valor.</span><span class="sxs-lookup"><span data-stu-id="93e98-106">Consider a scenario where you just want to pass one single value to a stored procedure without doing any processing on that value.</span></span> <span data-ttu-id="93e98-107">En tales casos, no desea la sobrecarga de generación de metadatos, crear una orquestación, implementar la orquestación y ejecutar la operación.</span><span class="sxs-lookup"><span data-stu-id="93e98-107">In such cases, you don't want the overhead of generating metadata, creating an orchestration, deploying the orchestration, and executing the operation.</span></span> <span data-ttu-id="93e98-108">En su lugar, puede configurar un WCF-Custom o el puerto de envío WCF-SQL para invocar directamente el procedimiento almacenado.</span><span class="sxs-lookup"><span data-stu-id="93e98-108">Rather, you can configure a WCF-Custom or WCF-SQL send port to directly invoke the stored procedure.</span></span> <span data-ttu-id="93e98-109">Este tema muestra cómo realizar estas tareas mediante el [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] consola de administración.</span><span class="sxs-lookup"><span data-stu-id="93e98-109">This topic demonstrates how to perform these tasks using the [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="93e98-110">Este tema proporciona instrucciones sobre cómo configurar un WCF-Custom puerto de envío para ejecutar un procedimiento almacenado que toma un parámetro único.</span><span class="sxs-lookup"><span data-stu-id="93e98-110">This topic provides instructions on how to configure a WCF-Custom send port for executing stored procedure that takes a single parameter.</span></span> <span data-ttu-id="93e98-111">Puede realizar los mismos pasos mediante la configuración de un puerto de WCF-SQL.</span><span class="sxs-lookup"><span data-stu-id="93e98-111">You can perform the same steps by configuring a WCF-SQL port.</span></span> <span data-ttu-id="93e98-112">Para obtener instrucciones acerca de cómo configurar el puerto WCF-SQL, consulte [configurar un puerto mediante el adaptador de WCF-SQL](configure-a-port-using-the-wcf-sql-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="93e98-112">For instructions on configuring WCF-SQL port, see [Configure a Port using the WCF-SQL Adapter](configure-a-port-using-the-wcf-sql-adapter.md).</span></span>  
  
## <a name="invoke-stored-procedures-without-orchestration"></a><span data-ttu-id="93e98-113">Invocar procedimientos almacenados sin orquestación</span><span class="sxs-lookup"><span data-stu-id="93e98-113">Invoke stored procedures without orchestration</span></span>  
 <span data-ttu-id="93e98-114">Para demostrar cómo ejecutar procedimientos almacenados con parámetros de inicio único sin una orquestación, este tema utiliza el procedimiento almacenado de ADD_LAST_EMP_XML_INFO.</span><span class="sxs-lookup"><span data-stu-id="93e98-114">To demonstrate how to execute stored procedures with single parameters without an orchestration, this topic uses the ADD_LAST_EMP_XML_INFO stored procedure.</span></span> <span data-ttu-id="93e98-115">Este procedimiento toma un valor XML como parámetro y lo inserta en la **dirección** columna de la **empleado** tabla.</span><span class="sxs-lookup"><span data-stu-id="93e98-115">This procedure takes an XML value as a parameter and inserts it into the **Address** column of the **Employee** table.</span></span> <span data-ttu-id="93e98-116">Debe tener el valor XML que se pasará al procedimiento almacenado.</span><span class="sxs-lookup"><span data-stu-id="93e98-116">You must have the XML value that you will pass to the stored procedure.</span></span> <span data-ttu-id="93e98-117">Sin embargo, para ejecutar el procedimiento almacenado mediante el adaptador, debe enviar un mensaje de solicitud que se ajuste al esquema del procedimiento y que contiene el XML de valor para el **dirección** campo, con SQL Server.</span><span class="sxs-lookup"><span data-stu-id="93e98-117">However, to execute the stored procedure using the adapter, you must send a request message conforming to the schema of the procedure, and containing the XML value for the **Address** field, to the SQL Server.</span></span> <span data-ttu-id="93e98-118">Por lo tanto, debe crear ese mensaje de solicitud por:</span><span class="sxs-lookup"><span data-stu-id="93e98-118">So, you must create that request message by:</span></span>  
  
-   <span data-ttu-id="93e98-119">Mediante el **plantilla** opción en la configuración del puerto de envío con la que puede crear un mensaje de solicitud con una plantilla de mensaje.</span><span class="sxs-lookup"><span data-stu-id="93e98-119">Using the **Template** option in the send port configuration using which you can create a request message using a message template.</span></span>  
  
-   <span data-ttu-id="93e98-120">Colocar el código XML de valor para el **dirección** campo en el mensaje.</span><span class="sxs-lookup"><span data-stu-id="93e98-120">Putting the XML value for the **Address** field into the message.</span></span>  
  
 <span data-ttu-id="93e98-121">Todos estos pasos se describen en detalle en este tema.</span><span class="sxs-lookup"><span data-stu-id="93e98-121">All these steps are described in detail in this topic.</span></span> <span data-ttu-id="93e98-122">Debe realizar el siguiente conjunto de tareas:</span><span class="sxs-lookup"><span data-stu-id="93e98-122">You must perform the following set of tasks:</span></span>  
  
1.  <span data-ttu-id="93e98-123">Crear un archivo donde se colocará el archivo XML que se insertará en el puerto de recepción la **dirección** campo XML de la **empleado** tabla.</span><span class="sxs-lookup"><span data-stu-id="93e98-123">Create a FILE receive port where you will drop the XML file that will be inserted into the **Address** XML field of the **Employee** table.</span></span> <span data-ttu-id="93e98-124">Supongamos que se llama a este puerto **MessageIn** puerto.</span><span class="sxs-lookup"><span data-stu-id="93e98-124">Suppose this port is called **MessageIn** port.</span></span>  
  
2.  <span data-ttu-id="93e98-125">Crear un puerto de envío unidireccional de WCF-Custom que recoge el XML de archivos desde el archivo de puerto de recepción, construye el mensaje mediante la plantilla de mensaje y lo envía a SQL Server para ejecutar el procedimiento almacenado.</span><span class="sxs-lookup"><span data-stu-id="93e98-125">Create a WCF-Custom one-way send port that picks the XML file from the FILE receive port, constructs the message using the message template, and sends it to SQL Server to execute the stored procedure.</span></span>  
  
 <span data-ttu-id="93e98-126">Esta parte del tema proporciona instrucciones sobre cómo configurar un WCF-Custom puerto de envío con la plantilla de mensaje.</span><span class="sxs-lookup"><span data-stu-id="93e98-126">This part of the topic provides instructions on configuring a WCF-Custom send port with the message template.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="93e98-127">Aunque la información de este tema muestra cómo ejecutar un procedimiento almacenado con un solo parámetro XML, puede realizar las tareas para realizar cualquier operación que toma un único parámetro de cualquier tipo de datos.</span><span class="sxs-lookup"><span data-stu-id="93e98-127">Even though the information in this topic demonstrates how to execute a stored procedure with a single XML parameter, you can perform the tasks to perform any operation that takes a single parameter of any data type.</span></span> <span data-ttu-id="93e98-128">La única diferencia se encontrarán en la manera de que crear una plantilla de mensaje para una operación específica.</span><span class="sxs-lookup"><span data-stu-id="93e98-128">The only difference will be in the way you create a message template for a specific operation.</span></span> <span data-ttu-id="93e98-129">Puede crear una plantilla de mensaje tomando el mensaje de solicitud se puede utilizar para ejecutar la operación con una orquestación y reemplace el valor del parámetro con BizTalk cuerpo del mensaje.</span><span class="sxs-lookup"><span data-stu-id="93e98-129">You can create a message template by taking the request message you would use to execute the operation using an orchestration and replacing the value of the parameter with the BizTalk message body.</span></span>  
  
##  <span data-ttu-id="93e98-130"><a name="BKMK_OneWay"></a>Configurar un puerto de envío WCF-Custom</span><span class="sxs-lookup"><span data-stu-id="93e98-130"><a name="BKMK_OneWay"></a> Configure a WCF-Custom send port</span></span>  
 <span data-ttu-id="93e98-131">Antes de crear el WCF-Custom, puerto de envío, asegúrese de que se creó el archivo de puerto de recepción, **MessageIn**.</span><span class="sxs-lookup"><span data-stu-id="93e98-131">Before creating the WCF-Custom send port, make sure you created the FILE receive port, **MessageIn**.</span></span>  
  
1.  <span data-ttu-id="93e98-132">Iniciar el [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] consola de administración.</span><span class="sxs-lookup"><span data-stu-id="93e98-132">Start the [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span>  
  
2.  <span data-ttu-id="93e98-133">En el árbol de consola, expanda **grupo de BizTalk**y, a continuación, expanda **aplicaciones**.</span><span class="sxs-lookup"><span data-stu-id="93e98-133">In the console tree, expand **BizTalk Group**, and then expand **Applications**.</span></span>  
  
3.  <span data-ttu-id="93e98-134">Expanda la aplicación en la que desea implementar el [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="93e98-134">Expand the application under which you want to deploy the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)].</span></span>  
  
4.  <span data-ttu-id="93e98-135">Haga clic en **puertos de envío**, seleccione **New**y, a continuación, seleccione **puerto de envío unidireccional estático**.</span><span class="sxs-lookup"><span data-stu-id="93e98-135">Right-click **Send Ports**, point to **New**, and then point to **Static One-way Send Port**.</span></span>  
  
5.  <span data-ttu-id="93e98-136">En el **propiedades de puerto de envío** cuadro de diálogo, en la **General** ficha, escriba un nombre para el puerto de envío.</span><span class="sxs-lookup"><span data-stu-id="93e98-136">In the **Send Port Properties** dialog box, on the **General** tab, type a name for the send port.</span></span>  
  
6.  <span data-ttu-id="93e98-137">Configurar el puerto para recibir todo puerto de recepción de mensajes quitados en el archivo **MessageIn**.</span><span class="sxs-lookup"><span data-stu-id="93e98-137">Configure the port to receive all messages dropped at the FILE receive port, **MessageIn**.</span></span>  
  
    1.  <span data-ttu-id="93e98-138">En el **propiedades de puerto de envío** cuadro de diálogo, en el panel izquierdo, haga clic en **filtros**.</span><span class="sxs-lookup"><span data-stu-id="93e98-138">In the **Send Port Properties** dialog box, from the left pane, click **Filters**.</span></span>  
  
    2.  <span data-ttu-id="93e98-139">En el panel derecho, en la **propiedad** columna, haga clic en la cuadrícula y, a continuación, seleccione **BTS. ReceivePortName** propiedad.</span><span class="sxs-lookup"><span data-stu-id="93e98-139">In the right pane, under the **Property** column, click the grid, and then select **BTS.ReceivePortName** property.</span></span>  
  
    3.  <span data-ttu-id="93e98-140">Para el **operador** columna, seleccione "**==**".</span><span class="sxs-lookup"><span data-stu-id="93e98-140">For the **Operator** column, select “**==**”.</span></span>  
  
    4.  <span data-ttu-id="93e98-141">Para el **valor** columna, especifique el nombre del archivo de puerto de recepción, `MessageIn`.</span><span class="sxs-lookup"><span data-stu-id="93e98-141">For the **Value** column, specify the name of the FILE receive port, `MessageIn`.</span></span>  
  
7.  <span data-ttu-id="93e98-142">En el **propiedades de puerto de envío** cuadro de diálogo la **General** ficha, desde el **tipo** lista desplegable, seleccione **WCF-Custom**y, a continuación, haga clic en **Configurar**.</span><span class="sxs-lookup"><span data-stu-id="93e98-142">In the **Send Port Properties** dialog box, on the **General** tab, from the **Type** drop-down list, select **WCF-Custom**, and then click **Configure**.</span></span>  
  
8.  <span data-ttu-id="93e98-143">En el **propiedades de transporte de WCF-Custom** diálogo cuadro, realice lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="93e98-143">In the **WCF-Custom Transport Properties** dialog box, do the following:</span></span>  
  
    1.  <span data-ttu-id="93e98-144">Haga clic en el **General** ficha y en el **dirección (URI)** campo, especifique el URI de conexión para SQL Server.</span><span class="sxs-lookup"><span data-stu-id="93e98-144">Click the **General** tab, and in the **Address (URI)** field, specify the connection URI for SQL Server.</span></span> <span data-ttu-id="93e98-145">Para obtener más información sobre el URI de conexión, consulte [crear el URI de conexión de SQL Server](../../adapters-and-accelerators/adapter-sql/create-the-sql-server-connection-uri.md).</span><span class="sxs-lookup"><span data-stu-id="93e98-145">For more information about the connection URI, see [Create the SQL Server Connection URI](../../adapters-and-accelerators/adapter-sql/create-the-sql-server-connection-uri.md).</span></span>  
  
    2.  <span data-ttu-id="93e98-146">En el **General** ficha la **acción** texto, escriba la acción para la operación.</span><span class="sxs-lookup"><span data-stu-id="93e98-146">On the **General** tab, in the **Action** text box, type the action for the operation.</span></span> <span data-ttu-id="93e98-147">Vea [mensajes y esquemas de mensaje](messages-and-message-schemas-for-biztalk-adapter-for-sql-server.md) para obtener una lista de acciones para cada operación.</span><span class="sxs-lookup"><span data-stu-id="93e98-147">See [Messages and message schemas](messages-and-message-schemas-for-biztalk-adapter-for-sql-server.md) for a list of actions for each operation.</span></span> <span data-ttu-id="93e98-148">Por ejemplo, la acción que se invoca el ADD_LAST_EMP_XML_INFO es:</span><span class="sxs-lookup"><span data-stu-id="93e98-148">For example, the action to invoke the ADD_LAST_EMP_XML_INFO is:</span></span>  
  
        ```  
        Procedure/dbo/ADD_LAST_EMP_XML_INFO  
        ```  
  
    3.  <span data-ttu-id="93e98-149">Haga clic en el **enlace** ficha y desde el **BindingType** lista, seleccione **sqlBinding**.</span><span class="sxs-lookup"><span data-stu-id="93e98-149">Click the **Binding** tab, and from the **Binding Type** list, select **sqlBinding**.</span></span> <span data-ttu-id="93e98-150">Puede especificar las propiedades de enlace diferente expuestas por la [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="93e98-150">You can specify the different binding properties exposed by the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)].</span></span> <span data-ttu-id="93e98-151">Para obtener más información acerca de las propiedades de enlace, vea [obtener información sobre el adaptador de BizTalk para propiedades de enlace del adaptador de SQL Server](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md).</span><span class="sxs-lookup"><span data-stu-id="93e98-151">For more information about binding properties, see [Read about the BizTalk Adapter for SQL Server adapter Binding Properties](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md).</span></span>  
  
    4.  <span data-ttu-id="93e98-152">Haga clic en el **credenciales** ficha y, a continuación, realice una de las siguientes acciones:</span><span class="sxs-lookup"><span data-stu-id="93e98-152">Click the **Credentials** tab, and then do one of the following:</span></span>  
  
        -   <span data-ttu-id="93e98-153">Seleccione el **no use Single Sign-On** opción, especifique el nombre de usuario y contraseña para conectarse a SQL Server.</span><span class="sxs-lookup"><span data-stu-id="93e98-153">Select the **Do not use Single Sign-On** option, and the specify the user name and password to connect to SQL Server.</span></span> <span data-ttu-id="93e98-154">Tenga en cuenta que el nombre de usuario y la contraseña distinguen entre mayúsculas y minúsculas.</span><span class="sxs-lookup"><span data-stu-id="93e98-154">Note that the user name and password are case-sensitive.</span></span>  
  
            > [!NOTE]
            >  <span data-ttu-id="93e98-155">Si desea conectarse a SQL Server mediante la autenticación de Windows, especifique un nombre de usuario en blanco y una contraseña.</span><span class="sxs-lookup"><span data-stu-id="93e98-155">If you want to connect to SQL Server using Windows authentication, specify a blank user name and password.</span></span>  
  
        -   <span data-ttu-id="93e98-156">Seleccione el **Use Single Sign-On** opción y, a continuación, especifique un inicio de sesión único empresarial (SSO) de la aplicación afiliada.</span><span class="sxs-lookup"><span data-stu-id="93e98-156">Select the **Use Single Sign-On** option, and then specify an affiliate Enterprise Single Sign-on (SSO) application.</span></span>  
  
             <span data-ttu-id="93e98-157">Para obtener más información acerca de la seguridad con respecto a BizTalk Server, vea [seguridad con el adaptador de SQL y BizTalk Server](../../adapters-and-accelerators/adapter-sql/security-with-the-sql-adapter-and-biztalk-server.md).</span><span class="sxs-lookup"><span data-stu-id="93e98-157">For more information about security with respect to BizTalk Server, see [Security with the SQL adapter and BizTalk Server](../../adapters-and-accelerators/adapter-sql/security-with-the-sql-adapter-and-biztalk-server.md).</span></span>
  
    5.  <span data-ttu-id="93e98-158">Haga clic en el **mensajes** ficha y en el **cuerpo del mensaje saliente de WCF** sección, elija el **plantilla** opción.</span><span class="sxs-lookup"><span data-stu-id="93e98-158">Click the **Messages** tab, and in the **Outbound WCF message body** section, choose the **Template** option.</span></span>  
  
    6.  <span data-ttu-id="93e98-159">En el **XML** texto, especifique la plantilla que se usará para construir el mensaje WCF.</span><span class="sxs-lookup"><span data-stu-id="93e98-159">In the **XML** text box, specify the template that will be used to construct the WCF message.</span></span> <span data-ttu-id="93e98-160">Al hacerlo, cree un mensaje que se ajusta a la operación ADD_LAST_EMP_XML_INFO basadas en WCF [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="93e98-160">By doing so, you create a message that conforms to the ADD_LAST_EMP_XML_INFO operation for the WCF-based [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)].</span></span>  
  
         <span data-ttu-id="93e98-161">![Especificar plantilla para mensaje WCF saliente](../../adapters-and-accelerators/adapter-sql/media/012e9ff0-b78f-4a1d-8a3a-a7b8e3850d55.gif "012e9ff0-b78f-4a1d-8a3a-a7b8e3850d55")</span><span class="sxs-lookup"><span data-stu-id="93e98-161">![Specify template for outbound WCF message](../../adapters-and-accelerators/adapter-sql/media/012e9ff0-b78f-4a1d-8a3a-a7b8e3850d55.gif "012e9ff0-b78f-4a1d-8a3a-a7b8e3850d55")</span></span>  
  
         <span data-ttu-id="93e98-162">Para el procedimiento almacenado de ADD_LAST_EMP_XML_INFO, debe especificar la siguiente plantilla:</span><span class="sxs-lookup"><span data-stu-id="93e98-162">For the ADD_LAST_EMP_XML_INFO stored procedure, you must specify the following template:</span></span>  
  
        ```  
        <ADD_LAST_EMP_XML_INFO xmlns="http://schemas.microsoft.com/Sql/2008/05/Procedures/dbo">  
        <xml_info>  
        \<bts-msg-body xmlns="http://www.microsoft.com/schemas/bts2007" encoding="string"/>  
        </xml_info>  
        </ADD_LAST_EMP_XML_INFO>  
        ```  
  
        > [!IMPORTANT]
        >  <span data-ttu-id="93e98-163">La codificación en la plantilla de mensaje siempre debe ser "cadena" independientemente del tipo del parámetro de la operación que se invocará mediante el puerto de envío.</span><span class="sxs-lookup"><span data-stu-id="93e98-163">The encoding in the message template must always be “string” irrespective of the type of the parameter for the operation that will be invoked using the send port.</span></span> <span data-ttu-id="93e98-164">Por ejemplo, el ADD_LAST_EMP_XML_INFO toma un parámetro de tipo XML, pero la codificación en la plantilla de mensaje es la cadena.</span><span class="sxs-lookup"><span data-stu-id="93e98-164">For example, the ADD_LAST_EMP_XML_INFO takes a parameter of type XML, but the encoding in the message template is string.</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="93e98-165">Puede crear esta plantilla de mensaje copiando el mensaje de solicitud para el procedimiento almacenado y reemplazando el valor dentro de las etiquetas < xml_info > por el cuerpo del mensaje de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="93e98-165">You can create this message template by copying the request message for the stored procedure and replacing the value within the <xml_info> tags with the BizTalk message body.</span></span> <span data-ttu-id="93e98-166">Puede obtener el mensaje de solicitud para el procedimiento almacenado al generar el esquema para el procedimiento mediante el [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]y, a continuación, generar una instancia del esquema para obtener la solicitud XML.</span><span class="sxs-lookup"><span data-stu-id="93e98-166">You can get the request message for the stored procedure by generating the schema for the procedure using the [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)], and then generating an instance of the schema to get the request XML.</span></span>  
  
    7.  <span data-ttu-id="93e98-167">Para volver a la **propiedades de puerto de envío** cuadro de diálogo, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="93e98-167">To return to the **Send Port Properties** dialog box, click **OK**.</span></span>  
  
9. <span data-ttu-id="93e98-168">Desde el **controlador de envío** lista, seleccione **BizTalkServerApplication**.</span><span class="sxs-lookup"><span data-stu-id="93e98-168">From the **Send handler** list, select **BizTalkServerApplication**.</span></span>  
  
10. <span data-ttu-id="93e98-169">Desde el **canalización de envío** , seleccione la canalización que corresponde a **PassThruTransmit**.</span><span class="sxs-lookup"><span data-stu-id="93e98-169">From the **Send pipeline** list, select the pipeline that corresponds to **PassThruTransmit**.</span></span>  
  
11. <span data-ttu-id="93e98-170">Haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="93e98-170">Click **OK**.</span></span>  
  
## <a name="start-the-application"></a><span data-ttu-id="93e98-171">Iniciar la aplicación</span><span class="sxs-lookup"><span data-stu-id="93e98-171">Start the Application</span></span>  
 <span data-ttu-id="93e98-172">Para iniciar la aplicación de BizTalk, puede iniciar el archivo de ubicación de recepción y el puerto de envío WCF-Custom individualmente.</span><span class="sxs-lookup"><span data-stu-id="93e98-172">To start the BizTalk application, you can start both the FILE receive location and the WCF-Custom send port individually.</span></span> <span data-ttu-id="93e98-173">Ahora debe copiar un archivo XML a la carpeta que se asigna al archivo de ubicación de recepción.</span><span class="sxs-lookup"><span data-stu-id="93e98-173">You must now copy an XML file to the folder mapped to the FILE receive location.</span></span> <span data-ttu-id="93e98-174">La aplicación de BizTalk consume el archivo y el valor XML se inserta en la columna de dirección de la tabla Employee.</span><span class="sxs-lookup"><span data-stu-id="93e98-174">The BizTalk application consumes the file, and the XML value is inserted in the Address column of the Employee table.</span></span> <span data-ttu-id="93e98-175">Puede comprobarlo mediante un cliente de SQL Server y seleccionar los registros de la tabla de empleados.</span><span class="sxs-lookup"><span data-stu-id="93e98-175">You can verify this by using a SQL Server client and selecting records from the Employee table.</span></span>  
  
## <a name="using-a-two-way-wcf-custom-send-port"></a><span data-ttu-id="93e98-176">Mediante un puerto de envío bidireccional de WCF-Custom</span><span class="sxs-lookup"><span data-stu-id="93e98-176">Using a Two-way WCF-Custom Send Port</span></span>  
 <span data-ttu-id="93e98-177">Las instrucciones de este tema, en la sección [cómo configurar un puerto de envío WCF-Custom](../../core/how-to-configure-a-wcf-custom-send-port.md), se muestra cómo configurar un puerto de envío unidireccional de WCF-Custom para ejecutar un procedimiento almacenado con un único parámetro sin usar BizTalk orquestación.</span><span class="sxs-lookup"><span data-stu-id="93e98-177">The instructions in this topic, under the section [How to Configure a WCF-Custom Send Port](../../core/how-to-configure-a-wcf-custom-send-port.md), demonstrate how to configure a one-way WCF-Custom send port to execute a stored procedure with a single parameter without using a BizTalk orchestration.</span></span> <span data-ttu-id="93e98-178">Sin embargo, en tal caso, para comprobar si el procedimiento almacenado se ejecuta correctamente tendrá que comprobar en la base de datos de SQL Server si se actualiza la columna de dirección de la tabla Employee.</span><span class="sxs-lookup"><span data-stu-id="93e98-178">However, in such a case, to verify whether the stored procedure is executed successfully you will have to verify in the SQL Server database whether the Address column in the Employee table is updated.</span></span>  
  
 <span data-ttu-id="93e98-179">En su lugar, puede crear un puerto de envío WCF-Custom bidireccional que también se obtiene la respuesta de SQL Server si el procedimiento almacenado se ejecuta correctamente.</span><span class="sxs-lookup"><span data-stu-id="93e98-179">Instead, you can create a two-way WCF-Custom send port that also gets the response from SQL Server if the stored procedure is executed successfully.</span></span> <span data-ttu-id="93e98-180">Debe realizar algunos pasos adicionales si crea un puerto bidireccional de WCF-Custom.</span><span class="sxs-lookup"><span data-stu-id="93e98-180">You must perform a few additional steps if you create a two-way WCF-Custom port.</span></span> <span data-ttu-id="93e98-181">Tenga en cuenta que todavía necesitará un archivo de ubicación de recepción, como se mencionó en las instrucciones anteriores.</span><span class="sxs-lookup"><span data-stu-id="93e98-181">Note that you will still need a FILE receive location, as mentioned in the preceding instructions.</span></span>  
  
1.  <span data-ttu-id="93e98-182">Crear un puerto de envío bidireccional de WCF-Custom, por ejemplo, **ExecProcedure**.</span><span class="sxs-lookup"><span data-stu-id="93e98-182">Create a two-way WCF-Custom send port, for example, **ExecProcedure**.</span></span> <span data-ttu-id="93e98-183">Los pasos para configurar el puerto de envío son similares a las del puerto de envío unidireccional.</span><span class="sxs-lookup"><span data-stu-id="93e98-183">The steps to configure the send port are similar to those for the one-way send port.</span></span> <span data-ttu-id="93e98-184">La única diferencia es que para el puerto bidireccional también debe especificar una canalización de recepción.</span><span class="sxs-lookup"><span data-stu-id="93e98-184">The only difference is that for the two-way port you must also specify a receive pipeline.</span></span> <span data-ttu-id="93e98-185">Asegúrese de seleccionar **PassThruReceive** para la canalización de recepción.</span><span class="sxs-lookup"><span data-stu-id="93e98-185">Make sure you select **PassThruReceive** for the receive pipeline.</span></span>  
  
2.  <span data-ttu-id="93e98-186">Cree un puerto de envío de archivos.</span><span class="sxs-lookup"><span data-stu-id="93e98-186">Create a FILE send port.</span></span> <span data-ttu-id="93e98-187">Este puerto quitará el mensaje de respuesta de la base de datos de SQL Server en una carpeta.</span><span class="sxs-lookup"><span data-stu-id="93e98-187">This port will drop the response message from the SQL Server database to a folder.</span></span> <span data-ttu-id="93e98-188">Mediante el **filtros** ficha del cuadro de diálogo de propiedades de puerto, configure el puerto de envío de archivo para recibir todos los mensajes de respuesta desde el puerto de envío WCF-Custom.</span><span class="sxs-lookup"><span data-stu-id="93e98-188">Using the **Filters** tab of the port properties dialog box, configure the FILE send port to receive all response messages from the WCF-Custom send port.</span></span>  
  
    1.  <span data-ttu-id="93e98-189">En el **propiedades de puerto de envío** cuadro de diálogo, en el panel izquierdo, haga clic en **filtros**.</span><span class="sxs-lookup"><span data-stu-id="93e98-189">In the **Send Port Properties** dialog box, from the left pane, click **Filters**.</span></span>  
  
    2.  <span data-ttu-id="93e98-190">En el panel derecho, en la **propiedad** columna, haga clic en la cuadrícula y, a continuación, seleccione **BTS. SPName** propiedad.</span><span class="sxs-lookup"><span data-stu-id="93e98-190">In the right pane, under the **Property** column, click the grid, and then select **BTS.SPName** property.</span></span>  
  
    3.  <span data-ttu-id="93e98-191">Para el **operador** columna, seleccione "**==**".</span><span class="sxs-lookup"><span data-stu-id="93e98-191">For the **Operator** column, select “**==**”.</span></span>  
  
    4.  <span data-ttu-id="93e98-192">Para el **valor** columna, especifique el nombre de WCF-Custom puerto de envío, `ExecProcedure`.</span><span class="sxs-lookup"><span data-stu-id="93e98-192">For the **Value** column, specify the name of the WCF-Custom send port, `ExecProcedure`.</span></span>  
  
 <span data-ttu-id="93e98-193">Iniciar todos los puertos de tres.</span><span class="sxs-lookup"><span data-stu-id="93e98-193">Start all the three ports.</span></span> <span data-ttu-id="93e98-194">Copia un archivo XML a la carpeta que se asigna al archivo de la ubicación de recepción.</span><span class="sxs-lookup"><span data-stu-id="93e98-194">Copy an XML file to the folder mapped to the FILE receive location.</span></span> <span data-ttu-id="93e98-195">Busque la respuesta en la carpeta asignada al puerto de envío de archivo.</span><span class="sxs-lookup"><span data-stu-id="93e98-195">Look for the response in the folder mapped to the FILE send port.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="93e98-196">Vea también</span><span class="sxs-lookup"><span data-stu-id="93e98-196">See Also</span></span>  
[<span data-ttu-id="93e98-197">Desarrollar aplicaciones de BizTalk con el adaptador de SQL</span><span class="sxs-lookup"><span data-stu-id="93e98-197">Develop BizTalk applications using the SQL adapter</span></span>](../../adapters-and-accelerators/adapter-sql/develop-biztalk-applications-using-the-sql-adapter.md)
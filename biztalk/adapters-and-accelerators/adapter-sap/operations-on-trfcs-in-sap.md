---
title: Operaciones en tRFCs en SAP | Documentos de Microsoft
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- RFCs, invoking transactional RFCs in an SAP System
- TID database
- transactional RFCs
- tRFCs, receiving inbound iransactional RFC calls from an SAP system
- tRFCs
- GUID parameter
- RFCs, processing inbound
- RfcConfirmTransID
- transaction ID (TID)
- tRFC Operations
- IDOCS, receiving IDOCs as a tRFC server
- adapters, operations on tRFCs
- RFC, invoking an RFC
ms.assetid: d6a5c515-d6aa-4b70-9c23-32d1dd94d473
caps.latest.revision: 5
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 4eac8dab219e46dc569b604a63e195f4613eb344
ms.sourcegitcommit: 5abd0ed3f9e4858ffaaec5481bfa8878595e95f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/28/2017
ms.locfileid: "25968074"
---
# <a name="operations-on-trfcs-in-sap"></a><span data-ttu-id="05f50-102">Operaciones en tRFCs en SAP</span><span class="sxs-lookup"><span data-stu-id="05f50-102">Operations on tRFCs in SAP</span></span>
<span data-ttu-id="05f50-103">RFC transaccional (tRFCs) son las solicitudes de cambio que se invocan como parte de una unidad lógica de trabajo (LUW).</span><span class="sxs-lookup"><span data-stu-id="05f50-103">Transactional RFCs (tRFCs) are RFCs that are invoked as part of a logical unit of work (LUW).</span></span> <span data-ttu-id="05f50-104">En un sistema SAP, un LUW contiene todos los pasos necesarios para completar una tarea de programación o de negocio.</span><span class="sxs-lookup"><span data-stu-id="05f50-104">On an SAP system, an LUW contains all of the steps necessary to complete a business or programming task.</span></span> <span data-ttu-id="05f50-105">Un tRFC representa una manera de invocar una solicitud de cambio; no es un único artefacto SAP.</span><span class="sxs-lookup"><span data-stu-id="05f50-105">A tRFC represents a way of invoking an RFC; it is not a unique SAP artifact.</span></span>  
  
 <span data-ttu-id="05f50-106">Puede usar el [!INCLUDE[adaptersap](../../includes/adaptersap-md.md)] como un cliente tRFC y como un servidor de tRFC.</span><span class="sxs-lookup"><span data-stu-id="05f50-106">You can use the [!INCLUDE[adaptersap](../../includes/adaptersap-md.md)] both as a tRFC client and as a tRFC server.</span></span>  
  
-   <span data-ttu-id="05f50-107">**Como un cliente tRFC**, el adaptador permite que la aplicación invocar una sola RFC en un LUW en el sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="05f50-107">**As a tRFC client**, the adapter enables your application to invoke a single RFC in an LUW on the SAP system.</span></span> <span data-ttu-id="05f50-108">Esto garantiza que un solo uso ejecución única de la solicitud de cambio.</span><span class="sxs-lookup"><span data-stu-id="05f50-108">This guarantees one-time only execution of the RFC.</span></span> <span data-ttu-id="05f50-109">No implica comportamiento transaccional.</span><span class="sxs-lookup"><span data-stu-id="05f50-109">It does not imply transactional behavior.</span></span>  
  
-   <span data-ttu-id="05f50-110">**Como un servidor de tRFC**, el adaptador le permite recibir varios RFC dentro de un LUW.</span><span class="sxs-lookup"><span data-stu-id="05f50-110">**As a tRFC server**, the adapter enables you to receive multiple RFCs inside an LUW.</span></span> <span data-ttu-id="05f50-111">El adaptador admite llamadas de tRFC entrantes en un contexto transaccional; confirmación y se admiten el comportamiento de retroceso de puesta.</span><span class="sxs-lookup"><span data-stu-id="05f50-111">The adapter supports inbound tRFC calls in a transactional context; that is commit and roll back behavior are supported.</span></span>  
  
## <a name="trfc-operations"></a><span data-ttu-id="05f50-112">las operaciones de tRFC</span><span class="sxs-lookup"><span data-stu-id="05f50-112">tRFC Operations</span></span>  
 <span data-ttu-id="05f50-113">Un tRFC implica una manera de invocar una solicitud de cambio; no es un artefacto SAP independiente.</span><span class="sxs-lookup"><span data-stu-id="05f50-113">A tRFC implies a way of invoking an RFC; it is not a separate SAP artifact.</span></span> <span data-ttu-id="05f50-114">Por lo tanto, cada RFC en el sistema SAP (para el que el adaptador puede recuperar metadatos) también aparece como un tRFC por la [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)].</span><span class="sxs-lookup"><span data-stu-id="05f50-114">Therefore, every RFC on the SAP system (for which the adapter can retrieve metadata) is also surfaced as a tRFC by the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)].</span></span> <span data-ttu-id="05f50-115">nombre RFC Emerge tRFCs como operaciones bajo el nodo de categoría de metadatos TRFC.</span><span class="sxs-lookup"><span data-stu-id="05f50-115">tRFCs are surfaced by RFC name as operations under the TRFC metadata category node.</span></span> <span data-ttu-id="05f50-116">(Se puede examinar o buscar tRFCs en la **TRFC** nodo cuando se usa el [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] o [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].)</span><span class="sxs-lookup"><span data-stu-id="05f50-116">(You can browse or search for tRFCs under the **TRFC** node when you use the [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] or the [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].)</span></span>  
  
 <span data-ttu-id="05f50-117">El [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] admite las siguientes en tRFCs:</span><span class="sxs-lookup"><span data-stu-id="05f50-117">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] supports the following on tRFCs:</span></span>  
  
-   <span data-ttu-id="05f50-118">IMPORTACIÓN de parámetros</span><span class="sxs-lookup"><span data-stu-id="05f50-118">IMPORT parameters</span></span>  
  
-   <span data-ttu-id="05f50-119">CAMBIAR los parámetros de (se admite solo el lado de entrada del parámetro CHANGING)</span><span class="sxs-lookup"><span data-stu-id="05f50-119">CHANGING parameters (only the input side of the CHANGING parameter is supported)</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="05f50-120">tRFCs se ejecutan de forma asincrónica, por lo que se devuelve ningún valor de salida (parámetros de exportación o CHANGING) para ellos.</span><span class="sxs-lookup"><span data-stu-id="05f50-120">tRFCs are executed asynchronously, so no output values (EXPORT or CHANGING parameters) are returned for them.</span></span>  
  
 <span data-ttu-id="05f50-121">Un parámetro GUID es obtenido por el adaptador para las operaciones de tRFC.</span><span class="sxs-lookup"><span data-stu-id="05f50-121">A GUID parameter is surfaced by the adapter for tRFC operations.</span></span> <span data-ttu-id="05f50-122">Este GUID ha sido asignada por el adaptador a la transacción de SAP TID (Id.) que está asociado a la tRFC.</span><span class="sxs-lookup"><span data-stu-id="05f50-122">This GUID is mapped by the adapter to the SAP transaction ID (TID) that is associated with the tRFC.</span></span> <span data-ttu-id="05f50-123">Puede utilizar este parámetro GUID para:</span><span class="sxs-lookup"><span data-stu-id="05f50-123">You can use this GUID parameter to:</span></span>  
  
-   <span data-ttu-id="05f50-124">Confirme la tRFC en el sistema SAP en las llamadas de cliente tRFC.</span><span class="sxs-lookup"><span data-stu-id="05f50-124">Confirm the tRFC on the SAP system in tRFC client calls.</span></span> <span data-ttu-id="05f50-125">La forma de hacerlo es mediante la invocación de la operación de RfcConfirmTransId.</span><span class="sxs-lookup"><span data-stu-id="05f50-125">You do this by invoking the RfcConfirmTransId operation.</span></span> <span data-ttu-id="05f50-126">Se trata de una operación especial obtenida por el adaptador para confirmar un TID en el sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="05f50-126">This is a special operation surfaced by the adapter to confirm a TID on the SAP system.</span></span>  
  
-   <span data-ttu-id="05f50-127">Obtener el TID SAP real utilizado para un tRFC desde el adaptador de cliente tRFC y escenarios de servidor de tRFC.</span><span class="sxs-lookup"><span data-stu-id="05f50-127">Get the actual SAP TID used for a tRFC from the adapter in both tRFC client and tRFC server scenarios.</span></span> <span data-ttu-id="05f50-128">Para ello, invocando el método de utilidad SAP, ConvertGuidToTid.</span><span class="sxs-lookup"><span data-stu-id="05f50-128">You do this by invoking the SAP utility method, ConvertGuidToTid.</span></span>  
  
 <span data-ttu-id="05f50-129">Para obtener más información acerca de estas operaciones, vea [operaciones especiales](../../adapters-and-accelerators/adapter-sap/special-operations.md).</span><span class="sxs-lookup"><span data-stu-id="05f50-129">For more information about these operations, see [Special Operations](../../adapters-and-accelerators/adapter-sap/special-operations.md).</span></span> <span data-ttu-id="05f50-130">Para obtener más información acerca de las estructuras de mensajes y las acciones de SOAP utilizadas para tRFCs por el adaptador, vea [esquemas de mensaje para operaciones de tRFC](../../adapters-and-accelerators/adapter-sap/message-schemas-for-trfc-operations.md).</span><span class="sxs-lookup"><span data-stu-id="05f50-130">For more information about the message structures and SOAP actions used for tRFCs by the adapter, see [Message Schemas for tRFC Operations](../../adapters-and-accelerators/adapter-sap/message-schemas-for-trfc-operations.md).</span></span>  
  
## <a name="invoking-transactional-rfcs-in-an-sap-system"></a><span data-ttu-id="05f50-131">Invocar RFC transaccional en un sistema SAP</span><span class="sxs-lookup"><span data-stu-id="05f50-131">Invoking Transactional RFCs in an SAP System</span></span>  
 <span data-ttu-id="05f50-132">Normalmente, se utiliza tRFCs para ejecutar una o más llamadas RFC dentro de un único LUW; Sin embargo, debido a las limitaciones en el SDK de RFC de SAP, la [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] admite sólo un único tRFC por LUW.</span><span class="sxs-lookup"><span data-stu-id="05f50-132">Typically, tRFCs are used to execute one or more RFC calls inside a single LUW; however, due to limitations in the SAP RFC SDK, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] supports only a single tRFC per LUW.</span></span> <span data-ttu-id="05f50-133">Por este motivo, el adaptador crea un LUW (TID SAP) para cada tRFC.</span><span class="sxs-lookup"><span data-stu-id="05f50-133">For this reason, the adapter creates an LUW (SAP TID) for each tRFC.</span></span> <span data-ttu-id="05f50-134">Para estos clientes, SAP define un LUW como un mecanismo para garantizar la ejecución "única" de la solicitud de cambio y no implica la confirmación y transacciones de reversión.</span><span class="sxs-lookup"><span data-stu-id="05f50-134">For such clients, SAP defines an LUW as a mechanism to guarantee "one-time" execution of the RFC and does not imply commit and rollback-based transactions.</span></span>  
  
 <span data-ttu-id="05f50-135">Los pasos siguientes resume las tareas que se realizan en una llamada de cliente RFC con el [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)].</span><span class="sxs-lookup"><span data-stu-id="05f50-135">The following steps summarize the tasks that are performed in an RFC client call using the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)].</span></span> <span data-ttu-id="05f50-136">Algunos de estos pasos se realizan por el cliente de adaptador y algunos son realizadas por el adaptador.</span><span class="sxs-lookup"><span data-stu-id="05f50-136">Some of these steps are performed by the adapter client, and some are performed by the adapter.</span></span>  
  
1.  <span data-ttu-id="05f50-137">El cliente de adaptador envía un mensaje de solicitud para la operación de tRFC.</span><span class="sxs-lookup"><span data-stu-id="05f50-137">The adapter client sends a request message for the tRFC operation.</span></span> <span data-ttu-id="05f50-138">El cliente de adaptador, opcionalmente, puede proporcionar un GUID en este mensaje.</span><span class="sxs-lookup"><span data-stu-id="05f50-138">The adapter client can optionally supply a GUID in this message.</span></span>  
  
2.  <span data-ttu-id="05f50-139">El [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] recibe el mensaje de solicitud y RFC SDK se utiliza para obtener una transacción TID (Id.) desde el sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="05f50-139">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] receives the request message and uses the RFC SDK to get a transaction ID (TID) from the SAP system.</span></span> <span data-ttu-id="05f50-140">Si el mensaje de solicitud contiene un GUID, el adaptador asigna este GUID para el TID SAP; en caso contrario, el adaptador crea un nuevo GUID y le asigna el TID de SAP</span><span class="sxs-lookup"><span data-stu-id="05f50-140">If the request message contains a GUID, the adapter maps this GUID to the SAP TID; otherwise, the adapter creates a new GUID and maps it to the SAP TID</span></span>  
  
3.  <span data-ttu-id="05f50-141">El adaptador utiliza el TID para realizar la tRFC llamada al servidor SAP.</span><span class="sxs-lookup"><span data-stu-id="05f50-141">The adapter uses the TID to make the tRFC call to the SAP server.</span></span> <span data-ttu-id="05f50-142">El estado del TID está marcado como **finalizado** en el sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="05f50-142">The status of the TID is marked as **FINISHED** on the SAP system.</span></span>  
  
4.  <span data-ttu-id="05f50-143">El adaptador devuelve el GUID (que se asigna al TID) para el cliente de adaptador en el mensaje de respuesta.</span><span class="sxs-lookup"><span data-stu-id="05f50-143">The adapter returns the GUID (that is mapped to the TID) to the adapter client in the response message.</span></span>  
  
5.  <span data-ttu-id="05f50-144">El cliente de adaptador invoca la operación de RfcConfirmTransID en el adaptador con el GUID devuelto en el paso anterior.</span><span class="sxs-lookup"><span data-stu-id="05f50-144">The adapter client invokes the RfcConfirmTransID operation on the adapter with the GUID returned in the previous step.</span></span>  
  
6.  <span data-ttu-id="05f50-145">El adaptador utiliza el GUID en el mensaje de solicitud RfcConfirmTransID para identificar el TID de SAP y confirma la llamada tRFC en el sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="05f50-145">The adapter uses the GUID in the RfcConfirmTransID request message to identify the SAP TID and confirms the tRFC call on the SAP system.</span></span> <span data-ttu-id="05f50-146">Esto hace que el servidor SAP eliminar la entrada TID de su base de datos.</span><span class="sxs-lookup"><span data-stu-id="05f50-146">This causes the SAP server to delete the TID entry from its database.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="05f50-147">llamadas de cliente tRFC no devuelven parámetros CHANGING o la exportación.</span><span class="sxs-lookup"><span data-stu-id="05f50-147">tRFC client calls do not return EXPORT or CHANGING parameters.</span></span>  
  
 <span data-ttu-id="05f50-148">Para obtener más información acerca de:</span><span class="sxs-lookup"><span data-stu-id="05f50-148">For more information about:</span></span>  
  
-   <span data-ttu-id="05f50-149">Invocar un tRFC mediante BizTalk Server, vea [invocar tRFCs en SAP mediante BizTalk Server](../../adapters-and-accelerators/adapter-sap/invoke-trfcs-in-sap-using-biztalk-server.md).</span><span class="sxs-lookup"><span data-stu-id="05f50-149">Invoking a tRFC using BizTalk Server, see [Invoke tRFCs in SAP using BizTalk Server](../../adapters-and-accelerators/adapter-sap/invoke-trfcs-in-sap-using-biztalk-server.md).</span></span>  
  
-   <span data-ttu-id="05f50-150">Invocar un tRFC mediante el modelo de servicio WCF, vea [invocar tRFCs en SAP mediante el modelo de servicio de WCF](../../adapters-and-accelerators/adapter-sap/invoke-trfcs-in-sap-using-the-wcf-service-model.md).</span><span class="sxs-lookup"><span data-stu-id="05f50-150">Invoking a tRFC using the WCF service model, see [Invoke tRFCs in SAP using the WCF Service Model](../../adapters-and-accelerators/adapter-sap/invoke-trfcs-in-sap-using-the-wcf-service-model.md).</span></span>  
  
-   <span data-ttu-id="05f50-151">Estructuras y acción de SOAP para invocar un tRFC mensajes, vea [esquemas de mensaje para operaciones de tRFC](../../adapters-and-accelerators/adapter-sap/message-schemas-for-trfc-operations.md).</span><span class="sxs-lookup"><span data-stu-id="05f50-151">Message structures and SOAP action for invoking a tRFC, see [Message Schemas for tRFC Operations](../../adapters-and-accelerators/adapter-sap/message-schemas-for-trfc-operations.md).</span></span>  
  
## <a name="receiving-inbound-transactional-rfc-calls-from-an-sap-system"></a><span data-ttu-id="05f50-152">Recibir llamadas entrantes RFC transaccional de un sistema SAP</span><span class="sxs-lookup"><span data-stu-id="05f50-152">Receiving Inbound Transactional RFC Calls from an SAP System</span></span>  
 <span data-ttu-id="05f50-153">Puede usar el adaptador como un servidor de tRFC para recibir tRFCs de SAP.</span><span class="sxs-lookup"><span data-stu-id="05f50-153">You can use the adapter as a tRFC server to receive tRFCs from SAP.</span></span> <span data-ttu-id="05f50-154">Como un servidor tRFC, cuando el adaptador recibe un tRFC, invoca la operación de tRFC correspondiente en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="05f50-154">As a tRFC server, when the adapter receives a tRFC, it invokes the corresponding tRFC operation on your application.</span></span> <span data-ttu-id="05f50-155">El adaptador admite la funcionalidad siguiente cuando actúa como un servidor de tRFC:</span><span class="sxs-lookup"><span data-stu-id="05f50-155">The adapter supports the following functionality when it acts as a tRFC server:</span></span>  
  
-   <span data-ttu-id="05f50-156">Un LUW (identificada por un TID SAP) puede contener varios tRFCs (RFC llamadas).</span><span class="sxs-lookup"><span data-stu-id="05f50-156">An LUW (identified by a SAP TID) can contain multiple tRFCs (RFC calls).</span></span>  
  
-   <span data-ttu-id="05f50-157">El adaptador crea una transacción confirmable para cada TID de SAP.</span><span class="sxs-lookup"><span data-stu-id="05f50-157">The adapter creates a committable transaction for each SAP TID.</span></span> <span data-ttu-id="05f50-158">El código de aplicación puede dar de alta en esta transacción.</span><span class="sxs-lookup"><span data-stu-id="05f50-158">Your application code can enlist in this transaction.</span></span>  
  
-   <span data-ttu-id="05f50-159">Se admiten la confirmación y la reversión.</span><span class="sxs-lookup"><span data-stu-id="05f50-159">Commit and roll back are supported.</span></span>  
  
 <span data-ttu-id="05f50-160">El resto de esta sección proporciona información general sobre cómo utilizar el adaptador como un servidor de tRFC.</span><span class="sxs-lookup"><span data-stu-id="05f50-160">The rest of this section provides general information about using the adapter as a tRFC server.</span></span> <span data-ttu-id="05f50-161">Para obtener información más específica acerca de:</span><span class="sxs-lookup"><span data-stu-id="05f50-161">For more specific information about:</span></span>  
  
-   <span data-ttu-id="05f50-162">Recibir una entrada tRFC llamadas con BizTalk Server, vea [tRFC entrante recibir llamadas de SAP mediante BizTalk Server](../../adapters-and-accelerators/adapter-sap/receive-inbound-trfc-calls-from-sap-using-biztalk-server.md).</span><span class="sxs-lookup"><span data-stu-id="05f50-162">Receiving a inbound tRFC calls using BizTalk Server, see [Receive Inbound tRFC Calls from SAP using BizTalk Server](../../adapters-and-accelerators/adapter-sap/receive-inbound-trfc-calls-from-sap-using-biztalk-server.md).</span></span>  
  
-   <span data-ttu-id="05f50-163">Recibir una entrada tRFC llamadas mediante el modelo de servicio WCF, vea [llama a tRFC recibir entrada de SAP mediante el modelo de servicio de WCF](../../adapters-and-accelerators/adapter-sap/receive-inbound-trfc-calls-in-sap-using-the-wcf-service-model.md).</span><span class="sxs-lookup"><span data-stu-id="05f50-163">Receiving a inbound tRFC calls using the WCF service model, see [Receive Inbound tRFC Calls in SAP using the WCF Service Model](../../adapters-and-accelerators/adapter-sap/receive-inbound-trfc-calls-in-sap-using-the-wcf-service-model.md).</span></span>  
  
### <a name="the-tid-database"></a><span data-ttu-id="05f50-164">La base de datos TID</span><span class="sxs-lookup"><span data-stu-id="05f50-164">The TID Database</span></span>  
 <span data-ttu-id="05f50-165">Cuando actúa como un servidor de tRFC, el adaptador utiliza una base de datos de SQL Server, la base de datos TID: para administrar los identificadores que recibe desde el sistema SAP de transacción.</span><span class="sxs-lookup"><span data-stu-id="05f50-165">When it acts as a tRFC server, the adapter uses a SQL Server database—the TID database—to manage the transaction IDs that it receives from the SAP system.</span></span> <span data-ttu-id="05f50-166">Por ejemplo, usa la base de datos TID para ayudar a administrar las llamadas del sistema SAP para confirmar, deshacer y confirme el TID.</span><span class="sxs-lookup"><span data-stu-id="05f50-166">For example, it uses the TID database to help manage calls from the SAP system to commit, rollback, and confirm the TID.</span></span> <span data-ttu-id="05f50-167">El adaptador también almacena el GUID que se crea y asocia cada TID de SAP en la base de datos TID.</span><span class="sxs-lookup"><span data-stu-id="05f50-167">The adapter also stores the GUID that it creates and associates with each SAP TID in the TID database.</span></span>  
  
### <a name="prerequisites"></a><span data-ttu-id="05f50-168">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="05f50-168">Prerequisites</span></span>  
 <span data-ttu-id="05f50-169">Para que el adaptador funcionar como un servidor de tRFC, debe asegurarse de que las siguientes afirmaciones son ciertas:</span><span class="sxs-lookup"><span data-stu-id="05f50-169">For the adapter to perform as a tRFC server, you must ensure that the following are true:</span></span>  
  
-   <span data-ttu-id="05f50-170">La solicitud de cambio debe declararse en el sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="05f50-170">The RFC must be declared on the SAP system.</span></span> <span data-ttu-id="05f50-171">Esto es por lo que el adaptador puede recuperar metadatos que describen la solicitud de cambio desde el sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="05f50-171">This is so the adapter can retrieve metadata that describes the RFC from the SAP system.</span></span> <span data-ttu-id="05f50-172">La solicitud de cambio se implementa realmente en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="05f50-172">The RFC is actually implemented in your application.</span></span>  
  
-   <span data-ttu-id="05f50-173">El adaptador debe registrarse con un destino RFC en una puerta de enlace SAP.</span><span class="sxs-lookup"><span data-stu-id="05f50-173">The adapter must register with an RFC destination on an SAP gateway.</span></span> <span data-ttu-id="05f50-174">El registro se basa en un nombre lógico que se llama a un identificador de programa.</span><span class="sxs-lookup"><span data-stu-id="05f50-174">The registration is based on a logical name called a program ID.</span></span> <span data-ttu-id="05f50-175">Especifica los parámetros con el URI de conexión para especificar el identificador de programa, puerta de enlace SAP y servidor SAP para este registro.</span><span class="sxs-lookup"><span data-stu-id="05f50-175">You supply parameters in the connection URI to specify the program ID, SAP gateway, and SAP server for this registration.</span></span>  
  
-   <span data-ttu-id="05f50-176">La base de datos TID debe crearse en SQL Server.</span><span class="sxs-lookup"><span data-stu-id="05f50-176">The TID database must be created in SQL Server.</span></span> <span data-ttu-id="05f50-177">Para ello, debe ejecutar un script SQL que se instala el programa de instalación.</span><span class="sxs-lookup"><span data-stu-id="05f50-177">To do this, you must run a SQL script that is installed by the setup.</span></span> <span data-ttu-id="05f50-178">El script SQL se instala normalmente en \<unidad de instalación\>: \Program [!INCLUDE[adapterpacknoversion](../../includes/adapterpacknoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="05f50-178">The SQL script is typically installed at \<installation drive\>:\Program Files\Microsoft [!INCLUDE[adapterpacknoversion](../../includes/adapterpacknoversion-md.md)].</span></span> <span data-ttu-id="05f50-179">Para obtener más información, vea [instalar BizTalk Adapter Pack](http://msdn.microsoft.com/library/2ae27db5-b11b-42c3-a568-e2331badf80e).</span><span class="sxs-lookup"><span data-stu-id="05f50-179">For more information see, [Installing the BizTalk Adapter Pack](http://msdn.microsoft.com/library/2ae27db5-b11b-42c3-a568-e2331badf80e).</span></span>  
  
-   <span data-ttu-id="05f50-180">El **TidDatabaseConnectionString** enlaza la propiedad debe establecerse en la cadena de conexión de base de datos SQL para la base de datos TID.</span><span class="sxs-lookup"><span data-stu-id="05f50-180">The **TidDatabaseConnectionString** binding property must be set to the SQL database connection string for the TID database.</span></span> <span data-ttu-id="05f50-181">Para obtener más información sobre la **TidDatabaseConnectionString** enlace de propiedad, vea [obtener información sobre el adaptador de BizTalk para propiedades de enlace de mySAP Business Suite](../../adapters-and-accelerators/adapter-sap/read-about-biztalk-adapter-for-mysap-business-suite-binding-properties.md).</span><span class="sxs-lookup"><span data-stu-id="05f50-181">For more information about the **TidDatabaseConnectionString** binding property, see [Read about BizTalk Adapter for mySAP Business Suite binding properties](../../adapters-and-accelerators/adapter-sap/read-about-biztalk-adapter-for-mysap-business-suite-binding-properties.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="05f50-182">Establecer el **TidDatabaseConnectionString** propiedad de enlace configura el adaptador para que actúe como un servidor de tRFC en lugar de un servidor RFC.</span><span class="sxs-lookup"><span data-stu-id="05f50-182">Setting the **TidDatabaseConnectionString** binding property configures the adapter to act as a tRFC server rather than as an RFC server.</span></span> <span data-ttu-id="05f50-183">Si el **TidDatabaseConnectionString** es establecer la propiedad binding y especifique un destino RFC en el URI de conexión, el adaptador actúa como un servidor de tRFC para las llamadas entrantes desde el destino de RFC.</span><span class="sxs-lookup"><span data-stu-id="05f50-183">If the **TidDatabaseConnectionString** binding property is set and you specify an RFC destination in the connection URI, the adapter acts as a tRFC server for incoming calls from the RFC destination.</span></span> <span data-ttu-id="05f50-184">Si no se establece esta propiedad de enlace, el adaptador actúa como un servidor RFC.</span><span class="sxs-lookup"><span data-stu-id="05f50-184">If this binding property is not set, the adapter acts as an RFC server.</span></span>  
  
### <a name="how-the-adapter-processes-inbound-trfcs"></a><span data-ttu-id="05f50-185">Cómo el tRFCs procesos de entrada de adaptador</span><span class="sxs-lookup"><span data-stu-id="05f50-185">How the Adapter Processes Inbound tRFCs</span></span>  
 <span data-ttu-id="05f50-186">Los pasos siguientes resume las tareas que realizan la llamada de cliente RFC con el [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)].</span><span class="sxs-lookup"><span data-stu-id="05f50-186">The following steps summarize the tasks that are performed by the RFC client call using the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)].</span></span> <span data-ttu-id="05f50-187">Algunos de estos pasos se realizan por el cliente de adaptador y algunos son realizadas por el adaptador.</span><span class="sxs-lookup"><span data-stu-id="05f50-187">Some of these steps are performed by the adapter client, and some are performed by the adapter.</span></span>  
  
1.  <span data-ttu-id="05f50-188">Las llamadas del sistema SAP en el adaptador para consultar si un TID ya se ha utilizado.</span><span class="sxs-lookup"><span data-stu-id="05f50-188">The SAP system calls into the adapter to enquire whether a TID has already been used.</span></span> <span data-ttu-id="05f50-189">El adaptador devuelve la respuesta adecuada para el sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="05f50-189">The adapter returns the appropriate response to the SAP system.</span></span> <span data-ttu-id="05f50-190">Si el TID es nuevo, el adaptador crea una transacción confirmable.</span><span class="sxs-lookup"><span data-stu-id="05f50-190">If the TID is new, the adapter creates a committable transaction.</span></span> <span data-ttu-id="05f50-191">Esta transacción se utiliza para conservar el TID a la base de datos TID de forma transaccional cuando el programa SAP realiza una confirmación (el trabajo de confirmación).</span><span class="sxs-lookup"><span data-stu-id="05f50-191">This transaction is used to persist the TID to the TID database in a transactional manner when the SAP program performs a commit (COMMIT WORK).</span></span> <span data-ttu-id="05f50-192">También se expone al código de aplicación que controla la entrada tRFCs.</span><span class="sxs-lookup"><span data-stu-id="05f50-192">It is also exposed to application code that handles the inbound tRFCs.</span></span> <span data-ttu-id="05f50-193">Además, el adaptador crea un GUID que asocia el TID de SAP.</span><span class="sxs-lookup"><span data-stu-id="05f50-193">Additionally, the adapter creates a GUID that it associates with the SAP TID.</span></span>  
  
2.  <span data-ttu-id="05f50-194">El sistema SAP envía uno o varios documentos de RFC transaccionales al adaptador.</span><span class="sxs-lookup"><span data-stu-id="05f50-194">The SAP system sends one or more transactional RFCs to the adapter.</span></span> <span data-ttu-id="05f50-195">Para cada tRFC, el adaptador invoca la operación de tRFC adecuado en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="05f50-195">For each tRFC, the adapter invokes the appropriate tRFC operation on your application.</span></span> <span data-ttu-id="05f50-196">El adaptador pasa la transacción creada en el paso 1 para la aplicación para cada operación.</span><span class="sxs-lookup"><span data-stu-id="05f50-196">The adapter flows the transaction created in step 1 to your application for each operation.</span></span> <span data-ttu-id="05f50-197">El adaptador pasa el GUID creado en el paso 1 en el mensaje de solicitud para la operación.</span><span class="sxs-lookup"><span data-stu-id="05f50-197">The adapter passes the GUID created in step 1 in the request message for the operation.</span></span>  
  
3.  <span data-ttu-id="05f50-198">Sistema SAP confirma el LUW (COMMIT WORK).</span><span class="sxs-lookup"><span data-stu-id="05f50-198">SAP system commits the LUW (COMMIT WORK).</span></span> <span data-ttu-id="05f50-199">El adaptador intenta confirmar la transacción asociada con el TID de SAP (creado en el paso 1).</span><span class="sxs-lookup"><span data-stu-id="05f50-199">The adapter tries to commit the transaction associated with the SAP TID (created in step 1).</span></span>  
  
    1.  <span data-ttu-id="05f50-200">Si se anuló la transacción (por la aplicación) durante cualquiera de las llamadas en el paso 2, a continuación, se produce un error cuando el adaptador intenta confirmar la transacción.</span><span class="sxs-lookup"><span data-stu-id="05f50-200">If the transaction was aborted (by your application) during any of the calls in step 2, then an error occurs when the adapter tries to commit the transaction.</span></span> <span data-ttu-id="05f50-201">El error se devuelve a SAP.</span><span class="sxs-lookup"><span data-stu-id="05f50-201">The error is returned to SAP.</span></span> <span data-ttu-id="05f50-202">Vaya al paso 4.</span><span class="sxs-lookup"><span data-stu-id="05f50-202">Go to step 4.</span></span>  
  
    2.  <span data-ttu-id="05f50-203">Si la confirmación es correcta, el TID está ahora en la base de datos TID.</span><span class="sxs-lookup"><span data-stu-id="05f50-203">If the commit is successful, the TID is now in the TID database.</span></span> <span data-ttu-id="05f50-204">Vaya al paso 5.</span><span class="sxs-lookup"><span data-stu-id="05f50-204">Go to step 5.</span></span>  
  
4.  <span data-ttu-id="05f50-205">Si se produjo un error en el paso 3, o si SAP se revierte el LUW (RESTART_OF_BACKGROUNDTASK) en lugar de confirmarla, el adaptador revierte la transacción.</span><span class="sxs-lookup"><span data-stu-id="05f50-205">If an error occurred in step 3, or if SAP rolls back the LUW (RESTART_OF_BACKGROUNDTASK) instead of committing it, the adapter rolls back the transaction.</span></span> <span data-ttu-id="05f50-206">En este caso el TID nunca se mantiene en la base de datos TID.</span><span class="sxs-lookup"><span data-stu-id="05f50-206">In this case the TID is never persisted to the TID database.</span></span>  
  
5.  <span data-ttu-id="05f50-207">El sistema SAP confirma el TID.</span><span class="sxs-lookup"><span data-stu-id="05f50-207">The SAP system confirms the TID.</span></span> <span data-ttu-id="05f50-208">El adaptador quita el TID de la base de datos TID (suponiendo que el paso 3 se completó correctamente y el TID existe en la base de datos TID.</span><span class="sxs-lookup"><span data-stu-id="05f50-208">The adapter removes the TID from the TID database (assuming that step 3 completed successfully and the TID exists in the TID database.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="05f50-209">Si se produce un error al intentar conectarse a la base de datos de TID durante una operación de servidor tRFC, un código de error que indica que la llamada entrante de SAP no ha procesado el [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] se devuelve a SAP.</span><span class="sxs-lookup"><span data-stu-id="05f50-209">If an error occurs attempting to connect to the TID Database during a tRFC server operation, an error code indicating that the incoming call from SAP was not processed by the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] is returned to SAP.</span></span>  
  
### <a name="receiving-idocs-as-a-trfc-server"></a><span data-ttu-id="05f50-210">Recibir IDOC como un servidor de tRFC</span><span class="sxs-lookup"><span data-stu-id="05f50-210">Receiving IDOCs as a tRFC server</span></span>  
 <span data-ttu-id="05f50-211">Usa el [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] como un servidor RFC o en un servidor de tRFC para recibir IDOC desde el sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="05f50-211">You use the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] as either an RFC server or a tRFC server to receive IDOCs from the SAP system.</span></span> <span data-ttu-id="05f50-212">En cualquier caso, debe establecer el **ReceiveIdocFormat** enlace de propiedad para especificar el formato en el que el adaptador debe emitir los datos IDOC a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="05f50-212">In either case, you must set the **ReceiveIdocFormat** binding property to specify the format in which the adapter should emit the IDOC data to your application.</span></span> <span data-ttu-id="05f50-213">Para obtener más información sobre cómo recibir IDOC con el adaptador, vea [operaciones en IDOC en SAP](../../adapters-and-accelerators/adapter-sap/operations-on-idocs-in-sap.md).</span><span class="sxs-lookup"><span data-stu-id="05f50-213">For more information about receiving IDOCs with the adapter, see [Operations on IDOCs in SAP](../../adapters-and-accelerators/adapter-sap/operations-on-idocs-in-sap.md).</span></span> <span data-ttu-id="05f50-214">Para obtener más información sobre la [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] propiedades de enlace, consulte [obtener información sobre el adaptador de BizTalk para propiedades de enlace de mySAP Business Suite](../../adapters-and-accelerators/adapter-sap/read-about-biztalk-adapter-for-mysap-business-suite-binding-properties.md).</span><span class="sxs-lookup"><span data-stu-id="05f50-214">For more information about the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] binding properties, see [Read about BizTalk Adapter for mySAP Business Suite binding properties](../../adapters-and-accelerators/adapter-sap/read-about-biztalk-adapter-for-mysap-business-suite-binding-properties.md).</span></span>  
  
## <a name="special-trfc-operations"></a><span data-ttu-id="05f50-215">Las operaciones de tRFC especial</span><span class="sxs-lookup"><span data-stu-id="05f50-215">Special tRFC Operations</span></span>  
 <span data-ttu-id="05f50-216">El [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] también se puede realizar determinadas operaciones de tRFC especial en el sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="05f50-216">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] can also perform certain special tRFC operations on the SAP system.</span></span> <span data-ttu-id="05f50-217">Una operación de esta clase es RfcConfirmTransID.</span><span class="sxs-lookup"><span data-stu-id="05f50-217">One such operation is RfcConfirmTransID.</span></span>  
  
-   <span data-ttu-id="05f50-218">**RfcConfirmTransID.**</span><span class="sxs-lookup"><span data-stu-id="05f50-218">**RfcConfirmTransID.**</span></span> <span data-ttu-id="05f50-219">Invocar esta operación en el [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] para confirmar las llamadas de tRFC realizadas al servidor SAP.</span><span class="sxs-lookup"><span data-stu-id="05f50-219">You invoke this operation on the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] to confirm tRFC calls made to the SAP server.</span></span> <span data-ttu-id="05f50-220">RfcConfirmTransID puede ser necesaria en escenarios donde se usa el adaptador para enviar IDOC al servidor SAP como un tRFC.</span><span class="sxs-lookup"><span data-stu-id="05f50-220">RfcConfirmTransID might be required in scenarios where the adapter is used to send IDOCs to the SAP server as a tRFC.</span></span> <span data-ttu-id="05f50-221">La operación está disponible en la **TRFC** nodo cuando se usa el [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] y [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="05f50-221">The operation is available under the **TRFC** node when using the [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] and [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span>  
  
 <span data-ttu-id="05f50-222">Para obtener más información sobre la estructura de mensaje y la acción SOAP para la operación de RfcConfirmTransID, consulte [esquemas de mensaje para operaciones de tRFC](../../adapters-and-accelerators/adapter-sap/message-schemas-for-trfc-operations.md).</span><span class="sxs-lookup"><span data-stu-id="05f50-222">For more information about the message structure and SOAP action for the RfcConfirmTransID operation, see [Message Schemas for tRFC Operations](../../adapters-and-accelerators/adapter-sap/message-schemas-for-trfc-operations.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="05f50-223">Vea también</span><span class="sxs-lookup"><span data-stu-id="05f50-223">See Also</span></span>  
 [<span data-ttu-id="05f50-224">Conectarse a un sistema SAP mediante el adaptador</span><span class="sxs-lookup"><span data-stu-id="05f50-224">Connect to an SAP system using the adapter</span></span>](../../adapters-and-accelerators/adapter-sap/connect-to-an-sap-system-using-the-adapter.md)
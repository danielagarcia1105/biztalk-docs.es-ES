---
title: Recibir los IDOC desde SAP con BizTalk Server | Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- IDOCs, sample (receiving)
- IDOCs, business scenarios for receiving
- IDOCs, receiving from SAP using BizTalk Server
ms.assetid: b904bf07-1108-4ed3-8564-d83eaafff247
caps.latest.revision: 10
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 3620ea444dd42863ea8242640fb94c873f63c001
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/27/2018
ms.locfileid: "36989773"
---
# <a name="receive-idocs-from-sap-using-biztalk-server"></a><span data-ttu-id="e7b4a-102">Recibir los IDOC desde SAP con BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="e7b4a-102">Receive IDOCs from SAP using BizTalk Server</span></span>
<span data-ttu-id="e7b4a-103">Recibir un IDOC implica la [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] para que actúe como un servidor RFC para recibir una llamada RFC especial de SAP.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-103">Receiving an IDOC involves the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] to act as an RFC server to receive a special RFC call from SAP.</span></span> <span data-ttu-id="e7b4a-104">El adaptador de SAP puede recibir los IDOC que actúa como un servidor RFC o un servidor de tRFC.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-104">The SAP adapter can receive IDOCs acting as an RFC server or a tRFC server.</span></span> <span data-ttu-id="e7b4a-105">Para obtener más información sobre cómo recibir un IDOC con el adaptador que se comporta como un servidor tRFC, consulte [recibir IDOC desde SAP en un contexto transaccional usando el servidor BizTalk Server](../../adapters-and-accelerators/adapter-sap/receive-idocs-from-sap-in-a-transactional-context-using-biztalk-server.md).</span><span class="sxs-lookup"><span data-stu-id="e7b4a-105">For more information about receiving an IDOC with the adapter behaving as a tRFC server, see [Receive IDOCs from SAP in a Transactional Context by Using BizTalk Server](../../adapters-and-accelerators/adapter-sap/receive-idocs-from-sap-in-a-transactional-context-using-biztalk-server.md).</span></span>  

 <span data-ttu-id="e7b4a-106">La [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] expone dos operaciones diferentes para recibir los IDOC:</span><span class="sxs-lookup"><span data-stu-id="e7b4a-106">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] surfaces two different operations to receive IDOCs:</span></span>  

- <span data-ttu-id="e7b4a-107">**Recibir** operación permite que el adaptador recibir los IDOC que tengan un esquema fuertemente tipado.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-107">**Receive** operation enables adapter to receive IDOCs having a strongly-typed schema.</span></span>  

- <span data-ttu-id="e7b4a-108">**ReceiveIdoc** operación permite que el adaptador recibir los IDOC que tengan un esquema débilmente tipada.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-108">**ReceiveIdoc** operation enables adapter to receive IDOCs having a weakly-typed schema.</span></span> <span data-ttu-id="e7b4a-109">Esta operación recibe los IDOC como una cadena en un mensaje XML en el \<idocData\> etiqueta.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-109">This operation receives IDOCs as a string in an XML message under the \<idocData\> tag.</span></span>  

  <span data-ttu-id="e7b4a-110">En el lado del adaptador, puede especificar un valor para el **ReceiveIDocFormat** enlaza la propiedad para especificar el formato de IDOC recibiría el adaptador.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-110">On the adapter side, you can specify a value for the **ReceiveIDocFormat** binding property to specify the format of IDOC the adapter would receive.</span></span>  

- <span data-ttu-id="e7b4a-111">**Ha escrito** especifica el adaptador recibirá los IDOC con esquema fuertemente tipado.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-111">**Typed** specifies the adapter will receive IDOCs with strongly-typed schema.</span></span> <span data-ttu-id="e7b4a-112">Esto da como resultado un IDOC XML.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-112">This yields an XML IDOC.</span></span>  

- <span data-ttu-id="e7b4a-113">**Cadena** especifica el adaptador recibirá los IDOC con esquema débilmente tipada.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-113">**String** specifies the adapter will receive IDOCs with weakly-typed schema.</span></span> <span data-ttu-id="e7b4a-114">Esto da como resultado un mensaje XML con el \<idocData\> etiqueta.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-114">This yields an XML message with the \<idocData\> tag.</span></span>  

- <span data-ttu-id="e7b4a-115">**RFC** especifica el adaptador recibirá los IDOC en cualquier formato.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-115">**Rfc** specifies the adapter will receive IDOCs in any format.</span></span>  

  <span data-ttu-id="e7b4a-116">Para recibir los IDOC, el [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] también admite un conjunto de propiedades de contexto de mensaje que pueden usar los clientes del adaptador en las orquestaciones.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-116">For receiving IDOCs, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] also supports a set of message context properties that adapter clients can use in the orchestrations.</span></span> <span data-ttu-id="e7b4a-117">Para obtener la lista de propiedades, vea [propiedades de contexto de mensaje para recibir los IDOC](../../adapters-and-accelerators/adapter-sap/message-context-properties-for-receiving-idocs.md).</span><span class="sxs-lookup"><span data-stu-id="e7b4a-117">For the list of properties, see [Message Context Properties for Receiving IDOCs](../../adapters-and-accelerators/adapter-sap/message-context-properties-for-receiving-idocs.md).</span></span>  

  <span data-ttu-id="e7b4a-118">Para obtener más información acerca de cómo los [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] admite recibir los IDOC desde un sistema SAP, consulte [operaciones en IDOC en SAP](../../adapters-and-accelerators/adapter-sap/operations-on-idocs-in-sap.md).</span><span class="sxs-lookup"><span data-stu-id="e7b4a-118">For more information about how the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] supports receiving IDOCs from an SAP system, see [Operations on IDOCs in SAP](../../adapters-and-accelerators/adapter-sap/operations-on-idocs-in-sap.md).</span></span> <span data-ttu-id="e7b4a-119">Para obtener más información sobre la estructura de SOAP de los mensajes para recibir un IDOC, consulte [esquemas de mensaje para operaciones de IDOC](../../adapters-and-accelerators/adapter-sap/message-schemas-for-idoc-operations.md).</span><span class="sxs-lookup"><span data-stu-id="e7b4a-119">For more information about the structure of SOAP messages for receiving an IDOC, see [Message Schemas for IDOC Operations](../../adapters-and-accelerators/adapter-sap/message-schemas-for-idoc-operations.md).</span></span>  

## <a name="biztalk-scenarios-for-receiving-idocs-from-an-sap-system"></a><span data-ttu-id="e7b4a-120">Escenarios de BizTalk para recibir los IDOC desde un sistema SAP</span><span class="sxs-lookup"><span data-stu-id="e7b4a-120">BizTalk Scenarios for Receiving IDOCs from an SAP System</span></span>  
 <span data-ttu-id="e7b4a-121">En la tabla siguiente proporciona escenarios clave de BizTalk para recibir los IDOC desde un sistema SAP:</span><span class="sxs-lookup"><span data-stu-id="e7b4a-121">The following table provides key BizTalk scenarios for receiving IDOCs from an SAP system:</span></span>  


| <span data-ttu-id="e7b4a-122">Adaptador de entrada de SAP</span><span class="sxs-lookup"><span data-stu-id="e7b4a-122">Input to Adapter from SAP</span></span> |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <span data-ttu-id="e7b4a-123">Procesamiento de BizTalk</span><span class="sxs-lookup"><span data-stu-id="e7b4a-123">BizTalk Processing</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |            <span data-ttu-id="e7b4a-124">Salida</span><span class="sxs-lookup"><span data-stu-id="e7b4a-124">Output</span></span>             |
|---------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|
| <span data-ttu-id="e7b4a-125">IDOC (a través de la interfaz de tRFC)</span><span class="sxs-lookup"><span data-stu-id="e7b4a-125">IDOC (via tRFC interface)</span></span> |                                                                                                                                                                                                                                                                                                                                           <span data-ttu-id="e7b4a-126">**Tiempo de diseño de metadatos**</span><span class="sxs-lookup"><span data-stu-id="e7b4a-126">**Metadata Design Time**</span></span><br /><br /> <span data-ttu-id="e7b4a-127">1.  Establezca la propiedad binding GenerateFlatFileCompatibleIdocSchema a **True**.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-127">1.  Set the binding property GenerateFlatFileCompatibleIdocSchema to **True**.</span></span><br /><span data-ttu-id="e7b4a-128">2.  Generar el esquema para el **recepción** operación para un uso específico de IDOC [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e7b4a-128">2.  Generate the schema for the **Receive** operation for a specific IDOC using [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span><br /><span data-ttu-id="e7b4a-129">3.  Establezca la propiedad binding ReceiveIdocFormat a **Typed**.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-129">3.  Set the binding property ReceiveIdocFormat to **Typed**.</span></span><br /><br /> <span data-ttu-id="e7b4a-130">**Tiempo de diseño de orquestación**</span><span class="sxs-lookup"><span data-stu-id="e7b4a-130">**Orchestration Design Time**</span></span><br /><br /> <span data-ttu-id="e7b4a-131">1.  Recibir IDOC de XML.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-131">1.  Receive XML IDOC.</span></span><br /><span data-ttu-id="e7b4a-132">2.  Usar el ensamblador de archivo sin formato para convertir XML IDOC a archivo sin formato.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-132">2.  Use flat-file assembler to convert XML IDOC to flat-file.</span></span>                                                                                                                                                                                                                                                                                                                                           |        <span data-ttu-id="e7b4a-133">IDOC de archivo sin formato</span><span class="sxs-lookup"><span data-stu-id="e7b4a-133">Flat-file IDOC</span></span>         |
| <span data-ttu-id="e7b4a-134">IDOC (a través de la interfaz de tRFC)</span><span class="sxs-lookup"><span data-stu-id="e7b4a-134">IDOC (via tRFC interface)</span></span> |                                                                                                                                                                                                                                                                                                                                                                             <span data-ttu-id="e7b4a-135">**Tiempo de diseño de metadatos**</span><span class="sxs-lookup"><span data-stu-id="e7b4a-135">**Metadata Design Time**</span></span><br /><br /> <span data-ttu-id="e7b4a-136">1.  Establezca la propiedad binding GenerateFlatFileCompatibleIdocSchema a **True**.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-136">1.  Set the binding property GenerateFlatFileCompatibleIdocSchema to **True**.</span></span><br /><span data-ttu-id="e7b4a-137">2.  Generar el esquema para el **recepción** operación para un uso específico de IDOC [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e7b4a-137">2.  Generate the schema for the **Receive** operation for a specific IDOC using [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span><br /><span data-ttu-id="e7b4a-138">3.  Establezca la propiedad binding ReceiveIdocFormat a **Typed**.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-138">3.  Set the binding property ReceiveIdocFormat to **Typed**.</span></span><br /><br /> <span data-ttu-id="e7b4a-139">**Tiempo de diseño de orquestación**</span><span class="sxs-lookup"><span data-stu-id="e7b4a-139">**Orchestration Design-Time**</span></span><br /><br /> <span data-ttu-id="e7b4a-140">-Recibir IDOC de XML.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-140">- Receive XML IDOC.</span></span>                                                                                                                                                                                                                                                                                                                                                                              |           <span data-ttu-id="e7b4a-141">IDOC DE XML</span><span class="sxs-lookup"><span data-stu-id="e7b4a-141">XML IDOC</span></span>            |
| <span data-ttu-id="e7b4a-142">IDOC (a través de la interfaz de tRFC)</span><span class="sxs-lookup"><span data-stu-id="e7b4a-142">IDOC (via tRFC interface)</span></span> | <span data-ttu-id="e7b4a-143">**Tiempo de diseño de metadatos**</span><span class="sxs-lookup"><span data-stu-id="e7b4a-143">**Metadata Design Time**</span></span><br /><br /> <span data-ttu-id="e7b4a-144">1.  Establezca la propiedad binding GenerateFlatFileCompatibleIdocSchema a **True**.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-144">1.  Set the binding property GenerateFlatFileCompatibleIdocSchema to **True**.</span></span><br /><span data-ttu-id="e7b4a-145">2.  Generar el esquema para el **recepción** operación para un uso específico de IDOC [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e7b4a-145">2.  Generate the schema for the **Receive** operation for a specific IDOC using [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span><br /><span data-ttu-id="e7b4a-146">3.  Establezca la propiedad binding ReceiveIdocFormat a **cadena**.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-146">3.  Set the binding property ReceiveIdocFormat to **String**.</span></span><br /><br /> <span data-ttu-id="e7b4a-147">**Tiempo de diseño de orquestación**</span><span class="sxs-lookup"><span data-stu-id="e7b4a-147">**Orchestration Design Time**</span></span><br /><br /> <span data-ttu-id="e7b4a-148">1.  Recibir mensaje XML con archivo sin formato IDOC en \<idocData\> etiqueta.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-148">1.  Receive XML message with flat-file IDOC in \<idocData\> tag.</span></span><br /><span data-ttu-id="e7b4a-149">2.  Usar compatibilidad de XPath del adaptador WCF en la configuración del puerto de recepción para extraer el IDoc de archivo sin formato del mensaje XML.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-149">2.  Use the WCF adapter’s XPath support in the receive port configuration to extract the flat-file IDoc from the XML message.</span></span> <span data-ttu-id="e7b4a-150">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="e7b4a-150">For example:</span></span><br />     `/*[local-name()='ReceiveIdoc']/*[local-name()='idocData']`<br /><span data-ttu-id="e7b4a-151">3.  Usar el Desensamblador de archivo sin formato para convertir el IDOC de archivo sin formato a XML IDOC.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-151">3.  Use flat-file disassembler to convert flat-file IDOC to XML IDOC.</span></span><br /><br /> <span data-ttu-id="e7b4a-152">**Importante** este enfoque puede utilizarse para recibir los IDOC con el nuevo basado en WCF [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] y aplicarlas directamente en un proyecto de BizTalk existente escrito para recibir los IDOC desde el adaptador de BizTalk SAP existente.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-152">**Important** This approach can be used to receive IDOCs using the new WCF-based [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] and directly apply them in an existing BizTalk project written to receive IDOCs from the existing BizTalk SAP adapter.</span></span> <span data-ttu-id="e7b4a-153">También es el enfoque recomendado para recibir los IDOC con número de versión menor que el número de versión (SYSREL).</span><span class="sxs-lookup"><span data-stu-id="e7b4a-153">This is also the recommended approach to receive IDOCs with version number less than the release number (SYSREL).</span></span> |           <span data-ttu-id="e7b4a-154">IDOC DE XML</span><span class="sxs-lookup"><span data-stu-id="e7b4a-154">XML IDOC</span></span>            |
| <span data-ttu-id="e7b4a-155">IDOC (a través de la interfaz de tRFC)</span><span class="sxs-lookup"><span data-stu-id="e7b4a-155">IDOC (via tRFC interface)</span></span> |                                                                                                                                                                                                                                                                                                                                                                                     <span data-ttu-id="e7b4a-156">**Tiempo de diseño de metadatos**</span><span class="sxs-lookup"><span data-stu-id="e7b4a-156">**Metadata Design Time**</span></span><br /><br /> <span data-ttu-id="e7b4a-157">1.  Generar el esquema para el **ReceiveIdoc** operación desde el nodo IDOC mediante [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e7b4a-157">1.  Generate the schema for the **ReceiveIdoc** operation from the IDOC node using [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span><br /><span data-ttu-id="e7b4a-158">2.  Establezca la propiedad binding ReceiveIdocFormat a **cadena**.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-158">2.  Set the binding property ReceiveIdocFormat to **String**.</span></span><br /><br /> <span data-ttu-id="e7b4a-159">**Tiempo de diseño de orquestación**</span><span class="sxs-lookup"><span data-stu-id="e7b4a-159">**Orchestration Design Time**</span></span><br /><br /> <span data-ttu-id="e7b4a-160">-Recibirá el mensaje XML con el IDOC representado como una cadena en el \<idocData\> etiqueta.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-160">- Receive XML message with the IDOC represented as a string in the \<idocData\> tag.</span></span>                                                                                                                                                                                                                                                                                                                                                                                     | <span data-ttu-id="e7b4a-161">IDOC de archivo sin formato en el mensaje XML</span><span class="sxs-lookup"><span data-stu-id="e7b4a-161">Flat-file IDOC in XML message</span></span> |

## <a name="how-to-receive-an-idoc-from-an-sap-system"></a><span data-ttu-id="e7b4a-162">¿Cómo recibir un IDOC desde un sistema SAP?</span><span class="sxs-lookup"><span data-stu-id="e7b4a-162">How to Receive an IDOC from an SAP System?</span></span>  
 <span data-ttu-id="e7b4a-163">Realizar una operación en un sistema SAP mediante [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] implica tareas de procedimientos se describe en [bloques de creación para crear aplicaciones de SAP](../../adapters-and-accelerators/adapter-sap/building-blocks-to-create-sap-applications.md).</span><span class="sxs-lookup"><span data-stu-id="e7b4a-163">Performing an operation on an SAP system using [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] involves procedural tasks described in [Building blocks to create SAP applications](../../adapters-and-accelerators/adapter-sap/building-blocks-to-create-sap-applications.md).</span></span> <span data-ttu-id="e7b4a-164">Para recibir un IDOC desde un sistema SAP, estas tareas son:</span><span class="sxs-lookup"><span data-stu-id="e7b4a-164">To receive an IDOC from an SAP system, these tasks are:</span></span>  

1. <span data-ttu-id="e7b4a-165">Cree un proyecto de BizTalk y generar el esquema para el IDOC que desea invocar en el sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-165">Create a BizTalk project and generate schema for the IDOC you want to invoke in the SAP system.</span></span> <span data-ttu-id="e7b4a-166">Al generar el esquema Asegúrese de establecer las propiedades de enlace necesaria, como se muestra en la tabla anterior.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-166">While generating the schema make sure you set the required binding properties, as listed in the previous table.</span></span> <span data-ttu-id="e7b4a-167">Para obtener instrucciones sobre cómo establecer las propiedades de enlace, consulte [configurar las propiedades de enlace para el adaptador SAP](../../adapters-and-accelerators/adapter-sap/configure-the-binding-properties-for-the-sap-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="e7b4a-167">For instructions on how to set the binding properties, see [Configure the binding properties for the SAP adapter](../../adapters-and-accelerators/adapter-sap/configure-the-binding-properties-for-the-sap-adapter.md).</span></span>  

2. <span data-ttu-id="e7b4a-168">Crear mensajes en el proyecto de BizTalk para enviar y recibir mensajes desde el sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-168">Create messages in the BizTalk project for sending and receiving messages from the SAP system.</span></span>  

3. <span data-ttu-id="e7b4a-169">Crear una orquestación para recibir un IDOC desde un sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-169">Create an orchestration to receive an IDOC from an SAP system.</span></span>  

4. <span data-ttu-id="e7b4a-170">Compile e implemente el proyecto de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-170">Build and deploy the BizTalk project.</span></span>  

5. <span data-ttu-id="e7b4a-171">Configurar la aplicación mediante la creación física de envío y puertos de recepción de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-171">Configure the BizTalk application by creating physical send and receive ports.</span></span>  

6. <span data-ttu-id="e7b4a-172">Inicie la aplicación de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-172">Start the BizTalk application.</span></span>  

   <span data-ttu-id="e7b4a-173">Este tema proporciona instrucciones para realizar estas tareas.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-173">This topic provides instructions to perform these tasks.</span></span>  

## <a name="samples-based-on-this-topic"></a><span data-ttu-id="e7b4a-174">Ejemplos basados en este tema.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-174">Samples Based On This Topic</span></span>  
 <span data-ttu-id="e7b4a-175">Ejemplos, ReceiveIDOC y ReceiveIDOC_SYSREL, basándose en este tema también se proporcionan con el [!INCLUDE[adapterpacknoversion](../../includes/adapterpacknoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e7b4a-175">Samples, ReceiveIDOC and ReceiveIDOC_SYSREL, based on this topic are also provided with the [!INCLUDE[adapterpacknoversion](../../includes/adapterpacknoversion-md.md)].</span></span> <span data-ttu-id="e7b4a-176">Para obtener más información, consulte [ejemplos para el adaptador SAP](../../adapters-and-accelerators/adapter-sap/samples-for-the-sap-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="e7b4a-176">For more information, see [Samples for the SAP adapter](../../adapters-and-accelerators/adapter-sap/samples-for-the-sap-adapter.md).</span></span>  

## <a name="generating-schema"></a><span data-ttu-id="e7b4a-177">Generar el esquema</span><span class="sxs-lookup"><span data-stu-id="e7b4a-177">Generating Schema</span></span>  
 <span data-ttu-id="e7b4a-178">Debe generar el esquema para el *recepción* la operación de la *ORDERS03. V3.620* IDOC bajo el */IDOC/ORDERS/ORDERS03* nodo.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-178">You must generate schema for the *Receive* operation of the *ORDERS03.V3.620* IDOC under the */IDOC/ORDERS/ORDERS03* node.</span></span> <span data-ttu-id="e7b4a-179">Consulte [examinar, buscar y obtener metadatos para operaciones de IDOC en SAP](../../adapters-and-accelerators/adapter-sap/browse-search-and-get-metadata-for-idoc-operations-in-sap.md) para obtener instrucciones sobre cómo generar el esquema para un IDOC determinado.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-179">See [Browse, search and get Metadata for IDOC Operations in SAP](../../adapters-and-accelerators/adapter-sap/browse-search-and-get-metadata-for-idoc-operations-in-sap.md) for instructions on how to generate schema for a particular IDOC.</span></span> <span data-ttu-id="e7b4a-180">Al generar el esquema, es posible que desea establecer las siguientes propiedades:</span><span class="sxs-lookup"><span data-stu-id="e7b4a-180">While generating the schema, you might want to set the following properties as well:</span></span>  

-   <span data-ttu-id="e7b4a-181">*GenerateFlatFileCompatibleIDoc* – genera \<appinfo\> etiquetas para que el analizador de archivos sin formato de BizTalk puede usarse en escenarios de BizTalk para admitir los IDOC de archivo sin formato.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-181">*GenerateFlatFileCompatibleIDoc* –Generates \<appinfo\> tags so that the BizTalk flat-file parser can be used in BizTalk scenarios to support flat-file IDOCs.</span></span>  

-   <span data-ttu-id="e7b4a-182">*FlatFileSegmentIndicator* : indica si el esquema IDOC \<appinfo\> etiquetas deben contener los nombres de definición de segmento o nombres de tipos de segmento.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-182">*FlatFileSegmentIndicator* – Indicates if the IDOC schema \<appinfo\> tags should contain segment definition names or segment type names.</span></span> <span data-ttu-id="e7b4a-183">Esto es aplicable cuando un deseos usadas para enviar y recibir un IDOC de archivo sin formato hacia y desde SAP.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-183">This is applicable when a used wishes to send/receive a flat-file IDOC to/from SAP.</span></span> <span data-ttu-id="e7b4a-184">Si el *GenerateFlatFileCompatibleIDoc* se establece en false, entonces *FlatFileSegmentIndicator* enlaza la propiedad se omite.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-184">If the *GenerateFlatFileCompatibleIDoc* is set to false, then *FlatFileSegmentIndicator* binding property is ignored.</span></span>  

> [!IMPORTANT]
>  <span data-ttu-id="e7b4a-185">Dado que va a generar el esquema para una llamada entrante de IDOC, asegúrese de seleccionar **(operación de entrada) de servicio** desde el **seleccione el tipo de contrato** lista desplegable en el [!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e7b4a-185">Because you are generating the schema for an inbound IDOC call, make sure you select **Service (Inbound operation)** from the **Select contract type** drop-down list in the [!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)].</span></span>  

## <a name="defining-messages-and-message-types"></a><span data-ttu-id="e7b4a-186">Definición de los mensajes y tipos de mensaje</span><span class="sxs-lookup"><span data-stu-id="e7b4a-186">Defining Messages and Message Types</span></span>  
 <span data-ttu-id="e7b4a-187">El esquema que ha generado anteriormente describe los "tipos" necesarios para los mensajes en la orquestación.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-187">The schema that you generated earlier describes the "types" required for the messages in the orchestration.</span></span> <span data-ttu-id="e7b4a-188">Un mensaje suele ser una variable, el tipo para el que está definido por el esquema correspondiente.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-188">A message is typically a variable, the type for which is defined by the corresponding schema.</span></span> <span data-ttu-id="e7b4a-189">Debe vincular el esquema generado en el primer paso para los mensajes desde la vista de orquestación de BizTalk del proyecto.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-189">You must link the schema you generated in the first step to the messages from the Orchestration view of the BizTalk project.</span></span>  

 <span data-ttu-id="e7b4a-190">Este tema, debe crear dos mensajes: uno para recibir un IDOC desde el sistema SAP y otro para enviar una respuesta.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-190">For this topic, you must create two messages—one to receive an IDOC from the SAP system and the other to send a response.</span></span>  

 <span data-ttu-id="e7b4a-191">Realice los pasos siguientes para crear mensajes y vincularlas al esquema:</span><span class="sxs-lookup"><span data-stu-id="e7b4a-191">Perform the following steps to create messages and link them to the schema:</span></span>  

#### <a name="to-create-messages-and-link-to-schema"></a><span data-ttu-id="e7b4a-192">Para crear mensajes y vínculo a esquema</span><span class="sxs-lookup"><span data-stu-id="e7b4a-192">To create messages and link to schema</span></span>  

1.  <span data-ttu-id="e7b4a-193">Agregue una nueva orquestación al proyecto de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-193">Add a new orchestration to the BizTalk project.</span></span>  

2.  <span data-ttu-id="e7b4a-194">Abra la vista de orquestación del proyecto de BizTalk, si no está abierto.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-194">Open the orchestration view the BizTalk project, if not already open.</span></span> <span data-ttu-id="e7b4a-195">Haga clic en **vista**, apunte a **Other Windows**y haga clic en **Vista orquestación**.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-195">Click **View**, point to **Other Windows**, and click **Orchestration View**.</span></span>  

3.  <span data-ttu-id="e7b4a-196">En el **Vista orquestación**, haga clic en **mensajes**y, a continuación, haga clic en **nuevo mensaje**.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-196">In the **Orchestration View**, right-click **Messages**, and then click **New Message**.</span></span>  

4.  <span data-ttu-id="e7b4a-197">Haga clic en la recién cree el mensaje y seleccione **ventana propiedades**.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-197">Right-click the newly create message and select **Properties Window**.</span></span>  

5.  <span data-ttu-id="e7b4a-198">En el **propiedades** panel **Message_1**, realice lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="e7b4a-198">In the **Properties** pane for **Message_1**, do the following:</span></span>  

    |<span data-ttu-id="e7b4a-199">Use</span><span class="sxs-lookup"><span data-stu-id="e7b4a-199">Use this</span></span>|<span data-ttu-id="e7b4a-200">Para</span><span class="sxs-lookup"><span data-stu-id="e7b4a-200">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="e7b4a-201">Identificador</span><span class="sxs-lookup"><span data-stu-id="e7b4a-201">Identifier</span></span>|<span data-ttu-id="e7b4a-202">Tipo **solicitar**.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-202">Type **Request**.</span></span>|  
    |<span data-ttu-id="e7b4a-203">Tipo de mensaje</span><span class="sxs-lookup"><span data-stu-id="e7b4a-203">Message Type</span></span>|<span data-ttu-id="e7b4a-204">En la lista desplegable, expanda **esquemas**y seleccione *ReceiveIDOC.SAPBindingSchema2*, donde *ReceiveIDOC* es el nombre de su proyecto de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-204">From the drop-down list, expand **Schemas**, and select *ReceiveIDOC.SAPBindingSchema2*, where *ReceiveIDOC* is the name of your BizTalk project.</span></span> <span data-ttu-id="e7b4a-205">*SAPBindingSchema2* es el esquema generado para la operación de recepción.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-205">*SAPBindingSchema2* is the schema generated for the Receive operation.</span></span>|  

6.  <span data-ttu-id="e7b4a-206">Repita el paso 2 para crear un nuevo mensaje.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-206">Repeat step 2 to create a new message.</span></span> <span data-ttu-id="e7b4a-207">En el **propiedades** panel para el nuevo mensaje, haga lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="e7b4a-207">In the **Properties** pane for the new message, do the following:</span></span>  

    |<span data-ttu-id="e7b4a-208">Use</span><span class="sxs-lookup"><span data-stu-id="e7b4a-208">Use this</span></span>|<span data-ttu-id="e7b4a-209">Para</span><span class="sxs-lookup"><span data-stu-id="e7b4a-209">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="e7b4a-210">Identificador</span><span class="sxs-lookup"><span data-stu-id="e7b4a-210">Identifier</span></span>|<span data-ttu-id="e7b4a-211">Tipo **respuesta**.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-211">Type **Response**.</span></span>|  
    |<span data-ttu-id="e7b4a-212">Tipo de mensaje</span><span class="sxs-lookup"><span data-stu-id="e7b4a-212">Message Type</span></span>|<span data-ttu-id="e7b4a-213">En la lista desplegable, expanda **esquemas**y seleccione *ReceiveIDOC.SAPBindingSchema3*.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-213">From the drop-down list, expand **Schemas**, and select *ReceiveIDOC.SAPBindingSchema3*.</span></span>|  

## <a name="setting-up-the-orchestration"></a><span data-ttu-id="e7b4a-214">Configuración de la orquestación</span><span class="sxs-lookup"><span data-stu-id="e7b4a-214">Setting up the Orchestration</span></span>  
 <span data-ttu-id="e7b4a-215">Debe crear una orquestación de BizTalk para utilizar [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] para recibir los IDOC desde el sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-215">You must create a BizTalk orchestration to use [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] for receiving IDOCs from the SAP system.</span></span> <span data-ttu-id="e7b4a-216">En un escenario típico, el [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] recibe una llamada IDOC desde el sistema SAP, procesa la solicitud y devuelve la respuesta al sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-216">In a typical scenario, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] receives an IDOC call from the SAP system, processes the request, and passes the response to the SAP system.</span></span> <span data-ttu-id="e7b4a-217">Para lograr esto como parte de una orquestación, la orquestación debe contener:</span><span class="sxs-lookup"><span data-stu-id="e7b4a-217">To achieve this as part of an orchestration, the orchestration must contain:</span></span>  

- <span data-ttu-id="e7b4a-218">Puerto para recibir los IDOC desde el sistema SAP y enviar la respuesta de recepción bidireccional.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-218">A two-way receive port to receive IDOCs from the SAP system and send the response.</span></span>  

- <span data-ttu-id="e7b4a-219">Enviar y recibir las formas.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-219">Send and Receive shapes.</span></span>  

- <span data-ttu-id="e7b4a-220">Forma construir mensaje y en el que una forma asignación de mensajes, para generar una respuesta que se envíe al sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-220">Construct Message shape, and within that a Message Assignment shape, to generate a response to be sent to the SAP system.</span></span>  

  > [!NOTE]
  >  <span data-ttu-id="e7b4a-221">Si incluye la orquestación de puerto (solicitud-respuesta) al recibir los IDOC desde el sistema SAP de recepción bidireccional, la orquestación debe enviar una respuesta al sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-221">If the orchestration includes a two-way receive port (request-response) to receive IDOCs from the SAP system, the orchestration must send a response back to the SAP system.</span></span> <span data-ttu-id="e7b4a-222">Si no es así, el sistema SAP no envía el IDOC siguiente.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-222">If not, the SAP system does not send the next IDOC.</span></span> <span data-ttu-id="e7b4a-223">Sin embargo, si el puerto de recepción unidireccional, no tiene la orquestación enviar una respuesta al sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-223">However, if a one-way receive port, the orchestration does not have to send a response to the SAP system.</span></span>  

- <span data-ttu-id="e7b4a-224">Un puerto de envío unidireccional para enviar el IDOC recibido desde el sistema SAP en una carpeta.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-224">A one-way send port to send the IDOCs received from the SAP system to a folder.</span></span>  

  <span data-ttu-id="e7b4a-225">Una orquestación de ejemplo para recibir un IDOC desde un sistema SAP tiene el siguiente aspecto:</span><span class="sxs-lookup"><span data-stu-id="e7b4a-225">A sample orchestration for receiving an IDOC from an SAP system looks like:</span></span>  

  <span data-ttu-id="e7b4a-226">![Orquestación para recibir los IDOC](../../adapters-and-accelerators/adapter-sap/media/20d4f251-2474-4fd5-becd-2915f9efa81b.gif "20d4f251-2474-4fd5-becd-2915f9efa81b")</span><span class="sxs-lookup"><span data-stu-id="e7b4a-226">![Orchestration to receive IDOCs](../../adapters-and-accelerators/adapter-sap/media/20d4f251-2474-4fd5-becd-2915f9efa81b.gif "20d4f251-2474-4fd5-becd-2915f9efa81b")</span></span>  

### <a name="adding-message-shapes"></a><span data-ttu-id="e7b4a-227">Agregar formas de mensaje</span><span class="sxs-lookup"><span data-stu-id="e7b4a-227">Adding Message Shapes</span></span>  
 <span data-ttu-id="e7b4a-228">Asegúrese de que especificar las siguientes propiedades para cada una de las formas de mensaje.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-228">Make sure you specify the following properties for each of the message shapes.</span></span> <span data-ttu-id="e7b4a-229">Los nombres que aparecen en la *forma* columna son los nombres de las formas de mensaje como se muestra en la orquestación anterior.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-229">The names listed in the *Shape* column are the names of the message shapes as displayed in the orchestration above.</span></span>  

|<span data-ttu-id="e7b4a-230">Forma</span><span class="sxs-lookup"><span data-stu-id="e7b4a-230">Shape</span></span>|<span data-ttu-id="e7b4a-231">Tipo de forma</span><span class="sxs-lookup"><span data-stu-id="e7b4a-231">Shape Type</span></span>|<span data-ttu-id="e7b4a-232">Propiedades</span><span class="sxs-lookup"><span data-stu-id="e7b4a-232">Properties</span></span>|  
|-----------|----------------|----------------|  
|<span data-ttu-id="e7b4a-233">ListenToSAP</span><span class="sxs-lookup"><span data-stu-id="e7b4a-233">ListenToSAP</span></span>|<span data-ttu-id="e7b4a-234">Receive</span><span class="sxs-lookup"><span data-stu-id="e7b4a-234">Receive</span></span>|<span data-ttu-id="e7b4a-235">-Establecer **nombre** a *ListenToSAP*</span><span class="sxs-lookup"><span data-stu-id="e7b4a-235">- Set **Name** to *ListenToSAP*</span></span><br /><br /> <span data-ttu-id="e7b4a-236">-Establecer **activar** a *True*</span><span class="sxs-lookup"><span data-stu-id="e7b4a-236">- Set **Activate** to *True*</span></span>|  
|<span data-ttu-id="e7b4a-237">SaveIDOC</span><span class="sxs-lookup"><span data-stu-id="e7b4a-237">SaveIDOC</span></span>|<span data-ttu-id="e7b4a-238">Send</span><span class="sxs-lookup"><span data-stu-id="e7b4a-238">Send</span></span>|<span data-ttu-id="e7b4a-239">-Establecer **nombre** a *SaveIDOC*</span><span class="sxs-lookup"><span data-stu-id="e7b4a-239">- Set **Name** to *SaveIDOC*</span></span>|  
|<span data-ttu-id="e7b4a-240">SendResponse</span><span class="sxs-lookup"><span data-stu-id="e7b4a-240">SendResponse</span></span>|<span data-ttu-id="e7b4a-241">Send</span><span class="sxs-lookup"><span data-stu-id="e7b4a-241">Send</span></span>|<span data-ttu-id="e7b4a-242">-Establecer **nombre** a *SendResponse*</span><span class="sxs-lookup"><span data-stu-id="e7b4a-242">- Set **Name** to *SendResponse*</span></span>|  

### <a name="adding-construct-message-shape"></a><span data-ttu-id="e7b4a-243">Adición de la forma construir mensaje</span><span class="sxs-lookup"><span data-stu-id="e7b4a-243">Adding Construct Message Shape</span></span>  
 <span data-ttu-id="e7b4a-244">En la orquestación, debe generar una respuesta y enviarlo al sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-244">Within the orchestration, you must generate a response and send it to the SAP system.</span></span> <span data-ttu-id="e7b4a-245">Para ello, debe agregar una forma construir mensaje y en el que dar forma a una asignación de mensajes a la orquestación.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-245">To do so, you must add a Construct Message shape and within that a Message Assignment shape to your orchestration.</span></span> <span data-ttu-id="e7b4a-246">La forma asignación de mensajes invoca el código que genera un mensaje de respuesta que se envía al sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-246">The Message Assignment shape invokes code that generates a response message that is sent to the SAP system.</span></span> <span data-ttu-id="e7b4a-247">La forma asignación de mensajes también establece la acción de la respuesta que se envíe al sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-247">The Message Assignment shape also sets the action for the response to be sent to the SAP system.</span></span>  

> [!IMPORTANT]
>  <span data-ttu-id="e7b4a-248">Si incluye la orquestación de puerto (solicitud-respuesta) al recibir los IDOC desde el sistema SAP de recepción bidireccional, la orquestación debe enviar una respuesta al sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-248">If the orchestration includes a two-way receive port (request-response) to receive IDOCs from the SAP system, the orchestration must send a response back to the SAP system.</span></span> <span data-ttu-id="e7b4a-249">Si no es así, el sistema SAP no envía el IDOC siguiente.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-249">If not, the SAP system does not send the next IDOC.</span></span> <span data-ttu-id="e7b4a-250">Sin embargo, si el puerto de recepción unidireccional, no tiene la orquestación enviar una respuesta al sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-250">However, if a one-way receive port, the orchestration does not have to send a response to the SAP system.</span></span>  

 <span data-ttu-id="e7b4a-251">Para la forma construir mensaje, establezca la **mensaje construido** propiedad **respuesta**.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-251">For the construct message shape, set the **Message Constructed** property to **Response**.</span></span>  

 <span data-ttu-id="e7b4a-252">El código para generar la respuesta podría ser parte de la misma solución de Visual Studio que el proyecto de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-252">The code to generate the response could be part of the same Visual Studio solution as your BizTalk project.</span></span> <span data-ttu-id="e7b4a-253">Un código de ejemplo para generar un mensaje de respuesta tiene este aspecto.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-253">A sample code for generating a response message looks like this.</span></span>  

```  
namespace IdocReceiveResponseMessageCreator  
{  
    public class IdocReceiveResponseMessageCreator  
    {  
        private static XmlDocument Message;  
        private static string XmlFileLocation;  
        private static string ResponseDoc;  

        public static XmlDocument XMLMessageCreator()  
        {  
            XmlFileLocation = "C:\\test\\in";  
            try  
            {  
                ResponseDoc = (Directory.GetFiles(XmlFileLocation, "*.xml", SearchOption.TopDirectoryOnly))[0];  
            }  
            catch (Exception ex)  
            {  
                Console.WriteLine("Trying to get XML from: " + XmlFileLocation);  
                Console.WriteLine("EXCEPTION: " + ex.ToString());  
                throw ex;  
            }  
            //Create Message From XML  
            Message = new XmlDocument();  
            Message.PreserveWhitespace = true;  
            Message.Load(ResponseDoc);  
            return Message;  
        }   
    }  
}  
```  

> [!NOTE]
>  <span data-ttu-id="e7b4a-254">Después de compilar el proyecto, se crearán IdocReceiveResponseMessageCreator.dll en el directorio del proyecto.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-254">After you build the project, IdocReceiveResponseMessageCreator.dll will be created in the project directory.</span></span> <span data-ttu-id="e7b4a-255">Debe agregar este archivo DLL a la caché de ensamblados global (GAC).</span><span class="sxs-lookup"><span data-stu-id="e7b4a-255">You must add this DLL to the global assembly cache (GAC).</span></span>  

 <span data-ttu-id="e7b4a-256">Agregue la siguiente expresión para invocar este código de la forma asignación de mensajes y para establecer la acción para la respuesta enviada al sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-256">Add the following expression to invoke this code from the Message Assignment shape and to set the action for the response sent to the SAP system.</span></span> <span data-ttu-id="e7b4a-257">Para agregar una expresión, haga doble clic en la forma asignación de mensajes para abrir el Editor de expresiones.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-257">To add an expression, double-click the Message Assignment shape to open the Expression Editor.</span></span>  

```  
Response = IdocReceiveResponseMessageCreator.IdocReceiveResponseMessageCreator.XMLMessageCreator();  
Response(WCF.Action)= "http://Microsoft.LobServices.Sap/2007/03/Idoc/3/ORDERS03//620/Receive/response";  
```  

> [!IMPORTANT]
>  <span data-ttu-id="e7b4a-258">Debe establecer explícitamente la acción en el mensaje de respuesta.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-258">You must explicitly set the action on the response message.</span></span> <span data-ttu-id="e7b4a-259">Si no establece la acción, el adaptador de WCF-Custom llega el mensaje de acción mediante la anexión de "Respuesta" a la acción de solicitud.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-259">If you do not set the action, WCF-Custom adapter arrives at the action message by appending “Response” to the request action.</span></span> <span data-ttu-id="e7b4a-260">Por lo tanto, se convierte en la acción para el mensaje de respuesta `http://Microsoft.LobServices.Sap/2007/03/Idoc/3/ORDERS03//620/ReceiveResponse`.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-260">So, the action for the response message becomes `http://Microsoft.LobServices.Sap/2007/03/Idoc/3/ORDERS03//620/ReceiveResponse`.</span></span> <span data-ttu-id="e7b4a-261">Sin embargo, el sapBinding espera a que la acción de respuesta mediante la anexión de "/ respuesta" a la acción de solicitud, por ejemplo `http://Microsoft.LobServices.Sap/2007/03/Idoc/3/ORDERS03//620/Receive/response`.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-261">However, the sapBinding expects the response action by appending “/response” to the request action, for example `http://Microsoft.LobServices.Sap/2007/03/Idoc/3/ORDERS03//620/Receive/response`.</span></span>  

### <a name="adding-ports"></a><span data-ttu-id="e7b4a-262">Agregar puertos</span><span class="sxs-lookup"><span data-stu-id="e7b4a-262">Adding Ports</span></span>  
 <span data-ttu-id="e7b4a-263">Asegúrese de que especificar las siguientes propiedades para el puerto lógico.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-263">Make sure you specify the following properties for the logical port.</span></span> <span data-ttu-id="e7b4a-264">El nombre que aparece en el *puerto* columna es el nombre del puerto, tal como se muestra en la orquestación.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-264">The name listed in the *Port* column is the name of the port as displayed in the orchestration.</span></span>  

|<span data-ttu-id="e7b4a-265">Puerto</span><span class="sxs-lookup"><span data-stu-id="e7b4a-265">Port</span></span>|<span data-ttu-id="e7b4a-266">Propiedades</span><span class="sxs-lookup"><span data-stu-id="e7b4a-266">Properties</span></span>|  
|----------|----------------|  
|<span data-ttu-id="e7b4a-267">ReceiveIDOCPort</span><span class="sxs-lookup"><span data-stu-id="e7b4a-267">ReceiveIDOCPort</span></span>|<span data-ttu-id="e7b4a-268">-Establecer **identificador** a *ReceiveIDOCPort*</span><span class="sxs-lookup"><span data-stu-id="e7b4a-268">- Set **Identifier** to *ReceiveIDOCPort*</span></span><br /><br /> <span data-ttu-id="e7b4a-269">-Establecer **tipo** a *ReceiveIDOCPortType*</span><span class="sxs-lookup"><span data-stu-id="e7b4a-269">- Set **Type** to *ReceiveIDOCPortType*</span></span><br /><br /> <span data-ttu-id="e7b4a-270">-Establecer **patrón de comunicación** a *de solicitud-respuesta*</span><span class="sxs-lookup"><span data-stu-id="e7b4a-270">- Set **Communication Pattern** to *Request-Response*</span></span><br /><br /> <span data-ttu-id="e7b4a-271">-Establecer **dirección de comunicación** a *envío recepción*</span><span class="sxs-lookup"><span data-stu-id="e7b4a-271">- Set **Communication Direction** to *Receive-Send*</span></span>|  
|<span data-ttu-id="e7b4a-272">GetIDOCPort</span><span class="sxs-lookup"><span data-stu-id="e7b4a-272">GetIDOCPort</span></span>|<span data-ttu-id="e7b4a-273">-Establecer **identificador** a *GetIDOCPort*</span><span class="sxs-lookup"><span data-stu-id="e7b4a-273">- Set **Identifier** to *GetIDOCPort*</span></span><br /><br /> <span data-ttu-id="e7b4a-274">-Establecer **tipo** a *GetIDOCPortType*</span><span class="sxs-lookup"><span data-stu-id="e7b4a-274">- Set **Type** to *GetIDOCPortType*</span></span><br /><br /> <span data-ttu-id="e7b4a-275">-Establecer **patrón de comunicación** a *unidireccional*</span><span class="sxs-lookup"><span data-stu-id="e7b4a-275">- Set **Communication Pattern** to *One-Way*</span></span><br /><br /> <span data-ttu-id="e7b4a-276">-Establecer **dirección de comunicación** a *enviar*</span><span class="sxs-lookup"><span data-stu-id="e7b4a-276">- Set **Communication Direction** to *Send*</span></span>|  

> [!IMPORTANT]
>  <span data-ttu-id="e7b4a-277">Si incluye la orquestación de puerto (solicitud-respuesta) al recibir los IDOC desde el sistema SAP de recepción bidireccional, la orquestación debe enviar una respuesta al sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-277">If the orchestration includes a two-way receive port (request-response) to receive IDOCs from the SAP system, the orchestration must send a response back to the SAP system.</span></span> <span data-ttu-id="e7b4a-278">Si no es así, el sistema SAP no envía el IDOC siguiente.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-278">If not, the SAP system does not send the next IDOC.</span></span>  

### <a name="adding-a-flat-file-assembler"></a><span data-ttu-id="e7b4a-279">Agregar un ensamblador de archivo sin formato</span><span class="sxs-lookup"><span data-stu-id="e7b4a-279">Adding a Flat File Assembler</span></span>  
 <span data-ttu-id="e7b4a-280">Debe agregar un ensamblador para convertir el mensaje entrante de IDOC en un archivo plano.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-280">You must add an assembler to convert the incoming IDOC message to a flat file.</span></span>  

##### <a name="to-add-a-flat-file-assembler"></a><span data-ttu-id="e7b4a-281">Para agregar un ensamblador de archivo sin formato</span><span class="sxs-lookup"><span data-stu-id="e7b4a-281">To add a flat file assembler</span></span>  

1.  <span data-ttu-id="e7b4a-282">Haga clic en el proyecto de BizTalk, seleccione **agregar**y seleccione **nuevo elemento**.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-282">Right-click the BizTalk project, point to **Add**, and select **New Item**.</span></span>  

2.  <span data-ttu-id="e7b4a-283">En el cuadro de diálogo, haga lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="e7b4a-283">From the dialog box, do the following:</span></span>  

    |<span data-ttu-id="e7b4a-284">Use</span><span class="sxs-lookup"><span data-stu-id="e7b4a-284">Use this</span></span>|<span data-ttu-id="e7b4a-285">Para</span><span class="sxs-lookup"><span data-stu-id="e7b4a-285">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="e7b4a-286">Categorías</span><span class="sxs-lookup"><span data-stu-id="e7b4a-286">Categories</span></span>|<span data-ttu-id="e7b4a-287">Archivos de canalización</span><span class="sxs-lookup"><span data-stu-id="e7b4a-287">Pipeline Files</span></span>|  
    |<span data-ttu-id="e7b4a-288">Plantillas instaladas de Visual Studio</span><span class="sxs-lookup"><span data-stu-id="e7b4a-288">Visual Studio installed templates</span></span>|<span data-ttu-id="e7b4a-289">Canalización de envío</span><span class="sxs-lookup"><span data-stu-id="e7b4a-289">Send Pipeline</span></span>|  
    |<span data-ttu-id="e7b4a-290">Nombre</span><span class="sxs-lookup"><span data-stu-id="e7b4a-290">Name</span></span>|<span data-ttu-id="e7b4a-291">SendIDOC</span><span class="sxs-lookup"><span data-stu-id="e7b4a-291">SendIDOC</span></span>|  

3.  <span data-ttu-id="e7b4a-292">Se abrirá el Diseñador de canalizaciones.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-292">This opens the Pipeline Designer.</span></span> <span data-ttu-id="e7b4a-293">Desde el **componentes de canalización de BizTalk** herramientas, arrastre el **ensamblador de archivo sin formato** componente de canalización en el **ensamblar** fase de la canalización de envío.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-293">From the **BizTalk Pipeline Components** toolbox, drag the **Flat file assembler** pipeline component into the **Assemble** stage of the send pipeline.</span></span>  

4.  <span data-ttu-id="e7b4a-294">Desde el **propiedades de componente de canalización** ver, especifique un valor para el **esquema de documento** propiedad.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-294">From the **Pipeline Component Properties** view, specify a value for the **Document Schema** property.</span></span> <span data-ttu-id="e7b4a-295">En la lista desplegable, asegúrese de seleccionar el esquema correspondiente para el IDOC de operación de recepción.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-295">From the drop-down make sure you select the schema corresponding to the IDOC receive operation.</span></span>  

## <a name="specify-messages-for-action-shapes-and-connect-to-ports"></a><span data-ttu-id="e7b4a-296">Especifique los mensajes para las formas Acción y conectar a los puertos</span><span class="sxs-lookup"><span data-stu-id="e7b4a-296">Specify Messages for Action Shapes and Connect to Ports</span></span>  
 <span data-ttu-id="e7b4a-297">En la tabla siguiente especifica las propiedades y sus valores se establezcan para especificar los mensajes de las formas de acción y vincularlos a los puertos.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-297">The following table specifies the properties and their values to be set to specify messages for action shapes and linking them to the ports.</span></span> <span data-ttu-id="e7b4a-298">Los nombres que aparecen en la *forma* columna son los nombres de las formas de mensaje como se muestra en la orquestación anterior.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-298">The names listed in the *Shape* column are the names of the message shapes as displayed in the orchestration above.</span></span>  

|<span data-ttu-id="e7b4a-299">Forma</span><span class="sxs-lookup"><span data-stu-id="e7b4a-299">Shape</span></span>|<span data-ttu-id="e7b4a-300">Propiedades</span><span class="sxs-lookup"><span data-stu-id="e7b4a-300">Properties</span></span>|  
|-----------|----------------|  
|<span data-ttu-id="e7b4a-301">ListenToSAP</span><span class="sxs-lookup"><span data-stu-id="e7b4a-301">ListenToSAP</span></span>|<span data-ttu-id="e7b4a-302">-Establecer **mensaje** a *de solicitud*</span><span class="sxs-lookup"><span data-stu-id="e7b4a-302">- Set **Message** to *Request*</span></span><br /><br /> <span data-ttu-id="e7b4a-303">-Establecer **operación** a *ReceiveIDOCPort.ReceiveIDOC.Request*</span><span class="sxs-lookup"><span data-stu-id="e7b4a-303">- Set **Operation** to *ReceiveIDOCPort.ReceiveIDOC.Request*</span></span>|  
|<span data-ttu-id="e7b4a-304">SaveIDOC</span><span class="sxs-lookup"><span data-stu-id="e7b4a-304">SaveIDOC</span></span>|<span data-ttu-id="e7b4a-305">-Establecer **mensaje** a *de solicitud*</span><span class="sxs-lookup"><span data-stu-id="e7b4a-305">- Set **Message** to *Request*</span></span><br /><br /> <span data-ttu-id="e7b4a-306">-Establecer **operación** a *GetIDOCPort.ReceiveIDOC.Request*</span><span class="sxs-lookup"><span data-stu-id="e7b4a-306">- Set **Operation** to *GetIDOCPort.ReceiveIDOC.Request*</span></span>|  
|<span data-ttu-id="e7b4a-307">SendResponse</span><span class="sxs-lookup"><span data-stu-id="e7b4a-307">SendResponse</span></span>|<span data-ttu-id="e7b4a-308">-Establecer **mensaje** a *respuesta*</span><span class="sxs-lookup"><span data-stu-id="e7b4a-308">- Set **Message** to *Response*</span></span><br /><br /> <span data-ttu-id="e7b4a-309">-Establecer **operación** a *ReceiveIDOCPort.ReceiveIDOC.Response*</span><span class="sxs-lookup"><span data-stu-id="e7b4a-309">- Set **Operation** to *ReceiveIDOCPort.ReceiveIDOC.Response*</span></span>|  

 <span data-ttu-id="e7b4a-310">Después de especificar estas propiedades, están conectados a los puertos y formas de mensaje y se completa la orquestación.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-310">After you have specified these properties, the message shapes and ports are connected and your orchestration is complete.</span></span>  

 <span data-ttu-id="e7b4a-311">Ahora debe compilar la solución de BizTalk e implementarla en un [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e7b4a-311">You must now build the BizTalk solution and deploy it to a [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="e7b4a-312">Para obtener más información, consulte [compilar y ejecutar orquestaciones](../../core/building-and-running-orchestrations.md)</span><span class="sxs-lookup"><span data-stu-id="e7b4a-312">For more information, see [Building and Running Orchestrations](../../core/building-and-running-orchestrations.md)</span></span>

## <a name="configuring-the-biztalk-application"></a><span data-ttu-id="e7b4a-313">Configuración de la aplicación de BizTalk</span><span class="sxs-lookup"><span data-stu-id="e7b4a-313">Configuring the BizTalk Application</span></span>  
 <span data-ttu-id="e7b4a-314">Después de haber implementado el proyecto de BizTalk, aparece la orquestación que creó anteriormente en el **orquestaciones** panel en la consola de administración de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-314">After you have deployed the BizTalk project, the orchestration you created earlier is listed under the **Orchestrations** pane in the BizTalk Server Administration console.</span></span> <span data-ttu-id="e7b4a-315">Debe usar la consola de administración de BizTalk Server para configurar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-315">You must use the BizTalk Server Administration console to configure the application.</span></span> <span data-ttu-id="e7b4a-316">Para obtener más información acerca de cómo configurar una aplicación, consulte [cómo configurar una aplicación](../../core/how-to-configure-an-application.md).</span><span class="sxs-lookup"><span data-stu-id="e7b4a-316">For more information about configuring an application, see [How to Configure an Application](../../core/how-to-configure-an-application.md).</span></span>

 <span data-ttu-id="e7b4a-317">Configuración de una aplicación implica:</span><span class="sxs-lookup"><span data-stu-id="e7b4a-317">Configuring an application involves:</span></span>  

- <span data-ttu-id="e7b4a-318">Selección de un host de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-318">Selecting a host for the application.</span></span>  

- <span data-ttu-id="e7b4a-319">Asignación de los puertos que ha creado en la orquestación con puertos físicos en la consola de administración de BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-319">Mapping the ports that you created in your orchestration to physical ports in the BizTalk Server Administration console.</span></span> <span data-ttu-id="e7b4a-320">Para esta orquestación, debe:</span><span class="sxs-lookup"><span data-stu-id="e7b4a-320">For this orchestration you must:</span></span>  

  - <span data-ttu-id="e7b4a-321">Definir ubicaciones de envío y puerto de envío físico.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-321">Define send locations and physical send port.</span></span> <span data-ttu-id="e7b4a-322">Esta ubicación contendrá el IDOC que provienen desde el sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-322">This location will contain the IDOCs coming from the SAP system.</span></span>  

    > [!IMPORTANT]
    >  <span data-ttu-id="e7b4a-323">Para la canalización XMLTransmit, asegúrese de seleccionar ***SendIDOC***.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-323">For the XMLTransmit pipeline, make sure you select ***SendIDOC***.</span></span> <span data-ttu-id="e7b4a-324">Ha creado esta canalización como parte del proyecto de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-324">You created this pipeline as part of the BizTalk project.</span></span>  

  - <span data-ttu-id="e7b4a-325">Definir un WCF-Custom o puerto de recepción de SAP de WCF.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-325">Define a WCF-Custom or WCF-SAP receive port.</span></span> <span data-ttu-id="e7b4a-326">Este puerto recibirá un IDOC entrante desde el sistema SAP y transferirla a la orquestación.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-326">This port will receive an inbound IDOC from the SAP system and pass it on to the orchestration.</span></span> <span data-ttu-id="e7b4a-327">Este puerto también envía la respuesta al sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-327">This port also sends the response to the SAP system.</span></span> <span data-ttu-id="e7b4a-328">Para obtener información sobre cómo crear los puertos, consulte [configurar manualmente un enlace de puerto físico para el adaptador SAP](../../adapters-and-accelerators/adapter-sap/manually-configure-a-physical-port-binding-to-the-sap-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="e7b4a-328">For information about how to create ports, see [Manually configure a physical port binding to the SAP adapter](../../adapters-and-accelerators/adapter-sap/manually-configure-a-physical-port-binding-to-the-sap-adapter.md).</span></span>

    > [!IMPORTANT]
    >  <span data-ttu-id="e7b4a-329">Asegúrese de que la propiedad de enlace **ReceiveIDocFormat** está establecido en **Typed**.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-329">Make sure the binding property **ReceiveIDocFormat** is set to **Typed**.</span></span>  
    > 
    > [!IMPORTANT]
    >  <span data-ttu-id="e7b4a-330">Si la propiedad de enlace **EnableBizTalkCompatibilityMode** está establecido en true, asegúrese de agregar el esquema de propiedades de BizTalk DLL para el [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] como un recurso en la aplicación de BizTalk, es decir, la aplicación en la que su se implementa el proyecto.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-330">If the binding property **EnableBizTalkCompatibilityMode** is set to true, make sure you add the BizTalk property schema DLL for the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] as a resource in your BizTalk application, that is, the application in which your project is deployed.</span></span> <span data-ttu-id="e7b4a-331">Para obtener instrucciones sobre cómo agregar recursos consulte [solucionar problemas de funcionamiento con el adaptador SAP](../../adapters-and-accelerators/adapter-sap/troubleshoot-operational-issues-with-the-sap-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="e7b4a-331">For instructions on adding resources see [Troubleshoot Operational Issues with the SAP adapter](../../adapters-and-accelerators/adapter-sap/troubleshoot-operational-issues-with-the-sap-adapter.md).</span></span>  
    > 
    > [!NOTE]
    >  <span data-ttu-id="e7b4a-332">Generar el esquema mediante el [!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)] también crea un archivo de enlace que contiene información sobre los puertos y las acciones que se establecerá para esos puertos.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-332">Generating the schema using the [!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)] also creates a binding file containing information about the ports and the actions to be set for those ports.</span></span> <span data-ttu-id="e7b4a-333">Puede importar este archivo de enlace desde la consola de administración de BizTalk para crear puertos de envío (para las llamadas salientes) o la recepción (para las llamadas entrantes).</span><span class="sxs-lookup"><span data-stu-id="e7b4a-333">You can import this binding file from the BizTalk Administration Console to create send ports (for outbound calls) or receive ports (for inbound calls).</span></span> <span data-ttu-id="e7b4a-334">Para obtener más información, consulte [configurar un enlace de puerto físico mediante un archivo de enlace de puerto a SAP](../../adapters-and-accelerators/adapter-sap/configure-a-physical-port-binding-using-a-port-binding-file-to-sap.md).</span><span class="sxs-lookup"><span data-stu-id="e7b4a-334">For more information, see [Configure a physical port binding using a port binding file to SAP](../../adapters-and-accelerators/adapter-sap/configure-a-physical-port-binding-using-a-port-binding-file-to-sap.md).</span></span>

  <span data-ttu-id="e7b4a-335">También debe agregar el ensamblado del proyecto IdocReceiveResponseMessageCreator a la aplicación de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-335">You must also add the assembly for the IdocReceiveResponseMessageCreator project to your BizTalk application.</span></span> <span data-ttu-id="e7b4a-336">Ha creado este proyecto para generar la respuesta que se envíe al sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-336">You created this project to generate the response to be sent to the SAP system.</span></span> <span data-ttu-id="e7b4a-337">Para ello:</span><span class="sxs-lookup"><span data-stu-id="e7b4a-337">To do so:</span></span>  

1.  <span data-ttu-id="e7b4a-338">En el árbol de consola en el lado izquierdo de la consola de administración de BizTalk Server, en la aplicación de BizTalk donde se importan los enlaces, haga clic en **recursos**, apunte a **agregar** y, a continuación, haga clic en **Ensamblados de BizTalk**.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-338">In the console tree on the left side of the BizTalk Server Administration console, under the BizTalk application where you imported the bindings, right-click **Resources**, point to **Add** and then click **BizTalk Assemblies**.</span></span>  

2.  <span data-ttu-id="e7b4a-339">En el **agregar recursos** cuadro de diálogo, haga clic en **agregar** y navegue hasta la carpeta que contiene IdocReceiveResponseMessageCreator.dll.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-339">In the **Add Resources** dialog box, Click **Add** and navigate to the folder containing IdocReceiveResponseMessageCreator.dll.</span></span> <span data-ttu-id="e7b4a-340">Seleccione el archivo y, a continuación, haga clic en **abierto**.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-340">Select the file and then click **Open**.</span></span>  

3.  <span data-ttu-id="e7b4a-341">En el **agregar recursos** cuadro de diálogo, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-341">In the **Add Resources** dialog box, click **OK**.</span></span>  

## <a name="starting-the-application"></a><span data-ttu-id="e7b4a-342">Iniciar la aplicación</span><span class="sxs-lookup"><span data-stu-id="e7b4a-342">Starting the Application</span></span>  
 <span data-ttu-id="e7b4a-343">Debe iniciar la aplicación de BizTalk para recibir un IDOC desde el sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-343">You must start the BizTalk application for receiving an IDOC from the SAP system.</span></span> <span data-ttu-id="e7b4a-344">Para obtener instrucciones acerca de cómo iniciar una aplicación de BizTalk, consulte [cómo iniciar una orquestación](../../core/how-to-start-an-orchestration.md), o [cómo iniciar una aplicación](../../core/how-to-start-and-stop-a-biztalk-application.md).</span><span class="sxs-lookup"><span data-stu-id="e7b4a-344">For instructions on starting a BizTalk application, see [How to Start an Orchestration](../../core/how-to-start-an-orchestration.md), or [How to start an application](../../core/how-to-start-and-stop-a-biztalk-application.md).</span></span>

 <span data-ttu-id="e7b4a-345">En esta etapa, asegúrese de que:</span><span class="sxs-lookup"><span data-stu-id="e7b4a-345">At this stage, make sure:</span></span>  

-   <span data-ttu-id="e7b4a-346">El puerto de envío de archivo para guardar el IDOC entrante en una ubicación de archivo se está ejecutando</span><span class="sxs-lookup"><span data-stu-id="e7b4a-346">The FILE send port to save the incoming IDOC to a file location is running</span></span>  

-   <span data-ttu-id="e7b4a-347">El WCF-Custom o WCF SAP puerto de recepción para recibir los IDOC desde SAP se ejecuta el sistema.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-347">The WCF-Custom or WCF-SAP receive port to receive IDOCs from the SAP system is running.</span></span>  

-   <span data-ttu-id="e7b4a-348">La orquestación de BizTalk para la operación se está ejecutando.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-348">The BizTalk orchestration for the operation is running.</span></span>  

## <a name="executing-the-operation"></a><span data-ttu-id="e7b4a-349">Ejecutar la operación</span><span class="sxs-lookup"><span data-stu-id="e7b4a-349">Executing the Operation</span></span>  
 <span data-ttu-id="e7b4a-350">Después de ejecutar la aplicación, debe ir el sistema SAP y enviar un IDOC en el adaptador.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-350">After you run the application, you must go the SAP system and send an IDOC into the adapter.</span></span> <span data-ttu-id="e7b4a-351">El adaptador recibe el IDOC y lo guarda en una ubicación de archivo especificada como parte de la orquestación.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-351">The adapter receives the IDOC and saves it to a file location specified as part of the orchestration.</span></span>  

## <a name="possible-exceptions"></a><span data-ttu-id="e7b4a-352">Posibles excepciones</span><span class="sxs-lookup"><span data-stu-id="e7b4a-352">Possible Exceptions</span></span>  
 <span data-ttu-id="e7b4a-353">Para obtener información sobre las excepciones que puede surgir al recibir un IDOC desde un sistema SAP mediante BizTalk Server, vea [excepciones y control de errores con el adaptador SAP](../../adapters-and-accelerators/adapter-sap/exceptions-and-error-handling-with-the-sap-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="e7b4a-353">For information about the exceptions you might encounter while receiving an IDOC from an SAP system using BizTalk Server, see [Exceptions and Error Handling with the SAP adapter](../../adapters-and-accelerators/adapter-sap/exceptions-and-error-handling-with-the-sap-adapter.md).</span></span>  

## <a name="best-practices"></a><span data-ttu-id="e7b4a-354">Procedimientos recomendados</span><span class="sxs-lookup"><span data-stu-id="e7b4a-354">Best Practices</span></span>  
 <span data-ttu-id="e7b4a-355">Una vez que haya implementado y configurado el proyecto de BizTalk, puede exportar opciones de configuración a un archivo XML llamado el archivo de enlaces.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-355">After you have deployed and configured the BizTalk project, you can export configuration settings to an XML file called the bindings file.</span></span> <span data-ttu-id="e7b4a-356">Cuando genere un archivo de enlaces, puede importar los valores de configuración desde el archivo, por lo que no es necesario crear los puertos de envío, recepción, puertos, etc., de la misma orquestación.</span><span class="sxs-lookup"><span data-stu-id="e7b4a-356">Once you generate a bindings file, you can import the configuration settings from the file so that you do not need to create the send ports, receive ports, etc. for the same orchestration.</span></span> <span data-ttu-id="e7b4a-357">Para obtener más información acerca de los archivos de enlace, consulte [enlaces del adaptador SAP reutilizar](../../adapters-and-accelerators/adapter-sap/reuse-sap-adapter-bindings.md).</span><span class="sxs-lookup"><span data-stu-id="e7b4a-357">For more information about binding files, see [Reuse SAP adapter bindings](../../adapters-and-accelerators/adapter-sap/reuse-sap-adapter-bindings.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="e7b4a-358">Vea también</span><span class="sxs-lookup"><span data-stu-id="e7b4a-358">See Also</span></span>  
[<span data-ttu-id="e7b4a-359">Desarrollar aplicaciones de BizTalk</span><span class="sxs-lookup"><span data-stu-id="e7b4a-359">Develop BizTalk applications</span></span>](../../adapters-and-accelerators/adapter-sap/develop-biztalk-applications-using-the-sap-adapter.md)
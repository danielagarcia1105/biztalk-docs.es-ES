---
title: Proceso de reparación de mensajes | Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- repairing messages
- errors, messages
- messages, errors
- validating, messages
- messages, validating
ms.assetid: 87b97cec-5796-4684-bcf0-53285aca7ee2
caps.latest.revision: 7
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: bb8e8cd5a23cd0187b5476688a00d1ca800c45d4
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/27/2018
ms.locfileid: "36999069"
---
# <a name="message-repair-process"></a><span data-ttu-id="6ea22-102">Proceso de reparación de mensajes</span><span class="sxs-lookup"><span data-stu-id="6ea22-102">Message Repair Process</span></span>
<span data-ttu-id="6ea22-103">De forma predeterminada, [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] suspende los mensajes con errores en la cola de suspensión de la base de datos de cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="6ea22-103">By default, [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] suspends failed messages in the suspended queue of the MessageBox database.</span></span> <span data-ttu-id="6ea22-104">Este proceso controla los mensajes con errores por separado de los mensajes correctos.</span><span class="sxs-lookup"><span data-stu-id="6ea22-104">This process handles failed messages separately from successful messages.</span></span> <span data-ttu-id="6ea22-105">Mediante este mecanismo de forma predeterminada, sin embargo, tiene una capacidad limitada para recuperar los mensajes con errores y corregirlos.</span><span class="sxs-lookup"><span data-stu-id="6ea22-105">Using this default mechanism, however, you have a limited ability to retrieve failed messages and repair them.</span></span> <span data-ttu-id="6ea22-106">La característica de reparación de mensajes y nuevo envío de [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] permite un [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] usuario reparar un mensaje y enviarlo de nuevo.</span><span class="sxs-lookup"><span data-stu-id="6ea22-106">The Message Repair and New Submission feature of [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] enables an [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] user to repair a message and resubmit it.</span></span> <span data-ttu-id="6ea22-107">Otro [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] usuario, a continuación, puede comprobar las reparaciones y un tercero puede aprobar las reparaciones.</span><span class="sxs-lookup"><span data-stu-id="6ea22-107">Another [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] user can then verify the repairs, and a third can approve the repairs.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="6ea22-108">En este contexto, un [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] trata de un usuario que realiza una función en un flujo de trabajo de reparación de departamento.</span><span class="sxs-lookup"><span data-stu-id="6ea22-108">In this context, an [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] user is a user that performs a role in a departmental repair workflow.</span></span> <span data-ttu-id="6ea22-109">Este usuario A4SWIFT está definida y asociada con un certificado, en el vínculo de los usuarios del cliente Web de perfil.</span><span class="sxs-lookup"><span data-stu-id="6ea22-109">This A4SWIFT user is defined, and associated with a certificate, in the Users link of the Profile Web Client.</span></span> <span data-ttu-id="6ea22-110">Esto [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] usuario no es el mismo que un [!INCLUDE[btsWinNoVersion](../../includes/btswinnoversion-md.md)] cuenta de usuario, como se define en el [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] de grupo de usuarios en el [!INCLUDE[btsWinNoVersion](../../includes/btswinnoversion-md.md)] utilidad de administración de equipos.</span><span class="sxs-lookup"><span data-stu-id="6ea22-110">This [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] user is not the same as a [!INCLUDE[btsWinNoVersion](../../includes/btswinnoversion-md.md)] user account, as defined in the [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] Users group in the [!INCLUDE[btsWinNoVersion](../../includes/btswinnoversion-md.md)] Computer Management utility.</span></span> <span data-ttu-id="6ea22-111">La persona que funciona como un [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] usuario debe tener un [!INCLUDE[btsWinNoVersion](../../includes/btswinnoversion-md.md)] cuentas de usuario para que pueden usar certificados de la cuenta al enviar un mensaje.</span><span class="sxs-lookup"><span data-stu-id="6ea22-111">The person functioning as an [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] user must have a [!INCLUDE[btsWinNoVersion](../../includes/btswinnoversion-md.md)] user account so that they can use that account's certificates when submitting a message.</span></span> <span data-ttu-id="6ea22-112">Sin embargo, esa persona también puede actuar como otro [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] usuarios: taller de reparación, Comprobador, aprobador o creador.</span><span class="sxs-lookup"><span data-stu-id="6ea22-112">However, that person can also serve as other [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] users: repairer, verifier, approver, or creator.</span></span> <span data-ttu-id="6ea22-113">Para obtener más información, consulte [creando los departamentos de TI y los Roles de reparación de mensajes y nuevo envío](../../adapters-and-accelerators/accelerator-swift/creating-departments-and-roles-for-message-repair-and-new-submission.md).</span><span class="sxs-lookup"><span data-stu-id="6ea22-113">For more information, see [Creating Departments and Roles for Message Repair and New Submission](../../adapters-and-accelerators/accelerator-swift/creating-departments-and-roles-for-message-repair-and-new-submission.md).</span></span>  
  
 <span data-ttu-id="6ea22-114">Con este flujo de trabajo de reparación, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] no suspende un mensaje con errores.</span><span class="sxs-lookup"><span data-stu-id="6ea22-114">With this repair workflow, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] does not suspend a failed message.</span></span> <span data-ttu-id="6ea22-115">Realiza el procesamiento adicional en el mensaje con errores y, a continuación, coloca el mensaje en el cuadro de mensajes, tal como lo haría con un mensaje correcto.</span><span class="sxs-lookup"><span data-stu-id="6ea22-115">It performs additional processing on the failed message, and then drops the message into the MessageBox, just as it would a successful message.</span></span> <span data-ttu-id="6ea22-116">La orquestación de reparación coloca el mensaje en el [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] sitio MRSR, donde los usuarios pueden realizar sus funciones en [!INCLUDE[btsInpathNoVersion](../../includes/btsinpathnoversion-md.md)] formularios.</span><span class="sxs-lookup"><span data-stu-id="6ea22-116">The repair orchestration drops the message into the [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] MRSR site, where users can perform their functions in [!INCLUDE[btsInpathNoVersion](../../includes/btsinpathnoversion-md.md)] forms.</span></span>  
  
## <a name="message-validation"></a><span data-ttu-id="6ea22-117">Validación de mensajes</span><span class="sxs-lookup"><span data-stu-id="6ea22-117">Message Validation</span></span>  
 <span data-ttu-id="6ea22-118">Reparación de mensajes y nuevo envío envía cualquier mensaje que se producen errores en la siguiente validación al sitio MRSR de reparación:</span><span class="sxs-lookup"><span data-stu-id="6ea22-118">Message Repair and New Submission sends any message failing the following validation to MRSR site for repair:</span></span>  
  
- <span data-ttu-id="6ea22-119">Validación estructural realizada por el analizador de archivos planos (sin analizar mensajes)</span><span class="sxs-lookup"><span data-stu-id="6ea22-119">Structural validation performed by the flat file parser (unparsed messages)</span></span>  
  
- <span data-ttu-id="6ea22-120">Validación de datos realizada por el lector de validación de XML</span><span class="sxs-lookup"><span data-stu-id="6ea22-120">Data validation performed by the XML validating reader</span></span>  
  
- <span data-ttu-id="6ea22-121">SWIFT validación de regla de red y el uso realizado por el motor de reglas de negocios (BRE)</span><span class="sxs-lookup"><span data-stu-id="6ea22-121">SWIFT network and usage rule validation performed by the Business Rule Engine (BRE)</span></span>  
  
  [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]<span data-ttu-id="6ea22-122"> recopila los errores detectados durante la validación en un objeto de colección de errores que acompaña al mensaje SWIFT.</span><span class="sxs-lookup"><span data-stu-id="6ea22-122"> collects any errors encountered during validation in an error collection object that travels with the SWIFT message.</span></span> <span data-ttu-id="6ea22-123">El proceso de reparación incluye información de errores de serialización en XML y adjuntarlo al mensaje como parte de un error.</span><span class="sxs-lookup"><span data-stu-id="6ea22-123">The repair process includes serializing error information into XML and attaching it to the message as an error part.</span></span> <span data-ttu-id="6ea22-124">Este procesamiento también incluye marcar el mensaje con una propiedad promocionada que indica que el mensaje de error de validación ([!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]_Failed == True), y los recuentos de otra propiedad promocionada que notifica el error para cada fase de validación.</span><span class="sxs-lookup"><span data-stu-id="6ea22-124">This processing also includes marking the message with a promoted property that indicates that the message has failed validation ([!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]_Failed==True), and another promoted property that reports the error counts for each validation stage.</span></span> <span data-ttu-id="6ea22-125">El mensaje de varias partes resultante consta de las siguientes acciones:</span><span class="sxs-lookup"><span data-stu-id="6ea22-125">The resulting multipart message consists of the following:</span></span>  
  
- <span data-ttu-id="6ea22-126">Una parte del cuerpo que contiene el mensaje con errores</span><span class="sxs-lookup"><span data-stu-id="6ea22-126">A body part containing the failed message</span></span>  
  
- <span data-ttu-id="6ea22-127">Una parte de error que contiene el XML de la colección de errores</span><span class="sxs-lookup"><span data-stu-id="6ea22-127">An error part containing the error-collection XML</span></span>  
  
- <span data-ttu-id="6ea22-128">Que indica el estado de error de propiedades promocionadas</span><span class="sxs-lookup"><span data-stu-id="6ea22-128">Promoted properties indicating the failure state</span></span>  
  
## <a name="message-repair"></a><span data-ttu-id="6ea22-129">Reparación de mensajes</span><span class="sxs-lookup"><span data-stu-id="6ea22-129">Message Repair</span></span>  
 <span data-ttu-id="6ea22-130">La regla de negocios MRSRDepartmentRule dentro de la MRSRDepartmentPolicy determina qué departamento va a controlar el mensaje con errores.</span><span class="sxs-lookup"><span data-stu-id="6ea22-130">The MRSRDepartmentRule business rule within the MRSRDepartmentPolicy determines which department will handle the failed message.</span></span> <span data-ttu-id="6ea22-131">La orquestación de reparación de mensajes inicia el flujo de trabajo de reparación de enrutar el mensaje a una bandeja de entrada asociado a la función de reparación en el departamento.</span><span class="sxs-lookup"><span data-stu-id="6ea22-131">The message repair orchestration starts the repair workflow by routing the message to an inbox associated with the repair role in the department.</span></span> <span data-ttu-id="6ea22-132">El [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] usuario que realiza la función de reparación, abre el mensaje en el [!INCLUDE[btsInpathNoVersion](../../includes/btsinpathnoversion-md.md)] formulario, se repara el mensaje y, a continuación, inicia sesión y lo envía.</span><span class="sxs-lookup"><span data-stu-id="6ea22-132">The [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] user performing the repair role opens the message in the [!INCLUDE[btsInpathNoVersion](../../includes/btsinpathnoversion-md.md)] form, repairs the message, and then signs and submits it.</span></span> <span data-ttu-id="6ea22-133">La orquestación enruta el mensaje reparado a cada uno de la reparación, comprobación de regeneración de claves o funciones de aprobación y, después de que el flujo de trabajo se haya completado correctamente, enruta el mensaje al puerto de envío.</span><span class="sxs-lookup"><span data-stu-id="6ea22-133">The orchestration routes the repaired message to each of the repair, rekey verification, or approval roles, and after the workflow has successfully completed, routes the message to the send port.</span></span>  
  
 <span data-ttu-id="6ea22-134">Además de la validación, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] comprueba las firmas del mensaje para determinar lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="6ea22-134">In addition to validation, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] checks the signatures on the message to determine the following:</span></span>  
  
- <span data-ttu-id="6ea22-135">Los usuarios en el flujo de trabajo de reparación pertenecen al mismo departamento</span><span class="sxs-lookup"><span data-stu-id="6ea22-135">The users in the repair workflow belong to the same department</span></span>  
  
- <span data-ttu-id="6ea22-136">Cada usuario ha iniciado sesión con una sola vez</span><span class="sxs-lookup"><span data-stu-id="6ea22-136">Each user has signed just once</span></span>  
  
- <span data-ttu-id="6ea22-137">La secuencia de funciones corresponden a los usuarios coincide con la secuencia en el flujo de trabajo definido para dicho departamento</span><span class="sxs-lookup"><span data-stu-id="6ea22-137">The sequence of roles corresponding to the users matches the sequence in the workflow defined for that department</span></span>  
  
  <span data-ttu-id="6ea22-138">Para obtener más información acerca de los departamentos de TI, consulte [creando los departamentos de TI y los Roles de reparación de mensajes y nuevo envío](../../adapters-and-accelerators/accelerator-swift/creating-departments-and-roles-for-message-repair-and-new-submission.md).</span><span class="sxs-lookup"><span data-stu-id="6ea22-138">For more information about departments, see [Creating Departments and Roles for Message Repair and New Submission](../../adapters-and-accelerators/accelerator-swift/creating-departments-and-roles-for-message-repair-and-new-submission.md).</span></span>  
  
  [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]<span data-ttu-id="6ea22-139"> También permite reparar los mensajes sin analizar.</span><span class="sxs-lookup"><span data-stu-id="6ea22-139"> also enables you to repair unparsed messages.</span></span> <span data-ttu-id="6ea22-140">Sin embargo, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] realiza un procesamiento diferente en un mensaje sin analizar reparado.</span><span class="sxs-lookup"><span data-stu-id="6ea22-140">However, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] performs different processing on a repaired unparsed message.</span></span> <span data-ttu-id="6ea22-141">Para obtener más información, consulte [reparación de mensajes sin analizar](../../adapters-and-accelerators/accelerator-swift/repairing-unparsed-messages.md).</span><span class="sxs-lookup"><span data-stu-id="6ea22-141">For more information, see [Repairing Unparsed Messages](../../adapters-and-accelerators/accelerator-swift/repairing-unparsed-messages.md).</span></span>
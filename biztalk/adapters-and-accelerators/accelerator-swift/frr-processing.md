---
title: Procesamiento de FRR | Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- FRR, processing
- FRR, components
- FRR, process flow
ms.assetid: 8b064d18-5ee7-44fd-95d1-9a0d66f1ad1a
caps.latest.revision: 3
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 30c343d214a97895e90bae2bc3a041180c0cc8e3
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/27/2018
ms.locfileid: "36987013"
---
# <a name="frr-processing"></a><span data-ttu-id="26f5b-102">Procesamiento de FRR</span><span class="sxs-lookup"><span data-stu-id="26f5b-102">FRR Processing</span></span>
<span data-ttu-id="26f5b-103">El [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] característica de conciliación de respuesta de FIN (FRR) pone en correlación los mensajes FIN de la acceso de Alliance SWIFT (AAS) con el mensaje original desde [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] que responde el mensaje AAS.</span><span class="sxs-lookup"><span data-stu-id="26f5b-103">The [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] FIN Response Reconciliation (FRR) feature correlates FIN messages from the SWIFT Alliance Access (SAA) with the original message from [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] that the SAA message responds to.</span></span> <span data-ttu-id="26f5b-104">Cada vez que [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] envía un mensaje original, las cachés FRR una copia de cualquier mensaje enlazado para SWIFT y que no haya dejado de procesamiento.</span><span class="sxs-lookup"><span data-stu-id="26f5b-104">Whenever [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] sends an original message, FRR caches a copy of any message that is bound for SWIFT and that has not failed processing.</span></span> <span data-ttu-id="26f5b-105">A continuación, supervisa el cuadro de mensajes para los mensajes de respuesta devueltos por AAS a [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]y recoge los mensajes de confirmación/NAK que corresponde a la copia del mensaje almacenado en caché.</span><span class="sxs-lookup"><span data-stu-id="26f5b-105">It then monitors the MessageBox for response messages returned by SAA to [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)], and picks up any ACK/NAK messages that corresponds to the cached message copy.</span></span>  

 <span data-ttu-id="26f5b-106">FRR establece una correlación entre un mensaje saliente y un mensaje entrante mediante la comparación de las propiedades de Id. de correlación.</span><span class="sxs-lookup"><span data-stu-id="26f5b-106">FRR establishes a correlation between an outgoing message and an incoming message by comparing correlation ID properties.</span></span> <span data-ttu-id="26f5b-107">FRR establece las propiedades promocionadas de la copia del mensaje original, según la naturaleza de la respuesta y, a continuación, enruta el mensaje original en el cuadro de mensajes para su posterior procesamiento.</span><span class="sxs-lookup"><span data-stu-id="26f5b-107">FRR sets promoted properties of the copy of the original message according to the nature of the response, and then routes the original message to the MessageBox for further processing.</span></span>  

## <a name="frr-components"></a><span data-ttu-id="26f5b-108">Componentes FRR</span><span class="sxs-lookup"><span data-stu-id="26f5b-108">FRR Components</span></span>  
 <span data-ttu-id="26f5b-109">FRR incluye un proceso continuo (orquestación) que supervisa los mensajes entrantes y salientes y para cada mensaje entrante o saliente, promociona las propiedades de identificación que va a usar para la comparación.</span><span class="sxs-lookup"><span data-stu-id="26f5b-109">FRR includes an ongoing process (orchestration) that monitors outgoing and incoming messages, and for each outgoing or incoming message, promotes the identification properties that it will use for comparison.</span></span> <span data-ttu-id="26f5b-110">Una serie de [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] componentes funcionan junto con la orquestación de FRR, enrutamiento de mensajes entre los componentes FRR en [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]y entre [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] y AAS.</span><span class="sxs-lookup"><span data-stu-id="26f5b-110">A series of [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] components work together with the FRR orchestration, routing messages between the FRR components within [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)], and between [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] and SAA.</span></span> <span data-ttu-id="26f5b-111">Estos componentes se enumeran a continuación:</span><span class="sxs-lookup"><span data-stu-id="26f5b-111">These components are listed below:</span></span>  

- <span data-ttu-id="26f5b-112">Un FRR ubicación de recepción que recibe el mensaje original de la aplicación de back-end.</span><span class="sxs-lookup"><span data-stu-id="26f5b-112">An FRR receive location that receives the original message from the back-end application.</span></span>  

- <span data-ttu-id="26f5b-113">La orquestación de FRR que supervisa los mensajes entrantes y salientes y establece la correlación entre ellos.</span><span class="sxs-lookup"><span data-stu-id="26f5b-113">The FRR orchestration that monitors outgoing and incoming messages, and establishes the correlation between them.</span></span>  

- <span data-ttu-id="26f5b-114">Un FRR puerto de envío que envía el mensaje original desde [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] a AAS.</span><span class="sxs-lookup"><span data-stu-id="26f5b-114">An FRR send port that sends the original message from [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] to SAA.</span></span>  

- <span data-ttu-id="26f5b-115">El adaptador de BizTalk para MQSeries que permite la transmisión de datos entre [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] y aas (que usa colas de MQSeries).</span><span class="sxs-lookup"><span data-stu-id="26f5b-115">The BizTalk Adapter for MQSeries that enables data transmission between [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] and SAA (which uses MQSeries queues).</span></span>  

- <span data-ttu-id="26f5b-116">Un FRR ubicación de recepción que recibe los mensajes de respuesta FIN de SAA.</span><span class="sxs-lookup"><span data-stu-id="26f5b-116">An FRR receive location that receives FIN response messages from SAA.</span></span>  

- <span data-ttu-id="26f5b-117">Un conjunto de puertos de envío FRR, cada uno de ellos envía mensajes correlacionados de un tipo específico de [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] a una aplicación de back-end para el procesamiento personalizado.</span><span class="sxs-lookup"><span data-stu-id="26f5b-117">A set of FRR send ports, each of which sends correlated messages of a specific type from [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] to a back-end application for custom processing.</span></span>  

  <span data-ttu-id="26f5b-118">Para los componentes anteriores, puede agregar un controlador personalizado de back-end que procesa el mensaje original se establecieron las propiedades promocionadas de los cuales FRR.</span><span class="sxs-lookup"><span data-stu-id="26f5b-118">To the above components, you can add a back-end custom handler that processes the original message the promoted properties of which have been set by FRR.</span></span>  

## <a name="frr-process-flow"></a><span data-ttu-id="26f5b-119">Flujo del proceso de FRR</span><span class="sxs-lookup"><span data-stu-id="26f5b-119">FRR Process Flow</span></span>  
 [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]<span data-ttu-id="26f5b-120"> lleva a cabo la conciliación en el proceso siguiente:</span><span class="sxs-lookup"><span data-stu-id="26f5b-120"> performs the reconciliation in the following process:</span></span>  

1. <span data-ttu-id="26f5b-121">La aplicación back-end enruta el mensaje original a [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)].</span><span class="sxs-lookup"><span data-stu-id="26f5b-121">The back-end application routes the original message to [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)].</span></span>  

2. <span data-ttu-id="26f5b-122">Ubicación de recepción de un FRR recibe el mensaje, lo procesa en la canalización de recepción asociado y lo enruta al BizTalk MessageBox.</span><span class="sxs-lookup"><span data-stu-id="26f5b-122">An FRR receive location receives the message, processes it in the associated receive pipeline, and routes it to the BizTalk MessageBox.</span></span>  

   > [!NOTE]
   >  <span data-ttu-id="26f5b-123">Puede usar FRR junto con el [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] característica de reparación de mensajes y nuevo envío, o por separado.</span><span class="sxs-lookup"><span data-stu-id="26f5b-123">You can use FRR in conjunction with the [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] Message Repair and New Submission feature, or separately.</span></span> <span data-ttu-id="26f5b-124">Si ha instalado la reparación de mensajes y nuevo envío, puede configurar el sistema de reparación de mensajes después del paso 2.</span><span class="sxs-lookup"><span data-stu-id="26f5b-124">If you have installed Message Repair and New Submission, you can configure the system for message repair after step 2.</span></span> <span data-ttu-id="26f5b-125">La orquestación de reparación de mensajes enruta el mensaje reparado y comprobado/aprobada a BizTalk MessageBox para su posterior procesamiento de FRR.</span><span class="sxs-lookup"><span data-stu-id="26f5b-125">The message-repair orchestration routes the repaired/verified/approved message back to the BizTalk MessageBox for subsequent FRR processing.</span></span>  

3. <span data-ttu-id="26f5b-126">Si el mensaje en el cuadro de mensajes está enlazado para SWIFT y ha pasado la validación, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] activa una instancia de la orquestación de FRR.</span><span class="sxs-lookup"><span data-stu-id="26f5b-126">If the message in the MessageBox is bound for SWIFT and has passed validation, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] activates an instance of the FRR orchestration.</span></span> <span data-ttu-id="26f5b-127">La orquestación conserva una copia del mensaje saliente.</span><span class="sxs-lookup"><span data-stu-id="26f5b-127">The orchestration keeps a copy of the outgoing message.</span></span> <span data-ttu-id="26f5b-128">A continuación, se espera una respuesta de SAA, por lo que puede coincidir con el mensaje saliente a cualquier respuesta entrante en un estado activado.</span><span class="sxs-lookup"><span data-stu-id="26f5b-128">It then waits in an activated state for a response from SAA, so it can match the outgoing message to any incoming response.</span></span> <span data-ttu-id="26f5b-129">Esta instancia de la orquestación solo procesa ese mensaje saliente específico y las respuestas a ese mensaje correlacionadas.</span><span class="sxs-lookup"><span data-stu-id="26f5b-129">This instance of the orchestration only processes that specific outgoing message and any correlated responses to that message.</span></span> <span data-ttu-id="26f5b-130">Cualquier otro mensaje, incluso del mismo tipo, se procesa por otra instancia de la orquestación.</span><span class="sxs-lookup"><span data-stu-id="26f5b-130">Any other message, even of the same type, is processed by another instance of the orchestration.</span></span>  

4. <span data-ttu-id="26f5b-131">Al mismo tiempo que [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] activa la instancia de orquestación de FRR [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] enruta el mensaje al puerto de envío que envía mensajes a AAS.</span><span class="sxs-lookup"><span data-stu-id="26f5b-131">At the same time that [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] activates the FRR orchestration instance, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] routes the message to the send port that sends messages to SAA.</span></span> <span data-ttu-id="26f5b-132">La canalización de envío promueve una propiedad de identificación del mensaje y las propiedades necesarias para el procesamiento por MQSeries.</span><span class="sxs-lookup"><span data-stu-id="26f5b-132">The send pipeline promotes a message-identification property and properties required for processing by MQSeries.</span></span> <span data-ttu-id="26f5b-133">A continuación, envía el mensaje al adaptador de BizTalk para MQSeries.</span><span class="sxs-lookup"><span data-stu-id="26f5b-133">It then sends the message to the BizTalk Adapter for MQSeries.</span></span>  

5. <span data-ttu-id="26f5b-134">El adaptador de BizTalk para MQSeries transporta el mensaje a la cola de MQSeries adecuada en AAS.</span><span class="sxs-lookup"><span data-stu-id="26f5b-134">The BizTalk Adapter for MQSeries transports the message to the appropriate MQSeries queue at SAA.</span></span>  

6. <span data-ttu-id="26f5b-135">AAS genera una respuesta inmediata para el enrutamiento directamente a [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)].</span><span class="sxs-lookup"><span data-stu-id="26f5b-135">SAA generates an immediate response for routing directly back to [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)].</span></span> <span data-ttu-id="26f5b-136">AAS, a continuación, enruta el mensaje a la red SWIFT.</span><span class="sxs-lookup"><span data-stu-id="26f5b-136">SAA then routes the message to the SWIFT Network.</span></span> <span data-ttu-id="26f5b-137">La red SWIFT genera otras respuestas, lo envía a AAS para el enrutamiento a [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)].</span><span class="sxs-lookup"><span data-stu-id="26f5b-137">The SWIFT Network generates other responses, which it sends to SAA for routing back to [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)].</span></span> <span data-ttu-id="26f5b-138">AAS establece la propiedad del token de correlación para el mensaje de respuesta FIN en el valor de identificación del mensaje del mensaje original.</span><span class="sxs-lookup"><span data-stu-id="26f5b-138">SAA sets the correlation token property for the FIN response message to the message-identification value of the original message.</span></span>  

7. <span data-ttu-id="26f5b-139">Los transportes SAA hacer una copia de la respuesta FIN a través del adaptador de BizTalk para MQSeries para [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)].</span><span class="sxs-lookup"><span data-stu-id="26f5b-139">SAA transports the FIN response through the BizTalk Adapter for MQSeries back to [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)].</span></span>  

8. <span data-ttu-id="26f5b-140">Ubicación de recepción de la FRR recibe la respuesta y enruta el mensaje a través de la FRR canalización de recepción que procesa los token de correlación de la respuesta.</span><span class="sxs-lookup"><span data-stu-id="26f5b-140">The FRR receive location receives the response and routes the message through the FRR receive pipeline that processes the response's correlation token.</span></span> <span data-ttu-id="26f5b-141">A continuación, se coloca la respuesta en el BizTalk MessageBox.</span><span class="sxs-lookup"><span data-stu-id="26f5b-141">It then places the response in the BizTalk MessageBox.</span></span>  

9. <span data-ttu-id="26f5b-142">La instancia de orquestación de FRR recoge cualquier mensaje del cuadro de mensajes que tiene un token de correlación igual a la propiedad de Id. de mensaje de la copia del mensaje original.</span><span class="sxs-lookup"><span data-stu-id="26f5b-142">The FRR orchestration instance picks up any message from the MessageBox that has a correlation token equal to the message ID property of the copy of the original message.</span></span>  

10. <span data-ttu-id="26f5b-143">Si la respuesta indica que el mensaje original se ha procesado correctamente por AAS/SWIFT, la instancia de orquestación de FRR establece la propiedad A4SWIFT_Failed promocionadas de la copia del mensaje original en False y establece el BTS. El valor adecuado para la propiedad de operación.</span><span class="sxs-lookup"><span data-stu-id="26f5b-143">If the response indicates that the original message was successfully processed by SAA/SWIFT, the FRR orchestration instance sets the A4SWIFT_Failed promoted property of the copy of the original message to False, and sets the BTS.Operation property to the appropriate value.</span></span>  

11. <span data-ttu-id="26f5b-144">Si el mensaje original no se ha procesado correctamente por AAS/SWIFT, la instancia de orquestación de FRR establece el BTS. Propiedad de la operación en el valor adecuado y, a continuación, se designa el mensaje para la reparación estableciendo A4SWIFT_Failed en True y la propiedad A4SWIFT_FRRFailedReason promovido a la razón del error.</span><span class="sxs-lookup"><span data-stu-id="26f5b-144">If the original message was not successfully processed by SAA/SWIFT, the FRR orchestration instance sets the BTS.Operation property to the appropriate value, and then designates the message for repair by setting A4SWIFT_Failed to True and setting the A4SWIFT_FRRFailedReason promoted property to the reason for the failure.</span></span>  

12. <span data-ttu-id="26f5b-145">La instancia de orquestación de FRR descarta los mensajes de respuesta y, a continuación, enruta la copia del mensaje original (con las propiedades promocionadas que indica la respuesta) en el cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="26f5b-145">The FRR orchestration instance discards the response message(s), and then routes the copy of the original message (with promoted properties indicating the response) to the MessageBox.</span></span>  

13. <span data-ttu-id="26f5b-146">Uno de los puertos de envío FRR se configure para enrutar las respuestas en uno o varios controladores personalizados recoge la copia del mensaje original con las propiedades promocionadas.</span><span class="sxs-lookup"><span data-stu-id="26f5b-146">One of the FRR send ports set up to route the responses to one or more custom handlers picks up the copy of the original message with the promoted properties.</span></span>  

14. <span data-ttu-id="26f5b-147">El controlador personalizado o los controladores se suscribe a, recupera y procesa la copia del mensaje original según sea necesario para la aplicación de back-end.</span><span class="sxs-lookup"><span data-stu-id="26f5b-147">The custom handler or handlers subscribes to, retrieves, and processes the copy of the original message as required for the back-end application.</span></span>

---
title: Consideraciones para la recepción de base de datos cambio notificaciones mediante el adaptador de base de datos de Oracle | Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 206439b9-0408-4fbb-80e3-cfda2f5a89a5
caps.latest.revision: 4
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 9d7237037794168ffb136c95734582b3df95db48
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/27/2018
ms.locfileid: "37015197"
---
# <a name="considerations-for-receiving-database-change-notifications-using-the-oracle-database-adapter"></a><span data-ttu-id="1fb00-102">Consideraciones para la recepción de base de datos cambio notificaciones mediante el adaptador de base de datos de Oracle</span><span class="sxs-lookup"><span data-stu-id="1fb00-102">Considerations for Receiving Database Change Notifications Using the Oracle Database adapter</span></span>
<span data-ttu-id="1fb00-103">En este tema proporciona algunas consideraciones y procedimientos recomendados que debe tener en cuenta al usar el [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)] para recibir notificaciones de base de datos de una base de datos de Oracle.</span><span class="sxs-lookup"><span data-stu-id="1fb00-103">This topic provides some considerations and best practices that you must keep in mind while using the [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)] to receive database notifications from an Oracle database.</span></span>  
  
## <a name="considerations-while-using-the-adapter-to-receive-notifications"></a><span data-ttu-id="1fb00-104">Consideraciones al usar el adaptador para recibir notificaciones</span><span class="sxs-lookup"><span data-stu-id="1fb00-104">Considerations While Using the Adapter to Receive Notifications</span></span>  
 <span data-ttu-id="1fb00-105">Debe tener en cuenta lo siguiente al usar el [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)] para recibir notificaciones de consulta.</span><span class="sxs-lookup"><span data-stu-id="1fb00-105">You must consider the following while using the [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)] to receive query notifications.</span></span>  
  
- <span data-ttu-id="1fb00-106">El [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)] simplemente pasa en la notificación, que recibe de la base de datos de Oracle, a los clientes del adaptador.</span><span class="sxs-lookup"><span data-stu-id="1fb00-106">The [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)] simply passes on the notification, which it receives from the Oracle database, to the adapter clients.</span></span> <span data-ttu-id="1fb00-107">El adaptador no distinguir entre las notificaciones para las diferentes operaciones, es decir, el adaptador no tiene ninguna información si una notificación concreta es para una operación de inserción o una operación de actualización.</span><span class="sxs-lookup"><span data-stu-id="1fb00-107">The adapter does not distinguish between the notifications for different operations, i.e., the adapter does not have any information whether a particular notification is for an Insert operation or an Update operation.</span></span>  
  
- <span data-ttu-id="1fb00-108">El mensaje de notificación para una operación no se ve afectado por el número de registros afectados por esa operación.</span><span class="sxs-lookup"><span data-stu-id="1fb00-108">The notification message for an operation is not affected by the number of records affected by that operation.</span></span> <span data-ttu-id="1fb00-109">Por ejemplo, independientemente del número de registros insertados en una tabla de base de datos de Oracle, los clientes del adaptador de recepción solo un mensaje de notificación.</span><span class="sxs-lookup"><span data-stu-id="1fb00-109">For example, irrespective of the number of records inserted in an Oracle database table, the adapter clients receive only one notification message.</span></span>  
  
- <span data-ttu-id="1fb00-110">Se recomienda que la aplicación de cliente del adaptador contienen la lógica para interpretar el tipo de notificación recibida de la base de datos de Oracle.</span><span class="sxs-lookup"><span data-stu-id="1fb00-110">We recommend that the adapter client application contain the logic to interpret the kind of notification received from the Oracle database.</span></span> <span data-ttu-id="1fb00-111">Las aplicaciones de cliente del adaptador pueden hacerlo mediante la extracción de la información de la **\<información\>** elemento del mensaje se recibió una notificación.</span><span class="sxs-lookup"><span data-stu-id="1fb00-111">The adapter client applications can do so by extracting the information in the **\<Info\>** element of the received notification message.</span></span> <span data-ttu-id="1fb00-112">Este es un ejemplo de un mensaje de notificación que se recibió para una operación de inserción.</span><span class="sxs-lookup"><span data-stu-id="1fb00-112">Here’s an example of a notification message received for an Insert operation.</span></span>  
  
  ```  
  <?xml version="1.0" encoding="utf-8" ?>   
  <Notification xmlns="http://Microsoft.LobServices.OracleDB/2007/03/Notification/">  
    <Details>  
      <NotificationDetails>  
        <ResourceName>SCOTT.ACCOUNTACTIVITY</ResourceName>   
        <Info>1</Info>   
        <QueryId>0</QueryId>   
      </NotificationDetails>  
    </Details>  
    <Info>Insert</Info>   
    <ResourceNames>  
      <string xmlns="http://schemas.microsoft.com/2003/10/Serialization/Arrays">SCOTT.ACCOUNTACTIVITY</string>   
    </ResourceNames>  
    <Source>Data</Source>   
    <Type>Change</Type>   
  </Notification>  
  
  ```  
  
   <span data-ttu-id="1fb00-113">Tenga en cuenta el valor dentro de la **\<información\>** elemento.</span><span class="sxs-lookup"><span data-stu-id="1fb00-113">Notice the value within the **\<Info\>** element.</span></span> <span data-ttu-id="1fb00-114">Este valor proporciona información sobre la operación para la que se recibió el mensaje de notificación.</span><span class="sxs-lookup"><span data-stu-id="1fb00-114">This value provides information on the operation for which the notification message was received.</span></span> <span data-ttu-id="1fb00-115">La aplicación debe tener la funcionalidad para extraer el valor dentro de la **\<información\>** elemento y, a continuación, en función del valor, realice las tareas subsiguientes.</span><span class="sxs-lookup"><span data-stu-id="1fb00-115">Your application should have the functionality to extract the value within the **\<Info\>** element and then based on the value, perform subsequent tasks.</span></span> <span data-ttu-id="1fb00-116">El tema [de procesamiento de mensajes de notificación para completar tareas específicas en la base de datos de Oracle](../../adapters-and-accelerators/adapter-oracle-database/process-notification-messages-to-run-specific-tasks-in-oracle-db-using-biztalk.md) contiene instrucciones sobre cómo extraer el valor dentro de la **\<información\>** elemento.</span><span class="sxs-lookup"><span data-stu-id="1fb00-116">The topic [Processing Notification Messages to complete Specific Tasks in Oracle Database](../../adapters-and-accelerators/adapter-oracle-database/process-notification-messages-to-run-specific-tasks-in-oracle-db-using-biztalk.md) has instructions on how to extract the value within the **\<Info\>** element.</span></span>  
  
- <span data-ttu-id="1fb00-117">Lo ideal es que, después de la aplicación cliente recibe una notificación, debe actualizar el registro para el que ya se recibió la notificación para que las notificaciones siguientes no son del mismo registro.</span><span class="sxs-lookup"><span data-stu-id="1fb00-117">Ideally, after the client application receives a notification, it should update the record for which the notification is already received so that the subsequent notifications are not for the same record.</span></span> <span data-ttu-id="1fb00-118">Por ejemplo, considere un **ACCOUNTACTIVITY** tabla que tiene un **procesados** columna.</span><span class="sxs-lookup"><span data-stu-id="1fb00-118">For example, consider an **ACCOUNTACTIVITY** table that has a **Processed** column.</span></span> <span data-ttu-id="1fb00-119">Para todos los nuevos registros que se insertan en la **ACCOUNTACTIVITY** de tabla, el valor de la **procesados** columna siempre es ' n '.</span><span class="sxs-lookup"><span data-stu-id="1fb00-119">For all new records inserted into the **ACCOUNTACTIVITY** table, the value in the **Processed** column is always ‘n’.</span></span> <span data-ttu-id="1fb00-120">Por ejemplo, después de una operación de inserción, los registros en el **ACCOUNTACTIVITY** tabla tendrá un aspecto similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="1fb00-120">For example, after an insert operation, the records in the **ACCOUNTACTIVITY** table will look like the following:</span></span>  
  
  |<span data-ttu-id="1fb00-121">Id. de transacción de cuenta</span><span class="sxs-lookup"><span data-stu-id="1fb00-121">Account Transaction ID</span></span>|<span data-ttu-id="1fb00-122">Procesado</span><span class="sxs-lookup"><span data-stu-id="1fb00-122">Processed</span></span>|  
  |----------------------------|---------------|  
  |<span data-ttu-id="1fb00-123">10001</span><span class="sxs-lookup"><span data-stu-id="1fb00-123">10001</span></span>|<span data-ttu-id="1fb00-124">n</span><span class="sxs-lookup"><span data-stu-id="1fb00-124">n</span></span>|  
  
   <span data-ttu-id="1fb00-125">Para obtener las notificaciones para el registro recién insertado, el cliente de adaptador establecerá el **NotificationStatement** enlaza la propiedad como:</span><span class="sxs-lookup"><span data-stu-id="1fb00-125">To get notifications for the newly inserted record, the adapter client will set the **NotificationStatement** binding property as:</span></span>  
  
  ```  
  SELECT * FROM SCOTT.ACCOUNTACTIVITY WHERE PROCESSED = ‘n’  
  ```  
  
   <span data-ttu-id="1fb00-126">Después, recibir la notificación, la aplicación cliente debe establecer el valor de la **procesados** columna en 'y' para que la instrucción de notificación no funciona en el registro que ya se recibió una notificación para.</span><span class="sxs-lookup"><span data-stu-id="1fb00-126">After, receiving the notification, the client application must set the value of the **Processed** column to ‘y’ so that the notification statement does not operate on the record that was already notified for.</span></span> <span data-ttu-id="1fb00-127">Por lo tanto, para lograr esto, la aplicación cliente debe realizar una operación de actualización en el **ACCOUNTACTIVITY** tabla.</span><span class="sxs-lookup"><span data-stu-id="1fb00-127">So, to achieve this, the client application must perform an Update operation on the **ACCOUNTACTIVITY** table.</span></span> <span data-ttu-id="1fb00-128">Después de la operación de actualización, el mismo registro en el **ACCOUNTACTIVITY** tabla tendrá un aspecto similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="1fb00-128">After the Update operation, the same record in the **ACCOUNTACTIVITY** table will look like the following:</span></span>  
  
  |<span data-ttu-id="1fb00-129">Id. de transacción de cuenta</span><span class="sxs-lookup"><span data-stu-id="1fb00-129">Account Transaction ID</span></span>|<span data-ttu-id="1fb00-130">Procesado</span><span class="sxs-lookup"><span data-stu-id="1fb00-130">Processed</span></span>|  
  |----------------------------|---------------|  
  |<span data-ttu-id="1fb00-131">10001</span><span class="sxs-lookup"><span data-stu-id="1fb00-131">10001</span></span>|<span data-ttu-id="1fb00-132">y</span><span class="sxs-lookup"><span data-stu-id="1fb00-132">y</span></span>|  
  
   <span data-ttu-id="1fb00-133">Curiosamente, la operación de actualización nuevo enviará una notificación al cliente de adaptador y todo el proceso se repetirá nuevo.</span><span class="sxs-lookup"><span data-stu-id="1fb00-133">Interestingly, the Update operation will again send a notification to the adapter client and the whole process will be repeated again.</span></span> <span data-ttu-id="1fb00-134">Por lo tanto, la aplicación cliente debe tener la lógica necesaria para descartar estas notificaciones no deseadas.</span><span class="sxs-lookup"><span data-stu-id="1fb00-134">So, the client application must have the required logic to discard such unwanted notifications.</span></span>  
  
- <span data-ttu-id="1fb00-135">Si el **NotifyOnListenerStart** enlaza la propiedad es true, el adaptador enviará una notificación al cliente adaptador cada vez que se inicia la ubicación de recepción.</span><span class="sxs-lookup"><span data-stu-id="1fb00-135">If the **NotifyOnListenerStart** binding property is true, the adapter will send a notification to the adapter client every time the receive location starts.</span></span> <span data-ttu-id="1fb00-136">Para obtener más información sobre cómo usar la propiedad de enlace e interpretar el mensaje de notificación, consulte [recibir Oracle base de datos modificados notificaciones después de unos recibir desglose de las ubicaciones](../../adapters-and-accelerators/adapter-oracle-database/receive-oracle-database-change-notifications-after-a-receive-location-breakdown.md).</span><span class="sxs-lookup"><span data-stu-id="1fb00-136">For more information on how to use the binding property and interpret the notification message, see [Receiving Oracle Database Change Notifications After a Receive Location Breakdown](../../adapters-and-accelerators/adapter-oracle-database/receive-oracle-database-change-notifications-after-a-receive-location-breakdown.md).</span></span>  
  
## <a name="typical-orchestration-for-receiving-notifications"></a><span data-ttu-id="1fb00-137">Orquestación típico para recibir notificaciones</span><span class="sxs-lookup"><span data-stu-id="1fb00-137">Typical Orchestration for Receiving Notifications</span></span>  
 <span data-ttu-id="1fb00-138">En esta sección se describe el flujo típico de orquestación para recibir notificaciones mediante el [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)].</span><span class="sxs-lookup"><span data-stu-id="1fb00-138">This section outlines the typical orchestration flow for receiving notifications using the [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)].</span></span>  
  
1. <span data-ttu-id="1fb00-139">Lo primero que la orquestación debe hacer es comprobar el tipo de notificación recibida.</span><span class="sxs-lookup"><span data-stu-id="1fb00-139">The first thing that the orchestration must do is to check the kind of notification received.</span></span> <span data-ttu-id="1fb00-140">Los puntos que deben comprobarse son:</span><span class="sxs-lookup"><span data-stu-id="1fb00-140">The things to check for are:</span></span>  
  
   - <span data-ttu-id="1fb00-141">Si ha recibido la notificación para el reinicio de la ubicación de recepción.</span><span class="sxs-lookup"><span data-stu-id="1fb00-141">Whether the notification was received for the receive location restart.</span></span>  
  
   - <span data-ttu-id="1fb00-142">Si ha recibido la notificación para una operación en una tabla de base de datos, como insertar, actualizar o eliminar.</span><span class="sxs-lookup"><span data-stu-id="1fb00-142">Whether the notification was received for an operation on a database table, such as Insert, Update, or Delete.</span></span>  
  
     <span data-ttu-id="1fb00-143">La orquestación debe incluir un **expresión** forma, y en el que se recibe una consulta de xpath para decidir qué tipo de mensaje.</span><span class="sxs-lookup"><span data-stu-id="1fb00-143">The orchestration must include an **Expression** shape, and within that an xpath query, to decide what kind of message is received.</span></span>  
  
2. <span data-ttu-id="1fb00-144">Después de que el tipo de notificación está disponible, la orquestación debe incluir un bloque de decisiones para llevar a cabo acciones específicas en función del tipo de notificación recibida.</span><span class="sxs-lookup"><span data-stu-id="1fb00-144">After the notification type is available, the orchestration must include a decision block to perform specific actions based on the type of notification received.</span></span> <span data-ttu-id="1fb00-145">Para lograr esto, la orquestación debe incluir un **decidir** forma.</span><span class="sxs-lookup"><span data-stu-id="1fb00-145">To achieve this, the orchestration must include a **Decide** shape.</span></span> <span data-ttu-id="1fb00-146">El **decidir** forma consta de un **regla** bloque y un **Else** bloque.</span><span class="sxs-lookup"><span data-stu-id="1fb00-146">The **Decide** shape consists of a **Rule** block and an **Else** block.</span></span> <span data-ttu-id="1fb00-147">Dentro de la **regla** bloque, debe especificar la condición y, a continuación, incluir formas de orquestación para realizar determinadas operaciones si se cumple la condición.</span><span class="sxs-lookup"><span data-stu-id="1fb00-147">Within the **Rule** block, you must specify the condition and then include orchestration shapes to perform certain operations if the condition is met.</span></span> <span data-ttu-id="1fb00-148">Dentro de la **Else** bloque, debe incluir las formas de orquestación para realizar determinadas operaciones si la condición es *no* cumplen.</span><span class="sxs-lookup"><span data-stu-id="1fb00-148">Within the **Else** block, you must include orchestration shapes to perform certain operations if the condition is *not* met.</span></span>  
  
   <span data-ttu-id="1fb00-149">Las recomendaciones anteriores se describen en detalle en [de procesamiento de mensajes de notificación para completar tareas específicas en la base de datos de Oracle con BizTalk Server](../../adapters-and-accelerators/adapter-oracle-database/process-notification-messages-to-run-specific-tasks-in-oracle-db-using-biztalk.md).</span><span class="sxs-lookup"><span data-stu-id="1fb00-149">The preceding recommendations are described in detail in [Processing Notification Messages to complete Specific Tasks in Oracle Database using BizTalk Server](../../adapters-and-accelerators/adapter-oracle-database/process-notification-messages-to-run-specific-tasks-in-oracle-db-using-biztalk.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1fb00-150">Vea también</span><span class="sxs-lookup"><span data-stu-id="1fb00-150">See Also</span></span>  
 [<span data-ttu-id="1fb00-151">Recibir notificaciones de cambio de base de datos de Oracle con BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="1fb00-151">Receiving Oracle Database Change Notifications Using BizTalk Server</span></span>](../../adapters-and-accelerators/adapter-oracle-database/receive-oracle-database-change-notifications-using-biztalk-server.md)
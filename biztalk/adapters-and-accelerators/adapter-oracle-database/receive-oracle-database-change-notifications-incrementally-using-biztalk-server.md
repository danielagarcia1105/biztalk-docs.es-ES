---
title: Recibir notificaciones de cambio de base de datos de Oracle con BizTalk Server de forma incremental | Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 17cef39f-a1aa-4f46-993f-620008f3890d
caps.latest.revision: 9
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 61e8fbbe2644098baf963d258d3e95b94e20e8b8
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/27/2018
ms.locfileid: "37012093"
---
# <a name="receive-oracle-database-change-notifications-incrementally-using-biztalk-server"></a><span data-ttu-id="f9bd9-102">Recibir notificaciones de cambio de base de datos de Oracle incrementalmente con BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="f9bd9-102">Receive Oracle Database change notifications incrementally using BizTalk Server</span></span>
> [!IMPORTANT]
>  <span data-ttu-id="f9bd9-103">Por brevedad, este tema solo describe cómo recibir notificaciones de forma incremental.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-103">For the sake of brevity, this topic only describes how to receive notifications incrementally.</span></span> <span data-ttu-id="f9bd9-104">En escenarios empresariales, la orquestación lo ideal es que debe incluir la lógica para extraer el tipo de mensaje de notificación recibido y, a continuación, realizar las operaciones posteriores.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-104">In business scenarios, the orchestration must ideally include the logic to extract the kind of notification message received and then perform any subsequent operations.</span></span> <span data-ttu-id="f9bd9-105">En otras palabras, la orquestación se describe en este tema debe compilarse en la orquestación se describe en la parte superior [procesar los mensajes de notificación para completar tareas específicas en la base de datos de Oracle mediante BizTalk Sever](../../adapters-and-accelerators/adapter-oracle-database/process-notification-messages-to-run-specific-tasks-in-oracle-db-using-biztalk.md).</span><span class="sxs-lookup"><span data-stu-id="f9bd9-105">In other words, the orchestration described in this topic must be built on top of the orchestration described in [Process Notification Messages to complete Specific Tasks in Oracle Database using BizTalk Sever](../../adapters-and-accelerators/adapter-oracle-database/process-notification-messages-to-run-specific-tasks-in-oracle-db-using-biztalk.md).</span></span>  
  
 <span data-ttu-id="f9bd9-106">En este tema se muestra cómo configurar el [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)] para recibir mensajes de notificación de consulta incremental de Oracle.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-106">This topic demonstrates how to configure the [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)] to receive incremental query notification messages from Oracle.</span></span> <span data-ttu-id="f9bd9-107">Para mostrar notificaciones incrementales, consideramos que una tabla, ACCOUNTACTIVITY, con una columna "Procesados".</span><span class="sxs-lookup"><span data-stu-id="f9bd9-107">To demonstrate incremental notifications, we consider a table, ACCOUNTACTIVITY, with a “Processed” column.</span></span> <span data-ttu-id="f9bd9-108">Cuando se inserta un nuevo registro a esta tabla, el valor de la columna "Procesados" se establece en ' n '.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-108">When a new record is inserted to this table, the value of the “Processed” column is set to ‘n’.</span></span> <span data-ttu-id="f9bd9-109">Puede configurar el adaptador para recibir notificaciones incrementales haciendo lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="f9bd9-109">You can configure the adapter to receive incremental notifications by doing the following:</span></span>  
  
- <span data-ttu-id="f9bd9-110">Regístrese para recibir notificaciones mediante una instrucción SELECT que recupera todos los registros que tienen la columna "Procesados" como ' n '.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-110">Register for notifications using a SELECT statement that retrieves all records that have “Processed” column as ‘n’.</span></span> <span data-ttu-id="f9bd9-111">Puede hacerlo mediante la especificación de la instrucción SELECT para la **NotificationStatement** enlaza la propiedad.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-111">You can do so by specifying the SELECT statement for the **NotificationStatement** binding property.</span></span>  
  
- <span data-ttu-id="f9bd9-112">Las filas que se ha notificado para, actualice la columna "Procesada" en 'y'.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-112">For rows which have been notified for, update the “Processed” column to ‘y’.</span></span>  
  
  <span data-ttu-id="f9bd9-113">En este tema se muestra cómo crear una orquestación de BizTalk y configurar una aplicación de BizTalk para lograr esto.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-113">This topic demonstrates how to create a BizTalk orchestration and configure a BizTalk application to achieve this.</span></span>  
  
## <a name="configuring-notifications-with-the-oracle-database-adapter-binding-properties"></a><span data-ttu-id="f9bd9-114">Configuración de notificaciones con el adaptador de base de datos de Oracle propiedades de enlace</span><span class="sxs-lookup"><span data-stu-id="f9bd9-114">Configuring Notifications with the Oracle Database Adapter Binding Properties</span></span>  
 <span data-ttu-id="f9bd9-115">La siguiente tabla resume el [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)] propiedades de enlace que se utiliza para configurar la recepción de notificaciones de la base de datos de Oracle.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-115">The following table summarizes the [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)] binding properties that you use to configure receiving notifications from the Oracle database.</span></span> <span data-ttu-id="f9bd9-116">Debe especificar estas propiedades de enlace al configurar el puerto de recepción en el [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] consola de administración.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-116">You must specify these binding properties while configuring the receive port in the [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="f9bd9-117">Puede especificar estas propiedades de enlace al generar el esquema para el **notificación** operación, incluso aunque no es obligatorio.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-117">You may choose to specify these binding properties when generating the schema for the **Notification** operation, even though it is not mandatory.</span></span> <span data-ttu-id="f9bd9-118">Si lo hace, el enlace de puerto de archivos que el [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)] genera como parte de la generación de metadatos también contiene los valores especificados para las propiedades de enlace.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-118">If you do so, the port binding file that the [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)] generates as part of the metadata generation also contains the values you specify for the binding properties.</span></span> <span data-ttu-id="f9bd9-119">Más adelante puede importar este archivo de enlace en el [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] consola de administración para crear el WCF-custom o WCF-OracleDB puerto de recepción con el enlace de propiedades ya establecidas.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-119">You can later import this binding file in the [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console to create the WCF-custom or WCF-OracleDB receive port with the binding properties already set.</span></span> <span data-ttu-id="f9bd9-120">Para obtener más información acerca de cómo crear un puerto de recepción mediante el archivo de enlace, consulte [configurar un enlace de puerto físico mediante un archivo de enlace de puerto a la base de datos de Oracle](../../adapters-and-accelerators/adapter-oracle-database/configure-a-physical-port-binding-using-a-port-binding-file-to-oracle-database.md).</span><span class="sxs-lookup"><span data-stu-id="f9bd9-120">For more information about creating a receive port using the binding file, see [Configure a physical port binding using a port binding file to Oracle Database](../../adapters-and-accelerators/adapter-oracle-database/configure-a-physical-port-binding-using-a-port-binding-file-to-oracle-database.md).</span></span>  
  
|<span data-ttu-id="f9bd9-121">Propiedad de enlace</span><span class="sxs-lookup"><span data-stu-id="f9bd9-121">Binding Property</span></span>|<span data-ttu-id="f9bd9-122">Descripción</span><span class="sxs-lookup"><span data-stu-id="f9bd9-122">Description</span></span>|  
|----------------------|-----------------|  
|<span data-ttu-id="f9bd9-123">**InboundOperationType**</span><span class="sxs-lookup"><span data-stu-id="f9bd9-123">**InboundOperationType**</span></span>|<span data-ttu-id="f9bd9-124">Especifica la operación de entrada que desea realizar.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-124">Specifies the inbound operation that you want to perform.</span></span> <span data-ttu-id="f9bd9-125">Para recibir mensajes de notificación, establezca esta opción en **notificación**.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-125">To receive notification messages, set this to **Notification**.</span></span>|  
|<span data-ttu-id="f9bd9-126">**NotificationPort**</span><span class="sxs-lookup"><span data-stu-id="f9bd9-126">**NotificationPort**</span></span>|<span data-ttu-id="f9bd9-127">Especifica el número de puerto que debe abrir ODP.NET para realizar escuchas para la notificación de cambio de base de datos de base de datos de Oracle.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-127">Specifies the port number that ODP.NET must open to listen for database change notification from Oracle database.</span></span>|  
|<span data-ttu-id="f9bd9-128">**NotificationStatement**</span><span class="sxs-lookup"><span data-stu-id="f9bd9-128">**NotificationStatement**</span></span>|<span data-ttu-id="f9bd9-129">Especifica la instrucción SELECT que se usa para registrar las notificaciones de consulta.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-129">Specifies the SELECT statement used to register for query notifications.</span></span> <span data-ttu-id="f9bd9-130">El adaptador obtiene un mensaje de notificación solo cuando el conjunto de resultados para que los cambios de la instrucción SELECT especificada.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-130">The adapter gets a notification message only when the result set for the specified SELECT statement changes.</span></span>|  
|<span data-ttu-id="f9bd9-131">**NotifyOnListenerStart**</span><span class="sxs-lookup"><span data-stu-id="f9bd9-131">**NotifyOnListenerStart**</span></span>|<span data-ttu-id="f9bd9-132">Especifica si el adaptador envía una notificación a los clientes del adaptador cuando se inicia el agente de escucha.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-132">Specifies whether the adapter sends a notification to the adapter clients when the listener is started.</span></span>|  
  
 <span data-ttu-id="f9bd9-133">Para obtener una descripción más completa de estas propiedades, vea [trabajar con el adaptador de BizTalk para propiedades de enlace de base de datos de Oracle](https://msdn.microsoft.com/library/dd788467.aspx).</span><span class="sxs-lookup"><span data-stu-id="f9bd9-133">For a more complete description of these properties, see [Working with BizTalk Adapter for Oracle Database Binding Properties](https://msdn.microsoft.com/library/dd788467.aspx).</span></span> <span data-ttu-id="f9bd9-134">Para obtener una descripción completa de cómo usar el [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)] para recibir notificaciones de la base de datos de Oracle, siga leyendo.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-134">For a complete description of how to use the [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)] to receive notifications from the Oracle database, read further.</span></span>  
  
## <a name="how-this-topic-demonstrates-receiving-notification-messages"></a><span data-ttu-id="f9bd9-135">Cómo se muestra en este tema, recibir mensajes de notificación</span><span class="sxs-lookup"><span data-stu-id="f9bd9-135">How This Topic Demonstrates Receiving Notification Messages</span></span>  
 <span data-ttu-id="f9bd9-136">En este tema, para demostrar cómo el [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)] admite la recepción de mensajes de notificación de cambio de base de datos incrementales desde la base de datos de Oracle, configuraremos el adaptador para recibir notificaciones de cambios en la tabla ACCOUNTACTIVTY.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-136">In this topic, to demonstrate how the [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)] supports receiving incremental database change notification messages from the Oracle database, we will configure the adapter to receive notifications for changes to the ACCOUNTACTIVTY table.</span></span> <span data-ttu-id="f9bd9-137">Supongamos que la tabla ACCOUNTACTIVITY tiene las columnas "TID", "Cuenta" y "Procesados".</span><span class="sxs-lookup"><span data-stu-id="f9bd9-137">Let us assume that the ACCOUNTACTIVITY table has columns “TID”, “Account”, and “Processed”.</span></span> <span data-ttu-id="f9bd9-138">Cada vez que se agrega un nuevo registro, el valor de la columna "Procesados" se establece en ' n '.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-138">Whenever a new record is added, the value of the “Processed” column is set to ‘n’.</span></span> <span data-ttu-id="f9bd9-139">Por lo tanto, para obtener notificaciones incrementales tendrá que realizar las tareas siguientes como parte de la orquestación de BizTalk:</span><span class="sxs-lookup"><span data-stu-id="f9bd9-139">So, to get incremental notifications you will have to do the following tasks as part of the BizTalk orchestration:</span></span>  
  
- <span data-ttu-id="f9bd9-140">Obtener notificación para todos los registros donde "Procesados" es ' n '.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-140">Get notification for all records where “Processed” is ‘n’.</span></span> <span data-ttu-id="f9bd9-141">Puede hacerlo mediante la especificación de una instrucción SELECT como una instrucción de notificación.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-141">You can do this by specifying a SELECT statement as a notification statement.</span></span>  
  
- <span data-ttu-id="f9bd9-142">Después de recibe la notificación para un determinado registro, establezca "Procesada" en 'y'.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-142">After the notification is received for a certain record, set “Processed” to ‘y’.</span></span> <span data-ttu-id="f9bd9-143">Puede hacerlo mediante la ejecución de un procedimiento almacenado, PROCESS_RECORDS, que actualiza la columna "Procesados".</span><span class="sxs-lookup"><span data-stu-id="f9bd9-143">You can do this by executing a stored procedure, PROCESS_RECORDS, which updates the “Processed” column.</span></span>  
  
  <span data-ttu-id="f9bd9-144">Para demostrar la recepción de notificaciones incrementales, llevamos a cabo lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="f9bd9-144">To demonstrate receiving incremental notifications, we do the following:</span></span>  
  
- <span data-ttu-id="f9bd9-145">Genere el esquema para el **notificación** (operación de entrada), y **PROCESS_RECORDS** (operación saliente) en la tabla ACCOUNTACTIVITY.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-145">Generate schema for the **Notification** (inbound operation), and **PROCESS_RECORDS** (outbound operation) on the ACCOUNTACTIVITY table.</span></span>  
  
- <span data-ttu-id="f9bd9-146">Crear una orquestación que incluye lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="f9bd9-146">Create an orchestration that has the following:</span></span>  
  
  -   <span data-ttu-id="f9bd9-147">Una ubicación de recepción para recibir mensajes de notificación.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-147">A receive location to receive notification messages.</span></span> <span data-ttu-id="f9bd9-148">Puede configurar para la notificación mediante la especificación de la instrucción SELECT como:</span><span class="sxs-lookup"><span data-stu-id="f9bd9-148">You can configure for notification by specifying the SELECT statement as:</span></span>  
  
      ```  
      SELECT TID,ACCOUNT,PROCESSED FROM SCOTT.ACCOUNTACTIVITY WHERE PROCESSED = ‘n’  
      ```  
  
      > [!NOTE]
      >  <span data-ttu-id="f9bd9-149">Debe especificar el nombre de tabla, junto con el nombre del esquema.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-149">You must specify the table name along with the schema name.</span></span> <span data-ttu-id="f9bd9-150">Por ejemplo, `SCOTT.ACCOUNTACTIVITY`.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-150">For example, `SCOTT.ACCOUNTACTIVITY`.</span></span>  
  
  -   <span data-ttu-id="f9bd9-151">Un puerto de envío para actualizar las filas que ya se ha enviado notificaciones.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-151">A send port to update the rows for which notification has already been sent.</span></span> <span data-ttu-id="f9bd9-152">Se ejecutará el procedimiento almacenado de PROCESS_RECORDS en este puerto para establecer el valor de columna "Procesada" en 'y' para los registros para el que se recibe la notificación.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-152">You will execute the PROCESS_RECORDS stored procedure on this port to set the value of “Processed” column to ‘y’ for the records for which notification is received.</span></span>  
  
       <span data-ttu-id="f9bd9-153">Tenga en cuenta que esta operación debe ejecutarse después de recibir la notificación de mensajes para que se actualicen las filas procesadas.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-153">Note that this operation must be executed after receiving the notification messages so that the processed rows are updated.</span></span> <span data-ttu-id="f9bd9-154">Para hacer la distancia con la sobrecarga de espera para obtener la respuesta de notificación y, a continuación, quitar manualmente un mensaje de solicitud para ejecutar el procedimiento PROCESS_RECORDS, generará el mensaje de solicitud para el procedimiento PROCESS_RECORDS dentro de la propia orquestación.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-154">To do away with the overhead of waiting to get the notification response and then manually dropping a request message to execute the PROCESS_RECORDS procedure, you will generate the request message for PROCESS_RECORDS procedure within the orchestration itself.</span></span> <span data-ttu-id="f9bd9-155">Puede hacerlo mediante el **construir mensaje** forma dentro de una orquestación.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-155">You can do so by using the **Construct Message** shape within an orchestration.</span></span>  
  
## <a name="how-to-receive-notification-messages-from-the-oracle-database"></a><span data-ttu-id="f9bd9-156">Cómo recibir mensajes de notificación de la base de datos de Oracle</span><span class="sxs-lookup"><span data-stu-id="f9bd9-156">How to Receive Notification Messages from the Oracle database</span></span>  
 <span data-ttu-id="f9bd9-157">Realizar una operación en la base de datos de Oracle mediante [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)] con [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] conlleva las tareas de procedimientos se describe en [bloques de creación para desarrollar aplicaciones de BizTalk con la base de datos de Oracle](../../adapters-and-accelerators/adapter-oracle-database/building-blocks-to-develop-biztalk-applications-with-oracle-database.md).</span><span class="sxs-lookup"><span data-stu-id="f9bd9-157">Performing an operation on the Oracle database using [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)] with [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] involves the procedural tasks described in [Building blocks to develop BizTalk Applications with Oracle Database](../../adapters-and-accelerators/adapter-oracle-database/building-blocks-to-develop-biztalk-applications-with-oracle-database.md).</span></span> <span data-ttu-id="f9bd9-158">Para configurar el adaptador para recibir mensajes de notificación, estas tareas son:</span><span class="sxs-lookup"><span data-stu-id="f9bd9-158">To configure the adapter to receive notification messages, these tasks are:</span></span>  
  
1. <span data-ttu-id="f9bd9-159">Crear un proyecto de BizTalk y, a continuación, genere el esquema para el **notificación** (operación de entrada) y **PROCESS_RECORDS** procedimiento (operación saliente) en la tabla ACCOUNTACTIVITY.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-159">Create a BizTalk project, and then generate schema for the **Notification** (inbound operation) and **PROCESS_RECORDS** procedure (outbound operation) on the ACCOUNTACTIVITY table.</span></span> <span data-ttu-id="f9bd9-160">Si lo desea, puede especificar valores para el **InboundOperationType**, **NotificationPort**, y **NotificationStatement** propiedades de enlace.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-160">Optionally, you can specify values for the **InboundOperationType**, **NotificationPort**, and **NotificationStatement** binding properties.</span></span>  
  
2. <span data-ttu-id="f9bd9-161">Cree un mensaje en el proyecto de BizTalk para recibir notificaciones de la base de datos de Oracle.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-161">Create a message in the BizTalk project for receiving notification from the Oracle database.</span></span>  
  
3. <span data-ttu-id="f9bd9-162">Crear mensajes en el proyecto de BizTalk para ejecutar el procedimiento almacenado de PROCESS_RECORDS y recibir mensajes de respuesta.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-162">Create messages in the BizTalk project for executing the PROCESS_RECORDS stored procedure and receiving response messages.</span></span>  
  
4. <span data-ttu-id="f9bd9-163">Crear una orquestación que hace lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="f9bd9-163">Create an orchestration that does the following:</span></span>  
  
   -   <span data-ttu-id="f9bd9-164">Recibe el mensaje de notificación de la base de datos de Oracle.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-164">Receives notification message from the Oracle database.</span></span>  
  
   -   <span data-ttu-id="f9bd9-165">Crea un mensaje para ejecutar el procedimiento PROCESS_RECORDS.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-165">Creates a message to execute the PROCESS_RECORDS procedure.</span></span>  
  
   -   <span data-ttu-id="f9bd9-166">Este mensaje se envía a la base de datos de Oracle para seleccionar y actualizar los registros y recibir una respuesta.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-166">Sends this message to the Oracle database to select and update the records and receive a response.</span></span>  
  
5. <span data-ttu-id="f9bd9-167">Compile e implemente el proyecto de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-167">Build and deploy the BizTalk project.</span></span>  
  
6. <span data-ttu-id="f9bd9-168">Configurar la aplicación mediante la creación física de envío y puertos de recepción de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-168">Configure the BizTalk application by creating physical send and receive ports.</span></span>  
  
   > [!NOTE]
   >  <span data-ttu-id="f9bd9-169">Para las operaciones de entrada, como recibir mensajes de notificación, sólo debe configurar un unidireccional WCF-Custom o puerto de recepción WCF-OracleDB.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-169">For inbound operations, like receiving notification messages, you must only configure a one-way WCF-Custom or WCF-OracleDB receive port.</span></span> <span data-ttu-id="f9bd9-170">Bidireccional recibir los puertos no se admiten operaciones de entrada.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-170">Two-way receive ports are not supported for inbound operations.</span></span>  
  
7. <span data-ttu-id="f9bd9-171">Inicie la aplicación de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-171">Start the BizTalk application.</span></span>  
  
   <span data-ttu-id="f9bd9-172">Este tema proporciona instrucciones para realizar estas tareas.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-172">This topic provides instructions to perform these tasks.</span></span>  
  
## <a name="generating-schema"></a><span data-ttu-id="f9bd9-173">Generar el esquema</span><span class="sxs-lookup"><span data-stu-id="f9bd9-173">Generating Schema</span></span>  
 <span data-ttu-id="f9bd9-174">Debe generar el esquema para el **notificación** operación y **PROCESS_RECORDS** procedimiento.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-174">You must generate the schema for the **Notification** operation and **PROCESS_RECORDS** procedure.</span></span> <span data-ttu-id="f9bd9-175">Consulte [recuperar metadatos para operaciones de Oracle en Visual Studio](../../adapters-and-accelerators/adapter-oracle-database/get-metadata-for-oracle-database-operations-in-visual-studio.md) para obtener más información acerca de cómo generar el esquema.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-175">See [Retrieve metadata for Oracle operations in Visual Studio](../../adapters-and-accelerators/adapter-oracle-database/get-metadata-for-oracle-database-operations-in-visual-studio.md) for more information about how to generate the schema.</span></span> <span data-ttu-id="f9bd9-176">Realice las tareas siguientes al generar el esquema.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-176">Perform the following tasks when generating the schema.</span></span> <span data-ttu-id="f9bd9-177">Omitir el primer paso si no desea especificar las propiedades de enlace en tiempo de diseño.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-177">Skip the first step if you do not want to specify the binding properties at design-time.</span></span>  
  
1.  <span data-ttu-id="f9bd9-178">Especifique un valor para **InboundOperationType**, **NotificationPort**, y **NotificationStatement** al generar el esquema de propiedades de enlace.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-178">Specify a value for **InboundOperationType**, **NotificationPort**, and **NotificationStatement** binding properties while generating the schema.</span></span> <span data-ttu-id="f9bd9-179">Para obtener más información acerca de esta propiedad de enlace, consulte [trabajar con el adaptador de BizTalk para propiedades de enlace de base de datos de Oracle](https://msdn.microsoft.com/library/dd788467.aspx).</span><span class="sxs-lookup"><span data-stu-id="f9bd9-179">For more information about this binding property, see [Working with BizTalk Adapter for Oracle Database Binding Properties](https://msdn.microsoft.com/library/dd788467.aspx).</span></span> <span data-ttu-id="f9bd9-180">Para obtener instrucciones sobre cómo especificar las propiedades de enlace, consulte [especificar propiedades de enlace](https://msdn.microsoft.com/library/dd788420.aspx).</span><span class="sxs-lookup"><span data-stu-id="f9bd9-180">For instructions on how to specify binding properties, see [Specifying Binding Properties](https://msdn.microsoft.com/library/dd788420.aspx).</span></span>  
  
2.  <span data-ttu-id="f9bd9-181">Seleccione el tipo de contrato **(operaciones de entrada) de servicio**.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-181">Select the contract type as **Service (Inbound operations)**.</span></span>  
  
3.  <span data-ttu-id="f9bd9-182">Genere el esquema para el **notificación** operación.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-182">Generate schema for the **Notification** operation.</span></span>  
  
4.  <span data-ttu-id="f9bd9-183">Seleccione el tipo de contrato **Client (Outbound operations)**.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-183">Select the contract type as **Client (Outbound operations)**.</span></span>  
  
5.  <span data-ttu-id="f9bd9-184">Genere el esquema para el **PROCESS_RECORDS** procedimiento.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-184">Generate schema for the **PROCESS_RECORDS** procedure.</span></span> <span data-ttu-id="f9bd9-185">Este procedimiento está disponible en el **ACCOUNT_PKG** paquete.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-185">This procedure is available under the **ACCOUNT_PKG** package.</span></span>  
  
## <a name="defining-messages-and-message-types"></a><span data-ttu-id="f9bd9-186">Definición de los mensajes y tipos de mensaje</span><span class="sxs-lookup"><span data-stu-id="f9bd9-186">Defining Messages and Message Types</span></span>  
 <span data-ttu-id="f9bd9-187">El esquema que ha generado anteriormente describe los "tipos" necesarios para los mensajes en la orquestación.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-187">The schema that you generated earlier describes the "types" required for the messages in the orchestration.</span></span> <span data-ttu-id="f9bd9-188">Un mensaje suele ser una variable, el tipo para el que está definido por el esquema correspondiente.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-188">A message is typically a variable, the type for which is defined by the corresponding schema.</span></span> <span data-ttu-id="f9bd9-189">Una vez que se genera el esquema, debe vincularlo a los mensajes desde la vista de orquestación de BizTalk del proyecto.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-189">Once the schema is generated, you must link it to the messages from the Orchestration view of the BizTalk project.</span></span>  
  
 <span data-ttu-id="f9bd9-190">Este tema, debe crear tres mensajes: uno para recibir notificaciones de la base de datos de Oracle, uno para ejecutar el procedimiento PROCESS_RECORDS y otro para recibir la respuesta para el procedimiento.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-190">For this topic, you must create three messages—one to receive notifications from the Oracle database, one to execute the PROCESS_RECORDS procedure, and one to receive the response for the procedure.</span></span>  
  
 <span data-ttu-id="f9bd9-191">Realice los pasos siguientes para crear mensajes y vincularlos a esquema.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-191">Perform the following steps to create messages and link them to schema.</span></span>  
  
#### <a name="to-create-messages-and-link-to-schema"></a><span data-ttu-id="f9bd9-192">Para crear mensajes y vínculo a esquema</span><span class="sxs-lookup"><span data-stu-id="f9bd9-192">To create messages and link to schema</span></span>  
  
1.  <span data-ttu-id="f9bd9-193">Agregar una orquestación al proyecto de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-193">Add an orchestration to the BizTalk project.</span></span> <span data-ttu-id="f9bd9-194">En el Explorador de soluciones, haga clic en el nombre del proyecto de BizTalk, seleccione **agregar**y, a continuación, haga clic en **nuevo elemento**.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-194">From the Solution Explorer, right-click the BizTalk project name, point to **Add**, and then click **New Item**.</span></span> <span data-ttu-id="f9bd9-195">Escriba un nombre para la orquestación de BizTalk y, a continuación, haga clic en **agregar**.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-195">Type a name for the BizTalk orchestration and then click **Add**.</span></span>  
  
2.  <span data-ttu-id="f9bd9-196">Abra la ventana Vista orquestación del proyecto de BizTalk, si aún no está abierto.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-196">Open the orchestration view window of the BizTalk project, if it is not already open.</span></span> <span data-ttu-id="f9bd9-197">Haga clic en **vista**, apunte a **Other Windows**y, a continuación, haga clic en **Vista orquestación**.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-197">Click **View**, point to **Other Windows**, and then click **Orchestration View**.</span></span>  
  
3.  <span data-ttu-id="f9bd9-198">En el **Vista orquestación**, haga clic en **mensajes**y, a continuación, haga clic en **nuevo mensaje**.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-198">In the **Orchestration View**, right-click **Messages**, and then click **New Message**.</span></span>  
  
4.  <span data-ttu-id="f9bd9-199">Haga clic en el mensaje recién creado y, a continuación, seleccione **ventana propiedades**.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-199">Right-click the newly created message, and then select **Properties Window**.</span></span>  
  
5.  <span data-ttu-id="f9bd9-200">En el **propiedades** panel **Message_1**, realice lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="f9bd9-200">In the **Properties** pane for **Message_1**, do the following:</span></span>  
  
    |<span data-ttu-id="f9bd9-201">Use</span><span class="sxs-lookup"><span data-stu-id="f9bd9-201">Use this</span></span>|<span data-ttu-id="f9bd9-202">Para</span><span class="sxs-lookup"><span data-stu-id="f9bd9-202">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="f9bd9-203">Identificador</span><span class="sxs-lookup"><span data-stu-id="f9bd9-203">Identifier</span></span>|<span data-ttu-id="f9bd9-204">Tipo `NotifyReceive`.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-204">Type `NotifyReceive`.</span></span>|  
    |<span data-ttu-id="f9bd9-205">Tipo de mensaje</span><span class="sxs-lookup"><span data-stu-id="f9bd9-205">Message Type</span></span>|<span data-ttu-id="f9bd9-206">En la lista desplegable, expanda **esquemas**y seleccione *OracleNotifyIncremental.OracleDBBinding.Notification*, donde *OracleNotifyIncremental* es el nombre de el proyecto de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-206">From the drop-down list, expand **Schemas**, and select *OracleNotifyIncremental.OracleDBBinding.Notification*, where *OracleNotifyIncremental* is the name of your BizTalk project.</span></span> <span data-ttu-id="f9bd9-207">*OracleDBBinding* es el esquema generado para el **notificación** operación.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-207">*OracleDBBinding* is the schema generated for the **Notification** operation.</span></span>|  
  
6.  <span data-ttu-id="f9bd9-208">Repita el paso 3 para crear dos nuevos mensajes.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-208">Repeat step 3 to create two new messages.</span></span> <span data-ttu-id="f9bd9-209">En el **propiedades** panel para el nuevo mensaje, haga lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="f9bd9-209">In the **Properties** pane for the new message, do the following:</span></span>  
  
    |<span data-ttu-id="f9bd9-210">Identificador de conjunto para</span><span class="sxs-lookup"><span data-stu-id="f9bd9-210">Set Identifier to</span></span>|<span data-ttu-id="f9bd9-211">Establecer el tipo de mensaje en</span><span class="sxs-lookup"><span data-stu-id="f9bd9-211">Set Message Type to</span></span>|  
    |-----------------------|-------------------------|  
    |<span data-ttu-id="f9bd9-212">Procedimiento</span><span class="sxs-lookup"><span data-stu-id="f9bd9-212">Procedure</span></span>|<span data-ttu-id="f9bd9-213">*OracleNotifyIncremental.OracleDBBinding1.PROCESS_RECORDS*, donde *OracleDBBinding1* es el esquema generado para el **PROCESS_RECORDS** procedimiento.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-213">*OracleNotifyIncremental.OracleDBBinding1.PROCESS_RECORDS*, where  *OracleDBBinding1* is the schema generated for the **PROCESS_RECORDS** procedure.</span></span>|  
    |<span data-ttu-id="f9bd9-214">ProcedureResponse</span><span class="sxs-lookup"><span data-stu-id="f9bd9-214">ProcedureResponse</span></span>|<span data-ttu-id="f9bd9-215">*OracleNotifyIncremental.OracleDBBinding1.PROCESS_RECORDSResponse*</span><span class="sxs-lookup"><span data-stu-id="f9bd9-215">*OracleNotifyIncremental.OracleDBBinding1.PROCESS_RECORDSResponse*</span></span>|  
  
## <a name="setting-up-the-orchestration"></a><span data-ttu-id="f9bd9-216">Configuración de la orquestación</span><span class="sxs-lookup"><span data-stu-id="f9bd9-216">Setting up the Orchestration</span></span>  
 <span data-ttu-id="f9bd9-217">Debe crear una orquestación de BizTalk para utilizar [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] para recibir mensajes de notificación de la base de datos de Oracle y, a continuación, actualizar las filas para el que se recibió la notificación.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-217">You must create a BizTalk orchestration to use [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] for receiving notification messages from the Oracle database and then updating the rows for which notification was received.</span></span> <span data-ttu-id="f9bd9-218">En esta orquestación, el adaptador recibe el mensaje de notificación basado en la instrucción SELECT especificada para el **NotificationStatement** enlaza la propiedad.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-218">In this orchestration, the adapter receives the notification message based on the SELECT statement specified for the **NotificationStatement** binding property.</span></span> <span data-ttu-id="f9bd9-219">El mensaje de notificación se recibe en una ubicación de archivo.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-219">The notification message is received at a FILE location.</span></span> <span data-ttu-id="f9bd9-220">Una vez que se recibe la respuesta, la orquestación construye un mensaje para invocar el procedimiento PROCESS_RECORDS, que actualiza las filas para el que se recibe la notificación.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-220">Once the response is received, the orchestration constructs a message to invoke the PROCESS_RECORDS procedure, which updates the rows for which notification is received.</span></span> <span data-ttu-id="f9bd9-221">También se recibe la respuesta para este mensaje en la misma ubicación de archivo.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-221">The response for this message is also received at the same FILE location.</span></span>  
  
 <span data-ttu-id="f9bd9-222">Por lo tanto, la orquestación debe contener lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="f9bd9-222">So, your orchestration must contain the following:</span></span>  
  
- <span data-ttu-id="f9bd9-223">Un unidireccionales WCF-Custom o WCF-OracleDB puerto de recepción para recibir mensajes de notificación.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-223">A one-way WCF-Custom or WCF-OracleDB receive port to receive notification messages.</span></span>  
  
- <span data-ttu-id="f9bd9-224">Un bidireccional WCF-Custom o WCF-OracleDB puerto de envío para enviar mensajes al ejecutar el procedimiento PROCESS_RECORDS.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-224">A two-way WCF-Custom or WCF-OracleDB send port to send messages to execute the PROCESS_RECORDS procedure.</span></span>  
  
- <span data-ttu-id="f9bd9-225">Un **construir mensaje** forma para construir mensajes, para ejecutar el procedimiento PROCESS_RECORDS, dentro de la orquestación.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-225">A **Construct Message** shape to construct messages, to execute PROCESS_RECORDS procedure, within the orchestration.</span></span>  
  
- <span data-ttu-id="f9bd9-226">Un archivo de puerto de envío para guardar el mensaje de notificación y la respuesta para el procedimiento PROCESS_RECORDS.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-226">A FILE send port to save the notification message and the response for the PROCESS_RECORDS procedure.</span></span>  
  
- <span data-ttu-id="f9bd9-227">Formas de envío y recepción.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-227">Receive and send shapes.</span></span>  
  
  <span data-ttu-id="f9bd9-228">Una orquestación de ejemplo es similar al siguiente.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-228">A sample orchestration resembles the following.</span></span>  
  
  <span data-ttu-id="f9bd9-229">![Orquestación para recibir notificaciones de Oracle](../../adapters-and-accelerators/adapter-oracle-database/media/cef49414-490a-4bd5-a32d-b3f4cde5950a.gif "cef49414-490a-4bd5-a32d-b3f4cde5950a")</span><span class="sxs-lookup"><span data-stu-id="f9bd9-229">![Orchestration to receive notifications from Oracle](../../adapters-and-accelerators/adapter-oracle-database/media/cef49414-490a-4bd5-a32d-b3f4cde5950a.gif "cef49414-490a-4bd5-a32d-b3f4cde5950a")</span></span>  
  
### <a name="adding-message-shapes"></a><span data-ttu-id="f9bd9-230">Agregar formas de mensaje</span><span class="sxs-lookup"><span data-stu-id="f9bd9-230">Adding Message Shapes</span></span>  
 <span data-ttu-id="f9bd9-231">Asegúrese de que especificar las siguientes propiedades para cada una de las formas de mensaje.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-231">Make sure you specify the following properties for each of the message shapes.</span></span> <span data-ttu-id="f9bd9-232">Los nombres que aparecen en la columna de forma son los nombres de las formas de mensaje como se muestra en la orquestación simplemente mencionadas.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-232">The names listed in the Shape column are the names of the message shapes as displayed in the just-mentioned orchestration.</span></span>  
  
|<span data-ttu-id="f9bd9-233">Forma</span><span class="sxs-lookup"><span data-stu-id="f9bd9-233">Shape</span></span>|<span data-ttu-id="f9bd9-234">Tipo de forma</span><span class="sxs-lookup"><span data-stu-id="f9bd9-234">Shape Type</span></span>|<span data-ttu-id="f9bd9-235">Propiedades</span><span class="sxs-lookup"><span data-stu-id="f9bd9-235">Properties</span></span>|  
|-----------|----------------|----------------|  
|<span data-ttu-id="f9bd9-236">ReceiveNotification</span><span class="sxs-lookup"><span data-stu-id="f9bd9-236">ReceiveNotification</span></span>|<span data-ttu-id="f9bd9-237">Receive</span><span class="sxs-lookup"><span data-stu-id="f9bd9-237">Receive</span></span>|<span data-ttu-id="f9bd9-238">-Establecer **nombre** a *ReceiveNotification*</span><span class="sxs-lookup"><span data-stu-id="f9bd9-238">- Set **Name** to *ReceiveNotification*</span></span><br /><br /> <span data-ttu-id="f9bd9-239">-Establecer **activar** a *True*</span><span class="sxs-lookup"><span data-stu-id="f9bd9-239">- Set **Activate** to *True*</span></span>|  
|<span data-ttu-id="f9bd9-240">SaveNotification</span><span class="sxs-lookup"><span data-stu-id="f9bd9-240">SaveNotification</span></span>|<span data-ttu-id="f9bd9-241">Send</span><span class="sxs-lookup"><span data-stu-id="f9bd9-241">Send</span></span>|<span data-ttu-id="f9bd9-242">-Establecer **nombre** a *SaveNotification*</span><span class="sxs-lookup"><span data-stu-id="f9bd9-242">- Set **Name** to *SaveNotification*</span></span>|  
|<span data-ttu-id="f9bd9-243">SendProcMessage</span><span class="sxs-lookup"><span data-stu-id="f9bd9-243">SendProcMessage</span></span>|<span data-ttu-id="f9bd9-244">Send</span><span class="sxs-lookup"><span data-stu-id="f9bd9-244">Send</span></span>|<span data-ttu-id="f9bd9-245">-Establecer **nombre** a *SendProcMessage*</span><span class="sxs-lookup"><span data-stu-id="f9bd9-245">- Set **Name** to *SendProcMessage*</span></span>|  
|<span data-ttu-id="f9bd9-246">ReceiveProcResponse</span><span class="sxs-lookup"><span data-stu-id="f9bd9-246">ReceiveProcResponse</span></span>|<span data-ttu-id="f9bd9-247">Receive</span><span class="sxs-lookup"><span data-stu-id="f9bd9-247">Receive</span></span>|<span data-ttu-id="f9bd9-248">-Establecer **nombre** a *ReceiveProcResponse*</span><span class="sxs-lookup"><span data-stu-id="f9bd9-248">- Set **Name** to *ReceiveProcResponse*</span></span>|  
|<span data-ttu-id="f9bd9-249">SaveProcResponse</span><span class="sxs-lookup"><span data-stu-id="f9bd9-249">SaveProcResponse</span></span>|<span data-ttu-id="f9bd9-250">Send</span><span class="sxs-lookup"><span data-stu-id="f9bd9-250">Send</span></span>|<span data-ttu-id="f9bd9-251">-Establecer **nombre** a *SaveProcResponse*</span><span class="sxs-lookup"><span data-stu-id="f9bd9-251">- Set **Name** to *SaveProcResponse*</span></span>|  
  
### <a name="adding-construct-message-shape"></a><span data-ttu-id="f9bd9-252">Adición de la forma construir mensaje</span><span class="sxs-lookup"><span data-stu-id="f9bd9-252">Adding Construct Message Shape</span></span>  
 <span data-ttu-id="f9bd9-253">Puede usar el **construir mensaje** forma para generar un mensaje de solicitud dentro de la orquestación para ejecutar el procedimiento PROCESS_RECORDS.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-253">You can use the **Construct Message** shape to generate a request message within the orchestration to execute the PROCESS_RECORDS procedure.</span></span> <span data-ttu-id="f9bd9-254">Para ello, debe agregar un **construir mensaje** forma y dentro de ese un **asignación de mensajes** forma a la orquestación.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-254">To do so, you must add a **Construct Message** shape and within that a **Message Assignment** shape to your orchestration.</span></span> <span data-ttu-id="f9bd9-255">En este ejemplo, el **asignación de mensajes** forma invoca el código que genera un mensaje que se envía a la base de datos de Oracle para ejecutar el procedimiento.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-255">For this example, the **Message Assignment** shape invokes code that generates a message that is sent to the Oracle database to execute the procedure.</span></span> <span data-ttu-id="f9bd9-256">El **asignación de mensajes** forma también establece la acción para el mensaje se envíe a la base de datos de Oracle.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-256">The **Message Assignment** shape also sets the action for the message to be sent to the Oracle database.</span></span>  
  
 <span data-ttu-id="f9bd9-257">Para la forma construir mensaje, establezca la **mensaje construido** propiedad **procedimiento**.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-257">For the construct message shape, set the **Message Constructed** property to **Procedure**.</span></span>  
  
 <span data-ttu-id="f9bd9-258">El código para generar la respuesta podría ser parte de la misma solución de Visual Studio que el proyecto de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-258">The code to generate the response could be part of the same Visual Studio solution as your BizTalk project.</span></span> <span data-ttu-id="f9bd9-259">Un código de ejemplo para generar un mensaje de respuesta tiene este aspecto.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-259">A sample code for generating a response message looks like this.</span></span>  
  
```  
namespace SampleMessageCreator  
{  
    public class SampleMessageCreator  
    {  
        private static XmlDocument Message;  
        private static string XmlFileLocation;  
        private static string ResponseDoc;  
  
        public static XmlDocument XMLMessageCreator()  
        {  
            XmlFileLocation = "C:\\TestLocation\\MessageIn";  
            try  
            {  
                ResponseDoc = (Directory.GetFiles(XmlFileLocation, "*.xml", SearchOption.TopDirectoryOnly))[0];  
            }  
            catch (Exception ex)  
            {  
                Console.WriteLine("Trying to get XML from: " + XmlFileLocation);  
                Console.WriteLine("EXCEPTION: " + ex.ToString());  
                throw ex;  
            }  
            //Create Message From XML  
            Message = new XmlDocument();  
            Message.PreserveWhitespace = true;  
            Message.Load(ResponseDoc);  
            return Message;  
        }   
    }  
}  
```  
  
 <span data-ttu-id="f9bd9-260">Para que el fragmento de código anterior para que pueda generar un mensaje de solicitud, debe tener un mensaje de solicitud XML (para el procedimiento PROCESS_RECORDS) en la ubicación especificada para el `XmlFileLocation` variable.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-260">For the above code excerpt to be able to generate a request message, you must have an XML request message (for the PROCESS_RECORDS procedure) in the location specified for the `XmlFileLocation` variable.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="f9bd9-261">Después de compilar el proyecto, se crearán MessageCreator.dll en el directorio del proyecto.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-261">After you build the project, MessageCreator.dll will be created in the project directory.</span></span> <span data-ttu-id="f9bd9-262">Debe agregar este archivo DLL a la caché de ensamblados global (GAC).</span><span class="sxs-lookup"><span data-stu-id="f9bd9-262">You must add this DLL to the global assembly cache (GAC).</span></span> <span data-ttu-id="f9bd9-263">Además, debe agregar el MessageCreator.dll como referencia en el proyecto de BizTalk.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-263">Also, you must add the MessageCreator.dll as a reference in the BizTalk project.</span></span>  
  
 <span data-ttu-id="f9bd9-264">Agregue la siguiente expresión para invocar este código desde el **asignación de mensajes** forma y para establecer la acción para el mensaje.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-264">Add the following expression to invoke this code from the **Message Assignment** shape and to set the action for message.</span></span> <span data-ttu-id="f9bd9-265">Para agregar una expresión, haga doble clic en el **asignación de mensajes** forma para abrir el Editor de expresiones.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-265">To add an expression, double-click the **Message Assignment** shape to open the Expression Editor.</span></span>  
  
```  
Procedure = SampleMessageCreator.SampleMessageCreator.XMLMessageCreator();  
Procedure(WCF.Action) = "http://Microsoft.LobServices.OracleDB/2007/03/SCOTT/Package/ACCOUNT_PKG/PROCESS_RECORDS";  
```  
  
### <a name="adding-ports"></a><span data-ttu-id="f9bd9-266">Agregar puertos</span><span class="sxs-lookup"><span data-stu-id="f9bd9-266">Adding Ports</span></span>  
 <span data-ttu-id="f9bd9-267">Asegúrese de que especificar las siguientes propiedades para cada uno de los puertos lógicos.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-267">Make sure you specify the following properties for each of the logical ports.</span></span> <span data-ttu-id="f9bd9-268">Los nombres que aparecen en la columna puerto son los nombres de los puertos tal como se muestra en la orquestación.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-268">The names listed in the Port column are the names of the ports as displayed in the orchestration.</span></span>  
  
|<span data-ttu-id="f9bd9-269">Puerto</span><span class="sxs-lookup"><span data-stu-id="f9bd9-269">Port</span></span>|<span data-ttu-id="f9bd9-270">Propiedades</span><span class="sxs-lookup"><span data-stu-id="f9bd9-270">Properties</span></span>|  
|----------|----------------|  
|<span data-ttu-id="f9bd9-271">OracleNotifyPort</span><span class="sxs-lookup"><span data-stu-id="f9bd9-271">OracleNotifyPort</span></span>|<span data-ttu-id="f9bd9-272">-Establecer **identificador** a *OracleNotifyPort*</span><span class="sxs-lookup"><span data-stu-id="f9bd9-272">- Set **Identifier** to *OracleNotifyPort*</span></span><br /><br /> <span data-ttu-id="f9bd9-273">-Establecer **tipo** a *OracleNotifyPortType*</span><span class="sxs-lookup"><span data-stu-id="f9bd9-273">- Set **Type** to *OracleNotifyPortType*</span></span><br /><br /> <span data-ttu-id="f9bd9-274">-Establecer **patrón de comunicación** a *unidireccional*</span><span class="sxs-lookup"><span data-stu-id="f9bd9-274">- Set **Communication Pattern** to *One-Way*</span></span><br /><br /> <span data-ttu-id="f9bd9-275">-Establecer **dirección de comunicación** a *de recepción*</span><span class="sxs-lookup"><span data-stu-id="f9bd9-275">- Set **Communication Direction** to *Receive*</span></span>|  
|<span data-ttu-id="f9bd9-276">SaveMessagePort</span><span class="sxs-lookup"><span data-stu-id="f9bd9-276">SaveMessagePort</span></span>|<span data-ttu-id="f9bd9-277">-Establecer **identificador** a *SaveMessagePort*</span><span class="sxs-lookup"><span data-stu-id="f9bd9-277">- Set **Identifier** to *SaveMessagePort*</span></span><br /><br /> <span data-ttu-id="f9bd9-278">-Establecer **tipo** a *SaveMessagePortType*</span><span class="sxs-lookup"><span data-stu-id="f9bd9-278">- Set **Type** to *SaveMessagePortType*</span></span><br /><br /> <span data-ttu-id="f9bd9-279">-Establecer **patrón de comunicación** a *unidireccional*</span><span class="sxs-lookup"><span data-stu-id="f9bd9-279">- Set **Communication Pattern** to *One-Way*</span></span><br /><br /> <span data-ttu-id="f9bd9-280">-Establecer **dirección de comunicación** a *enviar*</span><span class="sxs-lookup"><span data-stu-id="f9bd9-280">- Set **Communication Direction** to *Send*</span></span><br /><br /> <span data-ttu-id="f9bd9-281">-Creación de una operación *Notify*.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-281">- Create an operation *Notify*.</span></span> <span data-ttu-id="f9bd9-282">Esta operación se usa para los mensajes de notificación.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-282">This operation is used for notification messages.</span></span><br /><br /> <span data-ttu-id="f9bd9-283">-Creación de una operación *procedimiento*.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-283">- Create an operation *Procedure*.</span></span> <span data-ttu-id="f9bd9-284">Esta operación se usa para los mensajes de respuesta de select.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-284">This operation is used for select response messages.</span></span>|  
|<span data-ttu-id="f9bd9-285">OracleOutboundPort</span><span class="sxs-lookup"><span data-stu-id="f9bd9-285">OracleOutboundPort</span></span>|<span data-ttu-id="f9bd9-286">-Establecer **identificador** a *OracleOutboundPort*</span><span class="sxs-lookup"><span data-stu-id="f9bd9-286">- Set **Identifier** to *OracleOutboundPort*</span></span><br /><br /> <span data-ttu-id="f9bd9-287">-Establecer **tipo** a *OracleOutboundPortType*</span><span class="sxs-lookup"><span data-stu-id="f9bd9-287">- Set **Type** to *OracleOutboundPortType*</span></span><br /><br /> <span data-ttu-id="f9bd9-288">-Establecer **patrón de comunicación** a *de solicitud-respuesta*</span><span class="sxs-lookup"><span data-stu-id="f9bd9-288">- Set **Communication Pattern** to *Request-Response*</span></span><br /><br /> <span data-ttu-id="f9bd9-289">-Establecer **dirección de comunicación** a *envío y recepción*</span><span class="sxs-lookup"><span data-stu-id="f9bd9-289">- Set **Communication Direction** to *Send-Receive*</span></span>|  
  
### <a name="specify-messages-for-action-shapes-and-connect-to-ports"></a><span data-ttu-id="f9bd9-290">Especifique los mensajes para las formas Acción y conectar a los puertos</span><span class="sxs-lookup"><span data-stu-id="f9bd9-290">Specify Messages for Action Shapes and Connect to Ports</span></span>  
 <span data-ttu-id="f9bd9-291">En la tabla siguiente especifica las propiedades y sus valores que se deben establecer para especificar los mensajes para las formas Acción y vincular los mensajes a los puertos.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-291">The following table specifies the properties and their values that you should set to specify messages for action shapes and to link the messages to the ports.</span></span> <span data-ttu-id="f9bd9-292">Los nombres que aparecen en la columna de forma son los nombres de las formas de mensaje como se muestra en la orquestación que se ha mencionado anteriormente.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-292">The names listed in the Shape column are the names of the message shapes as displayed in the orchestration mentioned earlier.</span></span>  
  
|<span data-ttu-id="f9bd9-293">Forma</span><span class="sxs-lookup"><span data-stu-id="f9bd9-293">Shape</span></span>|<span data-ttu-id="f9bd9-294">Propiedades</span><span class="sxs-lookup"><span data-stu-id="f9bd9-294">Properties</span></span>|  
|-----------|----------------|  
|<span data-ttu-id="f9bd9-295">ReceiveNotification</span><span class="sxs-lookup"><span data-stu-id="f9bd9-295">ReceiveNotification</span></span>|<span data-ttu-id="f9bd9-296">-Establecer **mensaje** a *NotifyReceive*</span><span class="sxs-lookup"><span data-stu-id="f9bd9-296">- Set **Message** to *NotifyReceive*</span></span><br /><br /> <span data-ttu-id="f9bd9-297">-Establecer **operación** a *OracleNotifyPort.Notify.Request*</span><span class="sxs-lookup"><span data-stu-id="f9bd9-297">- Set **Operation** to *OracleNotifyPort.Notify.Request*</span></span>|  
|<span data-ttu-id="f9bd9-298">SaveNotification</span><span class="sxs-lookup"><span data-stu-id="f9bd9-298">SaveNotification</span></span>|<span data-ttu-id="f9bd9-299">-Establecer **mensaje** a *NotifyReceive*</span><span class="sxs-lookup"><span data-stu-id="f9bd9-299">- Set **Message** to *NotifyReceive*</span></span><br /><br /> <span data-ttu-id="f9bd9-300">-Establecer **operación** a *SaveMessagePort.Notify.Request*</span><span class="sxs-lookup"><span data-stu-id="f9bd9-300">- Set **Operation** to *SaveMessagePort.Notify.Request*</span></span>|  
|<span data-ttu-id="f9bd9-301">SendProcMessage</span><span class="sxs-lookup"><span data-stu-id="f9bd9-301">SendProcMessage</span></span>|<span data-ttu-id="f9bd9-302">-Establecer **mensaje** a *procedimiento*</span><span class="sxs-lookup"><span data-stu-id="f9bd9-302">- Set **Message** to *Procedure*</span></span><br /><br /> <span data-ttu-id="f9bd9-303">-Establecer **operación** a *OracleOutboundPort.Procedure.Request*</span><span class="sxs-lookup"><span data-stu-id="f9bd9-303">- Set **Operation** to *OracleOutboundPort.Procedure.Request*</span></span>|  
|<span data-ttu-id="f9bd9-304">ReceiveProcResponse</span><span class="sxs-lookup"><span data-stu-id="f9bd9-304">ReceiveProcResponse</span></span>|<span data-ttu-id="f9bd9-305">-Establecer **mensaje** a *ProcedureResponse*</span><span class="sxs-lookup"><span data-stu-id="f9bd9-305">- Set **Message** to *ProcedureResponse*</span></span><br /><br /> <span data-ttu-id="f9bd9-306">-Establecer **operación** a *OracleOutboundPort.Procedure.Response*</span><span class="sxs-lookup"><span data-stu-id="f9bd9-306">- Set **Operation** to *OracleOutboundPort.Procedure.Response*</span></span>|  
|<span data-ttu-id="f9bd9-307">SaveProcResponse</span><span class="sxs-lookup"><span data-stu-id="f9bd9-307">SaveProcResponse</span></span>|<span data-ttu-id="f9bd9-308">-Establecer **mensaje** a *ProedureResponse*</span><span class="sxs-lookup"><span data-stu-id="f9bd9-308">- Set **Message** to *ProedureResponse*</span></span><br /><br /> <span data-ttu-id="f9bd9-309">-Establecer **operación** a *SaveMessagePort.Procedure.Request*</span><span class="sxs-lookup"><span data-stu-id="f9bd9-309">- Set **Operation** to *SaveMessagePort.Procedure.Request*</span></span>|  
  
 <span data-ttu-id="f9bd9-310">Después de especificar estas propiedades, están conectados a los puertos y formas de mensaje y se completa la orquestación.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-310">After you have specified these properties, the message shapes and ports are connected and your orchestration is complete.</span></span>  
  
 <span data-ttu-id="f9bd9-311">Ahora debe compilar la solución de BizTalk e implementarla en un [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f9bd9-311">You must now build the BizTalk solution and deploy it to a [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="f9bd9-312">Para obtener más información, consulte [compilar y ejecutar orquestaciones](../../core/building-and-running-orchestrations.md).</span><span class="sxs-lookup"><span data-stu-id="f9bd9-312">For more information, see [Building and Running Orchestrations](../../core/building-and-running-orchestrations.md).</span></span>  
  
## <a name="configuring-the-biztalk-application"></a><span data-ttu-id="f9bd9-313">Configuración de la aplicación de BizTalk</span><span class="sxs-lookup"><span data-stu-id="f9bd9-313">Configuring the BizTalk Application</span></span>  
 <span data-ttu-id="f9bd9-314">Después de haber implementado el proyecto de BizTalk, aparece la orquestación que creó anteriormente en el **orquestaciones** panel en el [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] consola de administración.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-314">After you have deployed the BizTalk project, the orchestration you created earlier is listed under the **Orchestrations** pane in the [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="f9bd9-315">Debe usar el [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] consola de administración para configurar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-315">You must use the [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console to configure the application.</span></span> <span data-ttu-id="f9bd9-316">Para ver un tutorial, vea [Tutorial: implementar una aplicación básica de BizTalk](Walkthrough:%20Deploying%20a%20Basic%20BizTalk%20Application.md).</span><span class="sxs-lookup"><span data-stu-id="f9bd9-316">For a walkthrough, see [Walkthrough: Deploying a Basic BizTalk Application](Walkthrough:%20Deploying%20a%20Basic%20BizTalk%20Application.md).</span></span>
  
 <span data-ttu-id="f9bd9-317">Configuración de una aplicación implica:</span><span class="sxs-lookup"><span data-stu-id="f9bd9-317">Configuring an application involves:</span></span>  
  
- <span data-ttu-id="f9bd9-318">Selección de un host de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-318">Selecting a host for the application.</span></span>  
  
- <span data-ttu-id="f9bd9-319">Asignación de los puertos que ha creado en la orquestación con puertos físicos en el [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] consola de administración.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-319">Mapping the ports that you created in your orchestration to physical ports in the [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="f9bd9-320">Para esta orquestación, debe:</span><span class="sxs-lookup"><span data-stu-id="f9bd9-320">For this orchestration you must:</span></span>  
  
  - <span data-ttu-id="f9bd9-321">Definir un WCF-Custom físico o puerto de recepción WCF-OracleDB unidireccional.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-321">Define a physical WCF-Custom or WCF-OracleDB one-way receive port.</span></span> <span data-ttu-id="f9bd9-322">Este puerto de escucha de notificaciones que proceden de la base de datos de Oracle.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-322">This port listens for notifications coming from the Oracle database.</span></span> <span data-ttu-id="f9bd9-323">Para obtener información sobre cómo crear puertos de recepción, vea [configurar manualmente un enlace de puerto físico para el adaptador de base de datos de Oracle](../../adapters-and-accelerators/adapter-oracle-database/manually-configure-a-physical-port-binding-to-the-oracle-database-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="f9bd9-323">For information about how to create receive ports, see [Manually configure a physical port binding to the Oracle Database Adapter](../../adapters-and-accelerators/adapter-oracle-database/manually-configure-a-physical-port-binding-to-the-oracle-database-adapter.md).</span></span> <span data-ttu-id="f9bd9-324">Asegúrese de que especificar las siguientes propiedades de enlace para el puerto de recepción.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-324">Make sure you specify the following binding properties for the receive port.</span></span>  
  
    > [!IMPORTANT]
    >  <span data-ttu-id="f9bd9-325">No es necesario realizar este paso si especifica las propiedades de enlace en tiempo de diseño.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-325">You do not need to perform this step if you specified the binding properties at design-time.</span></span> <span data-ttu-id="f9bd9-326">En tal caso, puede crear un puerto de recepción con el conjunto de propiedades de enlace necesaria, importando el archivo de enlace creado por el [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f9bd9-326">In such a case, you can create a receive port, with the required binding properties set, by importing the binding file created by the [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span> <span data-ttu-id="f9bd9-327">Para obtener más información, consulte [configurar un enlace de puerto físico mediante un archivo de enlace de puerto a la base de datos de Oracle](../../adapters-and-accelerators/adapter-oracle-database/configure-a-physical-port-binding-using-a-port-binding-file-to-oracle-database.md).</span><span class="sxs-lookup"><span data-stu-id="f9bd9-327">For more information see [Configure a physical port binding using a port binding file to Oracle Database](../../adapters-and-accelerators/adapter-oracle-database/configure-a-physical-port-binding-using-a-port-binding-file-to-oracle-database.md).</span></span>  
  
    |<span data-ttu-id="f9bd9-328">Propiedad de enlace</span><span class="sxs-lookup"><span data-stu-id="f9bd9-328">Binding Property</span></span>|<span data-ttu-id="f9bd9-329">Valor</span><span class="sxs-lookup"><span data-stu-id="f9bd9-329">Value</span></span>|  
    |----------------------|-----------|  
    |<span data-ttu-id="f9bd9-330">**InboundOperationType**</span><span class="sxs-lookup"><span data-stu-id="f9bd9-330">**InboundOperationType**</span></span>|<span data-ttu-id="f9bd9-331">Establezca esta opción en **notificación**.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-331">Set this to **Notification**.</span></span>|  
    |<span data-ttu-id="f9bd9-332">**NotificationPort**</span><span class="sxs-lookup"><span data-stu-id="f9bd9-332">**NotificationPort**</span></span>|<span data-ttu-id="f9bd9-333">Especifica el número de puerto que debe abrir ODP.NET para realizar escuchas para la notificación de cambio de base de datos de base de datos de Oracle.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-333">Specifies the port number that ODP.NET must open to listen for database change notification from Oracle database.</span></span> <span data-ttu-id="f9bd9-334">Establezca esta opción en el mismo número de puerto que debe haber agregado a la lista de excepciones de Firewall de Windows.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-334">Set this to the same port number that you must have added to the Windows Firewall exceptions list.</span></span> <span data-ttu-id="f9bd9-335">Para obtener instrucciones sobre cómo agregar puertos a la lista de excepciones de Firewall de Windows, consulte [ http://go.microsoft.com/fwlink/?LinkID=196959 ](http://go.microsoft.com/fwlink/?LinkID=196959).</span><span class="sxs-lookup"><span data-stu-id="f9bd9-335">For instructions on how to add ports to Windows Firewall exceptions list, see [http://go.microsoft.com/fwlink/?LinkID=196959](http://go.microsoft.com/fwlink/?LinkID=196959).</span></span><br /><br /> <span data-ttu-id="f9bd9-336">**Importante:** si se establece en el valor predeterminado de -1, tendrá que deshabilitar completamente el Firewall de Windows para recibir mensajes de notificación.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-336">**Important:** If you set this to the default value of -1, you will have to completely disable Windows Firewall to receive notification messages.</span></span>|  
    |<span data-ttu-id="f9bd9-337">**NotificationStatement**</span><span class="sxs-lookup"><span data-stu-id="f9bd9-337">**NotificationStatement**</span></span>|<span data-ttu-id="f9bd9-338">Establezca esta opción en:</span><span class="sxs-lookup"><span data-stu-id="f9bd9-338">Set this to:</span></span><br /><br /> `SELECT TID,ACCOUNT,PROCESSED FROM SCOTT.ACCOUNTACTIVITY WHERE PROCESSED = ‘n’`<br /><br /> <span data-ttu-id="f9bd9-339">**Nota:** debe especificar el nombre de tabla, junto con el nombre del esquema.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-339">**Note:** You must specify the table name along with the schema name.</span></span> <span data-ttu-id="f9bd9-340">Por ejemplo, `SCOTT.ACCOUNTACTIVITY`.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-340">For example, `SCOTT.ACCOUNTACTIVITY`.</span></span>|  
    |<span data-ttu-id="f9bd9-341">**NotifyOnListenerStart**</span><span class="sxs-lookup"><span data-stu-id="f9bd9-341">**NotifyOnListenerStart**</span></span>|<span data-ttu-id="f9bd9-342">Establezca esta opción en **True**.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-342">Set this to **True**.</span></span>|  
  
     <span data-ttu-id="f9bd9-343">Para obtener más información acerca de las propiedades de enlace diferente, consulte [trabajar con el adaptador de BizTalk para propiedades de enlace de base de datos de Oracle](https://msdn.microsoft.com/library/dd788467.aspx).</span><span class="sxs-lookup"><span data-stu-id="f9bd9-343">For more information about the different binding properties, see [Working with BizTalk Adapter for Oracle Database Binding Properties](https://msdn.microsoft.com/library/dd788467.aspx).</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="f9bd9-344">Se recomienda configurar el nivel de aislamiento de transacción y el tiempo de espera de transacción al realizar operaciones de entrada mediante el [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f9bd9-344">We recommend configuring the transaction isolation level and the transaction timeout while performing inbound operations using the [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)].</span></span> <span data-ttu-id="f9bd9-345">Puede hacerlo agregando el servicio de comportamiento al configurar el WCF-Custom o WCF-OracleDB puerto de recepción.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-345">You can do so by adding the service behavior while configuring the WCF-Custom or WCF-OracleDB receive port.</span></span> <span data-ttu-id="f9bd9-346">Para obtener instrucciones sobre cómo agregar el comportamiento del servicio, consulte [configurar el nivel de aislamiento de transacción y el tiempo de espera de transacción](../../adapters-and-accelerators/adapter-oracle-database/configure-transaction-isolation-level-and-transaction-timeout-with-oracle-db.md).</span><span class="sxs-lookup"><span data-stu-id="f9bd9-346">For instruction on how to add the service behavior, see [Configure Transaction Isolation Level and Transaction Timeout](../../adapters-and-accelerators/adapter-oracle-database/configure-transaction-isolation-level-and-transaction-timeout-with-oracle-db.md).</span></span>  
  
  - <span data-ttu-id="f9bd9-347">Definir un puerto de envío WCF-Custom o WCF-OracleDB físico para enviar mensajes a la base de datos de Oracle para ejecutar el procedimiento PROCESS_REOCRDS.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-347">Define a physical WCF-Custom or WCF-OracleDB send port to send messages to the Oracle database to execute the PROCESS_REOCRDS procedure.</span></span> <span data-ttu-id="f9bd9-348">También debe especificar la acción en el puerto de envío.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-348">You must also specify the action in the send port.</span></span>  
  
  - <span data-ttu-id="f9bd9-349">Definir una ubicación en el disco duro y un puerto de archivo correspondiente donde la orquestación de BizTalk quitará los mensajes de la base de datos de Oracle.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-349">Define a location on the hard disk and a corresponding file port where the BizTalk orchestration will drop the messages from the Oracle database.</span></span> <span data-ttu-id="f9bd9-350">Estos serán los mensajes de notificación recibidos de la base de datos de Oracle y los mensajes para el procedimiento PROCESS_RECORDS que se ejecuta a través de la WCF-Custom o WCF-OracleDB de puerto de envío.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-350">These will be the notification messages received from the Oracle database and messages for the PROCESS_RECORDS procedure you execute through the WCF-Custom or WCF-OracleDB send port.</span></span>  
  
## <a name="starting-the-application"></a><span data-ttu-id="f9bd9-351">Iniciar la aplicación</span><span class="sxs-lookup"><span data-stu-id="f9bd9-351">Starting the Application</span></span>  
 <span data-ttu-id="f9bd9-352">Debe iniciar la aplicación de BizTalk para recibir mensajes de notificación de la base de datos de Oracle y para ejecutar el procedimiento PROCESS_RECORDS.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-352">You must start the BizTalk application for receiving notification messages from the Oracle database and for executing the PROCESS_RECORDS procedure.</span></span> <span data-ttu-id="f9bd9-353">Para obtener instrucciones acerca de cómo iniciar una aplicación de BizTalk, consulte [cómo iniciar una orquestación](../../core/how-to-start-an-orchestration.md).</span><span class="sxs-lookup"><span data-stu-id="f9bd9-353">For instructions on starting a BizTalk application, see [How to Start an Orchestration](../../core/how-to-start-an-orchestration.md).</span></span>  
  
 <span data-ttu-id="f9bd9-354">En esta etapa, asegúrese de que:</span><span class="sxs-lookup"><span data-stu-id="f9bd9-354">At this stage, make sure:</span></span>  
  
-   <span data-ttu-id="f9bd9-355">El WCF-Custom o WCF-OracleDB unidireccional puerto de recepción, que recibe los mensajes de notificación de la base de datos se está ejecutando de Oracle.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-355">The WCF-Custom or WCF-OracleDB one-way receive port, which receives the notification messages from the Oracle database is running.</span></span>  
  
-   <span data-ttu-id="f9bd9-356">El puerto de envío WCF-Custom o WCF-OracleDB para ejecutar el procedimiento PROCESS_RECORDS se está ejecutando.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-356">The WCF-Custom or WCF-OracleDB send port to execute the PROCESS_RECORDS procedure is running.</span></span>  
  
-   <span data-ttu-id="f9bd9-357">El puerto de envío de archivo que recibe los mensajes de la base de datos de Oracle, se está ejecutando.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-357">The FILE send port, which receives messages from the Oracle database, is running.</span></span>  
  
-   <span data-ttu-id="f9bd9-358">La orquestación de BizTalk para la operación se está ejecutando.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-358">The BizTalk orchestration for the operation is running.</span></span>  
  
## <a name="executing-the-operation"></a><span data-ttu-id="f9bd9-359">Ejecutar la operación</span><span class="sxs-lookup"><span data-stu-id="f9bd9-359">Executing the Operation</span></span>  
 <span data-ttu-id="f9bd9-360">Suponga que la tabla ACCOUNTACTIVITY ya tiene algunos registros.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-360">Assume that the ACCOUNTACTIVITY table already has some records.</span></span> <span data-ttu-id="f9bd9-361">Además, asegúrese de que el mensaje XML para ejecutar el procedimiento PROCESS_RECORDS está disponible en C:\TestLocation\MessageIn.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-361">Also, make sure the XML message to execute PROCESS_RECORDS procedure is available at C:\TestLocation\MessageIn.</span></span> <span data-ttu-id="f9bd9-362">El archivo XML debe ser similar a lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="f9bd9-362">The XML file should resemble the following:</span></span>  
  
```  
<PROCESS_RECORDS xmlns="http://Microsoft.LobServices.OracleDB/2007/03/SCOTT/Package/ACCOUNT_PKG"/>  
```  
  
 <span data-ttu-id="f9bd9-363">Una vez que se inicia la orquestación de BizTalk, el siguiente conjunto de acciones tienen lugar, en la misma secuencia:</span><span class="sxs-lookup"><span data-stu-id="f9bd9-363">Once the BizTalk orchestration is started, the following set of actions take place, in the same sequence:</span></span>  
  
-   <span data-ttu-id="f9bd9-364">El adaptador recibe un mensaje de notificación que se parezca a lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="f9bd9-364">The adapter receives a notification message that resembles the following:</span></span>  
  
    ```  
    \<?xml version="1.0" encoding="utf-8" ?\>   
    <Notification xmlns="http://Microsoft.LobServices.OracleDB/2007/03/Notification/">  
      <Info>ListenerStarted</Info>   
      <Source>OracleDBBinding</Source>   
      <Type>Startup</Type>   
    </Notification>  
    ```  
  
     <span data-ttu-id="f9bd9-365">Este mensaje le notifica que se ha iniciado el puerto de recepción para recibir los mensajes de notificación.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-365">This message notifies that the receive port for receiving the notification messages is started.</span></span> <span data-ttu-id="f9bd9-366">Tenga en cuenta que el valor de la `<Info>` elemento es "ListnerStarted".</span><span class="sxs-lookup"><span data-stu-id="f9bd9-366">Note that the value for the `<Info>` element is “ListnerStarted”.</span></span>  
  
-   <span data-ttu-id="f9bd9-367">El adaptador ejecuta el procedimiento PROCESS_RECORDS.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-367">The adapter executes the PROCESS_RECORDS procedure.</span></span> <span data-ttu-id="f9bd9-368">Es la siguiente respuesta de la base de datos de Oracle para el procedimiento.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-368">The next response from the Oracle database is for the procedure.</span></span>  
  
    ```  
    <?xml version="1.0" encoding="utf-8" ?>   
    <PROCESS_RECORDSResponse xmlns="http://Microsoft.LobServices.OracleDB/2007/03/SCOTT/Package/ACCOUNT_PKG">  
      <TABLE_DATA>  
        <xs:schema id="NewDataSet" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">  
          <xs:element msdata:IsDataSet="true" name="NewDataSet">  
            <xs:complexType>  
              <xs:sequence>  
                <xs:element minOccurs="0" maxOccurs="unbounded" name="NewTable">  
                  <xs:complexType>  
                    <xs:sequence>  
                      <xs:element minOccurs="0" name="TID" type="xs:decimal" />   
                      <xs:element minOccurs="0" name="ACCOUNT" type="xs:decimal" />   
                      <xs:element minOccurs="0" name="PROCESSED" type="xs:string" />   
                    </xs:sequence>  
                  </xs:complexType>  
                </xs:element>  
              </xs:sequence>  
            </xs:complexType>  
          </xs:element>  
        </xs:schema>  
        <diffgr:diffgram xmlns:diffgr="urn:schemas-microsoft-com:xml-diffgram-v1">  
        <NewDataSet xmlns="">  
          <NewTable>  
            <TID>1</TID>   
            <ACCOUNT>100001</ACCOUNT>   
            <PROCESSED>n</PROCESSED>   
          </NewTable>  
          <NewTable>  
            ......  
            ......  
          </NewTable>  
          ......  
          ......  
        </NewDataSet>  
        </diffgr:diffgram>  
      </TABLE_DATA>  
    </PROCESS_RECORDSResponse>  
    ```  
  
     <span data-ttu-id="f9bd9-369">Esta es la respuesta para ejecutar la instrucción SELECT como parte del procedimiento PROCESS_RECORDS.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-369">This is the response for the SELECT statement execute as part of the PROCESS_RECORDS procedure.</span></span>  
  
-   <span data-ttu-id="f9bd9-370">El procedimiento PROCESS_RECORDS también actualiza las filas para establecer procesados en 'y'.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-370">The PROCESS_RECORDS procedure also updates the rows to set PROCESSED to ‘y’.</span></span> <span data-ttu-id="f9bd9-371">Por lo tanto, el adaptador recibe otra notificación de la operación de actualización.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-371">Hence, the adapter receives another notification for the Update operation.</span></span>  
  
    ```  
    <?xml version="1.0" encoding="utf-8" ?>  
    <Notification xmlns="http://Microsoft.LobServices.OracleDB/2007/03/Notification/">  
      <Details>  
        <NotificationDetails>  
          <ResourceName>SCOTT.ACCOUNTACTIVITY</ResourceName>   
          <Info>32</Info>   
          <QueryId>0</QueryId>   
        </NotificationDetails>  
      </Details>  
      <Info>Update</Info>   
      <ResourceNames>  
        <string xmlns="http://schemas.microsoft.com/2003/10/Serialization/Arrays">SCOTT.ACCOUNTACTIVITY</string>   
      </ResourceNames>  
      <Source>Data</Source>   
      <Type>Change</Type>   
    </Notification>  
    ```  
  
     <span data-ttu-id="f9bd9-372">Tenga en cuenta que el `Info` elemento contiene "Update".</span><span class="sxs-lookup"><span data-stu-id="f9bd9-372">Note that the `Info` element contains “Update”.</span></span>  
  
-   <span data-ttu-id="f9bd9-373">Después de la segunda notificación, el adaptador nuevo ejecuta el procedimiento PROCESS_RECORDS.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-373">After the second notification, the adapter again executes the PROCESS_RECORDS procedure.</span></span> <span data-ttu-id="f9bd9-374">Sin embargo, ahora porque no hay ningún registro que procesados columna está establecida en ' n ', el procedimiento devuelve una respuesta vacía similar al siguiente.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-374">However, now because there are no records where PROCESSED column is set to ‘n’, the procedure returns an empty response resembling the following.</span></span>  
  
    ```  
    <?xml version="1.0" encoding="utf-8" ?>   
    <PROCESS_RECORDSResponse xmlns="http://Microsoft.LobServices.OracleDB/2007/03/SCOTT/Package/ACCOUNT_PKG">  
      <TABLE_DATA>  
        <xs:schema id="NewDataSet" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">  
          <xs:element msdata:IsDataSet="true" name="NewDataSet">  
            <xs:complexType>  
              <xs:sequence>  
                <xs:element minOccurs="0" maxOccurs="unbounded" name="NewTable">  
                  <xs:complexType>  
                    <xs:sequence>  
                      <xs:element minOccurs="0" name="TID" type="xs:decimal" />   
                      <xs:element minOccurs="0" name="ACCOUNT" type="xs:decimal" />   
                      <xs:element minOccurs="0" name="PROCESSED" type="xs:string" />   
                    </xs:sequence>  
                  </xs:complexType>  
                </xs:element>  
              </xs:sequence>  
            </xs:complexType>  
          </xs:element>  
        </xs:schema>  
        <diffgr:diffgram xmlns:diffgr="urn:schemas-microsoft-com:xml-diffgram-v1">  
          <NewDataSet xmlns="" />   
        </diffgr:diffgram>  
      </TABLE_DATA>  
    </PROCESS_RECORDSResponse>  
    ```  
  
## <a name="best-practices"></a><span data-ttu-id="f9bd9-375">Procedimientos recomendados</span><span class="sxs-lookup"><span data-stu-id="f9bd9-375">Best Practices</span></span>  
 <span data-ttu-id="f9bd9-376">Una vez que haya implementado y configurado el proyecto de BizTalk, puede exportar opciones de configuración a un archivo XML llamado el archivo de enlace.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-376">After you have deployed and configured the BizTalk project, you can export configuration settings to an XML file called the binding file.</span></span> <span data-ttu-id="f9bd9-377">Cuando genere un archivo de enlace, puede importar los valores de configuración desde el archivo, por lo que no es necesario crear los puertos de envío y recepción para la misma orquestación.</span><span class="sxs-lookup"><span data-stu-id="f9bd9-377">Once you generate a binding file, you can import the configuration settings from the file, so that you do not need to create the send ports and receive ports for the same orchestration.</span></span> <span data-ttu-id="f9bd9-378">Para obtener más información acerca de los archivos de enlace, consulte [enlaces del adaptador de base de datos de Oracle reutilizar](../../adapters-and-accelerators/adapter-oracle-database/reuse-oracle-database-adapter-bindings.md).</span><span class="sxs-lookup"><span data-stu-id="f9bd9-378">For more information about binding files, see [Reuse Oracle Database Adapter bindings](../../adapters-and-accelerators/adapter-oracle-database/reuse-oracle-database-adapter-bindings.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f9bd9-379">Vea también</span><span class="sxs-lookup"><span data-stu-id="f9bd9-379">See Also</span></span>  
 [<span data-ttu-id="f9bd9-380">Recibir notificaciones de cambio de base de datos de Oracle con BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="f9bd9-380">Receiving Oracle Database Change Notifications Using BizTalk Server</span></span>](../../adapters-and-accelerators/adapter-oracle-database/receive-oracle-database-change-notifications-using-biztalk-server.md)
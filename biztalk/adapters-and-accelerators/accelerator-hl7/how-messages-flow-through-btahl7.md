---
title: "Cómo fluyen los mensajes a través de BTAHL7 | Documentos de Microsoft"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- messages, message processing
- messages, message flow
- BTAHL7, message flow
ms.assetid: dd4599af-500d-4e52-85b2-8b6a28fd3f0a
caps.latest.revision: "9"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 40ac6defd3b0cf99d2f0e53b3173b32e09efa0c8
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/20/2017
---
# <a name="how-messages-flow-through-btahl7"></a><span data-ttu-id="010e1-102">Cómo fluyen los mensajes a través de BTAHL7</span><span class="sxs-lookup"><span data-stu-id="010e1-102">How Messages Flow through BTAHL7</span></span>
<span data-ttu-id="010e1-103">Al instalar [!INCLUDE[btsCoName](../../includes/btsconame-md.md)] Acelerador de BizTalk para HL7 ([!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)]) en la parte superior de [!INCLUDE[btsCoName](../../includes/btsconame-md.md)] [!INCLUDE[btsBizTalkServer2006r3](../../includes/btsbiztalkserver2006r3-md.md)], agregará [!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)] componentes para el [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] arquitectura.</span><span class="sxs-lookup"><span data-stu-id="010e1-103">When you install [!INCLUDE[btsCoName](../../includes/btsconame-md.md)] BizTalk Accelerator for HL7 ([!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)]) on top of [!INCLUDE[btsCoName](../../includes/btsconame-md.md)][!INCLUDE[btsBizTalkServer2006r3](../../includes/btsbiztalkserver2006r3-md.md)], you add [!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)] components to the [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] architecture.</span></span> <span data-ttu-id="010e1-104">La siguiente ilustración muestra el sistema combinado, que proporciona una introducción a la arquitectura de [!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)].</span><span class="sxs-lookup"><span data-stu-id="010e1-104">The following figure shows the combined system, which provides an architectural overview of [!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)].</span></span>  
  
 ![](../../adapters-and-accelerators/accelerator-hl7/media/bcd-hl7-sys-archc.gif "bcd_hl7_sys_archc")  
  
## <a name="message-processing-flow"></a><span data-ttu-id="010e1-105">Flujo de procesamiento de mensajes</span><span class="sxs-lookup"><span data-stu-id="010e1-105">Message Processing Flow</span></span>  
 <span data-ttu-id="010e1-106">Cuando una aplicación de línea de negocio envía un mensaje a la [!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)] ocurre de sistema, lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="010e1-106">When a line-of-business application sends a message to the [!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)] system, the following occurs:</span></span>  
  
1.  <span data-ttu-id="010e1-107">Si el mensaje es un mensaje HL7, [!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)] recibe a través de un adaptador (normalmente un adaptador MLLP).</span><span class="sxs-lookup"><span data-stu-id="010e1-107">If the message is an HL7 message, [!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)] receives it through an adapter (usually an MLLP adapter).</span></span> <span data-ttu-id="010e1-108">Si se trata de un mensaje XML, [!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)] recibe a través de un adaptador (normalmente un adaptador de HTTP).</span><span class="sxs-lookup"><span data-stu-id="010e1-108">If it is an XML message, [!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)] receives it through an adapter (usually an HTTP adapter).</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="010e1-109">Pueden transportar mensajes XML 2.X y 2. en cualquier adaptador; Sin embargo, normalmente se transportan V2. Mensajes de X a través de un adaptador MLLP y normalmente transportan los mensajes XML de 2. a través de un adaptador de HTTP.</span><span class="sxs-lookup"><span data-stu-id="010e1-109">You can transport both 2.X and 2.XML messages over any adapter; however, you would usually transport V2.X messages over an MLLP adapter, and you would usually transport 2.XML messages over an HTTP adapter.</span></span>  
  
2.  <span data-ttu-id="010e1-110">El mensaje se enruta a través de la canalización de recepción para el análisis, el Desensamblador y validación.</span><span class="sxs-lookup"><span data-stu-id="010e1-110">The message is routed through the receive pipeline for parsing by the disassembler, and validation.</span></span>  
  
    1.  <span data-ttu-id="010e1-111">Si el mensaje entrante es un mensaje HL7, el Desensamblador de archivos sin formato (DASM) descompone en XML.</span><span class="sxs-lookup"><span data-stu-id="010e1-111">If the incoming message is an HL7 message, the flat file disassembler (DASM) disassembles it into XML.</span></span> <span data-ttu-id="010e1-112">Si el mensaje entrante es un mensaje XML, el XML DASM se desensambla.</span><span class="sxs-lookup"><span data-stu-id="010e1-112">If the incoming message is an XML message, the XML DASM disassembles it.</span></span>  
  
    2.  <span data-ttu-id="010e1-113">Si el mensaje entrante es un mensaje por lotes, el Desensamblador desensambla en mensajes individuales.</span><span class="sxs-lookup"><span data-stu-id="010e1-113">If the incoming message is a batch message, the disassembler disassembles into the individual messages.</span></span> <span data-ttu-id="010e1-114">(Para obtener más información, consulte [de procesamiento por lotes mensajes](../../adapters-and-accelerators/accelerator-hl7/batch-message-processing.md) y [el procesamiento por lotes de mensajes](../../adapters-and-accelerators/accelerator-hl7/message-batching.md).)</span><span class="sxs-lookup"><span data-stu-id="010e1-114">(For more details, see [Batch Message Processing](../../adapters-and-accelerators/accelerator-hl7/batch-message-processing.md) and [Message Batching](../../adapters-and-accelerators/accelerator-hl7/message-batching.md).)</span></span>  
  
    3.  <span data-ttu-id="010e1-115">El DASM, a continuación, valida el mensaje.</span><span class="sxs-lookup"><span data-stu-id="010e1-115">The DASM then validates the message.</span></span>  
  
    4.  <span data-ttu-id="010e1-116">Si usas un bidireccional MLLP adaptador de recepción y si se ha validado el mensaje, el Desensamblador [!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)] envía una confirmación (ACK) al remitente original del mensaje a través del mismo adaptador que recibió el mensaje original.</span><span class="sxs-lookup"><span data-stu-id="010e1-116">If you use a two-way MLLP receive adapter, and if the disassembler has validated the message, [!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)] sends an acknowledgment (ACK) to the original sender of the message through the same adapter that received the original message.</span></span> <span data-ttu-id="010e1-117">Si no es así, [!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)] envía una confirmación negativa (NAK).</span><span class="sxs-lookup"><span data-stu-id="010e1-117">If not, [!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)] sends a negative acknowledgment (NAK).</span></span> <span data-ttu-id="010e1-118">(Cómo se lleva a cabo este paso depende de la configuración de confirmación.</span><span class="sxs-lookup"><span data-stu-id="010e1-118">(How this step is accomplished depends on the ACK configuration.</span></span> <span data-ttu-id="010e1-119">Para obtener más información, consulte [modos de mensaje de confirmación](../../adapters-and-accelerators/accelerator-hl7/ack-message-modes.md).)</span><span class="sxs-lookup"><span data-stu-id="010e1-119">For details, see [ACK Message Modes](../../adapters-and-accelerators/accelerator-hl7/ack-message-modes.md).)</span></span>  
  
    5.  <span data-ttu-id="010e1-120">Si no se utiliza en dos sentidos MLLP, a continuación, adaptador de recepción [!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)] genera una confirmación o confirmaciones (o NAK o NAKs) y los depósitos en la base de datos de cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="010e1-120">If you do not use a two-way MLLP receive adapter, then [!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)] generates an ACK or ACKs (or NAK or NAKs) and deposits it into the MessageBox database.</span></span> [!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)]<span data-ttu-id="010e1-121">a continuación, lo enruta a las personas adecuadas en función de la configuración de puerto de envío, que puede usar cualquiera de los demás adaptadores (además de MLLP).</span><span class="sxs-lookup"><span data-stu-id="010e1-121"> then routes it to the appropriate parties based on the send port configuration, which could use any of the other adapters (besides MLLP).</span></span>  
  
     <span data-ttu-id="010e1-122">Para obtener una lista más completa de los procesos se realiza en el archivo sin formato y desensambladores XML, vea [Acelerador de BizTalk para HL7 componentes](../../adapters-and-accelerators/accelerator-hl7/biztalk-accelerator-for-hl7-components.md).</span><span class="sxs-lookup"><span data-stu-id="010e1-122">For a more complete listing of the processes performed in the flat file and XML disassemblers, see [BizTalk Accelerator for HL7 Components](../../adapters-and-accelerators/accelerator-hl7/biztalk-accelerator-for-hl7-components.md).</span></span>  
  
3.  <span data-ttu-id="010e1-123">Después de que el mensaje pasa por el adaptador y la canalización de recepción, [!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)] pasa el mensaje en la base de datos de cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="010e1-123">After the message passes through the adapter and the receive pipeline, [!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)] passes the message into the MessageBox database.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="010e1-124">a continuación, determina dónde enviar el mensaje a continuación.</span><span class="sxs-lookup"><span data-stu-id="010e1-124"> then determines where to send the message next.</span></span> <span data-ttu-id="010e1-125">Si el mensaje forma parte de una orquestación, envía el mensaje al motor de orquestación.</span><span class="sxs-lookup"><span data-stu-id="010e1-125">If the message is part of an orchestration, it sends the message to the Orchestration Engine.</span></span>  
  
4.  <span data-ttu-id="010e1-126">El motor de orquestación procesa el mensaje.</span><span class="sxs-lookup"><span data-stu-id="010e1-126">The Orchestration Engine processes the message.</span></span>  
  
    1.  <span data-ttu-id="010e1-127">Si una asignación influye en el mensaje, la asignación transforma el mensaje de acuerdo con sus reglas.</span><span class="sxs-lookup"><span data-stu-id="010e1-127">If a map affects the message, the map transforms the message according to its rules.</span></span>  
  
    2.  <span data-ttu-id="010e1-128">Si ha configurado una regla de negocio, [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] , se invoca el motor de reglas de negocios (BRE) fuera de las canalizaciones, posiblemente en el motor de orquestaciones.</span><span class="sxs-lookup"><span data-stu-id="010e1-128">If you have set up a business rule, [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] invokes the Business Rule Engine (BRE) outside of the pipelines, potentially in the Orchestration Engine.</span></span>  
  
    3.  <span data-ttu-id="010e1-129">El motor de orquestación envía el mensaje a la base de datos de cuadro de mensajes y, a continuación, continúa procesando la orquestación.</span><span class="sxs-lookup"><span data-stu-id="010e1-129">The Orchestration Engine sends the message back to the MessageBox database, and then continues processing the orchestration.</span></span>  
  
5.  <span data-ttu-id="010e1-130">En función de la suscripción, [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] enruta el mensaje al puerto de envío.</span><span class="sxs-lookup"><span data-stu-id="010e1-130">Based on the subscription, [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] routes the message to the send port.</span></span>  
  
6.  [!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)]<span data-ttu-id="010e1-131">enruta el mensaje a través de la canalización de envío para el procesamiento siguiente (si corresponde): ensamblado y la validación.</span><span class="sxs-lookup"><span data-stu-id="010e1-131"> routes the message through the send pipeline for the following processing (if applicable): assembly and validation.</span></span>  
  
    1.  <span data-ttu-id="010e1-132">Si el mensaje será un HL7 mensaje 2.X, [!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)] ensambla el mensaje de XML en HL7 el ensamblador de archivo sin formato (ASM).</span><span class="sxs-lookup"><span data-stu-id="010e1-132">If the message will be an HL7 2.X message, [!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)] assembles the message from XML into HL7 by the flat file assembler (ASM).</span></span> <span data-ttu-id="010e1-133">Si el mensaje entrante aparecerá el mensaje XML, el XML DASM ensambla.</span><span class="sxs-lookup"><span data-stu-id="010e1-133">If the incoming message will be an XML message, the XML DASM assembles it.</span></span>  
  
    2.  <span data-ttu-id="010e1-134">Si el mensaje va a formar parte de un mensaje por lotes, [!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)] ensambla cada mensaje en el mensaje de lote.</span><span class="sxs-lookup"><span data-stu-id="010e1-134">If the message will be part of a batch message, [!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)] assembles each message into the batch message.</span></span> <span data-ttu-id="010e1-135">(Para obtener más información, consulte [de procesamiento por lotes mensajes](../../adapters-and-accelerators/accelerator-hl7/batch-message-processing.md) y [el procesamiento por lotes de mensajes](../../adapters-and-accelerators/accelerator-hl7/message-batching.md).)</span><span class="sxs-lookup"><span data-stu-id="010e1-135">(For more details, see [Batch Message Processing](../../adapters-and-accelerators/accelerator-hl7/batch-message-processing.md) and [Message Batching](../../adapters-and-accelerators/accelerator-hl7/message-batching.md).)</span></span>  
  
    3.  <span data-ttu-id="010e1-136">ASM valida el mensaje (si se habilita a través de los valores de configuración de la entidad de envío).</span><span class="sxs-lookup"><span data-stu-id="010e1-136">The ASM validates the message (if enabled through send-party configuration settings).</span></span>  
  
     <span data-ttu-id="010e1-137">Para obtener una lista más completa de los procesos se realiza en el archivo sin formato y los ensambladores XML, vea [Acelerador de BizTalk para HL7 componentes](../../adapters-and-accelerators/accelerator-hl7/biztalk-accelerator-for-hl7-components.md).</span><span class="sxs-lookup"><span data-stu-id="010e1-137">For a more complete listing of the processes performed in the flat file and XML assemblers, see [BizTalk Accelerator for HL7 Components](../../adapters-and-accelerators/accelerator-hl7/biztalk-accelerator-for-hl7-components.md).</span></span>  
  
7.  [!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)]<span data-ttu-id="010e1-138">envía el mensaje a través de un adaptador.</span><span class="sxs-lookup"><span data-stu-id="010e1-138"> sends the message through an adapter.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="010e1-139">Pueden transportar mensajes 2.X y 2. los mensajes XML a través de un número de adaptadores; Sin embargo, la mayoría de los sistemas de transporte 2.X mensajes a través de un adaptador MLLP y 2. los mensajes XML a través de un adaptador de HTTP.</span><span class="sxs-lookup"><span data-stu-id="010e1-139">You can transport 2.X messages and 2.XML messages over a number of adapters; however, most systems transport 2.X messages over an MLLP adapter, and 2.XML messages over an HTTP adapter.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="010e1-140">Vea también</span><span class="sxs-lookup"><span data-stu-id="010e1-140">See Also</span></span>  
 [<span data-ttu-id="010e1-141">¿Cómo BTAHL7 enruta los mensajes</span><span class="sxs-lookup"><span data-stu-id="010e1-141">How BTAHL7 Routes Messages</span></span>](../../adapters-and-accelerators/accelerator-hl7/how-btahl7-routes-messages.md)